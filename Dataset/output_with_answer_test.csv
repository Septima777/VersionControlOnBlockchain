url,q-title,q-viewCount,q-author,q-editor,q-creationdate,q-activity,q-lastedit,a-link,a-body,a-author,a-editor,a-creationDate,a-activity,a-lastedit
http://stackoverflow.com/questions/393954/how-to-convert-an-opencv-iplimage-to-an-sdl-surface,How to convert an OpenCV IplImage to an SDL_Surface?,7303,sgielen,sgielen,1230309352,1315945544,1230411782,,,,,,,
http://stackoverflow.com/a/10001884/1136593,How to flip image horizontaly and vertically with php,8352,Pedro Soares,,1333488777,1418855288,0,https://stackoverflow.com/questions/10001728/how-to-flip-image-horizontaly-and-vertically-with-php,"<p>You can also achieve this with the <code>imagecopy</code> family of functions if you don't happen to have ImageMagick available. See <a href=""http://uk3.php.net/manual/en/function.imagecopy.php#89658"">this example</a>:</p>

<pre><code>function ImageFlip ( $imgsrc, $mode )
{

    $width                        =    imagesx ( $imgsrc );
    $height                       =    imagesy ( $imgsrc );

    $src_x                        =    0;
    $src_y                        =    0;
    $src_width                    =    $width;
    $src_height                   =    $height;

    switch ( $mode )
    {

        case '1': //vertical
            $src_y                =    $height -1;
            $src_height           =    -$height;
        break;

        case '2': //horizontal
            $src_x                =    $width -1;
            $src_width            =    -$width;
        break;

        case '3': //both
            $src_x                =    $width -1;
            $src_y                =    $height -1;
            $src_width            =    -$width;
            $src_height           =    -$height;
        break;

        default:
            return $imgsrc;

    }

    $imgdest                    =    imagecreatetruecolor ( $width, $height );

    if ( imagecopyresampled ( $imgdest, $imgsrc, 0, 0, $src_x, $src_y , $width, $height, $src_width, $src_height ) )
    {
        return $imgdest;
    }

    return $imgsrc;

}
</code></pre>
",Jon Grant,,1333489515,1333489515,0
http://stackoverflow.com/a/1001328/266378,Detecting endianness programmatically in a C++ program,99031,Jay T,Yu Hao,1245157013,1558115812,1411894346,https://stackoverflow.com/questions/1001307/detecting-endianness-programmatically-in-a-c-program,"<p>Please see <a href=""http://vijayinterviewquestions.blogspot.com/2007/07/what-little-endian-and-big-endian-how.html"" rel=""noreferrer"">this article</a>:</p>

<blockquote>
  <p>Here is some code to determine what is
  the type of your machine</p>

<pre><code>int num = 1;
if(*(char *)&amp;num == 1)
{
    printf(""\nLittle-Endian\n"");
}
else
{
    printf(""Big-Endian\n"");
}
</code></pre>
</blockquote>
",Andrew Hare,,1245157237,1245157237,0
http://stackoverflow.com/a/100165/148668,How to test if a line segment intersects an axis-aligned rectange in 2D?,36198,metamal,,1221795575,1375644016,0,https://stackoverflow.com/questions/99353/how-to-test-if-a-line-segment-intersects-an-axis-aligned-rectange-in-2d,"<p>Wrote quite simple and working solution:</p>

<pre><code>      bool SegmentIntersectRectangle(double a_rectangleMinX,
                                 double a_rectangleMinY,
                                 double a_rectangleMaxX,
                                 double a_rectangleMaxY,
                                 double a_p1x,
                                 double a_p1y,
                                 double a_p2x,
                                 double a_p2y)
  {
    // Find min and max X for the segment

    double minX = a_p1x;
    double maxX = a_p2x;

    if(a_p1x &gt; a_p2x)
    {
      minX = a_p2x;
      maxX = a_p1x;
    }

    // Find the intersection of the segment's and rectangle's x-projections

    if(maxX &gt; a_rectangleMaxX)
    {
      maxX = a_rectangleMaxX;
    }

    if(minX &lt; a_rectangleMinX)
    {
      minX = a_rectangleMinX;
    }

    if(minX &gt; maxX) // If their projections do not intersect return false
    {
      return false;
    }

    // Find corresponding min and max Y for min and max X we found before

    double minY = a_p1y;
    double maxY = a_p2y;

    double dx = a_p2x - a_p1x;

    if(Math::Abs(dx) &gt; 0.0000001)
    {
      double a = (a_p2y - a_p1y) / dx;
      double b = a_p1y - a * a_p1x;
      minY = a * minX + b;
      maxY = a * maxX + b;
    }

    if(minY &gt; maxY)
    {
      double tmp = maxY;
      maxY = minY;
      minY = tmp;
    }

    // Find the intersection of the segment's and rectangle's y-projections

    if(maxY &gt; a_rectangleMaxY)
    {
      maxY = a_rectangleMaxY;
    }

    if(minY &lt; a_rectangleMinY)
    {
      minY = a_rectangleMinY;
    }

    if(minY &gt; maxY) // If Y-projections do not intersect return false
    {
      return false;
    }

    return true;
  }
</code></pre>
",metamal,,1221808072,1221808072,0
http://stackoverflow.com/a/10034633/1084488,How do you compare two version Strings in Java?,89284,Bill the Lizard,Andrew,1223920481,1552478056,1223932619,https://stackoverflow.com/questions/198431/how-do-you-compare-two-version-strings-in-java,"<pre><code>// VersionComparator.java
import java.util.Comparator;

public class VersionComparator implements Comparator {

    public boolean equals(Object o1, Object o2) {
        return compare(o1, o2) == 0;
    }

    public int compare(Object o1, Object o2) {
        String version1 = (String) o1;
        String version2 = (String) o2;

        VersionTokenizer tokenizer1 = new VersionTokenizer(version1);
        VersionTokenizer tokenizer2 = new VersionTokenizer(version2);

        int number1 = 0, number2 = 0;
        String suffix1 = """", suffix2 = """";

        while (tokenizer1.MoveNext()) {
            if (!tokenizer2.MoveNext()) {
                do {
                    number1 = tokenizer1.getNumber();
                    suffix1 = tokenizer1.getSuffix();
                    if (number1 != 0 || suffix1.length() != 0) {
                        // Version one is longer than number two, and non-zero
                        return 1;
                    }
                }
                while (tokenizer1.MoveNext());

                // Version one is longer than version two, but zero
                return 0;
            }

            number1 = tokenizer1.getNumber();
            suffix1 = tokenizer1.getSuffix();
            number2 = tokenizer2.getNumber();
            suffix2 = tokenizer2.getSuffix();

            if (number1 &lt; number2) {
                // Number one is less than number two
                return -1;
            }
            if (number1 &gt; number2) {
                // Number one is greater than number two
                return 1;
            }

            boolean empty1 = suffix1.length() == 0;
            boolean empty2 = suffix2.length() == 0;

            if (empty1 &amp;&amp; empty2) continue; // No suffixes
            if (empty1) return 1; // First suffix is empty (1.2 &gt; 1.2b)
            if (empty2) return -1; // Second suffix is empty (1.2a &lt; 1.2)

            // Lexical comparison of suffixes
            int result = suffix1.compareTo(suffix2);
            if (result != 0) return result;

        }
        if (tokenizer2.MoveNext()) {
            do {
                number2 = tokenizer2.getNumber();
                suffix2 = tokenizer2.getSuffix();
                if (number2 != 0 || suffix2.length() != 0) {
                    // Version one is longer than version two, and non-zero
                    return -1;
                }
            }
            while (tokenizer2.MoveNext());

            // Version two is longer than version one, but zero
            return 0;
        }
        return 0;
    }
}

// VersionTokenizer.java
public class VersionTokenizer {
    private final String _versionString;
    private final int _length;

    private int _position;
    private int _number;
    private String _suffix;
    private boolean _hasValue;

    public int getNumber() {
        return _number;
    }

    public String getSuffix() {
        return _suffix;
    }

    public boolean hasValue() {
        return _hasValue;
    }

    public VersionTokenizer(String versionString) {
        if (versionString == null)
            throw new IllegalArgumentException(""versionString is null"");

        _versionString = versionString;
        _length = versionString.length();
    }

    public boolean MoveNext() {
        _number = 0;
        _suffix = """";
        _hasValue = false;

        // No more characters
        if (_position &gt;= _length)
            return false;

        _hasValue = true;

        while (_position &lt; _length) {
            char c = _versionString.charAt(_position);
            if (c &lt; '0' || c &gt; '9') break;
            _number = _number * 10 + (c - '0');
            _position++;
        }

        int suffixStart = _position;

        while (_position &lt; _length) {
            char c = _versionString.charAt(_position);
            if (c == '.') break;
            _position++;
        }

        _suffix = _versionString.substring(suffixStart, _position);

        if (_position &lt; _length) _position++;

        return true;
    }
}
</code></pre>

<p><strong>Example:</strong></p>

<pre><code>public class Main
{
    private static VersionComparator cmp;

    public static void main (String[] args)
    {
        cmp = new VersionComparator();
        Test(new String[]{""1.1.2"", ""1.2"", ""1.2.0"", ""1.2.1"", ""1.12""});
        Test(new String[]{""1.3"", ""1.3a"", ""1.3b"", ""1.3-SNAPSHOT""});
    }

    private static void Test(String[] versions) {
        for (int i = 0; i &lt; versions.length; i++) {
            for (int j = i; j &lt; versions.length; j++) {
                Test(versions[i], versions[j]);
            }
        }
    }

    private static void Test(String v1, String v2) {
        int result = cmp.compare(v1, v2);
        String op = ""=="";
        if (result &lt; 0) op = ""&lt;"";
        if (result &gt; 0) op = ""&gt;"";
        System.out.printf(""%s %s %s\n"", v1, op, v2);
    }
}
</code></pre>

<p><strong>Output:</strong></p>

<pre><code>1.1.2 == 1.1.2                ---&gt;  same length and value
1.1.2 &lt; 1.2                   ---&gt;  first number (1) less than second number (2) =&gt; -1
1.1.2 &lt; 1.2.0                 ---&gt;  first number (1) less than second number (2) =&gt; -1
1.1.2 &lt; 1.2.1                 ---&gt;  first number (1) less than second number (2) =&gt; -1
1.1.2 &lt; 1.12                  ---&gt;  first number (1) less than second number (12) =&gt; -1
1.2 == 1.2                    ---&gt;  same length and value
1.2 == 1.2.0                  ---&gt;  first shorter than second, but zero
1.2 &lt; 1.2.1                   ---&gt;  first shorter than second, and non-zero
1.2 &lt; 1.12                    ---&gt;  first number (2) less than second number (12) =&gt; -1
1.2.0 == 1.2.0                ---&gt;  same length and value
1.2.0 &lt; 1.2.1                 ---&gt;  first number (0) less than second number (1) =&gt; -1
1.2.0 &lt; 1.12                  ---&gt;  first number (2) less than second number (12) =&gt; -1
1.2.1 == 1.2.1                ---&gt;  same length and value
1.2.1 &lt; 1.12                  ---&gt;  first number (2) less than second number (12) =&gt; -1
1.12 == 1.12                  ---&gt;  same length and value

1.3 == 1.3                    ---&gt;  same length and value
1.3 &gt; 1.3a                    ---&gt;  first suffix ('') is empty, but not second ('a') =&gt; 1
1.3 &gt; 1.3b                    ---&gt;  first suffix ('') is empty, but not second ('b') =&gt; 1
1.3 &gt; 1.3-SNAPSHOT            ---&gt;  first suffix ('') is empty, but not second ('-SNAPSHOT') =&gt; 1
1.3a == 1.3a                  ---&gt;  same length and value
1.3a &lt; 1.3b                   ---&gt;  first suffix ('a') compared to second suffix ('b') =&gt; -1
1.3a &lt; 1.3-SNAPSHOT           ---&gt;  first suffix ('a') compared to second suffix ('-SNAPSHOT') =&gt; -1
1.3b == 1.3b                  ---&gt;  same length and value
1.3b &lt; 1.3-SNAPSHOT           ---&gt;  first suffix ('b') compared to second suffix ('-SNAPSHOT') =&gt; -1
1.3-SNAPSHOT == 1.3-SNAPSHOT  ---&gt;  same length and value
</code></pre>
",Markus Jarderot,Renan,1333653375,1508508516,1508508516
http://stackoverflow.com/a/10034633/84349,How do you compare two version Strings in Java?,89284,Bill the Lizard,Andrew,1223920481,1552478056,1223932619,https://stackoverflow.com/questions/198431/how-do-you-compare-two-version-strings-in-java,"<pre><code>// VersionComparator.java
import java.util.Comparator;

public class VersionComparator implements Comparator {

    public boolean equals(Object o1, Object o2) {
        return compare(o1, o2) == 0;
    }

    public int compare(Object o1, Object o2) {
        String version1 = (String) o1;
        String version2 = (String) o2;

        VersionTokenizer tokenizer1 = new VersionTokenizer(version1);
        VersionTokenizer tokenizer2 = new VersionTokenizer(version2);

        int number1 = 0, number2 = 0;
        String suffix1 = """", suffix2 = """";

        while (tokenizer1.MoveNext()) {
            if (!tokenizer2.MoveNext()) {
                do {
                    number1 = tokenizer1.getNumber();
                    suffix1 = tokenizer1.getSuffix();
                    if (number1 != 0 || suffix1.length() != 0) {
                        // Version one is longer than number two, and non-zero
                        return 1;
                    }
                }
                while (tokenizer1.MoveNext());

                // Version one is longer than version two, but zero
                return 0;
            }

            number1 = tokenizer1.getNumber();
            suffix1 = tokenizer1.getSuffix();
            number2 = tokenizer2.getNumber();
            suffix2 = tokenizer2.getSuffix();

            if (number1 &lt; number2) {
                // Number one is less than number two
                return -1;
            }
            if (number1 &gt; number2) {
                // Number one is greater than number two
                return 1;
            }

            boolean empty1 = suffix1.length() == 0;
            boolean empty2 = suffix2.length() == 0;

            if (empty1 &amp;&amp; empty2) continue; // No suffixes
            if (empty1) return 1; // First suffix is empty (1.2 &gt; 1.2b)
            if (empty2) return -1; // Second suffix is empty (1.2a &lt; 1.2)

            // Lexical comparison of suffixes
            int result = suffix1.compareTo(suffix2);
            if (result != 0) return result;

        }
        if (tokenizer2.MoveNext()) {
            do {
                number2 = tokenizer2.getNumber();
                suffix2 = tokenizer2.getSuffix();
                if (number2 != 0 || suffix2.length() != 0) {
                    // Version one is longer than version two, and non-zero
                    return -1;
                }
            }
            while (tokenizer2.MoveNext());

            // Version two is longer than version one, but zero
            return 0;
        }
        return 0;
    }
}

// VersionTokenizer.java
public class VersionTokenizer {
    private final String _versionString;
    private final int _length;

    private int _position;
    private int _number;
    private String _suffix;
    private boolean _hasValue;

    public int getNumber() {
        return _number;
    }

    public String getSuffix() {
        return _suffix;
    }

    public boolean hasValue() {
        return _hasValue;
    }

    public VersionTokenizer(String versionString) {
        if (versionString == null)
            throw new IllegalArgumentException(""versionString is null"");

        _versionString = versionString;
        _length = versionString.length();
    }

    public boolean MoveNext() {
        _number = 0;
        _suffix = """";
        _hasValue = false;

        // No more characters
        if (_position &gt;= _length)
            return false;

        _hasValue = true;

        while (_position &lt; _length) {
            char c = _versionString.charAt(_position);
            if (c &lt; '0' || c &gt; '9') break;
            _number = _number * 10 + (c - '0');
            _position++;
        }

        int suffixStart = _position;

        while (_position &lt; _length) {
            char c = _versionString.charAt(_position);
            if (c == '.') break;
            _position++;
        }

        _suffix = _versionString.substring(suffixStart, _position);

        if (_position &lt; _length) _position++;

        return true;
    }
}
</code></pre>

<p><strong>Example:</strong></p>

<pre><code>public class Main
{
    private static VersionComparator cmp;

    public static void main (String[] args)
    {
        cmp = new VersionComparator();
        Test(new String[]{""1.1.2"", ""1.2"", ""1.2.0"", ""1.2.1"", ""1.12""});
        Test(new String[]{""1.3"", ""1.3a"", ""1.3b"", ""1.3-SNAPSHOT""});
    }

    private static void Test(String[] versions) {
        for (int i = 0; i &lt; versions.length; i++) {
            for (int j = i; j &lt; versions.length; j++) {
                Test(versions[i], versions[j]);
            }
        }
    }

    private static void Test(String v1, String v2) {
        int result = cmp.compare(v1, v2);
        String op = ""=="";
        if (result &lt; 0) op = ""&lt;"";
        if (result &gt; 0) op = ""&gt;"";
        System.out.printf(""%s %s %s\n"", v1, op, v2);
    }
}
</code></pre>

<p><strong>Output:</strong></p>

<pre><code>1.1.2 == 1.1.2                ---&gt;  same length and value
1.1.2 &lt; 1.2                   ---&gt;  first number (1) less than second number (2) =&gt; -1
1.1.2 &lt; 1.2.0                 ---&gt;  first number (1) less than second number (2) =&gt; -1
1.1.2 &lt; 1.2.1                 ---&gt;  first number (1) less than second number (2) =&gt; -1
1.1.2 &lt; 1.12                  ---&gt;  first number (1) less than second number (12) =&gt; -1
1.2 == 1.2                    ---&gt;  same length and value
1.2 == 1.2.0                  ---&gt;  first shorter than second, but zero
1.2 &lt; 1.2.1                   ---&gt;  first shorter than second, and non-zero
1.2 &lt; 1.12                    ---&gt;  first number (2) less than second number (12) =&gt; -1
1.2.0 == 1.2.0                ---&gt;  same length and value
1.2.0 &lt; 1.2.1                 ---&gt;  first number (0) less than second number (1) =&gt; -1
1.2.0 &lt; 1.12                  ---&gt;  first number (2) less than second number (12) =&gt; -1
1.2.1 == 1.2.1                ---&gt;  same length and value
1.2.1 &lt; 1.12                  ---&gt;  first number (2) less than second number (12) =&gt; -1
1.12 == 1.12                  ---&gt;  same length and value

1.3 == 1.3                    ---&gt;  same length and value
1.3 &gt; 1.3a                    ---&gt;  first suffix ('') is empty, but not second ('a') =&gt; 1
1.3 &gt; 1.3b                    ---&gt;  first suffix ('') is empty, but not second ('b') =&gt; 1
1.3 &gt; 1.3-SNAPSHOT            ---&gt;  first suffix ('') is empty, but not second ('-SNAPSHOT') =&gt; 1
1.3a == 1.3a                  ---&gt;  same length and value
1.3a &lt; 1.3b                   ---&gt;  first suffix ('a') compared to second suffix ('b') =&gt; -1
1.3a &lt; 1.3-SNAPSHOT           ---&gt;  first suffix ('a') compared to second suffix ('-SNAPSHOT') =&gt; -1
1.3b == 1.3b                  ---&gt;  same length and value
1.3b &lt; 1.3-SNAPSHOT           ---&gt;  first suffix ('b') compared to second suffix ('-SNAPSHOT') =&gt; -1
1.3-SNAPSHOT == 1.3-SNAPSHOT  ---&gt;  same length and value
</code></pre>
",Markus Jarderot,Renan,1333653375,1508508516,1508508516
http://stackoverflow.com/a/10037579/1789808,Error in using readImage function (Imagick),1756,Abhinav,,1332756273,1487066520,0,https://stackoverflow.com/questions/9870161/error-in-using-readimage-function-imagick,"<p>[You don't mention what platform you're running on but I'll presume from the paths it's some kind of Windows.]</p>

<p>The code is OK but there are problems with readImage() on Windows with some versions of Imagick (see <a href=""https://bugs.php.net/bug.php?id=59594"" rel=""nofollow"">https://bugs.php.net/bug.php?id=59594</a>) and there are also general problems when using versions of ImageMagick above 6.6.4.0 on Windows as it is compiled against VC10 and the other components use VC9 (http://stackoverflow.com/questions/8608426/imagick-crash-with-php-5-3). Read the thread on <a href=""http://valokuva.org/?page_id=50"" rel=""nofollow"">http://valokuva.org/?page_id=50</a> (the Imagick developer's blog) and note in the comments that Windows is an unsupported platform.</p>

<p>I came to the conclusion that it wasn't possible to run Imagick on Windows 7 x64 at all and installed an Ubuntu server running under Oracle VirtualBox to do Imagick development. That's been working nicely.</p>
",Phil,Phil,1333669839,1333670277,1333670277
http://stackoverflow.com/a/10050258/148668,C++ char array null terminator location,31848,John Mahoney,,1333753578,1369856921,0,https://stackoverflow.com/questions/10050228/c-char-array-null-terminator-location,"<p>In the case of a string literal the compiler is actually reserving an extra <code>char</code> element for the <code>\0</code> element.  </p>

<pre><code>// Create a new char array
char* str2 = (char*) malloc( strlen(str1) );
</code></pre>

<p>This is a common mistake new C programmers make.  When allocating the storage for a <code>char*</code> you need to allocate the number of characters + 1 more to store the <code>\0</code>.  Not allocating the extra storage here means this line is also illegal</p>

<pre><code>// Null-terminate the second one
str2[strlen(str1)] = '\0';
</code></pre>

<p>Here you're actually writing past the end of the memory you allocated.  When allocating X elements the last legal byte you can access is the memory address offset by <code>X - 1</code>.  Writing to the <code>X</code> element causes undefined behavior.  It will often work but is a ticking time bomb.  </p>

<p>The proper way to write this is as follows</p>

<pre><code>size_t size = strlen(str1) + sizeof(char);
char* str2 = (char*) malloc(size);
strncpy( str2, str1, size);

// Output the second one
cout &lt;&lt; ""Str2: "" &lt;&lt; str2 &lt;&lt; endl;
</code></pre>

<p>In this example the <code>str2[size - 1] = '\0'</code> isn't actually needed.  The <code>strncpy</code> function will fill all extra spaces with the null terminator.  Here there are only <code>size - 1</code> elements in <code>str1</code> so the final element in the array is unneeded and will be filled with <code>\0</code></p>
",JaredPar,JaredPar,1333753844,1333754203,1333754203
http://stackoverflow.com/a/1006301/715090,How to find out the number of CPUs using python,218257,phihag,kmario23,1245235304,1561404856,1416641804,https://stackoverflow.com/questions/1006289/how-to-find-out-the-number-of-cpus-using-python,"<p>If you're interested into the number of processors <em>available</em> to your current process, you have to check <a href=""http://man7.org/linux/man-pages/man7/cpuset.7.html"" rel=""noreferrer"">cpuset</a> first. Otherwise (or if cpuset is not in use), <a href=""http://docs.python.org/library/multiprocessing.html#multiprocessing.cpu_count"" rel=""noreferrer""><code>multiprocessing.cpu_count()</code></a> is the way to go in Python 2.6 and newer. The following method falls back to a couple of alternative methods in older versions of Python:</p>

<pre><code>import os
import re
import subprocess


def available_cpu_count():
    """""" Number of available virtual or physical CPUs on this system, i.e.
    user/real as output by time(1) when called with an optimally scaling
    userspace-only program""""""

    # cpuset
    # cpuset may restrict the number of *available* processors
    try:
        m = re.search(r'(?m)^Cpus_allowed:\s*(.*)$',
                      open('/proc/self/status').read())
        if m:
            res = bin(int(m.group(1).replace(',', ''), 16)).count('1')
            if res &gt; 0:
                return res
    except IOError:
        pass

    # Python 2.6+
    try:
        import multiprocessing
        return multiprocessing.cpu_count()
    except (ImportError, NotImplementedError):
        pass

    # https://github.com/giampaolo/psutil
    try:
        import psutil
        return psutil.cpu_count()   # psutil.NUM_CPUS on old versions
    except (ImportError, AttributeError):
        pass

    # POSIX
    try:
        res = int(os.sysconf('SC_NPROCESSORS_ONLN'))

        if res &gt; 0:
            return res
    except (AttributeError, ValueError):
        pass

    # Windows
    try:
        res = int(os.environ['NUMBER_OF_PROCESSORS'])

        if res &gt; 0:
            return res
    except (KeyError, ValueError):
        pass

    # jython
    try:
        from java.lang import Runtime
        runtime = Runtime.getRuntime()
        res = runtime.availableProcessors()
        if res &gt; 0:
            return res
    except ImportError:
        pass

    # BSD
    try:
        sysctl = subprocess.Popen(['sysctl', '-n', 'hw.ncpu'],
                                  stdout=subprocess.PIPE)
        scStdout = sysctl.communicate()[0]
        res = int(scStdout)

        if res &gt; 0:
            return res
    except (OSError, ValueError):
        pass

    # Linux
    try:
        res = open('/proc/cpuinfo').read().count('processor\t:')

        if res &gt; 0:
            return res
    except IOError:
        pass

    # Solaris
    try:
        pseudoDevices = os.listdir('/devices/pseudo/')
        res = 0
        for pd in pseudoDevices:
            if re.match(r'^cpuid@[0-9]+$', pd):
                res += 1

        if res &gt; 0:
            return res
    except OSError:
        pass

    # Other UNIXes (heuristic)
    try:
        try:
            dmesg = open('/var/run/dmesg.boot').read()
        except IOError:
            dmesgProcess = subprocess.Popen(['dmesg'], stdout=subprocess.PIPE)
            dmesg = dmesgProcess.communicate()[0]

        res = 0
        while '\ncpu' + str(res) + ':' in dmesg:
            res += 1

        if res &gt; 0:
            return res
    except OSError:
        pass

    raise Exception('Can not determine number of CPUs on this system')
</code></pre>
",phihag,phihag,1245235408,1525687319,1525687319
http://stackoverflow.com/a/10069679/3697225,When to clear the cache dir in Android?,66840,Jimmy,Community,1333109011,1376408742,1495539204,https://stackoverflow.com/questions/9942560/when-to-clear-the-cache-dir-in-android,"<p>Before I get to your question, here's a brief explanation of the two storage types:</p>

<h2>Cache</h2>

<p>This is an app-specific directory on the filesystem. The intent for this directory is store temporary data your application may need to keep around between sessions, but may not be vital to keep them forever. You typically access this directory with <a href=""http://developer.android.com/reference/android/content/ContextWrapper.html#getCacheDir%28%29""><code>Context.getCacheDir()</code></a>. This will show up as ""Cache"" on your app settings.</p>

<h2>Files</h2>

<p>Like the cache directory, your app also has an app-specific directory for holding files. Files in this directory will exist until the app explicitly deletes them or the app is uninstalled. You typically access this directory with <a href=""http://developer.android.com/reference/android/content/Context.html#getFilesDir%28%29""><code>Context.getFilesDir()</code></a>. This can show up as various things on the app info screen, but in your screenshot this is ""USB Storage Data"". </p>

<p><strong>NOTE:</strong> If you want to explicitly place on external media (typically SD card), you can use <a href=""http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir%28java.lang.String%29""><code>Context.getExternalFilesDir(String type)</code></a>.</p>

<h2>The Difference</h2>

<p>Both directories are specific only to your application (other apps do not have access). One of the differences between the cache and files directory is that if the system gets low on storage, the first place it is going to free resources is from your cache directory. The system will not clear any data from the files directory. Another difference is that the cache directory can typically be cleared manually from the app info screen. The files directory typically can as well, but clearing the files directory will also clear the cache directory.</p>

<h2>Which one do I use?</h2>

<p>It depends on how vital that data is compared to the lifetime of your app. If you only need data for one session and you doubt you'll ever need to use that data again, then don't use either. Just keep it in memory until you don't need it. If you suspect you'll need to reuse the data between multiple sessions, but you don't <em>have</em> to keep a hard copy, use the cache directory. If you must have this data no matter what, or if it's rather large data that needs persistent storage, use the files directory. Here's some examples I can think of:</p>

<ul>
<li>Cache - A recently opened email
<ul>
<li>Once opened, cache the data so when the user wants to read that email again, it loads instantly rather using the network again to retrieve the same data. I don't need to keep this forever, because eventually the user will be finished with the email.</li>
</ul></li>
<li>Files - An attachment downloaded from an email
<ul>
<li>This is an action by the user who is saying ""I want to keep this data so I can pull it back up whenever I need it."" Therefore, put it in files directory as I don't ever want to delete this file until the user wants it deleted.</li>
</ul></li>
</ul>

<h2>When should I clear the cache directory?</h2>

<p>From the <code>Context.getCacheDir()</code> javadocs:</p>

<blockquote>
  <p>Note: you should not rely on the system deleting these files for you;
  you should always have a reasonable maximum, such as 1 MB, for the
  amount of space you consume with cache files, and prune those files
  when exceeding that space.</p>
</blockquote>

<p>It uses the example of 1 MB, but that may or may not be reasonable for your app. Regardless, you need to set a hard maximum. The reason for this simply comes down to designing a responsible app. So when should you check? I would recommend checking every time you want to put something in the cache directory. Here's a very simple cache manager:</p>

<pre><code>public class CacheManager {

    private static final long MAX_SIZE = 5242880L; // 5MB

    private CacheManager() {

    }

    public static void cacheData(Context context, byte[] data, String name) throws IOException {

        File cacheDir = context.getCacheDir();
        long size = getDirSize(cacheDir);
        long newSize = data.length + size;

        if (newSize &gt; MAX_SIZE) {
            cleanDir(cacheDir, newSize - MAX_SIZE);
        }

        File file = new File(cacheDir, name);
        FileOutputStream os = new FileOutputStream(file);
        try {
            os.write(data);
        }
        finally {
            os.flush();
            os.close();
        }
    }

    public static byte[] retrieveData(Context context, String name) throws IOException {

        File cacheDir = context.getCacheDir();
        File file = new File(cacheDir, name);

        if (!file.exists()) {
            // Data doesn't exist
            return null;
        }

        byte[] data = new byte[(int) file.length()];
        FileInputStream is = new FileInputStream(file);
        try {
            is.read(data);
        }
        finally {
            is.close();
        }

        return data;
    }

    private static void cleanDir(File dir, long bytes) {

        long bytesDeleted = 0;
        File[] files = dir.listFiles();

        for (File file : files) {
            bytesDeleted += file.length();
            file.delete();

            if (bytesDeleted &gt;= bytes) {
                break;
            }
        }
    }

    private static long getDirSize(File dir) {

        long size = 0;
        File[] files = dir.listFiles();

        for (File file : files) {
            if (file.isFile()) {
                size += file.length();
            }
        }

        return size;
    }
}
</code></pre>

<p>Of course, this could be an expensive operation, so you should plan on caching on a background thread.</p>

<p>Also, this could be as complicated as you need it to be. In my example, I'm assuming all cached files are placed at the root of the cache directory, so I don't check for potential sub-directories. The routine for deleting files can also become more sophisticated, such as deleting files by oldest access date.</p>

<p>One thing to keep in mind when deciding to cache data is that you need to always plan for the case that your cached data no longer exists. Always have a routine in place to retrieve data by external means when your cache doesn't have it in storage. Likewise, always check your cache before retrieve data externally. The purpose of the cache is to cut down on network activity, long processes, and provide a responsive UI in your app. So use it responsibly :)</p>
",Jason Robinson,Bry M.,1333952448,1358360377,1358360377
http://stackoverflow.com/a/10073788/1048589,Pad a number with leading zeros in JavaScript,425419,Nate Pet,Community,1333976981,1548444744,1495535495,https://stackoverflow.com/questions/10073699/pad-a-number-with-leading-zeros-in-javascript,"<p>Not a lot of ""slick"" going on so far:</p>

<pre><code>function pad(n, width, z) {
  z = z || '0';
  n = n + '';
  return n.length &gt;= width ? n : new Array(width - n.length + 1).join(z) + n;
}
</code></pre>

<p>When you initialize an array with a number, it creates an array with the <code>length</code> set to that value so that the array appears to contain that many <code>undefined</code> elements. Though some Array instance methods skip array elements without values, <code>.join()</code> doesn't, or at least not completely; it treats them as if their value is the empty string. Thus you get a copy of the zero character (or whatever ""z"" is) between each of the array elements; that's why there's a <code>+ 1</code> in there.</p>

<p>Example usage:</p>

<pre><code>pad(10, 4);      // 0010
pad(9, 4);       // 0009
pad(123, 4);     // 0123

pad(10, 4, '-'); // --10
</code></pre>
",Pointy,Pointy,1333977508,1406205273,1406205273
http://stackoverflow.com/a/10078809/654755,Django templates: accessing the previous and the following element of the list,4051,newtover,newtover,1333999967,1410773537,1334000333,https://stackoverflow.com/questions/10078683/django-templates-accessing-the-previous-and-the-following-element-of-the-list,"<p>You can't do this strictly with built-in template tags. You need to involve some Python.</p>

<p>One method would be to <code>zip</code> the list with itself:</p>

<pre><code>new = ([(None, orig[0], orig[1])] + 
       zip(orig, orig[1:], orig[2:]) + 
       [(orig[-2], orig[-1], None)])
</code></pre>

<p>and pass that to the template, then loop over it like this:</p>

<pre><code>{% for prev, current, next in new %}
    {% if prev.hidden or next.hidden %}
        BORDER
    {% endif %}
    {{ current }}
{% endfor %}
</code></pre>
",agf,,1334000575,1334000575,0
http://stackoverflow.com/a/10088053/483704,Convert date to another timezone in JavaScript,432359,Rizky Ramadhan,AstroCB,1334057105,1557519660,1428675139,https://stackoverflow.com/questions/10087819/convert-date-to-another-timezone-in-javascript,"<p>Stolen shamelessly from: <a href=""http://www.techrepublic.com/article/convert-the-local-time-to-another-time-zone-with-this-javascript/6016329"">http://www.techrepublic.com/article/convert-the-local-time-to-another-time-zone-with-this-javascript/6016329</a>  </p>

<pre><code>/** 
 * function to calculate local time
 * in a different city
 * given the city's UTC offset
 */
function calcTime(city, offset) {

    // create Date object for current location
    var d = new Date();

    // convert to msec
    // add local time zone offset
    // get UTC time in msec
    var utc = d.getTime() + (d.getTimezoneOffset() * 60000);

    // create new Date object for different city
    // using supplied offset
    var nd = new Date(utc + (3600000*offset));

    // return time as a string
    return ""The local time in "" + city + "" is "" + nd.toLocaleString();
}
</code></pre>

<p>this function is useful to calculate time zone value by providing name of a city/country and offset value</p>
",Valli69,Alexey B.,1334058054,1461059650,1461059650
http://stackoverflow.com/a/10096779/50335,NSFileSystemFreeSize: translating result into user friendly display of mb/gb?,779,No Grabbing,,1334072228,1543483716,0,https://stackoverflow.com/questions/10091816/nsfilesystemfreesize-translating-result-into-user-friendly-display-of-mb-gb,"<pre><code>static NSString* prettyBytes(uint64_t numBytes)
{
    uint64_t const scale = 1024;
    char const * abbrevs[] = { ""EB"", ""PB"", ""TB"", ""GB"", ""MB"", ""KB"", ""Bytes"" };
    size_t numAbbrevs = sizeof(abbrevs) / sizeof(abbrevs[0]);
    uint64_t maximum = powl(scale, numAbbrevs-1);
    for (size_t i = 0; i &lt; numAbbrevs-1; ++i) {
        if (numBytes &gt; maximum) {
            return [NSString stringWithFormat:@""%.4f %s"", numBytes / (double)maximum, abbrevs[i]];
        }
        maximum /= scale;
    }
    return [NSString stringWithFormat:@""%u Bytes"", (unsigned)numBytes];
}
</code></pre>
",Jody Hagins,,1334093666,1334093666,0
http://stackoverflow.com/a/10114636/69897,A method for indexing triangles from a loaded heightmap?,2360,DubyaDubyaDubyaDot,Nicol Bolas,1334181577,1416871971,1334182339,https://stackoverflow.com/questions/10114577/a-method-for-indexing-triangles-from-a-loaded-heightmap,"<p>As far as your code above goes, using <code>vertices[x * y]</code> isn't right - if you use that, then e.g. <code>vert(2,3) == vert(3,2)</code>. What you want is something like <code>vertices[y * image.width + x]</code>, but you can do it more efficiently by incrementing a counter (see below).</p>

<p>Here's the equivalent code I use. It's in C# unfortunately, but hopefully it should illustrate the point:</p>

<pre><code>/// &lt;summary&gt;
/// Constructs the vertex and index buffers for the terrain (for use when rendering the terrain).
/// &lt;/summary&gt;
private void ConstructBuffers()
{
    int heightmapHeight = Heightmap.GetLength(0);
    int heightmapWidth = Heightmap.GetLength(1);
    int gridHeight = heightmapHeight - 1;
    int gridWidth = heightmapWidth - 1;

    // Construct the individual vertices for the terrain.
    var vertices = new VertexPositionTexture[heightmapHeight * heightmapWidth];

    int vertIndex = 0;
    for(int y = 0; y &lt; heightmapHeight; ++y)
    {
        for(int x = 0; x &lt; heightmapWidth; ++x)
        {
            var position = new Vector3(x, y, Heightmap[y,x]);
            var texCoords = new Vector2(x * 2f / heightmapWidth, y * 2f / heightmapHeight);
            vertices[vertIndex++] = new VertexPositionTexture(position, texCoords);
        }
    }

    // Create the vertex buffer and fill it with the constructed vertices.
    this.VertexBuffer = new VertexBuffer(Renderer.GraphicsDevice, typeof(VertexPositionTexture), vertices.Length, BufferUsage.WriteOnly);
    this.VertexBuffer.SetData(vertices);

    // Construct the index array.
    var indices = new short[gridHeight * gridWidth * 6];    // 2 triangles per grid square x 3 vertices per triangle

    int indicesIndex = 0;
    for(int y = 0; y &lt; gridHeight; ++y)
    {
        for(int x = 0; x &lt; gridWidth; ++x)
        {
            int start = y * heightmapWidth + x;
            indices[indicesIndex++] = (short)start;
            indices[indicesIndex++] = (short)(start + 1);
            indices[indicesIndex++] = (short)(start + heightmapWidth);
            indices[indicesIndex++] = (short)(start + 1);
            indices[indicesIndex++] = (short)(start + 1 + heightmapWidth);
            indices[indicesIndex++] = (short)(start + heightmapWidth);
        }
    }

    // Create the index buffer.
    this.IndexBuffer = new IndexBuffer(Renderer.GraphicsDevice, typeof(short), indices.Length, BufferUsage.WriteOnly);
    this.IndexBuffer.SetData(indices);
}
</code></pre>

<p>I guess the key point is that given a heightmap of size <code>heightmapHeight * heightmapWidth</code>, you need <code>(heightmapHeight - 1) * (heightmapWidth - 1) * 6</code> indices, since you're drawing:</p>

<ul>
<li><code>2</code> triangles per grid square</li>
<li><code>3</code> vertices per triangle</li>
<li><code>(heightmapHeight - 1) * (heightmapWidth - 1)</code> grid squares in your terrain.</li>
</ul>
",Stuart Golodetz,devin,1334181904,1416871971,1416871971
http://stackoverflow.com/a/1012089/64911,Python - Previous and next values inside a loop,129086,dir01,,1245320618,1560878342,0,https://stackoverflow.com/questions/1011938/python-previous-and-next-values-inside-a-loop,"<p>Solutions until now only deal with lists, and most are copying the list. In my experience a lot of times that isn't possible.</p>

<p>Also, they don't deal with the fact that you can have repeated elements in the list.</p>

<p>The title of your question says ""<em>Previous and next values inside a loop</em>"", but if you run most answers here inside a loop, you'll end up iterating over the entire list again on each element to find it.</p>

<p>So I've just created a function that. using the <a href=""http://docs.python.org/library/itertools.html"" rel=""noreferrer""><code>itertools</code></a> module, splits and slices the iterable, and generates tuples with the previous and next elements together. Not exactly what your code does, but it is worth taking a look, because it can probably solve your problem.</p>

<pre><code>from itertools import tee, islice, chain, izip

def previous_and_next(some_iterable):
    prevs, items, nexts = tee(some_iterable, 3)
    prevs = chain([None], prevs)
    nexts = chain(islice(nexts, 1, None), [None])
    return izip(prevs, items, nexts)
</code></pre>

<p>Then use it in a loop, and you'll have previous and next items in it:</p>

<pre><code>mylist = ['banana', 'orange', 'apple', 'kiwi', 'tomato']

for previous, item, nxt in previous_and_next(mylist):
    print ""Item is now"", item, ""next is"", nxt, ""previous is"", previous
</code></pre>

<p>The results:</p>

<pre><code>Item is now banana next is orange previous is None
Item is now orange next is apple previous is banana
Item is now apple next is kiwi previous is orange
Item is now kiwi next is tomato previous is apple
Item is now tomato next is None previous is kiwi
</code></pre>

<p>It'll work with any size list (because it doesn't copy the list), and with any iterable (files, sets, etc). This way you can just iterate over the sequence, and have the previous and next items available inside the loop. No need to search again for the item in the sequence.</p>

<p>A short explanation of the code:</p>

<ul>
<li><code>tee</code> is used to efficiently create 3 independent iterators over the input sequence</li>
<li><code>chain</code> links two sequences into one; it's used here to append a single-element sequence <code>[None]</code> to <code>prevs</code></li>
<li><code>islice</code> is used to make a sequence of all elements except the first, then <code>chain</code> is used to append a <code>None</code> to its end</li>
<li>There are now 3 independent sequences based on <code>some_iterable</code> that look like:

<ul>
<li><code>prevs</code>: <code>None, A,  B,  C,  D,  E</code></li>
<li><code>items</code>: <code>A,    B,  C,  D,  E</code></li>
<li><code>nexts</code>: <code>B,    C,  D,  E,  None</code></li>
</ul></li>
<li>finally <code>izip</code> is used to change 3 sequences into one sequence of triplets.</li>
</ul>

<p>Note that <code>izip</code> stops when any input sequence gets exhausted, so the last element of <code>prevs</code> will be ignored, which is correct - there's no such element that the last element would be its <code>prev</code>. We could try to strip off the last elements from <code>prevs</code> but <code>izip</code>'s behaviour makes that redundant </p>

<p>Also note that <code>tee</code>, <code>izip</code>, <code>islice</code> and <code>chain</code> come from the <code>itertools</code> module; they operate on their input sequences on-the-fly (lazily), which makes them efficient and doesn't introduce the need of having the whole sequence in memory at once at any time.</p>

<p>In <code>python 3</code>, it will show an error while importing <code>izip</code>,you can use <code>zip</code> instead of <code>izip</code>. No need to import <code>zip</code>, it is predefined in <code>python 3</code> -  <a href=""https://github.com/weinbe58/QuSpin/issues/20"" rel=""noreferrer"">source</a></p>
",nosklo,ZaidRehman,1245323578,1512719621,1512719621
http://stackoverflow.com/a/10150393/1694896,std::string formatting like sprintf,721903,Max Frai,thecoshman,1267193754,1562275400,1431193559,https://stackoverflow.com/questions/2342162/stdstring-formatting-like-sprintf,"<p>I wrote my own using vsnprintf so it returns string instead of having to create my own buffer.</p>

<pre><code>#include &lt;string&gt;
#include &lt;cstdarg&gt;

//missing string printf
//this is safe and convenient but not exactly efficient
inline std::string format(const char* fmt, ...){
    int size = 512;
    char* buffer = 0;
    buffer = new char[size];
    va_list vl;
    va_start(vl, fmt);
    int nsize = vsnprintf(buffer, size, fmt, vl);
    if(size&lt;=nsize){ //fail delete buffer and try again
        delete[] buffer;
        buffer = 0;
        buffer = new char[nsize+1]; //+1 for /0
        nsize = vsnprintf(buffer, size, fmt, vl);
    }
    std::string ret(buffer);
    va_end(vl);
    delete[] buffer;
    return ret;
}
</code></pre>

<p>So you can use it like</p>

<pre><code>std::string mystr = format(""%s %d %10.5f"", ""omg"", 1, 10.5);
</code></pre>
",Piti Ongmongkolkul,Destroyica,1334369066,1356012378,1356012378
http://stackoverflow.com/a/1015405/209039,Python: Bind an Unbound Method?,42555,Dan Passaro,Dan Passaro,1245360798,1553835830,1245362661,https://stackoverflow.com/questions/1015307/python-bind-an-unbound-method,"<p>All functions are also <em>descriptors</em>, so you can bind them by calling their <code>__get__</code> method:</p>

<pre><code>bound_handler = handler.__get__(self, MyWidget)
</code></pre>

<p>Here's R. Hettinger's excellent <a href=""https://docs.python.org/2/howto/descriptor.html"" rel=""nofollow noreferrer"">guide</a> to descriptors.</p>

<hr>

<p>As a self-contained example pulled from <a href=""https://stackoverflow.com/users/834176/keith-pinson"">Keith's</a> <a href=""https://stackoverflow.com/questions/1015307/python-bind-an-unbound-method#comment8431145_1015405"">comment</a>:</p>

<pre><code>def bind(instance, func, as_name=None):
    """"""
    Bind the function *func* to *instance*, with either provided name *as_name*
    or the existing name of *func*. The provided *func* should accept the 
    instance as the first argument, i.e. ""self"".
    """"""
    if as_name is None:
        as_name = func.__name__
    bound_method = func.__get__(instance, instance.__class__)
    setattr(instance, as_name, bound_method)
    return bound_method

class Thing:
    def __init__(self, val):
        self.val = val

something = Thing(21)

def double(self):
    return 2 * self.val

bind(something, double)
something.double()  # returns 42
</code></pre>
",Alex Martelli,Nick T,1245362069,1553835830,1553835830
http://stackoverflow.com/a/101613/4184258,"The most efficient way to implement an integer based power function pow(int, int)",186156,Doug T.,durron597,1221827430,1553772266,1422629004,https://stackoverflow.com/questions/101439/the-most-efficient-way-to-implement-an-integer-based-power-function-powint-int,"<p>Exponentiation by squaring.</p>

<pre><code>int ipow(int base, int exp)
{
    int result = 1;
    for (;;)
    {
        if (exp &amp; 1)
            result *= base;
        exp &gt;&gt;= 1;
        if (!exp)
            break;
        base *= base;
    }

    return result;
}
</code></pre>

<p>This is the standard method for doing modular exponentiation for huge numbers in asymmetric cryptography.</p>
",Elias Yarrkov,John Zwinck,1221828876,1522826783,1522826783
http://stackoverflow.com/a/10182739/2560906,how to change a key in an array while maintaining the order?,16213,Cristian Gonzales,,1334615798,1471318368,0,https://stackoverflow.com/questions/10182684/how-to-change-a-key-in-an-array-while-maintaining-the-order,"<p><a href=""http://ideone.com/nCZnY"">http://ideone.com/nCZnY</a></p>

<pre><code>$array = array('a' =&gt; 1, 'd' =&gt; 2, 'c' =&gt; 3); //associative array

// rename $array['d'] as $array['b']
$array = replace_key_function($array, 'd', 'b');

var_export($array); // array('a' =&gt; 1, 'b' =&gt; 2, 'c' =&gt; 3); same order!

function replace_key_function($array, $key1, $key2)
{
    $keys = array_keys($array);
    $index = array_search($key1, $keys);

    if ($index !== false) {
        $keys[$index] = $key2;
        $array = array_combine($keys, $array);
    }

    return $array;
}
</code></pre>
",zerkms,,1334616162,1334616162,0
http://stackoverflow.com/a/1019526/11236,JavaScript - Test for an integer,90361,user70192,,1245437453,1433499033,0,https://stackoverflow.com/questions/1019515/javascript-test-for-an-integer,"<pre><code>var intRegex = /^\d+$/;
if(intRegex.test(someNumber)) {
   alert('I am an int');
   ...
}
</code></pre>

<p>That will absolutely, positively fail if the user enters anything other than an nonnegative integer.</p>
",karim79,karim79,1245437580,1258904425,1258904425
http://stackoverflow.com/a/1019534/850828,How to search by key=&gt;value in a multidimensional array in PHP,280876,dan,,1245431997,1494235817,0,https://stackoverflow.com/questions/1019076/how-to-search-by-key-value-in-a-multidimensional-array-in-php,"<p>How about the <a href=""http://php.net/spl"" rel=""noreferrer"">SPL</a> version instead? It'll save you some typing:</p>

<pre><code>// I changed your input example to make it harder and
// to show it works at lower depths:

$arr = array(0 =&gt; array('id'=&gt;1,'name'=&gt;""cat 1""),
             1 =&gt; array(array('id'=&gt;3,'name'=&gt;""cat 1"")),
             2 =&gt; array('id'=&gt;2,'name'=&gt;""cat 2"")
);

//here's the code:

    $arrIt = new RecursiveIteratorIterator(new RecursiveArrayIterator($arr));

 foreach ($arrIt as $sub) {
    $subArray = $arrIt-&gt;getSubIterator();
    if ($subArray['name'] === 'cat 1') {
        $outputArray[] = iterator_to_array($subArray);
    }
}
</code></pre>

<p>What's great is that basically the same code will iterate through a directory for you, by using a RecursiveDirectoryIterator instead of a RecursiveArrayIterator. SPL is the roxor.</p>

<p>The only bummer about SPL is that it's badly documented on the web. But several PHP books go into some useful detail, particularly Pro PHP; and you can probably google for more info, too.</p>
",jared,jared,1245437711,1245439612,1245439612
http://stackoverflow.com/a/10195497/148668,"Copy a file in a sane, safe and efficient way",176447,Peter,Millie Smith,1334680713,1551519616,1436333015,https://stackoverflow.com/questions/10195343/copy-a-file-in-a-sane-safe-and-efficient-way,"<p>Copy a file in a sane way:</p>

<pre><code>#include &lt;fstream&gt;

int main()
{
    std::ifstream  src(""from.ogv"", std::ios::binary);
    std::ofstream  dst(""to.ogv"",   std::ios::binary);

    dst &lt;&lt; src.rdbuf();
}
</code></pre>

<p>This is so simple and intuitive to read it is worth the extra cost. If we were doing it a lot, better to fall back on OS calls to the file system. I am sure <code>boost</code> has a copy file method in its filesystem class. </p>

<p>There is a C method for interacting with the file system:</p>

<pre><code>#include &lt;copyfile.h&gt;

int
copyfile(const char *from, const char *to, copyfile_state_t state, copyfile_flags_t flags);
</code></pre>
",Martin York,aviator,1334681378,1539956062,1539956062
http://stackoverflow.com/a/10215091/783019,send_mass_emails with EmailMultiAlternatives,12525,gustavgans,,1317215553,1509656564,0,https://stackoverflow.com/questions/7583801/send-mass-emails-with-emailmultialternatives,"<p>That is <code>send_mass_mail()</code> rewritten to use <code>EmailMultiAlternatives</code>:</p>

<pre><code>from django.core.mail import get_connection, EmailMultiAlternatives

def send_mass_html_mail(datatuple, fail_silently=False, user=None, password=None, 
                        connection=None):
    """"""
    Given a datatuple of (subject, text_content, html_content, from_email,
    recipient_list), sends each message to each recipient list. Returns the
    number of emails sent.

    If from_email is None, the DEFAULT_FROM_EMAIL setting is used.
    If auth_user and auth_password are set, they're used to log in.
    If auth_user is None, the EMAIL_HOST_USER setting is used.
    If auth_password is None, the EMAIL_HOST_PASSWORD setting is used.

    """"""
    connection = connection or get_connection(
        username=user, password=password, fail_silently=fail_silently)
    messages = []
    for subject, text, html, from_email, recipient in datatuple:
        message = EmailMultiAlternatives(subject, text, from_email, recipient)
        message.attach_alternative(html, 'text/html')
        messages.append(message)
    return connection.send_messages(messages)
</code></pre>
",semente,semente,1334771579,1414757122,1414757122
http://stackoverflow.com/a/10219411/1520132,Reading the last n lines of a file in Ruby?,23481,Josh Moore,Mike Woodhouse,1239847562,1509005636,1239871517,https://stackoverflow.com/questions/754494/reading-the-last-n-lines-of-a-file-in-ruby,"<p>Improved version of manveru's excellent seek-based solution. This one returns exactly n lines.</p>

<pre><code>class File

  def tail(n)
    buffer = 1024
    idx = [size - buffer, 0].min
    chunks = []
    lines = 0

    begin
      seek(idx)
      chunk = read(buffer)
      lines += chunk.count(""\n"")
      chunks.unshift chunk
      idx -= buffer
    end while lines &lt; ( n + 1 ) &amp;&amp; pos != 0

    tail_of_file = chunks.join('')
    ary = tail_of_file.split(/\n/)
    lines_to_return = ary[ ary.size - n, ary.size - 1 ]

  end
end
</code></pre>
",Donald Scott Wilde,Community,1334790556,1509005636,1509005636
http://stackoverflow.com/a/10231202/508355,why getBoundingClientRect gives different values in IE and Firefox,21213,Senan,,1334847009,1434953695,0,https://stackoverflow.com/questions/10230715/why-getboundingclientrect-gives-different-values-in-ie-and-firefox,"<p>Citation from old IE documentation for <code>getBoundingClientRect</code>: ""In Microsoft Internet Explorer 5, the window's upper-left is at 2,2 (pixels) with respect to the true client."" This still seems to be valid.</p>

<p>In IE9 usage of <code>&lt;meta http-equiv=""x-ua-compatible"" content=""ie=edge""/&gt;</code> ""sets"" the upper-left corner to it's right position (0,0).</p>

<p>As d4rkpr1nc3 answered, you can get those values by other methods, but the results depend on the used browser too. I think you'll need a slightly different approach to this problem. Check the code below, it might give you some ideas.</p>

<pre><code>&lt;DIV id=""imagecontrol"" style=""position:absolute;width:200px;height:200px;""&gt;
  &lt;DIV id=""topleft"" style=""position:absolute;width:100px;height:100px;left:0px;top:0px;""&gt;&lt;/DIV&gt;
  &lt;DIV id=""topright"" style=""position:absolute;width:100px;height:100px;right:0px;top:0px;""&gt;&lt;/DIV&gt;
  &lt;DIV id=""bottomleft"" style=""position:absolute;width:100px;height:100px;left:0px;bottom:0px;""&gt;&lt;/DIV&gt;
  &lt;DIV id=""bottomright"" style=""position:absolute;width:100px;height:100px;right:0px;bottom:0px;""&gt;&lt;/DIV&gt;
&lt;/DIV&gt;
</code></pre>
",Teemu,Teemu,1334848463,1434953695,1434953695
http://stackoverflow.com/a/10252798/222487,Ruby on Rails 3: Streaming data through Rails to client,22820,jkndrkn,,1282085295,1458349593,0,https://stackoverflow.com/questions/3507594/ruby-on-rails-3-streaming-data-through-rails-to-client,"<p>In case you are assigning to response_body an object that responds to #each method and it's buffering until the response is closed, try in in action controller:</p>

<p>self.response.headers['Last-Modified'] = Time.now.to_s</p>
",Exequiel,,1334952151,1334952151,0
http://stackoverflow.com/a/1026087/1470607,How do I make the first letter of a string uppercase in JavaScript?,1798528,Robert Wills,B. Go,1245659131,1560771956,1554488984,https://stackoverflow.com/questions/1026069/how-do-i-make-the-first-letter-of-a-string-uppercase-in-javascript,"<pre><code>function capitalizeFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
}
</code></pre>

<p>Some other answers modify <code>String.prototype</code> (this answer used to as well), but I would advise against this now due to maintainability (hard to find out where the function is being added to the <code>prototype</code> and could cause conflicts if other code uses the same name / a browser adds a native function with that same name in future).</p>
",Steve Harrison,Jean-Franois Corbett,1245659438,1518610929,1518610929
http://stackoverflow.com/a/1026626/2127762,Cross-platform way to check admin rights in a Python script under Windows?,10301,grigoryvp,Christian Heinrichs,1245666032,1491164421,1390498031,https://stackoverflow.com/questions/1026431/cross-platform-way-to-check-admin-rights-in-a-python-script-under-windows,"<pre><code>import ctypes, os
try:
 is_admin = os.getuid() == 0
except AttributeError:
 is_admin = ctypes.windll.shell32.IsUserAnAdmin() != 0

print is_admin
</code></pre>
",grigoryvp,grigoryvp,1245669776,1263056587,1263056587
http://stackoverflow.com/a/10304880/27401,Django Class-Based Generic Views and Authentication,8720,user658587,murgatroid99,1310153175,1383700222,1337262659,https://stackoverflow.com/questions/6629426/django-class-based-generic-views-and-authentication,"<p>There's also the option of an authentication mixin, which you would derive your view class from. So using <a href=""http://brack3t.com/our-custom-mixins.html"">this mixin from brack3t.com</a>:</p>

<pre><code>class LoginRequiredMixin(object):

    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        return super(LoginRequiredMixin, self).dispatch(*args, **kwargs)
</code></pre>

<p>you could then create new ""authentication required"" views like this:</p>

<pre><code>from django.views.generic import DetailView

class MyDetailView(LoginRequiredMixin, DetailView):
    ....
</code></pre>

<p>with no other additions needed. Feels very much like Not Repeating Oneself.</p>
",supervacuo,,1335296461,1335296461,0
http://stackoverflow.com/a/10311877/868533,How to check if Location Services are enabled?,204195,Meroelyth,Tshepang,1335341689,1551326788,1397167621,https://stackoverflow.com/questions/10311834/how-to-check-if-location-services-are-enabled,"<p>You may use this code to direct users to Settings, where they can enable GPS:</p>

<pre><code>    locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    if( !locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER) ) {
        new AlertDialog.Builder(context)
            .setTitle(R.string.gps_not_found_title)  // GPS not found
            .setMessage(R.string.gps_not_found_message) // Want to enable?
            .setPositiveButton(R.string.yes, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialogInterface, int i) {
                    owner.startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));
                }
            })
            .setNegativeButton(R.string.no, null)
            .show();
    }
</code></pre>
",lenik,MrTheGood,1335341854,1549902955,1549902955
http://stackoverflow.com/a/10315969/25690,jQuery Youtube URL Validation with regex,45173,Mithun Sreedharan,Community,1275557512,1467271182,1495540016,https://stackoverflow.com/questions/2964678/jquery-youtube-url-validation-with-regex,"<h1>ULTIMATE YOUTUBE REGEX</h1>

<h2>Cherry picking</h2>

<p>Because the explanation is getting longer and longer, I place the final result at the top. Feel free to copy+paste, and go on your way. For a detailed explanation, read <em>""the full story""</em> below.</p>

<pre><code>/**
 * JavaScript function to match (and return) the video Id 
 * of any valid Youtube Url, given as input string.
 * @author: Stephan Schmitz &lt;eyecatchup@gmail.com&gt;
 * @url: https://stackoverflow.com/a/10315969/624466
 */
function ytVidId(url) {
  var p = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&amp;v=))((\w|-){11})(?:\S+)?$/;
  return (url.match(p)) ? RegExp.$1 : false;
}
</code></pre>

<h2>The full story</h2>

<p><a href=""https://stackoverflow.com/a/2964758/624466"">Amarghosh's regex</a> looks good, at first sight. But it:</p>

<ol>
<li>doesn't match video id's that include dashes (-),</li>
<li>doesn't validate the id length (<code>v=aa</code> and <code>v=aaaaaaaaaaaaaaaaaa</code> return to be valid), </li>
<li>and doesn't match secured URLs at all (http<strong>s</strong>://youtube.com/watch?valid_params)  </li>
</ol>

<p>To match https, the dash character, and to validate the id length, this was my initial suggestion of a modified version of Amarghosh's regex:</p>

<p><code>^https?:\/\/(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$</code>   </p>

<h2>UPDATE 1: URLs versus Strings</h2>

<p>After I posted the above pattern, I was asked: <em>""What if the <strong>URL</strong> is like this;<br>
<code>youtube.com/watch?gl=US&amp;hl=en-US&amp;v=bQVoAWSP7k4</code>""</em>?   </p>

<p>First of, please note that this not a <strong>URL</strong> at all. <a href=""http://tools.ietf.org/html/rfc3986#page-16"" rel=""noreferrer"">RFC compliant URLs</a> must start with the scheme! ;) </p>

<p>Anyway, to match any kind of <strong>string</strong> that indicates to refer to a YouTube video, I updated my answer to exclude the URL scheme being required. So my second suggestion was as follows:</p>

<p><code>^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$</code></p>

<h2>UPDATE 2: The ultimate regex</h2>

<p>Then I was asked to add support for a ""special case""; the <em>youtu.be</em> short urls. Initially I did not add these, since it wasn't specifically part of the question. However I updated my answer now with <strong>all</strong> possible <em>""special cases""</em>. This means that not only have I added support for youtu.be links, but also the request paths ""/v"" and ""/embed"".</p>

<p>So, may I introduce: My final and ultimate Youtube regex:</p>

<p><code>^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&amp;v=))((\w|-){11})(?:\S+)?$</code></p>

<h2>What strings are matched?</h2>

<p>Now this pattern will work for any strings, formatted as follows:</p>

<p><strong>Without scheme and subdomain (Domain: youtu.be, Path: /)</strong>   </p>

<pre><code>youtu.be/&lt;video:id&gt;   
</code></pre>

<p><strong>Without scheme, with subdomain (Domain: youtu.be, Path: /)</strong>  </p>

<pre><code>www.youtu.be/&lt;video:id&gt;     
</code></pre>

<p><strong>With HTTP scheme, without subdomain (Domain: youtu.be, Path: /)</strong></p>

<pre><code>http://youtu.be/&lt;video:id&gt;   
</code></pre>

<p><strong>With HTTP scheme and subdomain (Domain: youtu.be, Path: /)</strong></p>

<pre><code>http://www.youtu.be/&lt;video:id&gt;   
</code></pre>

<p><strong>With HTTPS scheme, without subdomain (Domain: youtu.be, Path: /)</strong></p>

<pre><code>https://youtu.be/&lt;video:id&gt;     
</code></pre>

<p><strong>With HTTPS scheme and subdomain (Domain: youtu.be, Path: /)</strong></p>

<pre><code>https://www.youtu.be/&lt;video:id&gt;   
</code></pre>

<p><strong>Without scheme and subdomain (Domain: youtube.com, Path: /embed)</strong>   </p>

<pre><code>youtube.com/embed/&lt;video:id&gt;   
youtube.com/embed/&lt;video:id&gt;&amp;other_params 
</code></pre>

<p><strong>Without scheme, with subdomain (Domain: youtube.com, Path: /embed)</strong>  </p>

<pre><code>www.youtube.com/embed/&lt;video:id&gt;   
www.youtube.com/embed/&lt;video:id&gt;&amp;other_params   
</code></pre>

<p><strong>With HTTP scheme, without subdomain (Domain: youtube.com, Path: /embed)</strong></p>

<pre><code>http://youtube.com/embed/&lt;video:id&gt;   
http://youtube.com/embed/&lt;video:id&gt;&amp;other_params  
</code></pre>

<p><strong>With HTTP scheme and subdomain (Domain: youtube.com, Path: /embed)</strong></p>

<pre><code>http://www.youtube.com/embed/&lt;video:id&gt;   
http://www.youtube.com/embed/&lt;video:id&gt;&amp;other_params  
</code></pre>

<p><strong>With HTTPS scheme, without subdomain (Domain: youtube.com, Path: /embed)</strong></p>

<pre><code>https://youtube.com/embed/&lt;video:id&gt;   
https://youtube.com/embed/&lt;video:id&gt;&amp;other_params    
</code></pre>

<p><strong>With HTTPS scheme and subdomain (Domain: youtube.com, Path: /embed)</strong></p>

<pre><code>https://www.youtube.com/embed/&lt;video:id&gt;   
https://www.youtube.com/embed/&lt;video:id&gt;&amp;other_params
</code></pre>

<p><strong>Without scheme and subdomain (Domain: youtube.com, Path: /v)</strong>   </p>

<pre><code>youtube.com/v/&lt;video:id&gt;   
youtube.com/v/&lt;video:id&gt;&amp;other_params 
</code></pre>

<p><strong>Without scheme, with subdomain (Domain: youtube.com, Path: /v)</strong>  </p>

<pre><code>www.youtube.com/v/&lt;video:id&gt;   
www.youtube.com/v/&lt;video:id&gt;&amp;other_params   
</code></pre>

<p><strong>With HTTP scheme, without subdomain (Domain: youtube.com, Path: /v)</strong></p>

<pre><code>http://youtube.com/v/&lt;video:id&gt;   
http://youtube.com/v/&lt;video:id&gt;&amp;other_params  
</code></pre>

<p><strong>With HTTP scheme and subdomain (Domain: youtube.com, Path: /v)</strong></p>

<pre><code>http://www.youtube.com/v/&lt;video:id&gt;   
http://www.youtube.com/v/&lt;video:id&gt;&amp;other_params  
</code></pre>

<p><strong>With HTTPS scheme, without subdomain (Domain: youtube.com, Path: /v)</strong></p>

<pre><code>https://youtube.com/v/&lt;video:id&gt;   
https://youtube.com/v/&lt;video:id&gt;&amp;other_params    
</code></pre>

<p><strong>With HTTPS scheme and subdomain (Domain: youtube.com, Path: /v)</strong></p>

<pre><code>https://www.youtube.com/v/&lt;video:id&gt;   
https://www.youtube.com/v/&lt;video:id&gt;&amp;other_params   
</code></pre>

<p><strong>Without scheme and subdomain (Domain: youtube.com, Path: /watch)</strong>   </p>

<pre><code>youtube.com/watch?v=&lt;video:id&gt;   
youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
youtube.com/watch?other_params&amp;v=&lt;video:id&gt; 
youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params  
</code></pre>

<p><strong>Without scheme, with subdomain (Domain: youtube.com, Path: /watch)</strong>  </p>

<pre><code>www.youtube.com/watch?v=&lt;video:id&gt;   
www.youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;  
www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params   
</code></pre>

<p><strong>With HTTP scheme, without subdomain (Domain: youtube.com, Path: /watch)</strong></p>

<pre><code>http://youtube.com/watch?v=&lt;video:id&gt;   
http://youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
http://youtube.com/watch?other_params&amp;v=&lt;video:id&gt;   
http://youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params  
</code></pre>

<p><strong>With HTTP scheme and subdomain (Domain: youtube.com, Path: /watch)</strong></p>

<pre><code>http://www.youtube.com/watch?v=&lt;video:id&gt;   
http://www.youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
http://www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;   
http://www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params  
</code></pre>

<p><strong>With HTTPS scheme, without subdomain (Domain: youtube.com, Path: /watch)</strong></p>

<pre><code>https://youtube.com/watch?v=&lt;video:id&gt;   
https://youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
https://youtube.com/watch?other_params&amp;v=&lt;video:id&gt;   
https://youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params     
</code></pre>

<p><strong>With HTTPS scheme and subdomain (Domain: youtube.com, Path: /watch)</strong></p>

<pre><code>https://www.youtube.com/watch?v=&lt;video:id&gt;   
https://www.youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
https://www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;
https://www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params  
</code></pre>

<h2>FUNCTIONAL USAGE</h2>

<p>The most easy way to use the pattern, is to wrap it into a function such as this one:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>/**
 * JavaScript function to match (and return) the video Id
 * of any valid Youtube Url, given as input string.
 * @author: Stephan Schmitz &lt;eyecatchup@gmail.com&gt;
 * @url: https://stackoverflow.com/a/10315969/624466
 */
function ytVidId(url) {
  var p = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&amp;v=))((\w|-){11})(?:\S+)?$/;
  return (url.match(p)) ? RegExp.$1 : false;
}

// for example snippet only!
document.body.addEventListener('click', function(e) {
    if (e.target.className == 'yt-url' &amp;&amp; 'undefined' !== e.target.value) {
        var ytId = ytVidId(e.target.value);
        alert(e.target.value + ""\r\nResult: "" + (!ytId ? 'false' : ytId));
    }
}, false);</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;!-- Click the buttons to probe URLs --&gt;
&lt;input type=""button"" value=""https://www.youtube.com/watch?v=p-e2G_VcTms&amp;feature=g-logo&amp;context=G29aead6FOAAAAAAABAA"" class=""yt-url""&gt;
&lt;input type=""button"" value=""https://www.youtube.com/latest"" class=""yt-url""&gt;</code></pre>
</div>
</div>
</p>

<p>If the type of the function's result value must be a boolean value, just replace <code>RegExp.$1</code> by <code>true</code>. That's it.</p>

<p><strong>One final note on the video Id length</strong>: One asked if the ids have a fixed length of 11 chars? and if it might change in the future?</p>

<p>The best answer to that question is probably also the only ""official"" statement that I've found <a href=""https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/oAztQ3f1tcM"" rel=""noreferrer"">here</a> and which says: <em>""I don't see anywhere in the documentation where we officially commit to a standard length of 11 characters for YouTube video ids. It's one of those things where we have a current implementation, and it may stay that way indefinitely. But we're not offering any official commitment to that, so proceed at your own risk.""</em></p>
",eyecatchUp,Community,1335358096,1420211468,1495540016
http://stackoverflow.com/a/10315969/624466,jQuery Youtube URL Validation with regex,45173,Mithun Sreedharan,Community,1275557512,1467271182,1495540016,https://stackoverflow.com/questions/2964678/jquery-youtube-url-validation-with-regex,"<h1>ULTIMATE YOUTUBE REGEX</h1>

<h2>Cherry picking</h2>

<p>Because the explanation is getting longer and longer, I place the final result at the top. Feel free to copy+paste, and go on your way. For a detailed explanation, read <em>""the full story""</em> below.</p>

<pre><code>/**
 * JavaScript function to match (and return) the video Id 
 * of any valid Youtube Url, given as input string.
 * @author: Stephan Schmitz &lt;eyecatchup@gmail.com&gt;
 * @url: https://stackoverflow.com/a/10315969/624466
 */
function ytVidId(url) {
  var p = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&amp;v=))((\w|-){11})(?:\S+)?$/;
  return (url.match(p)) ? RegExp.$1 : false;
}
</code></pre>

<h2>The full story</h2>

<p><a href=""https://stackoverflow.com/a/2964758/624466"">Amarghosh's regex</a> looks good, at first sight. But it:</p>

<ol>
<li>doesn't match video id's that include dashes (-),</li>
<li>doesn't validate the id length (<code>v=aa</code> and <code>v=aaaaaaaaaaaaaaaaaa</code> return to be valid), </li>
<li>and doesn't match secured URLs at all (http<strong>s</strong>://youtube.com/watch?valid_params)  </li>
</ol>

<p>To match https, the dash character, and to validate the id length, this was my initial suggestion of a modified version of Amarghosh's regex:</p>

<p><code>^https?:\/\/(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$</code>   </p>

<h2>UPDATE 1: URLs versus Strings</h2>

<p>After I posted the above pattern, I was asked: <em>""What if the <strong>URL</strong> is like this;<br>
<code>youtube.com/watch?gl=US&amp;hl=en-US&amp;v=bQVoAWSP7k4</code>""</em>?   </p>

<p>First of, please note that this not a <strong>URL</strong> at all. <a href=""http://tools.ietf.org/html/rfc3986#page-16"" rel=""noreferrer"">RFC compliant URLs</a> must start with the scheme! ;) </p>

<p>Anyway, to match any kind of <strong>string</strong> that indicates to refer to a YouTube video, I updated my answer to exclude the URL scheme being required. So my second suggestion was as follows:</p>

<p><code>^(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?(?=.*v=((\w|-){11}))(?:\S+)?$</code></p>

<h2>UPDATE 2: The ultimate regex</h2>

<p>Then I was asked to add support for a ""special case""; the <em>youtu.be</em> short urls. Initially I did not add these, since it wasn't specifically part of the question. However I updated my answer now with <strong>all</strong> possible <em>""special cases""</em>. This means that not only have I added support for youtu.be links, but also the request paths ""/v"" and ""/embed"".</p>

<p>So, may I introduce: My final and ultimate Youtube regex:</p>

<p><code>^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&amp;v=))((\w|-){11})(?:\S+)?$</code></p>

<h2>What strings are matched?</h2>

<p>Now this pattern will work for any strings, formatted as follows:</p>

<p><strong>Without scheme and subdomain (Domain: youtu.be, Path: /)</strong>   </p>

<pre><code>youtu.be/&lt;video:id&gt;   
</code></pre>

<p><strong>Without scheme, with subdomain (Domain: youtu.be, Path: /)</strong>  </p>

<pre><code>www.youtu.be/&lt;video:id&gt;     
</code></pre>

<p><strong>With HTTP scheme, without subdomain (Domain: youtu.be, Path: /)</strong></p>

<pre><code>http://youtu.be/&lt;video:id&gt;   
</code></pre>

<p><strong>With HTTP scheme and subdomain (Domain: youtu.be, Path: /)</strong></p>

<pre><code>http://www.youtu.be/&lt;video:id&gt;   
</code></pre>

<p><strong>With HTTPS scheme, without subdomain (Domain: youtu.be, Path: /)</strong></p>

<pre><code>https://youtu.be/&lt;video:id&gt;     
</code></pre>

<p><strong>With HTTPS scheme and subdomain (Domain: youtu.be, Path: /)</strong></p>

<pre><code>https://www.youtu.be/&lt;video:id&gt;   
</code></pre>

<p><strong>Without scheme and subdomain (Domain: youtube.com, Path: /embed)</strong>   </p>

<pre><code>youtube.com/embed/&lt;video:id&gt;   
youtube.com/embed/&lt;video:id&gt;&amp;other_params 
</code></pre>

<p><strong>Without scheme, with subdomain (Domain: youtube.com, Path: /embed)</strong>  </p>

<pre><code>www.youtube.com/embed/&lt;video:id&gt;   
www.youtube.com/embed/&lt;video:id&gt;&amp;other_params   
</code></pre>

<p><strong>With HTTP scheme, without subdomain (Domain: youtube.com, Path: /embed)</strong></p>

<pre><code>http://youtube.com/embed/&lt;video:id&gt;   
http://youtube.com/embed/&lt;video:id&gt;&amp;other_params  
</code></pre>

<p><strong>With HTTP scheme and subdomain (Domain: youtube.com, Path: /embed)</strong></p>

<pre><code>http://www.youtube.com/embed/&lt;video:id&gt;   
http://www.youtube.com/embed/&lt;video:id&gt;&amp;other_params  
</code></pre>

<p><strong>With HTTPS scheme, without subdomain (Domain: youtube.com, Path: /embed)</strong></p>

<pre><code>https://youtube.com/embed/&lt;video:id&gt;   
https://youtube.com/embed/&lt;video:id&gt;&amp;other_params    
</code></pre>

<p><strong>With HTTPS scheme and subdomain (Domain: youtube.com, Path: /embed)</strong></p>

<pre><code>https://www.youtube.com/embed/&lt;video:id&gt;   
https://www.youtube.com/embed/&lt;video:id&gt;&amp;other_params
</code></pre>

<p><strong>Without scheme and subdomain (Domain: youtube.com, Path: /v)</strong>   </p>

<pre><code>youtube.com/v/&lt;video:id&gt;   
youtube.com/v/&lt;video:id&gt;&amp;other_params 
</code></pre>

<p><strong>Without scheme, with subdomain (Domain: youtube.com, Path: /v)</strong>  </p>

<pre><code>www.youtube.com/v/&lt;video:id&gt;   
www.youtube.com/v/&lt;video:id&gt;&amp;other_params   
</code></pre>

<p><strong>With HTTP scheme, without subdomain (Domain: youtube.com, Path: /v)</strong></p>

<pre><code>http://youtube.com/v/&lt;video:id&gt;   
http://youtube.com/v/&lt;video:id&gt;&amp;other_params  
</code></pre>

<p><strong>With HTTP scheme and subdomain (Domain: youtube.com, Path: /v)</strong></p>

<pre><code>http://www.youtube.com/v/&lt;video:id&gt;   
http://www.youtube.com/v/&lt;video:id&gt;&amp;other_params  
</code></pre>

<p><strong>With HTTPS scheme, without subdomain (Domain: youtube.com, Path: /v)</strong></p>

<pre><code>https://youtube.com/v/&lt;video:id&gt;   
https://youtube.com/v/&lt;video:id&gt;&amp;other_params    
</code></pre>

<p><strong>With HTTPS scheme and subdomain (Domain: youtube.com, Path: /v)</strong></p>

<pre><code>https://www.youtube.com/v/&lt;video:id&gt;   
https://www.youtube.com/v/&lt;video:id&gt;&amp;other_params   
</code></pre>

<p><strong>Without scheme and subdomain (Domain: youtube.com, Path: /watch)</strong>   </p>

<pre><code>youtube.com/watch?v=&lt;video:id&gt;   
youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
youtube.com/watch?other_params&amp;v=&lt;video:id&gt; 
youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params  
</code></pre>

<p><strong>Without scheme, with subdomain (Domain: youtube.com, Path: /watch)</strong>  </p>

<pre><code>www.youtube.com/watch?v=&lt;video:id&gt;   
www.youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;  
www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params   
</code></pre>

<p><strong>With HTTP scheme, without subdomain (Domain: youtube.com, Path: /watch)</strong></p>

<pre><code>http://youtube.com/watch?v=&lt;video:id&gt;   
http://youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
http://youtube.com/watch?other_params&amp;v=&lt;video:id&gt;   
http://youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params  
</code></pre>

<p><strong>With HTTP scheme and subdomain (Domain: youtube.com, Path: /watch)</strong></p>

<pre><code>http://www.youtube.com/watch?v=&lt;video:id&gt;   
http://www.youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
http://www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;   
http://www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params  
</code></pre>

<p><strong>With HTTPS scheme, without subdomain (Domain: youtube.com, Path: /watch)</strong></p>

<pre><code>https://youtube.com/watch?v=&lt;video:id&gt;   
https://youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
https://youtube.com/watch?other_params&amp;v=&lt;video:id&gt;   
https://youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params     
</code></pre>

<p><strong>With HTTPS scheme and subdomain (Domain: youtube.com, Path: /watch)</strong></p>

<pre><code>https://www.youtube.com/watch?v=&lt;video:id&gt;   
https://www.youtube.com/watch?v=&lt;video:id&gt;&amp;other_params   
https://www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;
https://www.youtube.com/watch?other_params&amp;v=&lt;video:id&gt;&amp;more_params  
</code></pre>

<h2>FUNCTIONAL USAGE</h2>

<p>The most easy way to use the pattern, is to wrap it into a function such as this one:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>/**
 * JavaScript function to match (and return) the video Id
 * of any valid Youtube Url, given as input string.
 * @author: Stephan Schmitz &lt;eyecatchup@gmail.com&gt;
 * @url: https://stackoverflow.com/a/10315969/624466
 */
function ytVidId(url) {
  var p = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&amp;v=))((\w|-){11})(?:\S+)?$/;
  return (url.match(p)) ? RegExp.$1 : false;
}

// for example snippet only!
document.body.addEventListener('click', function(e) {
    if (e.target.className == 'yt-url' &amp;&amp; 'undefined' !== e.target.value) {
        var ytId = ytVidId(e.target.value);
        alert(e.target.value + ""\r\nResult: "" + (!ytId ? 'false' : ytId));
    }
}, false);</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;!-- Click the buttons to probe URLs --&gt;
&lt;input type=""button"" value=""https://www.youtube.com/watch?v=p-e2G_VcTms&amp;feature=g-logo&amp;context=G29aead6FOAAAAAAABAA"" class=""yt-url""&gt;
&lt;input type=""button"" value=""https://www.youtube.com/latest"" class=""yt-url""&gt;</code></pre>
</div>
</div>
</p>

<p>If the type of the function's result value must be a boolean value, just replace <code>RegExp.$1</code> by <code>true</code>. That's it.</p>

<p><strong>One final note on the video Id length</strong>: One asked if the ids have a fixed length of 11 chars? and if it might change in the future?</p>

<p>The best answer to that question is probably also the only ""official"" statement that I've found <a href=""https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/oAztQ3f1tcM"" rel=""noreferrer"">here</a> and which says: <em>""I don't see anywhere in the documentation where we officially commit to a standard length of 11 characters for YouTube video ids. It's one of those things where we have a current implementation, and it may stay that way indefinitely. But we're not offering any official commitment to that, so proceed at your own risk.""</em></p>
",eyecatchUp,Community,1335358096,1420211468,1495540016
http://stackoverflow.com/a/10333324/1106908,UTF-8 safe equivalent of ord or charCodeAt() in PHP,18201,Rila,nwellnhof,1335442169,1530093925,1530093925,https://stackoverflow.com/questions/10333098/utf-8-safe-equivalent-of-ord-or-charcodeat-in-php,"<p>Try:</p>

<pre><code>
function uniord($c) {
        $h = ord($c{0});
        if ($h &lt;= 0x7F) {
            return $h;
        } else if ($h &lt; 0xC2) {
            return false;
        } else if ($h &lt;= 0xDF) {
            return ($h & 0x1F) &lt;&lt; 6 | (ord($c{1}) & 0x3F);
        } else if ($h &lt;= 0xEF) {
            return ($h & 0x0F) &lt;&lt; 12 | (ord($c{1}) & 0x3F) &lt;&lt; 6
                                     | (ord($c{2}) & 0x3F);
        } else if ($h &lt;= 0xF4) {
            return ($h & 0x0F) &lt;&lt; 18 | (ord($c{1}) & 0x3F) &lt;&lt; 12
                                     | (ord($c{2}) & 0x3F) &lt;&lt; 6
                                     | (ord($c{3}) & 0x3F);
        } else {
            return false;
        }
    }
    echo uniord('');
</code></pre>
",Sudhir Bastakoti,,1335443010,1335443010,0
http://stackoverflow.com/a/10339348/2197402,Recommended approach to monkey patching a class in ruby,8427,stantona,stantona,1335458433,1470060039,1335465414,https://stackoverflow.com/questions/10337712/recommended-approach-to-monkey-patching-a-class-in-ruby,"<p>Honestly, I used to use the 1st form (reopening the class), as it feels more natural, but your question forced me to do some research on the subject and here's the result. </p>

<p>The problem with reopening the class is that it'll silently define a new class if the original one, that you intended to reopen, for some reason wasn't defined at the moment. The result might be different:</p>

<ol>
<li><p>If you don't override any methods but only add the new ones and the original implementation is defined (e.g., file, where the class is originally defined is loaded) later everything will be ok.</p></li>
<li><p>If you redefine some methods and the original is loaded later your methods will be overridden back with their original versions.</p></li>
<li><p>The most interesting case is when you use standard <a href=""http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-autoload"">autoloading</a> or some fancy reloading mechanism (like the one used in Rails) to load/reload classes. Some of these solutions rely on <a href=""http://ruby-doc.org/core-1.9.3/Module.html#method-i-const_missing"">const_missing</a> that is called when you reference undefined constant. In that case autoloading mechanism tries to find undefined class' definition and load it. But if you're defining class on your own (while you intended to reopen already defined one) it won't be 'missing' any longer and the original might be never loaded at all as the autoloading mechanism won't be triggered.</p></li>
</ol>

<p>On the other hand, if you use <code>class_eval</code> you'll be instantly notified if the class is not defined at the moment. In addition, as you're referencing the class when you call its <code>class_eval</code> method, any autoloading mechanism will have a chance to locate class' definition and load it.</p>

<p>Having that in mind <code>class_eval</code> seems to be a better approach. Though, I'd be happy to hear some other opinion.</p>
",KL-7,,1335465226,1335465226,0
http://stackoverflow.com/a/10375234/403165,Is there a simple way to get the language code from a country code in PHP,16684,codecowboy,codecowboy,1334585031,1501804184,1335359768,https://stackoverflow.com/questions/10175658/is-there-a-simple-way-to-get-the-language-code-from-a-country-code-in-php,"<p>As other have pointed out, there is no built-in function as this likely due to the reality of many countries having multiple languages. So unfortunately, I can't point you to a library that does this, but I did go ahead and write a little function which does what you want. </p>

<p>There are two caveats, one being if it isn't provided a language it will just pick the first locale in the list. To get around this, you'd have to put some logic around the function call to provide it with the appropriate language. The other is that it needs to have php5-intl installed.</p>

<pre><code>&lt;?php

/**
/* Returns a locale from a country code that is provided.
/*
/* @param $country_code  ISO 3166-2-alpha 2 country code
/* @param $language_code ISO 639-1-alpha 2 language code
/* @returns  a locale, formatted like en_US, or null if not found
/**/
function country_code_to_locale($country_code, $language_code = '')
{
    // Locale list taken from:
    // http://stackoverflow.com/questions/3191664/
    // list-of-all-locales-and-their-short-codes
    $locales = array('af-ZA',
                    'am-ET',
                    'ar-AE',
                    'ar-BH',
                    'ar-DZ',
                    'ar-EG',
                    'ar-IQ',
                    'ar-JO',
                    'ar-KW',
                    'ar-LB',
                    'ar-LY',
                    'ar-MA',
                    'arn-CL',
                    'ar-OM',
                    'ar-QA',
                    'ar-SA',
                    'ar-SY',
                    'ar-TN',
                    'ar-YE',
                    'as-IN',
                    'az-Cyrl-AZ',
                    'az-Latn-AZ',
                    'ba-RU',
                    'be-BY',
                    'bg-BG',
                    'bn-BD',
                    'bn-IN',
                    'bo-CN',
                    'br-FR',
                    'bs-Cyrl-BA',
                    'bs-Latn-BA',
                    'ca-ES',
                    'co-FR',
                    'cs-CZ',
                    'cy-GB',
                    'da-DK',
                    'de-AT',
                    'de-CH',
                    'de-DE',
                    'de-LI',
                    'de-LU',
                    'dsb-DE',
                    'dv-MV',
                    'el-GR',
                    'en-029',
                    'en-AU',
                    'en-BZ',
                    'en-CA',
                    'en-GB',
                    'en-IE',
                    'en-IN',
                    'en-JM',
                    'en-MY',
                    'en-NZ',
                    'en-PH',
                    'en-SG',
                    'en-TT',
                    'en-US',
                    'en-ZA',
                    'en-ZW',
                    'es-AR',
                    'es-BO',
                    'es-CL',
                    'es-CO',
                    'es-CR',
                    'es-DO',
                    'es-EC',
                    'es-ES',
                    'es-GT',
                    'es-HN',
                    'es-MX',
                    'es-NI',
                    'es-PA',
                    'es-PE',
                    'es-PR',
                    'es-PY',
                    'es-SV',
                    'es-US',
                    'es-UY',
                    'es-VE',
                    'et-EE',
                    'eu-ES',
                    'fa-IR',
                    'fi-FI',
                    'fil-PH',
                    'fo-FO',
                    'fr-BE',
                    'fr-CA',
                    'fr-CH',
                    'fr-FR',
                    'fr-LU',
                    'fr-MC',
                    'fy-NL',
                    'ga-IE',
                    'gd-GB',
                    'gl-ES',
                    'gsw-FR',
                    'gu-IN',
                    'ha-Latn-NG',
                    'he-IL',
                    'hi-IN',
                    'hr-BA',
                    'hr-HR',
                    'hsb-DE',
                    'hu-HU',
                    'hy-AM',
                    'id-ID',
                    'ig-NG',
                    'ii-CN',
                    'is-IS',
                    'it-CH',
                    'it-IT',
                    'iu-Cans-CA',
                    'iu-Latn-CA',
                    'ja-JP',
                    'ka-GE',
                    'kk-KZ',
                    'kl-GL',
                    'km-KH',
                    'kn-IN',
                    'kok-IN',
                    'ko-KR',
                    'ky-KG',
                    'lb-LU',
                    'lo-LA',
                    'lt-LT',
                    'lv-LV',
                    'mi-NZ',
                    'mk-MK',
                    'ml-IN',
                    'mn-MN',
                    'mn-Mong-CN',
                    'moh-CA',
                    'mr-IN',
                    'ms-BN',
                    'ms-MY',
                    'mt-MT',
                    'nb-NO',
                    'ne-NP',
                    'nl-BE',
                    'nl-NL',
                    'nn-NO',
                    'nso-ZA',
                    'oc-FR',
                    'or-IN',
                    'pa-IN',
                    'pl-PL',
                    'prs-AF',
                    'ps-AF',
                    'pt-BR',
                    'pt-PT',
                    'qut-GT',
                    'quz-BO',
                    'quz-EC',
                    'quz-PE',
                    'rm-CH',
                    'ro-RO',
                    'ru-RU',
                    'rw-RW',
                    'sah-RU',
                    'sa-IN',
                    'se-FI',
                    'se-NO',
                    'se-SE',
                    'si-LK',
                    'sk-SK',
                    'sl-SI',
                    'sma-NO',
                    'sma-SE',
                    'smj-NO',
                    'smj-SE',
                    'smn-FI',
                    'sms-FI',
                    'sq-AL',
                    'sr-Cyrl-BA',
                    'sr-Cyrl-CS',
                    'sr-Cyrl-ME',
                    'sr-Cyrl-RS',
                    'sr-Latn-BA',
                    'sr-Latn-CS',
                    'sr-Latn-ME',
                    'sr-Latn-RS',
                    'sv-FI',
                    'sv-SE',
                    'sw-KE',
                    'syr-SY',
                    'ta-IN',
                    'te-IN',
                    'tg-Cyrl-TJ',
                    'th-TH',
                    'tk-TM',
                    'tn-ZA',
                    'tr-TR',
                    'tt-RU',
                    'tzm-Latn-DZ',
                    'ug-CN',
                    'uk-UA',
                    'ur-PK',
                    'uz-Cyrl-UZ',
                    'uz-Latn-UZ',
                    'vi-VN',
                    'wo-SN',
                    'xh-ZA',
                    'yo-NG',
                    'zh-CN',
                    'zh-HK',
                    'zh-MO',
                    'zh-SG',
                    'zh-TW',
                    'zu-ZA',);

    foreach ($locales as $locale)
    {
        $locale_region = locale_get_region($locale);
        $locale_language = locale_get_primary_language($locale);
        $locale_array = array('language' =&gt; $locale_language,
                             'region' =&gt; $locale_region);

        if (strtoupper($country_code) == $locale_region &amp;&amp;
            $language_code == '')
        {
            return locale_compose($locale_array);
        }
        elseif (strtoupper($country_code) == $locale_region &amp;&amp;
                strtolower($language_code) == $locale_language)
        {
            return locale_compose($locale_array);
        }
    }

    return null;
}
?&gt;
</code></pre>
",TheJF,,1335727686,1335727686,0
http://stackoverflow.com/a/10411128/1372085,How to access fixture data in test case in CakePHP 2?,1377,Schlaefer,,1329661946,1335951237,0,https://stackoverflow.com/questions/9350074/how-to-access-fixture-data-in-test-case-in-cakephp-2,"<p>You can access to the fixture data by loading fixture class.</p>

<p>This is a bother way but I don't know how to access fixture data directly because 
<code>$this-&gt;fixtureManager-&gt;_loaded</code> is declared as protected.</p>

<pre><code>&lt;?php
// register fixture path
App::build(array('Fixture' =&gt; array('%s' . 'Test' . DS . 'Fixture' . DS)), App::REGISTER);

// load fixture
App::uses('UserFixture', 'Fixture');

class UserTestCase extends CakeTestCake {
    public function testUser() {
        // access fixture data
        $userFixture = new UserFixture();
        $users = $userFixture-&gt;records;
    }
</code></pre>
",Hideo Matsumoto,,1335951237,1335951237,0
http://stackoverflow.com/a/10417435/1664216,override &quot;/auth/identity&quot;-page of omniauth identity,1933,wdspkr,,1326475735,1417263819,0,https://stackoverflow.com/questions/8854703/override-auth-identity-page-of-omniauth-identity,"<p>An <code>OmniAuth</code> strategy object has a method <code>request_phase</code> which generates a html form and shows it to user. For ""omniauth-identity"" strategy this would be the form you see at <code>/auth/identity</code> url. </p>

<p>You can override the <code>request_phase</code> method and replace the form generator with, for example, a redirect to your custom login page (assuming you have it available at <code>/login</code> url). Place the following along with your omniauth initialization code:</p>

<pre><code>module OmniAuth
  module Strategies
   class Identity
     def request_phase
       redirect '/login'
     end
   end
 end
end

# Your OmniAuth::Builder configuration goes here...
</code></pre>
",1gor,,1335974460,1335974460,0
http://stackoverflow.com/a/1041939/1532974,What&#39;s the most efficient way to erase duplicates and sort a vector?,282112,Kyle Ryan,chema989,1245889722,1562717514,1479924201,https://stackoverflow.com/questions/1041620/whats-the-most-efficient-way-to-erase-duplicates-and-sort-a-vector,"<p>I agree with <a href=""https://stackoverflow.com/questions/1041620/most-efficient-way-to-erase-duplicates-and-sort-a-c-vector/1041874#1041874"">R. Pate</a> and <a href=""https://stackoverflow.com/questions/1041620/most-efficient-way-to-erase-duplicates-and-sort-a-c-vector/1041700#1041700"">Todd Gardner</a>; a <a href=""http://en.cppreference.com/w/cpp/container/set"" rel=""noreferrer""><code>std::set</code></a> might be a good idea here.  Even if you're stuck using vectors, if you have enough duplicates, you might be better off creating a set to do the dirty work.</p>

<p>Let's compare three approaches:</p>

<p><strong>Just using vector, sort + unique</strong></p>

<pre><code>sort( vec.begin(), vec.end() );
vec.erase( unique( vec.begin(), vec.end() ), vec.end() );
</code></pre>

<p><strong>Convert to set (manually)</strong></p>

<pre><code>set&lt;int&gt; s;
unsigned size = vec.size();
for( unsigned i = 0; i &lt; size; ++i ) s.insert( vec[i] );
vec.assign( s.begin(), s.end() );
</code></pre>

<p><strong>Convert to set (using a constructor)</strong></p>

<pre><code>set&lt;int&gt; s( vec.begin(), vec.end() );
vec.assign( s.begin(), s.end() );
</code></pre>

<p>Here's how these perform as the number of duplicates changes:</p>

<p><img src=""https://i.stack.imgur.com/gGgtR.png"" alt=""comparison of vector and set approaches""></p>

<p><strong>Summary</strong>: when the number of duplicates is large enough, <em>it's actually faster to convert to a set and then dump the data back into a vector</em>.  </p>

<p>And for some reason, doing the set conversion manually seems to be faster than using the set constructor -- at least on the toy random data that I used.</p>
",Nate Kohl,Donald Duck,1245897903,1495971525,1495971525
http://stackoverflow.com/a/10439207/1773758,replacing layout on a QWidget with another layout,10455,eudoxos,Community,1335971582,1336078601,1495535488,https://stackoverflow.com/questions/10416582/replacing-layout-on-a-qwidget-with-another-layout,"<p>You can simply reparent the layout to a temporary widget:</p>

<pre><code>def reLayout(self):
    QWidget().setLayout(self.layout())
    layout = QGridLayout(self)
    ...
</code></pre>

<p>That will reparent all the child widgets to that temporary object, and that object is deleted immediately along with its new children because we don't keep a reference to it.</p>

<p>But the typical way to have multiple layouts for a single widget and to be able to switch between them is to use a <code>QStackedWidget</code> or <code>QStackedLayout</code>.</p>

<p><hr>
And if you still need the answer to that secondary question:</p>

<blockquote>
  <p>How to delete the old layout first?</p>
</blockquote>

<p>It seems you can't delete directly a <code>QObject</code> which has a parent, because the parent is keeping a reference to that object. But you can add the object to a temporary <code>QObjectCleanupHandler</code> which, like the above solution, will be deleted with the object(s) it contains immediately:</p>

<pre><code>QObjectCleanupHandler().add(self.layout())
</code></pre>
",alexisdm,,1336078601,1336078601,0
http://stackoverflow.com/a/10441405/1453095,How do you match only valid roman numerals with a regular expression?,59898,Daniel Magliola,Community,1225934965,1545482740,1495542881,https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression,"<p>To avoid matching the empty string you'll need to repeat the pattern four times and replace each <code>0</code> with a <code>1</code> in turn, and account for <code>V</code>, <code>L</code> and <code>D</code>:</p>

<pre><code>(M{1,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})|M{0,4}(CM|C?D|D?C{1,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})|M{0,4}(CM|CD|D?C{0,3})(XC|X?L|L?X{1,3})(IX|IV|V?I{0,3})|M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|I?V|V?I{1,3}))
</code></pre>

<p>In this case (because this pattern uses <code>^</code> and <code>$</code>) you would be better off checking for empty lines first and don't bother matching them. If you are using <a href=""http://www.regular-expressions.info/wordboundaries.html"">word boundaries</a> then you don't have a problem because there's no such thing as an empty word. (At least regex doesn't define one; don't start philosophising, I'm being pragmatic here!)</p>

<hr>

<p>In my own particular (real world) case I needed match numerals at word endings and I found no other way around it. I needed to scrub off the footnote numbers from my plain text document, where text such as ""the Red Sea<sup>cl</sup> and the Great Barrier Reef<sup>cli</sup>"" had been converted to <code>the Red Seacl and the Great Barrier Reefcli</code>. But I still had problems with valid words like <code>Tahiti</code> and <code>fantastic</code> are scrubbed into <code>Tahit</code> and <code>fantasti</code>.</p>
",Corin,Corin,1336093660,1336096834,1336096834
http://stackoverflow.com/a/10443946/1025836,How to convert OLE Automation Date to readable format using javascript?,9730,semantic_c0d3r,,1336110564,1336113646,0,https://stackoverflow.com/questions/10443325/how-to-convert-ole-automation-date-to-readable-format-using-javascript,"<p>The automation date is the number of days since January 1, 1900 (with the year 1900 strangely being treated as a leap year). So a conversion is:</p>

<pre><code>var oaDate = 40967.6424503935;
var date = new Date();
date.setTime((oaDate - 25569) * 24 * 3600 * 1000);
alert(date);
</code></pre>

<p>This solution creates a UTC date. When you display it, it'll be displayed in your local timezone. Depending on whether your date is a local date or a UTC date, this is correct or will require some additional timezone fiddling.</p>
",Codo,,1336113646,1336113646,0
http://stackoverflow.com/a/10454560/2571482,Javascript: How to retrieve the number of decimals of a *string* number?,56863,J&#233;r&#244;me Verstrynge,Dan Dascalescu,1336157400,1522701431,1497428804,https://stackoverflow.com/questions/10454518/javascript-how-to-retrieve-the-number-of-decimals-of-a-string-number,"<pre><code>function decimalPlaces(num) {
  var match = (''+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
  if (!match) { return 0; }
  return Math.max(
       0,
       // Number of digits right of decimal point.
       (match[1] ? match[1].length : 0)
       // Adjust for scientific notation.
       - (match[2] ? +match[2] : 0));
}
</code></pre>

<p>The extra complexity is to handle scientific notation so</p>

<blockquote>
<pre><code>decimalPlaces('.05')
2
decimalPlaces('.5')
1
decimalPlaces('1')
0
decimalPlaces('25e-100')
100
decimalPlaces('2.5e-99')
100
decimalPlaces('.5e1')
0
decimalPlaces('.25e1')
1
</code></pre>
</blockquote>
",Mike Samuel,Mike Samuel,1336157616,1336157990,1336157990
http://stackoverflow.com/a/10454560/8279,Javascript: How to retrieve the number of decimals of a *string* number?,56863,J&#233;r&#244;me Verstrynge,Dan Dascalescu,1336157400,1522701431,1497428804,https://stackoverflow.com/questions/10454518/javascript-how-to-retrieve-the-number-of-decimals-of-a-string-number,"<pre><code>function decimalPlaces(num) {
  var match = (''+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
  if (!match) { return 0; }
  return Math.max(
       0,
       // Number of digits right of decimal point.
       (match[1] ? match[1].length : 0)
       // Adjust for scientific notation.
       - (match[2] ? +match[2] : 0));
}
</code></pre>

<p>The extra complexity is to handle scientific notation so</p>

<blockquote>
<pre><code>decimalPlaces('.05')
2
decimalPlaces('.5')
1
decimalPlaces('1')
0
decimalPlaces('25e-100')
100
decimalPlaces('2.5e-99')
100
decimalPlaces('.5e1')
0
decimalPlaces('.25e1')
1
</code></pre>
</blockquote>
",Mike Samuel,Mike Samuel,1336157616,1336157990,1336157990
http://stackoverflow.com/a/10456069/313561,what is a good invalid IP address to use for unit tests?,21128,Ryan R.,,1336165025,1554312314,0,https://stackoverflow.com/questions/10456044/what-is-a-good-invalid-ip-address-to-use-for-unit-tests,"<p>If you're looking for a truly invalid IP address (as opposed to an unrouteable one), you can take advantage of the fact that the first byte of a <a href=""http://www.comptechdoc.org/independent/networking/guide/netaddressing.html"">Class A</a> address cannot be <code>0</code>.</p>

<p>For example:</p>

<pre><code>0.42.42.42
</code></pre>
",Frdric Hamidi,Frdric Hamidi,1336165216,1336165843,1336165843
http://stackoverflow.com/a/10477334/1446092,Circle drawing with SVG&#39;s arc path,115721,,,1303343841,1562575122,1562575122,https://stackoverflow.com/questions/5737975/circle-drawing-with-svgs-arc-path,"<p>I know it's a bit late in the game, but I remembered this question from when it was new and I had a  similar dillemma, and I accidently found the ""right"" solution, if anyone is still looking for one:</p>

<pre><code>&lt;path 
    d=""
    M cx cy
    m -r, 0
    a r,r 0 1,0 (r * 2),0
    a r,r 0 1,0 -(r * 2),0
    ""
/&gt;
</code></pre>

<p>In other words, this:</p>

<pre><code>&lt;circle cx=""100"" cy=""100"" r=""75"" /&gt;
</code></pre>

<p>can be achieved as a path with this:</p>

<pre><code>  &lt;path 
        d=""
        M 100, 100
        m -75, 0
        a 75,75 0 1,0 150,0
        a 75,75 0 1,0 -150,0
        ""
  /&gt;
</code></pre>

<p>The trick is to have two arcs, the second one picking up where the first left off and using the negative diameter to get back to the original arc start point.</p>

<p>The reason it can't be done as a full circle in one arc (and I'm just speculating) is because you would be telling it to draw an arc from itself (let's say 150,150) to itself (150,150), which it renders as ""oh, I'm already there, no arc necessary!"".</p>

<p>The benefits of the solution I'm offering are:</p>

<ol>
<li>it's easy to translate from a circle directly to a path, and</li>
<li>there is no overlap in the two arc lines (which may cause issues if you are using markers or patterns, etc).  It's a clean continuous line, albeit drawn in two pieces. </li>
</ol>

<p>None of this would matter if they would just allow textpaths to accept shapes. But I think they are avoiding that solution since shape elements like circle don't technically have a ""start"" point.</p>

<p>jsfiddle demo: <a href=""http://jsfiddle.net/crazytonyi/mNt2g/"" rel=""noreferrer"">http://jsfiddle.net/crazytonyi/mNt2g/</a></p>

<h2>Update:</h2>

<p>If you are using the path for a <code>textPath</code> reference and you are wanting the text to render on the outer edge of the arc, you would use the exact same method but change the sweep-flag from 0 to 1 so that it treats the outside of the path as the surface instead of the inside (think of <code>1,0</code> as someone sitting at the center and drawing a circle around themselves, while <code>1,1</code> as someone walking around the center at radius distance and dragging their chalk beside them, if that's any help).  Here is the code as above but with the change:</p>

<pre><code>&lt;path 
    d=""
    M cx cy
    m -r, 0
    a r,r 0 1,1 (r * 2),0
    a r,r 0 1,1 -(r * 2),0
    ""
/&gt;
</code></pre>
",Anthony,Anthony,1336370297,1416287838,1416287838
http://stackoverflow.com/a/105074/1262753,Create GUID / UUID in JavaScript?,1529499,Jason Cohen,Boann,1221854460,1560966079,1419636988,https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript,"<p>UUIDs (Universally Unique IDentifier), also known as GUIDs (Globally Unique IDentifier), according to <a href=""https://www.ietf.org/rfc/rfc4122.txt"" rel=""noreferrer"">RFC 4122</a>, are identifiers with a certain uniqueness guarantee.</p>

<p>The best way to generate them, is to follow implementation instructions in the said RFC, use one of the many community vetted open source implementations.</p>

<p>A popular Open Source tool for working with UUIDs in JavaScript is <a href=""https://github.com/kelektiv/node-uuid"" rel=""noreferrer"">node-uuid</a></p>

<p>Note that just randomly generating the identifiers byte by byte, or character by character, will not give you the same guarantees as a conforming implementation. Also, very important, systems working with compliant UUIDs may choose not to accept randomly generated ones, and many open source validators will actually check for a valid structure.</p>

<p>An UUID must have this format:</p>

<pre><code>xxxxxxxx-xxxx-Mxxx-Nxxx-xxxxxxxxxxxx
</code></pre>

<p>Where the <em>M</em> and <em>N</em> positions may only have certain values. At this time, the only valid values for M are 1, 2, 3, 4 and 5, so randomly generating that position would make most results unacceptable.</p>
",John Millikin,mikemaccana,1221854725,1558533700,1558533700
http://stackoverflow.com/a/1052837/393697,Create a pointer to two-dimensional array,200332,Dill,Bo Persson,1246108843,1530970327,1354624322,https://stackoverflow.com/questions/1052818/create-a-pointer-to-two-dimensional-array,"<p>Here you wanna make a pointer to the first element of the array</p>

<pre><code>uint8_t (*matrix_ptr)[20] = l_matrix;
</code></pre>

<p>With typedef, this looks cleaner</p>

<pre><code>typedef uint8_t array_of_20_uint8_t[20];
array_of_20_uint8_t *matrix_ptr = l_matrix;
</code></pre>

<p>Then you can enjoy life again :)</p>

<pre><code>matrix_ptr[0][1] = ...;
</code></pre>

<p>Beware of the <a href=""https://stackoverflow.com/questions/274865/pointer-question-in-c/274943#274943"">pointer/array world</a> in C, much confusion is around this.</p>

<hr>

<h3>Edit</h3>

<p>Reviewing some of the other answers here, because the comment fields are too short to do there. Multiple alternatives were proposed, but it wasn't shown how they behave. Here is how they do</p>

<pre><code>uint8_t (*matrix_ptr)[][20] = l_matrix;
</code></pre>

<p>If you fix the error and add the address-of operator <code>&amp;</code> like in the following snippet</p>

<pre><code>uint8_t (*matrix_ptr)[][20] = &amp;l_matrix;
</code></pre>

<p>Then that one creates a pointer to an incomplete array type of elements of type array of 20 uint8_t. Because the pointer is to an array of arrays, you have to access it with</p>

<pre><code>(*matrix_ptr)[0][1] = ...;
</code></pre>

<p>And because it's a pointer to an incomplete array, you <em>cannot</em> do as a shortcut</p>

<pre><code>matrix_ptr[0][0][1] = ...;
</code></pre>

<p>Because indexing requires the element type's size to be known (indexing implies an addition of an integer to the pointer, so it won't work with incomplete types). Note that this only works in <code>C</code>, because <code>T[]</code> and <code>T[N]</code> are compatible types. C++ does not have a concept of <em>compatible types</em>, and so it will reject that code, because <code>T[]</code> and <code>T[10]</code> are different types. </p>

<hr>

<p>The following alternative doesn't work at all, because the element type of the array, when you view it as a one-dimensional array, is <em>not</em> <code>uint8_t</code>, but <code>uint8_t[20]</code></p>

<pre><code>uint8_t *matrix_ptr = l_matrix; // fail
</code></pre>

<hr>

<p>The following is a good alternative</p>

<pre><code>uint8_t (*matrix_ptr)[10][20] = &amp;l_matrix;
</code></pre>

<p>You access it with </p>

<pre><code>(*matrix_ptr)[0][1] = ...;
matrix_ptr[0][0][1] = ...; // also possible now
</code></pre>

<p>It has the benefit that it preserves the outer dimension's size. So you can apply sizeof on it</p>

<pre><code>sizeof (*matrix_ptr) == sizeof(uint8_t) * 10 * 20
</code></pre>

<hr>

<p>There is one other answer that makes use of the fact that items in an array are contiguously stored</p>

<pre><code>uint8_t *matrix_ptr = l_matrix[0];
</code></pre>

<p>Now, that formally only allows you to access the elements of the first element of the two dimensional array. That is, the following condition hold</p>

<pre><code>matrix_ptr[0] = ...; // valid
matrix_ptr[19] = ...; // valid

matrix_ptr[20] = ...; // undefined behavior
matrix_ptr[10*20-1] = ...; // undefined behavior
</code></pre>

<p>You will notice it probably works up to <code>10*20-1</code>, but if you throw on alias analysis and other aggressive optimizations, some compiler could make an assumption that may break that code. Having said that, i've never encountered a compiler that fails on it (but then again, i've not used that technique in real code), and even the C FAQ has that technique contained (with a warning about its UB'ness), and if you cannot change the array type, this is a last option to save you :)</p>
",Johannes Schaub - litb,Community,1246109848,1246113605,1495542877
http://stackoverflow.com/a/10530959/998816,How can I generate an MD5 hash?,967742,Akshay,bjb568,1231235112,1546516526,1407899134,https://stackoverflow.com/questions/415953/how-can-i-generate-an-md5-hash,"<p>Found this solution which is much cleaner in terms of getting a String representation back from an MD5 hash.</p>

<pre><code>import java.security.*;
import java.math.*;

public class MD5 {
    public static void main(String args[]) throws Exception{
        String s=""This is a test"";
        MessageDigest m=MessageDigest.getInstance(""MD5"");
        m.update(s.getBytes(),0,s.length());
        System.out.println(""MD5: ""+new BigInteger(1,m.digest()).toString(16));
    }
}
</code></pre>

<p>The code was extracted from <a href=""http://dzone.com/snippets/get-md5-hash-few-lines-java"">here</a>.</p>
",Heshan Perera,Anders R. Bystrup,1336641482,1359624097,1359624097
http://stackoverflow.com/a/1053662/41661,Bitfield manipulation in C,51909,SPWorley,Valentin Lorentz,1245944447,1472517834,1399740204,https://stackoverflow.com/questions/1044654/bitfield-manipulation-in-c,"<p>Bitfields are great and easy to read, but unfortunately <strong>the C language does not specify the layout of bitfields in memory</strong>, which means they are essentially useless for dealing with packed data in on-disk formats or binary wire protocols.  If you ask me, this decision was a design error in C&mdash;Ritchie could have picked an order and stuck with it.</p>
",Norman Ramsey,,1246138167,1246138167,0
http://stackoverflow.com/a/1054293/184363,How to import a Python class that is in a directory above?,152383,user129975,CharlesB,1246164985,1531866502,1361806114,https://stackoverflow.com/questions/1054271/how-to-import-a-python-class-that-is-in-a-directory-above,"<p>@gimel's answer is correct <em>if</em> you can guarantee the package hierarchy he mentions. If you can't -- if your real need is as you expressed it, exclusively tied to directories and without any necessary relationship to packaging -- then you need to work on <code>__file__</code> to find out the parent directory (a couple of <code>os.path.dirname</code> calls will do;-), then (if that directory is not already on <code>sys.path</code>) prepend temporarily insert said dir at the very start of <code>sys.path</code>, <code>__import__</code>, remove said dir again -- messy work indeed, but, ""when you must, you must"" (and Pyhon strives to never stop the programmer from doing what <strong>must</strong> be done -- just like the ISO C standard says in the ""Spirit of C"" section in its preface!-).</p>

<p>Here is an example that may work for you:</p>

<pre><code>import sys
import os.path
sys.path.append(
    os.path.abspath(os.path.join(os.path.dirname(__file__), os.path.pardir)))

import module_in_parent_dir
</code></pre>
",Alex Martelli,Jacob Marble,1246165621,1326960660,1326960660
http://stackoverflow.com/a/10556743/841108,JavaScript global error handling,167664,Bob,sg7,1244134386,1545347781,1521311838,https://stackoverflow.com/questions/951791/javascript-global-error-handling,"<h1>How to Catch Unhandled Javascript Errors</h1>

<p>Assign the <code>window.onerror</code> event to an event handler like:</p>

<pre><code>&lt;script type=""text/javascript""&gt;
window.onerror = function(msg, url, line, col, error) {
   // Note that col &amp; error are new to the HTML 5 spec and may not be 
   // supported in every browser.  It worked for me in Chrome.
   var extra = !col ? '' : '\ncolumn: ' + col;
   extra += !error ? '' : '\nerror: ' + error;

   // You can view the information in an alert to see things working like this:
   alert(""Error: "" + msg + ""\nurl: "" + url + ""\nline: "" + line + extra);

   // TODO: Report this error via ajax so you can keep track
   //       of what pages have JS issues

   var suppressErrorAlert = true;
   // If you return true, then error alerts (like in older versions of 
   // Internet Explorer) will be suppressed.
   return suppressErrorAlert;
};
&lt;/script&gt;
</code></pre>

<p>As commented in the code, if the return value of <code>window.onerror</code> is <code>true</code> then the browser should suppress showing an alert dialog.</p>

<h2>When does the window.onerror Event Fire?</h2>

<p>In a nutshell, the event is raised when either 1.) there is an uncaught exception or 2.) a compile time error occurs.</p>

<blockquote>
  <p><strong>uncaught exceptions</strong></p>
  
  <ul>
  <li>throw ""some messages""</li>
  <li>call_something_undefined();</li>
  <li>cross_origin_iframe.contentWindow.document;, a security exception</li>
  </ul>
  
  <p><strong>compile error</strong></p>
  
  <ul>
  <li><code>&lt;script&gt;{&lt;/script&gt;</code></li>
  <li><code>&lt;script&gt;for(;)&lt;/script&gt;</code></li>
  <li><code>&lt;script&gt;""oops&lt;/script&gt;</code></li>
  <li><code>setTimeout(""{"", 10);</code>, it will attempt to compile the first argument as
  a script</li>
  </ul>
</blockquote>

<h2>Browsers supporting window.onerror</h2>

<ul>
<li>Chrome 13+</li>
<li>Firefox 6.0+</li>
<li>Internet Explorer 5.5+</li>
<li>Opera 11.60+</li>
<li>Safari 5.1+</li>
</ul>

<h2>Screenshot:</h2>

<p>Example of the onerror code above in action after adding this to a test page:</p>

<pre><code>&lt;script type=""text/javascript""&gt;
call_something_undefined();
&lt;/script&gt;
</code></pre>

<p><img src=""https://i.stack.imgur.com/cl91I.png"" alt=""Javascript alert showing error information detailed by the window.onerror event""></p>

<h2>JSFiddle:</h2>

<p><a href=""https://jsfiddle.net/nzfvm44d/"" rel=""noreferrer"">https://jsfiddle.net/nzfvm44d/</a></p>

<h2>References:</h2>

<ul>
<li><a href=""https://developer.mozilla.org/en/DOM/window.onerror"" rel=""noreferrer"">Mozilla Developer Network :: window.onerror</a></li>
<li><a href=""http://msdn.microsoft.com/en-us/library/ms976144.aspx"" rel=""noreferrer"">MSDN :: Handling and Avoiding Web Page Errors Part 2: Run-Time Errors</a></li>
<li><a href=""http://blogs.microsoft.co.il/blogs/gilf/archive/2011/11/23/back-to-basics-javascript-onerror-event.aspx"" rel=""noreferrer"">Back to Basics  JavaScript onerror Event</a></li>
<li><a href=""http://dev.opera.com/articles/view/better-error-handling-with-window-onerror/"" rel=""noreferrer"">DEV.OPERA :: Better error handling with window.onerror</a></li>
<li><a href=""http://www.mattsnider.com/window-onerror-event/"" rel=""noreferrer"">Window onError Event</a></li>
<li><a href=""http://www.javascriptkit.com/javatutors/error2.shtml"" rel=""noreferrer"">Using the onerror event to suppress JavaScript errors</a></li>
<li><a href=""https://stackoverflow.com/q/1008692/590956"">SO :: window.onerror not firing in Firefox</a></li>
</ul>
",Sam,Community,1336761072,1487364953,1495541445
http://stackoverflow.com/a/1057534/89391,How to load all modules in a folder?,199172,Evan Fosmark,martineau,1246268295,1556505884,1512330250,https://stackoverflow.com/questions/1057431/how-to-load-all-modules-in-a-folder,"<p>List all python (<code>.py</code>) files in the current folder and put them as <code>__all__</code> variable in <code>__init__.py</code></p>

<pre><code>from os.path import dirname, basename, isfile, join
import glob
modules = glob.glob(join(dirname(__file__), ""*.py""))
__all__ = [ basename(f)[:-3] for f in modules if isfile(f) and not f.endswith('__init__.py')]
</code></pre>
",Anurag Uniyal,Anurag Uniyal,1246269985,1556505884,1556505884
http://stackoverflow.com/a/10588133/2315612,Converting timestamps larger than maxint into datetime objects,3729,GP89,,1337015696,1525922217,0,https://stackoverflow.com/questions/10588027/converting-timestamps-larger-than-maxint-into-datetime-objects,"<p>Think i worked it out, and I was kinda surprised that this doesn't throw the same exception</p>

<pre><code>&gt;&gt;&gt; datetime.datetime.fromtimestamp(0) + datetime.timedelta(seconds=2147570047)
datetime.datetime(2038, 1, 20, 4, 14, 7)
</code></pre>

<p>EDIT: This isn't a perfect solution, seems to be a bit of issues with time zones (I'm currently on BST time (+1) so might explain why this below is an hour apart)</p>

<pre><code>&gt;&gt;&gt; datetime.datetime.fromtimestamp(2047570047)
datetime.datetime(2034, 11, 19, 17, 27, 27)
&gt;&gt;&gt; datetime.datetime.fromtimestamp(0) + datetime.timedelta(seconds=2047570047)
datetime.datetime(2034, 11, 19, 18, 27, 27)
</code></pre>
",GP89,GP89,1337016181,1337083132,1337083132
http://stackoverflow.com/a/10589791/586382,Checking if a date is valid in javascript,77544,Guilherme Costa,Community,1337023252,1455736165,1495535466,https://stackoverflow.com/questions/10589732/checking-if-a-date-is-valid-in-javascript,"<p>Try this:</p>

<pre><code>var date = new Date();
console.log(date instanceof Date &amp;&amp; !isNaN(date.valueOf()));
</code></pre>

<p>This should return <code>true</code>.</p>

<p><em>UDATED: Added <code>isNaN</code> check to handle the case commented by <a href=""https://stackoverflow.com/users/122353/julian-h-lam"">Julian H. Lam</a></em></p>
",Gabriel Jrgens,Community,1337023503,1455736165,1495540946
http://stackoverflow.com/a/1060034/1090657,Is there a way to detect if a browser window is not currently active?,240331,Luke Francl,Mark Amery,1246303200,1561621198,1425469740,https://stackoverflow.com/questions/1060008/is-there-a-way-to-detect-if-a-browser-window-is-not-currently-active,"<p>Since originally writing this answer, a new specification has reached <em>recommendation</em> status thanks to the W3C.The <a href=""http://www.w3.org/TR/page-visibility/"" rel=""noreferrer"">Page Visibility API</a> (on <a href=""https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API"" rel=""noreferrer"">MDN</a>) now allows us to more accurately detect when a page is hidden to the user.</p>

<p>Current browser support:</p>

<ul>
<li>Chrome 13+</li>
<li>Internet Explorer 10+</li>
<li>Firefox 10+</li>
<li>Opera 12.10+ <sup>[<a href=""https://dev.opera.com/blog/page-visibility-api-support-in-opera-12-10/"" rel=""noreferrer"">read notes</a>]</sup></li>
</ul>

<p>The following code makes use of the API, falling back to the less reliable blur/focus method in incompatible browsers.</p>

<pre><code>(function() {
  var hidden = ""hidden"";

  // Standards:
  if (hidden in document)
    document.addEventListener(""visibilitychange"", onchange);
  else if ((hidden = ""mozHidden"") in document)
    document.addEventListener(""mozvisibilitychange"", onchange);
  else if ((hidden = ""webkitHidden"") in document)
    document.addEventListener(""webkitvisibilitychange"", onchange);
  else if ((hidden = ""msHidden"") in document)
    document.addEventListener(""msvisibilitychange"", onchange);
  // IE 9 and lower:
  else if (""onfocusin"" in document)
    document.onfocusin = document.onfocusout = onchange;
  // All others:
  else
    window.onpageshow = window.onpagehide
    = window.onfocus = window.onblur = onchange;

  function onchange (evt) {
    var v = ""visible"", h = ""hidden"",
        evtMap = {
          focus:v, focusin:v, pageshow:v, blur:h, focusout:h, pagehide:h
        };

    evt = evt || window.event;
    if (evt.type in evtMap)
      document.body.className = evtMap[evt.type];
    else
      document.body.className = this[hidden] ? ""hidden"" : ""visible"";
  }

  // set the initial state (but only if browser supports the Page Visibility API)
  if( document[hidden] !== undefined )
    onchange({type: document[hidden] ? ""blur"" : ""focus""});
})();
</code></pre>

<p><code>onfocusin</code> and <code>onfocusout</code> are <a href=""http://www.thefutureoftheweb.com/blog/detect-browser-window-focus"" rel=""noreferrer"">required for IE 9 and lower</a>, while all others make use of <code>onfocus</code> and <code>onblur</code>, except for iOS, which uses <code>onpageshow</code> and <code>onpagehide</code>.</p>
",Andy E,Pawe Szczur,1246303567,1503395101,1503395101
http://stackoverflow.com/a/1060034/407954,Is there a way to detect if a browser window is not currently active?,240331,Luke Francl,Mark Amery,1246303200,1561621198,1425469740,https://stackoverflow.com/questions/1060008/is-there-a-way-to-detect-if-a-browser-window-is-not-currently-active,"<p>Since originally writing this answer, a new specification has reached <em>recommendation</em> status thanks to the W3C.The <a href=""http://www.w3.org/TR/page-visibility/"" rel=""noreferrer"">Page Visibility API</a> (on <a href=""https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API"" rel=""noreferrer"">MDN</a>) now allows us to more accurately detect when a page is hidden to the user.</p>

<p>Current browser support:</p>

<ul>
<li>Chrome 13+</li>
<li>Internet Explorer 10+</li>
<li>Firefox 10+</li>
<li>Opera 12.10+ <sup>[<a href=""https://dev.opera.com/blog/page-visibility-api-support-in-opera-12-10/"" rel=""noreferrer"">read notes</a>]</sup></li>
</ul>

<p>The following code makes use of the API, falling back to the less reliable blur/focus method in incompatible browsers.</p>

<pre><code>(function() {
  var hidden = ""hidden"";

  // Standards:
  if (hidden in document)
    document.addEventListener(""visibilitychange"", onchange);
  else if ((hidden = ""mozHidden"") in document)
    document.addEventListener(""mozvisibilitychange"", onchange);
  else if ((hidden = ""webkitHidden"") in document)
    document.addEventListener(""webkitvisibilitychange"", onchange);
  else if ((hidden = ""msHidden"") in document)
    document.addEventListener(""msvisibilitychange"", onchange);
  // IE 9 and lower:
  else if (""onfocusin"" in document)
    document.onfocusin = document.onfocusout = onchange;
  // All others:
  else
    window.onpageshow = window.onpagehide
    = window.onfocus = window.onblur = onchange;

  function onchange (evt) {
    var v = ""visible"", h = ""hidden"",
        evtMap = {
          focus:v, focusin:v, pageshow:v, blur:h, focusout:h, pagehide:h
        };

    evt = evt || window.event;
    if (evt.type in evtMap)
      document.body.className = evtMap[evt.type];
    else
      document.body.className = this[hidden] ? ""hidden"" : ""visible"";
  }

  // set the initial state (but only if browser supports the Page Visibility API)
  if( document[hidden] !== undefined )
    onchange({type: document[hidden] ? ""blur"" : ""focus""});
})();
</code></pre>

<p><code>onfocusin</code> and <code>onfocusout</code> are <a href=""http://www.thefutureoftheweb.com/blog/detect-browser-window-focus"" rel=""noreferrer"">required for IE 9 and lower</a>, while all others make use of <code>onfocus</code> and <code>onblur</code>, except for iOS, which uses <code>onpageshow</code> and <code>onpagehide</code>.</p>
",Andy E,Pawe Szczur,1246303567,1503395101,1503395101
http://stackoverflow.com/a/1060330/79697,Iterating through a range of dates in Python,226824,ShawnMilo,Peter O.,1246306562,1558885903,1358208619,https://stackoverflow.com/questions/1060279/iterating-through-a-range-of-dates-in-python,"<p>Why are there two nested iterations? For me it produces the same list of data with only one iteration:</p>

<pre><code>for single_date in (start_date + timedelta(n) for n in range(day_count)):
    print ...
</code></pre>

<p>And no list gets stored, only one generator is iterated over. Also the ""if"" in the generator seems to be unnecessary.</p>

<p>After all, a linear sequence should only require one iterator, not two.</p>

<h2>Update after discussion with John Machin:</h2>

<p>Maybe the most elegant solution is using a generator function to completely hide/abstract the iteration over the range of dates:</p>

<pre><code>from datetime import timedelta, date

def daterange(start_date, end_date):
    for n in range(int ((end_date - start_date).days)):
        yield start_date + timedelta(n)

start_date = date(2013, 1, 1)
end_date = date(2015, 6, 2)
for single_date in daterange(start_date, end_date):
    print single_date.strftime(""%Y-%m-%d"")
</code></pre>

<p>NB: For consistency with the built-in <code>range()</code> function this iteration stops <strong>before</strong> reaching the <code>end_date</code>. So for inclusive iteration use the next day, as you would with <code>range()</code>.</p>
",Ber,thibault ketterer,1246307234,1433327718,1433327718
http://stackoverflow.com/a/10608622/4424838,TimePicker in PreferenceScreen,35813,hsz,,1301871214,1493586564,0,https://stackoverflow.com/questions/5533078/timepicker-in-preferencescreen,"<p>I have modified the code from first answer:</p>

<ul>
<li>it stores selected time in long form (milliseconds) which is easier to work with (using Calendar) then string</li>
<li>it automatically shows selected time in summary field in user's format (12 or 24 hour)</li>
</ul>

<p>Updated code:</p>

<pre><code>public class TimePreference extends DialogPreference {
    private Calendar calendar;
    private TimePicker picker = null;

    public TimePreference(Context ctxt) {
        this(ctxt, null);
    }

    public TimePreference(Context ctxt, AttributeSet attrs) {
        this(ctxt, attrs, android.R.attr.dialogPreferenceStyle);
    }

    public TimePreference(Context ctxt, AttributeSet attrs, int defStyle) {
        super(ctxt, attrs, defStyle);

        setPositiveButtonText(R.string.set);
        setNegativeButtonText(R.string.cancel);
        calendar = new GregorianCalendar();
    }

    @Override
    protected View onCreateDialogView() {
        picker = new TimePicker(getContext());
        return (picker);
    }

    @Override
    protected void onBindDialogView(View v) {
        super.onBindDialogView(v);
        picker.setCurrentHour(calendar.get(Calendar.HOUR_OF_DAY));
        picker.setCurrentMinute(calendar.get(Calendar.MINUTE));
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        super.onDialogClosed(positiveResult);

        if (positiveResult) {
            calendar.set(Calendar.HOUR_OF_DAY, picker.getCurrentHour());
            calendar.set(Calendar.MINUTE, picker.getCurrentMinute());

            setSummary(getSummary());
            if (callChangeListener(calendar.getTimeInMillis())) {
                persistLong(calendar.getTimeInMillis());
                notifyChanged();
            }
        }
    }

    @Override
    protected Object onGetDefaultValue(TypedArray a, int index) {
        return (a.getString(index));
    }

    @Override
    protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {

        if (restoreValue) {
            if (defaultValue == null) {
                calendar.setTimeInMillis(getPersistedLong(System.currentTimeMillis()));
            } else {
                calendar.setTimeInMillis(Long.parseLong(getPersistedString((String) defaultValue)));
            }
        } else {
            if (defaultValue == null) {
                calendar.setTimeInMillis(System.currentTimeMillis());
            } else {
                calendar.setTimeInMillis(Long.parseLong((String) defaultValue));
            }
        }
        setSummary(getSummary());
    }

    @Override
    public CharSequence getSummary() {
        if (calendar == null) {
            return null;
        }
        return DateFormat.getTimeFormat(getContext()).format(new Date(calendar.getTimeInMillis()));
    }
} 
</code></pre>
",David Vvra,David Vvra,1337114686,1419604829,1419604829
http://stackoverflow.com/a/10624878/1250278,SimpleDateFormat timezone bug on Android,6608,wrygiel,wrygiel,1337194064,1337246904,1337246904,https://stackoverflow.com/questions/10624752/simpledateformat-timezone-bug-on-android,"<p>This is mentioned in javadoc of <a href=""http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29"" rel=""noreferrer""><code>DateFormat#parse()</code></a>:</p>

<blockquote>
  <p>Parse a date/time string according to the given parse position. For example, a time text <code>""07/10/96 4:5 PM, PDT""</code> will be parsed into a Date that is equivalent to <code>Date(837039900000L)</code>.</p>
  
  <p>By default, parsing is lenient: If the input is not in the form used by this object's format method but can still be parsed as a date, then the parse succeeds. Clients may insist on strict adherence to the format by calling <a href=""http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29"" rel=""noreferrer""><code>setLenient(false)</code></a>.</p>
  
  <p>This parsing operation uses the <a href=""http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#calendar"" rel=""noreferrer""><code>calendar</code></a> to produce a <code>Date</code>. As a result, the <code>calendar's</code> date-time fields and the <code>TimeZone</code> value may have been overwritten, depending on subclass implementations. Any <code>TimeZone</code> value that has previously been set by a call to <a href=""http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setTimeZone%28java.util.TimeZone%29"" rel=""noreferrer""><code>setTimeZone</code></a> may need to be restored for further operations.</p>
</blockquote>

<p>Note the last paragraph. It unfortunately doesn't explain <em>when</em> exactly this will occur. To fix your particular problem you need to explicitly set the desired timezone before the formatting operation.</p>

<p>As to the mutability of <code>SimpleDateFormat</code> itself, this is known for years. You should never create and assign an instance of it as a static or class variable, but always as a method (threadlocal) variable.</p>
",BalusC,BalusC,1337194597,1337195205,1337195205
http://stackoverflow.com/a/10650881/1851450,Calculating the difference between two Java date instances,581495,pr1001,trentcl,1255361749,1550159876,1504191148,https://stackoverflow.com/questions/1555262/calculating-the-difference-between-two-java-date-instances,"<h1>Simple diff (without lib)</h1>

<pre><code>/**
 * Get a diff between two dates
 * @param date1 the oldest date
 * @param date2 the newest date
 * @param timeUnit the unit in which you want the diff
 * @return the diff value, in the provided unit
 */
public static long getDateDiff(Date date1, Date date2, TimeUnit timeUnit) {
    long diffInMillies = date2.getTime() - date1.getTime();
    return timeUnit.convert(diffInMillies,TimeUnit.MILLISECONDS);
}
</code></pre>

<p>And then can you call:</p>

<pre><code>getDateDiff(date1,date2,TimeUnit.MINUTES);
</code></pre>

<p>to get the diff of the 2 dates in minutes unit.</p>

<p><code>TimeUnit</code> is <code>java.util.concurrent.TimeUnit</code>, a standard Java enum going from nanos to days.</p>

<hr>

<h1>Human readable diff (without lib)</h1>

<pre><code>public static Map&lt;TimeUnit,Long&gt; computeDiff(Date date1, Date date2) {

    long diffInMillies = date2.getTime() - date1.getTime();

    //create the list
    List&lt;TimeUnit&gt; units = new ArrayList&lt;TimeUnit&gt;(EnumSet.allOf(TimeUnit.class));
    Collections.reverse(units);

    //create the result map of TimeUnit and difference
    Map&lt;TimeUnit,Long&gt; result = new LinkedHashMap&lt;TimeUnit,Long&gt;();
    long milliesRest = diffInMillies;

    for ( TimeUnit unit : units ) {

        //calculate difference in millisecond 
        long diff = unit.convert(milliesRest,TimeUnit.MILLISECONDS);
        long diffInMilliesForUnit = unit.toMillis(diff);
        milliesRest = milliesRest - diffInMilliesForUnit;

        //put the result in the map
        result.put(unit,diff);
    }

    return result;
}
</code></pre>

<p><a href=""http://ideone.com/5dXeu6"" rel=""noreferrer"">http://ideone.com/5dXeu6</a></p>

<p>The output is something like <code>Map:{DAYS=1, HOURS=3, MINUTES=46, SECONDS=40, MILLISECONDS=0, MICROSECONDS=0, NANOSECONDS=0}</code>, with the units ordered.</p>

<p>You just have to convert that map to an user-friendly string.</p>

<hr>

<h1>Warning</h1>

<p>The above code snippets compute a simple diff between 2 instants. It can cause problems during a daylight saving switch, like explained in <a href=""http://tripoverit.blogspot.fr/2007_07_01_archive.html"" rel=""noreferrer"">this post</a>. This means if you compute the diff between dates with no time you may have a missing day/hour.</p>

<p>In my opinion the date diff is kind of subjective, especially on days. You may:</p>

<ul>
<li><p>count the number of 24h elapsed time: day+1 - day = 1 day = 24h</p></li>
<li><p>count the number of elapsed time, taking care of daylight savings: day+1 - day = 1 = 24h (but using midnight time and daylight savings it could be 0 day and 23h)</p></li>
<li><p>count the number of <code>day switches</code>, which means day+1 1pm - day 11am = 1 day, even if the elapsed time is just 2h (or 1h if there is a daylight saving :p)</p></li>
</ul>

<p>My answer is valid if your definition of date diff on days match the 1st case</p>

<h1>With JodaTime</h1>

<p>If you are using JodaTime you can get the diff for 2 instants (millies backed ReadableInstant) dates with:</p>

<pre><code>Interval interval = new Interval(oldInstant, new Instant());
</code></pre>

<p>But you can also get the diff for Local dates/times:</p>

<pre><code>// returns 4 because of the leap year of 366 days
new Period(LocalDate.now(), LocalDate.now().plusDays(365*5), PeriodType.years()).getYears() 

// this time it returns 5
new Period(LocalDate.now(), LocalDate.now().plusDays(365*5+1), PeriodType.years()).getYears() 

// And you can also use these static methods
Years.yearsBetween(LocalDate.now(), LocalDate.now().plusDays(365*5)).getYears()
</code></pre>
",Sebastien Lorber,amir haghshenas,1337336732,1548068159,1548068159
http://stackoverflow.com/a/10651752/437272,Overloading operator&lt;&lt;: cannot bind lvalue to std::basic_ostream&lt;char&gt;&amp;&amp;,53233,Antoine,chrisaycock,1337337876,1340905696,1340905696,https://stackoverflow.com/questions/10651161/overloading-operator-cannot-bind-lvalue-to-stdbasic-ostreamchar,"<p>You have a problem with a <a href=""https://stackoverflow.com/q/6060824/597607"">""non-deducible context""</a> in this operator</p>

<pre><code>template&lt;typename T&gt;
inline std::ostream&amp; operator&lt;&lt; (std::ostream &amp;out,
                                 const typename classA&lt;T&gt;::classB &amp;b)
{
  return out;
}
</code></pre>

<p>The compiler cannot figure out what values of <code>T</code> will result in a <code>classB</code> that matches the parameter you want to pass. So this template is not considered!</p>

<p>In C++11 mode, the compiler then goes on to find a close match from the standard library</p>

<pre><code>operator&lt;&lt;(std::basic_ostream&lt;_CharT, _Traits&gt;&amp;&amp;, const _Tp&amp;)
</code></pre>

<p>where it <em>can</em> match <code>_Tp</code> to just about any type, including <code>classA&lt;T&gt;::classB</code>, but notes that the first parameter doesn't match.</p>
",Bo Persson,Community,1337340254,1337340254,1495535400
http://stackoverflow.com/a/10673671/402891,Start thread with member function,279960,abergmeier,Barry,1337518519,1510993971,1429552709,https://stackoverflow.com/questions/10673585/start-thread-with-member-function,"<pre><code>#include &lt;thread&gt;
#include &lt;iostream&gt;

class bar {
public:
  void foo() {
    std::cout &lt;&lt; ""hello from member function"" &lt;&lt; std::endl;
  }
};

int main()
{
  std::thread t(&amp;bar::foo, bar());
  t.join();
}
</code></pre>

<p>EDIT:
Accounting your edit, you have to do it like this:</p>

<pre><code>  std::thread spawn() {
    return std::thread(&amp;blub::test, this);
  }
</code></pre>

<hr>

<p><strong>UPDATE:</strong> I want to explain some more points, some of them have also been discussed in the comments.</p>

<p>The syntax described above is defined in terms of the INVOKE definition (20.8.2.1):</p>

<blockquote>
  <p>Define INVOKE (f, t1, t2, ..., tN) as follows: </p>
  
  <ul>
  <li>(t1.*f)(t2, ..., tN) when f is a pointer to a member function of a class T and t1 is an object of type T or a reference to an object of
  type T or a reference to an object of a type derived from T;</li>
  <li>((*t1).*f)(t2, ..., tN) when f is a pointer to a member function of a class T and t1 is not one of the types described in the previous
  item;</li>
  <li>t1.*f when N ==    1 and f is a pointer to member data of a class T and  t  1 is an object of type T or a<br>
  reference to an object of type T or a reference to an object of a<br>
  type derived from T;</li>
  <li>(*t1).*f when N == 1 and f is a pointer to member data of a class T and t 1 is not one of the types described in the previous item;</li>
  <li>f(t1, t2, ..., tN) in all other cases.</li>
  </ul>
</blockquote>

<hr>

<p>Another general fact which I want to point out is that by default the thread constructor will copy all arguments passed to it. The reason for this is that the arguments may need to outlive the calling thread, copying the arguments guarantees that. Instead, if you want to really pass a reference, you can use a <code>std::reference_wrapper</code> created by <code>std::ref</code>.</p>

<pre><code>std::thread (foo, std::ref(arg1));
</code></pre>

<p>By doing this, you are promising that you will take care of guaranteeing that the arguments will still exist when the thread operates on them.</p>

<hr>

<p>Note that all the things mentioned above can also be applied to <code>std::async</code> and <code>std::bind</code>.</p>
",inf,inf,1337519229,1383647214,1383647214
http://stackoverflow.com/a/1068308/13216,Javascript regex multiline flag doesn&#39;t work,85427,wangyh,,1246441954,1542732641,0,https://stackoverflow.com/questions/1068280/javascript-regex-multiline-flag-doesnt-work,"<p>You are looking for the <code>/.../s</code> modifier, also known as the <em>dotall</em> modifier. It forces the dot <code>.</code> to also match newlines, which it <em>does not do</em> by default.</p>

<p>The bad news is that it <s>does not exist in JavaScript</s> <em>(it does as of ES2018, see below)</em>. The good news is that you can work around it by using a character class (e.g. <code>\s</code>) and its negation (<code>\S</code>) together, like this:</p>

<pre><code>[\s\S]
</code></pre>

<p>So in your case the regex would become:</p>

<pre><code>/&lt;div class=""box-content-5""&gt;[\s\S]*&lt;h1&gt;([^&lt;]+?)&lt;\/h1&gt;/i
</code></pre>

<hr>

<p>As of ES2018, JavaScript supports the <code>s</code> (dotAll) flag, so in a modern environment your regular expression could be as you wrote it, but with an <code>s</code> flag at the end (rather than <code>m</code>; <code>m</code> changes how <code>^</code> and <code>$</code> work, not <code>.</code>):</p>

<pre><code>/&lt;div class=""box-content-5""&gt;.*&lt;h1&gt;([^&lt;]+?)&lt;\/h1&gt;/is
</code></pre>
",molf,T.J. Crowder,1246442442,1542732641,1542732641
http://stackoverflow.com/a/10684260/3750035,DBCP - validationQuery for different Databases,54913,bugs_,,1337599253,1453296405,0,https://stackoverflow.com/questions/10684244/dbcp-validationquery-for-different-databases,"<p>There is not only one validationQuery for all databases. On each database you have to use different validationQuery.</p>

<p>After few hours of googling and testing I have collected this table:</p>

<p>Database      validationQuery   notes</p>

<ul>
<li><strong>hsqldb</strong> - <code>select 1 from INFORMATION_SCHEMA.SYSTEM_USERS</code></li>
<li><strong>Oracle</strong> - <code>select 1 from dual</code></li>
<li><strong>DB2</strong> - <code>select 1 from sysibm.sysdummy1</code></li>
<li><strong>mysql</strong> - <code>select 1</code></li>
<li><strong>microsoft SQL Server</strong> - <code>select 1</code> (tested on SQL-Server 9.0, 10.5 [2008])</li>
<li><strong>postgresql</strong> - <code>select 1</code></li>
<li><strong>ingres</strong> - <code>select 1</code></li>
<li><strong>derby</strong> - <code>values 1</code></li>
<li><strong>H2</strong> - <code>select 1</code></li>
<li><strong>Firebird</strong> - <code>select 1 from rdb$database</code></li>
</ul>

<p>I wrote about it on my blog - <a href=""http://vondrnotes.blogspot.com/2012/05/validationquery-for-different-databases.html"">validation query for various databases</a>.</p>

<p>In advance there is an example of class, which return validationQuery according to JDBC driver.</p>

<p>Or does anybody have better solution?</p>
",bugs_,Hannes,1337599300,1392986412,1392986412
http://stackoverflow.com/a/10712960/122441,Google analytics in header or footer?,61640,styler1972,styler1972,1337742324,1549387881,1337752335,https://stackoverflow.com/questions/10712908/google-analytics-in-header-or-footer,"<p>This what google <a href=""http://support.google.com/googleanalytics/bin/answer.py?hl=en&amp;answer=174090"">says</a> about it:</p>

<blockquote>
  <p>Once you find the code snippet, copy and paste it into your web page,
  just before the closing <code>&lt;/head&gt;</code> tag<code>*</code>. If your website uses templates
  to generate pages, enter it just before the closing  tag in the
  file that contains the  section. For the best
  performance across all browsers we suggest you position other scripts
  in your site in one of these ways: </p>
  
  <ol>
  <li>before the tracking code snippet in
  the <code>&lt;head&gt;</code> section of your HTML </li>
  <li>after both the tracking code snippet
  and all page content (e.g. at the bottom of the HTML body)</li>
  </ol>
</blockquote>

<p>and here comes the *:</p>

<blockquote>
  <p>*One of the main advantages of the asynchronous snippet is that you can position it at the top of the HTML document. This increases the
  likelihood that the tracking beacon will be sent before the user
  leaves the page. It is customary to place JavaScript code in the
   section, and we recommend placing the snippet at the bottom of
  the  section for best performance.</p>
</blockquote>
",guido,,1337742845,1337742845,0
http://stackoverflow.com/a/10715242/1325155,Flatten a nested json object,4408,pguardiario,,1337739857,1502921756,0,https://stackoverflow.com/questions/10712679/flatten-a-nested-json-object,"<p>This should solve your problem:</p>

<pre><code>h = {'a' =&gt; 'foo', 'b' =&gt; [{'c' =&gt; 'bar', 'd' =&gt; ['baz']}]}

module Enumerable
  def flatten_with_path(parent_prefix = nil)
    res = {}

    self.each_with_index do |elem, i|
      if elem.is_a?(Array)
        k, v = elem
      else
        k, v = i, elem
      end

      key = parent_prefix ? ""#{parent_prefix}.#{k}"" : k # assign key name for result hash

      if v.is_a? Enumerable
        res.merge!(v.flatten_with_path(key)) # recursive call to flatten child elements
      else
        res[key] = v
      end
    end

    res
  end
end

puts h.flatten_with_path.inspect
</code></pre>
",Hck,,1337757786,1337757786,0
http://stackoverflow.com/a/10727155/1267639,Random alpha-numeric string in JavaScript?,199354,Pavel,,1337802872,1556554995,0,https://stackoverflow.com/questions/10726909/random-alpha-numeric-string-in-javascript,"<p>If you only want to allow specific characters, you could also do it like this:</p>

<pre><code>function randomString(length, chars) {
    var result = '';
    for (var i = length; i &gt; 0; --i) result += chars[Math.floor(Math.random() * chars.length)];
    return result;
}
var rString = randomString(32, '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');
</code></pre>

<p>Here's a jsfiddle to demonstrate: <a href=""http://jsfiddle.net/wSQBx/"">http://jsfiddle.net/wSQBx/</a></p>

<p>Another way to do it could be to use a special string that tells the function what types of characters to use. You could do that like this:</p>

<pre><code>function randomString(length, chars) {
    var mask = '';
    if (chars.indexOf('a') &gt; -1) mask += 'abcdefghijklmnopqrstuvwxyz';
    if (chars.indexOf('A') &gt; -1) mask += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    if (chars.indexOf('#') &gt; -1) mask += '0123456789';
    if (chars.indexOf('!') &gt; -1) mask += '~`!@#$%^&amp;*()_+-={}[]:"";\'&lt;&gt;?,./|\\';
    var result = '';
    for (var i = length; i &gt; 0; --i) result += mask[Math.floor(Math.random() * mask.length)];
    return result;
}

console.log(randomString(16, 'aA'));
console.log(randomString(32, '#aA'));
console.log(randomString(64, '#A!'));
</code></pre>

<p>Fiddle: <a href=""http://jsfiddle.net/wSQBx/2/"">http://jsfiddle.net/wSQBx/2/</a></p>

<p>Alternatively, to use the base36 method as described below you could do something like this:</p>

<pre><code>function randomString(length) {
    return Math.round((Math.pow(36, length + 1) - Math.random() * Math.pow(36, length))).toString(36).slice(1);
}
</code></pre>
",Nimphious,Iftah,1337804038,1448964828,1448964828
http://stackoverflow.com/a/10737524/4072759,Longest path in a DAG,20014,Frank,,1337737851,1434617526,0,https://stackoverflow.com/questions/10712495/longest-path-in-a-dag,"<p>No DFS needed.
Algorithm : takes a DAG G.
Each arc holds one variable E</p>

<pre><code>for each node with no predecessor :
    for each of his leaving arcs, E=1.
for each node whose predecessors have all been visited :
    for each of his leaving arcs, E=max(E(entering arcs))+1.
</code></pre>

<p>max_path is the highest E within edges when all nodes have been processed.</p>
",Pyra,,1337862562,1337862562,0
http://stackoverflow.com/a/10742904/185884,How to print number with commas as thousands separators?,349481,Elias Zamaria,Acumenus,1259622703,1561808055,1561808055,https://stackoverflow.com/questions/1823058/how-to-print-number-with-commas-as-thousands-separators,"<h3>Locale unaware</h3>

<pre><code>'{:,}'.format(value)  # For Python 2.7
f'{value:,}'  # For Python 3.7
</code></pre>

<h3>Locale aware</h3>

<pre><code>import locale
locale.setlocale(locale.LC_ALL, 'en_US.UTF-8')  # Customize

'{:n}'.format(value)  # For Python 2.7
f'{value:n}'  # For Python 3.7
</code></pre>

<h3>Reference</h3>

<p>Per <a href=""https://docs.python.org/library/string.html#format-specification-mini-language"" rel=""noreferrer"">Format Specification Mini-Language</a>,</p>

<blockquote>
  <p>The <code>','</code> option signals the use of a comma for a thousands separator. For a locale aware separator, use the <code>'n'</code> integer presentation type instead.</p>
</blockquote>
",Ian Schneider,Acumenus,1337882537,1561807999,1561807999
http://stackoverflow.com/a/10743550/1170370,Capture stdout from a script in Python,73694,Paolo,D Coetzee,1298846973,1478244338,1331874081,https://stackoverflow.com/questions/5136611/capture-stdout-from-a-script-in-python,"<p>Here is a context manager version of your code.  It yields a list of two values; the first is stdout, the second is stderr.</p>

<pre><code>import contextlib
@contextlib.contextmanager
def capture():
    import sys
    from cStringIO import StringIO
    oldout,olderr = sys.stdout, sys.stderr
    try:
        out=[StringIO(), StringIO()]
        sys.stdout,sys.stderr = out
        yield out
    finally:
        sys.stdout,sys.stderr = oldout, olderr
        out[0] = out[0].getvalue()
        out[1] = out[1].getvalue()

with capture() as out:
    print 'hi'
</code></pre>
",Jason Grout,,1337885371,1337885371,0
http://stackoverflow.com/a/10743550/425050,Capture stdout from a script in Python,73694,Paolo,D Coetzee,1298846973,1478244338,1331874081,https://stackoverflow.com/questions/5136611/capture-stdout-from-a-script-in-python,"<p>Here is a context manager version of your code.  It yields a list of two values; the first is stdout, the second is stderr.</p>

<pre><code>import contextlib
@contextlib.contextmanager
def capture():
    import sys
    from cStringIO import StringIO
    oldout,olderr = sys.stdout, sys.stderr
    try:
        out=[StringIO(), StringIO()]
        sys.stdout,sys.stderr = out
        yield out
    finally:
        sys.stdout,sys.stderr = oldout, olderr
        out[0] = out[0].getvalue()
        out[1] = out[1].getvalue()

with capture() as out:
    print 'hi'
</code></pre>
",Jason Grout,,1337885371,1337885371,0
http://stackoverflow.com/a/10743550/644075,Capture stdout from a script in Python,73694,Paolo,D Coetzee,1298846973,1478244338,1331874081,https://stackoverflow.com/questions/5136611/capture-stdout-from-a-script-in-python,"<p>Here is a context manager version of your code.  It yields a list of two values; the first is stdout, the second is stderr.</p>

<pre><code>import contextlib
@contextlib.contextmanager
def capture():
    import sys
    from cStringIO import StringIO
    oldout,olderr = sys.stdout, sys.stderr
    try:
        out=[StringIO(), StringIO()]
        sys.stdout,sys.stderr = out
        yield out
    finally:
        sys.stdout,sys.stderr = oldout, olderr
        out[0] = out[0].getvalue()
        out[1] = out[1].getvalue()

with capture() as out:
    print 'hi'
</code></pre>
",Jason Grout,,1337885371,1337885371,0
http://stackoverflow.com/a/10761522/1191579,Using MemoryStore in production,46309,Milan Babukov,,1337975731,1556744149,0,https://stackoverflow.com/questions/10760620/using-memorystore-in-production,"<p>Ok, after talking to Connect developers, I got more information. There are two things considered memory leaks here:</p>

<ol>
<li>problem with JSON parsing which is already fixed in recent versions</li>
<li>the fact that there is no cleanup of expired sessions if the users never access them (i.e. the only cleanup is on-access)</li>
</ol>

<p>The solution seems to be rather simple, at least this is what I plan to do: use setInterval to periodically clean up the expired sessions. MemoryStore provides all() to get the list, and we can use get() to force reading and thus expire them. Pseudo-code:</p>

<pre><code>function sessionCleanup() {
    sessionStore.all(function(err, sessions) {
        for (var i = 0; i &lt; sessions.length; i++) {
            sessionStore.get(sessions[i], function() {} );
        }
    });
}
</code></pre>

<p>Now just call sessionCleanup periodically via setInterval() and you have automatic garbage collection for expired sessions. No more memory leaks.</p>
",Milan Babukov,borisdiakur,1337980974,1399975363,1399975363
http://stackoverflow.com/a/10766422/768597,"C++11: I can go from multiple args to tuple, but can I go from tuple to multiple args?",22732,Thomas,Community,1338034373,1442235023,1495540963,https://stackoverflow.com/questions/10766112/c11-i-can-go-from-multiple-args-to-tuple-but-can-i-go-from-tuple-to-multiple,"<p>Try something like this:</p>

<pre><code>// implementation details, users never invoke these directly
namespace detail
{
    template &lt;typename F, typename Tuple, bool Done, int Total, int... N&gt;
    struct call_impl
    {
        static void call(F f, Tuple &amp;&amp; t)
        {
            call_impl&lt;F, Tuple, Total == 1 + sizeof...(N), Total, N..., sizeof...(N)&gt;::call(f, std::forward&lt;Tuple&gt;(t));
        }
    };

    template &lt;typename F, typename Tuple, int Total, int... N&gt;
    struct call_impl&lt;F, Tuple, true, Total, N...&gt;
    {
        static void call(F f, Tuple &amp;&amp; t)
        {
            f(std::get&lt;N&gt;(std::forward&lt;Tuple&gt;(t))...);
        }
    };
}

// user invokes this
template &lt;typename F, typename Tuple&gt;
void call(F f, Tuple &amp;&amp; t)
{
    typedef typename std::decay&lt;Tuple&gt;::type ttype;
    detail::call_impl&lt;F, Tuple, 0 == std::tuple_size&lt;ttype&gt;::value, std::tuple_size&lt;ttype&gt;::value&gt;::call(f, std::forward&lt;Tuple&gt;(t));
}
</code></pre>

<p>Example:</p>

<pre><code>#include &lt;cstdio&gt;
int main()
{
    auto t = std::make_tuple(""%d, %d, %d\n"", 1,2,3);
    call(std::printf, t);
}
</code></pre>

<p>With some extra magic and using <code>std::result_of</code>, you can probably also make the entire thing return the correct return value.</p>
",Kerrek SB,ildjarn,1338037016,1338049774,1338049774
http://stackoverflow.com/a/10810674/116169,Format number string using commas,10738,user850234,user850234,1338355997,1427913692,1338358732,https://stackoverflow.com/questions/10810497/format-number-string-using-commas,"<p>Here's a function to convert a number to a european (1.000,00 - default) or USA (1,000.00) style:</p>

<pre><code>function sep1000(somenum,usa){
  var dec = String(somenum).split(/[.,]/)
     ,sep = usa ? ',' : '.'
     ,decsep = usa ? '.' : ',';
  return dec[0]
         .split('')
         .reverse()
         .reduce(function(prev,now,i){
                   return i%3 === 0 ? prev+sep+now : prev+now;}
                )
         .split('')
         .reverse()
         .join('') +
         (dec[1] ? decsep+dec[1] :'')
  ;
}
</code></pre>

<p>Alternative:</p>

<pre><code>function sep1000(somenum,usa){
  var dec = String(somenum).split(/[.,]/)
     ,sep = usa ? ',' : '.'
     ,decsep = usa ? '.' : ',';

  return xsep(dec[0],sep) + (dec[1] ? decsep+dec[1] :'');

  function xsep(num,sep) {
    var n = String(num).split('')
       ,i = -3;
    while (n.length + i &gt; 0) {
        n.splice(i, 0, sep);
        i -= 4;
    }
    return n.join('');
  }
}
//usage for both functions
alert(sep1000(10002343123.034));      //=&gt; 10.002.343.123,034
alert(sep1000(10002343123.034,true)); //=&gt; 10,002,343,123.034
</code></pre>

<p>[<strong>edit</strong> based on comment] If you want to separate by 100, simply change <code>i -= 4;</code> to <code>i -= 3;</code></p>

<pre><code>function sep100(somenum,usa){
  var dec = String(somenum).split(/[.,]/)
     ,sep = usa ? ',' : '.'
     ,decsep = usa ? '.' : ',';

  return xsep(dec[0],sep) + (dec[1] ? decsep+dec[1] :'');

  function xsep(num,sep) {
    var n = String(num).split('')
       ,i = -3;
    while (n.length + i &gt; 0) {
        n.splice(i, 0, sep);
        i -= 3;  //&lt;== here
    }
    return n.join('');
  }
}
</code></pre>
",KooiInc,KooiInc,1338357358,1338358662,1338358662
http://stackoverflow.com/a/1083316/1485926,C/C++ counting the number of decimals?,42319,Milan,,1246757400,1559938087,0,https://stackoverflow.com/questions/1083304/c-c-counting-the-number-of-decimals,"<p>Off the top of my head:</p>

<p>start with the fractional portion: .2155</p>

<p>repeatedly multiply by 10 and throw away the integer portion of the number until you get zero. The number of steps will be the number of decimals. e.g:</p>

<pre><code>.2155 * 10 = 2.155
.155 * 10 = 1.55
.55 * 10 = 5.5
.5 * 10 = 5.0
</code></pre>

<p>4 steps = 4 decimal digits</p>
",Ferruccio,,1246758010,1246758010,0
http://stackoverflow.com/a/10836076/182183,How to prevent buttons from submitting forms,588692,Khanpo,Nadia Alramli,1243797396,1555330414,1243797591,https://stackoverflow.com/questions/932653/how-to-prevent-buttons-from-submitting-forms,"<p>You're using an HTML5 button element. Remember the reason is this button has a default behavior of submit, as stated in the W3 specification as seen here:
<a href=""https://www.w3.org/TR/2011/WD-html5-20110525/the-button-element.html#the-button-element"">W3C HTML5 Button</a></p>

<p>So you need to specify its type explicitly:</p>

<pre><code>&lt;button type=""button""&gt;Button&lt;/button&gt;
</code></pre>

<p>in order to override the default submit type. I just want to point out the reason why this happens =)</p>

<p>=)</p>
",Metafaniel,Metafaniel,1338476202,1482419852,1482419852
http://stackoverflow.com/a/10838854/869402,Get the IP Address of local computer,175495,djeidot,Community,1222188102,1515461455,1495541402,https://stackoverflow.com/questions/122208/get-the-ip-address-of-local-computer,"<p>The problem with all the approaches based on gethostbyname is that you will not get all IP addresses assigned to a particular machine. Servers usually have more than one adapter.</p>

<p>Here is an example of how you can iterate through all Ipv4 and Ipv6 addresses on the host machine:</p>

<pre><code>void ListIpAddresses(IpAddresses&amp; ipAddrs)
{
  IP_ADAPTER_ADDRESSES* adapter_addresses(NULL);
  IP_ADAPTER_ADDRESSES* adapter(NULL);

  // Start with a 16 KB buffer and resize if needed -
  // multiple attempts in case interfaces change while
  // we are in the middle of querying them.
  DWORD adapter_addresses_buffer_size = 16 * KB;
  for (int attempts = 0; attempts != 3; ++attempts)
  {
    adapter_addresses = (IP_ADAPTER_ADDRESSES*)malloc(adapter_addresses_buffer_size);
    assert(adapter_addresses);

    DWORD error = ::GetAdaptersAddresses(
      AF_UNSPEC, 
      GAA_FLAG_SKIP_ANYCAST | 
        GAA_FLAG_SKIP_MULTICAST | 
        GAA_FLAG_SKIP_DNS_SERVER |
        GAA_FLAG_SKIP_FRIENDLY_NAME, 
      NULL, 
      adapter_addresses,
      &amp;adapter_addresses_buffer_size);

    if (ERROR_SUCCESS == error)
    {
      // We're done here, people!
      break;
    }
    else if (ERROR_BUFFER_OVERFLOW == error)
    {
      // Try again with the new size
      free(adapter_addresses);
      adapter_addresses = NULL;

      continue;
    }
    else
    {
      // Unexpected error code - log and throw
      free(adapter_addresses);
      adapter_addresses = NULL;

      // @todo
      LOG_AND_THROW_HERE();
    }
  }

  // Iterate through all of the adapters
  for (adapter = adapter_addresses; NULL != adapter; adapter = adapter-&gt;Next)
  {
    // Skip loopback adapters
    if (IF_TYPE_SOFTWARE_LOOPBACK == adapter-&gt;IfType)
    {
      continue;
    }

    // Parse all IPv4 and IPv6 addresses
    for (
      IP_ADAPTER_UNICAST_ADDRESS* address = adapter-&gt;FirstUnicastAddress; 
      NULL != address;
      address = address-&gt;Next)
    {
      auto family = address-&gt;Address.lpSockaddr-&gt;sa_family;
      if (AF_INET == family)
      {
        // IPv4
        SOCKADDR_IN* ipv4 = reinterpret_cast&lt;SOCKADDR_IN*&gt;(address-&gt;Address.lpSockaddr);

        char str_buffer[INET_ADDRSTRLEN] = {0};
        inet_ntop(AF_INET, &amp;(ipv4-&gt;sin_addr), str_buffer, INET_ADDRSTRLEN);
        ipAddrs.mIpv4.push_back(str_buffer);
      }
      else if (AF_INET6 == family)
      {
        // IPv6
        SOCKADDR_IN6* ipv6 = reinterpret_cast&lt;SOCKADDR_IN6*&gt;(address-&gt;Address.lpSockaddr);

        char str_buffer[INET6_ADDRSTRLEN] = {0};
        inet_ntop(AF_INET6, &amp;(ipv6-&gt;sin6_addr), str_buffer, INET6_ADDRSTRLEN);

        std::string ipv6_str(str_buffer);

        // Detect and skip non-external addresses
        bool is_link_local(false);
        bool is_special_use(false);

        if (0 == ipv6_str.find(""fe""))
        {
          char c = ipv6_str[2];
          if (c == '8' || c == '9' || c == 'a' || c == 'b')
          {
            is_link_local = true;
          }
        }
        else if (0 == ipv6_str.find(""2001:0:""))
        {
          is_special_use = true;
        }

        if (! (is_link_local || is_special_use))
        {
          ipAddrs.mIpv6.push_back(ipv6_str);
        }
      }
      else
      {
        // Skip all other types of addresses
        continue;
      }
    }
  }

  // Cleanup
  free(adapter_addresses);
  adapter_addresses = NULL;

  // Cheers!
}
</code></pre>
",kgriffs,,1338487465,1338487465,0
http://stackoverflow.com/a/10857806/654755,Not receiving Google OAuth refresh token,97515,Muhammad Usman,m0meni,1338442207,1561020229,1458927313,https://stackoverflow.com/questions/10827920/not-receiving-google-oauth-refresh-token,"<p>The <code>refresh_token</code> is only provided on the first authorization from the user.  Subsequent authorizations, such as the kind you make while testing an OAuth2 integration, will not return the <code>refresh_token</code> again. :)</p>

<ol>
<li>Go to the page showing Apps with access to your account:
<a href=""https://myaccount.google.com/u/0/permissions"" rel=""noreferrer"">https://myaccount.google.com/u/0/permissions</a>.</li>
<li>Under the Third-party apps menu, choose your app.</li>
<li>Click Remove access and then click Ok to confirm</li>
<li>The next OAuth2 request you make will return a <code>refresh_token</code>.</li>
</ol>

<p>Alternatively, you can add the query parameter <code>prompt=consent</code> to the OAuth redirect  (see Google's <a href=""https://developers.google.com/accounts/docs/OAuth2WebServer#formingtheurl"" rel=""noreferrer"">OAuth 2.0 for Web Server Applications</a> page).</p>

<p>This will prompt the user to authorize the application again and will always return a <code>refresh_token</code>.</p>
",Rich Sutton,daloonik,1338587516,1511743971,1511743971
http://stackoverflow.com/a/10865042/209184,Merge/flatten an array of arrays,542503,Andy,Alexander Abakumov,1338663226,1562218829,1555019178,https://stackoverflow.com/questions/10865025/merge-flatten-an-array-of-arrays,"<p>You can use <code>concat</code> to merge arrays:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var arrays = [
  [""$6""],
  [""$12""],
  [""$25""],
  [""$25""],
  [""$18""],
  [""$22""],
  [""$10""]
];
var merged = [].concat.apply([], arrays);

console.log(merged);</code></pre>
</div>
</div>
</p>

<p>Using the <code>apply</code> method of <code>concat</code> will just take the second parameter as an array, so the last line is identical to this:</p>

<pre><code>var merged2 = [].concat([""$6""], [""$12""], [""$25""], [""$25""], [""$18""], [""$22""], [""$10""]);
</code></pre>

<hr>

<p>There is also an experimental <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat"" rel=""noreferrer""><code>Array.prototype.flat()</code></a> method (not yet part of the ECMAScript standard) which you could use to flatten the arrays, although <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat#Browser_compatibility"" rel=""noreferrer"">it is only available in Node.js starting with version 11, and not at all in Edge</a>.</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const arrays = [
      [""$6""],
      [""$12""],
      [""$25""],
      [""$25""],
      [""$18""],
      [""$22""],
      [""$10""]
    ];
const merge3 = arrays.flat(1); //The depth level specifying how deep a nested array structure should be flattened. Defaults to 1.
console.log(merge3);
    </code></pre>
</div>
</div>
</p>
",Gumbo,Stephen Horvath,1338663393,1560274337,1560274337
http://stackoverflow.com/a/10866495/166700,wxPython WebView example,17661,Homunculus Reticulli,Homunculus Reticulli,1335567899,1440437848,1335600355,https://stackoverflow.com/questions/10358998/wxpython-webview-example,"<p>This is a simple example that works for me.</p>

<p>Make sure you are running the <strong>latest</strong> version of wxpython. (wxpython 2.9)</p>

<pre><code>import wx 
import wx.html2 

class MyBrowser(wx.Dialog): 
  def __init__(self, *args, **kwds): 
    wx.Dialog.__init__(self, *args, **kwds) 
    sizer = wx.BoxSizer(wx.VERTICAL) 
    self.browser = wx.html2.WebView.New(self) 
    sizer.Add(self.browser, 1, wx.EXPAND, 10) 
    self.SetSizer(sizer) 
    self.SetSize((700, 700)) 

if __name__ == '__main__': 
  app = wx.App() 
  dialog = MyBrowser(None, -1) 
  dialog.browser.LoadURL(""http://www.google.com"") 
  dialog.Show() 
  app.MainLoop() 
</code></pre>
",patchie,patchie,1338677045,1338844646,1338844646
http://stackoverflow.com/a/10899795/604296,How to print a number with commas as thousands separators in JavaScript,962207,Elias Zamaria,whackamadoodle3000,1274744551,1562587186,1513138319,https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript,"<p>This is a variation of @mikez302's answer, but modified to support numbers with decimals (per @neu-rah's feedback that numberWithCommas(12345.6789) -> ""12,345.6,789"" instead of ""12,345.6789""</p>

<pre><code>function numberWithCommas(n) {
    var parts=n.toString().split(""."");
    return parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, "","") + (parts[1] ? ""."" + parts[1] : """");
}
</code></pre>
",user1437663,,1338908590,1338908590,0
http://stackoverflow.com/a/10900911/1082542,Do I need to sanitize the callback parameter from a JSONP call?,27999,Christian Studer,Christian Studer,1273095968,1547432442,1295946067,https://stackoverflow.com/questions/2777021/do-i-need-to-sanitize-the-callback-parameter-from-a-jsonp-call,"<p>You want to ensure the callback is a valid identifier, which can be alphanumeric, underscore, or $.  It also cannot be a reserved word (and just to be thorough I would make sure it is not <code>undefined</code>, <code>NaN</code>, or <code>Infinity</code>).  This is the test I use: </p>

<pre><code>function valid_js_identifier( $callback ){
    return !preg_match( '/[^0-9a-zA-Z\$_]|^(abstract|boolean|break|byte|case|catch|char|class|const|continue|debugger|default|delete|do|double|else|enum|export|extends|false|final|finally|float|for|function|goto|if|implements|import|in|instanceof|int|interface|long|native|new|null|package|private|protected|public|return|short|static|super|switch|synchronized|this|throw|throws|transient|true|try|typeof|var|volatile|void|while|with|NaN|Infinity|undefined)$/', $callback);
}
</code></pre>

<p>Many of the reserved words are pointless, but some of them could cause errors or infinite loops.</p>

<p><strong>Important:</strong> do not just sanitize the input by replacing characters; the modified callback could run without error and the data returned will not be handled properly (or could even be handled by the wrong function).  You want to test if the input is valid, and throw an error if it's not.  This will avoid unexpected behavior and notify the developer that a different callback is needed.</p>

<p><em>note: This is a safer, but limited, version of JSONP that does not allow expressions or refinement. I've found it works great for most applications, especially if you are using jQuery and <code>$.getJSON</code></em></p>
",Brett Wejrowski,Brett Wejrowski,1338912837,1338913429,1338913429
http://stackoverflow.com/a/10913296/403310,R object identity,2393,Sven Hager,symbolrush,1338979842,1504279262,1467107540,https://stackoverflow.com/questions/10912729/r-object-identity,"<p><strong>UPDATE</strong>: A more robust and faster implementation of <code>address(x)</code> (not using <code>.Internal(inspect(x))</code>) was added to <a href=""http://datatable.r-forge.r-project.org/"" rel=""noreferrer"">data.table v1.8.9</a>. From <a href=""https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&amp;root=datatable"" rel=""noreferrer"">NEWS</a> :</p>

<blockquote>
  <p>New function <code>address()</code> returns the address in RAM of its argument. Sometimes useful in determining whether a value has been copied or not by R, programatically.</p>
</blockquote>

<hr>

<p>There's probably a neater way but this seems to work.</p>

<pre><code>address = function(x) substring(capture.output(.Internal(inspect(x)))[1],2,17)
x = 1
y = 1
z = x
identical(x,y)
# [1] TRUE
identical(x,z)
# [1] TRUE
address(x)==address(y)
# [1] FALSE
address(x)==address(z)
# [1] TRUE
</code></pre>

<p>You could modify it to work on 32bit by changing <code>17</code> to <code>9</code>.</p>
",Matt Dowle,Matt Dowle,1338982063,1393852091,1393852091
http://stackoverflow.com/a/1092241/53897,AssertContains on strings in jUnit,136001,ripper234,ripper234,1246971734,1554399488,1246972099,https://stackoverflow.com/questions/1092219/assertcontains-on-strings-in-junit,"<p>If you add in Hamcrest and JUnit4, you could do:</p>

<pre><code>String x = ""foo bar"";
Assert.assertThat(x, CoreMatchers.containsString(""foo""));
</code></pre>

<p>With some static imports, it looks a lot better:</p>

<pre><code>assertThat(x, containsString(""foo""));
</code></pre>

<p>The static imports needed would be:</p>

<pre><code>import static org.junit.Assert.assertThat;
import static org.hamcrest.CoreMatchers.containsString;
</code></pre>
",Yishai,Thorbjrn Ravn Andersen,1246971952,1405946230,1405946230
http://stackoverflow.com/a/1094933/1538221,Reusable library to get human readable version of file size?,81689,Sridhar Ratnakumar,Sridhar Ratnakumar,1247000372,1558464716,1415739407,https://stackoverflow.com/questions/1094841/reusable-library-to-get-human-readable-version-of-file-size,"<p>Addressing the above ""too small a task to require a library"" issue by a straightforward implementation:</p>

<pre><code>def sizeof_fmt(num, suffix='B'):
    for unit in ['','Ki','Mi','Gi','Ti','Pi','Ei','Zi']:
        if abs(num) &lt; 1024.0:
            return ""%3.1f%s%s"" % (num, unit, suffix)
        num /= 1024.0
    return ""%.1f%s%s"" % (num, 'Yi', suffix)
</code></pre>

<p>Supports:</p>

<ul>
<li>all currently known <a href=""https://en.wikipedia.org/wiki/Binary_prefix#Specific_units_of_IEC_60027-2_A.2_and_ISO.2FIEC_80000"" rel=""noreferrer"">binary prefixes</a></li>
<li>negative and positive numbers</li>
<li>numbers larger than 1000 Yobibytes</li>
<li>arbitrary units (maybe you like to count in Gibibits!)</li>
</ul>

<p>Example:</p>

<pre><code>&gt;&gt;&gt; sizeof_fmt(168963795964)
'157.4GiB'
</code></pre>

<p>by <a href=""https://web.archive.org/web/20111010015624/http://blogmag.net/blog/read/38/Print_human_readable_file_size"" rel=""noreferrer"">Fred Cirera</a></p>
",Sridhar Ratnakumar,Wai Ha Lee,1247001341,1442924957,1442924957
http://stackoverflow.com/a/1094933/1657047,Reusable library to get human readable version of file size?,81689,Sridhar Ratnakumar,Sridhar Ratnakumar,1247000372,1558464716,1415739407,https://stackoverflow.com/questions/1094841/reusable-library-to-get-human-readable-version-of-file-size,"<p>Addressing the above ""too small a task to require a library"" issue by a straightforward implementation:</p>

<pre><code>def sizeof_fmt(num, suffix='B'):
    for unit in ['','Ki','Mi','Gi','Ti','Pi','Ei','Zi']:
        if abs(num) &lt; 1024.0:
            return ""%3.1f%s%s"" % (num, unit, suffix)
        num /= 1024.0
    return ""%.1f%s%s"" % (num, 'Yi', suffix)
</code></pre>

<p>Supports:</p>

<ul>
<li>all currently known <a href=""https://en.wikipedia.org/wiki/Binary_prefix#Specific_units_of_IEC_60027-2_A.2_and_ISO.2FIEC_80000"" rel=""noreferrer"">binary prefixes</a></li>
<li>negative and positive numbers</li>
<li>numbers larger than 1000 Yobibytes</li>
<li>arbitrary units (maybe you like to count in Gibibits!)</li>
</ul>

<p>Example:</p>

<pre><code>&gt;&gt;&gt; sizeof_fmt(168963795964)
'157.4GiB'
</code></pre>

<p>by <a href=""https://web.archive.org/web/20111010015624/http://blogmag.net/blog/read/38/Print_human_readable_file_size"" rel=""noreferrer"">Fred Cirera</a></p>
",Sridhar Ratnakumar,Wai Ha Lee,1247001341,1442924957,1442924957
http://stackoverflow.com/a/1094933/1979001,Reusable library to get human readable version of file size?,81689,Sridhar Ratnakumar,Sridhar Ratnakumar,1247000372,1558464716,1415739407,https://stackoverflow.com/questions/1094841/reusable-library-to-get-human-readable-version-of-file-size,"<p>Addressing the above ""too small a task to require a library"" issue by a straightforward implementation:</p>

<pre><code>def sizeof_fmt(num, suffix='B'):
    for unit in ['','Ki','Mi','Gi','Ti','Pi','Ei','Zi']:
        if abs(num) &lt; 1024.0:
            return ""%3.1f%s%s"" % (num, unit, suffix)
        num /= 1024.0
    return ""%.1f%s%s"" % (num, 'Yi', suffix)
</code></pre>

<p>Supports:</p>

<ul>
<li>all currently known <a href=""https://en.wikipedia.org/wiki/Binary_prefix#Specific_units_of_IEC_60027-2_A.2_and_ISO.2FIEC_80000"" rel=""noreferrer"">binary prefixes</a></li>
<li>negative and positive numbers</li>
<li>numbers larger than 1000 Yobibytes</li>
<li>arbitrary units (maybe you like to count in Gibibits!)</li>
</ul>

<p>Example:</p>

<pre><code>&gt;&gt;&gt; sizeof_fmt(168963795964)
'157.4GiB'
</code></pre>

<p>by <a href=""https://web.archive.org/web/20111010015624/http://blogmag.net/blog/read/38/Print_human_readable_file_size"" rel=""noreferrer"">Fred Cirera</a></p>
",Sridhar Ratnakumar,Wai Ha Lee,1247001341,1442924957,1442924957
http://stackoverflow.com/a/1094933/550618,Reusable library to get human readable version of file size?,81689,Sridhar Ratnakumar,Sridhar Ratnakumar,1247000372,1558464716,1415739407,https://stackoverflow.com/questions/1094841/reusable-library-to-get-human-readable-version-of-file-size,"<p>Addressing the above ""too small a task to require a library"" issue by a straightforward implementation:</p>

<pre><code>def sizeof_fmt(num, suffix='B'):
    for unit in ['','Ki','Mi','Gi','Ti','Pi','Ei','Zi']:
        if abs(num) &lt; 1024.0:
            return ""%3.1f%s%s"" % (num, unit, suffix)
        num /= 1024.0
    return ""%.1f%s%s"" % (num, 'Yi', suffix)
</code></pre>

<p>Supports:</p>

<ul>
<li>all currently known <a href=""https://en.wikipedia.org/wiki/Binary_prefix#Specific_units_of_IEC_60027-2_A.2_and_ISO.2FIEC_80000"" rel=""noreferrer"">binary prefixes</a></li>
<li>negative and positive numbers</li>
<li>numbers larger than 1000 Yobibytes</li>
<li>arbitrary units (maybe you like to count in Gibibits!)</li>
</ul>

<p>Example:</p>

<pre><code>&gt;&gt;&gt; sizeof_fmt(168963795964)
'157.4GiB'
</code></pre>

<p>by <a href=""https://web.archive.org/web/20111010015624/http://blogmag.net/blog/read/38/Print_human_readable_file_size"" rel=""noreferrer"">Fred Cirera</a></p>
",Sridhar Ratnakumar,Wai Ha Lee,1247001341,1442924957,1442924957
http://stackoverflow.com/a/1096159/6802186,how to check the jdk version used to compile a .class file,275745,Charles Ma,Community,1247028390,1539874586,1495540487,https://stackoverflow.com/questions/1096148/how-to-check-the-jdk-version-used-to-compile-a-class-file,"<p>You're looking for this on the command line (for a class called MyClass):</p>

<p>On Unix/Linux:</p>

<pre><code>javap -verbose MyClass | grep ""major""
</code></pre>

<p>On Windows:</p>

<pre><code>javap -verbose MyClass | findstr ""major""
</code></pre>

<p>You want the <strong>major</strong> version from the results. Here are some example values:</p>

<ul>
<li>Java 1.2 uses major version 46</li>
<li>Java 1.3 uses major version 47</li>
<li>Java 1.4 uses major version 48</li>
<li>Java 5 uses major version 49</li>
<li>Java 6 uses major version 50</li>
<li>Java 7 uses major version 51</li>
<li>Java 8 uses major version 52</li>
<li>Java 9 uses major version 53</li>
<li>Java 10 uses major version 54</li>
<li>Java 11 uses major version 55</li>
</ul>
",John Calsbeek,phlogratos,1247028838,1539874586,1539874586
http://stackoverflow.com/a/10965572/459543,How do you manage a temporary directory such that it is guaranteed to be deleted on program close?,3436,Jeff Tratner,Jeff Tratner,1339286632,1355701369,1339289515,https://stackoverflow.com/questions/10965479/how-do-you-manage-a-temporary-directory-such-that-it-is-guaranteed-to-be-deleted,"<p>I wouldn't use a <code>__del__</code> method, the semantics are unreliable, and could interfere with garbage collection.  Use a context manager: define a <code>__enter__</code> and <code>__exit__</code> method, and put your use of the object in a <code>with</code> statement.  It's clear, it's explicit, and it will work without worry.</p>

<p>Or, another way to make a context manager:</p>

<pre><code>@contextlib.contextmanager
def tempdir(prefix='tmp'):
    """"""A context manager for creating and then deleting a temporary directory.""""""
    tmpdir = tempfile.mkdtemp(prefix=prefix)
    try:
        yield tmpdir
    finally:
        shutil.rmtree(tmpdir)
</code></pre>
",Ned Batchelder,,1339288127,1339288127,0
http://stackoverflow.com/a/10984878/809705,numpy array of chars to string,6223,AdrianR,,1339434120,1339441209,0,https://stackoverflow.com/questions/10984471/numpy-array-of-chars-to-string,"<p>The list comprehension is the most ""pythonic"" way.</p>

<p>The most ""numpythonic"" way would be:</p>

<pre><code>&gt;&gt;&gt; data = np.array([['a','b'],['c','d']])
# a 2D view
&gt;&gt;&gt; data.view('S2')
array([['ab'],
       ['cd']], 
      dtype='|S2')
# or maybe a 1D view ...fastest solution:
&gt;&gt;&gt; data.view('S2').ravel()
array(['ab', 'cd'], 
      dtype='|S2')
</code></pre>

<p>No looping, no list comprehension, not even a copy.  The buffer just sits there unchanged with a different ""view"" so this is the fastest solution available.</p>
",Phil Cooper,Phil Cooper,1339436244,1339439253,1339439253
http://stackoverflow.com/a/10984951/525714,Postgres ENUM data type or CHECK CONSTRAINT?,25814,punkish,Paulo Freitas,1339021612,1510892109,1510892109,https://stackoverflow.com/questions/10923213/postgres-enum-data-type-or-check-constraint,"<p>Based on the comments and answers here, and some rudimentary research, I have the following summary to offer for comments from the Postgres-erati. Will really appreciate your input.</p>

<p>There are three ways to restrict entries in a Postgres database table column. Consider a table to store ""colors"" where you want only 'red', 'green', or 'blue' to be valid entries.</p>

<ol>
<li><p>Enumerated data type</p>

<pre><code>CREATE TYPE valid_colors AS ENUM ('red', 'green', 'blue');

CREATE TABLE t (
    color VALID_COLORS
);
</code></pre>

<p>Advantages are that the type can be defined once and then reused in as many tables as needed. A standard query can list all the values for an ENUM type, and can be used to make application form widgets.</p>

<pre><code>SELECT  n.nspname AS enum_schema,  
        t.typname AS enum_name,  
        e.enumlabel AS enum_value
FROM    pg_type t JOIN 
        pg_enum e ON t.oid = e.enumtypid JOIN 
        pg_catalog.pg_namespace n ON n.oid = t.typnamespace
WHERE   t.typname = 'valid_colors'

 enum_schema | enum_name     | enum_value 
-------------+---------------+------------
 public      | valid_colors  | red
 public      | valid_colors  | green
 public      | valid_colors  | blue
</code></pre>

<p>Disadvantages are, the ENUM type is stored in system catalogs, so a query as above is required to view its definition. These values are not apparent when viewing the table definition. And, since an ENUM type is actually a data type separate from the built in NUMERIC and TEXT data types, the regular numeric and string operators and functions don't work on it. So, one can't do a query like</p>

<pre><code>SELECT FROM t WHERE color LIKE 'bl%'; 
</code></pre></li>
<li><p>Check constraints</p>

<pre><code>CREATE TABLE t (
    colors TEXT CHECK (colors IN ('red', 'green', 'blue'))
);
</code></pre>

<p>Two advantage are that, one, ""what you see is what you get,"" that is, the valid values for the column are recorded right in the table definition, and two, all native string or numeric operators work.</p></li>
<li><p>Foreign keys</p>

<pre><code>CREATE TABLE valid_colors (
    id SERIAL PRIMARY KEY NOT NULL,
    color TEXT
);

INSERT INTO valid_colors (color) VALUES 
    ('red'),
    ('green'),
    ('blue');

CREATE TABLE t (
    color_id INTEGER REFERENCES valid_colors (id)
);
</code></pre>

<p>Essentially the same as creating an ENUM type, except, the native numeric or string operators work, and one doesn't have to query system catalogs to discover the valid values. A join is required to link the <code>color_id</code> to the desired text value.</p></li>
</ol>
",punkish,Gord Stephen,1339436536,1484438421,1484438421
http://stackoverflow.com/a/10999987/180733,Apache mod_rewrite %2B and plus (+) signs,5296,user293479,,1269609823,1339515423,0,https://stackoverflow.com/questions/2523506/apache-mod-rewrite-2b-and-plus-signs,"<p>No, this isn't quite the same as the referenced question. The problem here is specifically plus signs and the answer to <a href=""https://stackoverflow.com/questions/4215673/apache-mod-rewrite-spcaes-special-characters-in-url-not-working"">Apache: mod_rewrite: Spcaes &amp; Special Characters in URL not working</a> doesn't address that.</p>

<p>There's also an issue with slashes, for which see <a href=""http://httpd.apache.org/docs/current/mod/core.html#allowencodedslashes"" rel=""nofollow noreferrer"">http://httpd.apache.org/docs/current/mod/core.html#allowencodedslashes</a>
(but you do need access to the Apache config to do this - .htaccess won't do).</p>

<p>In fact it is <em>impossible</em> to do using a rewrite rule alone. Apache decodes the URL before putting it through rewrite, <strong>but</strong> it doesn't understand plus signs: <a href=""http://example.com/a+b.html"" rel=""nofollow noreferrer"">http://example.com/a+b.html</a> wouldn't deliver a file called</p>

<blockquote>
  <p>""a b.html"". </p>
</blockquote>

<p>The plus signs are decoded by PHP into the $_GET array (or whatever the relevant language mechanism is) for query strings, because form handlers in browsers put them in. So Apache will translate %2B to + before applying the rewrite, and leave + itself alone, meaning you can't tell the difference.</p>

<p>Of course, one could argue that + used as space is simply invalid in such URLs and one should use only %20. However, if you don't have control over generating them, you're bound to see them. Browsers won't generate them automatically though.</p>

<p>The answer is DIY, and in many ways it is more predictable and simpler:</p>

<blockquote>
  <p>RewriteRule .* index.php [L]</p>
</blockquote>

<p>Hence everything turns into index.php and there's no attempt to construct a query string. If you want to exclude certain patterns, e.g. those with slashes in, or where an explicit file does exist, the obvious amendments apply. e.g. 
  RewriteCond %{REQUEST_FILENAME} !-f</p>

<p>Then in index.php </p>

<blockquote>
  <p>$uri = substr($_SERVER['REQUEST_URI'], 1); // remove leading slash</p>
  
  <p>$qmpos = strpos($uri, '?'); // is there a question mark, if so where</p>
  
  <p>if ($qmpos !== FALSE) { $uri = substr($uri, 0, $qmpos); } // only the bit before q.m.</p>
  
  <p>$decoded = urldecode($uri); // decode the part before the URL</p>
  
  <p>if (! empty($decoded)) { $_GET['args'] = $decoded; } // add result to $_GET</p>
</blockquote>

<p>That decodes the <em>original</em> request (excluding the leading slash - would be slightly different if you're deeper down a hierarchy, but the principle is the same - and excluding any additional query string), and decodes the args parameter according to PHP's normal rules and puts it into $_GET so you can process it along with the rest of the $_GET query string parameters in the usual way.</p>

<p>I believe this should work for empty URLs (<a href=""http://example.com/"" rel=""nofollow noreferrer"">http://example.com/</a>) or those which only have a query string (<a href=""http://example.com/?foo=1"" rel=""nofollow noreferrer"">http://example.com/?foo=1</a>), as well as the simple case (<a href=""http://example.com/bar"" rel=""nofollow noreferrer"">http://example.com/bar</a>) and the case with a query string as well (<a href=""http://example.com/bar?foo=1"" rel=""nofollow noreferrer"">http://example.com/bar?foo=1</a>). No doubt similar approaches will work for other languages.</p>

<p>In your particular case, you actually don't want the pluses decoded in the PHP at all. That's fine, use rawurldecode instead, which doesn't do pluses.</p>
",frankieandshadow,Community,1339515423,1339515423,1495542550
http://stackoverflow.com/a/11007216/298479,Does PostgreSQL support &quot;accent insensitive&quot; collations?,29912,Daniel Serodio,Erwin Brandstetter,1339535954,1534149386,1381765910,https://stackoverflow.com/questions/11005036/does-postgresql-support-accent-insensitive-collations,"<p>Use the <a href=""https://www.postgresql.org/docs/current/static/unaccent.html"" rel=""noreferrer""><strong>unaccent module</strong></a> for that - which is completely different from what you are linking to.</p>

<blockquote>
  <p>unaccent is a text search dictionary that removes accents (diacritic
  signs) from lexemes.</p>
</blockquote>

<p>Install once per database with:</p>

<pre><code>CREATE EXTENSION unaccent;
</code></pre>

<p>If you get an error like:</p>

<blockquote>
  <p>ERROR: could not open extension control file
  ""/usr/share/postgresql/9.x/extension/unaccent.control"": No such file
  or directory</p>
</blockquote>

<p>Install the contrib package on your database server like instructed in this related answer:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/12100638/error-when-creating-unaccent-extension-on-postgresql"">Error when creating unaccent extension on PostgreSQL</a></li>
</ul>

<p>Among other things, it provides the function <code>unaccent()</code> you can use with your example (where <code>LIKE</code> seems not needed).</p>

<pre><code>SELECT *
FROM   users
WHERE  unaccent(name) = unaccent('Joo');
</code></pre>

<h2>Index</h2>

<p>To use an index for that kind of query, create an <a href=""https://www.postgresql.org/docs/current/static/indexes-expressional.html"" rel=""noreferrer"">index on the expression</a>. <strong>However</strong>, Postgres only accepts <code>IMMUTABLE</code> functions for indexes. If a function can return a different result for the same input, the index could silently break.</p>

<h3><code>unaccent()</code> only <code>STABLE</code> not <code>IMMUTABLE</code></h3>

<p>Unfortunately, <code>unaccent()</code> is only <code>STABLE</code>, not <code>IMMUTABLE</code>. According to <a href=""https://www.postgresql.org/message-id/flat/201012021544.oB2FiTn1041521@wwwmaster.postgresql.org#201012021544.oB2FiTn1041521@wwwmaster.postgresql.org"" rel=""noreferrer"">this thread on pgsql-bugs</a>, this is due to <em>three</em> reasons:</p>

<ol>
<li>It depends on the behavior of a dictionary.</li>
<li>There is no hard-wired connection to this dictionary.</li>
<li>It therefore also depends on the current <code>search_path</code>, which can change easily.</li>
</ol>

<p><a href=""https://django-orm.readthedocs.org/en/latest/orm-pg-fulltext.html"" rel=""noreferrer"">Some tutorials</a> on the web instruct to just alter the function volatility to <code>IMMUTABLE</code>. This brute-force method can break under certain conditions.</p>

<p>Others suggest a <a href=""https://www.postgresql.org/message-id/flat/CAANrE7rpWjvZgdKX_hArNp8ynUezZ-Ehp8QEqC7hwfXuNqa91g@mail.gmail.com#CAANrE7rpWjvZgdKX_hArNp8ynUezZ-Ehp8QEqC7hwfXuNqa91g@mail.gmail.com"" rel=""noreferrer"">simple <code>IMMUTABLE</code> wrapper function</a> (like I did myself in the past).</p>

<p>There is an ongoing debate whether to make the <a href=""https://www.postgresql.org/docs/current/static/unaccent.html#id-1.11.7.53.7"" rel=""noreferrer"">variant with two parameters</a> <code>IMMUTABLE</code> which declares the used dictionary explicitly. Read <a href=""https://www.postgresql.org/message-id/flat/20120826134701.GM10814@momjian.us#20120826134701.GM10814@momjian.us"" rel=""noreferrer"">here</a> or <a href=""https://www.postgresql.org/message-id/flat/CAFj8pRDi0LRcmgyvd0ttC9J=VwOxe094fVRG2KTR_AQC86y-wg@mail.gmail.com#CAFj8pRDi0LRcmgyvd0ttC9J=VwOxe094fVRG2KTR_AQC86y-wg@mail.gmail.com"" rel=""noreferrer"">here</a>.</p>

<p>Another alternative would be this module with an <a href=""https://github.com/metabrainz/postgresql-musicbrainz-unaccent"" rel=""noreferrer"">IMMUTABLE <code>unaccent()</code> function by Musicbrainz</a>, provided on Github. Haven't tested it myself. I think I have come up with a <strong><em>better idea</em></strong>:</p>

<h3>Best for now</h3>

<p>I propose an approach that is at least <strong>as efficient as other solutions floating around, but safer</strong>:
Create a wrapper function with the two-parameter form and ""hard-wire"" the schema for function and dictionary:</p>

<pre><code>CREATE OR REPLACE FUNCTION public.f_unaccent(text)
  RETURNS text AS
$func$
SELECT <b>public.</b>unaccent(<b>'public.unaccent'</b>, $1)  -- schema-qualify function and dictionary
$func$  LANGUAGE sql IMMUTABLE;</code></pre>

<p><code>public</code> being the schema where you installed the extension (<code>public</code> is the default).</p>

<p><em>Previously, I had added <code>SET search_path = public, pg_temp</code> to the function - until I discovered that the dictionary can be schema-qualified, too, <a href=""https://www.postgresql.org/docs/current/static/unaccent.html#id-1.11.7.53.7"" rel=""noreferrer"">which is currently (pg 10) not documented</a>. This version is a bit shorter and around twice as fast in my tests on pg 9.5 and pg 10.</em></p>

<p>The updated version still doesn't allow <a href=""https://wiki.postgresql.org/wiki/Inlining_of_SQL_functions"" rel=""noreferrer"">function inlining</a> because functions declared <code>IMMUTABLE</code> may not call non-immutable functions in the body to allow that. Hardly matters for performance while we make use of an <strong><a href=""https://www.postgresql.org/docs/current/static/indexes-expressional.html"" rel=""noreferrer"">expression index</a></strong> on this <code>IMMUTABLE</code> function:</p>

<pre><code>CREATE INDEX users_unaccent_name_idx ON users(public.f_unaccent(name));
</code></pre>

<p>Security for client programs has been tightened with Postgres 10.3 / 9.6.8 etc. You <em>need</em> to schema-qualify function and dictionary as demonstrated when used in any indexes. See:</p>

<ul>
<li><a href=""https://dba.stackexchange.com/questions/202490/text-search-dictionary-unaccent-does-not-exist-entries-in-postgres-log-supp?noredirect=1#comment421020_202490"">'text search dictionary unaccent does not exist' entries in postgres log, supposedly during automatic analyze</a></li>
</ul>

<p>Adapt your queries to match the index (so the query planner can use it):</p>

<pre><code>SELECT * FROM users
WHERE  f_unaccent(name) = f_unaccent('Joo');
</code></pre>

<p>You don't need the function in the right expression. You can supply unaccented strings like <code>'Joao'</code> directly.</p>

<h3>Ligatures</h3>

<p>In Postgres <strong>9.5 or older</strong> ligatures like '' or '' have to be expanded manually (if you need that), since <code>unaccent()</code> always substitutes a <em>single</em> letter:</p>

<pre><code>SELECT unaccent('    ');

unaccent
----------
E A e a S
</code></pre>

<p>You will love <a href=""https://www.postgresql.org/message-id/flat/201012021544.oB2FiTn1041521@wwwmaster.postgresql.org#201012021544.oB2FiTn1041521@wwwmaster.postgresql.org"" rel=""noreferrer"">this update to unaccent</a> in Postgres <strong>9.6</strong>:</p>

<blockquote>
  <p>Extend <code>contrib/unaccent</code>'s standard <code>unaccent.rules</code> file to handle all
  diacritics known to Unicode, and <strong>expand ligatures correctly</strong> (Thomas
  Munro, Lonard Benedetti)</p>
</blockquote>

<p>Bold emphasis mine. Now we get:</p>

<pre><code>SELECT unaccent('    ');

unaccent
----------
OE AE oe ae ss
</code></pre>

<h3>Pattern matching</h3>

<p>For <strong><code>LIKE</code></strong> or <strong><code>ILIKE</code></strong> with arbitrary patterns, combine this with the module <a href=""https://www.postgresql.org/docs/current/static/pgtrgm.html"" rel=""noreferrer""><strong><code>pg_trgm</code></strong></a> in PostgreSQL 9.1 or later. Create a trigram GIN (typically preferable) or GIST expression index. Example for GIN:</p>

<pre><code>CREATE INDEX users_unaccent_name_trgm_idx ON users
USING gin (f_unaccent(name) gin_trgm_ops);
</code></pre>

<p>Can be used for queries like:</p>

<pre><code>SELECT * FROM users
WHERE  f_unaccent(name) LIKE ('%' || f_unaccent('Joo') || '%');
</code></pre>

<p>GIN and GIST indexes are more expensive to maintain than plain btree:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/28975517/difference-between-gist-and-gin-index/28976555#28976555"">Difference between GiST and GIN index</a></li>
</ul>

<p>There are simpler solutions for just left-anchored patterns. More about pattern matching and performance:</p>

<ul>
<li><a href=""https://dba.stackexchange.com/a/10696/3684"">Pattern matching with LIKE, SIMILAR TO or regular expressions in PostgreSQL</a></li>
</ul>

<p><code>pg_trgm</code> also provides useful <a href=""https://www.postgresql.org/docs/current/static/pgtrgm.html#PGTRGM-OP-TABLE"" rel=""noreferrer"">operators for ""similarity"" (<code>%</code>) and ""distance"" (<code>&lt;-&gt;</code>)</a>.</p>

<p>Trigram indexes also support simple regular expressions with <code>~</code> et al. and <strong>case insensitive</strong> pattern matching with <code>ILIKE</code>:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/28627951/postgresql-accent-case-insensitive-search/28636000#28636000"">PostgreSQL accent + case insensitive search</a></li>
</ul>
",Erwin Brandstetter,Erwin Brandstetter,1339552267,1534149386,1534149386
http://stackoverflow.com/a/11016689/321797,how to generate a random timestamp in java?,38984,Sami,,1339595505,1509181320,0,https://stackoverflow.com/questions/11016336/how-to-generate-a-random-timestamp-in-java,"<p>Start by finding out the start of the year 2012:</p>

<pre><code>    long start2012 = new SimpleDateFormat(""yyyy"").parse(""2012"").getTime();
</code></pre>

<p>Get a random millisecond during the year:</p>

<pre><code>    final long millisInYear2012 = 1000 * 60 * 60 * 24 * 365 + 1000; // Have to account for the leap second!
    long millis = Math.round(millisInYear2012 * Math.random());
    Timestamp timeStamp = new Timestamp(start2012 + millis);
</code></pre>
",Keppil,Keppil,1339596539,1339661877,1339661877
http://stackoverflow.com/a/11019879/1202488,Understanding colors on Android (six characters),139844,Thiago,Peter Mortensen,1301171312,1556908489,1493415174,https://stackoverflow.com/questions/5445085/understanding-colors-on-android-six-characters,"<p>Android uses hexadecimal ARGB values, which are formatted as #AARRGGBB. That first pair of letters, the AA, represent the alpha channel. You must convert your decimal opacity values to a hexadecimal value. Here are the steps:</p>

<p><strong>Alpha Hex Value Process</strong></p>

<ol>
<li>Take your opacity as a decimal value and multiply it by 255. So, if you have a block that is 50% opaque the decimal value would be .5. For example: .5 x 255 = 127.5</li>
<li>The fraction won't convert to hexadecimal, so you must round your number up or down to the nearest whole number. For example: 127.5 rounds up to 128; 55.25 rounds down to 55.</li>
<li>Enter your decimal value in a decimal-to-hexadecimal converter, like <a href=""http://www.binaryhexconverter.com/decimal-to-hex-converter"" rel=""noreferrer"">http://www.binaryhexconverter.com/decimal-to-hex-converter</a>, and convert your values.</li>
<li>If you only get back a single value, prefix it with a zero. For example, if you're trying to get 5% opacity and you're going through this process, you'll end up with the hexadecimal value of D. Add a zero in front of it so it appears as 0D.</li>
</ol>

<p>That's how you find the alpha channel value. I've taken the liberty to put together a list of values for you. Enjoy!</p>

<p><strong>Hex Opacity Values</strong></p>

<ul>
<li>100%  FF</li>
<li>95%  F2</li>
<li>90%  E6</li>
<li>85%  D9</li>
<li>80%  CC</li>
<li>75%  BF</li>
<li>70%  B3</li>
<li>65%  A6</li>
<li>60%  99</li>
<li>55%  8C</li>
<li>50%  80</li>
<li>45%  73</li>
<li>40%  66</li>
<li>35%  59</li>
<li>30%  4D</li>
<li>25%  40</li>
<li>20%  33</li>
<li>15%  26</li>
<li>10%  1A</li>
<li>5%  0D</li>
<li>0%  00</li>
</ul>
",BlondeFurious,Peter Mortensen,1339607294,1493416741,1493416741
http://stackoverflow.com/a/11024200/201698,How do you compare two version Strings in Java?,89284,Bill the Lizard,Andrew,1223920481,1552478056,1223932619,https://stackoverflow.com/questions/198431/how-do-you-compare-two-version-strings-in-java,"<p>Another solution for this old post (for those that it might help) :</p>

<pre><code>public class Version implements Comparable&lt;Version&gt; {

    private String version;

    public final String get() {
        return this.version;
    }

    public Version(String version) {
        if(version == null)
            throw new IllegalArgumentException(""Version can not be null"");
        if(!version.matches(""[0-9]+(\\.[0-9]+)*""))
            throw new IllegalArgumentException(""Invalid version format"");
        this.version = version;
    }

    @Override public int compareTo(Version that) {
        if(that == null)
            return 1;
        String[] thisParts = this.get().split(""\\."");
        String[] thatParts = that.get().split(""\\."");
        int length = Math.max(thisParts.length, thatParts.length);
        for(int i = 0; i &lt; length; i++) {
            int thisPart = i &lt; thisParts.length ?
                Integer.parseInt(thisParts[i]) : 0;
            int thatPart = i &lt; thatParts.length ?
                Integer.parseInt(thatParts[i]) : 0;
            if(thisPart &lt; thatPart)
                return -1;
            if(thisPart &gt; thatPart)
                return 1;
        }
        return 0;
    }

    @Override public boolean equals(Object that) {
        if(this == that)
            return true;
        if(that == null)
            return false;
        if(this.getClass() != that.getClass())
            return false;
        return this.compareTo((Version) that) == 0;
    }

}
</code></pre>

<hr>

<pre><code>Version a = new Version(""1.1"");
Version b = new Version(""1.1.1"");
a.compareTo(b) // return -1 (a&lt;b)
a.equals(b)    // return false

Version a = new Version(""2.0"");
Version b = new Version(""1.9.9"");
a.compareTo(b) // return 1 (a&gt;b)
a.equals(b)    // return false

Version a = new Version(""1.0"");
Version b = new Version(""1"");
a.compareTo(b) // return 0 (a=b)
a.equals(b)    // return true

Version a = new Version(""1"");
Version b = null;
a.compareTo(b) // return 1 (a&gt;b)
a.equals(b)    // return false

List&lt;Version&gt; versions = new ArrayList&lt;Version&gt;();
versions.add(new Version(""2""));
versions.add(new Version(""1.0.5""));
versions.add(new Version(""1.01.0""));
versions.add(new Version(""1.00.1""));
Collections.min(versions).get() // return min version
Collections.max(versions).get() // return max version

// WARNING
Version a = new Version(""2.06"");
Version b = new Version(""2.060"");
a.equals(b)    // return false
</code></pre>

<hr>

<p>Edit:</p>

<p>@daiscog: Thank you for your remark, this piece of code has been developed for the Android platform and as recommended by Google, the method ""matches"" check the entire string unlike Java that uses a regulatory pattern. (<a href=""http://developer.android.com/reference/java/lang/String.html#matches%28java.lang.String%29"">Android documentation</a> - <a href=""http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#matches%28java.lang.String%29"">JAVA documentation</a>)</p>
",alex,alex,1339626305,1459012567,1459012567
http://stackoverflow.com/a/11048669/2866660,Cucumber Capybara scroll to bottom of page,21650,Eric M.,,1292197505,1506718613,0,https://stackoverflow.com/questions/4424790/cucumber-capybara-scroll-to-bottom-of-page,"<p>You could use javascript to achieve this:</p>

<pre><code>page.execute_script ""window.scrollBy(0,10000)""
</code></pre>
",Nat Ritmeyer,Nat Ritmeyer,1339754983,1406743776,1406743776
http://stackoverflow.com/a/110576/992171,Do htmlspecialchars and mysql_real_escape_string keep my PHP code safe from injection?,63438,Cheekysoft,Community,1221987506,1489777366,1495535452,https://stackoverflow.com/questions/110575/do-htmlspecialchars-and-mysql-real-escape-string-keep-my-php-code-safe-from-inje,"<p>When it comes to database queries, always try and use prepared parameterised queries. The <code>mysqli</code> and <code>PDO</code> libraries support this. This is infinitely safer than using escaping functions such as <code>mysql_real_escape_string</code>.</p>

<p>Yes, <code>mysql_real_escape_string</code> is effectively just a string escaping function. It is not a magic bullet. All it will do is escape dangerous characters in order that they can be safe to use in a single query string. However, if you do not sanitise your inputs beforehand, then you will be vulnerable to certain attack vectors.</p>

<p>Imagine the following SQL:</p>

<pre><code>$result = ""SELECT fields FROM table WHERE id = "".mysql_real_escape_string($_POST['id']);
</code></pre>

<p>You should be able to see that this is vulnerable to exploit.<br>
Imagine the <code>id</code> parameter contained the common attack vector:</p>

<pre><code>1 OR 1=1
</code></pre>

<p>There's no risky chars in there to encode, so it will pass straight through the escaping filter. Leaving us:</p>

<pre><code>SELECT fields FROM table WHERE id= 1 OR 1=1
</code></pre>

<p>Which is a lovely SQL injection vector and would allow the attacker to return all the rows.
Or</p>

<pre><code>1 or is_admin=1 order by id limit 1
</code></pre>

<p>which produces</p>

<pre><code>SELECT fields FROM table WHERE id=1 or is_admin=1 order by id limit 1
</code></pre>

<p>Which allows the attacker to return the first administrator's details in this completely fictional example.</p>

<p>Whilst these functions are useful, they must be used with care. You need to ensure that all web inputs are validated to some degree. In this case, we see that we can be exploited because we didn't check that a variable we were using as a number, was actually numeric. In PHP you should widely use a set of functions to check that inputs are integers, floats, alphanumeric etc.   But when it comes to SQL, heed most the value of the prepared statement. The above code would have been secure if it was a prepared statement as the database functions would have known that <code>1 OR 1=1</code> is not a valid literal.</p>

<p>As for <code>htmlspecialchars()</code>. That's a minefield of its own.</p>

<p>There's a real problem in PHP in that it has a whole selection of different html-related escaping functions, and no clear guidance on exactly which functions do what. </p>

<p>Firstly, if you are inside an HTML tag, you are in real trouble. Look at</p>

<pre><code>echo '&lt;img src= ""' . htmlspecialchars($_GET['imagesrc']) . '"" /&gt;';
</code></pre>

<p>We're already inside an HTML tag, so we don't need &lt; or > to do anything dangerous. Our attack vector could just be <code>javascript:alert(document.cookie)</code></p>

<p>Now resultant HTML looks like</p>

<pre><code>&lt;img src= ""javascript:alert(document.cookie)"" /&gt;
</code></pre>

<p>The attack gets straight through. </p>

<p>It gets worse. Why? because <code>htmlspecialchars</code> (when called this way) only encodes double quotes and not single. So if we had </p>

<pre><code>echo ""&lt;img src= '"" . htmlspecialchars($_GET['imagesrc']) . "". /&gt;"";
</code></pre>

<p>Our evil attacker can now inject whole new parameters</p>

<pre><code>pic.png' onclick='location.href=xxx' onmouseover='...
</code></pre>

<p>gives us</p>

<pre><code>&lt;img src='pic.png' onclick='location.href=xxx' onmouseover='...' /&gt;
</code></pre>

<p>In these cases, there is no magic bullet, you just have to santise the input yourself. If you try and filter out bad characters you will surely fail. Take a whitelist approach and only let through the chars which are good. Look at the <a href=""http://ha.ckers.org/xss.html"" rel=""noreferrer"">XSS cheat sheet</a> for examples on how diverse vectors can be</p>

<p>Even if you use <code>htmlspecialchars($string)</code> outside of HTML tags, you are still vulnerable to multi-byte charset attack vectors.</p>

<p>The most effective you can be is to use the a combination of mb_convert_encoding and htmlentities as follows.</p>

<pre><code>$str = mb_convert_encoding($str, 'UTF-8', 'UTF-8');
$str = htmlentities($str, ENT_QUOTES, 'UTF-8');
</code></pre>

<p>Even this leaves IE6 vulnerable, because of the way it handles UTF. However, you could fall back to a more limited encoding, such as ISO-8859-1, until IE6 usage drops off.</p>

<p>For a more in-depth study to the multibyte problems, see <a href=""https://stackoverflow.com/a/12118602/1820"">https://stackoverflow.com/a/12118602/1820</a></p>
",Cheekysoft,Community,1221987523,1453115277,1495540052
http://stackoverflow.com/a/11066579/596939,Remove punctuation from Unicode formatted strings,23929,acpigeon,gillenpj,1339874885,1562600068,1404665674,https://stackoverflow.com/questions/11066400/remove-punctuation-from-unicode-formatted-strings,"<p>A little shorter version based on <a href=""https://stackoverflow.com/a/11066443/181337"">Daenyth answer</a></p>

<pre><code>import unicodedata

def strip_punctuation(text):
    """"""
    &gt;&gt;&gt; strip_punctuation(u'something')
    u'something'

    &gt;&gt;&gt; strip_punctuation(u'something.,:else really')
    u'somethingelse really'
    """"""
    punctutation_cats = set(['Pc', 'Pd', 'Ps', 'Pe', 'Pi', 'Pf', 'Po'])
    return ''.join(x for x in text
                   if unicodedata.category(x) not in punctutation_cats)

input_data = [u'somehting', u'something, else', u'nothing.']
without_punctuation = map(strip_punctuation, input_data)
</code></pre>
",Facundo Casco,Community,1339876519,1339878038,1495535476
http://stackoverflow.com/a/11069822/166700,Test if executable exists in Python?,122167,Piotr Lesnicki,sorin,1229579736,1522071727,1471340584,https://stackoverflow.com/questions/377017/test-if-executable-exists-in-python,"<h2>For *nix platforms (Linux and OS X)</h2>

<p>This seems to be working for me:</p>

<p><strong>Edited</strong> to work on Linux, thanks to <a href=""https://stackoverflow.com/users/624066/mestrelion"">Mestreion</a></p>

<pre><code>def cmd_exists(cmd):
    return subprocess.call(""type "" + cmd, shell=True, 
        stdout=subprocess.PIPE, stderr=subprocess.PIPE) == 0
</code></pre>

<p>What we're doing here is using the builtin command <code>type</code> and checking the exit code. If there's no such command, <code>type</code> will exit with 1 (or a non-zero status code anyway).</p>

<p>The bit about stdout and stderr is just to silence the output of the <code>type</code> command, since we're only interested in the exit status code.</p>

<p>Example usage:</p>

<pre><code>&gt;&gt;&gt; cmd_exists(""jsmin"")
True
&gt;&gt;&gt; cmd_exists(""cssmin"")
False
&gt;&gt;&gt; cmd_exists(""ls"")
True
&gt;&gt;&gt; cmd_exists(""dir"")
False
&gt;&gt;&gt; cmd_exists(""node"")
True
&gt;&gt;&gt; cmd_exists(""steam"")
False
</code></pre>
",hasen,Community,1339920106,1369380226,1495542380
http://stackoverflow.com/a/11072627/1199911,Set selected item of spinner programmatically,351193,Boardy,Sathyajith Bhat,1339947558,1562249439,1340006224,https://stackoverflow.com/questions/11072576/set-selected-item-of-spinner-programmatically,"<pre><code>public static void selectSpinnerItemByValue(Spinner spnr, long value) {
    SimpleCursorAdapter adapter = (SimpleCursorAdapter) spnr.getAdapter();
    for (int position = 0; position &lt; adapter.getCount(); position++) {
        if(adapter.getItemId(position) == value) {
            spnr.setSelection(position);
            return;
        }
    }
}
</code></pre>

<p>You can use the above like:</p>

<pre><code>selectSpinnerItemByValue(spinnerObject, desiredValue);
</code></pre>

<p>&amp; of course you can also select by index directly like</p>

<pre><code>spinnerObject.setSelection(index);
</code></pre>
",Yaqub Ahmad,John Slegers,1339947850,1453673583,1453673583
http://stackoverflow.com/a/11084797/2797106,Safe width in pixels for printing web pages?,148142,aemkei,BSMP,1227698393,1541386878,1541386878,https://stackoverflow.com/questions/320357/safe-width-in-pixels-for-printing-web-pages,"<p>As for a true universal answer, I cant provide one.  I can, however, provide a simple and definitive answer for some particulars...</p>

<blockquote>
  <blockquote>
    <p>670 PIXELS  </p>
  </blockquote>
</blockquote>

<p>At least this seems to be a safe answer for Microsoft products.  I read many suggestions, including 675, but after testing this myself 670 is what I came up with up.</p>

<p>All the DPI, margin issues, hardware differences aside, this answer is based on the fact that if I use print preview in IE9 (with standard margins)  and SET THE PRINT SIZE TO 100% rather than the default of shrink to fit, everything fits on the page without getting cut off at this width.</p>

<p>If I send an HTML email to myself and receive it with Windows Live Mail 2011 (what Outlook Express became) and I print the page at 670 width  again everything fits.  This holds true if I send it to an actual hard copy or a an MS XPS file (virtual printout).</p>

<p>Before I experimented, I was using a arbitrary width of 700.  In all the scenarios mentioned above part of the page was getting cut off.  When I reduced to 670, everything fit perfectly.</p>

<p>As for how I set the width  I just used a primitive wrapper html table and defined its width to be 670.</p>

<p>If you can dictate the end users software, such matters can be straight forward.  If you cannot (as is usually the case of course) you can test for particulars like which browsers they are using, etc.  and hardcode the solutions for the important ones.  Between IE and FF, you will cover literally about 90% of web users.  Put in some other code for everyone else which generally seems to work and call it a day...</p>
",Jonathan,,1340029121,1340029121,0
http://stackoverflow.com/a/11097644/2066546,"Any font for generating pdf that will handle Chinese, Cyrillic... ?",2772,equivalent8,Alexis Pigeon,1340016308,1428690419,1340021012,https://stackoverflow.com/questions/11081212/any-font-for-generating-pdf-that-will-handle-chinese-cyrillic,"<p>Ok, going to answer it by myself. On <a href=""https://superuser.com/questions/438257/pdf-fonts-that-include-all-possible-gtld-chars#comment506227_438257"">SuperUser</a> I asked similar question (focusing on answers in more theoretical way), and the main conclusion was answer that:</p>

<blockquote>
  <p>There is no single font that supports the whole of Unicode.</p>
</blockquote>

<p>but fortunately pdf supports fall-back fonts, and <strong>prawn</strong> gem too.</p>

<p><strong>here is my solution:</strong></p>

<p>1/ set your fall-back fonts</p>

<pre><code>  kai = ""#{Prawn::BASEDIR}/data/fonts/gkai00mp.ttf""
  action_man_path = ""#{Prawn::BASEDIR}/data/fonts/Action Man.dfont""
  dejavu = ""#{Prawn::BASEDIR}/data/fonts/DejaVuSans.ttf""

  font_families.update(""dejavu"" =&gt; {
    :normal      =&gt; dejavu,
    :italic      =&gt; dejavu,
    :bold        =&gt; dejavu,
    :bold_italic =&gt; dejavu
  })

  #Times is defined in prawn
  font_families.update(""times"" =&gt; {
    :normal =&gt; ""Times-Roman"",
    :italic      =&gt; ""Times-Italic"",
    :bold        =&gt; ""Times-Bold"",
    :bold_italic =&gt; ""Times-BoldItalic""
  })

  font_families.update(""action_man"" =&gt; {
    :normal      =&gt; { :file =&gt; action_man_path, :font =&gt; ""ActionMan"" },
    :italic      =&gt; { :file =&gt; action_man_path, :font =&gt; ""ActionMan-Italic"" },
    :bold        =&gt; { :file =&gt; action_man_path, :font =&gt; ""ActionMan-Bold"" },
    :bold_italic =&gt; { :file =&gt; action_man_path, :font =&gt; ""ActionMan-BoldItalic"" }
  })

  font_families.update(
      ""kai"" =&gt; {
        :normal =&gt; { :file =&gt; kai, :font =&gt; ""Kai"" },
        :bold   =&gt; kai,
        :italic =&gt; kai,
        :bold_italic =&gt; kai
       }
    )
</code></pre>

<p>and </p>

<pre><code>def fallback_fonts
  [""dejavu"", ""times"", 'kai', 'action_man']
end
</code></pre>

<p>2/ call</p>

<pre><code> font(""Helvetica"", size: 14) do  #keyword ""Helvetica"" is specified in Prawn by default
   text "" foo"", :fallback_fonts =&gt; fallback_fonts 
 end
</code></pre>

<p>Now, here I'm just using fonts that are included in Prawn by default, but this way you can add several fonts with different charsets and just specify them as fall-back  </p>

<p>For example you can put your fonts somewhere in your Rails root and just include them from there</p>

<p><strong>note</strong> in ""Kai"" font, I'm specifying same font for normal, italic, bold, bold_italic without styling. I'm doing this on purpose. From what I was experiencing  <em>gkai00mp</em> font don't have bold chars or italic chars. So when italic/bold char get rendered it will be printed in normal style (which is better than not to render at all). </p>

<p>If I don't specify bold/italic font for font (exaple ""Kai"")..</p>

<pre><code>  font_families.update(
      ""kai"" =&gt; {
        :normal =&gt; { :file =&gt; kai, :font =&gt; ""Kai"" }
        }
    )
</code></pre>

<p>.. and you try to render styled char that will fall-back to kai...</p>

<pre><code> text ""&lt;b&gt; foo&lt;/b&gt;"", :fallback_fonts =&gt; fallback_fonts, :inline_format=&gt;true 
</code></pre>

<p>...I'll get </p>

<pre><code>Prawn::Errors::UnknownFont in Foo

  is not a known font. 
</code></pre>

<p><strong>note 2:</strong> if you want to put non-ascii chars to ruby file you need to put encoding at top of the file</p>

<pre><code># coding: utf-8

class Foo
...
end
</code></pre>

<p>this however works form ruby 1.9. Ruby 1.8.x source can handle ASCII only (more on that in <a href=""https://cooperpress.com/19walkthrough"" rel=""nofollow noreferrer"">ruby 1.9 walkthrough by P.C.</a>
but in Rails you should use I18n (internationalization) </p>

<p><strong>note 3</strong></p>

<p>Prawn has really great documentation, just git clone prawn from github and check ./manuals</p>
",equivalent8,Community,1340096157,1340096807,1490005096
http://stackoverflow.com/a/11114724/1984219,Determining what classes are defined in a PHP class file,18041,Allain Lalonde,random,1243653987,1538424263,1331945972,https://stackoverflow.com/questions/928928/determining-what-classes-are-defined-in-a-php-class-file,"<p>My snippet too. Can parse files with multiple classes, interfaces, arrays and namespaces.
Returns an array with classes+types (class, interface, abstract) divided by namespaces.</p>

<pre><code>&lt;?php    
    /**
     * 
     * Looks what classes and namespaces are defined in that file and returns the first found
     * @param String $file Path to file
     * @return Returns NULL if none is found or an array with namespaces and classes found in file
     */
    function classes_in_file($file)
    {

        $classes = $nsPos = $final = array();
        $foundNS = FALSE;
        $ii = 0;

        if (!file_exists($file)) return NULL;

        $er = error_reporting();
        error_reporting(E_ALL ^ E_NOTICE);

        $php_code = file_get_contents($file);
        $tokens = token_get_all($php_code);
        $count = count($tokens);

        for ($i = 0; $i &lt; $count; $i++) 
        {
            if(!$foundNS &amp;&amp; $tokens[$i][0] == T_NAMESPACE)
            {
                $nsPos[$ii]['start'] = $i;
                $foundNS = TRUE;
            }
            elseif( $foundNS &amp;&amp; ($tokens[$i] == ';' || $tokens[$i] == '{') )
            {
                $nsPos[$ii]['end']= $i;
                $ii++;
                $foundNS = FALSE;
            }
            elseif ($i-2 &gt;= 0 &amp;&amp; $tokens[$i - 2][0] == T_CLASS &amp;&amp; $tokens[$i - 1][0] == T_WHITESPACE &amp;&amp; $tokens[$i][0] == T_STRING) 
            {
                if($i-4 &gt;=0 &amp;&amp; $tokens[$i - 4][0] == T_ABSTRACT)
                {
                    $classes[$ii][] = array('name' =&gt; $tokens[$i][1], 'type' =&gt; 'ABSTRACT CLASS');
                }
                else
                {
                    $classes[$ii][] = array('name' =&gt; $tokens[$i][1], 'type' =&gt; 'CLASS');
                }
            }
            elseif ($i-2 &gt;= 0 &amp;&amp; $tokens[$i - 2][0] == T_INTERFACE &amp;&amp; $tokens[$i - 1][0] == T_WHITESPACE &amp;&amp; $tokens[$i][0] == T_STRING)
            {
                $classes[$ii][] = array('name' =&gt; $tokens[$i][1], 'type' =&gt; 'INTERFACE');
            }
        }
        error_reporting($er);
        if (empty($classes)) return NULL;

        if(!empty($nsPos))
        {
            foreach($nsPos as $k =&gt; $p)
            {
                $ns = '';
                for($i = $p['start'] + 1; $i &lt; $p['end']; $i++)
                    $ns .= $tokens[$i][1];

                $ns = trim($ns);
                $final[$k] = array('namespace' =&gt; $ns, 'classes' =&gt; $classes[$k+1]);
            }
            $classes = $final;
        }
        return $classes;
    }
</code></pre>

<p>Outputs something like this...</p>

<pre><code>array
  'namespace' =&gt; string 'test\foo' (length=8)
  'classes' =&gt; 
    array
      0 =&gt; 
        array
          'name' =&gt; string 'bar' (length=3)
          'type' =&gt; string 'CLASS' (length=5)
      1 =&gt; 
        array
          'name' =&gt; string 'baz' (length=3)
          'type' =&gt; string 'INTERFACE' (length=9)
array
  'namespace' =&gt; string 'this\is\a\really\big\namespace\for\testing\dont\you\think' (length=57)
  'classes' =&gt; 
    array
      0 =&gt; 
        array
          'name' =&gt; string 'yes_it_is' (length=9)
          'type' =&gt; string 'CLASS' (length=5)
      1 =&gt; 
        array
          'name' =&gt; string 'damn_too_big' (length=12)
          'type' =&gt; string 'ABSTRACT CLASS' (length=14)
      2 =&gt; 
        array
          'name' =&gt; string 'fogo' (length=6)
          'type' =&gt; string 'INTERFACE' (length=9)
</code></pre>

<p>Might help someone!</p>
",Tivie,Tivie,1340177082,1538424263,1538424263
http://stackoverflow.com/a/11117338/333340,What version of OpenSSL is needed to sign with sha256WithRSAEncryption,3191,Niels Castle,,1336598168,1340187153,0,https://stackoverflow.com/questions/10524198/what-version-of-openssl-is-needed-to-sign-with-sha256withrsaencryption,"<p>A good friend came up with a workaround for using sha256WithRSAEncryption on an old PHP 5.2.4 and OpenSSL 0.9.8g module.</p>

<p>Using the information available at <a href=""http://www.di-mgt.com.au/rsa_alg.html"" rel=""noreferrer"">http://www.di-mgt.com.au/rsa_alg.html</a> he wrote me the following snippet:</p>

<pre><code>function my_openssl_sign($data, &amp;$signature, $priv_key_id, $signature_alg = 'sha256WithRSAEncryption') {
    $pinfo = openssl_pkey_get_details($priv_key_id);
    $hash = hash('sha256', $data);
    $t = '3031300d060960864801650304020105000420'; # sha256
    $t .= $hash;
    $pslen = $pinfo['bits']/8 - (strlen($t)/2 + 3);

    $eb = '0001' . str_repeat('FF', $pslen) . '00' . $t;
    $eb = pack('H*', $eb);

    return openssl_private_encrypt($eb, $signature, $priv_key_id, OPENSSL_NO_PADDING); 
}
</code></pre>

<p>Thank you, Mads, you're made of awesomeness!</p>
",Niels Castle,,1340187153,1340187153,0
http://stackoverflow.com/a/11128179/467582,Select text in javascript,37515,user1365010,Chloe,1340226113,1526156768,1526156768,https://stackoverflow.com/questions/11128130/select-text-in-javascript,"<p>Ok, first of all the question should be - How can I select a piece of text using JS?</p>

<p>Highlighting is different from selecting text(Yes, your title is good!)</p>

<p>This should help:</p>

<p><a href=""http://jsfiddle.net/epinapala/WdeTM/4/"" rel=""noreferrer"">Working demo</a></p>

<pre><code>function selectText(element) {
    var doc = document;
    var text = doc.getElementById(element);    

    if (doc.body.createTextRange) { // ms
        var range = doc.body.createTextRange();
        range.moveToElementText(text);
        range.select();
    } else if (window.getSelection) { // moz, opera, webkit
        var selection = window.getSelection();            
        var range = doc.createRange();
        range.selectNodeContents(text);
        selection.removeAllRanges();
        selection.addRange(range);
    }
}

selectText('foo');
</code></pre>

<p>Just found the original author for my long saved sniplr snippet, credits : @Jason thread <a href=""https://stackoverflow.com/questions/985272/jquery-selecting-text-in-an-element-akin-to-highlighting-with-your-mouse"">here</a>.</p>
",Eswar Rajesh Pinapala,Community,1340226332,1376329773,1495541854
http://stackoverflow.com/a/11172679/1869097,Standard alternative to GCC&#39;s ##__VA_ARGS__ trick?,64888,jwd,Community,1302219568,1552853926,1495540035,https://stackoverflow.com/questions/5588855/standard-alternative-to-gccs-va-args-trick,"<p>There is an argument counting trick that you can use.</p>

<p>Here is one standard-compliant way to implement the second <code>BAR()</code> example in jwd's question:</p>

<pre class=""lang-c prettyprint-override""><code>#include &lt;stdio.h&gt;

#define BAR(...) printf(FIRST(__VA_ARGS__) ""\n"" REST(__VA_ARGS__))

/* expands to the first argument */
#define FIRST(...) FIRST_HELPER(__VA_ARGS__, throwaway)
#define FIRST_HELPER(first, ...) first

/*
 * if there's only one argument, expands to nothing.  if there is more
 * than one argument, expands to a comma followed by everything but
 * the first argument.  only supports up to 9 arguments but can be
 * trivially expanded.
 */
#define REST(...) REST_HELPER(NUM(__VA_ARGS__), __VA_ARGS__)
#define REST_HELPER(qty, ...) REST_HELPER2(qty, __VA_ARGS__)
#define REST_HELPER2(qty, ...) REST_HELPER_##qty(__VA_ARGS__)
#define REST_HELPER_ONE(first)
#define REST_HELPER_TWOORMORE(first, ...) , __VA_ARGS__
#define NUM(...) \
    SELECT_10TH(__VA_ARGS__, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE,\
                TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, ONE, throwaway)
#define SELECT_10TH(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, ...) a10

int
main(int argc, char *argv[])
{
    BAR(""first test"");
    BAR(""second test: %s"", ""a string"");
    return 0;
}
</code></pre>

<p>This same trick is used to:</p>

<ul>
<li><a href=""https://stackoverflow.com/q/2124339/712605"">count the number of arguments</a></li>
<li><a href=""https://stackoverflow.com/a/5355946/712605"">expand differently depending on the number of arguments</a></li>
<li><a href=""https://stackoverflow.com/a/9204947/712605"">append to <code>__VA_ARGS__</code></a></li>
</ul>

<h2>Explanation</h2>

<p>The strategy is to separate <code>__VA_ARGS__</code> into the first argument and the rest (if any).  This makes it possible to insert stuff after the first argument but before the second (if present).</p>

<h3><code>FIRST()</code></h3>

<p>This macro simply expands to the first argument, discarding the rest.</p>

<p>The implementation is straightforward.  The <code>throwaway</code> argument ensures that <code>FIRST_HELPER()</code> gets two arguments, which is required because the <code>...</code> needs at least one.  With one argument, it expands as follows:</p>

<ol>
<li><code>FIRST(firstarg)</code></li>
<li><code>FIRST_HELPER(firstarg, throwaway)</code></li>
<li><code>firstarg</code></li>
</ol>

<p>With two or more, it expands as follows:</p>

<ol>
<li><code>FIRST(firstarg, secondarg, thirdarg)</code></li>
<li><code>FIRST_HELPER(firstarg, secondarg, thirdarg, throwaway)</code></li>
<li><code>firstarg</code></li>
</ol>

<h3><code>REST()</code></h3>

<p>This macro expands to everything but the first argument (including the comma after the first argument, if there is more than one argument).</p>

<p>The implementation of this macro is far more complicated.  The general strategy is to count the number of arguments (one or more than one) and then expand to either <code>REST_HELPER_ONE()</code> (if only one argument given) or <code>REST_HELPER_TWOORMORE()</code> (if two or more arguments given).  <code>REST_HELPER_ONE()</code> simply expands to nothing -- there are no arguments after the first, so the remaining arguments is the empty set.  <code>REST_HELPER_TWOORMORE()</code> is also straightforward -- it expands to a comma followed by everything except the first argument.</p>

<p>The arguments are counted using the <code>NUM()</code> macro.  This macro expands to <code>ONE</code> if only one argument is given, <code>TWOORMORE</code> if between two and nine arguments are given, and breaks if 10 or more arguments are given (because it expands to the 10th argument).</p>

<p>The <code>NUM()</code> macro uses the <code>SELECT_10TH()</code> macro to determine the number of arguments.  As its name implies, <code>SELECT_10TH()</code> simply expands to its 10th argument.  Because of the ellipsis, <code>SELECT_10TH()</code> needs to be passed at least 11 arguments (the standard says that there must be at least one argument for the ellipsis).  This is why <code>NUM()</code> passes <code>throwaway</code> as the last argument (without it, passing one argument to <code>NUM()</code> would result in only 10 arguments being passed to <code>SELECT_10TH()</code>, which would violate the standard).</p>

<p>Selection of either <code>REST_HELPER_ONE()</code> or <code>REST_HELPER_TWOORMORE()</code> is done by concatenating <code>REST_HELPER_</code> with the expansion of <code>NUM(__VA_ARGS__)</code> in <code>REST_HELPER2()</code>.  Note that the purpose of <code>REST_HELPER()</code> is to ensure that <code>NUM(__VA_ARGS__)</code> is fully expanded before being concatenated with <code>REST_HELPER_</code>.</p>

<p>Expansion with one argument goes as follows:</p>

<ol>
<li><code>REST(firstarg)</code></li>
<li><code>REST_HELPER(NUM(firstarg), firstarg)</code></li>
<li><code>REST_HELPER2(SELECT_10TH(firstarg, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, ONE, throwaway), firstarg)</code></li>
<li><code>REST_HELPER2(ONE, firstarg)</code></li>
<li><code>REST_HELPER_ONE(firstarg)</code></li>
<li>(empty)</li>
</ol>

<p>Expansion with two or more arguments goes as follows:</p>

<ol>
<li><code>REST(firstarg, secondarg, thirdarg)</code></li>
<li><code>REST_HELPER(NUM(firstarg, secondarg, thirdarg), firstarg, secondarg, thirdarg)</code></li>
<li><code>REST_HELPER2(SELECT_10TH(firstarg, secondarg, thirdarg, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, ONE, throwaway), firstarg, secondarg, thirdarg)</code></li>
<li><code>REST_HELPER2(TWOORMORE, firstarg, secondarg, thirdarg)</code></li>
<li><code>REST_HELPER_TWOORMORE(firstarg, secondarg, thirdarg)</code></li>
<li><code>, secondarg, thirdarg</code></li>
</ol>
",Richard Hansen,Community,1340482759,1354059514,1495540035
http://stackoverflow.com/a/11172679/4742108,Standard alternative to GCC&#39;s ##__VA_ARGS__ trick?,64888,jwd,Community,1302219568,1552853926,1495540035,https://stackoverflow.com/questions/5588855/standard-alternative-to-gccs-va-args-trick,"<p>There is an argument counting trick that you can use.</p>

<p>Here is one standard-compliant way to implement the second <code>BAR()</code> example in jwd's question:</p>

<pre class=""lang-c prettyprint-override""><code>#include &lt;stdio.h&gt;

#define BAR(...) printf(FIRST(__VA_ARGS__) ""\n"" REST(__VA_ARGS__))

/* expands to the first argument */
#define FIRST(...) FIRST_HELPER(__VA_ARGS__, throwaway)
#define FIRST_HELPER(first, ...) first

/*
 * if there's only one argument, expands to nothing.  if there is more
 * than one argument, expands to a comma followed by everything but
 * the first argument.  only supports up to 9 arguments but can be
 * trivially expanded.
 */
#define REST(...) REST_HELPER(NUM(__VA_ARGS__), __VA_ARGS__)
#define REST_HELPER(qty, ...) REST_HELPER2(qty, __VA_ARGS__)
#define REST_HELPER2(qty, ...) REST_HELPER_##qty(__VA_ARGS__)
#define REST_HELPER_ONE(first)
#define REST_HELPER_TWOORMORE(first, ...) , __VA_ARGS__
#define NUM(...) \
    SELECT_10TH(__VA_ARGS__, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE,\
                TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, ONE, throwaway)
#define SELECT_10TH(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, ...) a10

int
main(int argc, char *argv[])
{
    BAR(""first test"");
    BAR(""second test: %s"", ""a string"");
    return 0;
}
</code></pre>

<p>This same trick is used to:</p>

<ul>
<li><a href=""https://stackoverflow.com/q/2124339/712605"">count the number of arguments</a></li>
<li><a href=""https://stackoverflow.com/a/5355946/712605"">expand differently depending on the number of arguments</a></li>
<li><a href=""https://stackoverflow.com/a/9204947/712605"">append to <code>__VA_ARGS__</code></a></li>
</ul>

<h2>Explanation</h2>

<p>The strategy is to separate <code>__VA_ARGS__</code> into the first argument and the rest (if any).  This makes it possible to insert stuff after the first argument but before the second (if present).</p>

<h3><code>FIRST()</code></h3>

<p>This macro simply expands to the first argument, discarding the rest.</p>

<p>The implementation is straightforward.  The <code>throwaway</code> argument ensures that <code>FIRST_HELPER()</code> gets two arguments, which is required because the <code>...</code> needs at least one.  With one argument, it expands as follows:</p>

<ol>
<li><code>FIRST(firstarg)</code></li>
<li><code>FIRST_HELPER(firstarg, throwaway)</code></li>
<li><code>firstarg</code></li>
</ol>

<p>With two or more, it expands as follows:</p>

<ol>
<li><code>FIRST(firstarg, secondarg, thirdarg)</code></li>
<li><code>FIRST_HELPER(firstarg, secondarg, thirdarg, throwaway)</code></li>
<li><code>firstarg</code></li>
</ol>

<h3><code>REST()</code></h3>

<p>This macro expands to everything but the first argument (including the comma after the first argument, if there is more than one argument).</p>

<p>The implementation of this macro is far more complicated.  The general strategy is to count the number of arguments (one or more than one) and then expand to either <code>REST_HELPER_ONE()</code> (if only one argument given) or <code>REST_HELPER_TWOORMORE()</code> (if two or more arguments given).  <code>REST_HELPER_ONE()</code> simply expands to nothing -- there are no arguments after the first, so the remaining arguments is the empty set.  <code>REST_HELPER_TWOORMORE()</code> is also straightforward -- it expands to a comma followed by everything except the first argument.</p>

<p>The arguments are counted using the <code>NUM()</code> macro.  This macro expands to <code>ONE</code> if only one argument is given, <code>TWOORMORE</code> if between two and nine arguments are given, and breaks if 10 or more arguments are given (because it expands to the 10th argument).</p>

<p>The <code>NUM()</code> macro uses the <code>SELECT_10TH()</code> macro to determine the number of arguments.  As its name implies, <code>SELECT_10TH()</code> simply expands to its 10th argument.  Because of the ellipsis, <code>SELECT_10TH()</code> needs to be passed at least 11 arguments (the standard says that there must be at least one argument for the ellipsis).  This is why <code>NUM()</code> passes <code>throwaway</code> as the last argument (without it, passing one argument to <code>NUM()</code> would result in only 10 arguments being passed to <code>SELECT_10TH()</code>, which would violate the standard).</p>

<p>Selection of either <code>REST_HELPER_ONE()</code> or <code>REST_HELPER_TWOORMORE()</code> is done by concatenating <code>REST_HELPER_</code> with the expansion of <code>NUM(__VA_ARGS__)</code> in <code>REST_HELPER2()</code>.  Note that the purpose of <code>REST_HELPER()</code> is to ensure that <code>NUM(__VA_ARGS__)</code> is fully expanded before being concatenated with <code>REST_HELPER_</code>.</p>

<p>Expansion with one argument goes as follows:</p>

<ol>
<li><code>REST(firstarg)</code></li>
<li><code>REST_HELPER(NUM(firstarg), firstarg)</code></li>
<li><code>REST_HELPER2(SELECT_10TH(firstarg, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, ONE, throwaway), firstarg)</code></li>
<li><code>REST_HELPER2(ONE, firstarg)</code></li>
<li><code>REST_HELPER_ONE(firstarg)</code></li>
<li>(empty)</li>
</ol>

<p>Expansion with two or more arguments goes as follows:</p>

<ol>
<li><code>REST(firstarg, secondarg, thirdarg)</code></li>
<li><code>REST_HELPER(NUM(firstarg, secondarg, thirdarg), firstarg, secondarg, thirdarg)</code></li>
<li><code>REST_HELPER2(SELECT_10TH(firstarg, secondarg, thirdarg, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, TWOORMORE, ONE, throwaway), firstarg, secondarg, thirdarg)</code></li>
<li><code>REST_HELPER2(TWOORMORE, firstarg, secondarg, thirdarg)</code></li>
<li><code>REST_HELPER_TWOORMORE(firstarg, secondarg, thirdarg)</code></li>
<li><code>, secondarg, thirdarg</code></li>
</ol>
",Richard Hansen,Community,1340482759,1354059514,1495540035
http://stackoverflow.com/a/11176265/298171,Register a C++ class so that later a function can iterate over all registered classes,4919,grisumbras,Brian Tompsett - ,1340518588,1467045960,1467045960,https://stackoverflow.com/questions/11175379/register-a-c-class-so-that-later-a-function-can-iterate-over-all-registered-cl,"<p>You can make all your classes self-registering in some sort of collection. Here's a skeleton approach:</p>

<p><strong>Base.hpp:</strong></p>

<pre><code>#include &lt;memory&gt;
#include &lt;unordered_map&gt;
#include &lt;string&gt;

struct Base
{
    virtual ~Base() = default;

    using create_f = std::unique_ptr&lt;Base&gt;();

    static void registrate(std::string const &amp; name, create_f * fp)
    {
        registry()[name] = fp;
    }

    static std::unique_ptr&lt;Base&gt; instantiate(std::string const &amp; name)
    {
        auto it = registry().find(name);
        return it == registry().end() ? nullptr : (it-&gt;second)();
    }

    template &lt;typename D&gt;
    struct Registrar
    {
        explicit Registrar(std::string const &amp; name)
        {
            Base::registrate(name, &amp;D::create);
        }
        // make non-copyable, etc.
    };

private:
    static std::unordered_map&lt;std::string, create_f *&gt; &amp; registry();
};
</code></pre>

<p><strong>Base.cpp:</strong></p>

<pre><code>#include ""Base.hpp""

std::unordered_map&lt;std::string, Base::create_f *&gt; &amp; Base::registry()
{
    static std::unordered_map&lt;std::string, Base::create_f *&gt; impl;
    return impl;
}
</code></pre>

<p>Now to use this in a client:</p>

<p><strong>Derived.hpp:</strong></p>

<pre><code>#include ""Base.hpp""

struct Derived : Base
{
    static std::unique_ptr&lt;Base&gt; create() { return std::make_unique&lt;Derived&gt;(); }
    // ...
};
</code></pre>

<p><strong>Derived.cpp:</strong></p>

<pre><code>#include ""Derived.hpp""

namespace
{
    Base::Registrar&lt;Derived&gt; registrar(""MyClass"");
}
</code></pre>

<p>The constructor of the <code>Base::Registrar&lt;Derived&gt;</code> takes care of registering the class <code>Derived</code> under the name <code>""MyClass""</code>. You can create instances of <code>Derived</code> dynamically via:</p>

<pre><code>std::unique_ptr&lt;Base&gt; p = Base::instantiate(""MyClass"");
</code></pre>

<p>The code could/should be improved by detecting repeat registrations, printing a list of available classes, etc. Note how we avoid any static initialization ordering problems my making the actual registry map object a block-static object, which is guaranteed to be initialized before its first use, and thus destroyed only after its last use.</p>
",Kerrek SB,Kerrek SB,1340529238,1434850982,1434850982
http://stackoverflow.com/a/11176707/157605,How to remove null value from ValueListBox values,4387,Manoj Shrestha,Manoj Shrestha,1340532975,1378823745,1378823745,https://stackoverflow.com/questions/11176626/how-to-remove-null-value-from-valuelistbox-values,"<p>Call <code>setValue</code> before <code>setAcceptableValues</code>.</p>

<p>The reason is that the value is <code>null</code> when you call <code>setAcceptableValues</code>, and <code>ValueListBox</code> automatically adds any value (generally passed to <code>setValue</code>) to the list of acceptable values (so that the value is actually <em>set</em>, and can be selected by the user, and re-selected if she selected another value and wants to go back to the original one). Calling <code>setValue</code> first with a value that will be in the list of acceptable values negates this side-effect.</p>

<p>See <a href=""http://code.google.com/p/google-web-toolkit/issues/detail?id=5477"" rel=""noreferrer"">http://code.google.com/p/google-web-toolkit/issues/detail?id=5477</a></p>
",Thomas Broyer,,1340533941,1340533941,0
http://stackoverflow.com/a/1118038/226013,Recursively convert python object graph to dictionary,13037,Shabbyrobe,Community,1245817836,1562023954,1495541357,https://stackoverflow.com/questions/1036409/recursively-convert-python-object-graph-to-dictionary,"<p>An amalgamation of my own attempt and clues derived from Anurag Uniyal and Lennart Regebro's answers works best for me:</p>

<pre><code>def todict(obj, classkey=None):
    if isinstance(obj, dict):
        data = {}
        for (k, v) in obj.items():
            data[k] = todict(v, classkey)
        return data
    elif hasattr(obj, ""_ast""):
        return todict(obj._ast())
    elif hasattr(obj, ""__iter__"") and not isinstance(obj, str):
        return [todict(v, classkey) for v in obj]
    elif hasattr(obj, ""__dict__""):
        data = dict([(key, todict(value, classkey)) 
            for key, value in obj.__dict__.items() 
            if not callable(value) and not key.startswith('_')])
        if classkey is not None and hasattr(obj, ""__class__""):
            data[classkey] = obj.__class__.__name__
        return data
    else:
        return obj
</code></pre>
",Shabbyrobe,Ben,1247468787,1531745530,1531745530
http://stackoverflow.com/a/11230005/1886928,JavaScript: clone a function,77224,Andrey Shchekin,Andrey Shchekin,1259767339,1552524819,1259767717,https://stackoverflow.com/questions/1833588/javascript-clone-a-function,"<p>Here's a slightly better version of Jared's answer. This one won't end up with deeply nested functions the more you clone. It always calls the original.</p>

<pre><code>Function.prototype.clone = function() {
    var cloneObj = this;
    if(this.__isClone) {
      cloneObj = this.__clonedFrom;
    }

    var temp = function() { return cloneObj.apply(this, arguments); };
    for(var key in this) {
        temp[key] = this[key];
    }

    temp.__isClone = true;
    temp.__clonedFrom = cloneObj;

    return temp;
};
</code></pre>

<p>Also, in response to the updated answer given by pico.creator, it is worth noting that the <code>bind()</code> function added in Javascript 1.8.5 has the same problem as Jared's answer - it will keep nesting causing slower and slower functions each time it is used.</p>
",Justin Warkentin,Justin Warkentin,1340811477,1340813895,1340813895
http://stackoverflow.com/a/11236144/2066546,How can I get the resolution (width and height) for a video file from a linux command line?,69223,Jeremy Logan,Ciro Santilli 996ICU,1238025541,1525546116,1455897647,https://stackoverflow.com/questions/684015/how-can-i-get-the-resolution-width-and-height-for-a-video-file-from-a-linux-co,"<p>Use <a href=""https://ffmpeg.org/ffprobe.html"" rel=""noreferrer"">ffprobe</a> (part of FFmpeg toolkit)</p>

<p>example:</p>

<pre><code>ffprobe -v quiet -print_format json -show_format -show_streams ~/Movies/big_buck_bunny_720p_5mb.mp4
</code></pre>

<p>output:</p>

<pre><code>{
    ""streams"": [
        {
            ""index"": 0,
            ""codec_name"": ""h264"",
            ""codec_long_name"": ""H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10"",
            ""profile"": ""Main"",
            ""codec_type"": ""video"",
            ""codec_time_base"": ""1/50"",
            ""codec_tag_string"": ""avc1"",
            ""codec_tag"": ""0x31637661"",
            ""width"": 1280,
            ""height"": 720,
            ""coded_width"": 1280,
            ""coded_height"": 720,
            ""has_b_frames"": 0,
            ""sample_aspect_ratio"": ""1:1"",
            ""display_aspect_ratio"": ""16:9"",
            ""pix_fmt"": ""yuv420p"",
            ""level"": 31,
            ""chroma_location"": ""left"",
            ""refs"": 1,
            ""is_avc"": ""1"",
            ""nal_length_size"": ""4"",
            ""r_frame_rate"": ""25/1"",
            ""avg_frame_rate"": ""25/1"",
            ""time_base"": ""1/12800"",
            ""start_pts"": 0,
            ""start_time"": ""0.000000"",
            ""duration_ts"": 378368,
            ""duration"": ""29.560000"",
            ""bit_rate"": ""1032960"",
            ""bits_per_raw_sample"": ""8"",
            ""nb_frames"": ""739"",
            ""disposition"": {
                ""default"": 1,
                ""dub"": 0,
                ""original"": 0,
                ""comment"": 0,
                ""lyrics"": 0,
                ""karaoke"": 0,
                ""forced"": 0,
                ""hearing_impaired"": 0,
                ""visual_impaired"": 0,
                ""clean_effects"": 0,
                ""attached_pic"": 0
            },
            ""tags"": {
                ""creation_time"": ""1970-01-01 00:00:00"",
                ""language"": ""und"",
                ""handler_name"": ""VideoHandler""
            }
        },
        {
            ""index"": 1,
            ""codec_name"": ""aac"",
            ""codec_long_name"": ""AAC (Advanced Audio Coding)"",
            ""profile"": ""LC"",
            ""codec_type"": ""audio"",
            ""codec_time_base"": ""1/48000"",
            ""codec_tag_string"": ""mp4a"",
            ""codec_tag"": ""0x6134706d"",
            ""sample_fmt"": ""fltp"",
            ""sample_rate"": ""48000"",
            ""channels"": 6,
            ""channel_layout"": ""5.1"",
            ""bits_per_sample"": 0,
            ""r_frame_rate"": ""0/0"",
            ""avg_frame_rate"": ""0/0"",
            ""time_base"": ""1/48000"",
            ""start_pts"": 0,
            ""start_time"": ""0.000000"",
            ""duration_ts"": 1419264,
            ""duration"": ""29.568000"",
            ""bit_rate"": ""383960"",
            ""max_bit_rate"": ""416704"",
            ""nb_frames"": ""1386"",
            ""disposition"": {
                ""default"": 1,
                ""dub"": 0,
                ""original"": 0,
                ""comment"": 0,
                ""lyrics"": 0,
                ""karaoke"": 0,
                ""forced"": 0,
                ""hearing_impaired"": 0,
                ""visual_impaired"": 0,
                ""clean_effects"": 0,
                ""attached_pic"": 0
            },
            ""tags"": {
                ""creation_time"": ""1970-01-01 00:00:00"",
                ""language"": ""und"",
                ""handler_name"": ""SoundHandler""
            }
        }
    ],
    ""format"": {
        ""filename"": ""/Users/farsheed/Movies/big_buck_bunny_720p_5mb.mp4"",
        ""nb_streams"": 2,
        ""nb_programs"": 0,
        ""format_name"": ""mov,mp4,m4a,3gp,3g2,mj2"",
        ""format_long_name"": ""QuickTime / MOV"",
        ""start_time"": ""0.000000"",
        ""duration"": ""29.568000"",
        ""size"": ""5253880"",
        ""bit_rate"": ""1421504"",
        ""probe_score"": 100,
        ""tags"": {
            ""major_brand"": ""isom"",
            ""minor_version"": ""512"",
            ""compatible_brands"": ""isomiso2avc1mp41"",
            ""creation_time"": ""1970-01-01 00:00:00"",
            ""encoder"": ""Lavf53.24.2""
        }
    }
}
</code></pre>

<p>See documentation for more info.</p>
",Farsheed,Farsheed,1340839453,1464818426,1464818426
http://stackoverflow.com/a/11243952/1070215,Regex for checking if a string is strictly alphanumeric,160870,O__O,Johannes Jander,1340875693,1555449966,1458292592,https://stackoverflow.com/questions/11241690/regex-for-checking-if-a-string-is-strictly-alphanumeric,"<p>In order to be unicode compatible:</p>

<pre><code>^[\pL\pN]+$
</code></pre>

<p>where</p>

<pre><code>\pL stands for any letter
\pN stands for any number
</code></pre>
",Toto,,1340884091,1340884091,0
http://stackoverflow.com/a/11310258/319922,PHP DomDocument failing to handle utf-8 characters (),24975,Greg,,1341312047,1479941852,0,https://stackoverflow.com/questions/11309194/php-domdocument-failing-to-handle-utf-8-characters,"<p><a href=""http://php.net/manual/en/domdocument.loadhtml.php"" rel=""noreferrer""><code>DOMDocument::loadHTML()</code></a> expects a HTML string.</p>

<p>HTML uses the <code>ISO-8859-1</code> encoding (ISO Latin Alphabet No. 1) as default per it's specs. That is since longer, see <a href=""http://tools.ietf.org/html/rfc1866#section-6.1"" rel=""noreferrer""><em>6.1. The HTML Document Character Set</em></a>. In reality that is more the default support for <code>Windows-1252</code> in common webbrowsers.</p>

<p>I go back that far because PHP's DOMDocument is based on libxml and that brings the <a href=""http://www.xmlsoft.org/html/libxml-HTMLparser.html"" rel=""noreferrer"">HTMLparser</a> which is designed for HTML 4.0.</p>

<p>I'd say it's safe to assume then that you can load an <code>ISO-8859-1</code> encoded string.</p>

<p>Your string is <code>UTF-8</code> encoded. Turn all characters higher than 127 / h7F into <a href=""http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references"" rel=""noreferrer"">HTML Entities</a> and you're fine. If you don't want to do that your own, that is what <code>mb_convert_encoding</code> with the <code>HTML-ENTITIES</code> target encoding does:</p>

<ul>
<li>Those characters that have named entities, will get the named entitiy. <code> -&gt; &amp;euro;</code></li>
<li>The others get their numeric (decimal) entity, e.g. <code> -&gt; &amp;#9734;</code></li>
</ul>

<p>The following is a code example that makes the progress a bit more visible by using a callback function:</p>

<pre><code>$html = preg_replace_callback('/[\x{80}-\x{10FFFF}]/u', function($match) {
    list($utf8) = $match;
    $entity = mb_convert_encoding($utf8, 'HTML-ENTITIES', 'UTF-8');
    printf(""%s -&gt; %s\n"", $utf8, $entity);
    return $entity;
}, $html);
</code></pre>

<p>This exemplary outputs for your string:</p>

<pre><code> -&gt; &amp;#9734;
 -&gt; &amp;#9734;
 -&gt; &amp;#9734;
</code></pre>

<p>Anyway, that's just for looking deeper into your string. You want to have it either converted into an encoding <code>loadHTML</code> can deal with. That can be done by converting all outside of <code>US-ASCII</code> into HTML Entities:</p>

<pre><code>$us_ascii = mb_convert_encoding($utf_8, 'HTML-ENTITIES', 'UTF-8');
</code></pre>

<p>Take care that your input is actually UTF-8 encoded. If you have even mixed encodings (that can happen with some inputs) <code>mb_convert_encoding</code> can only handle one encoding per string. I already outlined above how to more specifically do string replacements with the help of regular expressions, so I leave further details for now.</p>

<p>The other alternative is to <em>hint</em> the encoding. This can be done in your case by modifying the document and adding a</p>

<pre><code>&lt;meta http-equiv=""content-type"" content=""text/html; charset=utf-8""&gt;
</code></pre>

<p>which is a Content-Type specifying a charset. That is also best practice for HTML strings that are not available via a webserver (e.g. saved on disk or inside a string like in your example). The webserver normally set's that as the response header.</p>

<p>If you don't care the misplaced warnings, you can just add it in front of the string:</p>

<pre><code>$dom = new DomDocument();
$dom-&gt;loadHTML('&lt;meta http-equiv=""content-type"" content=""text/html; charset=utf-8""&gt;'.$html);
</code></pre>

<p>Per the HTML 2.0 specs, elements that can only appear in the <code>&lt;head&gt;</code> section of a document, will be automatically placed there. This is what happens here, too. The output (pretty-print):</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta http-equiv=""content-type"" content=""text/html; charset=utf-8""&gt;
    &lt;meta charset=""utf-8""&gt;
    &lt;title&gt;Test!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt; Hello  World &lt;/h1&gt;    
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
",hakre,Greg,1341316079,1479941852,1479941852
http://stackoverflow.com/a/1131255/379593,Get MD5 hash of big files in Python,111734,JustRegisterMe,Chris,1247662327,1557312532,1430742540,https://stackoverflow.com/questions/1131220/get-md5-hash-of-big-files-in-python,"<p>You need to read the file in chunks of suitable size:</p>

<pre><code>def md5_for_file(f, block_size=2**20):
    md5 = hashlib.md5()
    while True:
        data = f.read(block_size)
        if not data:
            break
        md5.update(data)
    return md5.digest()
</code></pre>

<p>NOTE: Make sure you open your file with the 'rb' to the open - otherwise you will get the wrong result.</p>

<p>So to do the whole lot in one method - use something like: </p>

<pre><code>def generate_file_md5(rootdir, filename, blocksize=2**20):
    m = hashlib.md5()
    with open( os.path.join(rootdir, filename) , ""rb"" ) as f:
        while True:
            buf = f.read(blocksize)
            if not buf:
                break
            m.update( buf )
    return m.hexdigest()
</code></pre>

<p>The update above was based on the comments provided by Frerich Raabe - and I tested this and found it to be correct on my Python 2.7.2 windows installation</p>

<p>I cross-checked the results using the 'jacksum' tool.</p>

<pre><code>jacksum -a md5 &lt;filename&gt;
</code></pre>

<p><a href=""http://www.jonelo.de/java/jacksum/"" rel=""noreferrer"">http://www.jonelo.de/java/jacksum/</a></p>
",user25148,TheDoctor,1247662765,1449517835,1449517835
http://stackoverflow.com/a/1132015/1924128,Is it a good practice to use an empty URL for a HTML form&#39;s action attribute? (action=&quot;&quot;),154374,Matt Mitchell,Community,1247668451,1473352448,1495540988,https://stackoverflow.com/questions/1131781/is-it-a-good-practice-to-use-an-empty-url-for-a-html-forms-action-attribute-a,"<p>The best thing you can do is leave out the action attribute altogether. If you leave it out, the form will be submitted to the document's address, i.e. the same page.</p>

<p>It is also possible to leave it empty, and any browser implementing <a href=""http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#form-submission-algorithm"" rel=""noreferrer"">HTML's form submission algorithm</a> will treat it as equivalent to the document's address, which it does mainly because that's how browsers currently work:</p>

<blockquote>
  <p><code>8.</code> Let action be the submitter element's <a href=""http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#concept-fs-action"" rel=""noreferrer"">action</a>.</p>
  
  <p><code>9.</code> If action is the empty string, let action be <a href=""http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#the-document&#39;s-address"" rel=""noreferrer"">the document's address</a>.</p>
  
  <p><strong><em>Note: This step is a <a href=""http://www.whatwg.org/specs/web-apps/current-work/multipage/introduction.html#willful-violation"" rel=""noreferrer"">willful violation</a> of RFC 3986, which would require base URL processing here. This violation is motivated by a desire for compatibility with legacy content. <a href=""http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#refsRFC3986"" rel=""noreferrer"">[RFC3986]</a></em></strong></p>
</blockquote>

<p>This definitely works in all current browsers, but may not work as expected in some older browsers (<em>""<a href=""https://www.w3.org/Bugs/Public/show_bug.cgi?id=14215#c1"" rel=""noreferrer"">browsers do weird things with an empty action="""" attribute</a>""</em>), which is why <a href=""http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#attr-fs-action"" rel=""noreferrer"">the spec strongly discourages authors from leaving it empty</a>:</p>

<blockquote>
  <p>The <code>action</code> and <code>formaction</code> content attributes, if specified, must have a value that is a <a href=""http://www.whatwg.org/specs/web-apps/current-work/multipage/urls.html#valid-non-empty-url-potentially-surrounded-by-spaces"" rel=""noreferrer"">valid non-empty URL potentially surrounded by spaces</a>.</p>
</blockquote>
",mercator,mercator,1247670615,1331630778,1331630778
http://stackoverflow.com/a/11349621/483271,Test output to command line with RSpec,5135,thefonso,Arturo Herrero,1341508544,1448762288,1365557010,https://stackoverflow.com/questions/11349270/test-output-to-command-line-with-rspec,"<p>Here's a pretty good way to do this. Copied from the <a href=""https://github.com/cldwalker/hirb/blob/master/test/test_helper.rb"" rel=""noreferrer"">hirb test_helper source</a>:</p>

<pre><code>def capture_stdout(&amp;block)
  original_stdout = $stdout
  $stdout = fake = StringIO.new
  begin
    yield
  ensure
    $stdout = original_stdout
  end
  fake.string
end
</code></pre>

<p>Use like this:</p>

<pre><code>output = capture_stdout { Hello.new.speak }
output.should == ""Hello from RSpec\n""
</code></pre>
",Casper,Casper,1341509974,1362689401,1362689401
http://stackoverflow.com/a/11349904/1694896,How to force printf to return a negative value in c?,968,Nitish,another.anon.coward,1341510926,1341513617,1341511419,https://stackoverflow.com/questions/11349838/how-to-force-printf-to-return-a-negative-value-in-c,"<p>Invoke an encoding error:</p>

<pre><code>int ret = 0;
ret = printf(""%lc"", (wint_t) -1);
printf(""%d\n"", ret);
</code></pre>
",ouah,ouah,1341511163,1341512454,1341512454
http://stackoverflow.com/a/1136617/50335,std::endl is of unknown type when overloading operator&lt;&lt;,20807,Kazoom,GManNickG,1247695603,1486336330,1247695821,https://stackoverflow.com/questions/1134388/stdendl-is-of-unknown-type-when-overloading-operator,"<p>The problem is that <code>std::endl</code> is a function template, as your operator <code>&lt;&lt;</code>
is. So when you write:</p>

<pre><code>my_stream &lt;&lt; endl;
</code></pre>

<p>you'll like the compiler to deduce the template parameters for the operator
as well as for <code>endl</code>. This isn't possible.</p>

<p>So you have to write additional, non template, overloads of operator <code>&lt;&lt;</code> to
work with manipulators. Their prototype will look like:</p>

<pre><code>UIStream&amp; operator&lt;&lt;(UIStream&amp; os, std::ostream&amp; (*pf)(std::ostream&amp;));
</code></pre>

<p>(there are two others, replacing <code>std::ostream</code> by <code>std::basic_ios&lt;char&gt;</code> and
<code>std::ios_base</code>, which you have also to provide if you want to allow all
manipulators) and their implementation will be very similar to the one of
your templates.  In fact, so similar that you can use your template for
implementation like this:</p>

<pre><code>typedef std::ostream&amp; (*ostream_manipulator)(std::ostream&amp;);
UIStream&amp; operator&lt;&lt;(UIStream&amp; os, ostream_manipulator pf)
{
   return operator&lt;&lt; &lt;ostream_manipulator&gt; (os, pf);
}
</code></pre>

<p>A final note, often writing a custom <code>streambuf</code> is often a better way to
achieve what one try to achieve applying to technique you are using.</p>
",AProgrammer,Omar Ali,1247738838,1486336330,1486336330
http://stackoverflow.com/a/11381730/2608858,Detecting a mobile browser,856808,ave,John Slegers,1341735201,1561444649,1525170886,https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser,"<h2>Using Regex (from <a href=""http://detectmobilebrowsers.com"" rel=""noreferrer"">detectmobilebrowsers.com</a>):</h2>

<p>Here's a function that uses an insanely long and comprehensive regex which returns a true or false value depending on whether or not the user is browsing with a mobile.</p>

<pre><code>window.mobilecheck = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};
</code></pre>

<p>For those wishing to include tablets in this test (though arguably, you shouldn't), you can use the following function:</p>

<pre><code>window.mobileAndTabletcheck = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};
</code></pre>

<hr>

<h2>The Original Answer</h2>

<p>You can do this by simply running through a list of devices and checking if the useragent matches anything like so:</p>

<pre><code>function detectmob() { 
 if( navigator.userAgent.match(/Android/i)
 || navigator.userAgent.match(/webOS/i)
 || navigator.userAgent.match(/iPhone/i)
 || navigator.userAgent.match(/iPad/i)
 || navigator.userAgent.match(/iPod/i)
 || navigator.userAgent.match(/BlackBerry/i)
 || navigator.userAgent.match(/Windows Phone/i)
 ){
    return true;
  }
 else {
    return false;
  }
}
</code></pre>

<p>However since you believe that this method is unreliable, You could assume that any device that had a resolution of 800x600 or less was a mobile device too, narrowing your target even more (although these days many mobile devices have much greater resolutions than this)</p>

<p>i.e </p>

<pre><code>function detectmob() {
   if(window.innerWidth &lt;= 800 &amp;&amp; window.innerHeight &lt;= 600) {
     return true;
   } else {
     return false;
   }
}
</code></pre>

<p><strong>Reference:</strong> </p>

<ul>
<li><a href=""http://www.quirksmode.org/js/detect.html"" rel=""noreferrer"">Detecting Browser and Devices with javascript</a></li>
</ul>
",Michael Zaporozhets,Tiesselune,1341735862,1472203563,1472203563
http://stackoverflow.com/a/11381730/989439,Detecting a mobile browser,856808,ave,John Slegers,1341735201,1561444649,1525170886,https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser,"<h2>Using Regex (from <a href=""http://detectmobilebrowsers.com"" rel=""noreferrer"">detectmobilebrowsers.com</a>):</h2>

<p>Here's a function that uses an insanely long and comprehensive regex which returns a true or false value depending on whether or not the user is browsing with a mobile.</p>

<pre><code>window.mobilecheck = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};
</code></pre>

<p>For those wishing to include tablets in this test (though arguably, you shouldn't), you can use the following function:</p>

<pre><code>window.mobileAndTabletcheck = function() {
  var check = false;
  (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
  return check;
};
</code></pre>

<hr>

<h2>The Original Answer</h2>

<p>You can do this by simply running through a list of devices and checking if the useragent matches anything like so:</p>

<pre><code>function detectmob() { 
 if( navigator.userAgent.match(/Android/i)
 || navigator.userAgent.match(/webOS/i)
 || navigator.userAgent.match(/iPhone/i)
 || navigator.userAgent.match(/iPad/i)
 || navigator.userAgent.match(/iPod/i)
 || navigator.userAgent.match(/BlackBerry/i)
 || navigator.userAgent.match(/Windows Phone/i)
 ){
    return true;
  }
 else {
    return false;
  }
}
</code></pre>

<p>However since you believe that this method is unreliable, You could assume that any device that had a resolution of 800x600 or less was a mobile device too, narrowing your target even more (although these days many mobile devices have much greater resolutions than this)</p>

<p>i.e </p>

<pre><code>function detectmob() {
   if(window.innerWidth &lt;= 800 &amp;&amp; window.innerHeight &lt;= 600) {
     return true;
   } else {
     return false;
   }
}
</code></pre>

<p><strong>Reference:</strong> </p>

<ul>
<li><a href=""http://www.quirksmode.org/js/detect.html"" rel=""noreferrer"">Detecting Browser and Devices with javascript</a></li>
</ul>
",Michael Zaporozhets,Tiesselune,1341735862,1472203563,1472203563
http://stackoverflow.com/a/1142879/473672,Merge some list items in a Python List,94147,Leslie,Trilarion,1247832185,1553122304,1354187441,https://stackoverflow.com/questions/1142851/merge-some-list-items-in-a-python-list,"<p>On what basis should the merging take place? Your question is rather vague. Also, I assume a, b, ..., f are supposed to be strings, that is, 'a', 'b', ..., 'f'.</p>

<pre><code>&gt;&gt;&gt; x = ['a', 'b', 'c', 'd', 'e', 'f', 'g']
&gt;&gt;&gt; x[3:6] = [''.join(x[3:6])]
&gt;&gt;&gt; x
['a', 'b', 'c', 'def', 'g']
</code></pre>

<p>Check out the documentation on <a href=""http://docs.python.org/3.0/library/stdtypes.html#sequence-types-str-bytes-bytearray-list-tuple-range"" rel=""noreferrer"">sequence types</a>, specifically on <a href=""http://docs.python.org/3.0/library/stdtypes.html#mutable-sequence-types"" rel=""noreferrer"">mutable sequence types</a>. And perhaps also on <a href=""http://docs.python.org/3.0/library/stdtypes.html#string-methods"" rel=""noreferrer"">string methods</a>.</p>
",Stephan202,,1247832495,1247832495,0
http://stackoverflow.com/a/11433067/213042,Javascript: how to dynamically create nested objects using object names given by an array,55690,David,Brian Webster,1301478334,1533428570,1377280488,https://stackoverflow.com/questions/5484673/javascript-how-to-dynamically-create-nested-objects-using-object-names-given-by,"<p>Put in a function, short and fast (no recursion).  </p>

<pre><code>var createNestedObject = function( base, names ) {
    for( var i = 0; i &lt; names.length; i++ ) {
        base = base[ names[i] ] = base[ names[i] ] || {};
    }
};

// Usage:
createNestedObject( window, [""shapes"", ""triangle"", ""points""] );
// Now window.shapes.triangle.points is an empty object, ready to be used.
</code></pre>

<p><em>It skips already existing parts of the hierarchy. Useful if you are not sure whether the hierarchy was already created.</em></p>

<p>Or:</p>

<p>A fancier version where you can directly assign the value to the last object in the hierarchy, and you can chain function calls because it returns the last object.</p>

<pre><code>// Function: createNestedObject( base, names[, value] )
//   base: the object on which to create the hierarchy
//   names: an array of strings contaning the names of the objects
//   value (optional): if given, will be the last object in the hierarchy
// Returns: the last object in the hierarchy
var createNestedObject = function( base, names, value ) {
    // If a value is given, remove the last name and keep it for later:
    var lastName = arguments.length === 3 ? names.pop() : false;

    // Walk the hierarchy, creating new objects where needed.
    // If the lastName was removed, then the last object is not set yet:
    for( var i = 0; i &lt; names.length; i++ ) {
        base = base[ names[i] ] = base[ names[i] ] || {};
    }

    // If a value was given, set it to the last name:
    if( lastName ) base = base[ lastName ] = value;

    // Return the last object in the hierarchy:
    return base;
};

// Usages:

createNestedObject( window, [""shapes"", ""circle""] );
// Now window.shapes.circle is an empty object, ready to be used.

var obj = {}; // Works with any object other that window too
createNestedObject( obj, [""shapes"", ""rectangle"", ""width""], 300 );
// Now we have: obj.shapes.rectangle.width === 300

createNestedObject( obj, ""shapes.rectangle.height"".split('.'), 400 );
// Now we have: obj.shapes.rectangle.height === 400
</code></pre>

<p>Note: if your hierarchy needs to be built from values other that standard objects (ie. not <code>{}</code>), see also TimDog's answer below.</p>

<p>Edit: uses regular loops instead of <code>for...in</code> loops. It's safer in cases where a library modifies the Array prototype.</p>
",jlgrall,jlgrall,1342011078,1517148536,1517148536
http://stackoverflow.com/a/11448009/1183453,How to download multiple files in one shot in IE,8437,user666194,Constantinius,1300459535,1536945372,1338280899,https://stackoverflow.com/questions/5353630/how-to-download-multiple-files-in-one-shot-in-ie,"<p>I've used the following code to download multiple files in IE and Chrome</p>

<pre><code>function downloadFile(url)
{
    var iframe = document.createElement(""iframe"");
    iframe.src = url;
    iframe.style.display = ""none"";
    document.body.appendChild(iframe);
}

function downloadFiles(urls)
{
    downloadFile(urls[0]);
    if (urls.length &gt; 1)
        window.setTimeout(function () { downloadFiles(urls.slice(1)) }, 1000);
}
</code></pre>

<p>You pass an array of URLs to the downloadFiles() function, which will call downloadFile() for each with a short delay between. The delay seems to be the key to getting it to work!</p>
",Darren,,1342082397,1342082397,0
http://stackoverflow.com/a/11456468/654755,How can I exclude directories matching certain patterns from the output of the Linux &#39;find&#39; command?,7750,phonetagger,phonetagger,1342109906,1522085353,1342112902,https://stackoverflow.com/questions/11456200/how-can-i-exclude-directories-matching-certain-patterns-from-the-output-of-the-l,"<p>This works for me:</p>

<pre><code>find . -regextype posix-egrep -regex '.+\.(c|cpp|h)$' -not -path '*/generated/*' \
       -not -path '*/deploy/*' -print0 | xargs -0 ls -L1d
</code></pre>

<p>Changes from your version are minimal: I added exclusions of certain path patterns separately, because that's easier, and I single-quote things to hide them from shell interpolation.</p>

<p>The event not found is because <code>!</code> is being interpreted as a request for history expansion by <code>bash</code>. The fix is to use single quotes instead of double quotes.</p>

<p>Pop quiz: What characters are special inside of a single-quoted string in <code>sh</code>?</p>

<p>Answer: <strong><em>Only</em></strong> <code>'</code> is special (it ends the string). That's the ultimate safety. </p>

<p><code>grep</code> with <code>-Z</code> (sometimes known as <code>--null</code>) makes <code>grep</code> <strong>output</strong> terminated with a null character instead of newline. What you wanted was <code>-z</code> (sometimes known as <code>--null-data</code>) which causes <code>grep</code> to interpret a null character in its <strong>input</strong> as end-of-line instead of a newline character. This makes it work as expected with the output of <code>find ... -print0</code>, which adds a null character after each file name instead of a newline.</p>

<p>If you had done it this way:</p>

<pre><code>find . -regextype posix-egrep -regex '.+\.(c|cpp|h)$' -print0 | \
    grep -vzZ generated | grep -vzZ deploy | xargs -0 ls -1Ld
</code></pre>

<p>Then the input <em>and</em> output of <code>grep</code> would have been null-delimited and it would have worked correctly... until one of your source files began being named <code>deployment.cpp</code> and started getting ""mysteriously"" excluded by your script.</p>

<p>Incidentally, here's a nicer way to generate your testcase file set.</p>

<pre><code>while read -r file ; do
    mkdir -p ""${file%/*}""
    touch ""$file""
done &lt;&lt;'DATA'
./barney/generated/bam bam.h
./barney/src/bam bam.cpp
./barney/deploy/bam bam.h
./barney/inc/bam bam.h
./fred/generated/dino.h
./fred/src/dino.cpp
./fred/deploy/dino.h
./fred/inc/dino.h
DATA
</code></pre>

<p>Since I did this anyway to verify I figured I'd share it and save you from repetition. Don't do anything twice! That's what computers are for.</p>
",Sorpigal,Sorpigal,1342110888,1342112618,1342112618
http://stackoverflow.com/a/11461558/1664216,Handle OmniAuth::Error (invalid_credentials) for Identity Login,8790,andrewhl,andrewhl,1342129056,1346736308,1342132317,https://stackoverflow.com/questions/11461084/handle-omniautherror-invalid-credentials-for-identity-login,"<p>This appears to be an intentional development mode result. Scroll to ""<code>OmniAuth::FailureEndpoint does not redirect in development mode</code>"" in the <a href=""https://github.com/intridea/omniauth/wiki/FAQ"">FAQ</a>.</p>
",jdl,,1342131550,1342131550,0
http://stackoverflow.com/a/1147952/1460422,How do I determine the extension(s) associated with a MIME type in PHP?,21008,Alexander Trauzzi,chaos,1247933824,1506576815,1249315728,https://stackoverflow.com/questions/1147931/how-do-i-determine-the-extensions-associated-with-a-mime-type-in-php,"<p>Not built-in, but it's not terribly hard to roll your own:</p>

<pre><code>function system_extension_mime_types() {
    # Returns the system MIME type mapping of extensions to MIME types, as defined in /etc/mime.types.
    $out = array();
    $file = fopen('/etc/mime.types', 'r');
    while(($line = fgets($file)) !== false) {
        $line = trim(preg_replace('/#.*/', '', $line));
        if(!$line)
            continue;
        $parts = preg_split('/\s+/', $line);
        if(count($parts) == 1)
            continue;
        $type = array_shift($parts);
        foreach($parts as $part)
            $out[$part] = $type;
    }
    fclose($file);
    return $out;
}

function system_extension_mime_type($file) {
    # Returns the system MIME type (as defined in /etc/mime.types) for the filename specified.
    #
    # $file - the filename to examine
    static $types;
    if(!isset($types))
        $types = system_extension_mime_types();
    $ext = pathinfo($file, PATHINFO_EXTENSION);
    if(!$ext)
        $ext = $file;
    $ext = strtolower($ext);
    return isset($types[$ext]) ? $types[$ext] : null;
}

function system_mime_type_extensions() {
    # Returns the system MIME type mapping of MIME types to extensions, as defined in /etc/mime.types (considering the first
    # extension listed to be canonical).
    $out = array();
    $file = fopen('/etc/mime.types', 'r');
    while(($line = fgets($file)) !== false) {
        $line = trim(preg_replace('/#.*/', '', $line));
        if(!$line)
            continue;
        $parts = preg_split('/\s+/', $line);
        if(count($parts) == 1)
            continue;
        $type = array_shift($parts);
        if(!isset($out[$type]))
            $out[$type] = array_shift($parts);
    }
    fclose($file);
    return $out;
}

function system_mime_type_extension($type) {
    # Returns the canonical file extension for the MIME type specified, as defined in /etc/mime.types (considering the first
    # extension listed to be canonical).
    #
    # $type - the MIME type
    static $exts;
    if(!isset($exts))
        $exts = system_mime_type_extensions();
    return isset($exts[$type]) ? $exts[$type] : null;
}
</code></pre>
",chaos,,1247934565,1247934565,0
http://stackoverflow.com/a/11487658/161801,Making OS X Installer Packages like a Pro - Xcode Developer ID ready pkg,142776,catlan,Shaun Wilson,1342302188,1547329497,1481756908,https://stackoverflow.com/questions/11487596/making-os-x-installer-packages-like-a-pro-xcode-developer-id-ready-pkg,"<p>Our example project has two build targets: HelloWorld.app and Helper.app. We make a <em>component package</em> for each and combine them into a <em>product archive</em>.</p>

<p>A <em>component package</em> contains payload to be installed by the OS X Installer. Although a component
     package can be installed on its own, it is typically incorporated into a <em>product archive</em>.</p>

<h2>Our tools: <a href=""http://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man1/pkgbuild.1.html"" rel=""noreferrer"">pkgbuild</a>, <a href=""https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/productbuild.1.html"" rel=""noreferrer"">productbuild</a>, and <a href=""https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/pkgutil.1.html"" rel=""noreferrer"">pkgutil</a></h2>

<p>After a successful ""Build and Archive"" open $BUILT_PRODUCTS_DIR in the Terminal.</p>

<pre><code>$ cd ~/Library/Developer/Xcode/DerivedData/.../InstallationBuildProductsLocation
$ pkgbuild --analyze --root ./HelloWorld.app HelloWorldAppComponents.plist
$ pkgbuild --analyze --root ./Helper.app HelperAppComponents.plist
</code></pre>

<p>This give us the component-plist, you find the value description in the <a href=""http://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man1/pkgbuild.1.html"" rel=""noreferrer"">""Component Property List""</a> section. <em>pkgbuild -root</em> generates the <em>component packages</em>, if you don't need to change any of the default properties you can omit the <em>--component-plist</em> parameter in the following command.</p>

<p><em>productbuild --synthesize</em> results in a <a href=""https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/DistributionDefinitionRef/Chapters/Introduction.html#//apple_ref/doc/uid/TP40005370-CH1-DontLinkElementID_16"" rel=""noreferrer"">Distribution Definition</a>.</p>

<pre><code>$ pkgbuild --root ./HelloWorld.app \
    --component-plist HelloWorldAppComponents.plist \
    HelloWorld.pkg
$ pkgbuild --root ./Helper.app \
    --component-plist HelperAppComponents.plist \
    Helper.pkg
$ productbuild --synthesize \
    --package HelloWorld.pkg --package Helper.pkg \
    Distribution.xml 
</code></pre>

<p>In the <a href=""https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/DistributionDefinitionRef/Chapters/Introduction.html#//apple_ref/doc/uid/TP40005370-CH1-DontLinkElementID_16"" rel=""noreferrer"">Distribution.xml</a> you can change things like title, background, welcome, readme, license, and so on. You turn your <em>component packages</em> and distribution definition with this command into a <em>product archive</em>:</p>

<pre><code>$ productbuild --distribution ./Distribution.xml \
    --package-path . \
    ./Installer.pkg
</code></pre>

<p>I recommend to take a look at <a href=""http://apple.com/itunes/download/"" rel=""noreferrer"">iTunes Installers</a> Distribution.xml to see what is possible. You can extract ""Install iTunes.pkg"" with:</p>

<pre><code>$ pkgutil --expand ""Install iTunes.pkg"" ""Install iTunes""
</code></pre>

<h2>Lets put it together</h2>

<p>I usually have a folder named Package in my project which includes things like Distribution.xml, component-plists, resources and scripts.</p>

<p>Add a <em>Run Script Build Phase</em> named ""Generate Package"", which is set to <em>Run script only when installing</em>:</p>

<pre><code>VERSION=$(defaults read ""${BUILT_PRODUCTS_DIR}/${FULL_PRODUCT_NAME}/Contents/Info"" CFBundleVersion)

PACKAGE_NAME=`echo ""$PRODUCT_NAME"" | sed ""s/ /_/g""`
TMP1_ARCHIVE=""${BUILT_PRODUCTS_DIR}/$PACKAGE_NAME-tmp1.pkg""
TMP2_ARCHIVE=""${BUILT_PRODUCTS_DIR}/$PACKAGE_NAME-tmp2""
TMP3_ARCHIVE=""${BUILT_PRODUCTS_DIR}/$PACKAGE_NAME-tmp3.pkg""
ARCHIVE_FILENAME=""${BUILT_PRODUCTS_DIR}/${PACKAGE_NAME}.pkg""

pkgbuild --root ""${INSTALL_ROOT}"" \
    --component-plist ""./Package/HelloWorldAppComponents.plist"" \
    --scripts ""./Package/Scripts"" \
    --identifier ""com.test.pkg.HelloWorld"" \
    --version ""$VERSION"" \
    --install-location ""/"" \
    ""${BUILT_PRODUCTS_DIR}/HelloWorld.pkg""
pkgbuild --root ""${BUILT_PRODUCTS_DIR}/Helper.app"" \
    --component-plist ""./Package/HelperAppComponents.plist"" \
    --identifier ""com.test.pkg.Helper"" \
    --version ""$VERSION"" \
    --install-location ""/"" \
    ""${BUILT_PRODUCTS_DIR}/Helper.pkg""
productbuild --distribution ""./Package/Distribution.xml""  \
    --package-path ""${BUILT_PRODUCTS_DIR}"" \
    --resources ""./Package/Resources"" \
    ""${TMP1_ARCHIVE}""

pkgutil --expand ""${TMP1_ARCHIVE}"" ""${TMP2_ARCHIVE}""

# Patches and Workarounds

pkgutil --flatten ""${TMP2_ARCHIVE}"" ""${TMP3_ARCHIVE}""

productsign --sign ""Developer ID Installer: John Doe"" \
    ""${TMP3_ARCHIVE}"" ""${ARCHIVE_FILENAME}""
</code></pre>

<p>If you don't have to change the package after it's generated with <em>productbuild</em> you could get rid of the <code>pkgutil --expand</code> and <code>pkgutil --flatten</code> steps. Also you could use the <em>--sign</em> paramenter on <em>productbuild</em> instead of running <em>productsign</em>.</p>

<h2>Sign an OS X Installer</h2>

<p>Packages are signed with the <em>Developer ID Installer</em> certificate which you can download from <a href=""https://developer.apple.com/account/mac/certificate/"" rel=""noreferrer"">Developer Certificate Utility</a>. </p>

<p>They signing is done with the <code>--sign ""Developer ID Installer: John Doe""</code> parameter of <em>pkgbuild</em>, <em>productbuild</em> or <em>productsign</em>.</p>

<p>Note that if you are going to create a signed <em>product archive</em> using productbuild, there is no reason to sign the <em>component packages</em>.</p>

<p><img src=""https://i.stack.imgur.com/57yTq.png"" alt=""Developer Certificate Utility""></p>

<h2>All the way: Copy Package into Xcode Archive</h2>

<p>To copy something into the Xcode Archive we can't use the <em>Run Script Build Phase</em>. For this we need to use a Scheme Action.</p>

<p>Edit Scheme and expand Archive. Then click post-actions and add a <em>New Run Script Action</em>:</p>

<p>In Xcode 6:</p>

<pre><code>#!/bin/bash

PACKAGES=""${ARCHIVE_PATH}/Packages""

PACKAGE_NAME=`echo ""$PRODUCT_NAME"" | sed ""s/ /_/g""`
ARCHIVE_FILENAME=""$PACKAGE_NAME.pkg""
PKG=""${OBJROOT}/../BuildProductsPath/${CONFIGURATION}/${ARCHIVE_FILENAME}""

if [ -f ""${PKG}"" ]; then
    mkdir ""${PACKAGES}""
    cp -r ""${PKG}"" ""${PACKAGES}""
fi
</code></pre>

<p>In Xcode 5, use this value for <code>PKG</code> instead:</p>

<pre><code>PKG=""${OBJROOT}/ArchiveIntermediates/${TARGET_NAME}/BuildProductsPath/${CONFIGURATION}/${ARCHIVE_FILENAME}""
</code></pre>

<p>In case your version control doesn't store Xcode Scheme information I suggest to add this as shell script to your project so you can simple restore the action by dragging the script from the workspace into the post-action.</p>

<h2>Scripting</h2>

<p>There are two different kinds of scripting: <a href=""https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/InstallerJavaScriptRef/index.html#//apple_ref/doc/uid/TP40005137"" rel=""noreferrer"">JavaScript in Distribution Definition Files</a> and Shell Scripts.</p>

<p>The best documentation about Shell Scripts I found in <a href=""http://s.sudre.free.fr/Stuff/PackageMaker_Howto.html"" rel=""noreferrer"">WhiteBox - PackageMaker How-to</a>, but read this with caution because it refers to the old package format.</p>

<h2>Additional Reading</h2>

<ul>
<li><a href=""http://s.sudre.free.fr/Stuff/Ivanhoe/FLAT.html"" rel=""noreferrer"">Flat Package Format - The missing documentation</a></li>
<li><a href=""http://simx.me/technonova/tips/packagemaker_and_installer.html"" rel=""noreferrer"">Installer Problems and Solutions</a></li>
<li><a href=""http://managingosx.wordpress.com/2012/07/05/stupid-tricks-with-pkgbuild/"" rel=""noreferrer"">Stupid tricks with pkgbuild</a></li>
<li><a href=""https://macops.ca/flat-packages-persisting-obsolescence/"" rel=""noreferrer"">persisting obsolescence</a></li>
</ul>

<h2>Known Issues and Workarounds</h2>

<p>Destination Select Pane</p>

<p>The user is presented with the destination select option with only a single choice - ""Install for all users of this computer"". The option appears visually selected, but the user needs to click on it in order to proceed with the installation, causing some confusion.</p>

<p><img src=""https://i.stack.imgur.com/bUMya.png"" alt=""Example showing the installer bug""></p>

<p>Apples Documentation recommends to use <code>&lt;domains enable_anywhere ... /&gt;</code> but this triggers the new more buggy Destination Select Pane which Apple doesn't use in any of their Packages.</p>

<p>Using the deprecate <code>&lt;options rootVolumeOnly=""true"" /&gt;</code> give you the old Destination Select Pane.
<img src=""https://i.stack.imgur.com/GwGFs.png"" alt=""Example showing old Destination Select Pane""></p>

<hr>

<p>You want to install items into the current users home folder.</p>

<p>Short answer: DO NOT TRY IT!</p>

<p>Long answer: REALLY; DO NOT TRY IT! Read <a href=""http://simx.me/technonova/tips/packagemaker_and_installer.html"" rel=""noreferrer"">Installer Problems and Solutions</a>. You know what I did even after reading this? I was stupid enough to try it. Telling myself I'm sure that they fixed the issues in 10.7 or 10.8.</p>

<p>First of all I saw from time to time the above mentioned Destination Select Pane Bug. That should have stopped me, but I ignored it. If you don't want to spend the week after you released your software answering support e-mails that they have to click once the nice blue selection DO NOT use this.</p>

<p>You are now thinking that your users are smart enough to figure the panel out, aren't you? Well here is another thing about home folder installation, THEY DON'T WORK!</p>

<p>I tested it for two weeks on around 10 different machines with different OS versions and what not, and it never failed. So I shipped it. Within an hour of the release I heart back from users who just couldn't install it. The logs hinted to permission issues you are not gonna be able to fix.</p>

<p>So let's repeat it one more time: We do not use the Installer for home folder installations!</p>

<hr>

<p>RTFD for Welcome, Read-me, License and Conclusion is not accepted by <code>productbuild</code>.</p>

<p>Installer supported since the beginning RTFD files to make pretty Welcome screens with images, but productbuild doesn't accept them.</p>

<p>Workarounds: 
 Use a dummy rtf file and replace it in the package by after <code>productbuild</code> is done.</p>

<p>Note: You can also have Retina images inside the RTFD file. Use multi-image tiff files for this: <code>tiffutil -cat Welcome.tif Welcome_2x.tif -out FinalWelcome.tif</code>. More <a href=""http://s.sudre.free.fr/Stuff/Installer/Unreleased_Notes/10.7_Retina.html"" rel=""noreferrer"">details</a>.</p>

<hr>

<p>Starting an application when the installation is done with a <em>BundlePostInstallScriptPath</em> script:</p>

<pre><code>#!/bin/bash

LOGGED_IN_USER_ID=`id -u ""${USER}""`

if [ ""${COMMAND_LINE_INSTALL}"" = """" ]
then
    /bin/launchctl asuser ""${LOGGED_IN_USER_ID}"" /usr/bin/open -g PATH_OR_BUNDLE_ID
fi

exit 0
</code></pre>

<p>It is important to run the app as logged in user, not as the installer user. This is done with <em>launchctl asuser uid path</em>. Also we only run it when it is not a command line installation, done with <em>installer</em> tool or <em>Apple Remote Desktop</em>. </p>

<hr>
",catlan,catlan,1342302885,1537904906,1537904906
http://stackoverflow.com/a/11493752/489607,Jelly Bean DatePickerDialog --- is there a way to cancel?,27937,davidcesarino,Community,1342059920,1488462254,1495535390,https://stackoverflow.com/questions/11444238/jelly-bean-datepickerdialog-is-there-a-way-to-cancel,"<p><em>Note: <strong><a href=""https://code.google.com/p/android/issues/detail?id=34833#c39"">Fixed as of Lollipop</a>, <a href=""https://android.googlesource.com/platform/frameworks/base/+/android-5.0.0_r1/core/java/android/app/DatePickerDialog.java"">source here</a>. Automated <a href=""https://gist.github.com/davidcesarino/ff7c1336e9daedd15e7f"">class for use in clients</a> (compatible with all Android versions) updated as well.</em></strong></p>

<h1>TL;DR: 1-2-3 dead easy steps for a global solution:</h1>

<ol>
<li>Download <a href=""https://gist.github.com/davidcesarino/ff7c1336e9daedd15e7f"">this</a> class.</li>
<li>Implement <code>OnDateSetListener</code> in your activity (or change the class to suit your needs).</li>
<li><p>Trigger the dialog with this code (in this sample, I use it inside a <code>Fragment</code>):</p>

<pre><code>Bundle b = new Bundle();
b.putInt(DatePickerDialogFragment.YEAR, 2012);
b.putInt(DatePickerDialogFragment.MONTH, 6);
b.putInt(DatePickerDialogFragment.DATE, 17);
DialogFragment picker = new DatePickerDialogFragment();
picker.setArguments(b);
picker.show(getActivity().getSupportFragmentManager(), ""frag_date_picker"");
</code></pre></li>
</ol>

<p><strong>And that's all it takes!</strong> The reason I still keep my answer as ""accepted"" is because I still prefer my solution since it has a very small footprint in client code, it addresses the fundamental issue (the listener being called in the framework class), works fine across config changes and it routes the code logic to the default implementation in previous Android versions not plagued by this bug (see class source).</p>

<h1><em>Original answer (kept for historical and didactic reasons):</em></h1>

<h1>Bug source</h1>

<p>OK, looks like it's indeed a bug and someone else already filled it. <a href=""http://code.google.com/p/android/issues/detail?id=34833"">Issue 34833</a>.</p>

<p>I've found that the problem is possibly in <code>DatePickerDialog.java</code>. Where it reads:</p>

<pre><code>private void tryNotifyDateSet() {
    if (mCallBack != null) {
        mDatePicker.clearFocus();
        mCallBack.onDateSet(mDatePicker, mDatePicker.getYear(),
                mDatePicker.getMonth(), mDatePicker.getDayOfMonth());
    }
}

@Override
protected void onStop() {
    tryNotifyDateSet();
    super.onStop();
}
</code></pre>

<p>I'd guess it could have been:</p>

<pre><code>@Override
protected void onStop() {
    // instead of the full tryNotifyDateSet() call:
    if (mCallBack != null) mDatePicker.clearFocus();
    super.onStop();
}
</code></pre>

<p>Now if someone can tell me how I can propose a patch/bug report to Android, I'd be glad to. Meanwhile, I suggested a possible fix (simple) as an attached version of <code>DatePickerDialog.java</code> in the Issue there.</p>

<h1>Concept to avoid the bug</h1>

<p><strong>Set the listener to <code>null</code> in the constructor and create your own <code>BUTTON_POSITIVE</code> button later on</strong>. That's it, details below.</p>

<p>The problem happens because <code>DatePickerDialog.java</code>, as you can see in the source, calls a global variable (<code>mCallBack</code>) that stores the listener that was passed in the constructor:</p>

<pre><code>    /**
 * @param context The context the dialog is to run in.
 * @param callBack How the parent is notified that the date is set.
 * @param year The initial year of the dialog.
 * @param monthOfYear The initial month of the dialog.
 * @param dayOfMonth The initial day of the dialog.
 */
public DatePickerDialog(Context context,
        OnDateSetListener callBack,
        int year,
        int monthOfYear,
        int dayOfMonth) {
    this(context, 0, callBack, year, monthOfYear, dayOfMonth);
}

    /**
 * @param context The context the dialog is to run in.
 * @param theme the theme to apply to this dialog
 * @param callBack How the parent is notified that the date is set.
 * @param year The initial year of the dialog.
 * @param monthOfYear The initial month of the dialog.
 * @param dayOfMonth The initial day of the dialog.
 */
public DatePickerDialog(Context context,
        int theme,
        OnDateSetListener callBack,
        int year,
        int monthOfYear,
        int dayOfMonth) {
    super(context, theme);

    mCallBack = callBack;
    // ... rest of the constructor.
}
</code></pre>

<p>So, the trick is to provide a <code>null</code> listener to be stored as the listener, and then roll your own set of buttons (below is the original code from #1, updated):</p>

<pre><code>    DatePickerDialog picker = new DatePickerDialog(
        this,
        null, // instead of a listener
        2012, 6, 15);
    picker.setCancelable(true);
    picker.setCanceledOnTouchOutside(true);
    picker.setButton(DialogInterface.BUTTON_POSITIVE, ""OK"",
        new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Log.d(""Picker"", ""Correct behavior!"");
            }
        });
    picker.setButton(DialogInterface.BUTTON_NEGATIVE, ""Cancel"", 
        new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                Log.d(""Picker"", ""Cancel!"");
            }
        });
picker.show();
</code></pre>

<p>Now it will work because of the possible correction that I posted above. </p>

<p><strong>And since <code>DatePickerDialog.java</code> checks for a <code>null</code> whenever it reads <code>mCallback</code> (<a href=""http://grepcode.com/search?query=DatePickerDialog&amp;start=0&amp;entity=type&amp;n="">since the days of API 3/1.5 it seems</a> --- can't check Honeycomb of course), it won't trigger the exception.</strong> Considering Lollipop fixed the issue, I'm not going to look into it: just use the default implementation (covered in the class I provided).</p>

<p>At first I was afraid of not calling the <code>clearFocus()</code>, but I've tested here and the Log lines were clean. So that line I proposed may not even be necessary after all, but I don't know.</p>

<h1>Compatibility with previous API levels <em>(edited)</em></h1>

<p>As I pointed in the comment below, that was a concept, and you can <a href=""https://gist.github.com/davidcesarino/ff7c1336e9daedd15e7f"">download the class I'm using from my Google Drive account</a>. The way I used, the default system implementation is used on versions not affected by the bug.</p>

<p>I took a few assumptions (button names etc.) that are suitable for my needs because I wanted to reduce boilerplate code in client classes to a minimum. Full usage example:</p>

<pre><code>class YourActivity extends SherlockFragmentActivity implements OnDateSetListener

// ...

Bundle b = new Bundle();
b.putInt(DatePickerDialogFragment.YEAR, 2012);
b.putInt(DatePickerDialogFragment.MONTH, 6);
b.putInt(DatePickerDialogFragment.DATE, 17);
DialogFragment picker = new DatePickerDialogFragment();
picker.setArguments(b);
picker.show(getActivity().getSupportFragmentManager(), ""fragment_date_picker"");
</code></pre>
",davidcesarino,davidcesarino,1342370801,1449640120,1449640120
http://stackoverflow.com/a/11493777/741316,How can I pickle a nested class in python?,17581,prinzdezibel,,1261502736,1509815855,0,https://stackoverflow.com/questions/1947904/how-can-i-pickle-a-nested-class-in-python,"<p>I know this is a <strong>very</strong> old question, but I have never explicitly seen a satisfactory solution to this question other than the obvious, and most likely correct, answer to re-structure your code.</p>

<p>Unfortunately, it is not always practical to do such a thing, in which case as a very last resort, it <strong>is</strong> possible to pickle instances of classes which are defined inside another class. </p>

<p>The python documentation for the <a href=""http://docs.python.org/library/pickle.html?highlight=__reduce__#object.__reduce__"" rel=""noreferrer""><code>__reduce__</code> function</a> states that you can return</p>

<blockquote>
  <p>A callable object that will be called to create the initial version of the object. The next element of the tuple will provide arguments for this callable.</p>
</blockquote>

<p>Therefore, all you need is an object which can return an instance of the appropriate class. This class <strong>must</strong> itself be picklable (hence, must live on the <code>__main__</code> level), and could be as simple as:</p>

<pre><code>class _NestedClassGetter(object):
    """"""
    When called with the containing class as the first argument, 
    and the name of the nested class as the second argument,
    returns an instance of the nested class.
    """"""
    def __call__(self, containing_class, class_name):
        nested_class = getattr(containing_class, class_name)
        # return an instance of a nested_class. Some more intelligence could be
        # applied for class construction if necessary.
        return nested_class()
</code></pre>

<p>All that is left therefore, is to return the appropriate arguments in a <code>__reduce__</code> method on FloatType:</p>

<pre><code>class WidgetType(object):

    class FloatType(object):
        def __reduce__(self):
            # return a class which can return this class when called with the 
            # appropriate tuple of arguments
            return (_NestedClassGetter(), (WidgetType, self.__class__.__name__, ))
</code></pre>

<p>The result is a class which is nested but instances can be pickled (further work is needed to dump/load the <code>__state__</code> information, but this is relatively straightforward as per the <code>__reduce__</code> documentation).</p>

<p>This same technique (with slight code modifications) can be applied for deeply nested classes.</p>

<p>A fully worked example:</p>

<pre><code>import pickle


class ParentClass(object):

    class NestedClass(object):
        def __init__(self, var1):
            self.var1 = var1

        def __reduce__(self):
            state = self.__dict__.copy()
            return (_NestedClassGetter(), 
                    (ParentClass, self.__class__.__name__, ), 
                    state,
                    )


class _NestedClassGetter(object):
    """"""
    When called with the containing class as the first argument, 
    and the name of the nested class as the second argument,
    returns an instance of the nested class.
    """"""
    def __call__(self, containing_class, class_name):
        nested_class = getattr(containing_class, class_name)

        # make an instance of a simple object (this one will do), for which we can change the
        # __class__ later on.
        nested_instance = _NestedClassGetter()

        # set the class of the instance, the __init__ will never be called on the class
        # but the original state will be set later on by pickle.
        nested_instance.__class__ = nested_class
        return nested_instance



if __name__ == '__main__':

    orig = ParentClass.NestedClass(var1=['hello', 'world'])

    pickle.dump(orig, open('simple.pickle', 'w'))

    pickled = pickle.load(open('simple.pickle', 'r'))

    print type(pickled)
    print pickled.var1
</code></pre>

<p>My final note on this is to remember what the other answers have said: </p>

<blockquote>
  <p>If you are in a position to do so, consider re-factoring your code to
  avoid the nested classes in the first place.</p>
</blockquote>
",pelson,,1342371045,1342371045,0
http://stackoverflow.com/a/1149721/3991344,How can I convert a stack trace to a string?,551151,ripper234,james.garriss,1248003103,1551800608,1457726677,https://stackoverflow.com/questions/1149703/how-can-i-convert-a-stack-trace-to-a-string,"<p>This should work:   </p>

<pre><code>StringWriter sw = new StringWriter();
e.printStackTrace(new PrintWriter(sw));
String exceptionAsString = sw.toString();
</code></pre>
",D. Wroblewski,D. Wroblewski,1248003682,1341750969,1341750969
http://stackoverflow.com/a/11508164/1190235,RGB to Hex and Hex to RGB,389729,Sindar,Micha Perakowski,1302536573,1561761460,1471713681,https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb,"<p>An alternative version of hexToRgb:</p>

<pre><code>function hexToRgb(hex) {
    var bigint = parseInt(hex, 16);
    var r = (bigint &gt;&gt; 16) &amp; 255;
    var g = (bigint &gt;&gt; 8) &amp; 255;
    var b = bigint &amp; 255;

    return r + "","" + g + "","" + b;
}
</code></pre>

<p>Edit: 3/28/2017
Here is another approach <del>that seems to be even faster</del></p>

<pre><code>function hexToRgbNew(hex) {
  var arrBuff = new ArrayBuffer(4);
  var vw = new DataView(arrBuff);
  vw.setUint32(0,parseInt(hex, 16),false);
  var arrByte = new Uint8Array(arrBuff);

  return arrByte[1] + "","" + arrByte[2] + "","" + arrByte[3];
}
</code></pre>

<p>Edit: 8/11/2017
The new approach above after more testing is not faster :(. Though it is a fun alternate way.</p>
",David,dtasev,1342454762,1521729690,1521729690
http://stackoverflow.com/a/115086/352456,Standard concise way to copy a file in Java?,256641,Peter,,1221875949,1527677452,0,https://stackoverflow.com/questions/106770/standard-concise-way-to-copy-a-file-in-java,"<p>I would avoid the use of a mega api like apache commons. This is a simplistic operation and its built into the JDK in the new NIO package. It was kind of already linked to in a previous answer, but the key method in the NIO api are the new functions ""transferTo"" and ""transferFrom"".</p>

<p><a href=""http://java.sun.com/javase/6/docs/api/java/nio/channels/FileChannel.html#transferTo(long,%20long,%20java.nio.channels.WritableByteChannel)"" rel=""noreferrer"">http://java.sun.com/javase/6/docs/api/java/nio/channels/FileChannel.html#transferTo(long,%20long,%20java.nio.channels.WritableByteChannel)</a></p>

<p>One of the linked articles shows a great way on how to integrate this function into your code, using the transferFrom:</p>

<pre><code>public static void copyFile(File sourceFile, File destFile) throws IOException {
    if(!destFile.exists()) {
        destFile.createNewFile();
    }

    FileChannel source = null;
    FileChannel destination = null;

    try {
        source = new FileInputStream(sourceFile).getChannel();
        destination = new FileOutputStream(destFile).getChannel();
        destination.transferFrom(source, 0, source.size());
    }
    finally {
        if(source != null) {
            source.close();
        }
        if(destination != null) {
            destination.close();
        }
    }
}
</code></pre>

<p>Learning NIO can be a little tricky, so you might want to just trust in this mechanic before going off and trying to learn NIO overnight. From personal experience it can be a very hard thing to learn if you don't have the experience and were introduced to IO via the java.io streams.</p>
",Josh,James P.,1222093046,1313414106,1313414106
http://stackoverflow.com/a/11558629/814354,Matplotlib - add colorbar to a sequence of line plots,35891,Rafael S. Calsaverini,Rafael S. Calsaverini,1322748134,1560197487,1322769435,https://stackoverflow.com/questions/8342549/matplotlib-add-colorbar-to-a-sequence-of-line-plots,"<p>(I know this is an old question but...) Colorbars require a <code>matplotlib.cm.ScalarMappable</code>, <code>plt.plot</code> produces lines which are not scalar mappable, therefore, in order to make a colorbar, we are going to need to make a scalar mappable. </p>

<p>Ok. So the constructor of a <code>ScalarMappable</code> takes a <code>cmap</code> and a <code>norm</code> instance. (norms scale data to the range 0-1, cmaps you have already worked with and take a number between 0-1 and returns a color). So in your case:</p>

<pre><code>import matplotlib.pyplot as plt
sm = plt.cm.ScalarMappable(cmap=my_cmap, norm=plt.normalize(min=0, max=1))
plt.colorbar(sm)
</code></pre>

<p>Because your data is in the range 0-1 already, you can simplify the <code>sm</code> creation to:</p>

<pre><code>sm = plt.cm.ScalarMappable(cmap=my_cmap)
</code></pre>

<p>Hope that helps somebody.</p>

<p><strong>EDIT</strong>: For matplotlib v1.2 or greater the code becomes:</p>

<pre><code>import matplotlib.pyplot as plt
sm = plt.cm.ScalarMappable(cmap=my_cmap, norm=plt.normalize(vmin=0, vmax=1))
# fake up the array of the scalar mappable. Urgh...
sm._A = []
plt.colorbar(sm)
</code></pre>

<p><strong>EDIT</strong>: For matplotlib v1.3 or greater the code becomes:</p>

<pre><code>import matplotlib.pyplot as plt
sm = plt.cm.ScalarMappable(cmap=my_cmap, norm=plt.Normalize(vmin=0, vmax=1))
# fake up the array of the scalar mappable. Urgh...
sm._A = []
plt.colorbar(sm)
</code></pre>

<p><strong>EDIT</strong>: For matplotlib v3.1 or greater simplifies to:</p>

<pre><code>import matplotlib.pyplot as plt
sm = plt.cm.ScalarMappable(cmap=my_cmap, norm=plt.Normalize(vmin=0, vmax=1))
plt.colorbar(sm)
</code></pre>
",pelson,ImportanceOfBeingErnest,1342692893,1560197487,1560197487
http://stackoverflow.com/a/11632982/402891,Redirect stdout to a file in Python?,396698,hayavuk,Eric Leschinski,1294879860,1549417857,1444058225,https://stackoverflow.com/questions/4675728/redirect-stdout-to-a-file-in-python,"<p>The other answers didn't cover the case where you want forked processes to share your new stdout.</p>

<p>To do that:</p>

<pre><code>from os import open, close, dup, O_WRONLY

old = dup(1)
close(1)
open(""file"", O_WRONLY) # should open on 1

..... do stuff and then restore

close(1)
dup(old) # should dup to 1
close(old) # get rid of left overs
</code></pre>
",Yam Marcovic,Thomas,1343139893,1394841841,1394841841
http://stackoverflow.com/a/11638106/1885921,Comparing mongoose _id and strings,73383,pat,Nahn,1343155684,1555150727,1383587369,https://stackoverflow.com/questions/11637353/comparing-mongoose-id-and-strings,"<p>Mongoose uses the mongodb-native driver, which uses the custom ObjectID type. You can compare ObjectIDs with the <code>.equals()</code> method. With your example, <code>results.userId.equals(AnotherMongoDocument._id)</code>. The ObjectID type also has a <code>toString()</code> method, if you wish to store a stringified version of the ObjectID in JSON format, or a cookie.</p>

<p>If you use <code>ObjectID = require(""mongodb"").ObjectID</code> (requires the mongodb-native library) you can check if <code>results.userId</code> is a valid identifier with <code>results.userId instanceof ObjectID</code>.</p>

<p>Etc.</p>
",cjohn,,1343158701,1343158701,0
http://stackoverflow.com/a/11654596/5018,How can I add or update a query string parameter?,304366,amateur,Liam,1305333998,1562756630,1504596911,https://stackoverflow.com/questions/5999118/how-can-i-add-or-update-a-query-string-parameter,"<p>I have expanded the solution and combined it with another that I found to replace/update/remove the querystring parameters based on the users input and taking the urls anchor into consideration.</p>

<p>Not supplying a value will remove the parameter, supplying one will add/update the parameter. If no URL is supplied, it will be grabbed from window.location</p>

<pre><code>function UpdateQueryString(key, value, url) {
    if (!url) url = window.location.href;
    var re = new RegExp(""([?&amp;])"" + key + ""=.*?(&amp;|#|$)(.*)"", ""gi""),
        hash;

    if (re.test(url)) {
        if (typeof value !== 'undefined' &amp;&amp; value !== null) {
            return url.replace(re, '$1' + key + ""="" + value + '$2$3');
        } 
        else {
            hash = url.split('#');
            url = hash[0].replace(re, '$1$3').replace(/(&amp;|\?)$/, '');
            if (typeof hash[1] !== 'undefined' &amp;&amp; hash[1] !== null) {
                url += '#' + hash[1];
            }
            return url;
        }
    }
    else {
        if (typeof value !== 'undefined' &amp;&amp; value !== null) {
            var separator = url.indexOf('?') !== -1 ? '&amp;' : '?';
            hash = url.split('#');
            url = hash[0] + separator + key + '=' + value;
            if (typeof hash[1] !== 'undefined' &amp;&amp; hash[1] !== null) {
                url += '#' + hash[1];
            }
            return url;
        }
        else {
            return url;
        }
    }
}
</code></pre>

<p><strong>Update</strong></p>

<p>There was a bug when removing the first parameter in the querystring, I have reworked the regex and test to include a fix.</p>

<p><strong>Second Update</strong></p>

<p>As suggested by @JarnBarends - Tweak value check to check against undefined and null to allow setting 0 values</p>

<p><strong>Third Update</strong></p>

<p>There was a bug where removing a querystring variable directly before a hashtag would lose the hashtag symbol which has been fixed</p>

<p><strong>Fourth Update</strong></p>

<p>Thanks @rooby for pointing out a regex optimization in the first RegExp object.
Set initial regex to ([?&amp;]) due to issue with using (\?|&amp;) found by @YonatanKarni</p>

<p><strong>Fifth Update</strong></p>

<p>Removing declaring hash var in if/else statement</p>
",ellemayo,Popnoodles,1343234511,1562756630,1562756630
http://stackoverflow.com/a/1165552/841644,Calculate difference in keys contained in two Python dictionaries,143428,Bhaskar,Nathan Davis,1248270193,1527192263,1440706030,https://stackoverflow.com/questions/1165352/calculate-difference-in-keys-contained-in-two-python-dictionaries,"<p>You can use set operations on the keys:</p>

<pre><code>diff = set(dictb.keys()) - set(dicta.keys())
</code></pre>

<p>Here is a class to find all the possibilities: what was added, what was removed, which key-value pairs are the same, and which key-value pairs are changed.</p>

<pre><code>class DictDiffer(object):
    """"""
    Calculate the difference between two dictionaries as:
    (1) items added
    (2) items removed
    (3) keys same in both but changed values
    (4) keys same in both and unchanged values
    """"""
    def __init__(self, current_dict, past_dict):
        self.current_dict, self.past_dict = current_dict, past_dict
        self.set_current, self.set_past = set(current_dict.keys()), set(past_dict.keys())
        self.intersect = self.set_current.intersection(self.set_past)
    def added(self):
        return self.set_current - self.intersect 
    def removed(self):
        return self.set_past - self.intersect 
    def changed(self):
        return set(o for o in self.intersect if self.past_dict[o] != self.current_dict[o])
    def unchanged(self):
        return set(o for o in self.intersect if self.past_dict[o] == self.current_dict[o])
</code></pre>

<p>Here is some sample output:</p>

<pre><code>&gt;&gt;&gt; a = {'a': 1, 'b': 1, 'c': 0}
&gt;&gt;&gt; b = {'a': 1, 'b': 2, 'd': 0}
&gt;&gt;&gt; d = DictDiffer(b, a)
&gt;&gt;&gt; print ""Added:"", d.added()
Added: set(['d'])
&gt;&gt;&gt; print ""Removed:"", d.removed()
Removed: set(['c'])
&gt;&gt;&gt; print ""Changed:"", d.changed()
Changed: set(['b'])
&gt;&gt;&gt; print ""Unchanged:"", d.unchanged()
Unchanged: set(['a'])
</code></pre>

<p>Available as a github repo:
<a href=""https://github.com/hughdbrown/dictdiffer"" rel=""noreferrer"">https://github.com/hughdbrown/dictdiffer</a></p>
",hughdbrown,hughdbrown,1248271911,1381513097,1381513097
http://stackoverflow.com/a/1165943/241462,How to determine if a list of polygon points are in clockwise order?,114505,St&#233;cy,Machavity,1248272673,1553692211,1548336674,https://stackoverflow.com/questions/1165647/how-to-determine-if-a-list-of-polygon-points-are-in-clockwise-order,"<p>Some of the suggested methods will fail in the case of a non-convex polygon, such as a crescent. Here's a simple one that will work with non-convex polygons (it'll even work with a self-intersecting polygon like a figure-eight, telling you whether it's <i>mostly</i> clockwise).</p>

<p>Sum over the edges, (x<sub>2</sub>  x<sub>1</sub>)(y<sub>2</sub> + y<sub>1</sub>). If the result is positive the curve is clockwise, if it's negative the curve is counter-clockwise. (The result is twice the enclosed area, with a +/- convention.)</p>

<pre><code>point[0] = (5,0)   edge[0]: (6-5)(4+0) =   4
point[1] = (6,4)   edge[1]: (4-6)(5+4) = -18
point[2] = (4,5)   edge[2]: (1-4)(5+5) = -30
point[3] = (1,5)   edge[3]: (1-1)(0+5) =   0
point[4] = (1,0)   edge[4]: (5-1)(0+0) =   0
                                         ---
                                         -44  counter-clockwise
</code></pre>
",Beta,Roberto Bonvallet,1248274942,1451932376,1451932376
http://stackoverflow.com/a/11676260/1004272,OSX: programmatically get uptime?,7320,Mark Harrison,,1279319983,1403881161,0,https://stackoverflow.com/questions/3269321/osx-programmatically-get-uptime,"<p>Old question, I know, but I needed to do the same thing so I thought I'd post the code I'm using, which I got from <a href=""http://cocoadev.com/wiki/FindingUptime"" rel=""noreferrer"">http://cocoadev.com/wiki/FindingUptime</a></p>

<pre><code>#include &lt;time.h&gt;
#include &lt;errno.h&gt;
#include &lt;sys/sysctl.h&gt;

double uptime()
{
    struct timeval boottime;
    size_t len = sizeof(boottime);
    int mib[2] = { CTL_KERN, KERN_BOOTTIME };
    if( sysctl(mib, 2, &amp;boottime, &amp;len, NULL, 0) &lt; 0 )
    {
        return -1.0;
    }
    time_t bsec = boottime.tv_sec, csec = time(NULL);

    return difftime(csec, bsec);
}
</code></pre>
",Bleyddyn,,1343329251,1343329251,0
http://stackoverflow.com/a/11687993/1162888,Distinguish a filename from an URL,1184,Simon Sapin,,1343392670,1343393832,0,https://stackoverflow.com/questions/11687916/distinguish-a-filename-from-an-url,"<p>If you really must guess well between filenames and URLs, I'd say a string with 2 or more word characters and then a colon was a URL, anything else is a file, just as you suggest.</p>

<p>Another option: try to open it as a file.  If it fails, try to open it as a URL.  </p>

<p>Better might be to listen to the Zen of Python, ""resist the temptation to guess"".  Doesn't the caller know if he's talking about a filename or a URL?  Have them specify it.</p>
",Ned Batchelder,,1343392952,1343392952,0
http://stackoverflow.com/a/11698139/1045199,AccountManager getUserData returning null despite it being set,4237,copolii,copolii,1337364515,1429629261,1338415118,https://stackoverflow.com/questions/10657658/accountmanager-getuserdata-returning-null-despite-it-being-set,"<p>I am aware of one bug in Honeycomb plus that can cause your issue. If you try to getUserData of the account before it is registered all subsequent getUserData calls will return null.</p>

<p>If you look at the code. AccountManager has an in-memory cache that is backed by a sqlite database. Calling getUserData populates the in-memory cache userdata, even if it is not registered. If it is not registered it interprets that as no userdata. Registering an account only populates the database and does not invalidate the in-memory store.</p>

<p>This may be causing your issue.</p>

<p>The workaround is to remove the account before calling addAccountExplicitly. </p>

<p>Ya this issue sucks and is a HUGE bug in AccountManger IMO and allows third parties to essence DOS your app.</p>
",Bishnu,,1343447984,1343447984,0
http://stackoverflow.com/a/11709412/109119,Regex to detect Invalid UTF-8 String,12170,ircmaxell,ircmaxell,1343566419,1388345866,1343662531,https://stackoverflow.com/questions/11709410/regex-to-detect-invalid-utf-8-string,"<p>You can use this PCRE regular expression to check for valid UTF8 in a string. If the regex matches, the string contains invalid byte sequences. It's 100% portable because it doesn't rely on PCRE_UTF8 to be compiled in.</p>

<pre><code>$regex = '/(
    [\xC0-\xC1] # Invalid UTF-8 Bytes
    | [\xF5-\xFF] # Invalid UTF-8 Bytes
    | \xE0[\x80-\x9F] # Overlong encoding of prior code point
    | \xF0[\x80-\x8F] # Overlong encoding of prior code point
    | [\xC2-\xDF](?![\x80-\xBF]) # Invalid UTF-8 Sequence Start
    | [\xE0-\xEF](?![\x80-\xBF]{2}) # Invalid UTF-8 Sequence Start
    | [\xF0-\xF4](?![\x80-\xBF]{3}) # Invalid UTF-8 Sequence Start
    | (?&lt;=[\x0-\x7F\xF5-\xFF])[\x80-\xBF] # Invalid UTF-8 Sequence Middle
    | (?&lt;![\xC2-\xDF]|[\xE0-\xEF]|[\xE0-\xEF][\x80-\xBF]|[\xF0-\xF4]|[\xF0-\xF4][\x80-\xBF]|[\xF0-\xF4][\x80-\xBF]{2})[\x80-\xBF] # Overlong Sequence
    | (?&lt;=[\xE0-\xEF])[\x80-\xBF](?![\x80-\xBF]) # Short 3 byte sequence
    | (?&lt;=[\xF0-\xF4])[\x80-\xBF](?![\x80-\xBF]{2}) # Short 4 byte sequence
    | (?&lt;=[\xF0-\xF4][\x80-\xBF])[\x80-\xBF](?![\x80-\xBF]) # Short 4 byte sequence (2)
)/x';
</code></pre>

<p>We can test it by creating a few variations of text.</p>

<pre><code>// Overlong encoding of code point 0
$text = chr(0xC0) . chr(0x80);
var_dump(preg_match($regex, $text)); // int(1)
// Overlong encoding of 5 byte encoding
$text = chr(0xF8) . chr(0x80) . chr(0x80) . chr(0x80) . chr(0x80);
var_dump(preg_match($regex, $text)); // int(1)
// Overlong encoding of 6 byte encoding
$text = chr(0xFC) . chr(0x80) . chr(0x80) . chr(0x80) . chr(0x80) . chr(0x80);        
var_dump(preg_match($regex, $text)); // int(1)
// High code-point without trailing characters
$text = chr(0xD0) . chr(0x01);
var_dump(preg_match($regex, $text)); // int(1)
</code></pre>

<p>etc...</p>

<p>In fact, since this matches invalid bytes, you could then use it in preg_replace to replace them away:</p>

<pre><code>preg_replace($regex, '', $text); // Remove all invalid UTF-8 code-points
</code></pre>
",ircmaxell,ircmaxell,1343566419,1343568224,1343568224
http://stackoverflow.com/a/11709412/430062,Regex to detect Invalid UTF-8 String,12170,ircmaxell,ircmaxell,1343566419,1388345866,1343662531,https://stackoverflow.com/questions/11709410/regex-to-detect-invalid-utf-8-string,"<p>You can use this PCRE regular expression to check for valid UTF8 in a string. If the regex matches, the string contains invalid byte sequences. It's 100% portable because it doesn't rely on PCRE_UTF8 to be compiled in.</p>

<pre><code>$regex = '/(
    [\xC0-\xC1] # Invalid UTF-8 Bytes
    | [\xF5-\xFF] # Invalid UTF-8 Bytes
    | \xE0[\x80-\x9F] # Overlong encoding of prior code point
    | \xF0[\x80-\x8F] # Overlong encoding of prior code point
    | [\xC2-\xDF](?![\x80-\xBF]) # Invalid UTF-8 Sequence Start
    | [\xE0-\xEF](?![\x80-\xBF]{2}) # Invalid UTF-8 Sequence Start
    | [\xF0-\xF4](?![\x80-\xBF]{3}) # Invalid UTF-8 Sequence Start
    | (?&lt;=[\x0-\x7F\xF5-\xFF])[\x80-\xBF] # Invalid UTF-8 Sequence Middle
    | (?&lt;![\xC2-\xDF]|[\xE0-\xEF]|[\xE0-\xEF][\x80-\xBF]|[\xF0-\xF4]|[\xF0-\xF4][\x80-\xBF]|[\xF0-\xF4][\x80-\xBF]{2})[\x80-\xBF] # Overlong Sequence
    | (?&lt;=[\xE0-\xEF])[\x80-\xBF](?![\x80-\xBF]) # Short 3 byte sequence
    | (?&lt;=[\xF0-\xF4])[\x80-\xBF](?![\x80-\xBF]{2}) # Short 4 byte sequence
    | (?&lt;=[\xF0-\xF4][\x80-\xBF])[\x80-\xBF](?![\x80-\xBF]) # Short 4 byte sequence (2)
)/x';
</code></pre>

<p>We can test it by creating a few variations of text.</p>

<pre><code>// Overlong encoding of code point 0
$text = chr(0xC0) . chr(0x80);
var_dump(preg_match($regex, $text)); // int(1)
// Overlong encoding of 5 byte encoding
$text = chr(0xF8) . chr(0x80) . chr(0x80) . chr(0x80) . chr(0x80);
var_dump(preg_match($regex, $text)); // int(1)
// Overlong encoding of 6 byte encoding
$text = chr(0xFC) . chr(0x80) . chr(0x80) . chr(0x80) . chr(0x80) . chr(0x80);        
var_dump(preg_match($regex, $text)); // int(1)
// High code-point without trailing characters
$text = chr(0xD0) . chr(0x01);
var_dump(preg_match($regex, $text)); // int(1)
</code></pre>

<p>etc...</p>

<p>In fact, since this matches invalid bytes, you could then use it in preg_replace to replace them away:</p>

<pre><code>preg_replace($regex, '', $text); // Remove all invalid UTF-8 code-points
</code></pre>
",ircmaxell,ircmaxell,1343566419,1343568224,1343568224
http://stackoverflow.com/a/1173769/6646342,forcing access to __PHP_Incomplete_Class object properties,25143,gpilotino,Mike Mackintosh,1244476306,1469111536,1357143786,https://stackoverflow.com/questions/965611/forcing-access-to-php-incomplete-class-object-properties,"<p>This issue appends when you un serialize an object of a class that hasn't been included yet.
For exemple, if you call session_start before include the class.</p>

<p>A PHPIncompleteClass object can't be accessed directly, but it's ok with foreach, serialize and gettype.
Calling is_object with an PHPIncompleteClass object will result false.</p>

<p>So, if you find a '__PHP_Incomplete_Class' object in your session and you've included your class after the session_load, you can use this function :</p>

<pre><code>function fixObject (&amp;$object)
{
  if (!is_object ($object) &amp;&amp; gettype ($object) == 'object')
    return ($object = unserialize (serialize ($object)));
  return $object;
}
</code></pre>

<p>This will results a usable object :</p>

<pre><code>fixObject($_SESSION['member']);
</code></pre>
",Samael S,23hush,1248375180,1307249795,1307249795
http://stackoverflow.com/a/11752084/569101,Best way to detect Mac OS X or Windows computers with JavaScript or jQuery,74606,alt,Louis,1336627602,1558235280,1397673524,https://stackoverflow.com/questions/10527983/best-way-to-detect-mac-os-x-or-windows-computers-with-javascript-or-jquery,"<p>The <a href=""https://developer.mozilla.org/en-US/docs/Web/API/NavigatorID.platform"" rel=""nofollow noreferrer"">window.navigator.platform</a> property is not spoofed when the userAgent string is changed.
I tested on my Mac if I change the userAgent to iPhone or Chrome Windows, <em>navigator.platform</em> remains MacIntel.</p>

<p><img src=""https://i.stack.imgur.com/tcPW5.png"" alt=""navigator.platform is not spoofed when the userAgent string is changed""></p>

<p>The property is also <em>read-only</em></p>

<p><img src=""https://i.stack.imgur.com/mwM99.png"" alt=""navigator.platform is read-only""></p>

<hr>

<p>I could came up with the following table</p>

<blockquote>
  <h3>Mac Computers</h3>
  
  <blockquote>
    <p><code>Mac68K</code>      <em>Macintosh 68K system.</em><br>
    <code>MacPPC</code>      <em>Macintosh PowerPC system.</em><br>
    <code>MacIntel</code>        <em>Macintosh Intel system.</em>  </p>
  </blockquote>
  
  <h3>iOS Devices</h3>
  
  <blockquote>
    <p><code>iPhone</code>      <em>iPhone.</em><br>
    <code>iPod</code>        <em>iPod Touch.</em><br>
    <code>iPad</code>        <em>iPad.</em>  </p>
  </blockquote>
</blockquote>

<hr>

<p>Modern macs returns <code>navigator.platform == ""MacIntel""</code> but to give some ""future proof"" don't use exact matching, hopefully they will change to something like <code>MacARM</code> or <code>MacQuantum</code> in future.</p>

<pre><code>var isMac = navigator.platform.toUpperCase().indexOf('MAC')&gt;=0;
</code></pre>

<p>To include iOS that also use the ""left side""</p>

<pre><code>var isMacLike = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);
var isIOS = /(iPhone|iPod|iPad)/i.test(navigator.platform);
</code></pre>

<p><div class=""snippet"" data-lang=""js"" data-hide=""true"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code snippet-currently-hidden"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var is_OSX = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);
var is_iOS = /(iPhone|iPod|iPad)/i.test(navigator.platform);

var is_Mac = navigator.platform.toUpperCase().indexOf('MAC') &gt;= 0;
var is_iPhone = navigator.platform == ""iPhone"";
var is_iPod = navigator.platform == ""iPod"";
var is_iPad = navigator.platform == ""iPad"";

/* Output */
var out = document.getElementById('out');
if (!is_OSX) out.innerHTML += ""This NOT a Mac or an iOS Device!"";
if (is_Mac) out.innerHTML += ""This is a Mac Computer!\n"";
if (is_iOS) out.innerHTML += ""You're using an iOS Device!\n"";
if (is_iPhone) out.innerHTML += ""This is an iPhone!"";
if (is_iPod) out.innerHTML += ""This is an iPod Touch!"";
if (is_iPad) out.innerHTML += ""This is an iPad!"";
out.innerHTML += ""\nPlatform: "" + navigator.platform;</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;pre id=""out""&gt;&lt;/pre&gt;</code></pre>
</div>
</div>
</p>

<hr>

<p>Since most O.S. use the close button on the right, you can just move the close button to the left when the user is on a MacLike O.S., otherwise isn't a problem if you put it on the most common  side, the right.</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>setTimeout(test, 1000); //delay for demonstration

function test() {

  var mac = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);

  if (mac) {
    document.getElementById('close').classList.add(""left"");
  }
}</code></pre>
<pre class=""snippet-code-css lang-css prettyprint-override""><code>#window {
  position: absolute;
  margin: 1em;
  width: 300px;
  padding: 10px;
  border: 1px solid gray;
  background-color: #DDD;
  text-align: center;
  box-shadow: 0px 1px 3px #000;
}
#close {
  position: absolute;
  top: 0px;
  right: 0px;
  width: 22px;
  height: 22px;
  margin: -12px;
  box-shadow: 0px 1px 3px #000;
  background-color: #000;
  border: 2px solid #FFF;
  border-radius: 22px;
  color: #FFF;
  text-align: center;
  font: 14px""Comic Sans MS"", Monaco;
}
#close.left{
  left: 0px;
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;div id=""window""&gt;
  &lt;div id=""close""&gt;x&lt;/div&gt;
  &lt;p&gt;Hello!&lt;/p&gt;
  &lt;p&gt;If the ""close button"" change to the left side&lt;/p&gt;
  &lt;p&gt;you're on a Mac like system!&lt;/p&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
</p>

<p><a href=""http://www.nczonline.net/blog/2007/12/17/don-t-forget-navigator-platform/"" rel=""nofollow noreferrer"">http://www.nczonline.net/blog/2007/12/17/don-t-forget-navigator-platform/</a></p>
",Vitim.us,Vitim.us,1343790736,1555183503,1555183503
http://stackoverflow.com/a/1176023/,Elegant Python function to convert CamelCase to snake_case?,132151,Sridhar Ratnakumar,danijar,1248394922,1560082716,1456233774,https://stackoverflow.com/questions/1175208/elegant-python-function-to-convert-camelcase-to-snake-case,"<p>This is pretty thorough:</p>

<pre><code>def convert(name):
    s1 = re.sub('(.)([A-Z][a-z]+)', r'\1_\2', name)
    return re.sub('([a-z0-9])([A-Z])', r'\1_\2', s1).lower()
</code></pre>

<p>Works with all these (and doesn't harm already-un-cameled versions):</p>

<pre><code>&gt;&gt;&gt; convert('CamelCase')
'camel_case'
&gt;&gt;&gt; convert('CamelCamelCase')
'camel_camel_case'
&gt;&gt;&gt; convert('Camel2Camel2Case')
'camel2_camel2_case'
&gt;&gt;&gt; convert('getHTTPResponseCode')
'get_http_response_code'
&gt;&gt;&gt; convert('get2HTTPResponseCode')
'get2_http_response_code'
&gt;&gt;&gt; convert('HTTPResponseCode')
'http_response_code'
&gt;&gt;&gt; convert('HTTPResponseCodeXYZ')
'http_response_code_xyz'
</code></pre>

<p>Or if you're going to call it a zillion times, you can pre-compile the regexes:</p>

<pre><code>first_cap_re = re.compile('(.)([A-Z][a-z]+)')
all_cap_re = re.compile('([a-z0-9])([A-Z])')
def convert(name):
    s1 = first_cap_re.sub(r'\1_\2', name)
    return all_cap_re.sub(r'\1_\2', s1).lower()
</code></pre>

<p>Don't forget to import the regular expression module</p>

<pre><code>import re
</code></pre>
",epost,Zarathustra,1248416713,1421829497,1421829497
http://stackoverflow.com/a/1176023/1072990,Elegant Python function to convert CamelCase to snake_case?,132151,Sridhar Ratnakumar,danijar,1248394922,1560082716,1456233774,https://stackoverflow.com/questions/1175208/elegant-python-function-to-convert-camelcase-to-snake-case,"<p>This is pretty thorough:</p>

<pre><code>def convert(name):
    s1 = re.sub('(.)([A-Z][a-z]+)', r'\1_\2', name)
    return re.sub('([a-z0-9])([A-Z])', r'\1_\2', s1).lower()
</code></pre>

<p>Works with all these (and doesn't harm already-un-cameled versions):</p>

<pre><code>&gt;&gt;&gt; convert('CamelCase')
'camel_case'
&gt;&gt;&gt; convert('CamelCamelCase')
'camel_camel_case'
&gt;&gt;&gt; convert('Camel2Camel2Case')
'camel2_camel2_case'
&gt;&gt;&gt; convert('getHTTPResponseCode')
'get_http_response_code'
&gt;&gt;&gt; convert('get2HTTPResponseCode')
'get2_http_response_code'
&gt;&gt;&gt; convert('HTTPResponseCode')
'http_response_code'
&gt;&gt;&gt; convert('HTTPResponseCodeXYZ')
'http_response_code_xyz'
</code></pre>

<p>Or if you're going to call it a zillion times, you can pre-compile the regexes:</p>

<pre><code>first_cap_re = re.compile('(.)([A-Z][a-z]+)')
all_cap_re = re.compile('([a-z0-9])([A-Z])')
def convert(name):
    s1 = first_cap_re.sub(r'\1_\2', name)
    return all_cap_re.sub(r'\1_\2', s1).lower()
</code></pre>

<p>Don't forget to import the regular expression module</p>

<pre><code>import re
</code></pre>
",epost,Zarathustra,1248416713,1421829497,1421829497
http://stackoverflow.com/a/1176023/1090455,Elegant Python function to convert CamelCase to snake_case?,132151,Sridhar Ratnakumar,danijar,1248394922,1560082716,1456233774,https://stackoverflow.com/questions/1175208/elegant-python-function-to-convert-camelcase-to-snake-case,"<p>This is pretty thorough:</p>

<pre><code>def convert(name):
    s1 = re.sub('(.)([A-Z][a-z]+)', r'\1_\2', name)
    return re.sub('([a-z0-9])([A-Z])', r'\1_\2', s1).lower()
</code></pre>

<p>Works with all these (and doesn't harm already-un-cameled versions):</p>

<pre><code>&gt;&gt;&gt; convert('CamelCase')
'camel_case'
&gt;&gt;&gt; convert('CamelCamelCase')
'camel_camel_case'
&gt;&gt;&gt; convert('Camel2Camel2Case')
'camel2_camel2_case'
&gt;&gt;&gt; convert('getHTTPResponseCode')
'get_http_response_code'
&gt;&gt;&gt; convert('get2HTTPResponseCode')
'get2_http_response_code'
&gt;&gt;&gt; convert('HTTPResponseCode')
'http_response_code'
&gt;&gt;&gt; convert('HTTPResponseCodeXYZ')
'http_response_code_xyz'
</code></pre>

<p>Or if you're going to call it a zillion times, you can pre-compile the regexes:</p>

<pre><code>first_cap_re = re.compile('(.)([A-Z][a-z]+)')
all_cap_re = re.compile('([a-z0-9])([A-Z])')
def convert(name):
    s1 = first_cap_re.sub(r'\1_\2', name)
    return all_cap_re.sub(r'\1_\2', s1).lower()
</code></pre>

<p>Don't forget to import the regular expression module</p>

<pre><code>import re
</code></pre>
",epost,Zarathustra,1248416713,1421829497,1421829497
http://stackoverflow.com/a/1176023/298479,Elegant Python function to convert CamelCase to snake_case?,132151,Sridhar Ratnakumar,danijar,1248394922,1560082716,1456233774,https://stackoverflow.com/questions/1175208/elegant-python-function-to-convert-camelcase-to-snake-case,"<p>This is pretty thorough:</p>

<pre><code>def convert(name):
    s1 = re.sub('(.)([A-Z][a-z]+)', r'\1_\2', name)
    return re.sub('([a-z0-9])([A-Z])', r'\1_\2', s1).lower()
</code></pre>

<p>Works with all these (and doesn't harm already-un-cameled versions):</p>

<pre><code>&gt;&gt;&gt; convert('CamelCase')
'camel_case'
&gt;&gt;&gt; convert('CamelCamelCase')
'camel_camel_case'
&gt;&gt;&gt; convert('Camel2Camel2Case')
'camel2_camel2_case'
&gt;&gt;&gt; convert('getHTTPResponseCode')
'get_http_response_code'
&gt;&gt;&gt; convert('get2HTTPResponseCode')
'get2_http_response_code'
&gt;&gt;&gt; convert('HTTPResponseCode')
'http_response_code'
&gt;&gt;&gt; convert('HTTPResponseCodeXYZ')
'http_response_code_xyz'
</code></pre>

<p>Or if you're going to call it a zillion times, you can pre-compile the regexes:</p>

<pre><code>first_cap_re = re.compile('(.)([A-Z][a-z]+)')
all_cap_re = re.compile('([a-z0-9])([A-Z])')
def convert(name):
    s1 = first_cap_re.sub(r'\1_\2', name)
    return all_cap_re.sub(r'\1_\2', s1).lower()
</code></pre>

<p>Don't forget to import the regular expression module</p>

<pre><code>import re
</code></pre>
",epost,Zarathustra,1248416713,1421829497,1421829497
http://stackoverflow.com/a/1176023/579416,Elegant Python function to convert CamelCase to snake_case?,132151,Sridhar Ratnakumar,danijar,1248394922,1560082716,1456233774,https://stackoverflow.com/questions/1175208/elegant-python-function-to-convert-camelcase-to-snake-case,"<p>This is pretty thorough:</p>

<pre><code>def convert(name):
    s1 = re.sub('(.)([A-Z][a-z]+)', r'\1_\2', name)
    return re.sub('([a-z0-9])([A-Z])', r'\1_\2', s1).lower()
</code></pre>

<p>Works with all these (and doesn't harm already-un-cameled versions):</p>

<pre><code>&gt;&gt;&gt; convert('CamelCase')
'camel_case'
&gt;&gt;&gt; convert('CamelCamelCase')
'camel_camel_case'
&gt;&gt;&gt; convert('Camel2Camel2Case')
'camel2_camel2_case'
&gt;&gt;&gt; convert('getHTTPResponseCode')
'get_http_response_code'
&gt;&gt;&gt; convert('get2HTTPResponseCode')
'get2_http_response_code'
&gt;&gt;&gt; convert('HTTPResponseCode')
'http_response_code'
&gt;&gt;&gt; convert('HTTPResponseCodeXYZ')
'http_response_code_xyz'
</code></pre>

<p>Or if you're going to call it a zillion times, you can pre-compile the regexes:</p>

<pre><code>first_cap_re = re.compile('(.)([A-Z][a-z]+)')
all_cap_re = re.compile('([a-z0-9])([A-Z])')
def convert(name):
    s1 = first_cap_re.sub(r'\1_\2', name)
    return all_cap_re.sub(r'\1_\2', s1).lower()
</code></pre>

<p>Don't forget to import the regular expression module</p>

<pre><code>import re
</code></pre>
",epost,Zarathustra,1248416713,1421829497,1421829497
http://stackoverflow.com/a/1176923/1138341,PHP: How to remove all non printable characters in a string?,192635,Stewart Robinson,,1248432496,1546854992,0,https://stackoverflow.com/questions/1176904/php-how-to-remove-all-non-printable-characters-in-a-string,"<h2>7 bit ASCII?</h2>

<p>If your Tardis just landed in 1963, and you just want the 7 bit printable ASCII chars, you can rip out everything from 0-31 and 127-255 with this:</p>

<pre><code>$string = preg_replace('/[\x00-\x1F\x7F-\xFF]/', '', $string);
</code></pre>

<p>It matches anything in range 0-31, 127-255 and removes it. </p>

<h2>8 bit extended ASCII?</h2>

<p>You fell into a Hot Tub Time Machine, and you're back in the eighties. 
If you've got some form of 8 bit ASCII, then you might want to keep the chars in range 128-255. An easy adjustment - just look for 0-31 and 127</p>

<pre><code>$string = preg_replace('/[\x00-\x1F\x7F]/', '', $string);
</code></pre>

<h2>UTF-8?</h2>

<p>Ah, welcome back to the 21st century. If you have a UTF-8 encoded string, then the <code>/u</code> <a href=""http://php.net/manual/en/reference.pcre.pattern.modifiers.php"" rel=""noreferrer"">modifier</a> can be used on the regex</p>

<pre><code>$string = preg_replace('/[\x00-\x1F\x7F]/u', '', $string);
</code></pre>

<p>This just removes 0-31 and 127. This works in ASCII and UTF-8 because both share the <a href=""http://www.fileformat.info/info/charset/UTF-8/list.htm"" rel=""noreferrer"">same control set range</a> (as noted by mgutt below). Strictly speaking, this would work without the <code>/u</code> modifier. But it makes life easier if you want to remove other chars...</p>

<p>If you're dealing with Unicode, there are <a href=""https://stackoverflow.com/questions/3770117/what-is-the-range-of-unicode-printable-characters"">potentially many non-printing elements</a>, but let's consider a simple one: <a href=""https://unicode-table.com/en/00A0/"" rel=""noreferrer"">NO-BREAK SPACE (U+00A0)</a></p>

<p>In a UTF-8 string, this would be encoded as <code>0xC2A0</code>. You could look for and remove that specific sequence, but with the <code>/u</code> modifier in place, you can simply add <code>\xA0</code> to the character class:</p>

<pre><code>$string = preg_replace('/[\x00-\x1F\x7F\xA0]/u', '', $string);
</code></pre>

<h2>Addendum: What about str_replace?</h2>

<p>preg_replace is pretty efficient, but if you're doing this operation a lot, you could build an array of chars you want to remove, and use str_replace as noted by mgutt below, e.g.</p>

<pre><code>//build an array we can re-use across several operations
$badchar=array(
    // control characters
    chr(0), chr(1), chr(2), chr(3), chr(4), chr(5), chr(6), chr(7), chr(8), chr(9), chr(10),
    chr(11), chr(12), chr(13), chr(14), chr(15), chr(16), chr(17), chr(18), chr(19), chr(20),
    chr(21), chr(22), chr(23), chr(24), chr(25), chr(26), chr(27), chr(28), chr(29), chr(30),
    chr(31),
    // non-printing characters
    chr(127)
);

//replace the unwanted chars
$str2 = str_replace($badchar, '', $str);
</code></pre>

<p>Intuitively, this seems like it would be fast, but it's not always the case, you should definitely benchmark to see if it saves you anything. I did some benchmarks across a variety string lengths with random data, and this pattern emerged using php 7.0.12</p>

<pre><code>     2 chars str_replace     5.3439ms preg_replace     2.9919ms preg_replace is 44.01% faster
     4 chars str_replace     6.0701ms preg_replace     1.4119ms preg_replace is 76.74% faster
     8 chars str_replace     5.8119ms preg_replace     2.0721ms preg_replace is 64.35% faster
    16 chars str_replace     6.0401ms preg_replace     2.1980ms preg_replace is 63.61% faster
    32 chars str_replace     6.0320ms preg_replace     2.6770ms preg_replace is 55.62% faster
    64 chars str_replace     7.4198ms preg_replace     4.4160ms preg_replace is 40.48% faster
   128 chars str_replace    12.7239ms preg_replace     7.5412ms preg_replace is 40.73% faster
   256 chars str_replace    19.8820ms preg_replace    17.1330ms preg_replace is 13.83% faster
   512 chars str_replace    34.3399ms preg_replace    34.0221ms preg_replace is  0.93% faster
  1024 chars str_replace    57.1141ms preg_replace    67.0300ms str_replace  is 14.79% faster
  2048 chars str_replace    94.7111ms preg_replace   123.3189ms str_replace  is 23.20% faster
  4096 chars str_replace   227.7029ms preg_replace   258.3771ms str_replace  is 11.87% faster
  8192 chars str_replace   506.3410ms preg_replace   555.6269ms str_replace  is  8.87% faster
 16384 chars str_replace  1116.8811ms preg_replace  1098.0589ms preg_replace is  1.69% faster
 32768 chars str_replace  2299.3128ms preg_replace  2222.8632ms preg_replace is  3.32% faster
</code></pre>

<p>The timings themselves are for 10000 iterations, but what's more interesting is the relative differences. Up to 512 chars, I was seeing preg_replace alway win. In the 1-8kb range, str_replace had a marginal edge. </p>

<p>I thought it was interesting result, so including it here. <em>The important thing is not to take this result and use it to decide which method to use, but to benchmark against your own data and then decide.</em></p>
",Paul Dixon,Community,1248432706,1486408587,1495540503
http://stackoverflow.com/a/11781404/1358405,Nodejs File Permissions,15311,simo,simo,1343904536,1462608586,1462608586,https://stackoverflow.com/questions/11775884/nodejs-file-permissions,"<pre><code>var checkPermission = function (file, mask, cb){
    fs.stat (file, function (error, stats){
        if (error){
            cb (error, false);
        }else{
            cb (null, !!(mask &amp; parseInt ((stats.mode &amp; parseInt (""777"", 8)).toString (8)[0])));
        }
    });
};
</code></pre>

<p><strong>canExecute()</strong>:</p>

<pre><code>checkPermission (&lt;path&gt;, 1, cb);
</code></pre>

<p><strong>canRead()</strong>:</p>

<pre><code>checkPermission (&lt;path&gt;, 4, cb);
</code></pre>

<p><strong>canWrite()</strong>:</p>

<pre><code>checkPermission (&lt;path&gt;, 2, cb);
</code></pre>
",Gabriel Llamas,Gabriel Llamas,1343923232,1367251034,1367251034
http://stackoverflow.com/a/11803778/184363,How to get access to handler id from Gtk.Builder.connect_signals,1782,xubuntix,,1343987127,1391014403,0,https://stackoverflow.com/questions/11793253/how-to-get-access-to-handler-id-from-gtk-builder-connect-signals,"<p>Sadly, I don't believe that there's any way to get at the signal handler IDs that were connected by <code>Gtk.Builder</code>. If you really want the handlers, you have to manually connect your signals, storing any <code>handler_id</code>s you care about.</p>

<p>An alternative approach is to decide that you don't actually need the handlers themselves, but can block/unblock/etc. based on the connected callable, using <code>GObject.handler_block_by_func</code> and similar.</p>

<p>The final option is to try to actually find the handler after the fact, using as many details as you can. In C, use <code>g_signal_handler_find</code>; this isn't bound for pygtk2, but presumably will work using pygobject3. The downside here is that there's no guarantee that you'll find what you <em>actually</em> connected.</p>
",Kai,,1344030643,1344030643,0
http://stackoverflow.com/a/11816999/1915421,Possible to use type_traits / SFINAE to find if a class defines a member TYPE?,5928,Steve Lorimer,Community,1344140537,1490592970,1495539207,https://stackoverflow.com/questions/11813940/possible-to-use-type-traits-sfinae-to-find-if-a-class-defines-a-member-type,"<p>Try this</p>

<pre><code>template&lt;class T&gt;
struct Void {
  typedef void type;
};

template&lt;class T, class U = void&gt;
struct has_bar {
    enum { value = 0 };
};

template&lt;class T&gt;
struct has_bar&lt;T, typename Void&lt;typename T::bar&gt;::type &gt; {
    enum { value = 1 };
};
</code></pre>
",Dirk Holsopple,sp2danny,1344174894,1490592970,1490592970
http://stackoverflow.com/a/11935263/1787262,Sampling a random subset from an array,20194,Jeroen,Zheileman,1344864329,1557357464,1344866691,https://stackoverflow.com/questions/11935175/sampling-a-random-subset-from-an-array,"<p>I suggest shuffling a copy of the array using the <a href=""http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle"" rel=""noreferrer"">Fisher-Yates shuffle</a> and taking a slice:</p>

<pre><code>function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

var x = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];
var fiveRandomMembers = getRandomSubarray(x, 5);
</code></pre>

<p>Note that this will not be the most efficient method for getting a small random subset of a large array because it shuffles the whole array unnecessarily. For better performance you could do a partial shuffle instead:</p>

<pre><code>function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, min = i - size, temp, index;
    while (i-- &gt; min) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(min);
}
</code></pre>
",Tim Down,Tim Down,1344864607,1413887260,1413887260
http://stackoverflow.com/a/11935263/562769,Sampling a random subset from an array,20194,Jeroen,Zheileman,1344864329,1557357464,1344866691,https://stackoverflow.com/questions/11935175/sampling-a-random-subset-from-an-array,"<p>I suggest shuffling a copy of the array using the <a href=""http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle"" rel=""noreferrer"">Fisher-Yates shuffle</a> and taking a slice:</p>

<pre><code>function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

var x = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];
var fiveRandomMembers = getRandomSubarray(x, 5);
</code></pre>

<p>Note that this will not be the most efficient method for getting a small random subset of a large array because it shuffles the whole array unnecessarily. For better performance you could do a partial shuffle instead:</p>

<pre><code>function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, min = i - size, temp, index;
    while (i-- &gt; min) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(min);
}
</code></pre>
",Tim Down,Tim Down,1344864607,1413887260,1413887260
http://stackoverflow.com/a/11984387/1084488,Trying to record audio but getting message &quot;mediarecorder went away with unhandled events&quot; and &quot;Fatal signal 11 (SIGSEGV)....&quot;,12213,blackfyre,blackfyre,1344452783,1440620958,1348170308,https://stackoverflow.com/questions/11871421/trying-to-record-audio-but-getting-message-mediarecorder-went-away-with-unhandl,"<p>I solved this problem by reseting recorder before releasing it.</p>

<pre><code>recorder.stop();     // stop recording
recorder.reset();    // set state to idle
recorder.release();  // release resources back to the system
recorder = null;
</code></pre>
",blackfyre,KitKat,1345109648,1381236292,1381236292
http://stackoverflow.com/a/11988086/654755,How to implement __iadd__ for a Python property,4172,ptomato,,1345122807,1345128829,0,https://stackoverflow.com/questions/11987949/how-to-implement-iadd-for-a-python-property,"<p><code>__iadd__</code> will only be looked for on the value returned from <code>__get__</code>.  You need to make <code>__get__</code> (or the property getter) return an object (or a proxy object) with <code>__iadd__</code>.</p>

<pre><code>@property
def x(self):
    proxy = IProxy(self._x)
    proxy.parent = self
    return proxy

class IProxy(int, object):
    def __iadd__(self, val):
        self.parent.iadd_x(val)
        return self.parent.x
</code></pre>
",ecatmur,ecatmur,1345123220,1345128829,1345128829
http://stackoverflow.com/a/12014376/145346,Javascript: Words to numbers,10234,JavaAndCSharp,,1345085565,1551378246,0,https://stackoverflow.com/questions/11980087/javascript-words-to-numbers,"<p>Here's my JavaScript replacement of @Greg Hewgill's Python module, minus the testing from the bottom of the code:</p>

<pre><code>var Small = {
    'zero': 0,
    'one': 1,
    'two': 2,
    'three': 3,
    'four': 4,
    'five': 5,
    'six': 6,
    'seven': 7,
    'eight': 8,
    'nine': 9,
    'ten': 10,
    'eleven': 11,
    'twelve': 12,
    'thirteen': 13,
    'fourteen': 14,
    'fifteen': 15,
    'sixteen': 16,
    'seventeen': 17,
    'eighteen': 18,
    'nineteen': 19,
    'twenty': 20,
    'thirty': 30,
    'forty': 40,
    'fifty': 50,
    'sixty': 60,
    'seventy': 70,
    'eighty': 80,
    'ninety': 90
};

var Magnitude = {
    'thousand':     1000,
    'million':      1000000,
    'billion':      1000000000,
    'trillion':     1000000000000,
    'quadrillion':  1000000000000000,
    'quintillion':  1000000000000000000,
    'sextillion':   1000000000000000000000,
    'septillion':   1000000000000000000000000,
    'octillion':    1000000000000000000000000000,
    'nonillion':    1000000000000000000000000000000,
    'decillion':    1000000000000000000000000000000000,
};

var a, n, g;

function text2num(s) {
    a = s.toString().split(/[\s-]+/);
    n = 0;
    g = 0;
    a.forEach(feach);
    return n + g;
}

function feach(w) {
    var x = Small[w];
    if (x != null) {
        g = g + x;
    }
    else if (w == ""hundred"") {
        g = g * 100;
    }
    else {
        x = Magnitude[w];
        if (x != null) {
            n = n + g * x
            g = 0;
        }
        else { 
            alert(""Unknown number: ""+w); 
        }
    }
}
</code></pre>

<p>I got hung up a bit on the RegEx-ing and the for-each bug in IE, but here it is. A fairly decent conversion from Python to JavaScript, if I can say so myself, which I can't. It needs some work - ""One hundred and twenty"" won't work - but it's good enough for now. Of course, thanks to @Greg Hewgill for the original, written in Python.</p>
",JavaAndCSharp,Daniel A. White,1345246133,1551378246,1551378246
http://stackoverflow.com/a/12017573/268006,How to get filename from Content-Disposition in headers,14224,Sergei Basharov,siebz0r,1320665665,1420720957,1420720130,https://stackoverflow.com/questions/8035900/how-to-get-filename-from-content-disposition-in-headers,"<p>These regular expressions are based on the grammar from RFC 6266, but modified to accept headers without disposition-type, e.g. Content-Disposition: filename=example.html</p>

<p>i.e. [ disposition-type "";"" ] disposition-parm ( "";"" disposition-parm )* / disposition-type</p>

<p>It will handle filename parameters with and without quotes, and unquote quoted pairs from values in quotes, e.g. filename=""foo\""bar"" -> foo""bar</p>

<p>It will handle filename* extended parameters and prefer a filename* extended parameter over a filename parameter regardless of the order they appear in the header</p>

<p>It strips folder name information, e.g. /etc/passwd -> passwd, and it defaults to the basename from the URL path in the absence of a filename parameter (or header, or if the parameter value is empty string)</p>

<p>The token and qdtext regular expressions are based on the grammar from RFC 2616, the mimeCharset and valueChars regular expressions are based on the grammar from RFC 5987, and the language regular expression is based on the grammar from RFC 5646</p>

<pre><code>import re, urllib
from os import path
from urlparse import urlparse

# content-disposition = ""Content-Disposition"" "":""
#                        disposition-type *( "";"" disposition-parm )
# disposition-type    = ""inline"" | ""attachment"" | disp-ext-type
#                     ; case-insensitive
# disp-ext-type       = token
# disposition-parm    = filename-parm | disp-ext-parm
# filename-parm       = ""filename"" ""="" value
#                     | ""filename*"" ""="" ext-value
# disp-ext-parm       = token ""="" value
#                     | ext-token ""="" ext-value
# ext-token           = &lt;the characters in token, followed by ""*""&gt;

token = '[-!#-\'*+.\dA-Z^-z|~]+'
qdtext='[]-~\t !#-[]'
mimeCharset='[-!#-&amp;+\dA-Z^-z]+'
language='(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}(?:-[A-Za-z]{3}){,2})?|[A-Za-z]{4,8})(?:-[A-Za-z]{4})?(?:-(?:[A-Za-z]{2}|\d{3}))(?:-(?:[\dA-Za-z]{5,8}|\d[\dA-Za-z]{3}))*(?:-[\dA-WY-Za-wy-z](?:-[\dA-Za-z]{2,8})+)*(?:-[Xx](?:-[\dA-Za-z]{1,8})+)?|[Xx](?:-[\dA-Za-z]{1,8})+|[Ee][Nn]-[Gg][Bb]-[Oo][Ee][Dd]|[Ii]-[Aa][Mm][Ii]|[Ii]-[Bb][Nn][Nn]|[Ii]-[Dd][Ee][Ff][Aa][Uu][Ll][Tt]|[Ii]-[Ee][Nn][Oo][Cc][Hh][Ii][Aa][Nn]|[Ii]-[Hh][Aa][Kk]|[Ii]-[Kk][Ll][Ii][Nn][Gg][Oo][Nn]|[Ii]-[Ll][Uu][Xx]|[Ii]-[Mm][Ii][Nn][Gg][Oo]|[Ii]-[Nn][Aa][Vv][Aa][Jj][Oo]|[Ii]-[Pp][Ww][Nn]|[Ii]-[Tt][Aa][Oo]|[Ii]-[Tt][Aa][Yy]|[Ii]-[Tt][Ss][Uu]|[Ss][Gg][Nn]-[Bb][Ee]-[Ff][Rr]|[Ss][Gg][Nn]-[Bb][Ee]-[Nn][Ll]|[Ss][Gg][Nn]-[Cc][Hh]-[Dd][Ee]'
valueChars = '(?:%[\dA-F][\dA-F]|[-!#$&amp;+.\dA-Z^-z|~])*'
dispositionParm = '[Ff][Ii][Ll][Ee][Nn][Aa][Mm][Ee]\s*=\s*(?:({token})|""((?:{qdtext}|\\\\[\t !-~])*)"")|[Ff][Ii][Ll][Ee][Nn][Aa][Mm][Ee]\*\s*=\s*({mimeCharset})\'(?:{language})?\'({valueChars})|{token}\s*=\s*(?:{token}|""(?:{qdtext}|\\\\[\t !-~])*"")|{token}\*\s*=\s*{mimeCharset}\'(?:{language})?\'{valueChars}'.format(**locals())

try:
  m = re.match('(?:{token}\s*;\s*)?(?:{dispositionParm})(?:\s*;\s*(?:{dispositionParm}))*|{token}'.format(**locals()), result.headers['Content-Disposition'])

except KeyError:
  name = path.basename(urllib.unquote(urlparse(url).path))

else:
  if not m:
    name = path.basename(urllib.unquote(urlparse(url).path))

  # Many user agent implementations predating this specification do not
  # understand the ""filename*"" parameter.  Therefore, when both ""filename""
  # and ""filename*"" are present in a single header field value, recipients
  # SHOULD pick ""filename*"" and ignore ""filename""

  elif m.group(8) is not None:
    name = urllib.unquote(m.group(8)).decode(m.group(7))

  elif m.group(4) is not None:
    name = urllib.unquote(m.group(4)).decode(m.group(3))

  elif m.group(6) is not None:
    name = re.sub('\\\\(.)', '\1', m.group(6))

  elif m.group(5) is not None:
    name = m.group(5)

  elif m.group(2) is not None:
    name = re.sub('\\\\(.)', '\1', m.group(2))

  else:
    name = m.group(1)

  # Recipients MUST NOT be able to write into any location other than one to
  # which they are specifically entitled

  if name:
    name = path.basename(name)

  else:
    name = path.basename(urllib.unquote(urlparse(url).path))
</code></pre>
",user916968,,1345283225,1345283225,0
http://stackoverflow.com/a/12021982/1088469,How to apply CORS preflight cache to an entire domain,22776,MindWire,,1345237737,1519621708,0,https://stackoverflow.com/questions/12013216/how-to-apply-cors-preflight-cache-to-an-entire-domain,"<p>Preflight can only be applied to the request, not to the entire domain. I brought the same question up on the mailing list, and there were security concerns. Here's the entire thread: <a href=""http://lists.w3.org/Archives/Public/public-webapps/2012AprJun/0228.html"">http://lists.w3.org/Archives/Public/public-webapps/2012AprJun/0228.html</a></p>

<p>There are a few things to consider if you'd like to limit the number of preflight requests. First note that WebKit/Blink based browsers set a max preflight cache of 10 minutes:</p>

<p><a href=""https://github.com/WebKit/webkit/blob/master/Source/WebCore/loader/CrossOriginPreflightResultCache.cpp"">https://github.com/WebKit/webkit/blob/master/Source/WebCore/loader/CrossOriginPreflightResultCache.cpp</a>
<a href=""https://chromium.googlesource.com/chromium/blink/+/master/Source/core/loader/CrossOriginPreflightResultCache.cpp"">https://chromium.googlesource.com/chromium/blink/+/master/Source/core/loader/CrossOriginPreflightResultCache.cpp</a></p>

<p>(I'm not sure if this is true for other browsers). So while you should always set the Access-Control-Max-Age header, the max value is 10 minutes.</p>

<p>Next note that it is impossible to avoid a preflight on PUT/DELETE requests. So updates/deletes to your API will require at least one preflight every 10 minutes.</p>

<p>On GET/POST, avoid custom headers if at all possible, since these still trigger preflights. If your API returns JSON, note that a Content-Type of 'application/json' also triggers a preflight.</p>

<p>If you are willing to bend just how ""RESTful"" your API is, there are a few more things you can try. One is to use a Content-Type that doesn't need a preflight, like 'text/plain'. Custom headers always trigger preflights, so if you have any custom headers, you could move them into query parameters. At the extreme end, you could use a protocol like JSON-RPC, where all requests are made to a single endpoint.</p>

<p>In all honesty, because of the browser's preflight cache limit of 10 minutes, and REST's resource urls, the preflight cache is fairly useless. There's very little you can do to limit preflights over the course of a long running app. I'm hopeful the authors of the CORS spec will try to address this in the future.</p>
",monsur,monsur,1345321517,1421729987,1421729987
http://stackoverflow.com/a/1203361/253576,How can I get file extensions with JavaScript?,434503,Sergio del Amo,Ghoul Fool,1223636885,1543828269,1524218311,https://stackoverflow.com/questions/190852/how-can-i-get-file-extensions-with-javascript,"<pre><code>return filename.split('.').pop();
</code></pre>

<p>Keep it simple  :) </p>

<p><strong>Edit:</strong></p>

<p>This is another non-regex solution that I believe is more efficient:</p>

<pre><code>return filename.substring(filename.lastIndexOf('.')+1, filename.length) || filename;
</code></pre>

<p>There are some corner cases that are better handled by <a href=""https://stackoverflow.com/a/12900504/1249581"">VisioN's answer</a> below, particularly files with no extension (<code>.htaccess</code> etc included).</p>

<p>It's very performant, and handles corner cases in an arguably better way by returning <code>""""</code> instead of the full string when there's no dot or no string before the dot.  It's a very well crafted solution, albeit tough to read.  Stick it in your helpers lib and just use it.</p>

<p><strong>Old Edit:</strong></p>

<p>A safer implementation if you're going to run into files with no extension, or hidden files with no extension (see VisioN's comment to Tom's answer above) would be something along these lines</p>

<pre><code>var a = filename.split(""."");
if( a.length === 1 || ( a[0] === """" &amp;&amp; a.length === 2 ) ) {
    return """";
}
return a.pop();    // feel free to tack .toLowerCase() here if you want
</code></pre>

<p>If <code>a.length</code> is one, it's a visible file with no extension ie. <em>file</em></p>

<p>If <code>a[0] === """"</code> and <code>a.length === 2</code> it's a hidden file with no extension ie. <em>.htaccess</em></p>

<p>Hope this helps to clear up issues with the slightly more complex cases.  In terms of performance, I believe this solution is <a href=""https://stackoverflow.com/a/12900504/1249581"">a little slower than regex</a> in most browsers.  However, for most common purposes this code should be perfectly usable.</p>
",wallacer,VisioN,1248905528,1498643519,1498643519
http://stackoverflow.com/a/12066696/1440785,How can a Java program get its own process ID?,242597,Dmitry Shechtman,mrsrinivas,1220090005,1545053520,1519444357,https://stackoverflow.com/questions/35842/how-can-a-java-program-get-its-own-process-id,"<p>Here's a backdoor method which <em>might</em> not work with all VMs but should work on both linux and windows (<a href=""http://boxysystems.com/index.php/java-tip-find-process-id-of-running-java-process/"" rel=""noreferrer"">original example here</a>):</p>

<pre><code>java.lang.management.RuntimeMXBean runtime = 
    java.lang.management.ManagementFactory.getRuntimeMXBean();
java.lang.reflect.Field jvm = runtime.getClass().getDeclaredField(""jvm"");
jvm.setAccessible(true);
sun.management.VMManagement mgmt =  
    (sun.management.VMManagement) jvm.get(runtime);
java.lang.reflect.Method pid_method =  
    mgmt.getClass().getDeclaredMethod(""getProcessId"");
pid_method.setAccessible(true);

int pid = (Integer) pid_method.invoke(mgmt);
</code></pre>
",Brad Mace,Brad Mace,1345612781,1375390402,1375390402
http://stackoverflow.com/a/12086873/5731788,Why is it not possible to use private method in a lambda?,6314,Juraj Blaho,Juraj Blaho,1344859579,1432883472,1390206809,https://stackoverflow.com/questions/11933999/why-is-it-not-possible-to-use-private-method-in-a-lambda,"<p>It seems to be just a GCC bug in a special case when the lambda tries to access a protected member from parent class using fully qualified name. <a href=""http://ideone.com/DJezf"" rel=""noreferrer"">This does not work</a>:</p>

<pre><code>class Base {
protected:
    bool hasChild() const { return !childs_.empty(); }
    std::vector&lt;Foo&gt; childs_;
};

class Foo : public Base {
public:
  bool hasGrandChild() const {
    return std::any_of(childs_.begin(), childs_.end(), [](Foo const &amp;foo) {
      return foo.Base::hasChild();
    });
  }  
};
</code></pre>

<p>, but <a href=""http://ideone.com/zGtYI"" rel=""noreferrer"">this works</a>:</p>

<pre><code>class Foo : public Base {
public:
  bool hasGrandChild() const {
    return std::any_of(childs_.begin(), childs_.end(), [](Foo const &amp;foo) {
      return foo.hasChild();
    });
  }  
};
</code></pre>

<p>According to C++11, 5.1.2/3:</p>

<blockquote>
  <p>The type of the lambda-expression (which is also the type of the
  closure object) is a unique, unnamed non-union class type  called the
  closure type  whose properties are described below. This class type
  is not an aggregate (8.5.1). <strong>The closure type is declared in the
  smallest block scope, class scope, or namespace scope that contains
  the corresponding lambda-expression</strong>.</p>
</blockquote>

<p>And then C++11, 11.7/1:</p>

<blockquote>
  <p>A nested class is a member and as such has the same access rights as
  any other member.</p>
</blockquote>

<p>So the mentioned function-local lambda should have the same access rights as any other member of the class. Therefore it should be able to call a protected method from a parent class.</p>
",Juraj Blaho,Juraj Blaho,1345707482,1432883472,1432883472
http://stackoverflow.com/a/12093994/731300,How do I check for valid Git branch names?,9906,Alex Chamberlain,Alex Chamberlain,1345731451,1487582850,1406534300,https://stackoverflow.com/questions/12093748/how-do-i-check-for-valid-git-branch-names,"<p>Let's dissect the various rules and build regex parts from them:</p>

<ol>
<li><p>They can include slash <code>/</code> for hierarchical (directory) grouping, but no slash-separated component can begin with a dot <code>.</code> or end with the sequence <code>.lock</code>.</p>

<pre><code># must not contain /.
(?!.*/\.)
# must not end with .lock
(?&lt;!\.lock)$
</code></pre></li>
<li><p>They must contain at least one <code>/</code>. This enforces the presence of a category like heads/, tags/ etc. but the actual names are not restricted. If the <code>--allow-onelevel</code> option is used, this rule is waived.</p>

<pre><code>.+/.+  # may get more precise later
</code></pre></li>
<li><p>They cannot have two consecutive dots <code>..</code> anywhere.</p>

<pre><code>(?!.*\.\.)
</code></pre></li>
<li><p>They cannot have ASCII control characters (i.e. bytes whose values are lower than <code>\040</code>, or <code>\177 DEL</code>), space, tilde <code>~</code>, caret <code>^</code>, or colon <code>:</code> anywhere.</p>

<pre><code>[^\000-\037\177 ~^:]+   # pattern for allowed characters
</code></pre></li>
<li><p>They cannot have question-mark <code>?</code>, asterisk <code>*</code>, or open bracket <code>[</code> anywhere. See the <code>--refspec-pattern</code> option below for an exception to this rule.</p>

<pre><code>[^\000-\037\177 ~^:?*[]+   # new pattern for allowed characters
</code></pre></li>
<li><p>They cannot begin or end with a slash <code>/</code> or contain multiple consecutive slashes (see the <code>--normalize</code> option below for an exception to this rule)</p>

<pre><code>^(?!/)
(?&lt;!/)$
(?!.*//)
</code></pre></li>
<li><p>They cannot end with a dot <code>.</code>.</p>

<pre><code>(?&lt;!\.)$
</code></pre></li>
<li><p>They cannot contain a sequence <code>@{</code>.</p>

<pre><code>(?!.*@\{)
</code></pre></li>
<li><p>They cannot be the single character <code>@</code>.</p>

<pre><code>(?!@$)
</code></pre></li>
<li><p>They cannot contain a <code>\</code>.</p>

<pre><code>(?!.*\\)
</code></pre></li>
</ol>

<p>Piecing it all together we arrive at the following monstrosity:</p>

<pre><code>^(?!.*/\.)(?!.*\.\.)(?!/)(?!.*//)(?!.*@\{)(?!@$)(?!.*\\)[^\000-\037\177 ~^:?*[]+/[^\000-\037\177 ~^:?*[]+(?&lt;!\.lock)(?&lt;!/)(?&lt;!\.)$
</code></pre>

<p>And if you want to exclude those that start with <code>build-</code> then just add another lookahead:</p>

<pre><code>^(?!build-)(?!.*/\.)(?!.*\.\.)(?!/)(?!.*//)(?!.*@\{)(?!@$)(?!.*\\)[^\000-\037\177 ~^:?*[]+/[^\000-\037\177 ~^:?*[]+(?&lt;!\.lock)(?&lt;!/)(?&lt;!\.)$
</code></pre>

<p>This can be optimized a bit as well by conflating a few things that look for common patterns:</p>

<pre><code>^(?!@$|build-|/|.*([/.]\.|//|@\{|\\))[^\000-\037\177 ~^:?*[]+/[^\000-\037\177 ~^:?*[]+(?&lt;!\.lock|[/.])$
</code></pre>
",Joey,Joey,1345732272,1487582850,1487582850
http://stackoverflow.com/a/12095836/753676,Quick way of expanding IPv6 Addresses with PHP,2446,Mike Mackintosh,,1345737975,1345739098,0,https://stackoverflow.com/questions/12095835/quick-way-of-expanding-ipv6-addresses-with-php,"<p>The following is a two liner, where <code>$ip</code> is a condensed IPv6 address. Returns expanded <code>$ip</code>.</p>

<p><strong>Example</strong>:</p>

<pre><code>$ip = ""fe80:01::af0"";
echo expand($ip); // fe80:0001:0000:0000:0000:0000:0000:0af0
</code></pre>

<p><strong>Function</strong>:</p>

<pre><code>function expand($ip){
    $hex = unpack(""H*hex"", inet_pton($ip));         
    $ip = substr(preg_replace(""/([A-f0-9]{4})/"", ""$1:"", $hex['hex']), 0, -1);

    return $ip;
}
</code></pre>
",Mike Mackintosh,Mike Mackintosh,1345737975,1345739098,1345739098
http://stackoverflow.com/a/12101012/1828637,Convert a binary NodeJS Buffer to JavaScript ArrayBuffer,110606,Drake Amara,Mark Amery,1324585267,1549657448,1449682259,https://stackoverflow.com/questions/8609289/convert-a-binary-nodejs-buffer-to-javascript-arraybuffer,"<p><a href=""https://nodejs.org/docs/latest/api/buffer.html#buffer_buffers_and_typedarray"" rel=""noreferrer"">Instances of <code>Buffer</code> are also instances of <code>Uint8Array</code></a> in node.js 4.x and higher.  Thus, the most efficient solution is to access the <code>buf.buffer</code> property directly, as per <a href=""https://stackoverflow.com/a/31394257/1375574"">https://stackoverflow.com/a/31394257/1375574</a>.  The Buffer constructor also takes an ArrayBufferView argument if you need to go the other direction.</p>

<p>Note that this will not create a copy, which means that writes to any ArrayBufferView will write through to the original Buffer instance.</p>

<p><hr>
In older versions, node.js has both ArrayBuffer as part of v8, but the Buffer class provides a more flexible API.  In order to read or write to an ArrayBuffer, you only need to create a view and copy across.</p>

<p>From Buffer to ArrayBuffer:</p>

<pre><code>function toArrayBuffer(buf) {
    var ab = new ArrayBuffer(buf.length);
    var view = new Uint8Array(ab);
    for (var i = 0; i &lt; buf.length; ++i) {
        view[i] = buf[i];
    }
    return ab;
}
</code></pre>

<p>From ArrayBuffer to Buffer:</p>

<pre><code>function toBuffer(ab) {
    var buf = Buffer.alloc(ab.byteLength);
    var view = new Uint8Array(ab);
    for (var i = 0; i &lt; buf.length; ++i) {
        buf[i] = view[i];
    }
    return buf;
}
</code></pre>
",Martin Thomson,Ben,1345761703,1549657448,1549657448
http://stackoverflow.com/a/12113479/535646,"Multidimensional array index to row,col,depth values?",3013,user1010005,Drise,1345825175,1345827953,1345826999,https://stackoverflow.com/questions/12113116/multidimensional-array-index-to-row-col-depth-values,"<p>First of all I think you indexing system is a bit off. The way you have things arranged different values of x, y, and z can give the same offset. So, first of all, assuming that TILE_SIZE is how many cells of the array store the data for a given point:</p>

<pre><code>myArray = new arr[xSize*ySize*zSize*TILESIZE]
int offset2D = (x*ySize*zSize + y*zSize)*TILE_SIZE;
int offset3D = (x*ySize*zSize + y*zSize + z)*TILE_SIZE;
</code></pre>

<p>To get x,y,z back from the offset one simply does the following:</p>

<pre><code>temp = offset/TILE_SIZE;
x = temp/(ySize*zSize);
y = (temp%(ySize*zSize))/zSize;
z = (temp%(ySize*zSize))%zSize;
</code></pre>

<p>For multiple dimensions:</p>

<pre><code>temp = offset/TILE_SIZE;
sizeProduct = 1;
for(int k=1; k&lt;numDims; ++k)
{
    sizeProduct*=size[k];
}
for(int i=0; i&lt;numDims; ++i)
{
    vector[i]=temp/sizeProduct;
    temp = temp % sizeProduct;
    if((i+1)&lt;numDims)
    {
        sizeProduct/=sizes[i+1];
    }
}
</code></pre>

<p>To calculate array sizes in multiple dimensions:</p>

<pre><code>int arraySize = TILE_SIZE;
for(int i=0; i&lt;numDims; ++i)
{
    arraySize*=sizes[i];
}
</code></pre>

<p>To calculate array indices in multiple dimensions (assuming vector is your array of coordinates):</p>

<pre><code>int index =0;
sizeProduct = 1;
for(int k=1; k&lt;numDims; ++k)
{
    sizeProduct*=size[k];
}
for(int i=0; i&lt;numDims; ++i)
{
    index+=sizeProduct*vector[i];
    if((i+1)&lt;numDims)
    {
        sizeProduct/=sizes[i+1];
    }
}
index*=TILE_SIZE;
</code></pre>
",James Matta,James Matta,1345826580,1345827953,1345827953
http://stackoverflow.com/a/12131993/108197,How to interpret empty HTTP Accept header?,12435,Jonas Sch&#228;fer,Luke Girvin,1345991261,1490090979,1490090979,https://stackoverflow.com/questions/12130910/how-to-interpret-empty-http-accept-header,"<p>From <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2"">RFC2616 Sec4.2</a>:</p>

<blockquote>
  <p>Each header field consists of a name followed by a colon ("":"") and the field value.</p>
</blockquote>

<p>At first glance, this would seem to put messages that specify empty header values in the malformed, non-compliant category. However, the augmented BNF form outlined in <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.1"">RFC2616 Sec2.1</a> indicates that </p>

<blockquote>
  <p>""#element"" allows any number, including zero</p>
</blockquote>

<p>As this is the declaration used to specify Accept header values, it appears that empty values are valid.</p>

<p>Parsing empty headers and headers with nothing but whitespace can be problematic because of the following direction from the spec:</p>

<blockquote>
  <p>The field-content does not include any leading or trailing LWS: linear
  white space occurring before the first non-whitespace character of the
  field-value or after the last non-whitespace character of the
  field-value. Such leading or trailing LWS MAY be removed without
  changing the semantics of the field value. Any LWS that occurs between
  field-content MAY be replaced with a single SP before interpreting the
  field value or forwarding the message downstream.</p>
</blockquote>

<p>IMHO, sending an empty header is completely pointless. It shouldn't be done, and parsers may not correctly parse these headers. Traditionally, people who want to circumvent such  limitations when dealing with non-compliant components have specified ""pseudo-empty"" values like this:</p>

<p><code>X-MyCustomHeader: """"</code></p>

<p>If you simply want to validate that a header field was sent as some form of boolean switch, consider sending a placeholder value like the above instead of an empty value.</p>

<hr>

<p><strong>Update</strong></p>

<p>I guess I wasn't very clear in directly answering the question: in the case of an empty Accept header you really have two options:</p>

<ul>
<li>Send a <code>406 Not Acceptable</code> response to inform the client that you don't offer any content types for an empty Accept value (duh).</li>
</ul>

<p>This is justified, but not required by <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1"">RFC2616 Sec14.1</a>:</p>

<blockquote>
  <p>If an Accept header field is present, and if the server cannot send a
  response which is acceptable according to the combined Accept field
  value, then the server SHOULD send a 406 (not acceptable) response.</p>
</blockquote>

<ul>
<li>Or, because this is not required and it's highly unlikely the user doesn't accept <strong>any</strong> content-types (otherwise, why would they bother to send the request?) ... I would suggest treating an empty <code>Accept:</code> value (if message rejection isn't an option) the same as <code>Accept: */*</code>.</li>
</ul>
",rdlowrey,rdlowrey,1345999778,1346003868,1346003868
http://stackoverflow.com/a/12151322/84283,How can I get query string values in JavaScript?,3463606,Kemal Emin,Brad Larson,1243066248,1555321091,1428368108,https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript,"<h1>URLSearchParams</h1>

<p>Firefox 44+, Opera 36+, Edge 17+, Safari 10.3+ and Chrome 49+ support the <a href=""https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams"" rel=""noreferrer"">URLSearchParams</a> API:</p>

<ul>
<li><a href=""https://developers.google.com/web/updates/2016/01/urlsearchparams"" rel=""noreferrer"">Chrome Announcement and details</a></li>
<li><a href=""https://dev.opera.com/blog/opera-36/"" rel=""noreferrer"">Opera Announcement and details</a></li>
<li><a href=""https://developer.mozilla.org/en-US/Firefox/Releases/44#Miscellaneous"" rel=""noreferrer"">Firefox Announcement and details</a></li>
</ul>

<p>There is a google-suggested <strong><a href=""https://github.com/WebReflection/url-search-params"" rel=""noreferrer"">URLSearchParams polyfill</a></strong> for the stable versions of IE.</p>

<p>It is not standardized by <a href=""https://www.w3.org/TR/2014/WD-url-1-20141209/#interface-urlsearchparams"" rel=""noreferrer"">W3C</a>, but it is a living standard by <a href=""https://url.spec.whatwg.org"" rel=""noreferrer"">WhatWG</a>.</p>

<p>You can use it on location, but you need to remove the <code>?</code> question mark (for example, with <code>.slice(1)</code>):</p>

<pre><code>let params = new URLSearchParams(location.search);
</code></pre>

<p>or</p>

<pre><code>let params = (new URL(location)).searchParams;
</code></pre>

<p>Or of course on any URL:</p>

<pre><code>let url = new URL('https://example.com?foo=1&amp;bar=2');
let params = new URLSearchParams(url.search);
</code></pre>

<p>You can get params also using a shorthand <code>.searchParams</code> property on the URL object, like this:</p>

<pre><code>let params = new URL('https://example.com?foo=1&amp;bar=2').searchParams;
params.get('foo'); // ""1""
params.get('bar'); // ""2"" 
</code></pre>

<p>You read/set parameters through the <code>get(KEY)</code>, <code>set(KEY, VALUE)</code>, <code>append(KEY, VALUE)</code> API. You can also iterate over all values <code>for (let p of params) {}</code>.</p>

<p>A <a href=""https://trac.webkit.org/browser/trunk/Source/WebCore/platform/URLParser.cpp"" rel=""noreferrer"">reference implementation</a> and a <a href=""https://googlechrome.github.io/samples/urlsearchparams/"" rel=""noreferrer"">sample page</a> are available for auditing and testing.</p>
",Paul Sweatte,nhahtdh,1346113661,1534417903,1534417903
http://stackoverflow.com/a/1219983/841108,HTML-encoding lost when attribute read from input field,615394,AJM,Alan H.,1249247309,1560692851,1554761283,https://stackoverflow.com/questions/1219860/html-encoding-lost-when-attribute-read-from-input-field,"<p><strong>EDIT:</strong> This answer was posted a long ago, and the <code>htmlDecode</code> function introduced a XSS vulnerability. It has been modified changing the temporary element from a <code>div</code> to a <code>textarea</code> reducing the XSS chance. But nowadays, I would encourage you to use the DOMParser API as suggested in <a href=""https://stackoverflow.com/a/34064434/5445"">other anwswer</a>.</p>

<hr>

<p>I use these functions:</p>

<pre><code>function htmlEncode(value){
  // Create a in-memory element, set its inner text (which is automatically encoded)
  // Then grab the encoded contents back out. The element never exists on the DOM.
  return $('&lt;textarea/&gt;').text(value).html();
}

function htmlDecode(value){
  return $('&lt;textarea/&gt;').html(value).text();
}
</code></pre>

<p>Basically a div element is created in memory, but it is never appended to the document.</p>

<p>On the <code>htmlEncode</code> function I set the <code>innerText</code> of the element, and retrieve the encoded <code>innerHTML</code>; on the <code>htmlDecode</code> function I set the <code>innerHTML</code> value of the element and the <code>innerText</code> is retrieved.</p>

<p>Check a running example <a href=""http://jsbin.com/ejuru"" rel=""noreferrer"">here</a>.</p>
",CMS,CMS,1249250590,1551826011,1551826011
http://stackoverflow.com/a/12202205/1945875,How do I truncate a string and return both first and last part without a center part?,810,Alex,the Tin Man,1346346927,1346359172,1346348227,https://stackoverflow.com/questions/12202112/how-do-i-truncate-a-string-and-return-both-first-and-last-part-without-a-center,"<p>Why not try something like:</p>

<pre><code>s[0..l] + ""..."" + s[s.length-l..s.length]
</code></pre>

<p>with l * 2 + 3 being the desired length, so perhaps a method something like this</p>

<pre><code>def middle_truncate(s,length=20,ellipsis=""..."")
 return s if s.length &lt;= length + ellipsis.length
 return s[0..length] if length &lt; ellipsis.length
 len = (length - ellipsis.length)/2 
 s_len = len - length % 2
 s[0..s_len] + ellipsis + s[s.length-len..s.length]
end

s =""I'm a very long long long string""
puts middle_truncate(s, 100) 
puts middle_truncate(s, 21) 
puts middle_truncate(s, 11) 
puts middle_truncate(s, 5) 
puts middle_truncate(s*2, 45)
puts middle_truncate(s)
puts middle_truncate(s,2) 
</code></pre>

<p>outputs</p>

<pre><code>I'm a very long long long string
I'm a ver...ng string
I'm ...ring
I...g
I'm a very long long ...long long long string
I'm a ver...g string
I'm
</code></pre>
",Kenny Grant,Kenny Grant,1346347276,1346358801,1346358801
http://stackoverflow.com/a/12230368/1074390,Is glm::ortho() actually wrong?,21009,Jamie Syme,Nicol Bolas,1346524250,1361137489,1361137489,https://stackoverflow.com/questions/12230312/is-glmortho-actually-wrong,"<p>It doesn't appear that it should be broken from the source code (v 0.9.3.4)</p>

<pre><code>template &lt;typename valType&gt; 
GLM_FUNC_QUALIFIER detail::tmat4x4&lt;valType&gt; ortho
(
    valType const &amp; left, 
    valType const &amp; right, 
    valType const &amp; bottom, 
    valType const &amp; top, 
    valType const &amp; zNear, 
    valType const &amp; zFar
)
{
    detail::tmat4x4&lt;valType&gt; Result(1);
    Result[0][0] = valType(2) / (right - left);
    Result[1][1] = valType(2) / (top - bottom);
    Result[2][2] = - valType(2) / (zFar - zNear);
    Result[3][0] = - (right + left) / (right - left);
    Result[3][1] = - (top + bottom) / (top - bottom);
    Result[3][2] = - (zFar + zNear) / (zFar - zNear);
    return Result;
}
</code></pre>

<p>My only thought is that this template might be creating a matrix of integers (as you've passed all ints to the function), and thus doing integer division instead of floating point. Can you try appending <code>.f</code> to all your parameters?</p>

<p><code>glm::mat4 projMat = glm::ortho( 0.f, 400.f, 0.f, 400.f, -1.f, 1.f );</code></p>
",Tim,,1346524855,1346524855,0
http://stackoverflow.com/a/12260597/400691,How to launch tests for django reusable app?,6561,dzida,Kristian Glass,1285955009,1541685525,1347365229,https://stackoverflow.com/questions/3841725/how-to-launch-tests-for-django-reusable-app,"<p>The correct usage of Django (>= 1.4) test runner is as follows:</p>

<pre><code>import django, sys
from django.conf import settings

settings.configure(DEBUG=True,
               DATABASES={
                    'default': {
                        'ENGINE': 'django.db.backends.sqlite3',
                    }
                },
               ROOT_URLCONF='myapp.urls',
               INSTALLED_APPS=('django.contrib.auth',
                              'django.contrib.contenttypes',
                              'django.contrib.sessions',
                              'django.contrib.admin',
                              'myapp',))

try:
    # Django &lt; 1.8
    from django.test.simple import DjangoTestSuiteRunner
    test_runner = DjangoTestSuiteRunner(verbosity=1)
except ImportError:
    # Django &gt;= 1.8
    django.setup()
    from django.test.runner import DiscoverRunner
    test_runner = DiscoverRunner(verbosity=1)

failures = test_runner.run_tests(['myapp'])
if failures:
    sys.exit(failures)
</code></pre>

<p>DjangoTestSuiteRunner and DiscoverRunner have mostly compatible interfaces.</p>

<p>For more information you should consult the ""Defining a Test Runner"" docs:</p>

<ul>
<li><a href=""https://docs.djangoproject.com/en/1.4/topics/testing/#defining-a-test-runner"" rel=""nofollow noreferrer"">DjangoTestSuiteRunner</a> (Django >=1.4, &lt;1.8)</li>
<li><a href=""https://docs.djangoproject.com/en/1.8/topics/testing/advanced/#defining-a-test-runner"" rel=""nofollow noreferrer"">DiscoverRunner</a> (Django >=1.8)</li>
</ul>
",berni,meshy,1346751204,1541685525,1541685525
http://stackoverflow.com/a/12260597/400691.,How to launch tests for django reusable app?,6561,dzida,Kristian Glass,1285955009,1541685525,1347365229,https://stackoverflow.com/questions/3841725/how-to-launch-tests-for-django-reusable-app,"<p>The correct usage of Django (>= 1.4) test runner is as follows:</p>

<pre><code>import django, sys
from django.conf import settings

settings.configure(DEBUG=True,
               DATABASES={
                    'default': {
                        'ENGINE': 'django.db.backends.sqlite3',
                    }
                },
               ROOT_URLCONF='myapp.urls',
               INSTALLED_APPS=('django.contrib.auth',
                              'django.contrib.contenttypes',
                              'django.contrib.sessions',
                              'django.contrib.admin',
                              'myapp',))

try:
    # Django &lt; 1.8
    from django.test.simple import DjangoTestSuiteRunner
    test_runner = DjangoTestSuiteRunner(verbosity=1)
except ImportError:
    # Django &gt;= 1.8
    django.setup()
    from django.test.runner import DiscoverRunner
    test_runner = DiscoverRunner(verbosity=1)

failures = test_runner.run_tests(['myapp'])
if failures:
    sys.exit(failures)
</code></pre>

<p>DjangoTestSuiteRunner and DiscoverRunner have mostly compatible interfaces.</p>

<p>For more information you should consult the ""Defining a Test Runner"" docs:</p>

<ul>
<li><a href=""https://docs.djangoproject.com/en/1.4/topics/testing/#defining-a-test-runner"" rel=""nofollow noreferrer"">DjangoTestSuiteRunner</a> (Django >=1.4, &lt;1.8)</li>
<li><a href=""https://docs.djangoproject.com/en/1.8/topics/testing/advanced/#defining-a-test-runner"" rel=""nofollow noreferrer"">DiscoverRunner</a> (Django >=1.8)</li>
</ul>
",berni,meshy,1346751204,1541685525,1541685525
http://stackoverflow.com/a/1229667/72987,Parsing empty options in Python,10258,directedition,AFoglia,1249410767,1365846772,1350998185,https://stackoverflow.com/questions/1229146/parsing-empty-options-in-python,"<p>Sorry, misunderstood the question with my first answer.  You can accomplish the ability to have optional arguments to command line flags use the <em>callback</em> action type when you define an option.  Use the following function as a call back (you will likely wish to tailor to your needs) and configure it for each of the flags that can optionally receive an argument:</p>

<pre><code>import optparse

def optional_arg(arg_default):
    def func(option,opt_str,value,parser):
        if parser.rargs and not parser.rargs[0].startswith('-'):
            val=parser.rargs[0]
            parser.rargs.pop(0)
        else:
            val=arg_default
        setattr(parser.values,option.dest,val)
    return func

def main(args):
    parser=optparse.OptionParser()
    parser.add_option('--foo',action='callback',callback=optional_arg('empty'),dest='foo')
    parser.add_option('--file',action='store_true',default=False)
    return parser.parse_args(args)

if __name__=='__main__':
    import sys
    print main(sys.argv)
</code></pre>

<p><br><br></p>

<p>Running from the command line you'll see this:</p>

<pre><code># python parser.py
(&lt;Values at 0x8e42d8: {'foo': None, 'file': False}&gt;, [])

# python parser.py --foo
(&lt;Values at 0x8e42d8: {'foo': 'empty', 'file': False}&gt;, [])

# python parser.py --foo bar
(&lt;Values at 0x8e42d8: {'foo': 'bar', 'file': False}&gt;, [])
</code></pre>
",Mark Roddy,,1249416690,1249416690,0
http://stackoverflow.com/a/12303155/1045199,Android:TextView height doesn&#39;t change after shrinking the font size,8587,jclova,jclova,1330726967,1360963420,1330962672,https://stackoverflow.com/questions/9541196/androidtextview-height-doesnt-change-after-shrinking-the-font-size,"<p>I found that adding the character ""\u200b"" does not appear as a broken character, nor does it add a whitespace/linebreak.</p>

<p>For more details on the ""ZERO WIDTH SPACE"" see: <a href=""http://www.fileformat.info/info/unicode/char/200b/index.htm"" rel=""nofollow"">http://www.fileformat.info/info/unicode/char/200b/index.htm</a></p>
",Moritz,,1346944358,1346944358,0
http://stackoverflow.com/a/1232046/2970321,How do I empty an array in JavaScript?,2267632,akano1,Peter Mortensen,1249463319,1552299163,1447269772,https://stackoverflow.com/questions/1232040/how-do-i-empty-an-array-in-javascript,"<p>Ways to clear an existing array <code>A</code>:</p>

<p><strong>Method 1</strong></p>

<p>(this was my original answer to the question)</p>

<pre><code>A = [];
</code></pre>

<p>This code will set the variable <code>A</code> to a new empty array. This is perfect if you don't have <strong>references to the original array <code>A</code></strong> anywhere else because this actually creates a brand new (empty) array. You should be careful with this method because if you have referenced this array from another variable or property, the original array will remain unchanged. Only use this if you only reference the array by its original variable <code>A</code>.</p>

<p>This is also the fastest solution.</p>

<p>This code sample shows the issue you can encounter when using this method:</p>

<pre><code>var arr1 = ['a','b','c','d','e','f'];
var arr2 = arr1;  // Reference arr1 by another variable 
arr1 = [];
console.log(arr2); // Output ['a','b','c','d','e','f']
</code></pre>

<p><strong>Method 2</strong> (as <a href=""https://stackoverflow.com/a/1234337/113570"">suggested</a> by <a href=""https://stackoverflow.com/users/2214/matthew-crumley"">Matthew Crumley</a>)</p>

<pre><code>A.length = 0
</code></pre>

<p>This will clear the existing array by setting its length to 0. Some have argued that this may not work in all implementations of JavaScript, but it turns out that this is not the case. It also works when using ""strict mode"" in ECMAScript 5 because the length property of an array is a read/write property.</p>

<p><strong>Method 3</strong> (as <a href=""https://stackoverflow.com/a/8134354/113570"">suggested</a> by <a href=""https://stackoverflow.com/users/1047275/anthony"">Anthony</a>)</p>

<pre><code>A.splice(0,A.length)
</code></pre>

<p>Using <code>.splice()</code> will work perfectly, but since the <code>.splice()</code> function will return an array with all the removed items, it will actually return a copy of the original array. Benchmarks suggest that this has no effect on performance whatsoever.</p>

<p><strong>Method 4</strong> (as <a href=""https://stackoverflow.com/a/17306971/113570"">suggested</a> by <a href=""https://stackoverflow.com/users/990356/tanguy-k"">tanguy_k</a>)</p>

<pre><code>while(A.length &gt; 0) {
    A.pop();
}
</code></pre>

<p>This solution is not very succinct, and it is also the slowest solution, contrary to earlier benchmarks referenced in the original answer.</p>

<p><strong>Performance</strong></p>

<p>Of all the methods of clearing an <strong><em>existing array</em></strong>, methods 2 and 3 are very similar in performance and are a lot faster than method 4. See this <a href=""http://jsben.ch/#/hyj65"" rel=""noreferrer"">benchmark</a>.</p>

<p>As pointed out by <a href=""https://stackoverflow.com/users/47401/diadistis"">Diadistis</a> in their <a href=""https://stackoverflow.com/a/28548360/113570"">answer</a> below, the original benchmarks that were used to determine the performance of the four methods described above were flawed. The original benchmark reused the cleared array so the second iteration was clearing an array that was already empty.</p>

<p>The following benchmark fixes this flaw: <a href=""http://jsben.ch/#/hyj65"" rel=""noreferrer"">http://jsben.ch/#/hyj65</a>. It clearly shows that methods #2 (length property) and #3 (splice) are the fastest (not counting method #1 which doesn't change the original array).</p>

<hr/>

<p>This has been a hot topic and the cause of a lot of controversy. There are actually many correct answers and because this answer has been marked as the accepted answer for a very long time, I will include all of the methods here. If you vote for this answer, please upvote the other answers that I have referenced as well.</p>
",Philippe Leybaert,Community,1249463400,1482160317,1495542891
http://stackoverflow.com/a/1232046/88513,How do I empty an array in JavaScript?,2267632,akano1,Peter Mortensen,1249463319,1552299163,1447269772,https://stackoverflow.com/questions/1232040/how-do-i-empty-an-array-in-javascript,"<p>Ways to clear an existing array <code>A</code>:</p>

<p><strong>Method 1</strong></p>

<p>(this was my original answer to the question)</p>

<pre><code>A = [];
</code></pre>

<p>This code will set the variable <code>A</code> to a new empty array. This is perfect if you don't have <strong>references to the original array <code>A</code></strong> anywhere else because this actually creates a brand new (empty) array. You should be careful with this method because if you have referenced this array from another variable or property, the original array will remain unchanged. Only use this if you only reference the array by its original variable <code>A</code>.</p>

<p>This is also the fastest solution.</p>

<p>This code sample shows the issue you can encounter when using this method:</p>

<pre><code>var arr1 = ['a','b','c','d','e','f'];
var arr2 = arr1;  // Reference arr1 by another variable 
arr1 = [];
console.log(arr2); // Output ['a','b','c','d','e','f']
</code></pre>

<p><strong>Method 2</strong> (as <a href=""https://stackoverflow.com/a/1234337/113570"">suggested</a> by <a href=""https://stackoverflow.com/users/2214/matthew-crumley"">Matthew Crumley</a>)</p>

<pre><code>A.length = 0
</code></pre>

<p>This will clear the existing array by setting its length to 0. Some have argued that this may not work in all implementations of JavaScript, but it turns out that this is not the case. It also works when using ""strict mode"" in ECMAScript 5 because the length property of an array is a read/write property.</p>

<p><strong>Method 3</strong> (as <a href=""https://stackoverflow.com/a/8134354/113570"">suggested</a> by <a href=""https://stackoverflow.com/users/1047275/anthony"">Anthony</a>)</p>

<pre><code>A.splice(0,A.length)
</code></pre>

<p>Using <code>.splice()</code> will work perfectly, but since the <code>.splice()</code> function will return an array with all the removed items, it will actually return a copy of the original array. Benchmarks suggest that this has no effect on performance whatsoever.</p>

<p><strong>Method 4</strong> (as <a href=""https://stackoverflow.com/a/17306971/113570"">suggested</a> by <a href=""https://stackoverflow.com/users/990356/tanguy-k"">tanguy_k</a>)</p>

<pre><code>while(A.length &gt; 0) {
    A.pop();
}
</code></pre>

<p>This solution is not very succinct, and it is also the slowest solution, contrary to earlier benchmarks referenced in the original answer.</p>

<p><strong>Performance</strong></p>

<p>Of all the methods of clearing an <strong><em>existing array</em></strong>, methods 2 and 3 are very similar in performance and are a lot faster than method 4. See this <a href=""http://jsben.ch/#/hyj65"" rel=""noreferrer"">benchmark</a>.</p>

<p>As pointed out by <a href=""https://stackoverflow.com/users/47401/diadistis"">Diadistis</a> in their <a href=""https://stackoverflow.com/a/28548360/113570"">answer</a> below, the original benchmarks that were used to determine the performance of the four methods described above were flawed. The original benchmark reused the cleared array so the second iteration was clearing an array that was already empty.</p>

<p>The following benchmark fixes this flaw: <a href=""http://jsben.ch/#/hyj65"" rel=""noreferrer"">http://jsben.ch/#/hyj65</a>. It clearly shows that methods #2 (length property) and #3 (splice) are the fastest (not counting method #1 which doesn't change the original array).</p>

<hr/>

<p>This has been a hot topic and the cause of a lot of controversy. There are actually many correct answers and because this answer has been marked as the accepted answer for a very long time, I will include all of the methods here. If you vote for this answer, please upvote the other answers that I have referenced as well.</p>
",Philippe Leybaert,Community,1249463400,1482160317,1495542891
http://stackoverflow.com/a/12336075/282882,"jslint error: Unexpected &#39;in&#39;. Compare with undefined, or use the hasOwnProperty",6341,house9,,1311650665,1347157999,0,https://stackoverflow.com/questions/6824895/jslint-error-unexpected-in-compare-with-undefined-or-use-the-hasownproperty,"<p>Ignore the error. The ""in"" operator is clearly defined in <a href=""http://ecma-international.org/ecma-262/5.1/"" rel=""noreferrer"">ECMA 262-5.1 / June 2011</a> sec-11.8.7</p>

<p>There appear to be only three outcomes for <code>'someProperty' in anObject</code> which is one of: <code>true</code>, <code>false</code>, or a <code>TypeError</code> exception is thrown. When it evaluates to <code>true</code>, then there is definitely <code>'someProperty' in anObject</code>. When it evaluates to <code>false</code> there is definitely not <code>'someProperty' in anObject</code>. When a <code>TypeError</code> is thrown there is definitely not <code>'someProperty' in anObject</code> because <code>anObject</code> is either null or it isn't an object at all. This all seems very clear to me. When I want to know if an object has a property and, I don't care if that property is the object's own property or being inherited and, I don't care what the value of the property is, then I simply look for <code>'someProperty' in anObject</code>.</p>

<h3>
Warning
</h3>

<p><i>Caution: some would have you check for <code>anObject.someProperty !== undefined</code> but that isn't really checking whether or not the object has the property. What it's doing is checking whether the object has the property <b>AND</b> that the value of that property is <b>NOT</b> undefined. Some would have you check for <code>anObject.hasOwnProperty('someProperty');</code> but that will only tell you if the object has that property <b>AND</b> has <b>NOT</b> inherited it somehow. Don't believe me? Try the following:</i></p>

<pre><code>console.log(document.body.tagName);
// BODY

console.log(document.body.hasOwnProperty('tagName'));
// false, it's inherited

console.log('tagName' in document.body);
// true, it does have the property

document.body.wobbles = undefined;
// new property added to document.body

console.log('wobbles' in document.body);
// true, it does have the property

console.log(document.body.wobbles !== undefined);
// false, the value really IS undefined
</code></pre>

<p>I've written an article about the ""in"" operator that goes into more detail. If you want to read it it's at: <a href=""http://matthewkastor.blogspot.com/2012/09/Unexpected--in---Compare-with-undefined--or-use-the-hasOwnProperty-method-instead.html"" rel=""noreferrer""><a href=""http://matthewkastor.blogspot.com/2012/09/Unexpected--in---Compare-with-undefined--or-use-the-hasOwnProperty-method-instead.html"" rel=""noreferrer"">http://matthewkastor.blogspot.com/2012/09/Unexpected--in---Compare-with-undefined--or-use-the-hasOwnProperty-method-instead.html</a></a> The bottom line is that you should just ignore this error and wrap things up in a try catch block if the object might be null or not an object.</p>

<pre><code>function hasProperty(prop, obj) {
    try {
        return prop in obj;
    } catch(e) {
        return e;
    }
}
</code></pre>
",Kastor,,1347157999,1347157999,0
http://stackoverflow.com/a/1233644/4972,How do I require an inline in the Django Admin?,9540,AJ.,,1248963679,1545306555,0,https://stackoverflow.com/questions/1206903/how-do-i-require-an-inline-in-the-django-admin,"<p>I took Carl's advice and made a much better implementation then the hack-ish one I mentioned in my comment to his answer.  Here is my solution:</p>

<p>From my forms.py:</p>

<pre><code>from django.forms.models import BaseInlineFormSet


class RequiredInlineFormSet(BaseInlineFormSet):
    """"""
    Generates an inline formset that is required
    """"""

    def _construct_form(self, i, **kwargs):
        """"""
        Override the method to change the form attribute empty_permitted
        """"""
        form = super(RequiredInlineFormSet, self)._construct_form(i, **kwargs)
        form.empty_permitted = False
        return form
</code></pre>

<p>And the admin.py</p>

<pre><code>class ProfileInline(admin.StackedInline):
    """"""
    Allows profile to be added when creating user
    """"""
    model = Profile
    extra = 1
    max_num = 1
    formset = RequiredInlineFormSet


class UserProfileAdmin(admin.ModelAdmin):
    """"""
    Options for the admin interface
    """"""
    inlines = [ProfileInline]
    list_display = ['edit_obj', 'name', 'username', 'email', 'is_active',
        'last_login', 'delete_obj']
    list_display_links = ['username']
    list_filter = ['is_active']
    fieldsets = (
        (None, {
            'fields': ('first_name', 'last_name', 'email', 'username',
                'is_active', 'is_superuser')}),
        (('Groups'), {'fields': ('groups', )}),
    )
    ordering = ['last_name', 'first_name']
    search_fields = ['first_name', 'last_name']


admin.site.register(User, UserProfileAdmin)
</code></pre>

<p>This does exactly what I want, it makes the Profile inline formset validate.  So since there are required fields in the profile form it will validate and fail if the required information isn't entered on the inline form.</p>
",AJ.,L42y,1249482721,1330062125,1330062125
http://stackoverflow.com/a/1235363/3005167,Using numpy to build an array of all combinations of two arrays,92231,Rafael S. Calsaverini,Fermi paradox,1248975147,1556610073,1453403909,https://stackoverflow.com/questions/1208118/using-numpy-to-build-an-array-of-all-combinations-of-two-arrays,"<p>Here's a pure-numpy implementation. It's ca. 5 faster than using itertools.</p>

<pre><code>
import numpy as np

def cartesian(arrays, out=None):
    """"""
    Generate a cartesian product of input arrays.

    Parameters
    ----------
    arrays : list of array-like
        1-D arrays to form the cartesian product of.
    out : ndarray
        Array to place the cartesian product in.

    Returns
    -------
    out : ndarray
        2-D array of shape (M, len(arrays)) containing cartesian products
        formed of input arrays.

    Examples
    --------
    >>> cartesian(([1, 2, 3], [4, 5], [6, 7]))
    array([[1, 4, 6],
           [1, 4, 7],
           [1, 5, 6],
           [1, 5, 7],
           [2, 4, 6],
           [2, 4, 7],
           [2, 5, 6],
           [2, 5, 7],
           [3, 4, 6],
           [3, 4, 7],
           [3, 5, 6],
           [3, 5, 7]])

    """"""

    arrays = [np.asarray(x) for x in arrays]
    dtype = arrays[0].dtype

    n = np.prod([x.size for x in arrays])
    if out is None:
        out = np.zeros([n, len(arrays)], dtype=dtype)

    m = n / arrays[0].size
    out[:,0] = np.repeat(arrays[0], m)
    if arrays[1:]:
        cartesian(arrays[1:], out=out[0:m,1:])
        for j in xrange(1, arrays[0].size):
            out[j*m:(j+1)*m,1:] = out[0:m,1:]
    return out
</code></pre>
",pv.,,1249501722,1249501722,0
http://stackoverflow.com/a/123666/1210055,A comprehensive regex for phone number validation,862045,Nicholas Trandem,Taryn,1222200822,1550515017,1490199527,https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation,"<p>It turns out that there's something of a spec for this, at least for North America, called the <a href=""http://en.wikipedia.org/wiki/North_American_Numbering_Plan"" rel=""noreferrer"">NANP</a>. </p>

<p>You need to specify exactly what you want. What are legal delimiters? Spaces, dashes, and periods? No delimiter allowed? Can one mix delimiters (e.g., +0.111-222.3333)? How are extensions (e.g., 111-222-3333 x 44444) going to be handled? What about special numbers, like 911? Is the area code going to be optional or required? </p>

<p>Here's a regex for a 7 or 10 digit number, with extensions allowed, delimiters are spaces, dashes, or periods:</p>

<pre><code>^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$
</code></pre>
",Justin R.,Justin R.,1222201959,1283378815,1283378815
http://stackoverflow.com/a/123681/298479,A comprehensive regex for phone number validation,862045,Nicholas Trandem,Taryn,1222200822,1550515017,1490199527,https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation,"<p>Better option... just strip all non-digit characters on input (except 'x' and leading '+' signs), taking care because of the British tendency to write numbers in the non-standard form <code>+44 (0) ...</code> when asked to use the international prefix (in that specific case, you should discard the <code>(0)</code> entirely).</p>

<p>Then, you end up with values like:</p>

<pre><code> 12345678901
 12345678901x1234
 345678901x1234
 12344678901
 12345678901
 12345678901
 12345678901
 +4112345678
 +441234567890
</code></pre>

<p>Then when you display, reformat to your hearts content. e.g.</p>

<pre><code>  1 (234) 567-8901
  1 (234) 567-8901 x1234
</code></pre>
",scunliffe,mwfearnley,1222202151,1457606877,1457606877
http://stackoverflow.com/a/12370499/3658919,Adding information to an exception?,50399,anijhaw,Georgy,1305826475,1559211081,1559210870,https://stackoverflow.com/questions/6062576/adding-information-to-an-exception,"<p>One handy approach that I used is to use class attribute as storage for details,
as class attribute is accessible both from class object and class instance: </p>

<pre><code>class CustomError(Exception):
    details = None
</code></pre>

<p>Then in your code:</p>

<pre><code>exc = CustomError('Some message')
exc.details('Details -- add whatever you want')
raise exc
</code></pre>

<p>And when catching an error:</p>

<pre><code>except CustomError, e:
    # Do whatever you want with the exception instance
    print e
    print e.details
</code></pre>
",Kee,,1347369032,1347369032,0
http://stackoverflow.com/a/12372720/1562178,Detecting an &quot;invalid date&quot; Date instance in JavaScript,686416,orip,Servy,1251632080,1560963443,1467747294,https://stackoverflow.com/questions/1353684/detecting-an-invalid-date-date-instance-in-javascript,"<p>My solution is for simply checking whether you get a valid date object:</p>

<h1>Implementation</h1>

<pre><code>Date.prototype.isValid = function () {
    // An invalid date object returns NaN for getTime() and NaN is the only
    // object not strictly equal to itself.
    return this.getTime() === this.getTime();
};  
</code></pre>

<h1>Usage</h1>

<pre><code>var d = new Date(""lol"");

console.log(d.isValid()); // false

d = new Date(""2012/09/11"");

console.log(d.isValid()); // true
</code></pre>
",Ash Clarke,,1347375811,1347375811,0
http://stackoverflow.com/a/12383335/5909792,can&#39;t get current keyboard layout,4589,EmJiHash,Default,1347409515,1527561702,1347436805,https://stackoverflow.com/questions/12379713/cant-get-current-keyboard-layout,"<p>one thing that you need to notice is that ::GetKeyboardLayout (..) gets the lang for the passed thread identifer as a param.</p>

<p>each input thread can have different input locale lang.
for instance if you put lets IE in the foreground and press Alt+Shift the lang changes to UK. ( you can see it in the taskbar )</p>

<p>now if you will Alt+Tab to another window ( which will be in foregorund ) you will see that lang dont have to stay UK.</p>

<p>so what you need to check is what is the thread id you are passing.</p>

<p>look at this code it will get you the lang for the current active window:</p>

<pre><code>GUITHREADINFO Gti;
::ZeroMemory ( &amp;Gti,sizeof(GUITHREADINFO));
Gti.cbSize = sizeof( GUITHREADINFO );
::GetGUIThreadInfo(0,&amp;Gti);
DWORD dwThread = ::GetWindowThreadProcessId(Gti.hwndActive,0);
HKL lang = ::GetKeyboardLayout(dwThread);
</code></pre>

<p>to use GUITHREADINFO you need to define WINVER 0x500.
put this in the stdafx.h before all the include. </p>

<pre><code>#ifdef WINVER
#undef WINVER
#endif 
#define WINVER 0x500
</code></pre>

<p>source: <a href=""http://forums.codeguru.com/showthread.php?360951"" rel=""noreferrer"">GetKeyboardLayout not returning correct language ID (WINXP)</a></p>
",Mohammad Razeghi,Default,1347435670,1347436466,1347436466
http://stackoverflow.com/a/12399290/2752221,C++ sorting and keeping track of indexes,102857,Mingus,Lightness Races in Orbit,1255691904,1551524867,1438968654,https://stackoverflow.com/questions/1577475/c-sorting-and-keeping-track-of-indexes,"<p>Using C++11 lambdas</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;numeric&gt;      // std::iota
#include &lt;algorithm&gt;    // std::sort

template &lt;typename T&gt;
vector&lt;size_t&gt; sort_indexes(const vector&lt;T&gt; &amp;v) {

  // initialize original index locations
  vector&lt;size_t&gt; idx(v.size());
  iota(idx.begin(), idx.end(), 0);

  // sort indexes based on comparing values in v
  sort(idx.begin(), idx.end(),
       [&amp;v](size_t i1, size_t i2) {return v[i1] &lt; v[i2];});

  return idx;
}
</code></pre>

<p>Now you can use the returned index vector in iterations such as</p>

<pre><code>for (auto i: sort_indexes(v)) {
  cout &lt;&lt; v[i] &lt;&lt; endl;
}
</code></pre>

<p>Obviously, you can also choose to supply your own original index vector, sort function, comparator, or automatically reorder v in the sort_indexes function using an extra vector.</p>
",Lukasz Wiklendt,keineahnung2345,1347509441,1551524867,1551524867
http://stackoverflow.com/a/1240365/1070215,How to negate specific word in regex?,596983,Bostone,robsch,1249579245,1557483483,1452011152,https://stackoverflow.com/questions/1240275/how-to-negate-specific-word-in-regex,"<p>A great way to do this is to use <a href=""http://www.regular-expressions.info/lookaround.html"" rel=""noreferrer"">negative lookahead</a>:</p>

<pre><code>^(?!.*bar).*$
</code></pre>

<blockquote>
  <p>The negative lookahead construct is the pair of parentheses, with the opening parenthesis followed by a question mark and an exclamation point. Inside the lookahead [is any regex pattern].</p>
</blockquote>
",Chris Van Opstal,pim,1249580329,1544042143,1544042143
http://stackoverflow.com/a/12405793/4228275,Calculate mean and standard deviation from a vector of samples in C++ using Boost,125415,user393144,Peter Mortensen,1317419981,1552543492,1481997885,https://stackoverflow.com/questions/7616511/calculate-mean-and-standard-deviation-from-a-vector-of-samples-in-c-using-boos,"<p>If performance is important to you, and your compiler supports lambdas, the stdev calculation can be made faster and simpler: In tests with VS 2012 I've found that the following code is over 10 X quicker than the Boost code given in the chosen answer; it's also 5 X quicker than the safer version of the answer using standard libraries given by musiphil.</p>

<p><em>Note I'm using sample standard deviation, so the below code gives slightly different results (<a href=""http://duramecho.com/Misc/WhyMinusOneInSd.html"" rel=""noreferrer"">Why there is a Minus One in Standard Deviations</a>)</em></p>

<pre><code>double sum = std::accumulate(std::begin(v), std::end(v), 0.0);
double m =  sum / v.size();

double accum = 0.0;
std::for_each (std::begin(v), std::end(v), [&amp;](const double d) {
    accum += (d - m) * (d - m);
});

double stdev = sqrt(accum / (v.size()-1));
</code></pre>
",Josh Greifer,Josh Greifer,1347537697,1437731004,1437731004
http://stackoverflow.com/a/12410668/1293700,What is the purpose of the HTML &quot;no-js&quot; class?,215214,Swader,Pranav ,1310913330,1541015890,1376129227,https://stackoverflow.com/questions/6724515/what-is-the-purpose-of-the-html-no-js-class,"<p>The <code>no-js</code> class is used by the <a href=""http://modernizr.com/"" rel=""noreferrer"">Modernizr</a> feature detection library. When Modernizr loads, it replaces <code>no-js</code> with <code>js</code>. If JavaScript is disabled, the class remains.  This allows you to write CSS which easily targets either condition.</p>

<p>From <a href=""https://web.archive.org/web/20130511051108/http://modernizr.github.io/Modernizr/annotatedsource.html#section-103"" rel=""noreferrer"">Modernizrs' Anotated Source</a> <a href=""https://github.com/Modernizr/Modernizr/issues/417"" rel=""noreferrer""><em>(no longer maintained)</em></a>:</p>

<blockquote>
  <p><em>Remove ""no-js"" class from element, if it exists:</em>
  <code>docElement.className=docElement.className.replace(/\bno-js\b/,'') + ' js';</code></p>
</blockquote>

<p>Here is a blog post by Paul Irish describing this approach:
<a href=""http://www.paulirish.com/2009/avoiding-the-fouc-v3/"" rel=""noreferrer"">http://www.paulirish.com/2009/avoiding-the-fouc-v3/</a></p>

<hr>

<p>I like to do this same thing, but without Modernizr.
I put the following <code>&lt;script&gt;</code> in the <code>&lt;head&gt;</code> to change the class to <code>js</code> if JavaScript is enabled. I prefer to use <code>.replace(""no-js"",""js"")</code> over the regex version because its a bit less cryptic and suits my needs.</p>

<pre><code>&lt;script&gt;
    document.documentElement.className = 
       document.documentElement.className.replace(""no-js"",""js"");
&lt;/script&gt;
</code></pre>

<p>Prior to this technique, I would generally just apply js-dependant styles directly with JavaScript.  For example:</p>

<pre><code>$('#someSelector').hide();
$('.otherStuff').css({'color' : 'blue'});
</code></pre>

<p>With the <code>no-js</code> trick, this can Now be done with <code>css</code>:</p>

<pre><code>.js #someSelector {display: none;}
.otherStuff { color: blue; }
.no-js .otherStuff { color: green }
</code></pre>

<p>This is preferable because:</p>

<ul>
<li>It loads faster with no FOUC (flash of unstyled content)</li>
<li>Separation of concerns, etc...</li>
</ul>
",Zach Lysobey,Zach Lysobey,1347553366,1427239227,1427239227
http://stackoverflow.com/a/12413298/829568,c++ connect output stream to input stream,5973,Nick,,1347554531,1413066051,0,https://stackoverflow.com/questions/12410961/c-connect-output-stream-to-input-stream,"<p>You can create a <code>std::streambuf</code> where the output goes to one buffer and <code>std::overflow()</code> blocks when the buffer becomes full. On the other end you'd have an input buffer which blocks on <code>underflow()</code> when the buffer becomes empty. Obviously, reading and writing would be in two different threads.</p>

<p>The tricky business is how to synchronize the two buffers: The streams don't use any synchronization operations while accessing the buffers. Only when any of the virtual functions is called you can intercept the operation and deal with the synchronization. On the other hand, not using a buffer is fairly inefficient. The way I would address this problem is by using a relatively small output buffer (e.g. 256 <code>char</code>s) and also override <code>sync()</code> to use this function for transfer of characters to the input buffer. The <code>streambuf</code> would use a mutex for the synchronization and a condition variable to block on a full input buffer on output and an empty input buffer on input. To support clean shutdown there should also be a function setting a flag that no more input is coming and all further output operations should fail.</p>

<p>Creating the actual implementation reveals that two buffers aren't sufficient: the threads accessing the input and the output buffer may be active when the respective other buffer blocks. Thus, a third, intermediate buffer is needed. With this small change to the above plan, below is some code (it uses tiny buffers to make sure there are actual overflows and underflows; for a real use at least the input buffer should probably be bigger).</p>

<pre><code>// threadbuf.cpp                                                      -*-C++-*-
// ----------------------------------------------------------------------------
//  Copyright (C) 2013 Dietmar Kuehl http://www.dietmar-kuehl.de         
//                                                                       
//  Permission is hereby granted, free of charge, to any person          
//  obtaining a copy of this software and associated documentation       
//  files (the ""Software""), to deal in the Software without restriction, 
//  including without limitation the rights to use, copy, modify,        
//  merge, publish, distribute, sublicense, and/or sell copies of        
//  the Software, and to permit persons to whom the Software is          
//  furnished to do so, subject to the following conditions:             
//                                                                       
//  The above copyright notice and this permission notice shall be       
//  included in all copies or substantial portions of the Software.      
//                                                                       
//  THE SOFTWARE IS PROVIDED ""AS IS"", WITHOUT WARRANTY OF ANY KIND,      
//  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES      
//  OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND             
//  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT          
//  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,         
//  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING         
//  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR        
//  OTHER DEALINGS IN THE SOFTWARE. 
// ----------------------------------------------------------------------------


#include &lt;algorithm&gt;
#include &lt;condition_variable&gt;
#include &lt;iostream&gt;
#include &lt;mutex&gt;
#include &lt;stdexcept&gt;
#include &lt;streambuf&gt;
#include &lt;string&gt;
#include &lt;thread&gt;

// ----------------------------------------------------------------------------

class threadbuf
    : public std::streambuf
{
private:
    typedef std::streambuf::traits_type traits_type;
    typedef std::string::size_type      string_size_t;

    std::mutex              d_mutex;
    std::condition_variable d_condition;
    std::string             d_out;
    std::string             d_in;
    std::string             d_tmp;
    char*                   d_current;
    bool                    d_closed;

public:
    threadbuf(string_size_t out_size = 16, string_size_t in_size = 64)
        : d_out(std::max(string_size_t(1), out_size), ' ')
        , d_in(std::max(string_size_t(1), in_size), ' ')
        , d_tmp(std::max(string_size_t(1), in_size), ' ')
        , d_current(&amp;this-&gt;d_tmp[0])
        , d_closed(false)
    {
        this-&gt;setp(&amp;this-&gt;d_out[0], &amp;this-&gt;d_out[0] + this-&gt;d_out.size() - 1);
        this-&gt;setg(&amp;this-&gt;d_in[0], &amp;this-&gt;d_in[0], &amp;this-&gt;d_in[0]);
    }
    void close()
    {
        {
            std::unique_lock&lt;std::mutex&gt; lock(this-&gt;d_mutex);
            this-&gt;d_closed = true;
            while (this-&gt;pbase() != this-&gt;pptr()) {
                this-&gt;internal_sync(lock);
            }
        }
        this-&gt;d_condition.notify_all();
    }

private:
    int_type underflow()
    {
        if (this-&gt;gptr() == this-&gt;egptr())
        {
            std::unique_lock&lt;std::mutex&gt; lock(this-&gt;d_mutex);
            while (&amp;this-&gt;d_tmp[0] == this-&gt;d_current &amp;&amp; !this-&gt;d_closed) {
                this-&gt;d_condition.wait(lock);
            }
            if (&amp;this-&gt;d_tmp[0] != this-&gt;d_current) {
                std::streamsize size(this-&gt;d_current - &amp;this-&gt;d_tmp[0]);
                traits_type::copy(this-&gt;eback(), &amp;this-&gt;d_tmp[0],
                                  this-&gt;d_current - &amp;this-&gt;d_tmp[0]);
                this-&gt;setg(this-&gt;eback(), this-&gt;eback(), this-&gt;eback() + size);
                this-&gt;d_current = &amp;this-&gt;d_tmp[0];
                this-&gt;d_condition.notify_one();
            }
        }
        return this-&gt;gptr() == this-&gt;egptr()
            ? traits_type::eof()
            : traits_type::to_int_type(*this-&gt;gptr());
    }
    int_type overflow(int_type c)
    {
        std::unique_lock&lt;std::mutex&gt; lock(this-&gt;d_mutex);
        if (!traits_type::eq_int_type(c, traits_type::eof())) {
            *this-&gt;pptr() = traits_type::to_char_type(c);
            this-&gt;pbump(1);
        }
        return this-&gt;internal_sync(lock)
            ? traits_type::eof()
            : traits_type::not_eof(c);
    }
    int sync()
    {
        std::unique_lock&lt;std::mutex&gt; lock(this-&gt;d_mutex);
        return this-&gt;internal_sync(lock);
    }
    int internal_sync(std::unique_lock&lt;std::mutex&gt;&amp; lock)
    {
        char* end(&amp;this-&gt;d_tmp[0] + this-&gt;d_tmp.size());
        while (this-&gt;d_current == end &amp;&amp; !this-&gt;d_closed) {
            this-&gt;d_condition.wait(lock);
        }
        if (this-&gt;d_current != end)
        {
            std::streamsize size(std::min(end - d_current,
                                          this-&gt;pptr() - this-&gt;pbase()));
            traits_type::copy(d_current, this-&gt;pbase(), size);
            this-&gt;d_current += size;
            std::streamsize remain((this-&gt;pptr() - this-&gt;pbase()) - size);
            traits_type::move(this-&gt;pbase(), this-&gt;pptr(), remain);
            this-&gt;setp(this-&gt;pbase(), this-&gt;epptr());
            this-&gt;pbump(remain);
            this-&gt;d_condition.notify_one();
            return 0;
        }
        return traits_type::eof();
    }
};

// ----------------------------------------------------------------------------

static void writer(std::ostream&amp; out)
{
    for (std::string line; std::getline(std::cin, line); )
    {
        out &lt;&lt; ""writer: '"" &lt;&lt; line &lt;&lt; ""'\n"";
    }
}

// ----------------------------------------------------------------------------

static void reader(std::istream&amp; in)
{
    for (std::string line; std::getline(in, line); )
    {
        std::cout &lt;&lt; ""reader: '"" &lt;&lt; line &lt;&lt; ""'\n"";
    }
}

// ----------------------------------------------------------------------------

int main()
{
    try
    {
        threadbuf sbuf;
        std::ostream out(&amp;sbuf);
        std::istream in(&amp;sbuf);

        std::thread write(&amp;::writer, std::ref(out));
        std::thread read(&amp;::reader, std::ref(in));

        write.join();
        sbuf.close();
        read.join();
    }
    catch (std::exception const&amp; ex)
    {
        std::cerr &lt;&lt; ""ERROR: "" &lt;&lt; ex.what() &lt;&lt; ""\n"";
    }
}
</code></pre>
",Dietmar Khl,Dietmar Khl,1347563953,1413066051,1413066051
http://stackoverflow.com/a/12414913/127816,"Checking a nested dictionary using a dot notation string &quot;a.b.c.d.e&quot;, automatically create missing levels",5081,hikaru,smci,1347570555,1546940210,1546940210,https://stackoverflow.com/questions/12414821/checking-a-nested-dictionary-using-a-dot-notation-string-a-b-c-d-e-automatica,"<p>You could use an infinite, nested <a href=""http://docs.python.org/library/collections.html#collections.defaultdict"">defaultdict</a>:</p>

<pre><code>&gt;&gt;&gt; from collections import defaultdict
&gt;&gt;&gt; infinitedict = lambda: defaultdict(infinitedict)
&gt;&gt;&gt; d = infinitedict()
&gt;&gt;&gt; d['key1']['key2']['key3']['key4']['key5'] = 'test'
&gt;&gt;&gt; d['key1']['key2']['key3']['key4']['key5']
'test'
</code></pre>

<p>Given your dotted string, here's what you can do:</p>

<pre><code>&gt;&gt;&gt; import operator
&gt;&gt;&gt; keys = ""a.b.c"".split(""."")
&gt;&gt;&gt; lastplace = reduce(operator.getitem, keys[:-1], d)
&gt;&gt;&gt; lastplace.has_key(keys[-1])
False
</code></pre>

<p>You can set a value:</p>

<pre><code>&gt;&gt;&gt; lastplace[keys[-1]] = ""something""
&gt;&gt;&gt; reduce(operator.getitem, keys, d)
'something'
&gt;&gt;&gt; d['a']['b']['c']
'something'
</code></pre>
",jterrace,jterrace,1347570965,1347571922,1347571922
http://stackoverflow.com/a/12417346/596939,"When a Flask application with Flask-SQLAlchemy is running, how do I use MySQL client on the same database at the same time?",1654,hllau,,1347439450,1347589520,0,https://stackoverflow.com/questions/12384323/when-a-flask-application-with-flask-sqlalchemy-is-running-how-do-i-use-mysql-cl,"<p>You may want to look at this question <a href=""https://stackoverflow.com/questions/12014824/sql-alchemy-relationship-loader-leaves-a-lock-on-table"">SQL Alchemy Relationship loader leaves a lock on table?</a></p>

<p>What you'll need to do is subclass <a href=""http://packages.python.org/Flask-SQLAlchemy/api.html#flask.ext.sqlalchemy.SQLAlchemy"" rel=""nofollow noreferrer""><code>flask.ext.sqlalchemy.SQLAlchemy</code></a> and override the <a href=""http://packages.python.org/Flask-SQLAlchemy/api.html#flask.ext.sqlalchemy.SQLAlchemy.apply_driver_hacks"" rel=""nofollow noreferrer""><code>apply_driver_hacks</code></a> method to pass through the additional keyword argument <a href=""http://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html#transaction-isolation-level"" rel=""nofollow noreferrer""><code>isolation_level='READ &lt;some level&gt;'</code></a>:</p>

<pre><code>from flask.ext.sqlalchemy import SQLAlchemy

class UnLockedAlchemy(SQLAlchemy):
    def apply_driver_hacks(self, app, info, options):
        if not ""isolation_level"" in options:
            options[""isolation_level""] = ""READ COMMITTED""  # For example
        return super(UnLockedAlchemy, self).apply_driver_hacks(app, info, options)
</code></pre>
",Sean Vieira,Community,1347589520,1347589520,1495539868
http://stackoverflow.com/a/12430650/223092,Compare XML snippets?,23797,Gregg Lind,Community,1276097605,1495110567,1495540982,https://stackoverflow.com/questions/3007330/compare-xml-snippets,"<p>I had the same problem: two documents I wanted to compare that had the same attributes but in different orders.</p>

<p>It seems that XML Canonicalization (C14N) in lxml works well for this, but I'm definitely not an XML expert. I'm curious to know if somebody else can point out drawbacks to this approach.</p>

<pre><code>parser = etree.XMLParser(remove_blank_text=True)

xml1 = etree.fromstring(xml_string1, parser)
xml2 = etree.fromstring(xml_string2, parser)

print ""xml1 == xml2: "" + str(xml1 == xml2)

ppxml1 = etree.tostring(xml1, pretty_print=True)
ppxml2 = etree.tostring(xml2, pretty_print=True)

print ""pretty(xml1) == pretty(xml2): "" + str(ppxml1 == ppxml2)

xml_string_io1 = StringIO()
xml1.getroottree().write_c14n(xml_string_io1)
cxml1 = xml_string_io1.getvalue()

xml_string_io2 = StringIO()
xml2.getroottree().write_c14n(xml_string_io2)
cxml2 = xml_string_io2.getvalue()

print ""canonicalize(xml1) == canonicalize(xml2): "" + str(cxml1 == cxml2)
</code></pre>

<p>Running this gives me:</p>

<pre><code>$ python test.py 
xml1 == xml2: false
pretty(xml1) == pretty(xml2): false
canonicalize(xml1) == canonicalize(xml2): true
</code></pre>
",Mark E. Haase,Mark E. Haase,1347650162,1347652329,1347652329
http://stackoverflow.com/a/12434038/1199911,Android DialogFragment disappears after orientation change,14586,AlexIIP,,1347667059,1425547556,0,https://stackoverflow.com/questions/12433397/android-dialogfragment-disappears-after-orientation-change,"<p>Okay, so the issue seems to be with the <code>DialogFragment</code> compatibility library. </p>

<p>The issue was described in <a href=""http://code.google.com/p/android/issues/detail?id=17423"">this</a> post.</p>

<p>""An obsolete DISMISS message for the fragment is retained in the message queue. It's been queued by <code>DialogFragment.onDestroyView()</code> when dismissing the old dialog and gets reactivated after creating the new dialog.</p>

<p>A quick (and possibly dirty) workaround is to override <code>onDestroyView()</code> and clear the dismiss listener before calling <code>super.onDestroyView()</code>""</p>

<p>Adding the following code to my DialogFragment solved the issue:</p>

<pre><code> @Override
 public void onDestroyView() {
     if (getDialog() != null &amp;&amp; getRetainInstance()) {
         getDialog().setDismissMessage(null);
     }
     super.onDestroyView();
 }
</code></pre>
",AlexIIP,EpicPandaForce,1347675964,1425547556,1425547556
http://stackoverflow.com/a/12461237/801924,argparse: How can I allow multiple values to override a default,13549,cfi,Community,1347890702,1347980900,1495541414,https://stackoverflow.com/questions/12460989/argparse-how-can-i-allow-multiple-values-to-override-a-default,"<p>I think this is a slightly more clean variation on the other answer (relying on the <code>self.default</code> attribute of custom actions):</p>

<pre><code>import argparse
import sys

class Extender(argparse.Action):
    def __call__(self,parser,namespace,values,option_strings=None):
        #Need None here incase `argparse.SUPPRESS` was supplied for `dest`
        dest = getattr(namespace,self.dest,None) 
        #print dest,self.default,values,option_strings
        if(not hasattr(dest,'extend') or dest == self.default):
            dest = []
            setattr(namespace,self.dest,dest)
            #if default isn't set to None, this method might be called
            # with the default as `values` for other arguements which
            # share this destination.
            parser.set_defaults(**{self.dest:None}) 

        try:
            dest.extend(values)
        except ValueError:
            dest.append(values)

        #another option:
        #if not isinstance(values,basestring):
        #    dest.extend(values)
        #else:
        #    dest.append(values) #It's a string.  Oops.

def new_parser(args):
    parser = argparse.ArgumentParser()
    parser.add_argument('foo', nargs='*',action=Extender)
    parser.add_argument('--foo', nargs='*', dest='foo', action=Extender)
    parser.set_defaults(foo = [['spam']])
    return parser.parse_args(args.split())

tests = {'a b c --foo 1 --foo 2 --foo 3':['a','b','c','1','2','3'],
         '':[['spam']],
         'a b c --foo 1 2 3':['a','b','c','1','2','3'],
         '--foo 1':['1'],
         'a':['a']}

for s,r in tests.items():
    print ( ""parsing: {0}"".format(s) )
    args = new_parser(s)
    if(args.foo != r):
        print (""ERROR"")
        print (args.foo)
        print (r)
        sys.exit(1)
    print ( args )
    print ('*'*80)
</code></pre>

<hr>

<p>Also note that I've used <code>parser.set_defaults(...)</code> to set the default for the <code>foo</code> attribute.</p>
",mgilson,mgilson,1347891465,1347980900,1347980900
http://stackoverflow.com/a/1251372/524913,"Generating CSV file for Excel, how to have a newline inside a value",306955,Nir,Nir,1249590534,1555762927,1251035588,https://stackoverflow.com/questions/1241220/generating-csv-file-for-excel-how-to-have-a-newline-inside-a-value,"<p>You should have space characters at the start of fields ONLY where the space characters are part of the data. Excel will not strip off leading spaces. You will get unwanted spaces in your headings and data fields. Worse, the <code>""</code> that should be ""protecting"" that line-break in the third column will be ignored because it is not at the start of the field.</p>

<p>If you have non-ASCII characters (encoded in UTF-8) in the file, you should have a UTF-8 BOM (3 bytes, <code>hex EF BB BF</code>) at the start of the file. Otherwise Excel will interpret the data according to your locale's default encoding (e.g. cp1252) instead of utf-8, and your non-ASCII characters will be trashed.</p>

<p><em>Following comments apply to Excel 2003, 2007 and 2013; not tested on Excel 2000</em></p>

<p><strong>If you open the file by double-clicking on its name in Windows Explorer, everything works OK.</strong></p>

<p>If you open it from within Excel, the results vary:</p>

<ol>
<li>You have only ASCII characters in the file (and no BOM): works.</li>
<li>You have non-ASCII characters (encoded in UTF-8) in the file, with a UTF-8 BOM at the start: it recognises that your data is encoded in UTF-8 but it ignores the csv extension and drops you into the <em>Text Import not-a-Wizard</em>, unfortunately with the result that you get the line-break problem.</li>
</ol>

<p>Options include: </p>

<ol>
<li>Train the users not to open the files from within Excel :-(</li>
<li>Consider writing an XLS file directly ... there are packages/libraries available for doing that in Python/Perl/PHP/.NET/etc</li>
</ol>
",John Machin,Marcel Gosselin,1249824412,1422117825,1422117825
http://stackoverflow.com/a/12528461/5056459,Should I test toString() with junit?,6081,AvrDragon,Matthew Farwell,1348221940,1535453347,1348225676,https://stackoverflow.com/questions/12528420/should-i-test-tostring-with-junit,"<p>Some classes use <code>toString</code> for more than just user-readable informative string. Examples are <code>StringBuilder</code> and <code>StringWriter</code>. In such a case it is of course advisable to test the method just like any other business-value method.</p>

<p>Even in the general case it is good practice to smoke-test <code>toString</code> for reliability (no exceptions thrown). The last thing you need is a log statement blowing up your code due to an ill-implemented <code>toString</code>. It has happened to me several times, and the resulting bugs are of the nastiest kind, since you don't even see the <code>toString</code> call in the source code&mdash;it's implicitly buried inside a log statement.</p>
",Marko Topolnik,,1348222077,1348222077,0
http://stackoverflow.com/a/12570003/1406639,Multiline EditText with Done SoftInput Action Label on 2.3,36687,ohhorob,,1297845534,1510030181,0,https://stackoverflow.com/questions/5014219/multiline-edittext-with-done-softinput-action-label-on-2-3,"<p>Ohhorob's answer is basically correct, but his code is really really redundant! It is basically equivalent to this much simpler version (full code for lazy readers):</p>

<pre><code>package com.example.views;

import android.content.Context;
import android.util.AttributeSet;
import android.view.inputmethod.EditorInfo;
import android.view.inputmethod.InputConnection;
import android.widget.EditText;

// An EditText that lets you use actions (""Done"", ""Go"", etc.) on multi-line edits.
public class ActionEditText extends EditText
{
    public ActionEditText(Context context)
    {
        super(context);
    }

    public ActionEditText(Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }

    public ActionEditText(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
    }

    @Override
    public InputConnection onCreateInputConnection(EditorInfo outAttrs)
    {
        InputConnection conn = super.onCreateInputConnection(outAttrs);
        outAttrs.imeOptions &amp;= ~EditorInfo.IME_FLAG_NO_ENTER_ACTION;
        return conn;
    }
}
</code></pre>

<p>Note that some <code>inputType</code> options such as <code>textShortMessage</code> make this not work! I suggest you start with <code>inputType=""text""</code>. Here is how you could use it in your XML.</p>

<pre><code>&lt;com.example.views.ActionEditText
    android:id=...
    android:layout_stuff=...
    android:imeOptions=""actionDone""
    android:inputType=""textAutoCorrect|textCapSentences|textMultiLine""
    android:maxLines=""3"" /&gt;
</code></pre>
",Timmmm,,1348508061,1348508061,0
http://stackoverflow.com/a/12581268/1851299,What are optimal scrypt work factors?,12266,Michael Louis Thaler,,1340218627,1452543715,0,https://stackoverflow.com/questions/11126315/what-are-optimal-scrypt-work-factors,"<p>As a start:</p>

<p><em>cpercival</em> mentioned <a href=""http://www.tarsnap.com/scrypt/scrypt-slides.pdf"" rel=""noreferrer"">in his slides from 2009</a> something around</p>

<ul>
<li>(N = 2^14, r = 8, p = 1) for &lt; 100ms (interactive use), and</li>
<li>(N = 2^20, r = 8, p = 1) for &lt; 5s (sensitive storage).</li>
</ul>

<p>These values happen to be good enough for general use (password-db for some WebApp) even today (2012-09). Of course, specifics depend on the application.</p>

<p>Also, those values (mostly) mean:</p>

<ul>
<li><code>N</code>: General work factor, iteration count.</li>
<li><code>r</code>: blocksize in use for underlying hash; fine-tunes the relative memory-cost.</li>
<li><code>p</code>: parallelization factor; fine-tunes the relative cpu-cost.</li>
</ul>

<p><code>r</code> and <code>p</code> are meant to accommodate for the potential issue that CPU speed and memory size and bandwidth do not increase as anticipated.  Should CPU performance increase faster, you increase <code>p</code>, should instead a breakthrough in memory technology provide an order of magnitude improvement, you increase <code>r</code>.  And <code>N</code> is there to keep up with the general doubling of performance per <em>some timespan</em>.</p>

<p><em>Important:</em> All values change the result. (Updated:) This is the reason why all scrypt parameters are stored in the result string.</p>
",gimpf,gimpf,1348569674,1406622638,1406622638
http://stackoverflow.com/a/12609856/2066546,ActionMailer: Default From: address?,18220,Alexandre,,1268627714,1426162773,0,https://stackoverflow.com/questions/2445100/actionmailer-default-from-address,"<p>In Rails 4 you can set this in your environment(s):</p>

<pre><code>config.action_mailer.default_options = {
  :from =&gt; ""foo@bar.com""
}
</code></pre>
",Jake,,1348691326,1408022977,1408022977
http://stackoverflow.com/a/12611619/355753,In OpenGL is there a way to get a list of all uniforms &amp; attribs used by a shader program?,16130,hyperlogic,Rabbid76,1231870803,1526525379,1505578940,https://stackoverflow.com/questions/440144/in-opengl-is-there-a-way-to-get-a-list-of-all-uniforms-attribs-used-by-a-shade,"<p>There has been a change in how this sort of thing is done in OpenGL. So let's present <a href=""http://www.opengl.org/wiki/Program_Introspection"" rel=""noreferrer"">the old way and the new way</a>.</p>

<h3>Old Way</h3>

<p>Linked shaders have the concept of a number of active uniforms and active attributes (vertex shader stage inputs). These are the uniforms/attributes that are in use by that shader. The number of these (as well as quite a few other things) can be queried with <a href=""http://www.opengl.org/wiki/GLAPI/glGetProgram"" rel=""noreferrer"">glGetProgramiv</a>:</p>

<pre><code>GLint numActiveAttribs = 0;
GLint numActiveUniforms = 0;
glGetProgramiv(prog, GL_ACTIVE_ATTRIBUTES, &amp;numActiveAttribs);
glGetProgramiv(prog, GL_ACTIVE_UNIFORMS, &amp;numActiveUniforms);
</code></pre>

<p>You can query active uniform blocks, transform feedback varyings, atomic counters, and similar things in this way.</p>

<p>Once you have the number of active attributes/uniforms, you can start querying information about them. To get info about an attribute, you use <a href=""http://www.opengl.org/wiki/GLAPI/glGetActiveAttrib"" rel=""noreferrer""><code>glGetActiveAttrib</code></a>; to get info about a uniform, you use <a href=""http://www.opengl.org/wiki/GLAPI/glGetActiveUniform"" rel=""noreferrer""><code>glGetActiveUniform</code></a>. As an example, extended from the above:</p>

<pre><code>GLint maxAttribNameLength = 0;
glGetProgramiv(prog, GL_ACTIVE_ATTRIBUTE_MAX_LENGTH, &amp;maxAttribNameLength);
std::vector&lt;GLchar&gt; nameData(maxAttribNameLength)
for(int attrib = 0; attrib &lt; numActiveAttribs; ++attrib)
{
  GLint arraySize = 0;
  GLenum type = 0;
  GLsizei actualLength = 0;
  glGetActiveAttrib(prog, attrib, nameData.size(), &amp;actualLength, &amp;arraySize, &amp;type, &amp;nameData[0]);
  std::string name((char*)&amp;nameData[0], actualLength - 1);
}
</code></pre>

<p>Something similar can be done for uniforms. However, the <code>GL_ACTIVE_UNIFORM_MAX_LENGTH</code> trick can be buggy on some drivers. So I would suggest this:</p>

<pre><code>std::vector&lt;GLchar&gt; nameData(256);
for(int unif = 0; unif &lt; numActiveUniforms; ++unif)
{
  GLint arraySize = 0;
  GLenum type = 0;
  GLsizei actualLength = 0;
  glGetActiveUniform(prog, unif, nameData.size(), &amp;actualLength, &amp;arraySize, &amp;type, &amp;nameData[0]);
  std::string name((char*)&amp;nameData[0], actualLength - 1);
}
</code></pre>

<p>Also, for uniforms, there's <code>glGetActiveUniforms</code>, which can query all of the name lengths for every uniform all at once (as well as all of the types, array sizes, strides, and other parameters).</p>

<h3>New Way</h3>

<p>This way lets you access pretty much <em>everything</em> about active variables in a successfully linked program (except for regular globals). The <a href=""http://www.opengl.org/registry/specs/ARB/program_interface_query.txt"" rel=""noreferrer"">ARB_program_interface_query</a> extension is not widely available yet, but it'll get there.</p>

<p>It starts with a call to <a href=""http://www.opengl.org/wiki/GLAPI/glGetProgramInterface"" rel=""noreferrer""><code>glGetProgramInterfaceiv</code></a>, to query the number of active attributes/uniforms. Or whatever else you may want.</p>

<pre><code>GLint numActiveAttribs = 0;
GLint numActiveUniforms = 0;
glGetProgramInterfaceiv(prog, GL_PROGRAM_INPUT, GL_ACTIVE_RESOURCES, &amp;numActiveAttribs);
glGetProgramInterfaceiv(prog, GL_UNIFORM, GL_ACTIVE_RESOURCES, &amp;numActiveUniforms);
</code></pre>

<p>Attributes are just vertex shader inputs; <code>GL_PROGRAM_INPUT</code> means the inputs to the first program in the program object.</p>

<p>You can then loop over the number of active resources, asking for info on each one in turn, from <a href=""http://www.opengl.org/wiki/GLAPI/glGetProgramResource"" rel=""noreferrer""><code>glGetProgramResourceiv</code></a> and <a href=""http://www.opengl.org/wiki/GLAPI/glGetProgramResourceName"" rel=""noreferrer""><code>glGetProgramResourceName</code></a>:</p>

<pre><code>std::vector&lt;GLchar&gt; nameData(256);
std::vector&lt;GLenum&gt; properties;
properties.push_back(GL_NAME_LENGTH);
properties.push_back(GL_TYPE);
properties.push_back(GL_ARRAY_SIZE);
std::vector&lt;GLint&gt; values(properties.size());
for(int attrib = 0; attrib &lt; numActiveAttribs; ++attrib)
{
  glGetProgramResourceiv(prog, GL_PROGRAM_INPUT, attrib, properties.size(),
    &amp;properties[0], values.size(), NULL, &amp;values[0]);

  nameData.resize(values[0]); //The length of the name.
  glGetProgramResourceName(prog, GL_PROGRAM_INPUT, attrib, nameData.size(), NULL, &amp;nameData[0]);
  std::string name((char*)&amp;nameData[0], nameData.size() - 1);
}
</code></pre>

<p>The exact same code would work for <code>GL_UNIFORM</code>; just swap <code>numActiveAttribs</code> with <code>numActiveUniforms</code>.</p>
",Nicol Bolas,Nicol Bolas,1348699778,1483470054,1483470054
http://stackoverflow.com/a/12619745/613428,django - why is the request.POST object immutable?,37077,bharal,bharal,1348698079,1523529607,1510485829,https://stackoverflow.com/questions/12611345/django-why-is-the-request-post-object-immutable,"<p>It's a bit of a mystery, isn't it? Several superficially plausible theories turn out to be wrong on investigation:</p>

<ol>
<li><p>So that the <code>POST</code> object doesn't have to implement mutation methods? No: the <code>POST</code> object belongs to the <a href=""https://github.com/django/django/blob/master/django/http/__init__.py#L371"" rel=""noreferrer""><code>django.http.QueryDict</code> class</a>, which implements a full set of mutation methods including <code>__setitem__</code>, <code>__delitem__</code>, <code>pop</code> and <code>clear</code>. It implements immutability by checking a flag when you call one of the mutation methods. And when you call the <code>copy</code> method you get another <code>QueryDict</code> instance with the mutable flag turned on.</p></li>
<li><p>For performance improvement? No: the <code>QueryDict</code> class gains no performance benefit when the mutable flag is turned off.</p></li>
<li><p>So that the <code>POST</code> object can be used as a dictionary key? No: <code>QueryDict</code> objects are not hashable.</p></li>
<li><p>So that the <code>POST</code> data can be built lazily (without committing to read the whole response), <a href=""https://stackoverflow.com/questions/2339857/why-is-post-data-copied-in-django#comment2312894_2339963"">as claimed here</a>? I see no evidence of this in the code: as far as I can tell, the whole of the response is always read, either <a href=""https://github.com/django/django/blob/master/django/http/__init__.py#L296"" rel=""noreferrer"">directly</a>, or via <a href=""https://github.com/django/django/blob/master/django/http/multipartparser.py#L35"" rel=""noreferrer""><code>MultiPartParser</code></a> for <code>multipart</code> responses.</p></li>
<li><p>To protect you against programming errors? I've seen this claimed, but I've never seen a good explanation of what these errors are, and how immutability protects you against them.</p></li>
</ol>

<p>In any case, <code>POST</code> is <em>not always immutable</em>: when the response is <code>multipart</code>, then <code>POST</code> is mutable. This seems to put the kibosh on most theories you might think of. (Unless this behaviour is an oversight.)</p>

<p>In summary, <strong>I can see no clear rationale</strong> in Django for the <code>POST</code> object to be immutable for non-<code>multipart</code> requests.</p>
",Gareth Rees,Community,1348743296,1348743296,1495539195
http://stackoverflow.com/a/12621264/365238,Detecting &#39;transform: translate3d&#39; support,36863,Jamie,,1302775893,1449822575,0,https://stackoverflow.com/questions/5661671/detecting-transform-translate3d-support,"<p>Check out <a href=""https://gist.github.com/3794226"">this solution</a>.</p>

<p>It is based on the fact that if a browser supports transforms, the value of </p>



<pre><code>window.getComputedStyle(el).getPropertyValue('transform')
</code></pre>

<p>will be a string containing the transformation matrix, when a 3d transform is applied to the element <code>el</code>. Otherwise, it will be <code>undefined</code> or the string <code>'none'</code>, as in the case of Opera 12.02.</p>

<p>It works on all major browsers.</p>

<p>The code:</p>



<pre><code>function has3d() {
    if (!window.getComputedStyle) {
        return false;
    }

    var el = document.createElement('p'), 
        has3d,
        transforms = {
            'webkitTransform':'-webkit-transform',
            'OTransform':'-o-transform',
            'msTransform':'-ms-transform',
            'MozTransform':'-moz-transform',
            'transform':'transform'
        };

    // Add it to the body to get the computed style.
    document.body.insertBefore(el, null);

    for (var t in transforms) {
        if (el.style[t] !== undefined) {
            el.style[t] = ""translate3d(1px,1px,1px)"";
            has3d = window.getComputedStyle(el).getPropertyValue(transforms[t]);
        }
    }

    document.body.removeChild(el);

    return (has3d !== undefined &amp;&amp; has3d.length &gt; 0 &amp;&amp; has3d !== ""none"");
}
</code></pre>
",Lorenzo Polidori,Dan,1348748474,1415356222,1415356222
http://stackoverflow.com/a/1262210/2459703,How to replace Microsoft-encoded quotes in PHP,57681,Misha M,Peter Mortensen,1250014110,1562708319,1562598340,https://stackoverflow.com/questions/1262038/how-to-replace-microsoft-encoded-quotes-in-php,"<p>Your <em>Microsoft-encoded quotes</em> are the probably the <a href=""http://en.wikipedia.org/wiki/Quotation_mark_glyphs#Quotation_marks_in_European_languages"" rel=""noreferrer"">typographic quotation marks</a>. You can simply replace them with <code>str_replace</code> if you know the encoding of the string in that you want to replace them.</p>

<p>Heres an example for UTF-8 but using a single mapping array with <a href=""http://docs.php.net/strtr"" rel=""noreferrer""><code>strtr</code></a>:</p>

<pre><code>$quotes = array(
    ""\xC2\xAB""     =&gt; '""', //  (U+00AB) in UTF-8
    ""\xC2\xBB""     =&gt; '""', //  (U+00BB) in UTF-8
    ""\xE2\x80\x98"" =&gt; ""'"", //  (U+2018) in UTF-8
    ""\xE2\x80\x99"" =&gt; ""'"", //  (U+2019) in UTF-8
    ""\xE2\x80\x9A"" =&gt; ""'"", //  (U+201A) in UTF-8
    ""\xE2\x80\x9B"" =&gt; ""'"", //  (U+201B) in UTF-8
    ""\xE2\x80\x9C"" =&gt; '""', //  (U+201C) in UTF-8
    ""\xE2\x80\x9D"" =&gt; '""', //  (U+201D) in UTF-8
    ""\xE2\x80\x9E"" =&gt; '""', //  (U+201E) in UTF-8
    ""\xE2\x80\x9F"" =&gt; '""', //  (U+201F) in UTF-8
    ""\xE2\x80\xB9"" =&gt; ""'"", //  (U+2039) in UTF-8
    ""\xE2\x80\xBA"" =&gt; ""'"", //  (U+203A) in UTF-8
);
$str = strtr($str, $quotes);
</code></pre>

<p>If youre need another encoding, you can use <a href=""http://docs.php.net/mb_convert_encoding"" rel=""noreferrer""><code>mb_convert_encoding</code></a> to convert the keys.</p>
",Gumbo,,1250016171,1250016171,0
http://stackoverflow.com/a/12623162/905697,How to pass locale parameter to Devise,1855,davidrac,davidrac,1348385608,1379809880,1348385915,https://stackoverflow.com/questions/12550564/how-to-pass-locale-parameter-to-devise,"<p>I found a solution. Apparently, Devise requires the method to be defined like that (and not like the rails <a href=""http://guides.rubyonrails.org/i18n.html"">documentation</a> states):</p>

<pre><code>def self.default_url_options
  { :locale =&gt; I18n.locale }
end
</code></pre>

<p>BTW, If anyone can explain the reason and the difference, please do.</p>
",davidrac,,1348754385,1348754385,0
http://stackoverflow.com/a/12631576/250962,How to change default null sorting behavior from PostgreSQL in the Django ORM,2106,Carles Barrob&#233;s,,1348758420,1455840589,0,https://stackoverflow.com/questions/12624490/how-to-change-default-null-sorting-behavior-from-postgresql-in-the-django-orm,"<p>I figured out a way that accommodates DB engines that work either way (null as highest or lowest value) by using <code>extra</code>, making the null check a boolean, and when sorting booleans <code>false &lt; true</code> seems to be universal:</p>

<pre><code>qs = qs.extra(select={'null_start': ""publish_start is null""},
              order_by=['null_start', '-publish_start'])
</code></pre>
",Carles Barrobs,,1348788729,1348788729,0
http://stackoverflow.com/a/12642970/1406639,Combine alphabetical and natural order (aka. User sane sorting),1422,Durandal,double-beep,1348836307,1549737714,1549737714,https://stackoverflow.com/questions/12640280/combine-alphabetical-and-natural-order-aka-user-sane-sorting,"<p>This is the adapted code (based on <a href=""http://www.davekoelle.com/alphanum.html"" rel=""nofollow"">The Alphanum Algorithm</a>) as in the accepted answer. The code was optimized to reduce garbage creation and to deal with leading zeros (01 &lt; 001 &lt; 2). Also it was generified, and is now more flexible as its no longer limited to java.lang.String, instead it now takes java.lang.CharSequence. Have fun:</p>

<pre><code>import java.text.Collator;
import java.util.Comparator;

/**
 * Comparator for ordering by Collator while treating digits numerically.
 * This provides a ""natural"" order that humans usually perceive as 'logical'.
 * 
 * It should work reasonably well for western languages (provided you
 * use the proper collator when constructing). For free control over the
 * Collator, use the constructor that takes a Collator as parameter.
 * Configure the Collator using Collator.setDecomposition()/setStrength()
 * to suit your requirements.
 */
public class AlphanumComparator implements Comparator&lt;CharSequence&gt; {

    /**
     * The collator used for comparison of the alpha part
     */
    private final Collator collator;

    /**
     * Create comparator using platform default collator.
     * (equivalent to using Collator.getInstance())
     */
    public AlphanumComparator() {
        this(Collator.getInstance()); 
    }

    /**
     * Create comparator using specified collator
     */
    public AlphanumComparator(final Collator collator) {
        if (collator == null)
            throw new IllegalArgumentException(""collator must not be null"");
        this.collator = collator;
    }

    /**
     * Ideally this would be generalized to Character.isDigit(), but I have
     * no knowledge about arabic language and other digits, so I treat
     * them as characters...
     */
    private static boolean isDigit(final int character) {
        // code between ASCII '0' and '9'?
        return character &gt;= 48 &amp;&amp; character &lt;= 57;
    }

    /**
     * Get subsequence of only characters or only digits, but not mixed
     */
    private static CharSequence getChunk(final CharSequence charSeq, final int start) {
        int index = start;
        final int length = charSeq.length();
        final boolean mode = isDigit(charSeq.charAt(index++));
        while (index &lt; length) {
            if (isDigit(charSeq.charAt(index)) != mode)
                break;
            ++index;
        }
        return charSeq.subSequence(start, index);
    }

    /**
     * Implements Comparator&lt;CharSequence&gt;.compare
     */
    public int compare(final CharSequence charSeq1, final CharSequence charSeq2) {
        final int length1 = charSeq1.length();
        final int length2 = charSeq2.length();
        int index1 = 0;
        int index2 = 0;
        int result = 0;
        while (result == 0 &amp;&amp; index1 &lt; length1 &amp;&amp; index2 &lt; length2) {
            final CharSequence chunk1 = getChunk(charSeq1, index1);
            index1 += chunk1.length();

            final CharSequence chunk2 = getChunk(charSeq2, index2);
            index2 += chunk2.length();

            if (isDigit(chunk1.charAt(0)) &amp;&amp; isDigit(chunk2.charAt(0))) {
                final int clen1 = chunk1.length();
                final int clen2 = chunk2.length();
                // count and skip leading zeros
                int zeros1 = 0;
                while (zeros1 &lt; clen1 &amp;&amp; chunk1.charAt(zeros1) == '0')
                    ++zeros1;
                // count and skip leading zeros
                int zeros2 = 0;
                while (zeros2 &lt; clen2 &amp;&amp; chunk2.charAt(zeros2) == '0')
                    ++zeros2;
                // the longer run of non-zero digits is greater
                result = (clen1 - zeros1) - (clen2 - zeros2);
                // if the length is the same, the first differing digit decides
                // which one is deemed greater.
                int subi1 = zeros1;
                int subi2 = zeros2;
                while (result == 0 &amp;&amp; subi1 &lt; clen1 &amp;&amp; subi2 &lt; clen2) {
                    result = chunk1.charAt(subi1++) - chunk2.charAt(subi2++);
                }
                // if still no difference, the longer zeros-prefix is greater
                if (result == 0)
                    result = subi1 - subi2;
            } else {
                // in case we are working with Strings, toString() doesn't create
                // any objects (String.toString() returns the same string itself).
                result = collator.compare(chunk1.toString(), chunk2.toString());
            }
        }
        // if there was no difference at all, let the longer one be the greater one
        if (result == 0)
            result = length1 - length2;
        // limit result to (-1, 0, or 1)
        return Integer.signum(result);
    }


}
</code></pre>

<p>Edit 2014-12-01: Fixed version as noted by Konstantin Petrukhnov in the comments.</p>
",Durandal,Durandal,1348846189,1417447041,1417447041
http://stackoverflow.com/a/1264872/535646,Pretty-printing output from javax.xml.transform.Transformer with only standard java api (Indentation and Doctype positioning),78211,Alderath,Community,1250064243,1530646504,1495542879,https://stackoverflow.com/questions/1264849/pretty-printing-output-from-javax-xml-transform-transformer-with-only-standard-j,"<p>The missing part is the amount to indent. You can set the indentation and indent amount as follow:</p>

<pre><code>transformer.setOutputProperty(OutputKeys.INDENT, ""yes"");
transformer.setOutputProperty(""{http://xml.apache.org/xslt}indent-amount"", ""2"");
transformer.transform(xmlInput, xmlOutput);
</code></pre>
",Rich Seller,dfa,1250064697,1250064746,1250064746
http://stackoverflow.com/a/12665408/111426,Is gcc 4.8 or earlier buggy about regular expressions?,26552,tunnuz,T.C.,1348229623,1499711550,1443327893,https://stackoverflow.com/questions/12530406/is-gcc-4-8-or-earlier-buggy-about-regular-expressions,"<p><strong><code>&lt;regex&gt;</code> was implemented and released in GCC 4.9.0.</strong></p>

<p>In your (older) version of GCC, it is <a href=""http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53631"" rel=""noreferrer"">not implemented</a>.</p>

<p>That prototype <code>&lt;regex&gt;</code> code was added when all of GCC's C++0x support was <strong>highly</strong> experimental, tracking early C++0x drafts and being made available for people to experiment with. That allowed people to find problems and give feedback to the standard committee before the standard was finalised. At the time lots of people were grateful to have had access to bleeding edge features long before C++11 was finished and before many other compilers provided <em>any</em> support, and that feedback really helped improve C++11. This was a Good Thing<sup>TM</sup>.</p>

<p>The <code>&lt;regex&gt;</code> code was never in a useful state, but was added as a work-in-progress like many other bits of code at the time. It was checked in and made available for others to collaborate on if they wanted to, with the intention that it would be finished eventually.</p>

<p>That's often how open source works: <a href=""http://en.wikipedia.org/wiki/Release_early,_release_often"" rel=""noreferrer"">Release early, release often</a> -- unfortunately in the case of <code>&lt;regex&gt;</code> we only got the early part right and not the often part that would have finished the implementation. </p>

<p>Most parts of the library were more complete and are now almost fully implemented, but <code>&lt;regex&gt;</code> hadn't been, so it stayed in the same unfinished state since it was added.</p>

<blockquote>
  <p>Seriously though, who though that shipping an implementation of regex_search that only does ""return false"" was a good idea?</p>
</blockquote>

<p>It wasn't such a bad idea a few years ago, when C++0x was still a work in progress and we shipped lots of partial implementations. No-one thought it would remain unusable for so long so, with hindsight, maybe it should have been disabled and required a macro or built-time option to enable it. But that ship sailed long ago. There are exported symbols from the <em>libstdc++.so</em> library that depend on the regex code, so simply removing it (in, say, GCC 4.8) would not have been trivial.</p>
",Jonathan Wakely,Lightness Races in Orbit,1349041538,1443481572,1443481572
http://stackoverflow.com/a/1268377/119493,How can I pad a value with leading zeros?,177554,Wilco,Salman A,1250094816,1557443773,1493298962,https://stackoverflow.com/questions/1267283/how-can-i-pad-a-value-with-leading-zeros,"<p>I actually had to come up with something like this recently.
I figured there had to be a way to do it without using loops.</p>

<p>This is what I came up with.</p>

<pre><code>function zeroPad(num, numZeros) {
    var n = Math.abs(num);
    var zeros = Math.max(0, numZeros - Math.floor(n).toString().length );
    var zeroString = Math.pow(10,zeros).toString().substr(1);
    if( num &lt; 0 ) {
        zeroString = '-' + zeroString;
    }

    return zeroString+n;
}
</code></pre>

<p>Then just use it providing a number to zero pad:</p>

<pre><code>&gt; zeroPad(50,4);
""0050""
</code></pre>

<p>If the number is larger than the padding, the number will expand beyond the padding:</p>

<pre><code>&gt; zeroPad(51234, 3);
""51234""
</code></pre>

<p>Decimals are fine too!</p>

<pre><code>&gt; zeroPad(51.1234, 4);
""0051.1234""
</code></pre>

<p>If you don't mind polluting the global namespace you can add it to Number directly:</p>

<pre><code>Number.prototype.leftZeroPad = function(numZeros) {
    var n = Math.abs(this);
    var zeros = Math.max(0, numZeros - Math.floor(n).toString().length );
    var zeroString = Math.pow(10,zeros).toString().substr(1);
    if( this &lt; 0 ) {
        zeroString = '-' + zeroString;
    }

    return zeroString+n;
}
</code></pre>

<p>And if you'd rather have decimals take up space in the padding:</p>

<pre><code>Number.prototype.leftZeroPad = function(numZeros) {
    var n = Math.abs(this);
    var zeros = Math.max(0, numZeros - n.toString().length );
    var zeroString = Math.pow(10,zeros).toString().substr(1);
    if( this &lt; 0 ) {
        zeroString = '-' + zeroString;
    }

    return zeroString+n;
}
</code></pre>

<p>Cheers!</p>

<hr>

<hr>

<p><a href=""https://stackoverflow.com/users/2030088/xdr"">XDR</a> came up with <strong>a logarithmic variation</strong> that seems to perform better.</p>

<p><strong>WARNING</strong>: This function fails if num equals zero (e.g. zeropad(0, 2))</p>

<pre><code>function zeroPad (num, numZeros) {
    var an = Math.abs (num);
    var digitCount = 1 + Math.floor (Math.log (an) / Math.LN10);
    if (digitCount &gt;= numZeros) {
        return num;
    }
    var zeroString = Math.pow (10, numZeros - digitCount).toString ().substr (1);
    return num &lt; 0 ? '-' + zeroString + an : zeroString + an;
}
</code></pre>

<hr>

<p>Speaking of performance, <a href=""https://stackoverflow.com/users/1608468/tomsmeding"">tomsmeding</a> <a href=""http://jsperf.com/left-zero-pad"" rel=""noreferrer"">compared the top 3 answers</a> (<a href=""http://jsperf.com/left-zero-pad/10"" rel=""noreferrer"">4 with the log variation</a>).  Guess which one <em>majorly</em> outperformed the other two? :)</p>
",coderjoe,Community,1250107108,1427797083,1495542893
http://stackoverflow.com/a/1268642/276949,"create ini file, write values in PHP",52324,netrox,Dominic Rodger,1250107111,1519837907,1250107983,https://stackoverflow.com/questions/1268378/create-ini-file-write-values-in-php,"<p>Found following code snippet from the comments of the PHP documentation:</p>

<pre><code>function write_ini_file($assoc_arr, $path, $has_sections=FALSE) { 
    $content = """"; 
    if ($has_sections) { 
        foreach ($assoc_arr as $key=&gt;$elem) { 
            $content .= ""["".$key.""]\n""; 
            foreach ($elem as $key2=&gt;$elem2) { 
                if(is_array($elem2)) 
                { 
                    for($i=0;$i&lt;count($elem2);$i++) 
                    { 
                        $content .= $key2.""[] = \"""".$elem2[$i].""\""\n""; 
                    } 
                } 
                else if($elem2=="""") $content .= $key2."" = \n""; 
                else $content .= $key2."" = \"""".$elem2.""\""\n""; 
            } 
        } 
    } 
    else { 
        foreach ($assoc_arr as $key=&gt;$elem) { 
            if(is_array($elem)) 
            { 
                for($i=0;$i&lt;count($elem);$i++) 
                { 
                    $content .= $key.""[] = \"""".$elem[$i].""\""\n""; 
                } 
            } 
            else if($elem=="""") $content .= $key."" = \n""; 
            else $content .= $key."" = \"""".$elem.""\""\n""; 
        } 
    } 

    if (!$handle = fopen($path, 'w')) { 
        return false; 
    }

    $success = fwrite($handle, $content);
    fclose($handle); 

    return $success; 
}
</code></pre>

<p>Usage:</p>

<pre><code>$sampleData = array(
                'first' =&gt; array(
                    'first-1' =&gt; 1,
                    'first-2' =&gt; 2,
                    'first-3' =&gt; 3,
                    'first-4' =&gt; 4,
                    'first-5' =&gt; 5,
                ),
                'second' =&gt; array(
                    'second-1' =&gt; 1,
                    'second-2' =&gt; 2,
                    'second-3' =&gt; 3,
                    'second-4' =&gt; 4,
                    'second-5' =&gt; 5,
                ));
write_ini_file($sampleData, './data.ini', true);
</code></pre>

<p>Good luck!</p>
",Harri Siirak,Harikrishnan,1250109946,1408618268,1408618268
http://stackoverflow.com/a/1270960/319922,How do I expire a PHP session after 30 minutes?,896196,Tom,Mob,1233926054,1553837962,1318491525,https://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes,"<p>You should implement a session timeout of your own. Both options mentioned by others (<a href=""http://php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime"" rel=""noreferrer""><em>session.gc_maxlifetime</em></a> and <a href=""http://php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime"" rel=""noreferrer""><em>session.cookie_lifetime</em></a>) are not reliable. I'll explain the reasons for that.</p>

<p><strong>First:</strong></p>

<blockquote>
  <p><strong>session.gc_maxlifetime</strong><br>
  <em>session.gc_maxlifetime</em> specifies the number of seconds after which data will be seen as 'garbage' and cleaned up. Garbage collection occurs during session start.</p>
</blockquote>

<p>But the garbage collector is only started with a probability of <a href=""http://php.net/manual/en/session.configuration.php#ini.session.gc-probability"" rel=""noreferrer""><em>session.gc_probability</em></a> divided by <a href=""http://php.net/manual/en/session.configuration.php#ini.session.gc-divisor"" rel=""noreferrer""><em>session.gc_divisor</em></a>. And using the default values for those options (1 and 100 respectively), the chance is only at 1%.</p>

<p>Well, you could simply adjust these values so that the garbage collector is started more often. But when the garbage collector is started, it will check the validity for every registered session. And that is cost-intensive.</p>

<p>Furthermore, when using PHP's default <a href=""http://php.net/manual/en/session.configuration.php#ini.session.save-handler"" rel=""noreferrer""><em>session.save_handler</em></a> files, the session data is stored in files in a path specified in <a href=""http://php.net/manual/en/session.configuration.php#ini.session.save-path"" rel=""noreferrer""><em>session.save_path</em></a>. With that session handler, the age of the session data is calculated on the file's last modification date and not the last access date:</p>

<blockquote>
  <p><strong>Note:</strong> If you are using the default file-based session handler, your filesystem must keep track of access times (atime). Windows FAT does not so you will have to come up with another way to handle garbage collecting your session if you are stuck with a FAT filesystem or any other filesystem where atime tracking is not available. Since PHP 4.2.3 it has used mtime (modified date) instead of atime. So, you won't have problems with filesystems where atime tracking is not available.</p>
</blockquote>

<p>So it additionally might occur that a session data file is deleted while the session itself is still considered as valid because the session data was not updated recently.</p>

<p><strong>And second:</strong></p>

<blockquote>
  <p><strong>session.cookie_lifetime</strong><br>
  <em>session.cookie_lifetime</em> specifies the lifetime of the cookie in seconds which is sent to the browser. []</p>
</blockquote>

<p>Yes, that's right. This only affects the cookie lifetime and the session itself may still be valid. But it's the server's task to invalidate a session, not the client. So this doesn't help anything. In fact, having <em>session.cookie_lifetime</em> set to <code>0</code> would make the sessions cookie a real <a href=""http://en.wikipedia.org/wiki/HTTP_cookie#Session_cookie"" rel=""noreferrer"">session cookie</a> that is only valid until the browser is closed.</p>

<p><strong>Conclusion / best solution:</strong></p>

<p>The best solution is to implement a session timeout of your own. Use a simple time stamp that denotes the time of the last activity (i.e. request) and update it with every request:</p>

<pre><code>if (isset($_SESSION['LAST_ACTIVITY']) &amp;&amp; (time() - $_SESSION['LAST_ACTIVITY'] &gt; 1800)) {
    // last request was more than 30 minutes ago
    session_unset();     // unset $_SESSION variable for the run-time 
    session_destroy();   // destroy session data in storage
}
$_SESSION['LAST_ACTIVITY'] = time(); // update last activity time stamp
</code></pre>

<p>Updating the session data with every request also changes the session file's modification date so that the session is not removed by the garbage collector prematurely.</p>

<p>You can also use an additional time stamp to regenerate the session ID periodically to avoid attacks on sessions like <a href=""http://www.owasp.org/index.php/Session_fixation"" rel=""noreferrer"">session fixation</a>:</p>

<pre><code>if (!isset($_SESSION['CREATED'])) {
    $_SESSION['CREATED'] = time();
} else if (time() - $_SESSION['CREATED'] &gt; 1800) {
    // session started more than 30 minutes ago
    session_regenerate_id(true);    // change session ID for the current session and invalidate old session ID
    $_SESSION['CREATED'] = time();  // update creation time
}
</code></pre>

<p><strong>Notes:</strong></p>

<ul>
<li><code>session.gc_maxlifetime</code> should be at least equal to the lifetime of this custom expiration handler (1800 in this example);</li>
<li>if you want to expire the session after 30 minutes of <em>activity</em> instead of after 30 minutes <em>since start</em>, you'll also need to use <code>setcookie</code> with an expire of <code>time()+60*30</code> to keep the session cookie active.</li>
</ul>
",Gumbo,Lode,1250155479,1424851119,1424851119
http://stackoverflow.com/a/12712362/2679626,QtSingleApplication for PySide or PyQt,2754,Johan R&#229;de,Johan R&#229;de,1349280123,1372401592,1349363215,https://stackoverflow.com/questions/12712360/qtsingleapplication-for-pyside-or-pyqt,"<p>Here is my own implementation.
It has been tested with Python 2.7 and PySide 1.1.</p>

<p>It has essentially the same interface as the <a href=""http://doc.qt.digia.com/solutions/4/qtsingleapplication/qtsingleapplication.html"" rel=""noreferrer"">C++ version of <code>QtSingleApplication</code></a>. The main difference is that you must supply an application unique id to the constructor. (The C++ version by default uses the path to the executable as a unique id; that would not work here because the executable will most likely be <code>python.exe</code>.)</p>

<pre><code>from PySide.QtCore import *
from PySide.QtGui import *
from PySide.QtNetwork import *

class QtSingleApplication(QApplication):

    messageReceived = Signal(unicode)

    def __init__(self, id, *argv):

        super(QtSingleApplication, self).__init__(*argv)
        self._id = id
        self._activationWindow = None
        self._activateOnMessage = False

        # Is there another instance running?
        self._outSocket = QLocalSocket()
        self._outSocket.connectToServer(self._id)
        self._isRunning = self._outSocket.waitForConnected()

        if self._isRunning:
            # Yes, there is.
            self._outStream = QTextStream(self._outSocket)
            self._outStream.setCodec('UTF-8')
        else:
            # No, there isn't.
            self._outSocket = None
            self._outStream = None
            self._inSocket = None
            self._inStream = None
            self._server = QLocalServer()
            self._server.listen(self._id)
            self._server.newConnection.connect(self._onNewConnection)

    def isRunning(self):
        return self._isRunning

    def id(self):
        return self._id

    def activationWindow(self):
        return self._activationWindow

    def setActivationWindow(self, activationWindow, activateOnMessage = True):
        self._activationWindow = activationWindow
        self._activateOnMessage = activateOnMessage

    def activateWindow(self):
        if not self._activationWindow:
            return
        self._activationWindow.setWindowState(
            self._activationWindow.windowState() &amp; ~Qt.WindowMinimized)
        self._activationWindow.raise_()
        self._activationWindow.activateWindow()

    def sendMessage(self, msg):
        if not self._outStream:
            return False
        self._outStream &lt;&lt; msg &lt;&lt; '\n'
        self._outStream.flush()
        return self._outSocket.waitForBytesWritten()

    def _onNewConnection(self):
        if self._inSocket:
            self._inSocket.readyRead.disconnect(self._onReadyRead)
        self._inSocket = self._server.nextPendingConnection()
        if not self._inSocket:
            return
        self._inStream = QTextStream(self._inSocket)
        self._inStream.setCodec('UTF-8')
        self._inSocket.readyRead.connect(self._onReadyRead)
        if self._activateOnMessage:
            self.activateWindow()

    def _onReadyRead(self):
        while True:
            msg = self._inStream.readLine()
            if not msg: break
            self.messageReceived.emit(msg)
</code></pre>

<p>Here is a simple test program:</p>

<pre><code>import sys
from PySide.QtGui import *
from QtSingleApplication import QtSingleApplication

appGuid = 'F3FF80BA-BA05-4277-8063-82A6DB9245A2'
app = QtSingleApplication(appGuid, sys.argv)
if app.isRunning(): sys.exit(0)

w = QWidget()
w.show()
app.setActivationWindow(w)
sys.exit(app.exec_())
</code></pre>
",Johan Rde,Johan Rde,1349280123,1372401592,1372401592
http://stackoverflow.com/a/12712362/605356,QtSingleApplication for PySide or PyQt,2754,Johan R&#229;de,Johan R&#229;de,1349280123,1372401592,1349363215,https://stackoverflow.com/questions/12712360/qtsingleapplication-for-pyside-or-pyqt,"<p>Here is my own implementation.
It has been tested with Python 2.7 and PySide 1.1.</p>

<p>It has essentially the same interface as the <a href=""http://doc.qt.digia.com/solutions/4/qtsingleapplication/qtsingleapplication.html"" rel=""noreferrer"">C++ version of <code>QtSingleApplication</code></a>. The main difference is that you must supply an application unique id to the constructor. (The C++ version by default uses the path to the executable as a unique id; that would not work here because the executable will most likely be <code>python.exe</code>.)</p>

<pre><code>from PySide.QtCore import *
from PySide.QtGui import *
from PySide.QtNetwork import *

class QtSingleApplication(QApplication):

    messageReceived = Signal(unicode)

    def __init__(self, id, *argv):

        super(QtSingleApplication, self).__init__(*argv)
        self._id = id
        self._activationWindow = None
        self._activateOnMessage = False

        # Is there another instance running?
        self._outSocket = QLocalSocket()
        self._outSocket.connectToServer(self._id)
        self._isRunning = self._outSocket.waitForConnected()

        if self._isRunning:
            # Yes, there is.
            self._outStream = QTextStream(self._outSocket)
            self._outStream.setCodec('UTF-8')
        else:
            # No, there isn't.
            self._outSocket = None
            self._outStream = None
            self._inSocket = None
            self._inStream = None
            self._server = QLocalServer()
            self._server.listen(self._id)
            self._server.newConnection.connect(self._onNewConnection)

    def isRunning(self):
        return self._isRunning

    def id(self):
        return self._id

    def activationWindow(self):
        return self._activationWindow

    def setActivationWindow(self, activationWindow, activateOnMessage = True):
        self._activationWindow = activationWindow
        self._activateOnMessage = activateOnMessage

    def activateWindow(self):
        if not self._activationWindow:
            return
        self._activationWindow.setWindowState(
            self._activationWindow.windowState() &amp; ~Qt.WindowMinimized)
        self._activationWindow.raise_()
        self._activationWindow.activateWindow()

    def sendMessage(self, msg):
        if not self._outStream:
            return False
        self._outStream &lt;&lt; msg &lt;&lt; '\n'
        self._outStream.flush()
        return self._outSocket.waitForBytesWritten()

    def _onNewConnection(self):
        if self._inSocket:
            self._inSocket.readyRead.disconnect(self._onReadyRead)
        self._inSocket = self._server.nextPendingConnection()
        if not self._inSocket:
            return
        self._inStream = QTextStream(self._inSocket)
        self._inStream.setCodec('UTF-8')
        self._inSocket.readyRead.connect(self._onReadyRead)
        if self._activateOnMessage:
            self.activateWindow()

    def _onReadyRead(self):
        while True:
            msg = self._inStream.readLine()
            if not msg: break
            self.messageReceived.emit(msg)
</code></pre>

<p>Here is a simple test program:</p>

<pre><code>import sys
from PySide.QtGui import *
from QtSingleApplication import QtSingleApplication

appGuid = 'F3FF80BA-BA05-4277-8063-82A6DB9245A2'
app = QtSingleApplication(appGuid, sys.argv)
if app.isRunning(): sys.exit(0)

w = QWidget()
w.show()
app.setActivationWindow(w)
sys.exit(app.exec_())
</code></pre>
",Johan Rde,Johan Rde,1349280123,1372401592,1372401592
http://stackoverflow.com/a/12714084/220825,Includes Touch Events clientX/Y scrolling or not?,14775,kuvik,,1304522523,1360843960,0,https://stackoverflow.com/questions/5885808/includes-touch-events-clientx-y-scrolling-or-not,"<p>You're not doing anything wrong. It's a bug in older versions of webkit that occur when the page is scrolled. I have seen this bug in iOS4 and a different bug in Android 4.0.</p>

<p>I've found a way to detect the bugs and calculate the correct values. Hope this can be useful for others:</p>

<pre><code>function fixTouch (touch) {
    var winPageX = window.pageXOffset,
        winPageY = window.pageYOffset,
        x = touch.clientX,
        y = touch.clientY;

    if (touch.pageY === 0 &amp;&amp; Math.floor(y) &gt; Math.floor(touch.pageY) ||
        touch.pageX === 0 &amp;&amp; Math.floor(x) &gt; Math.floor(touch.pageX)) {
        // iOS4 clientX/clientY have the value that should have been
        // in pageX/pageY. While pageX/page/ have the value 0
        x = x - winPageX;
        y = y - winPageY;
    } else if (y &lt; (touch.pageY - winPageY) || x &lt; (touch.pageX - winPageX) ) {
        // Some Android browsers have totally bogus values for clientX/Y
        // when scrolling/zooming a page. Detectable since clientX/clientY
        // should never be smaller than pageX/pageY minus page scroll
        x = touch.pageX - winPageX;
        y = touch.pageY - winPageY;
    }

    return {
        clientX:    x,
        clientY:    y
    };
}
</code></pre>

<p>This function has to be called for each touch in the event.touches array.</p>
",gregers,gregers,1349286824,1360843960,1360843960
http://stackoverflow.com/a/12715032/1123654,Closing the database in a ContentProvider,23195,SilithCrowe,Community,1293553156,1349290756,1495541378,https://stackoverflow.com/questions/4547461/closing-the-database-in-a-contentprovider,"<p><a href=""https://groups.google.com/forum/#!msg/android-developers/NwDRpHUXt0U/jIam4Q8-cqQJ"">According to Dianne Hackborn</a> (Android framework engineer) there is no need to close the database in a content provider.</p>

<blockquote>
  <p>A content provider is created when its hosting process is created, and
  remains around for as long as the process does, so there is no need to
  close the database -- it will get closed as part of the kernel
  cleaning up the process's resources when the process is killed.</p>
</blockquote>

<p>Thanks @bigstones for pointing this out.</p>
",philipp,,1349290756,1349290756,0
http://stackoverflow.com/a/12733172/1207769,How to get the path of a running JAR file?,445313,Thiago Chaves,informatik01,1227702638,1562242887,1383025449,https://stackoverflow.com/questions/320542/how-to-get-the-path-of-a-running-jar-file,"<p>To obtain the <code>File</code> for a given <code>Class</code>, there are two steps:</p>

<ol>
<li>Convert the <code>Class</code> to a <code>URL</code></li>
<li>Convert the <code>URL</code> to a <code>File</code></li>
</ol>

<p>It is important to understand both steps, and not conflate them.</p>

<p>Once you have the <code>File</code>, you can call <code>getParentFile</code> to get the containing folder, if that is what you need.</p>

<h2>Step 1: <code>Class</code> to <code>URL</code></h2>

<p>As discussed in other answers, there are two major ways to find a <code>URL</code> relevant to a <code>Class</code>.</p>

<ol>
<li><p><code>URL url = Bar.class.getProtectionDomain().getCodeSource().getLocation();</code></p></li>
<li><p><code>URL url = Bar.class.getResource(Bar.class.getSimpleName() + "".class"");</code></p></li>
</ol>

<p>Both have pros and cons.</p>

<p>The <code>getProtectionDomain</code> approach yields the base location of the class (e.g., the containing JAR file). However, it is possible that the Java runtime's security policy will throw <code>SecurityException</code> when calling <code>getProtectionDomain()</code>, so if your application needs to run in a variety of environments, it is best to test in all of them.</p>

<p>The <code>getResource</code> approach yields the full URL resource path of the class, from which you will need to perform additional string manipulation. It may be a <code>file:</code> path, but it could also be <code>jar:file:</code> or even something nastier like <code>bundleresource://346.fwk2106232034:4/foo/Bar.class</code> when executing within an OSGi framework. Conversely, the <code>getProtectionDomain</code> approach correctly yields a <code>file:</code> URL even from within OSGi.</p>

<p>Note that both <code>getResource("""")</code> and <code>getResource(""."")</code> failed in my tests, when the class resided within a JAR file; both invocations returned null. So I recommend the #2 invocation shown above instead, as it seems safer.</p>

<h2>Step 2: <code>URL</code> to <code>File</code></h2>

<p>Either way, once you have a <code>URL</code>, the next step is convert to a <code>File</code>. This is its own challenge; see <a href=""http://weblogs.java.net/blog/kohsuke/archive/2007/04/how_to_convert.html"" rel=""noreferrer"">Kohsuke Kawaguchi's blog post about it</a> for full details, but in short, you can use <code>new File(url.toURI())</code> as long as the URL is completely well-formed.</p>

<p>Lastly, I would <em>highly discourage</em> using <code>URLDecoder</code>. Some characters of the URL, <code>:</code> and <code>/</code> in particular, are not valid URL-encoded characters. From the <a href=""http://docs.oracle.com/javase/7/docs/api/java/net/URLDecoder.html"" rel=""noreferrer"">URLDecoder</a> Javadoc:</p>

<blockquote>
  <p>It is assumed that all characters in the encoded string are one of the following: ""a"" through ""z"", ""A"" through ""Z"", ""0"" through ""9"", and ""-"", ""_"", ""."", and ""*"". The character ""%"" is allowed but is interpreted as the start of a special escaped sequence.</p>
  
  <p>...</p>
  
  <p>There are two possible ways in which this decoder could deal with illegal strings. It could either leave illegal characters alone or it could throw an IllegalArgumentException. Which approach the decoder takes is left to the implementation.</p>
</blockquote>

<p>In practice, <code>URLDecoder</code> generally does not throw <code>IllegalArgumentException</code> as threatened above. And if your file path has spaces encoded as <code>%20</code>, this approach may appear to work. However, if your file path has other non-alphameric characters such as <code>+</code> you will have problems with <code>URLDecoder</code> mangling your file path.</p>

<h2>Working code</h2>

<p>To achieve these steps, you might have methods like the following:</p>

<pre><code>/**
 * Gets the base location of the given class.
 * &lt;p&gt;
 * If the class is directly on the file system (e.g.,
 * ""/path/to/my/package/MyClass.class"") then it will return the base directory
 * (e.g., ""file:/path/to"").
 * &lt;/p&gt;
 * &lt;p&gt;
 * If the class is within a JAR file (e.g.,
 * ""/path/to/my-jar.jar!/my/package/MyClass.class"") then it will return the
 * path to the JAR (e.g., ""file:/path/to/my-jar.jar"").
 * &lt;/p&gt;
 *
 * @param c The class whose location is desired.
 * @see FileUtils#urlToFile(URL) to convert the result to a {@link File}.
 */
public static URL getLocation(final Class&lt;?&gt; c) {
    if (c == null) return null; // could not load the class

    // try the easy way first
    try {
        final URL codeSourceLocation =
            c.getProtectionDomain().getCodeSource().getLocation();
        if (codeSourceLocation != null) return codeSourceLocation;
    }
    catch (final SecurityException e) {
        // NB: Cannot access protection domain.
    }
    catch (final NullPointerException e) {
        // NB: Protection domain or code source is null.
    }

    // NB: The easy way failed, so we try the hard way. We ask for the class
    // itself as a resource, then strip the class's path from the URL string,
    // leaving the base path.

    // get the class's raw resource path
    final URL classResource = c.getResource(c.getSimpleName() + "".class"");
    if (classResource == null) return null; // cannot find class resource

    final String url = classResource.toString();
    final String suffix = c.getCanonicalName().replace('.', '/') + "".class"";
    if (!url.endsWith(suffix)) return null; // weird URL

    // strip the class's path from the URL string
    final String base = url.substring(0, url.length() - suffix.length());

    String path = base;

    // remove the ""jar:"" prefix and ""!/"" suffix, if present
    if (path.startsWith(""jar:"")) path = path.substring(4, path.length() - 2);

    try {
        return new URL(path);
    }
    catch (final MalformedURLException e) {
        e.printStackTrace();
        return null;
    }
} 

/**
 * Converts the given {@link URL} to its corresponding {@link File}.
 * &lt;p&gt;
 * This method is similar to calling {@code new File(url.toURI())} except that
 * it also handles ""jar:file:"" URLs, returning the path to the JAR file.
 * &lt;/p&gt;
 * 
 * @param url The URL to convert.
 * @return A file path suitable for use with e.g. {@link FileInputStream}
 * @throws IllegalArgumentException if the URL does not correspond to a file.
 */
public static File urlToFile(final URL url) {
    return url == null ? null : urlToFile(url.toString());
}

/**
 * Converts the given URL string to its corresponding {@link File}.
 * 
 * @param url The URL to convert.
 * @return A file path suitable for use with e.g. {@link FileInputStream}
 * @throws IllegalArgumentException if the URL does not correspond to a file.
 */
public static File urlToFile(final String url) {
    String path = url;
    if (path.startsWith(""jar:"")) {
        // remove ""jar:"" prefix and ""!/"" suffix
        final int index = path.indexOf(""!/"");
        path = path.substring(4, index);
    }
    try {
        if (PlatformUtils.isWindows() &amp;&amp; path.matches(""file:[A-Za-z]:.*"")) {
            path = ""file:/"" + path.substring(5);
        }
        return new File(new URL(path).toURI());
    }
    catch (final MalformedURLException e) {
        // NB: URL is not completely well-formed.
    }
    catch (final URISyntaxException e) {
        // NB: URL is not completely well-formed.
    }
    if (path.startsWith(""file:"")) {
        // pass through the URL as-is, minus ""file:"" prefix
        path = path.substring(5);
        return new File(path);
    }
    throw new IllegalArgumentException(""Invalid URL: "" + url);
}
</code></pre>

<p>You can find these methods in the <a href=""https://github.com/scijava/scijava-common"" rel=""noreferrer"">SciJava Common</a> library:</p>

<ul>
<li><a href=""https://github.com/scijava/scijava-common/blob/scijava-common-2.62.1/src/main/java/org/scijava/util/ClassUtils.java#L296-L355"" rel=""noreferrer"">org.scijava.util.ClassUtils</a></li>
<li><a href=""https://github.com/scijava/scijava-common/blob/scijava-common-2.62.1/src/main/java/org/scijava/util/FileUtils.java#L221-L268"" rel=""noreferrer"">org.scijava.util.FileUtils</a>.</li>
</ul>
",ctrueden,ctrueden,1349374080,1488310316,1488310316
http://stackoverflow.com/a/12733317/689144,Threadsafety in Javamail,7051,djechlin,,1349371860,1349682332,0,https://stackoverflow.com/questions/12732584/threadsafety-in-javamail,"<p>Admittedly the thread safety rules for JavaMail are not well documented, but hopefully they mostly match what you would expect.</p>

<p>Multiple threads can use a Session.</p>

<p>Since a Transport represents a connection to a mail server, and only a single thread can use the connection at a time, a Transport will synchronize access from multiple threads to maintain thread safety, but you'll really only want to use it from a single thread.</p>

<p>Similarly, a Store can be used by multiple threads, but access to the underlying connection will be synchronized and single threaded.</p>

<p>A Message should only be modified by a single thread at a time, but multiple threads should be able to read a message safely (although it's not clear why you would want to do that).</p>

<p>Hope that helps...</p>
",Bill Shannon,,1349374577,1349374577,0
http://stackoverflow.com/a/12747364/2994108,How to get error event details in Firefox using addEventListener?,12498,Claudio,Sk8erPeter,1349439200,1437747061,1368916558,https://stackoverflow.com/questions/12746034/how-to-get-error-event-details-in-firefox-using-addeventlistener,"<p>The <a href=""http://www.w3.org/TR/html5/webappapis.html#creating-scripts"" rel=""nofollow noreferrer"">HTML5 specification requires</a> that a parse failure causes the browser to:</p>

<blockquote>
  <p>...report the error for script, with the problematic position (line number and column number), using the global object... as the target.</p>
</blockquote>

<p>Where ""<a href=""http://www.w3.org/TR/html5/webappapis.html#report-the-error"" rel=""nofollow noreferrer"">report the error</a>"" includes the steps </p>

<blockquote>
  <ol start=""4"">
  <li>Let <em>message</em> be a user-agent-defined string describing the error in a helpful manner.</li>
  </ol>
  
  <p>...</p>
  
  <ol start=""7"">
  <li><p>Let <em>event</em> be a new trusted <code>ErrorEvent</code> object that does not bubble but is cancelable, and which has the event name <code>error</code>.</p></li>
  <li><p>Initialize <em>event</em>'s <code>message</code> attribute to <em>message</em>.</p></li>
  </ol>
  
  <p>...</p>
  
  <ol start=""13"">
  <li>Dispatch <em>event</em> at <em>target</em>.</li>
  </ol>
</blockquote>

<p>Thus, any HTML5-compliant browser will report parse-time error events on <code>window</code>, which include a <code>message</code> attribute set to a ""<em>user-agent-defined string describing the error in a helpful manner.</em>"" Any browser version that fails to do this is not yet HTML5 compliant in this regard.</p>

<hr>

<p>Previously (at the time this question was written), <code>window.onerror</code> gave information that was not provided by <code>window.addEventListener(""error"")</code>. If you must use an old version of Firefox, you can <a href=""https://developer.mozilla.org/en-US/docs/DOM/window.onerror#Example"" rel=""nofollow noreferrer"">safely use <code>window.onerror</code></a>:</p>

<blockquote>
<pre><code>// Example 1:

// Prevent error dialogs from displaying -which is the window's normal
// behavior- by overriding the default event handler for error events that
// go to the window.
window.onerror = null;

// Example 2:

var gOldOnError = window.onerror;
// Override previous handler.
window.onerror = function myErrorHandler(errorMsg, url, lineNumber) {
  if (gOldOnError)
    // Call previous handler.
    return gOldOnError(errorMsg, url, lineNumber);

  // Just let default handler run.
  return false;
}
</code></pre>
</blockquote>
",apsillers,apsillers,1349443897,1437747061,1437747061
http://stackoverflow.com/a/12763962/2243419,Copy entire contents of a directory to another using php,150413,dave,Asaph,1263316656,1541409155,1263317220,https://stackoverflow.com/questions/2050859/copy-entire-contents-of-a-directory-to-another-using-php,"<p>As <a href=""http://www.aidanlister.com/2004/04/recursively-copying-directories-in-php/"" rel=""noreferrer"">described here</a>, this is another approach that takes care of symlinks too:</p>

<pre><code>/**
 * Copy a file, or recursively copy a folder and its contents
 * @author      Aidan Lister &lt;aidan@php.net&gt;
 * @version     1.0.1
 * @link        http://aidanlister.com/2004/04/recursively-copying-directories-in-php/
 * @param       string   $source    Source path
 * @param       string   $dest      Destination path
 * @param       int      $permissions New folder creation permissions
 * @return      bool     Returns true on success, false on failure
 */
function xcopy($source, $dest, $permissions = 0755)
{
    // Check for symlinks
    if (is_link($source)) {
        return symlink(readlink($source), $dest);
    }

    // Simple copy for a file
    if (is_file($source)) {
        return copy($source, $dest);
    }

    // Make destination directory
    if (!is_dir($dest)) {
        mkdir($dest, $permissions);
    }

    // Loop through the folder
    $dir = dir($source);
    while (false !== $entry = $dir-&gt;read()) {
        // Skip pointers
        if ($entry == '.' || $entry == '..') {
            continue;
        }

        // Deep copy directories
        xcopy(""$source/$entry"", ""$dest/$entry"", $permissions);
    }

    // Clean up
    $dir-&gt;close();
    return true;
}
</code></pre>
",itsjavi,Ron,1349558272,1461683550,1461683550
http://stackoverflow.com/a/12771438/596939,Flask request.remote_addr is wrong on webfaction and not showing real user IP,21491,Ignas Butnas,Korrupt,1349629755,1530205919,1349632824,https://stackoverflow.com/questions/12770950/flask-request-remote-addr-is-wrong-on-webfaction-and-not-showing-real-user-ip,"<p>If there is a proxy in front of Flask, then something like this will get the real IP in Flask:</p>

<pre><code>if request.headers.getlist(""X-Forwarded-For""):
   ip = request.headers.getlist(""X-Forwarded-For"")[0]
else:
   ip = request.remote_addr
</code></pre>

<p><strong>Update:</strong> Very good point mentioned by Eli in his comment. There could be some security issues if you just simply use this. Read <a href=""http://esd.io/blog/flask-apps-heroku-real-ip-spoofing.html"" rel=""noreferrer"">Eli's post</a> to get more details.</p>
",Ignas Butnas,Community,1349633552,1459618434,1459618434
http://stackoverflow.com/a/12774387/1387006,Fastest way to check if a file exist using standard C++/C++11/C?,521586,Vincent,MD XF,1349658611,1542477795,1488170874,https://stackoverflow.com/questions/12774207/fastest-way-to-check-if-a-file-exist-using-standard-c-c11-c,"<p>Well I threw together a test program that ran each of these methods 100,000 times, half on files that existed and half on files that didn't.</p>

<pre><code>#include &lt;sys/stat.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string&gt;
#include &lt;fstream&gt;

inline bool exists_test0 (const std::string&amp; name) {
    ifstream f(name.c_str());
    return f.good();
}

inline bool exists_test1 (const std::string&amp; name) {
    if (FILE *file = fopen(name.c_str(), ""r"")) {
        fclose(file);
        return true;
    } else {
        return false;
    }   
}

inline bool exists_test2 (const std::string&amp; name) {
    return ( access( name.c_str(), F_OK ) != -1 );
}

inline bool exists_test3 (const std::string&amp; name) {
  struct stat buffer;   
  return (stat (name.c_str(), &amp;buffer) == 0); 
}
</code></pre>

<p>Results for total time to run the 100,000 calls averaged over 5 runs,</p>

<pre><code>Method exists_test0 (ifstream): **0.485s**
Method exists_test1 (FILE fopen): **0.302s**
Method exists_test2 (posix access()): **0.202s**
Method exists_test3 (posix stat()): **0.134s**
</code></pre>

<p>The <code>stat()</code> function provided the best performance on my system (Linux, compiled with <code>g++</code>), with a standard <code>fopen</code> call being your best bet if you for some reason refuse to use POSIX functions.</p>
",PherricOxide,iappwebdev,1349660602,1542477795,1542477795
http://stackoverflow.com/a/127972/2422398,How do I parse an ISO 8601-formatted date?,326027,Alexander Artemenko,martineau,1222269420,1557883969,1545583032,https://stackoverflow.com/questions/127803/how-do-i-parse-an-iso-8601-formatted-date,"<p>Note in Python 2.6+ and Py3K, the %f character catches microseconds.</p>

<pre><code>&gt;&gt;&gt; datetime.datetime.strptime(""2008-09-03T20:56:35.450686Z"", ""%Y-%m-%dT%H:%M:%S.%fZ"")
</code></pre>

<p>See issue <a href=""http://bugs.python.org/issue1158"" rel=""noreferrer"">here</a></p>
",sethbc,nofinator,1222271102,1452880925,1452880925
http://stackoverflow.com/a/12797413/50335,How do I &quot;normalize&quot; a pathname using boost::filesystem?,25427,Mike Willekes,Mike Willekes,1258423068,1493705740,1258424396,https://stackoverflow.com/questions/1746136/how-do-i-normalize-a-pathname-using-boostfilesystem,"<p>With version 3 of <code>boost::filesystem</code> you can also try to remove all the symbolic links with a call to <code>canonical</code>. This can be done only for existing paths so a function that also works for non-existing ones would require two steps (tested on MacOS Lion):</p>

<pre><code>boost::filesystem::path normalize(const boost::filesystem::path &amp;path) {
    boost::filesystem::path absPath = absolute(path);
    boost::filesystem::path::iterator it = absPath.begin();
    boost::filesystem::path result = *it++;

    // Get canonical version of the existing part
    for (; exists(result / *it) &amp;&amp; it != absPath.end(); ++it) {
        result /= *it;
    }
    result = canonical(result);

    // For the rest remove "".."" and ""."" in a path with no symlinks
    for (; it != absPath.end(); ++it) {
        // Just move back on ../
        if (*it == "".."") {
            result = result.parent_path();
        }
        // Ignore "".""
        else if (*it != ""."") {
            // Just cat other path entries
            result /= *it;
        }
    }

    return result;
}
</code></pre>
",jarzec,jarzec,1349776595,1365707151,1365707151
http://stackoverflow.com/a/128220/1084488,What to do with null fields in compare()?,22134,S&#233;bastien RoccaSerra,,1222272009,1515766125,0,https://stackoverflow.com/questions/128042/what-to-do-with-null-fields-in-compare,"<p>I guess you could wrap the call to the field compareTo method with a small static method to sort nulls high or low:</p>

<pre><code>static &lt;T extends Comparable&lt;T&gt;&gt; int cp(T a, T b) {
     return
         a==null ?
         (b==null ? 0 : Integer.MIN_VALUE) :
         (b==null ? Integer.MAX_VALUE : a.compareTo(b));
}
</code></pre>

<p>Simple usage (multiple fields is as you would normally):</p>

<pre><code>public int compare( final Foo o1, final Foo o2 ) {
    return cp(o1.field, o2.field);
}
</code></pre>
",Tom Hawtin - tackline,Jared Burrows,1222273806,1431814252,1431814252
http://stackoverflow.com/a/12830454/2950032,Round to at most 2 decimal places (only if necessary),2019980,stinkycheeseman,TylerH,1344273468,1560891154,1556651605,https://stackoverflow.com/questions/11832914/round-to-at-most-2-decimal-places-only-if-necessary,"<p>If the value is a text type:</p>

<pre><code>parseFloat(""123.456"").toFixed(2);
</code></pre>

<p>If the value is a number:</p>

<pre><code>var numb = 123.23454;
numb = numb.toFixed(2);
</code></pre>

<p>There is a downside that values like 1.5 will give ""1.50"" as the output. A fix suggested by @minitech:</p>

<pre><code>var numb = 1.5;
numb = +numb.toFixed(2);
// Note the plus sign that drops any ""extra"" zeroes at the end.
// It changes the result (which is a string) into a number again (think ""0 + foo""),
// which means that it uses only as many digits as necessary.
</code></pre>

<p>It seems like <code>Math.round</code> is a better solution. <strong>But it is not!</strong> In some cases it will <strong>NOT</strong> round correctly:</p>

<pre><code>Math.round(1.005 * 1000)/1000 // Returns 1 instead of expected 1.01!
</code></pre>

<p>toFixed() also will <strong>NOT</strong> round correctly in some cases (tested in Chrome v.55.0.2883.87)!</p>

<p>Examples:</p>

<pre><code>parseFloat(""1.555"").toFixed(2); // Returns 1.55 instead of 1.56.
parseFloat(""1.5550"").toFixed(2); // Returns 1.55 instead of 1.56.
// However, it will return correct result if you round 1.5551.
parseFloat(""1.5551"").toFixed(2); // Returns 1.56 as expected.

1.3555.toFixed(3) // Returns 1.355 instead of expected 1.356.
// However, it will return correct result if you round 1.35551.
1.35551.toFixed(2); // Returns 1.36 as expected.
</code></pre>

<p>I guess, this is because 1.555 is actually something like float 1.55499994 behind the scenes.</p>

<p><strong>Solution 1</strong> is to use a script with required rounding algorithm, for example:</p>

<pre><code>function roundNumber(num, scale) {
  if(!("""" + num).includes(""e"")) {
    return +(Math.round(num + ""e+"" + scale)  + ""e-"" + scale);
  } else {
    var arr = ("""" + num).split(""e"");
    var sig = """"
    if(+arr[1] + scale &gt; 0) {
      sig = ""+"";
    }
    return +(Math.round(+arr[0] + ""e"" + sig + (+arr[1] + scale)) + ""e-"" + scale);
  }
}
</code></pre>

<p><a href=""https://plnkr.co/edit/uau8BlS1cqbvWPCHJeOy?p=preview"" rel=""noreferrer"">https://plnkr.co/edit/uau8BlS1cqbvWPCHJeOy?p=preview</a></p>

<p><strong>Solution 2</strong> is to avoid front end calculations and pull rounded values from the backend server.</p>
",A Kunin,Peter Mortensen,1349915244,1495827573,1495827573
http://stackoverflow.com/a/12867139/3708872,How to remove surrogate characters in Java?,5684,Slowcoder,MaVRoSCy,1350075427,1384766962,1350075469,https://stackoverflow.com/questions/12867000/how-to-remove-surrogate-characters-in-java,"<p>Here's a couple things:</p>

<ul>
<li><p><a href=""http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isSurrogate%28char%29""><code>Character.isSurrogate(char c)</code></a>:</p>

<blockquote>
  <p>A char value is a surrogate code unit if and only if it is either a low-surrogate code unit or a high-surrogate code unit.</p>
</blockquote></li>
<li><p>Checking for pairs seems pointless, why not just remove all surrogates?</p></li>
<li><p><code>x == false</code> is equivalent to <code>!x</code></p></li>
<li><p><a href=""http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html""><code>StringBuilder</code></a> is better in cases where you don't need synchronization (like a variable that never leaves local scope).</p></li>
</ul>

<p>I suggest this:</p>

<pre><code>public static String removeSurrogates(String query) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i &lt; query.length(); i++) {
        char c = query.charAt(i);
        // !isSurrogate(c) in Java 7
        if (!(Character.isHighSurrogate(c) || Character.isLowSurrogate(c))) {
            sb.append(firstChar);
        }
    }
    return sb.toString();
}
</code></pre>

<h3>Breaking down the <code>if</code> statement</h3>

<p>You asked about this statement:</p>

<pre><code>if (!(Character.isHighSurrogate(c) || Character.isLowSurrogate(c))) {
    sb.append(firstChar);
}
</code></pre>

<p>One way to understand it is to break each operation into its own function, so you can see that the combination does what you'd expect:</p>

<pre><code>static boolean isSurrogate(char c) {
    return Character.isHighSurrogate(c) || Character.isLowSurrogate(c);
}

static boolean isNotSurrogate(char c) {
    return !isSurrogate(c);
}

...

if (isNotSurrogate(c)) {
    sb.append(firstChar);
}
</code></pre>
",Brendan Long,Brendan Long,1350076126,1350080080,1350080080
http://stackoverflow.com/a/12883683/654755,Django - Mixing ListView and CreateView,12416,Nico,Mel,1329534761,1480515777,1480515777,https://stackoverflow.com/questions/9338181/django-mixing-listview-and-createview,"<p>I use a lot of views that involve a form and a list of objects. Rather than trying to mixin things I just add the queryset into the context data as below.  </p>

<pre><code>class UploadFileView(CreateView):
    form_class = UploadFileForm
    success_url = 'listview'
    template_name = 'textfrompdf/index.html'

    def get_context_data(self, **kwargs):
        kwargs['object_list'] = PdfFile.objects.order_by('id')
        return super(UploadFileView, self).get_context_data(**kwargs)
</code></pre>
",jondykeman,WhyNotHugo,1350228742,1424870878,1424870878
http://stackoverflow.com/a/12900504/307266,How can I get file extensions with JavaScript?,434505,Sergio del Amo,Ghoul Fool,1223636885,1543828269,1524218311,https://stackoverflow.com/questions/190852/how-can-i-get-file-extensions-with-javascript,"<p>The following solution is <strong>fast</strong> and <strong>short</strong> enough to use in bulk operations and save extra bytes:</p>

<pre><code> return fname.slice((fname.lastIndexOf(""."") - 1 &gt;&gt;&gt; 0) + 2);
</code></pre>

<p>Here is another one-line non-regexp universal solution:</p>

<pre><code> return fname.slice((Math.max(0, fname.lastIndexOf(""."")) || Infinity) + 1);
</code></pre>

<p>Both work correctly with names having no extension (e.g. <em>myfile</em>) or starting with <code>.</code> dot (e.g. <em>.htaccess</em>):</p>

<pre><code> """"                            --&gt;   """"
 ""name""                        --&gt;   """"
 ""name.txt""                    --&gt;   ""txt""
 "".htpasswd""                   --&gt;   """"
 ""name.with.many.dots.myext""   --&gt;   ""myext""
</code></pre>

<p>If you care about the speed you may run the <a href=""http://jsperf.com/extract-file-extension"" rel=""noreferrer""><strong>benchmark</strong></a> and check that the provided solutions are the fastest, while the short one is tremendously fast:</p>

<p><img src=""https://i.stack.imgur.com/ZL8Bn.png"" alt=""Speed comparison""></p>

<p><em>How the short one works:</em></p>

<ol>
<li><a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/lastIndexOf"" rel=""noreferrer""><code>String.lastIndexOf</code></a> method returns the last position of the substring (i.e. <code>"".""</code>) in the given string (i.e. <code>fname</code>). If the substring is not found method returns <code>-1</code>.</li>
<li>The ""unacceptable"" positions of dot in the filename are <code>-1</code> and <code>0</code>, which respectively refer to names with no extension (e.g. <code>""name""</code>) and to names that start with dot (e.g. <code>"".htaccess""</code>).</li>
<li><a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#%3E%3E%3E_%28Zero-fill_right_shift%29"" rel=""noreferrer"">Zero-fill right shift operator</a> (<code>&gt;&gt;&gt;</code>) if used with zero affects negative numbers transforming <code>-1</code> to <code>4294967295</code> and <code>-2</code> to <code>4294967294</code>, which is useful for remaining the filename unchanged in the edge cases (sort of a trick here).</li>
<li><a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/slice"" rel=""noreferrer""><code>String.prototype.slice</code></a> extracts the part of the filename from the position that was calculated as described. If the position number is more than the length of the string method returns <code>""""</code>.</li>
</ol>

<hr>

<p>If you want more clear solution which will work in the same way (plus with extra support of full path), check the following extended version. This solution will be <em>slower</em> than previous one-liners but is much easier to understand.</p>

<pre><code>function getExtension(path) {
    var basename = path.split(/[\\/]/).pop(),  // extract file name from full path ...
                                               // (supports `\\` and `/` separators)
        pos = basename.lastIndexOf(""."");       // get last position of `.`

    if (basename === """" || pos &lt; 1)            // if file name is empty or ...
        return """";                             //  `.` not found (-1) or comes first (0)

    return basename.slice(pos + 1);            // extract extension ignoring `.`
}

console.log( getExtension(""/path/to/file.ext"") );
// &gt;&gt; ""ext""
</code></pre>

<p>All three variants should work in any web browser on the client side and can be used in the server side NodeJS code as well.</p>
",VisioN,VisioN,1350320671,1441360803,1441360803
http://stackoverflow.com/a/12903503/556609,jQuery insertAt,29238,ilivewithian,sawa,1230119751,1470666626,1361356612,https://stackoverflow.com/questions/391314/jquery-insertat,"<p>A simple jQuery plugin (<a href=""http://jsfiddle.net/KQqfB/1/"" rel=""noreferrer"">a small test suite</a>) which permits adding an item at any index including 0.</p>

<pre><code>$.fn.insertAt = function(index, $parent) {
    return this.each(function() {
        if (index === 0) {
            $parent.prepend(this);
        } else {
            $parent.children().eq(index - 1).after(this);
        }
    });
}
</code></pre>

<p>Assuming we have the following HTML:</p>

<pre><code>&lt;ul id=""items""&gt;
    &lt;li&gt;A&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>Then inserting an item at index 0 <code>$('&lt;li&gt;C&lt;/li&gt;').insertAt(0, $('#items'))</code> will result in</p>

<pre><code>&lt;ul id=""items""&gt;
    &lt;li&gt;C&lt;/li&gt;
    &lt;li&gt;A&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p>Inserting another item, this time at index 1 <code>$('&lt;li&gt;B&lt;/li&gt;').insertAt(1, $('#items'))</code> yields</p>

<pre><code>&lt;ul id=""items""&gt;
    &lt;li&gt;C&lt;/li&gt;
    &lt;li&gt;B&lt;/li&gt;
    &lt;li&gt;A&lt;/li&gt;
&lt;/ul&gt;
</code></pre>

<p><em>Disclaimer:</em> there is no error handling of input parameters. If <code>index</code> is negative or greater than the length of children or if <code>index</code> is not a number the behavior is more or less undefined. If <code>$parent</code> is not a jQuery object <code>insertAt</code> will fail. </p>
",mrydengren,,1350332960,1350332960,0
http://stackoverflow.com/a/12927952/1441789,array indexing (converting to integer) with scoped enumeration,8142,Potatoswatter,starblue,1350453218,1487486668,1359493424,https://stackoverflow.com/questions/12927951/array-indexing-converting-to-integer-with-scoped-enumeration,"<h2>Solution 1: Operator overloading.</h2>

<p>This is my current favorite. Overload unary <code>operator+</code> and <code>operator++</code> to explicitly convert to integral type and increment within the enumerated type, respectively.</p>

<p>Using an <code>enumeration_traits</code> template, overloads can be activated rather than copying boilerplate code. But the boilerplate is just a couple one-liners.</p>

<p>Library code (templates, see below for non-template alternative):</p>

<pre><code>template&lt; typename e &gt;
struct enumeration_traits;

struct enumeration_trait_indexing {
    static constexpr bool does_index = true;
};

template&lt; typename e &gt;
constexpr
typename std::enable_if&lt; enumeration_traits&lt; e &gt;::does_index,
    typename std::underlying_type&lt; e &gt;::type &gt;::type
operator + ( e val )
    { return static_cast&lt; typename std::underlying_type&lt; e &gt;::type &gt;( val ); }

template&lt; typename e &gt;
typename std::enable_if&lt; enumeration_traits&lt; e &gt;::does_index,
    e &amp; &gt;::type
operator ++ ( e &amp;val )
    { return val = static_cast&lt; e &gt;( + val + 1 ); }
</code></pre>

<p>User code:</p>

<pre><code>enum class ducks { huey, dewey, louie, count };
template&lt;&gt; struct enumeration_traits&lt; ducks &gt;
    : enumeration_trait_indexing {};

double duck_height[ + ducks::count ];
</code></pre>

<p>Boilerplate code (if not using library, follows <code>enum</code> definition):</p>

<pre><code>int operator + ( ducks val )
    { return static_cast&lt; int &gt;( val ); }

ducks &amp;operator ++ ( ducks &amp;val )
    { return val = static_cast&lt; ducks &gt;( + val + 1 ); }
</code></pre>

<h2>Solution 2: Manual scoping.</h2>

<p>Scoped enumerator syntax also works on unscoped (non <code>enum class</code>) enumerations, which do implicitly convert to <code>int</code>. Hiding the enumeration inside a class or namespace and importing it with <code>typedef</code> or <code>using</code> makes it pseudo-scoped.</p>

<p>But if multiple enumerations go into the same namespace, the enumerator names may collide, so you might as well use a class (or many namespaces).</p>

<pre><code>struct ducks_enum {
    enum ducks { huey, dewey, louie, count };
};
typedef ducks_enum::ducks ducks;

double duck_height[ ducks::count ]; // C++11
double duck_weight[ ducks_enum::count ]; // C++03
</code></pre>

<p>This has some benefits. <strong>It works with C++03</strong>, but only with syntax <code>ducks_enum::count</code>. The enumerators are unscoped inside the struct, and it can be used as a base for any class that makes frequent use of the enumerators.</p>
",Potatoswatter,Potatoswatter,1350453218,1367489810,1367489810
http://stackoverflow.com/a/1293163/2343,Javascript code to parse CSV data,291392,Pierre-Gilles Levallois,Evan Plaice,1250592877,1544605196,1452731601,https://stackoverflow.com/questions/1293147/javascript-code-to-parse-csv-data,"<p>You can use the <a href=""http://www.bennadel.com/blog/1504-Ask-Ben-Parsing-CSV-Strings-With-Javascript-Exec-Regular-Expression-Command.htm"" rel=""noreferrer"">CSVToArray()</a> function mentioned in this blog entry.</p>

<pre><code>&lt;script type=""text/javascript""&gt;
    // ref: http://stackoverflow.com/a/1293163/2343
    // This will parse a delimited string into an array of
    // arrays. The default delimiter is the comma, but this
    // can be overriden in the second argument.
    function CSVToArray( strData, strDelimiter ){
        // Check to see if the delimiter is defined. If not,
        // then default to comma.
        strDelimiter = (strDelimiter || "","");

        // Create a regular expression to parse the CSV values.
        var objPattern = new RegExp(
            (
                // Delimiters.
                ""(\\"" + strDelimiter + ""|\\r?\\n|\\r|^)"" +

                // Quoted fields.
                ""(?:\""([^\""]*(?:\""\""[^\""]*)*)\""|"" +

                // Standard fields.
                ""([^\""\\"" + strDelimiter + ""\\r\\n]*))""
            ),
            ""gi""
            );


        // Create an array to hold our data. Give the array
        // a default empty first row.
        var arrData = [[]];

        // Create an array to hold our individual pattern
        // matching groups.
        var arrMatches = null;


        // Keep looping over the regular expression matches
        // until we can no longer find a match.
        while (arrMatches = objPattern.exec( strData )){

            // Get the delimiter that was found.
            var strMatchedDelimiter = arrMatches[ 1 ];

            // Check to see if the given delimiter has a length
            // (is not the start of string) and if it matches
            // field delimiter. If id does not, then we know
            // that this delimiter is a row delimiter.
            if (
                strMatchedDelimiter.length &amp;&amp;
                strMatchedDelimiter !== strDelimiter
                ){

                // Since we have reached a new row of data,
                // add an empty row to our data array.
                arrData.push( [] );

            }

            var strMatchedValue;

            // Now that we have our delimiter out of the way,
            // let's check to see which kind of value we
            // captured (quoted or unquoted).
            if (arrMatches[ 2 ]){

                // We found a quoted value. When we capture
                // this value, unescape any double quotes.
                strMatchedValue = arrMatches[ 2 ].replace(
                    new RegExp( ""\""\"""", ""g"" ),
                    ""\""""
                    );

            } else {

                // We found a non-quoted value.
                strMatchedValue = arrMatches[ 3 ];

            }


            // Now that we have our value string, let's add
            // it to the data array.
            arrData[ arrData.length - 1 ].push( strMatchedValue );
        }

        // Return the parsed data.
        return( arrData );
    }

&lt;/script&gt;
</code></pre>
",Kirtan,Dominic,1250593070,1402932041,1402932041
http://stackoverflow.com/a/12972502/64911,Number of pages of a word document with Python,3532,Xavier R.,,1350598428,1428742102,0,https://stackoverflow.com/questions/12964580/number-of-pages-of-a-word-document-with-python,"<p>You can read the value </p>

<pre><code>&lt;Properties&gt;
&lt;Pages&gt;CountValue&lt;/Pages&gt;
</code></pre>

<p>from docProps/app.xml in the docx package or</p>

<pre><code>&lt;office:document-meta&gt;
    &lt;office:meta&gt;
        &lt;meta:document-statistic meta:page-count=""CountValue""&gt;
</code></pre>

<p>form meta.xml in odt package.</p>

<p>If these values do not exist (they are optional), you have to make a calculation of the entire document, in fact perform rendering, that much more difficult</p>
",pogorskiy,,1350643054,1350643054,0
http://stackoverflow.com/a/12974801/223092,Why does django&#39;s prefetch_related() only work with all() and not filter()?,54059,Timmmm,Kevin Christopher Henry,1350648316,1525099248,1398149088,https://stackoverflow.com/questions/12973929/why-does-djangos-prefetch-related-only-work-with-all-and-not-filter,"<p>In Django 1.6 and earlier, it is not possible to avoid the extra queries. The <code>prefetch_related</code> call effectively caches the results of <code>a.photoset.all()</code> for every album in the queryset. However, <code>a.photoset.filter(format=1)</code> is a different queryset, so you will generate an extra query for every album.</p>

<p>This is explained in the  <a href=""https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-objects"" rel=""noreferrer""><code>prefetch_related</code></a> docs. The <code>filter(format=1)</code> is equivalent to <code>filter(spicy=True)</code>. </p>

<p>Note that you could reduce the number or queries by filtering the photos in python instead: </p>

<pre><code>someAlbums = PhotoAlbum.objects.filter(author=""Davey Jones"").prefetch_related(""photo_set"")
for a in someAlbums:
    somePhotos = [p for p in a.photo_set.all() if p.format == 1]
</code></pre>

<p>In Django 1.7, there is a <a href=""https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-objects"" rel=""noreferrer""><code>Prefetch()</code></a> object that allows you to control the behaviour of <code>prefetch_related</code>.</p>

<pre><code>from django.db.models import Prefetch

someAlbums = PhotoAlbum.objects.filter(author=""Davey Jones"").prefetch_related(
    Prefetch(
        ""photo_set"",
        queryset=Photo.objects.filter(format=1),
        to_attr=""some_photos""
    )
)
for a in someAlbums:
    somePhotos = a.some_photos
</code></pre>

<p>For more examples of how to use the <code>Prefetch</code> object, see the <a href=""https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-objects"" rel=""noreferrer""><code>prefetch_related</code></a> docs.</p>
",Alasdair,vishes_shell,1350651528,1516695252,1516695252
http://stackoverflow.com/a/12974801/2874777,Why does django&#39;s prefetch_related() only work with all() and not filter()?,54059,Timmmm,Kevin Christopher Henry,1350648316,1525099248,1398149088,https://stackoverflow.com/questions/12973929/why-does-djangos-prefetch-related-only-work-with-all-and-not-filter,"<p>In Django 1.6 and earlier, it is not possible to avoid the extra queries. The <code>prefetch_related</code> call effectively caches the results of <code>a.photoset.all()</code> for every album in the queryset. However, <code>a.photoset.filter(format=1)</code> is a different queryset, so you will generate an extra query for every album.</p>

<p>This is explained in the  <a href=""https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-objects"" rel=""noreferrer""><code>prefetch_related</code></a> docs. The <code>filter(format=1)</code> is equivalent to <code>filter(spicy=True)</code>. </p>

<p>Note that you could reduce the number or queries by filtering the photos in python instead: </p>

<pre><code>someAlbums = PhotoAlbum.objects.filter(author=""Davey Jones"").prefetch_related(""photo_set"")
for a in someAlbums:
    somePhotos = [p for p in a.photo_set.all() if p.format == 1]
</code></pre>

<p>In Django 1.7, there is a <a href=""https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-objects"" rel=""noreferrer""><code>Prefetch()</code></a> object that allows you to control the behaviour of <code>prefetch_related</code>.</p>

<pre><code>from django.db.models import Prefetch

someAlbums = PhotoAlbum.objects.filter(author=""Davey Jones"").prefetch_related(
    Prefetch(
        ""photo_set"",
        queryset=Photo.objects.filter(format=1),
        to_attr=""some_photos""
    )
)
for a in someAlbums:
    somePhotos = a.some_photos
</code></pre>

<p>For more examples of how to use the <code>Prefetch</code> object, see the <a href=""https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-objects"" rel=""noreferrer""><code>prefetch_related</code></a> docs.</p>
",Alasdair,vishes_shell,1350651528,1516695252,1516695252
http://stackoverflow.com/a/1299387/386210,Handling international dates in python,4745,geejay,geejay,1250681866,1250691386,1250685963,https://stackoverflow.com/questions/1299377/handling-international-dates-in-python,"<p><a href=""http://docs.python.org/library/locale.html"" rel=""noreferrer"">http://docs.python.org/library/locale.html</a></p>

<p>The <code>datetime</code> module is already locale aware.</p>

<p>It's something like the following</p>

<pre><code># German locale
loc= locale.setlocale(locale.LC_TIME,(""de"",""de""))
try:
     date= datetime.date.strptime( input, ""%d. %b. %Y"" )
except:
     # English locale
     loc= locale.setlocale(locale.LC_TIME,(""en"",""us""))
     date= datetime.date.strptime( input, ""%d. %b. %Y"" )
</code></pre>
",S.Lott,S.Lott,1250682023,1250686690,1250686690
http://stackoverflow.com/a/13057751/1170370,Unknown encoding: idna in Python Requests,9986,user1130588,Alex Riley,1328391024,1447152075,1447152075,https://stackoverflow.com/questions/9144724/unknown-encoding-idna-in-python-requests,"<p>Try adding:</p>

<pre><code>import encodings.idna
</code></pre>

<p>in various places to sift out other errors.  I ran into this same problem working on a port of python to a new platform.  We had only partial library support and <code>unicodedata</code> was missing which was causing imports of the idna module to fail.  Once we ported <code>unicodedata</code> this error went away.</p>
",duanev,,1351112845,1351112845,0
http://stackoverflow.com/a/13059195/50335,Creating an input stream from constant memory,9324,user500944,,1351119325,1437684771,0,https://stackoverflow.com/questions/13059091/creating-an-input-stream-from-constant-memory,"<p>The way to do this is to create a suitable stream buffer. This can, e.g., be done like this:</p>

<pre><code>#include &lt;streambuf&gt;
#include &lt;istream&gt;

struct membuf: std::streambuf {
    membuf(char const* base, size_t size) {
        char* p(const_cast&lt;char*&gt;(base));
        this-&gt;setg(p, p, p + size);
    }
};
struct imemstream: virtual membuf, std::istream {
    imemstream(char const* base, size_t size)
        : membuf(base, size)
        , std::istream(static_cast&lt;std::streambuf*&gt;(this)) {
    }
};
</code></pre>

<p>The only somewhat awkward thing is the <code>const_cast&lt;char*&gt;()</code> in the stream buffer: the stream buffer won't change the data but the interface still requires <code>char*</code> to be used, mainly to make it easier to change the buffer in ""normal"" stream buffers. With this, you can use <code>imemstream</code> as a normal input stream:</p>

<pre><code>imemstream in(data, size);
in &gt;&gt; value;
</code></pre>
",Dietmar Khl,Dietmar Khl,1351119934,1351120634,1351120634
http://stackoverflow.com/a/13060733/654755,Getting values with the right type in Redis,18147,jeruki,Mel,1351131182,1544649402,1500379324,https://stackoverflow.com/questions/13060632/getting-values-with-the-right-type-in-redis,"<p>Technically speaking you need to take care of that on your own.</p>

<p>However, have a look at <a href=""https://github.com/andymccurdy/redis-py"">this link</a>, especially at the part of their README that refers to parsers and response callbacks, maybe that's something you can use. Question would be whether this is an overkill for you or not.</p>
",favoretti,,1351132219,1351132219,0
http://stackoverflow.com/a/13061129/654755,How can I get Django to print the debug information to the console?,62736,Ryan Detzel,bernie,1298852007,1541445869,1298852471,https://stackoverflow.com/questions/5137042/how-can-i-get-django-to-print-the-debug-information-to-the-console,"<p>I was getting 500 Internal Server Error and was not able to debug it as the code was not accessed through a browser and terminal didn't show the traceback.
This bit of code in a middleware made all the difference:</p>

<pre><code>import traceback
import sys

class ProcessExceptionMiddleware(object):
    def process_response(self, request, response):
        if response.status_code != 200:                
            print '\n'.join(traceback.format_exception(*sys.exc_info()))
        return response
</code></pre>

<p>Instead of processing the exception I, am processing the response object and printing the traceback when the status code not 200 and voila I can now see what is causing the error. Which in this particular case was an improperly indented block.</p>

<p><a href=""https://stackoverflow.com/a/5137067/338691"" title=""Yuji&#39;s answer"">Yuji's answer above</a> and the <a href=""https://docs.djangoproject.com/en/dev/topics/http/middleware/#process-response"" rel=""nofollow noreferrer"">middleware documentation</a> helped me reach this solution.</p>
",Anuvrat Parashar,Community,1351135809,1351137342,1495541435
http://stackoverflow.com/a/13075985/365238,How can I tell if an object is a jQuery Promise/Deferred?,14261,Jeremy,Jeremy,1351192422,1461088703,1461087259,https://stackoverflow.com/questions/13075592/how-can-i-tell-if-an-object-is-a-jquery-promise-deferred,"<blockquote>
  <p><code>jQuery.when</code> is able to tell if a value is promise, so apparently it is possible.</p>
</blockquote>

<p>This is mistaken. jQuery itself is not able to check if an object is a promise with complete accuracy. If you look at the source of <code>jQuery.when</code> <a href=""http://james.padolsey.com/jquery/#v=1.7.2&amp;fn=jQuery.when"" rel=""noreferrer"">in the jQuery source viewer</a> you can see that all it does is this:</p>

<pre><code>jQuery.isFunction(firstParam.promise)
</code></pre>

<p>If the object you are returning has its own <code>.promise()</code> method, <code>jQuery.when</code> will misbehave:</p>

<pre><code>var trickyValue = {
  promise: function() { return 3; },
  value: 2
};

jQuery.when(trickyValue).then(function(obj) {
  alert(obj.value);
});
</code></pre>

<p>This throws <code>TypeError: Object 3 has no method 'then'</code>, because jQuery assumes the object is a promise and trusts the value of its <code>.promise()</code> method.</p>

<p>This is probably impossible to solve properly. The promise object is created as an object literal inside of <code>jQuery.Deferred</code> (<a href=""http://james.padolsey.com/jquery/#v=1.7.2&amp;fn=jQuery.Deferred"" rel=""noreferrer"">view source</a>). It has no prototype, nor any other truly unique properties that could be used to distinguish it.</p>

<p>However, I can think of a hacky solution that should be reliable as long as only one version of jQuery is in use:</p>

<pre><code>function isPromise(value) {
  if (typeof value === 'object' &amp;&amp; typeof value.then !== ""function"") {
    return false;
  }
  var promiseThenSrc = String($.Deferred().then);
  var valueThenSrc = String(value.then);
  return promiseThenSrc === valueThenSrc;
}

isPromise(""test"");                 // false
isPromise($.Deferred());           // true
isPromise($.Deferred().promise()); // true
</code></pre>

<p>Converting a function to a string gives you its source code, so here I am comparing then source of the <code>.then</code> method of a new <code>Deferred</code> object to that of the value I'm interested in. Your value is not going to have a <code>.then</code> method with exactly the same source code as a <code>jQuery.Deferred</code> or <code>Promise</code><sup>1</sup>.</p>

<p><sub><sup>1.</sup> Unless you're running in a hostile environment, in which case you should probably give up.</sub></p>

<hr>

<p>If you aren't specifically interested in jQuery promises, but would like to detect <em>any</em> type of Promise including the built-in ones from ECMAScript 6, you can test if value is an object and has a <code>then</code> method:</p>

<pre><code>if (typeof value === 'object' &amp;&amp; typeof value.then === 'function') {
  // handle a promise
} else {
  // handle a concrete value
}
</code></pre>

<p>This is the approach by several Promise-handling functions defined in ES6. You can see this described <a href=""http://www.ecma-international.org/ecma-262/6.0/#sec-promise-resolve-functions"" rel=""noreferrer"">in the specification of the <code>resolve(...)</code> functions</a>, partially quoted below:</p>

<blockquote>
  <p>When a promise resolve function <em>F</em> is called with argument <em>resolution</em>, the following steps are taken:</p>
  
  <p>[...]</p>
  
  <ol start=""7"">
  <li>If Type(<em>resolution</em>) is not Object, then
  
  <ol>
  <li>Return FulfillPromise(<em>promise</em>, <em>resolution</em>).</li>
  </ol></li>
  <li>Let then be Get(<em>resolution</em>, <strong><code>""then""</code></strong>).</li>
  <li>If then is an abrupt completion, then
  
  <ol>
  <li>Return RejectPromise(<em>promise</em>, <em>then</em>.[[value]]).</li>
  </ol></li>
  <li>Let <em>thenAction</em> be <em>then</em>.[[value]].</li>
  <li>If IsCallable(<em>thenAction</em>) is <strong>false</strong>, then
  
  <ol>
  <li>Return FulfillPromise(<em>promise</em>, <em>resolution</em>).</li>
  </ol></li>
  <li>Perform EnqueueJob (<strong><code>""PromiseJobs""</code></strong>, PromiseResolveThenableJob, <em>promise, resolution, thenAction</em>)</li>
  </ol>
</blockquote>
",Jeremy,Jeremy,1351194059,1461088703,1461088703
http://stackoverflow.com/a/1310001/1074536,Parameter substitution for a SQLite &quot;IN&quot; clause,21689,Clinton Blackmore,,1250826075,1282007931,0,https://stackoverflow.com/questions/1309989/parameter-substitution-for-a-sqlite-in-clause,"<p>You do need the right number of <code>?</code>s, but that doesn't pose a sql injection risk:</p>

<pre><code>&gt;&gt;&gt; result_set = c.execute('SELECT * FROM distro WHERE id IN (%s)' %
                           ','.join('?'*len(desired_ids)), desired_ids)
&gt;&gt;&gt; print result_set.fetchall()
[(1, u'Ubuntu'), (2, u'Fedora'), (5, u'SuSE')]
</code></pre>
",Alex Martelli,Alex Martelli,1250826740,1250829337,1250829337
http://stackoverflow.com/a/13103617/1198772,Clear all widgets in a layout in pyqt,46247,Falmarri,eyllanesc,1293224826,1540405407,1499740911,https://stackoverflow.com/questions/4528347/clear-all-widgets-in-a-layout-in-pyqt,"<p>After a lot of research (and this one took quite time, so I add it here for future reference), this is the way I found to really clear and <strong>delete</strong> the widgets in a layout:</p>

<pre><code>for i in reversed(range(layout.count())): 
    layout.itemAt(i).widget().setParent(None)
</code></pre>

<p>What the documentation says about the <strong><a href=""http://pyqt.sourceforge.net/Docs/PyQt4/qwidget.html"" rel=""noreferrer"">QWidget</a></strong> is that:</p>

<blockquote>
  <p>The new widget is deleted when its parent is deleted.</p>
</blockquote>

<p><strong>Important note:</strong> You need to loop backwards because removing things from the beginning shifts items and changes the order of items in the layout.</p>

<p>To test and confirm that the layout is empty:</p>

<pre><code>for i in range(layout.count()): print i
</code></pre>

<hr>

<p>There seems to be another way to do it. Instead of using the setParent function, use the <a href=""http://pyqt.sourceforge.net/Docs/PyQt4/qobject.html#deleteLater"" rel=""noreferrer"">deleteLater()</a> function like this:</p>

<pre><code>for i in reversed(range(layout.count())): 
    layout.itemAt(i).widget().deleteLater()
</code></pre>

<p>The documentation says that <strong>QObject.deleteLater (self)</strong></p>

<blockquote>
  <p>Schedules this object for deletion.</p>
</blockquote>

<p>However, if you run the test code specified above, it prints some values. This indicates that the layout still has items, as opposed to the code with <strong>setParent</strong>. </p>
",PALEN,eyllanesc,1351367455,1499740943,1499740943
http://stackoverflow.com/a/1312957/4184258,Detect if stdin is a terminal or pipe?,31847,Mike McQuaid,Rakete1111,1250871734,1482882160,1475511731,https://stackoverflow.com/questions/1312922/detect-if-stdin-is-a-terminal-or-pipe,"<p>Use <code>isatty</code>:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;io.h&gt;
...    
if (isatty(fileno(stdin)))
    printf( ""stdin is a terminal\n"" );
else
    printf( ""stdin is a file or a pipe\n"");
</code></pre>

<p>(On windows they're prefixed with underscores: <code>_isatty</code>, <code>_fileno</code>)</p>
",RichieHindle,,1250872180,1250872180,0
http://stackoverflow.com/a/13137873/250962,How to download image using requests,309355,shkschneider,,1351595665,1562557265,0,https://stackoverflow.com/questions/13137817/how-to-download-image-using-requests,"<p>You can either use the <a href=""http://docs.python-requests.org/en/latest/api/#requests.Response.raw""><code>response.raw</code> file object</a>, or iterate over the response.</p>

<p>To use the <code>response.raw</code> file-like object will not, by default, decode compressed responses (with GZIP or deflate). You can force it to decompress for you anyway by setting the <code>decode_content</code> attribute to <code>True</code> (<code>requests</code> sets it to <code>False</code> to control decoding itself). You can then use <a href=""https://docs.python.org/2/library/shutil.html#shutil.copyfileobj""><code>shutil.copyfileobj()</code></a> to have Python stream the data to a file object:</p>

<pre><code>import requests
import shutil

r = requests.get(settings.STATICMAP_URL.format(**data), stream=True)
if r.status_code == 200:
    with open(path, 'wb') as f:
        r.raw.decode_content = True
        shutil.copyfileobj(r.raw, f)        
</code></pre>

<p>To iterate over the response use a loop; iterating like this ensures that data is decompressed by this stage:</p>

<pre><code>r = requests.get(settings.STATICMAP_URL.format(**data), stream=True)
if r.status_code == 200:
    with open(path, 'wb') as f:
        for chunk in r:
            f.write(chunk)
</code></pre>

<p>This'll read the data in 128 byte chunks; if you feel another chunk size works better, use the <a href=""http://docs.python-requests.org/en/latest/api/#requests.Response.iter_content""><code>Response.iter_content()</code> method</a> with a custom chunk size:</p>

<pre><code>r = requests.get(settings.STATICMAP_URL.format(**data), stream=True)
if r.status_code == 200:
    with open(path, 'wb') as f:
        for chunk in r.iter_content(1024):
            f.write(chunk)
</code></pre>

<p>Note that you need to open the destination file in binary mode to ensure python doesn't try and translate newlines for you. We also set <code>stream=True</code> so that <code>requests</code> doesn't download the whole image into memory first.</p>
",Martijn Pieters,Martijn Pieters,1351595895,1435228714,1435228714
http://stackoverflow.com/a/1319229/130830,"Really Good, Bad UTF-8 example test data",71937,Xeoncross,Jonathan Leffler,1251047169,1549809585,1388982153,https://stackoverflow.com/questions/1319022/really-good-bad-utf-8-example-test-data,"<p>See also <a href=""https://stackoverflow.com/questions/775412/"">How does a file with Chinese characters know how many bytes to use per character?</a>  no doubt, there are other SO questions that would also help.</p>

<p>In UTF-8, you get the following types of bytes:</p>

<pre><code>Binary    Hex          Comments
0xxxxxxx  0x00..0x7F   Only byte of a 1-byte character encoding
10xxxxxx  0x80..0xBF   Continuation bytes (1-3 continuation bytes)
110xxxxx  0xC0..0xDF   First byte of a 2-byte character encoding
1110xxxx  0xE0..0xEF   First byte of a 3-byte character encoding
11110xxx  0xF0..0xF4   First byte of a 4-byte character encoding
</code></pre>

<p>(The last line looks as if it should read 0xF0..0xF7; however, the 21-bit range of Unicode (U+0000 - U+10FFFF) means that the maximum valid value is 0xF4; values 0xF5..0xF7 cannot occur in valid UTF-8.)</p>

<p>Looking at whether a particular sequence of bytes is valid UTF-8 means you need to think about:</p>

<ul>
<li>Continuation bytes appearing where not expected</li>
<li>Non-continuation bytes appearing where a continuation byte is expected</li>
<li>Incomplete characters at end of string (variation of 'continuation byte expected')</li>
<li>Non-minimal sequences</li>
<li>UTF-16 surrogates</li>
</ul>

<p>In valid UTF-8, the bytes 0xF5..0xFF cannot occur.</p>

<h3>Non-minimal sequences</h3>

<p>There are multiple possible representations for some characters.  For example, the Unicode character U+0000 (ASCII NUL) could be represented by:</p>

<pre><code>0x00
0xC0 0x80
0xE0 0x80 0x80
0xF0 0x80 0x80 0x80
</code></pre>

<p>However, the Unicode standard clearly states that the last three alternatives are not acceptable because they are not minimal.  It so happens that the bytes 0xC0 and 0xC1 can never appear in valid UTF-8 because the only characters that could be encoded by those are minimally encoded as single byte characters in the range 0x00..0x7F.</p>

<h3>UTF-16 Surrogates</h3>

<p>Within the Basic Multi-lingual Plane (BMP), the Unicode values U+D800 - U+DFFF are reserved for UTF-16 surrogates and cannot appear encoded in valid UTF-8.  If they were valid in UTF-8 (which, I emphasize, they are not), then the surrogates would be encoded:</p>

<ul>
<li>U+D800  0xED 0xA0 0x80 (smallest high surrogate)</li>
<li>U+DBFF  0xED 0xAF 0xBF (largest high surrogate)</li>
<li>U+DC00  0xED 0xB0 0x80 (smallest low surrogate)</li>
<li>U+DFFF  0xED 0xBF 0xBF (largest low surrogate)</li>
</ul>

<h3>Bad Data</h3>

<p>So, your BAD data should contain samples violating these various prescriptions.</p>

<ul>
<li>Continuation byte not preceded by one of the initial byte values</li>
<li>Multi-character initial bytes not followed by enough continuation bytes</li>
<li>Non-minimal multi-byte characters</li>
<li>UTF-16 surrogates</li>
<li>Invalid bytes (0xC0, 0xC1, 0xF5..0xFF).</li>
</ul>

<p>Note that a byte-order mark (BOM) U+FEFF, aka zero-width no-break space (ZWNBSP), cannot appear unencoded in UTF-8  the bytes 0xFF and 0xFE are not permitted in valid UTF-8.  An encoded ZWNBSP can appear in a UTF-8 file as 0xEF 0xBB 0xBF, but the BOM is completely superfluous in UTF-8.</p>

<hr>

<p>There are also some <a href=""http://www.unicode.org/faq/private_use.html#noncharacters"" rel=""noreferrer"">noncharacters</a> in Unicode.  U+FFFE and U+FFFF are two such noncharacters (and the last two code points in each plane, U+1FFFE, U+1FFFF, U+2FFFE, U+2FFFF, ... U+10FFFE, U+10FFFF are others).  These should not normally appear in Unicode data for data exchange, but can appear in private use.  See the Unicode FAQ link for lots of sordid details, including the rather complex history of noncharacters in Unicode.  (<a href=""http://www.unicode.org/versions/corrigendum9.html"" rel=""noreferrer"">Corrigendum #9: Clarification About Noncharacters</a>, which was released in January 2013, does what its title suggests &mdash; clarifies the meaning of non-characters.)</p>
",Jonathan Leffler,Community,1251052745,1490387770,1495535498
http://stackoverflow.com/a/13196451/1203182,Simple parse JSON from URL on Android and display in listview,178082,pkdkk,Prasad Khode,1351863045,1531986305,1454582306,https://stackoverflow.com/questions/13196234/simple-parse-json-from-url-on-android-and-display-in-listview,"<p>I would suggest using the <code>JSONParser</code> class. It's very easy to use. </p>



<pre class=""lang-java prettyprint-override""><code>public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = """";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List&lt;NameValuePair&gt; params) throws IOException {

    // Making HTTP request
    try {

        // check for request method
        if(method == ""POST""){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);

            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == ""GET""){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            String paramString = URLEncodedUtils.format(params, ""utf-8"");
            url += ""?"" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           


    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (Exception ex) {
        Log.d(""Networking"", ex.getLocalizedMessage());
        throw new IOException(""Error connecting"");
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, ""iso-8859-1""), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + ""\n"");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e(""Buffer Error"", ""Error converting result "" + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e(""JSON Parser"", ""Error parsing data "" + e.toString());
    }

    // return JSON String
    return jObj;

}
</code></pre>

<p>Then in your application, create an instance of this class. You may want to pass the constructor 'GET' or 'POST' if desired.</p>

<pre class=""lang-java prettyprint-override""><code>public JSONParser jsonParser = new JSONParser();

try {

    // Building Parameters ( you can pass as many parameters as you want)
    List&lt;NameValuePair&gt; params = new ArrayList&lt;NameValuePair&gt;();

    params.add(new BasicNameValuePair(""name"", name));
    params.add(new BasicNameValuePair(""age"", 25));

    // Getting JSON Object
    JSONObject json = jsonParser.makeHttpRequest(YOUR_URL, ""POST"", params);
} catch (JSONException e) {
    e.printStackTrace();
}
</code></pre>
",Marcin S.,Barett,1351863816,1439570096,1439570096
http://stackoverflow.com/a/1320259/2119117,How to Flatten a Multidimensional Array?,202648,Alix Axel,BoltClock,1251071245,1557916161,1326051666,https://stackoverflow.com/questions/1319903/how-to-flatten-a-multidimensional-array,"<p>You can use the <a href=""http://uk.php.net/spl"" rel=""noreferrer"">Standard PHP Library (SPL)</a> to ""hide"" the recursion.</p>

<pre><code>$a = array(1,2,array(3,4, array(5,6,7), 8), 9);
$it = new RecursiveIteratorIterator(new RecursiveArrayIterator($a));
foreach($it as $v) {
  echo $v, "" "";
}
</code></pre>

<p>prints</p>

<pre><code>1 2 3 4 5 6 7 8 9 
</code></pre>
",VolkerK,,1251081546,1251081546,0
http://stackoverflow.com/a/13222410/4699324,How to sum __m256 horizontally?,6313,Ben-Uri,,1352037349,1352059940,0,https://stackoverflow.com/questions/13219146/how-to-sum-m256-horizontally,"<p>This version should be optimal for both Intel Sandy/Ivy Bridge and AMD Bulldozer:</p>

<pre><code>// x = ( x7, x6, x5, x4, x3, x2, x1, x0 )
float sum8(__m256 x) {
    // hiQuad = ( x7, x6, x5, x4 )
    const __m128 hiQuad = _mm256_extractf128_ps(x, 1);
    // loQuad = ( x3, x2, x1, x0 )
    const __m128 loQuad = _mm256_castps256_ps128(x);
    // sumQuad = ( x3 + x7, x2 + x6, x1 + x5, x0 + x4 )
    const __m128 sumQuad = _mm_add_ps(loQuad, hiQuad);
    // loDual = ( -, -, x1 + x5, x0 + x4 )
    const __m128 loDual = sumQuad;
    // hiDual = ( -, -, x3 + x7, x2 + x6 )
    const __m128 hiDual = _mm_movehl_ps(sumQuad, sumQuad);
    // sumDual = ( -, -, x1 + x3 + x5 + x7, x0 + x2 + x4 + x6 )
    const __m128 sumDual = _mm_add_ps(loDual, hiDual);
    // lo = ( -, -, -, x0 + x2 + x4 + x6 )
    const __m128 lo = sumDual;
    // hi = ( -, -, -, x1 + x3 + x5 + x7 )
    const __m128 hi = _mm_shuffle_ps(sumDual, sumDual, 0x1);
    // sum = ( -, -, -, x0 + x1 + x2 + x3 + x4 + x5 + x6 + x7 )
    const __m128 sum = _mm_add_ss(lo, hi);
    return _mm_cvtss_f32(sum);
}
</code></pre>
",Marat Dukhan,,1352059940,1352059940,0
http://stackoverflow.com/a/13222509/486547,Wildcards in HTML5 data attributes,3366,madflow,,1352059326,1352061129,0,https://stackoverflow.com/questions/13222334/wildcards-in-html5-data-attributes,"<p>You can create a custom pseudoclass to e.g. match attribute names against a regexp: <a href=""http://jsfiddle.net/hN6vx/"">http://jsfiddle.net/hN6vx/</a>.</p>

<pre><code>jQuery.expr.pseudos.attr = $.expr.createPseudo(function(arg) {
    var regexp = new RegExp(arg);
    return function(elem) {
        for(var i = 0; i &lt; elem.attributes.length; i++) {
            var attr = elem.attributes[i];
            if(regexp.test(attr.name)) {
                return true;
            }
        }
        return false;
    };
});
</code></pre>

<p>Usage:</p>

<pre><code>$("":attr('^data-')"")
</code></pre>
",pimvdb,,1352060525,1352060525,0
http://stackoverflow.com/a/13243712/669631,Detect face then autocrop pictures,52154,AisIceEyes,j0k,1351793623,1561793209,1373010650,https://stackoverflow.com/questions/13211745/detect-face-then-autocrop-pictures,"<p>I have managed to grab bits of code from various sources and stitch this together. It is still a work in progress. Also, do you have any example images?</p>

<pre><code>'''
Sources:
http://pythonpath.wordpress.com/2012/05/08/pil-to-opencv-image/
http://www.lucaamore.com/?p=638
'''

#Python 2.7.2
#Opencv 2.4.2
#PIL 1.1.7

import cv
import Image

def DetectFace(image, faceCascade):
    #modified from: http://www.lucaamore.com/?p=638

    min_size = (20,20)
    image_scale = 1
    haar_scale = 1.1
    min_neighbors = 3
    haar_flags = 0

    # Allocate the temporary images
    smallImage = cv.CreateImage(
            (
                cv.Round(image.width / image_scale),
                cv.Round(image.height / image_scale)
            ), 8 ,1)

    # Scale input image for faster processing
    cv.Resize(image, smallImage, cv.CV_INTER_LINEAR)

    # Equalize the histogram
    cv.EqualizeHist(smallImage, smallImage)

    # Detect the faces
    faces = cv.HaarDetectObjects(
            smallImage, faceCascade, cv.CreateMemStorage(0),
            haar_scale, min_neighbors, haar_flags, min_size
        )

    # If faces are found
    if faces:
        for ((x, y, w, h), n) in faces:
            # the input to cv.HaarDetectObjects was resized, so scale the
            # bounding box of each face and convert it to two CvPoints
            pt1 = (int(x * image_scale), int(y * image_scale))
            pt2 = (int((x + w) * image_scale), int((y + h) * image_scale))
            cv.Rectangle(image, pt1, pt2, cv.RGB(255, 0, 0), 5, 8, 0)

    return image

def pil2cvGrey(pil_im):
    #from: http://pythonpath.wordpress.com/2012/05/08/pil-to-opencv-image/
    pil_im = pil_im.convert('L')
    cv_im = cv.CreateImageHeader(pil_im.size, cv.IPL_DEPTH_8U, 1)
    cv.SetData(cv_im, pil_im.tostring(), pil_im.size[0]  )
    return cv_im

def cv2pil(cv_im):
    return Image.fromstring(""L"", cv.GetSize(cv_im), cv_im.tostring())


pil_im=Image.open('testPics/faces.jpg')
cv_im=pil2cv(pil_im)
#the haarcascade files tells opencv what to look for.
faceCascade = cv.Load('C:/Python27/Lib/site-packages/opencv/haarcascade_frontalface_default.xml')
face=DetectFace(cv_im,faceCascade)
img=cv2pil(face)
img.show()
</code></pre>

<p>Testing on the first page of Google (Googled ""faces""):
<img src=""https://i.stack.imgur.com/piYpu.png"" alt=""enter image description here""></p>

<hr>

<h2><strong>Update</strong></h2>

<p>This code should do exactly what you want. Let me know if you have questions. I tried to include lots of comments in the code:</p>

<pre><code>'''
Sources:
http://opencv.willowgarage.com/documentation/python/cookbook.html
http://www.lucaamore.com/?p=638
'''

#Python 2.7.2
#Opencv 2.4.2
#PIL 1.1.7

import cv #Opencv
import Image #Image from PIL
import glob
import os

def DetectFace(image, faceCascade, returnImage=False):
    # This function takes a grey scale cv image and finds
    # the patterns defined in the haarcascade function
    # modified from: http://www.lucaamore.com/?p=638

    #variables    
    min_size = (20,20)
    haar_scale = 1.1
    min_neighbors = 3
    haar_flags = 0

    # Equalize the histogram
    cv.EqualizeHist(image, image)

    # Detect the faces
    faces = cv.HaarDetectObjects(
            image, faceCascade, cv.CreateMemStorage(0),
            haar_scale, min_neighbors, haar_flags, min_size
        )

    # If faces are found
    if faces and returnImage:
        for ((x, y, w, h), n) in faces:
            # Convert bounding box to two CvPoints
            pt1 = (int(x), int(y))
            pt2 = (int(x + w), int(y + h))
            cv.Rectangle(image, pt1, pt2, cv.RGB(255, 0, 0), 5, 8, 0)

    if returnImage:
        return image
    else:
        return faces

def pil2cvGrey(pil_im):
    # Convert a PIL image to a greyscale cv image
    # from: http://pythonpath.wordpress.com/2012/05/08/pil-to-opencv-image/
    pil_im = pil_im.convert('L')
    cv_im = cv.CreateImageHeader(pil_im.size, cv.IPL_DEPTH_8U, 1)
    cv.SetData(cv_im, pil_im.tostring(), pil_im.size[0]  )
    return cv_im

def cv2pil(cv_im):
    # Convert the cv image to a PIL image
    return Image.fromstring(""L"", cv.GetSize(cv_im), cv_im.tostring())

def imgCrop(image, cropBox, boxScale=1):
    # Crop a PIL image with the provided box [x(left), y(upper), w(width), h(height)]

    # Calculate scale factors
    xDelta=max(cropBox[2]*(boxScale-1),0)
    yDelta=max(cropBox[3]*(boxScale-1),0)

    # Convert cv box to PIL box [left, upper, right, lower]
    PIL_box=[cropBox[0]-xDelta, cropBox[1]-yDelta, cropBox[0]+cropBox[2]+xDelta, cropBox[1]+cropBox[3]+yDelta]

    return image.crop(PIL_box)

def faceCrop(imagePattern,boxScale=1):
    # Select one of the haarcascade files:
    #   haarcascade_frontalface_alt.xml  &lt;-- Best one?
    #   haarcascade_frontalface_alt2.xml
    #   haarcascade_frontalface_alt_tree.xml
    #   haarcascade_frontalface_default.xml
    #   haarcascade_profileface.xml
    faceCascade = cv.Load('haarcascade_frontalface_alt.xml')

    imgList=glob.glob(imagePattern)
    if len(imgList)&lt;=0:
        print 'No Images Found'
        return

    for img in imgList:
        pil_im=Image.open(img)
        cv_im=pil2cvGrey(pil_im)
        faces=DetectFace(cv_im,faceCascade)
        if faces:
            n=1
            for face in faces:
                croppedImage=imgCrop(pil_im, face[0],boxScale=boxScale)
                fname,ext=os.path.splitext(img)
                croppedImage.save(fname+'_crop'+str(n)+ext)
                n+=1
        else:
            print 'No faces found:', img

def test(imageFilePath):
    pil_im=Image.open(imageFilePath)
    cv_im=pil2cvGrey(pil_im)
    # Select one of the haarcascade files:
    #   haarcascade_frontalface_alt.xml  &lt;-- Best one?
    #   haarcascade_frontalface_alt2.xml
    #   haarcascade_frontalface_alt_tree.xml
    #   haarcascade_frontalface_default.xml
    #   haarcascade_profileface.xml
    faceCascade = cv.Load('haarcascade_frontalface_alt.xml')
    face_im=DetectFace(cv_im,faceCascade, returnImage=True)
    img=cv2pil(face_im)
    img.show()
    img.save('test.png')


# Test the algorithm on an image
#test('testPics/faces.jpg')

# Crop all jpegs in a folder. Note: the code uses glob which follows unix shell rules.
# Use the boxScale to scale the cropping area. 1=opencv box, 2=2x the width and height
faceCrop('testPics/*.jpg',boxScale=1)
</code></pre>

<p>Using the image above, this code extracts 52 out of the 59 faces, producing cropped files such as:
<img src=""https://i.stack.imgur.com/a60vr.jpg"" alt=""enter image description here""><img src=""https://i.stack.imgur.com/V0464.jpg"" alt=""enter image description here""><img src=""https://i.stack.imgur.com/aTjGN.jpg"" alt=""enter image description here""><img src=""https://i.stack.imgur.com/LWkyh.jpg"" alt=""enter image description here""><img src=""https://i.stack.imgur.com/9FOhu.jpg"" alt=""enter image description here""><img src=""https://i.stack.imgur.com/V0sGh.jpg"" alt=""enter image description here""><img src=""https://i.stack.imgur.com/qY12a.jpg"" alt=""enter image description here""><img src=""https://i.stack.imgur.com/jrXNH.jpg"" alt=""enter image description here""></p>
",Onlyjus,Onlyjus,1352170913,1352522612,1352522612
http://stackoverflow.com/a/13243870/205832,Python Empty Generator Function,25058,Konstantin Weitz,,1352171293,1508462361,0,https://stackoverflow.com/questions/13243766/python-empty-generator-function,"<p>You can use <code>return</code> once in a generator; it stops iteration without yielding anything, and thus provides an explicit alternative to letting the function run out of scope. So use <code>yield</code> to turn the function into a generator, but precede it with <code>return</code> to terminate the generator before yielding anything.</p>

<pre><code>&gt;&gt;&gt; def f():
...     return
...     yield
... 
&gt;&gt;&gt; list(f())
[]
</code></pre>

<p>I'm not sure it's that much better than what you have -- it just replaces a no-op <code>if</code> statement with a no-op <code>yield</code> statement. But it is more idiomatic. Note that just using <code>yield</code> doesn't work.</p>

<pre><code>&gt;&gt;&gt; def f():
...     yield
... 
&gt;&gt;&gt; list(f())
[None]
</code></pre>

<h3>Why not just use <code>iter(())</code>?</h3>

<p>This question asks specifically about an empty <em>generator function</em>. For that reason, I take it to be a question about the internal consistency of Python's syntax, rather than a question about the best way to create an empty iterator in general.</p>

<p>If question is actually about the best way to create an empty iterator, then you might agree with <a href=""https://stackoverflow.com/a/26271684/577088"">Zectbumo</a> about using <code>iter(())</code> instead. However, it's important to observe that <code>iter(())</code> doesn't return a function! It directly returns an empty iterable. Suppose you're working with an API that expects a callable that <em>returns</em> an iterable. You'll have to do something like this:</p>

<pre><code>def empty():
    return iter(())
</code></pre>

<p>(Credit should go to <a href=""https://stackoverflow.com/a/13243922/577088"">Unutbu</a> for giving the first correct version of this answer.)</p>

<p>Now, you may find the above clearer, but I can imagine situations in which it would be less clear. Consider this example of a long list of (contrived) generator function definitions:</p>

<pre><code>def zeros():
    while True:
        yield 0

def ones():
    while True:
        yield 1

...
</code></pre>

<p>At the end of that long list, I'd rather see something with a <code>yield</code> in it, like this:</p>

<pre><code>def empty():
    return
    yield
</code></pre>

<p>or, in Python 3.3 and above (as suggested by <a href=""https://stackoverflow.com/a/13243920/577088"">DSM</a>), this:</p>

<pre><code>def empty():
    yield from ()
</code></pre>

<p>The presence of the <code>yield</code> keyword makes it clear at the briefest glance that this is just another generator function, exactly like all the others. It takes a bit more time to see that the <code>iter(())</code> version is doing the same thing.</p>

<p>It's a subtle difference, but I honestly think the <code>yield</code>-based functions are more readable and maintainable.</p>
",senderle,senderle,1352172164,1508462361,1508462361
http://stackoverflow.com/a/1325265/743730,"In Python, how to check if a string only contains certain characters?",105488,e70,Peter Mortensen,1251130925,1547105783,1283340400,https://stackoverflow.com/questions/1323364/in-python-how-to-check-if-a-string-only-contains-certain-characters,"<p><strong>Final(?) edit</strong></p>

<p>Answer, wrapped up in a function, with annotated interactive session:</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; def special_match(strg, search=re.compile(r'[^a-z0-9.]').search):
...     return not bool(search(strg))
...
&gt;&gt;&gt; special_match("""")
True
&gt;&gt;&gt; special_match(""az09."")
True
&gt;&gt;&gt; special_match(""az09.\n"")
False
# The above test case is to catch out any attempt to use re.match()
# with a `$` instead of `\Z` -- see point (6) below.
&gt;&gt;&gt; special_match(""az09.#"")
False
&gt;&gt;&gt; special_match(""az09.X"")
False
&gt;&gt;&gt;
</code></pre>

<p>Note: There is a comparison with using re.match() further down in this answer. Further timings show that match() would win with much longer strings; match() seems to have a much larger overhead than search() when the final answer is True; this is puzzling (perhaps it's the cost of returning a MatchObject instead of None) and may warrant further rummaging.</p>

<pre><code>==== Earlier text ====
</code></pre>

<p>The [previously] accepted answer could use a few improvements:</p>

<p>(1) Presentation gives the appearance of being the result of an interactive Python session:</p>

<pre><code>reg=re.compile('^[a-z0-9\.]+$')
&gt;&gt;&gt;reg.match('jsdlfjdsf12324..3432jsdflsdf')
True
</code></pre>

<p>but match() doesn't return <code>True</code></p>

<p>(2) For use with match(), the <code>^</code> at the start of the pattern is redundant, and appears to be slightly slower than the same pattern without the <code>^</code></p>

<p>(3) Should foster the use of raw string automatically unthinkingly for any re pattern</p>

<p>(4) The backslash in front of the dot/period is redundant</p>

<p>(5) <strong>Slower than the OP's code!</strong> </p>

<pre><code>prompt&gt;rem OP's version -- NOTE: OP used raw string!

prompt&gt;\python26\python -mtimeit -s""t='jsdlfjdsf12324..3432jsdflsdf';import
re;reg=re.compile(r'[^a-z0-9\.]')"" ""not bool(reg.search(t))""
1000000 loops, best of 3: 1.43 usec per loop

prompt&gt;rem OP's version w/o backslash

prompt&gt;\python26\python -mtimeit -s""t='jsdlfjdsf12324..3432jsdflsdf';import
re;reg=re.compile(r'[^a-z0-9.]')"" ""not bool(reg.search(t))""
1000000 loops, best of 3: 1.44 usec per loop

prompt&gt;rem cleaned-up version of accepted answer

prompt&gt;\python26\python -mtimeit -s""t='jsdlfjdsf12324..3432jsdflsdf';import
re;reg=re.compile(r'[a-z0-9.]+\Z')"" ""bool(reg.match(t))""
100000 loops, best of 3: 2.07 usec per loop

prompt&gt;rem accepted answer

prompt&gt;\python26\python -mtimeit -s""t='jsdlfjdsf12324..3432jsdflsdf';import
re;reg=re.compile('^[a-z0-9\.]+$')"" ""bool(reg.match(t))""
100000 loops, best of 3: 2.08 usec per loop
</code></pre>

<p>(6) <strong>Can produce the wrong answer!!</strong></p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; bool(re.compile('^[a-z0-9\.]+$').match('1234\n'))
True # uh-oh
&gt;&gt;&gt; bool(re.compile('^[a-z0-9\.]+\Z').match('1234\n'))
False
</code></pre>
",John Machin,John Machin,1251155520,1251214696,1251214696
http://stackoverflow.com/a/13290134/293352,executing default signal handler,24428,app,KZcoding,1305538696,1455753025,1455753025,https://stackoverflow.com/questions/6015498/executing-default-signal-handler,"<p><a href=""http://www.gnu.org/software/libc/manual/html_node/Signal-Handling.html"" rel=""nofollow noreferrer"">The GNU C Library Reference Manual</a> has a whole chapter explaining everything about signal handling.</p>

<p>You always get the previously set signal handler (a function pointer) when you install your own handler (see manpages for <code>signal()</code> or <code>sigaction()</code>). </p>

<pre><code>previous_handler = signal(SIGINT, myhandler);
</code></pre>

<p>The general rule is, that you can always reset to the previous handler and <code>raise()</code> the signal again. </p>

<pre><code>void myhandler(int sig) {
  /* own stuff .. */
  signal(sig, previous_handler);
  raise(sig);
  /* when it returns here .. set our signal handler again */
  signal(sig, myhandler);
}
</code></pre>

<p>There is one <strong>disadvantage</strong> of the general rule: Hardware exceptions which are mapped to signals are usually assigned to a certain instruction which caused the exception. So, when you raise a signal again, the associated instruction is not the same as originally. This can but should not harm other signal handlers.</p>

<p>Another <strong>disadvantage</strong> is, that each raised signal causes a lot of processing time. To prevent excessive use of <code>raise()</code> you can use the following alternatives: </p>

<ol>
<li><p>In case of <code>SIG_DFL</code> the function pointer points to address <code>0</code> (which is obviously no valid address). Thus, you <strong>have to</strong> reset the handler and <code>raise()</code> the signal again. </p>

<pre><code>if (previous_handler == SIG_DFL)
{
  signal(sig, SIG_DFL);
  raise(sig);
  signal(sig, myhandler);
} </code></pre></li>
<li><p><code>SIG_IGN</code> has value <code>1</code> (also an invalid address). Here you can just return (do nothing). </p>

<pre><code>else if (previous_handler == SIG_IGN)
{
  return;
} </code></pre></li>
<li><p>Otherwise (neither <code>SIG_IGN</code> nor <code>SIG_DFL</code>) you have received a valid function pointer and you <strong>can</strong> call the handler directly, </p>

<pre><code>else
{
  previous_handler(sig);
}</code></pre></li>
</ol>

<p>Of course, you have to consider the different APIs as well (see manpages for <code>signal()</code> and <code>sigaction()</code>).</p>
",homac,Gabriel Southern,1352382208,1436566126,1436566126
http://stackoverflow.com/a/13313828/1094109,How to find degenerate rows/columns in a covariance matrix,3180,user1812712,,1352480219,1352696091,0,https://stackoverflow.com/questions/13312498/how-to-find-degenerate-rows-columns-in-a-covariance-matrix,"<p>If you take the <code>QR</code> decomposition of a matrix <code>A</code>, the columns of <code>R</code> with a non-zero value along the diagonal correspond to linearly independent columns of <code>A</code>.</p>

<hr>

<pre><code>import numpy as np
linalg = np.linalg

def independent_columns(A, tol = 1e-05):
    """"""
    Return an array composed of independent columns of A.

    Note the answer may not be unique; this function returns one of many
    possible answers.

    http://stackoverflow.com/q/13312498/190597 (user1812712)
    http://math.stackexchange.com/a/199132/1140 (Gerry Myerson)
    http://mail.scipy.org/pipermail/numpy-discussion/2008-November/038705.html
        (Anne Archibald)

    &gt;&gt;&gt; A = np.array([(2,4,1,3),(-1,-2,1,0),(0,0,2,2),(3,6,2,5)])
    &gt;&gt;&gt; independent_columns(A)
    np.array([[1, 4],
              [2, 5],
              [3, 6]])
    """"""
    Q, R = linalg.qr(A)
    independent = np.where(np.abs(R.diagonal()) &gt; tol)[0]
    return A[:, independent]

def matrixrank(A,tol=1e-8):
    """"""
    http://mail.scipy.org/pipermail/numpy-discussion/2008-February/031218.html
    """"""
    s = linalg.svd(A,compute_uv=0)
    return sum( np.where( s&gt;tol, 1, 0 ) )


matrices = [
    np.array([(2,4,1,3),(-1,-2,1,0),(0,0,2,2),(3,6,2,5)]),
    np.array([(1,2,3),(2,4,6),(4,5,6)]).T,
    np.array([(1,2,3,1),(2,4,6,2),(4,5,6,3)]).T,
    np.array([(1,2,3,1),(2,4,6,3),(4,5,6,3)]).T,
    np.array([(1,2,3),(2,4,6),(4,5,6),(7,8,9)]).T
    ]

for A in matrices:
    B = independent_columns(A)
    assert matrixrank(A) == matrixrank(B) == B.shape[-1]
</code></pre>

<p><code>assert matrixrank(A) == matrixrank(B)</code> checks that the <code>independent_columns</code> function returns a matrix of the same rank as <code>A</code>. </p>

<p><code>assert matrixrank(B) == B.shape[-1]</code> checks that the rank of <code>B</code> equals the number of columns of <code>B</code>.</p>
",unutbu,unutbu,1352485562,1352696091,1352696091
http://stackoverflow.com/a/13328397/1269037,What ways are out there to display a desktop notification from a web app?,47830,reshefm,,1306125372,1434873982,0,https://stackoverflow.com/questions/6092885/what-ways-are-out-there-to-display-a-desktop-notification-from-a-web-app,"<p>Below is a working example of desktop notifications for Chrome, Firefox, Opera and Safari, copied from <a href=""https://stackoverflow.com/questions/2271156/chrome-desktop-notification-example/13328513#13328513"">Chrome desktop notification example</a>.<br>
Try it live <a href=""http://jsbin.com/ziwod/2/edit?html,js,output"" rel=""noreferrer"">on JSBin</a>.</p>

<pre class=""lang-js prettyprint-override""><code>// request permission on page load
document.addEventListener('DOMContentLoaded', function () {
  if (Notification.permission !== ""granted"")
    Notification.requestPermission();
});

function notifyMe() {
  if (!Notification) {
    alert('Desktop notifications not available in your browser. Try Chromium.'); 
    return;
  }

  if (Notification.permission !== ""granted"")
    Notification.requestPermission();
  else {
    var notification = new Notification('Notification title', {
      icon: 'http://cdn.sstatic.net/stackexchange/img/logos/so/so-icon.png',
      body: ""Hey there! You've been notified!"",
    });

    notification.onclick = function () {
      window.open(""https://stackoverflow.com/a/13328397/1269037"");      
    };

  }

}
</code></pre>

<pre class=""lang-html prettyprint-override""><code>&lt;button onclick=""notifyMe()""&gt;Notify me!&lt;/button&gt;
</code></pre>

<hr>

<p>More information about how this works in my answer to <a href=""https://stackoverflow.com/questions/2271156/chrome-desktop-notification-example/13328513#13328513"">Chrome desktop notification example</a>.</p>
",Dan Dascalescu,Community,1352605557,1434873982,1495542877
http://stackoverflow.com/a/133384/396730,Showing the stack trace from a running Python application,115991,Seb,Community,1222329966,1547671677,1495535474,https://stackoverflow.com/questions/132058/showing-the-stack-trace-from-a-running-python-application,"<p>I have module I use for situations like this - where a process will be running for a long time but gets stuck sometimes for unknown and irreproducible reasons.  Its a bit hacky, and only works on unix (requires signals):</p>

<pre><code>import code, traceback, signal

def debug(sig, frame):
    """"""Interrupt running process, and provide a python prompt for
    interactive debugging.""""""
    d={'_frame':frame}         # Allow access to frame object.
    d.update(frame.f_globals)  # Unless shadowed by global
    d.update(frame.f_locals)

    i = code.InteractiveConsole(d)
    message  = ""Signal received : entering python shell.\nTraceback:\n""
    message += ''.join(traceback.format_stack(frame))
    i.interact(message)

def listen():
    signal.signal(signal.SIGUSR1, debug)  # Register handler
</code></pre>

<p>To use, just call the listen() function at some point when your program starts up (You could even stick it in site.py to have all python programs use it), and let it run.  At any point, send the process a SIGUSR1 signal, using kill, or in python:</p>

<pre><code>    os.kill(pid, signal.SIGUSR1)
</code></pre>

<p>This will cause the program to break to a python console at the point it is currently at, showing you the stack trace, and letting you manipulate the variables.  Use control-d (EOF) to continue running (though note that you will probably interrupt any I/O etc at the point you signal, so it isn't fully non-intrusive.</p>

<p>I've another script that does the same thing, except it communicates with the running process through a pipe (to allow for debugging backgrounded processes etc).  Its a bit large to post here, but I've added it as a <a href=""http://code.activestate.com/recipes/576515/"" rel=""noreferrer"">python cookbook recipe</a>.</p>
",Brian,Mike Morearty,1222349925,1418227519,1418227519
http://stackoverflow.com/a/1334949/1243495,How to [recursively] Zip a directory in PHP?,96171,ed209,Alix Axel,1251292604,1514289696,1279216769,https://stackoverflow.com/questions/1334613/how-to-recursively-zip-a-directory-in-php,"<p>Here is a simple function that can compress any file or directory recursively, only needs the zip extension to be loaded.</p>

<pre><code>function Zip($source, $destination)
{
    if (!extension_loaded('zip') || !file_exists($source)) {
        return false;
    }

    $zip = new ZipArchive();
    if (!$zip-&gt;open($destination, ZIPARCHIVE::CREATE)) {
        return false;
    }

    $source = str_replace('\\', '/', realpath($source));

    if (is_dir($source) === true)
    {
        $files = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($source), RecursiveIteratorIterator::SELF_FIRST);

        foreach ($files as $file)
        {
            $file = str_replace('\\', '/', $file);

            // Ignore ""."" and "".."" folders
            if( in_array(substr($file, strrpos($file, '/')+1), array('.', '..')) )
                continue;

            $file = realpath($file);

            if (is_dir($file) === true)
            {
                $zip-&gt;addEmptyDir(str_replace($source . '/', '', $file . '/'));
            }
            else if (is_file($file) === true)
            {
                $zip-&gt;addFromString(str_replace($source . '/', '', $file), file_get_contents($file));
            }
        }
    }
    else if (is_file($source) === true)
    {
        $zip-&gt;addFromString(basename($source), file_get_contents($source));
    }

    return $zip-&gt;close();
}
</code></pre>

<p>Call it like this:</p>

<pre><code>Zip('/folder/to/compress/', './compressed.zip');
</code></pre>
",Alix Axel,Raohmaru,1251295620,1345150764,1345150764
http://stackoverflow.com/a/13351234/153718,Clearing &lt;input type=&#39;file&#39; /&gt; using jQuery,431203,sagar,Maistrenko Vitalii,1245936735,1558414586,1506435274,https://stackoverflow.com/questions/1043957/clearing-input-type-file-using-jquery,"<p>Easy: you wrap a <code>&lt;form&gt;</code> around the element, call reset on the form, then remove the form using <code>.unwrap()</code>. Unlike the <code>.clone()</code> solutions otherwise in this thread, you end up with the same element at the end (including custom properties that were set on it).</p>

<p>Tested and working in Opera, Firefox, Safari, Chrome and IE6+. Also works on other types of form elements, with the exception of <code>type=""hidden""</code>.</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>window.reset = function(e) {
  e.wrap('&lt;form&gt;').closest('form').get(0).reset();
  e.unwrap();
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js""&gt;&lt;/script&gt;

&lt;form&gt;
  &lt;input id=""file"" type=""file""&gt;
  &lt;br&gt;
  &lt;input id=""text"" type=""text"" value=""Original""&gt;
&lt;/form&gt;

&lt;button onclick=""reset($('#file'))""&gt;Reset file&lt;/button&gt;
&lt;button onclick=""reset($('#text'))""&gt;Reset text&lt;/button&gt;</code></pre>
</div>
</div>
</p>

<p><a href=""http://jsfiddle.net/rPaZQ/"" rel=""nofollow noreferrer"">JSFiddle</a></p>

<p>As Timo notes below, if you have the buttons to trigger the reset of the field inside of the <code>&lt;form&gt;</code>, you must call <code>.preventDefault()</code> on the event to prevent the <code>&lt;button&gt;</code> from triggering a submit.</p>

<hr>

<h3>EDIT</h3>

<p>Does not work in IE 11 due to an unfixed bug. The text (file name) is cleared on the input, but its <code>File</code> list remains populated.</p>
",slipheed,daaawx,1352752850,1553038871,1553038871
http://stackoverflow.com/a/13366183/7829525,Integrate type name in static_assert output?,11005,Xeo,Xeo,1308591620,1530435623,1349462281,https://stackoverflow.com/questions/6415186/integrate-type-name-in-static-assert-output,"<h2>My Hack</h2>

<h3>Code:</h3>

<pre><code>template &lt;typename Assertion&gt;
struct AssertValue : AssertionChecker&lt;Assertion::value, Assertion&gt;
{
    static_assert(AssertionValue, ""Assertion failed &lt;see below for more information&gt;"");
    static bool const value = Assertion::value;
};
</code></pre>

<p>It allows for you to check any <code>::value</code> assertion and dump the types if it failed.</p>

<h3>Usage:</h3>

<pre><code>// Bad indentation used to show parts
static_assert(
    AssertValue&lt;
        std::my_check&lt;
            T0, decltype(*somethingComplicated), T7::value_type
        &gt;
    &gt;, 
    ""something horrible happened""
);
</code></pre>

<p>where <code>std::my_check&lt;...&gt;::value</code> is the boolean result of the check </p>

<h3>Example</h3>

<p>For a full <a href=""http://sscce.org"">SSCCE</a> example see: <a href=""http://ideone.com/AcwsCA"">IDEOne Example</a></p>

<p>The Example's error message:</p>

<pre><code>prog.cpp: In instantiation of 'AssertValue&lt;std::is_base_of&lt;IMyInterface, MyBadType&gt; &gt;':
prog.cpp:37:69:   instantiated from 'void MyFunction(IteratorType, IteratorType) [with IteratorType = __gnu_cxx::__normal_iterator&lt;MyBadType*, std::vector&lt;MyBadType&gt; &gt;]'
prog.cpp:60:38:   instantiated from here
prog.cpp:9:5: error: static assertion failed: ""Assertion failed &lt;see below for more information&gt;""
prog.cpp: In function 'void MyFunction(IteratorType, IteratorType) [with IteratorType = __gnu_cxx::__normal_iterator&lt;MyBadType*, std::vector&lt;MyBadType&gt; &gt;]':
prog.cpp:60:38:   instantiated from here
prog.cpp:39:5: error: static assertion failed: ""iterator passed does not reference IMyInterface items""
</code></pre>

<h3>Explanation</h3>

<p>If the assertion fails, it will print the template arguments of AssertValue and therefore print the full template expansion of your check. For example, if you were checking a <code>std::is_base_of</code> it will print the full type of the check, e.g.: <code>std::is_base_of&lt;IMyInterface, MyBadType&gt;</code>. Then you know exactly what types were used in the failed assertion.</p>

<p>The only problem is that this only works on templates that put their result in <code>::value</code>. However <code>type_traits</code> mostly uses this and is the goto standard.</p>
",Bob Fincheimer,,1352829902,1352829902,0
http://stackoverflow.com/a/1336640/3091595,How can I color Python logging output?,128982,airmind,HaskellElephant,1229831865,1562635498,1389028354,https://stackoverflow.com/questions/384076/how-can-i-color-python-logging-output,"<p>Here is a solution that should work on any platform. If it doesn't just tell me and I will update it.</p>

<p>How it works: on platform supporting ANSI escapes is using them (non-Windows) and on Windows it does use API calls to change the console colors.</p>

<p>The script does hack the logging.StreamHandler.emit method from standard library adding a wrapper to it.</p>

<p><strong>TestColorer.py</strong></p>

<pre><code># Usage: add Colorer.py near you script and import it.
import logging
import Colorer

logging.warn(""a warning"")
logging.error(""some error"")
logging.info(""some info"")
</code></pre>

<p><strong>Colorer.py</strong></p>

<pre><code>#!/usr/bin/env python
# encoding: utf-8
import logging
# now we patch Python code to add color support to logging.StreamHandler
def add_coloring_to_emit_windows(fn):
        # add methods we need to the class
    def _out_handle(self):
        import ctypes
        return ctypes.windll.kernel32.GetStdHandle(self.STD_OUTPUT_HANDLE)
    out_handle = property(_out_handle)

    def _set_color(self, code):
        import ctypes
        # Constants from the Windows API
        self.STD_OUTPUT_HANDLE = -11
        hdl = ctypes.windll.kernel32.GetStdHandle(self.STD_OUTPUT_HANDLE)
        ctypes.windll.kernel32.SetConsoleTextAttribute(hdl, code)

    setattr(logging.StreamHandler, '_set_color', _set_color)

    def new(*args):
        FOREGROUND_BLUE      = 0x0001 # text color contains blue.
        FOREGROUND_GREEN     = 0x0002 # text color contains green.
        FOREGROUND_RED       = 0x0004 # text color contains red.
        FOREGROUND_INTENSITY = 0x0008 # text color is intensified.
        FOREGROUND_WHITE     = FOREGROUND_BLUE|FOREGROUND_GREEN |FOREGROUND_RED
       # winbase.h
        STD_INPUT_HANDLE = -10
        STD_OUTPUT_HANDLE = -11
        STD_ERROR_HANDLE = -12

        # wincon.h
        FOREGROUND_BLACK     = 0x0000
        FOREGROUND_BLUE      = 0x0001
        FOREGROUND_GREEN     = 0x0002
        FOREGROUND_CYAN      = 0x0003
        FOREGROUND_RED       = 0x0004
        FOREGROUND_MAGENTA   = 0x0005
        FOREGROUND_YELLOW    = 0x0006
        FOREGROUND_GREY      = 0x0007
        FOREGROUND_INTENSITY = 0x0008 # foreground color is intensified.

        BACKGROUND_BLACK     = 0x0000
        BACKGROUND_BLUE      = 0x0010
        BACKGROUND_GREEN     = 0x0020
        BACKGROUND_CYAN      = 0x0030
        BACKGROUND_RED       = 0x0040
        BACKGROUND_MAGENTA   = 0x0050
        BACKGROUND_YELLOW    = 0x0060
        BACKGROUND_GREY      = 0x0070
        BACKGROUND_INTENSITY = 0x0080 # background color is intensified.     

        levelno = args[1].levelno
        if(levelno&gt;=50):
            color = BACKGROUND_YELLOW | FOREGROUND_RED | FOREGROUND_INTENSITY | BACKGROUND_INTENSITY 
        elif(levelno&gt;=40):
            color = FOREGROUND_RED | FOREGROUND_INTENSITY
        elif(levelno&gt;=30):
            color = FOREGROUND_YELLOW | FOREGROUND_INTENSITY
        elif(levelno&gt;=20):
            color = FOREGROUND_GREEN
        elif(levelno&gt;=10):
            color = FOREGROUND_MAGENTA
        else:
            color =  FOREGROUND_WHITE
        args[0]._set_color(color)

        ret = fn(*args)
        args[0]._set_color( FOREGROUND_WHITE )
        #print ""after""
        return ret
    return new

def add_coloring_to_emit_ansi(fn):
    # add methods we need to the class
    def new(*args):
        levelno = args[1].levelno
        if(levelno&gt;=50):
            color = '\x1b[31m' # red
        elif(levelno&gt;=40):
            color = '\x1b[31m' # red
        elif(levelno&gt;=30):
            color = '\x1b[33m' # yellow
        elif(levelno&gt;=20):
            color = '\x1b[32m' # green 
        elif(levelno&gt;=10):
            color = '\x1b[35m' # pink
        else:
            color = '\x1b[0m' # normal
        args[1].msg = color + args[1].msg +  '\x1b[0m'  # normal
        #print ""after""
        return fn(*args)
    return new

import platform
if platform.system()=='Windows':
    # Windows does not support ANSI escapes and we are using API calls to set the console color
    logging.StreamHandler.emit = add_coloring_to_emit_windows(logging.StreamHandler.emit)
else:
    # all non-Windows platforms are supporting ANSI escapes so we use them
    logging.StreamHandler.emit = add_coloring_to_emit_ansi(logging.StreamHandler.emit)
    #log = logging.getLogger()
    #log.addFilter(log_filter())
    #//hdlr = logging.StreamHandler()
    #//hdlr.setFormatter(formatter())
</code></pre>
",sorin,Dave,1251311375,1345528742,1345528742
http://stackoverflow.com/a/13370382/801924,SQLAlchemy default DateTime,112405,Brandon O&#39;Rourke,Nathaniel Jones,1352847302,1555639172,1555639172,https://stackoverflow.com/questions/13370317/sqlalchemy-default-datetime,"<p><code>DateTime</code> doesn't have a default key as an input. The default key should be an input to the <code>Column</code> function. Try this:</p>

<pre><code>import datetime
from sqlalchemy import Column, Integer, DateTime
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Test(Base):
    __tablename__ = 'test'

    id = Column(Integer, primary_key=True)
    created_date = Column(DateTime, default=datetime.datetime.utcnow)
</code></pre>
",PearsonArtPhoto,PearsonArtPhoto,1352847689,1390261440,1390261440
http://stackoverflow.com/a/13370709/461813,How can I adapt my regex to allow for escaped quotes?,543,Treffynnon,Community,1352810045,1352965094,1495542712,https://stackoverflow.com/questions/13360870/how-can-i-adapt-my-regex-to-allow-for-escaped-quotes,"<p>The following tested script first checks that a given string is valid, consisting solely of single quoted, double quoted and un-quoted chunks. The <code>$re_valid</code> regex performs this validation task. If the string is valid, it then parses the string one chunk at a time using <code>preg_replace_callback()</code> and the <code>$re_parse</code> regex. The callback function processes the unquoted chunks using <code>preg_replace()</code>, and returns all quoted chunks unaltered. The only tricky part of the logic is passing the <code>$replace</code> and <code>$with</code> argument values from the main function to the callback function. (Note that PHP procedural code makes this variable passing from the main function to the callback function a bit awkward.) Here is the script:</p>

<pre class=""lang-php prettyprint-override""><code>&lt;?php // test.php Rev:20121113_1500
function str_replace_outside_quotes($replace, $with, $string){
    $re_valid = '/
        # Validate string having embedded quoted substrings.
        ^                           # Anchor to start of string.
        (?:                         # Zero or more string chunks.
          ""[^""\\\\]*(?:\\\\.[^""\\\\]*)*""  # Either a double quoted chunk,
        | \'[^\'\\\\]*(?:\\\\.[^\'\\\\]*)*\'  # or a single quoted chunk,
        | [^\'""\\\\]+               # or an unquoted chunk (no escapes).
        )*                          # Zero or more string chunks.
        \z                          # Anchor to end of string.
        /sx';
    if (!preg_match($re_valid, $string)) // Exit if string is invalid.
        exit(""Error! String not valid."");
    $re_parse = '/
        # Match one chunk of a valid string having embedded quoted substrings.
          (                         # Either $1: Quoted chunk.
            ""[^""\\\\]*(?:\\\\.[^""\\\\]*)*""  # Either a double quoted chunk,
          | \'[^\'\\\\]*(?:\\\\.[^\'\\\\]*)*\'  # or a single quoted chunk.
          )                         # End $1: Quoted chunk.
        | ([^\'""\\\\]+)             # or $2: an unquoted chunk (no escapes).
        /sx';
    _cb(null, $replace, $with); // Pass args to callback func.
    return preg_replace_callback($re_parse, '_cb', $string);
}
function _cb($matches, $replace = null, $with = null) {
    // Only set local static vars on first call.
    static $_replace, $_with;
    if (!isset($matches)) { 
        $_replace = $replace;
        $_with = $with;
        return; // First call is done.
    }
    // Return quoted string chunks (in group $1) unaltered.
    if ($matches[1]) return $matches[1];
    // Process only unquoted chunks (in group $2).
    return preg_replace('/'. preg_quote($_replace, '/') .'/',
        $_with, $matches[2]);
}
$data = file_get_contents('testdata.txt');
$output = str_replace_outside_quotes('?', '%s', $data);
file_put_contents('testdata_out.txt', $output);
?&gt;
</code></pre>
",ridgerunner,ridgerunner,1352849512,1352850150,1352850150
http://stackoverflow.com/a/13371570/3030124,linux high resolution timer in user space,3129,Mike Ryan,,1352841980,1352854900,0,https://stackoverflow.com/questions/13369087/linux-high-resolution-timer-in-user-space,"<p>The POSIX timers (created with <code>timer_create()</code>) are already high-resolution.  Your problem is in the delivery method - if you want very precise timing then <code>SIGEV_THREAD</code> is not a good idea.</p>

<p>You could instead use <code>SIGEV_SIGNAL</code> so that timer expiry is notified via a signal, then use <code>sigwaitinfo()</code> to wait for it to expire.  Alternately, you could use a timerfd instead of a POSIX timer (created with <code>timerfd_create()</code>).</p>

<p>Additionally, if you want your thread to preempt other running threads when the timer expires, you'll need to give it a real-time scheduling policy (<code>SCHED_FIFO</code> or <code>SCHED_RR</code>) with <code>sched_setscheduler()</code>.</p>

<p>You will also want to ensure that your kernel is compiled with the <code>CONFIG_PREEMPT</code> option, which allows most kernel code to be preemptable.  There will still be some level of jitter, caused by non-preemptible kernel work like hardware interrupts and softirqs.  To reduce this further, you can try using the <a href=""https://rt.wiki.kernel.org/index.php/CONFIG_PREEMPT_RT_Patch"" rel=""noreferrer""><code>CONFIG_PREEMPT_RT</code> kernel patchset</a>.  </p>
",caf,,1352854900,1352854900,0
http://stackoverflow.com/a/13373180/1485219,HTML &lt;base&gt; TAG and local folder path with Internet Explorer,17764,UGEEN,,1286989993,1518645068,0,https://stackoverflow.com/questions/3926197/html-base-tag-and-local-folder-path-with-internet-explorer,"<p>This is definitely a very annoying bug in IE, but I just found a workaround.</p>

<p>The thing to realize is that IE does resolve the relative path, and then promptly ignores it. You can even see the fully resolved URL by checking the value of the base tag's 'href' property later on using JavaScript. So this (rather silly) piece of code resets the <code>&lt;base&gt;</code> tag's 'href' attribute to the very full URL that IE had already resolved, thereby causing it to no longer be ignored.</p>

<p>Add the following HTML to the top of your page, right after the  tag and before you actually use any URLs:</p>

<pre><code>&lt;!--[if IE]&gt;&lt;script type=""text/javascript""&gt;
    // Fix for IE ignoring relative base tags.
    (function() {
        var baseTag = document.getElementsByTagName('base')[0];
        baseTag.href = baseTag.href;
    })();
&lt;/script&gt;&lt;![endif]--&gt;
</code></pre>

<p><em>(conditional comments necessary since this code can break the <code>&lt;base&gt;</code> tag in Safari/Chrome, and other browsers clearly don't need it.)</em></p>

<p>Such a silly bug.</p>
",Richard Connamacher,Richard Connamacher,1352868176,1353023289,1353023289
http://stackoverflow.com/a/13375811/448068,Wrap long words in JTextPane (Java 7),5037,Al-Khwarizmi,Community,1325154818,1352884093,1495542896,https://stackoverflow.com/questions/8666727/wrap-long-words-in-jtextpane-java-7,"<p>For me the fix works (tested under 1.7.0_09)</p>

<pre><code>import javax.swing.*;
import javax.swing.text.*;
import java.awt.*;

public class WrapTestApp extends JFrame {

    public static void main ( String[] args ) {
        new WrapTestApp();
    }

    public WrapTestApp () {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(200,200);
        getContentPane().setLayout(new BorderLayout());
        JTextPane jtp = new JTextPane();
        jtp.setEditorKit(new WrapEditorKit());
        JScrollPane jsp = new JScrollPane(jtp);
        jsp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
        getContentPane().add(jsp, BorderLayout.CENTER);
        jtp.setText(""ExampleOfTheWrapLongWordWithoutSpaces"");
        setVisible(true);
    }

    class WrapEditorKit extends StyledEditorKit {
        ViewFactory defaultFactory=new WrapColumnFactory();
        public ViewFactory getViewFactory() {
            return defaultFactory;
        }

    }

    class WrapColumnFactory implements ViewFactory {
        public View create(Element elem) {
            String kind = elem.getName();
            if (kind != null) {
                if (kind.equals(AbstractDocument.ContentElementName)) {
                    return new WrapLabelView(elem);
                } else if (kind.equals(AbstractDocument.ParagraphElementName)) {
                    return new ParagraphView(elem);
                } else if (kind.equals(AbstractDocument.SectionElementName)) {
                    return new BoxView(elem, View.Y_AXIS);
                } else if (kind.equals(StyleConstants.ComponentElementName)) {
                    return new ComponentView(elem);
                } else if (kind.equals(StyleConstants.IconElementName)) {
                    return new IconView(elem);
                }
            }

            // default to text display
            return new LabelView(elem);
        }
    }

    class WrapLabelView extends LabelView {
        public WrapLabelView(Element elem) {
            super(elem);
        }

        public float getMinimumSpan(int axis) {
            switch (axis) {
                case View.X_AXIS:
                    return 0;
                case View.Y_AXIS:
                    return super.getMinimumSpan(axis);
                default:
                    throw new IllegalArgumentException(""Invalid axis: "" + axis);
            }
        }

    }
}
</code></pre>
",StanislavL,,1352884093,1352884093,0
http://stackoverflow.com/a/13380999/14379,java &amp; fullscreen over multiple monitors,15912,Folkert van Heusden,Folkert van Heusden,1261333815,1395318129,1261337409,https://stackoverflow.com/questions/1936547/java-fullscreen-over-multiple-monitors,"<p>A more general solution to Ash's code is to union the bounds of all the graphics configurations</p>

<pre><code>Rectangle2D result = new Rectangle2D.Double();
GraphicsEnvironment localGE = GraphicsEnvironment.getLocalGraphicsEnvironment();
for (GraphicsDevice gd : localGE.getScreenDevices()) {
  for (GraphicsConfiguration graphicsConfiguration : gd.getConfigurations()) {
    result.union(result, graphicsConfiguration.getBounds(), result);
  }
}
f.setSize(result.getWidth(), result.getHeight());
</code></pre>

<p>This will work for vertically aligned monitors as well as horizontal.</p>
",tiestvilee,,1352904166,1352904166,0
http://stackoverflow.com/a/13382873/888165,Getting scroll bar width using JavaScript,91540,user1032531,,1352909201,1559128083,0,https://stackoverflow.com/questions/13382516/getting-scroll-bar-width-using-javascript,"<p>This function should give you width of scrollbar</p>

<pre class=""lang-js prettyprint-override""><code>function getScrollbarWidth() {

  // Creating invisible container
  const outer = document.createElement('div');
  outer.style.visibility = 'hidden';
  outer.style.overflow = 'scroll'; // forcing scrollbar to appear
  outer.style.msOverflowStyle = 'scrollbar'; // needed for WinJS apps
  document.body.appendChild(outer);

  // Creating inner element and placing it in the container
  const inner = document.createElement('div');
  outer.appendChild(inner);

  // Calculating difference between container's full width and the child width
  const scrollbarWidth = (outer.offsetWidth - inner.offsetWidth);

  // Removing temporary elements from the DOM
  outer.parentNode.removeChild(outer);

  return scrollbarWidth;

}
</code></pre>

<p>Basic steps here are:</p>

<ol>
<li>Create hidden div (outer) and get it's offset width</li>
<li>Force scroll bars to appear in div (outer) using CSS overflow property</li>
<li>Create new div (inner) and append to outer, set its width to '100%' and get offset width</li>
<li>Calculate scrollbar width based on gathered offsets</li>
</ol>

<p>Working example here: <a href=""http://jsfiddle.net/slavafomin/tsrmgcu9/"" rel=""nofollow noreferrer"">http://jsfiddle.net/slavafomin/tsrmgcu9/</a></p>

<p><strong>Update</strong></p>

<p>If you're using this on a Windows (metro) App, make sure you set the <a href=""http://msdn.microsoft.com/en-us/library/windows/apps/hh441298.aspx"" rel=""nofollow noreferrer"">-ms-overflow-style</a> property of the 'outer' div to <code>scrollbar</code>, otherwise the width will not be correctly detected. (code updated)</p>

<p><strong>Update #2</strong>
This will not work on Mac OS with the default ""Only show scrollbars when scrolling"" setting (Yosemite and up).</p>
",lostsource,Slava Fomin II,1352910354,1559128083,1559128083
http://stackoverflow.com/a/1339589/873661,InputStream or Reader wrapper for progress reporting,10349,David Moles,David Moles,1251358767,1393404178,1292012723,https://stackoverflow.com/questions/1339437/inputstream-or-reader-wrapper-for-progress-reporting,"<p>Here's a fairly basic implementation that fires <code>PropertyChangeEvent</code>s when additional bytes are read.  Some caveats:</p>

<ul>
<li>The class does not support <code>mark</code> or <code>reset</code> operations, although these would be easy to add.</li>
<li>The class does not check whether the total number bytes read ever exceeds the maximum number of bytes anticipated, although this could always be dealt with by client code when displaying progress.</li>
<li>I haven't test the code.</li>
</ul>

<p>Code:</p>

<pre><code>public class ProgressInputStream extends FilterInputStream {
    private final PropertyChangeSupport propertyChangeSupport;
    private final long maxNumBytes;
    private volatile long totalNumBytesRead;

    public ProgressInputStream(InputStream in, long maxNumBytes) {
        super(in);
        this.propertyChangeSupport = new PropertyChangeSupport(this);
        this.maxNumBytes = maxNumBytes;
    }

    public long getMaxNumBytes() {
        return maxNumBytes;
    }

    public long getTotalNumBytesRead() {
        return totalNumBytesRead;
    }

    public void addPropertyChangeListener(PropertyChangeListener l) {
        propertyChangeSupport.addPropertyChangeListener(l);
    }

    public void removePropertyChangeListener(PropertyChangeListener l) {
        propertyChangeSupport.removePropertyChangeListener(l);
    }

    @Override
    public int read() throws IOException {
        int b = super.read();
        updateProgress(1);
        return b;
    }

    @Override
    public int read(byte[] b) throws IOException {
        return (int)updateProgress(super.read(b));
    }

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        return (int)updateProgress(super.read(b, off, len));
    }

    @Override
    public long skip(long n) throws IOException {
        return updateProgress(super.skip(n));
    }

    @Override
    public void mark(int readlimit) {
        throw new UnsupportedOperationException();
    }

    @Override
    public void reset() throws IOException {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean markSupported() {
        return false;
    }

    private long updateProgress(long numBytesRead) {
        if (numBytesRead &gt; 0) {
            long oldTotalNumBytesRead = this.totalNumBytesRead;
            this.totalNumBytesRead += numBytesRead;
            propertyChangeSupport.firePropertyChange(""totalNumBytesRead"", oldTotalNumBytesRead, this.totalNumBytesRead);
        }

        return numBytesRead;
    }
}
</code></pre>
",Adamski,Adamski,1251360883,1349264439,1349264439
http://stackoverflow.com/a/13397058/122441,UnknownHostKey Exception in Accessing GitHub Securely,10456,Izza,,1352978698,1518173044,0,https://stackoverflow.com/questions/13396534/unknownhostkey-exception-in-accessing-github-securely,"<p>It happens because you have no entry for github in <code>~/.ssh/known_hosts</code>, and <code>JSch</code> used in jgit defaults to rejecting session in this case. Refer to this question for solutions: <a href=""https://stackoverflow.com/questions/2003419/com-jcraft-jsch-jschexception-unknownhostkey"">com.jcraft.jsch.JSchException: UnknownHostKey</a></p>

<p>To set the ssh session property, you need to create a session factory for jgit:</p>

<pre><code>SshSessionFactory.setInstance(new JschConfigSessionFactory() {
  public void configure(Host hc, Session session) {
    session.setConfig(""StrictHostKeyChecking"", ""no"");
  }
})
</code></pre>

<p>or add <code>StrictHostKeyChecking=no</code> to <code>~/.ssh/config</code></p>
",Denis Tulskiy,Evan Knowles,1352980556,1518173044,1518173044
http://stackoverflow.com/a/13398311/226013,Regular expression for twitter username,19787,ppp,,1325025427,1536575924,0,https://stackoverflow.com/questions/8650007/regular-expression-for-twitter-username,"<p>This is the best solution I found yet to replace multiple occurrences of a twitter username.</p>

<p>The regex doing the trick is <code>/(^|[^@\w])@(\w{1,15})\b/</code>. I am catching what stand behind the @ character so I can replace the username correctly. And I am using global match flag (g) so it will replace all occurrences. 
<a href=""https://stackoverflow.com/users/588264/asenovm"">asenovm</a> answer is simple, but will not work in most user input contexts, as <a href=""https://stackoverflow.com/users/559669/techexpert"">techexpert</a> is explaining in <a href=""https://stackoverflow.com/questions/8650007/regular-expression-for-twitter-username?lq=1#comment12819310_8650024"">his comment</a>.</p>

<pre class=""lang-js prettyprint-override""><code>var output,
    text    = ""@RayFranco is answering to @AnPel, this is a real '@username83' but this is an@email.com, and this is a @probablyfaketwitterusername"",
    regex   = /(^|[^@\w])@(\w{1,15})\b/g,
    replace = '$1&lt;a href=""http://twitter.com/$2""&gt;@$2&lt;/a&gt;';

output = text.replace( regex, replace );

console.log ( output );
</code></pre>

<p>This is giving me what I expected <em>(tested with node v0.9.1)</em> :</p>

<blockquote>
  <p><a href=""http://twitter.com/RayFranco"" rel=""noreferrer"">@RayFranco</a> is answering to <a href=""http://twitter.com/AnPel"" rel=""noreferrer"">@AnPel</a>, this is a real '<a href=""http://twitter.com/username83"" rel=""noreferrer"">@username83</a>' but this is an@email.com, and this is a @probablyfaketwitterusername</p>
</blockquote>

<p>This is based on <a href=""https://support.twitter.com/articles/101299-why-can-t-i-register-certain-usernames#error"" rel=""noreferrer"">Twitter ""specs"" for username</a> :</p>

<blockquote>
  <p><em>Your username cannot be longer than 15 characters. Your real name can be longer (20 characters), but usernames are kept shorter for the sake of ease. A username can only contain alphanumeric characters (letters A-Z, numbers 0-9) with the exception of underscores, as noted above. Check to make sure your desired username doesn't contain any symbols, dashes, or spaces.</em></p>
</blockquote>

<p>Hope this helps.</p>
",rayfranco,Community,1352985659,1408248941,1495542387
http://stackoverflow.com/a/133997/627806,JavaScript post request like a form submit,1327890,Joseph Holsten,Martijn Pieters,1222355743,1556916455,1502809214,https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit,"<h2>Dynamically create <code>&lt;input&gt;</code>s in a form and submit it</h2>

<pre class=""lang-js prettyprint-override""><code>/**
 * sends a request to the specified url from a form. this will change the window location.
 * @param {string} path the path to send the post request to
 * @param {object} params the paramiters to add to the url
 * @param {string} [method=post] the method to use on the form
 */

function post(path, params, method='post') {

  // The rest of this code assumes you are not using a library.
  // It can be made less wordy if you use one.
  const form = document.createElement('form');
  form.method = method;
  form.action = path;

  for (const key in params) {
    if (params.hasOwnProperty(key)) {
      const hiddenField = document.createElement('input');
      hiddenField.type = 'hidden';
      hiddenField.name = key;
      hiddenField.value = params[key];

      form.appendChild(hiddenField);
    }
  }

  document.body.appendChild(form);
  form.submit();
}

</code></pre>

<p>Example:</p>

<pre class=""lang-js prettyprint-override""><code>post('/contact/', {name: 'Johnny Bravo'});
</code></pre>

<p><strong>EDIT</strong>: Since this has gotten upvoted so much, I'm guessing people will be copy-pasting this a lot. So I added the <code>hasOwnProperty</code> check to fix any inadvertent bugs.</p>
",Rakesh Pai,ChrisBrownie55,1222356533,1556916455,1556916455
http://stackoverflow.com/a/13402035/1269037,Caret position in pixels in an input type text (not a textarea),6463,Zo72,Community,1352737689,1399033912,1495541913,https://stackoverflow.com/questions/13347471/caret-position-in-pixels-in-an-input-type-text-not-a-textarea,"<h2>Using an invisible faux element</h2>

<p>You can accomplish this by using an absolutely positioned invisible (using <code>visibility</code> not <code>display</code>) faux element that has all the same CSS properties as your input text box (fonts, left borders and left padding).</p>

<p>This <a href=""http://jsfiddle.net/yfSUk/3"" rel=""nofollow noreferrer"">very short and easy to understand JSFiddle</a> is a starting point how this script should be working.<br>
<strong>It works in Chrome and Firefox as is.</strong> And <a href=""http://msdn.microsoft.com/en-us/library/ie/ff974768(v=vs.85).aspx"" rel=""nofollow noreferrer"">it seems</a> it should be working in IE9+ as well.</p>

<p>Internet Explorer 8 (and down) would <a href=""https://stackoverflow.com/a/2897510/75642"">need some additional code</a> to get caret position from start of text within input text box. I've even added a meter at the top to show a line every 10 pixels so you can see whether it measures correctly or not. Mind that lines are at 1, 11, 21,... pixel positions.</p>

<p>What this example does it actually takes all the text in text box up to caret position and puts it inside the faux element and then measures its width in pixels. <strong>This gets you offset from left of text box.</strong></p>

<p>When it copies text to faux element it also replaces normal spaces with non-breaking ones so they actually get rendered otherwise if you'd position caret right after space you'd get wrong position:</p>

<pre><code>var faux = $(""#faux"");
$(""#test"").on(""keyup click focus"", function(evt) {
    // get caret offset from start
    var off = this.selectionStart;

    // replace spaces with non-breaking space
    faux.text(this.value.substring(0, off).replace(/\s/g, ""\u00a0""));
});
</code></pre>

<p>Mind that faux's right dimensions</p>

<ul>
<li>padding</li>
<li>border</li>
<li>margin</li>
</ul>

<p>have been removed in order to get correct value, otherwise element would be too wide. Element's box has to end right after the text it contains.</p>

<p>Caret's position in pixels from start of input box is then easily gotten from:</p>

<pre><code>faux.outerWidth();
</code></pre>

<h2>The problem</h2>

<p>There is one problem though. I'm not sure how to handle situation when text within text box is scrolled (when too long) and caret isn't at the very end of text but somewhere in between... If it's at the end then caret position is always at maximum position possible (input width less right dimensions - padding, border, margin).</p>

<p>I'm not sure if it's possible to get text scroll position within text box at all? If you can then even this problem can be solved. But I'm not aware of any solution to this...</p>

<h3>Hope this helps.</h3>
",Robert Koritnik,Community,1352997213,1353590522,1495540055
http://stackoverflow.com/a/1341318/1323144,How do I create an average from a Ruby array?,133513,dotty,the Tin Man,1251381265,1559680419,1380057416,https://stackoverflow.com/questions/1341271/how-do-i-create-an-average-from-a-ruby-array,"<p>Try this:</p>

<pre><code>arr = [5, 6, 7, 8]
arr.inject{ |sum, el| sum + el }.to_f / arr.size
=&gt; 6.5
</code></pre>

<p>Note the <code>.to_f</code>, which you'll want for avoiding any problems from integer division. You can also do:</p>

<pre><code>arr = [5, 6, 7, 8]
arr.inject(0.0) { |sum, el| sum + el } / arr.size
=&gt; 6.5
</code></pre>

<p>You can define it as part of <code>Array</code> as another commenter has suggested, but you need to avoid integer division or your results will be wrong. Also, this isn't generally applicable to every possible element type (obviously, an average only makes sense for things that can be averaged). But if you want to go that route, use this:</p>

<pre><code>class Array
  def sum
    inject(0.0) { |result, el| result + el }
  end

  def mean 
    sum / size
  end
end
</code></pre>

<p>If you haven't seen <code>inject</code> before, it's not as magical as it might appear. It iterates over each element and then applies an accumulator value to it. The accumulator is then handed to the next element. In this case, our accumulator is simply an integer that reflects the sum of all the previous elements.</p>

<p><strong>Edit:</strong> Commenter Dave Ray proposed a nice improvement.</p>

<p><strong>Edit:</strong> Commenter Glenn Jackman's proposal, using <code>arr.inject(:+).to_f</code>, is nice too but perhaps a bit too clever if you don't know what's going on. The <code>:+</code> is a symbol; when passed to inject, it applies the method named by the symbol (in this case, the addition operation) to each element against the accumulator value.</p>
",John Feminella,Joshua Pinter,1251381649,1431268833,1431268833
http://stackoverflow.com/a/13431981/1789618,C++ shared_ptr based singletone what causes link error?,5197,myWallJSON,,1353161546,1474465280,0,https://stackoverflow.com/questions/13431362/c-shared-ptr-based-singletone-what-causes-link-error,"<p>This</p>

<pre><code>static boost::shared_ptr&lt;connector&gt; instance;
</code></pre>

<p>inside your class definition is just a <em>declaration</em>. What you don't seem to have is a <em>definition</em> of it. This <em>definition</em> has be outside of the class definition.</p>

<p>However, you should probably prefer to do this:</p>

<pre><code>class connector
{   
public:
    connector(connector const&amp;) = delete;
    connector&amp; operator=(connector const&amp;) = delete;

    static boost::shared_ptr&lt;connector&gt; Instance()
    {
        static boost::shared_ptr&lt;connector&gt; instance (new connector);
        return instance;
    }
private:
    connector(){}
};
</code></pre>

<p>In this case <code>instance</code> is <em>defined</em> as a static function-local object inside your inline function definition of <code>Instance</code>. The nice thing about it is that this kind of initialization is guaranteed to be thread-safe in C++11.</p>
",sellibitze,sellibitze,1353166143,1474465280,1474465280
http://stackoverflow.com/a/1343796/5210,Is there an example of how to use a TouchDelegate in Android to increase the size of a view&#39;s click target?,36993,emmby,,1251400388,1536887586,0,https://stackoverflow.com/questions/1343222/is-there-an-example-of-how-to-use-a-touchdelegate-in-android-to-increase-the-siz,"<p>I asked a friend at Google and they were able to help me figure out how to use TouchDelegate.  Here's what we came up with:</p>

<pre><code>final View parent = (View) delegate.getParent();
parent.post( new Runnable() {
    // Post in the parent's message queue to make sure the parent
    // lays out its children before we call getHitRect()
    public void run() {
        final Rect r = new Rect();
        delegate.getHitRect(r);
        r.top -= 4;
        r.bottom += 4;
        parent.setTouchDelegate( new TouchDelegate( r , delegate));
    }
});
</code></pre>
",emmby,,1251408113,1251408113,0
http://stackoverflow.com/a/13466241/654755,Automatically create an admin user when running Django&#39;s ./manage.py syncdb,34382,a paid nerd,Tadeck,1253720402,1492830197,1334088579,https://stackoverflow.com/questions/1466827/automatically-create-an-admin-user-when-running-djangos-manage-py-syncdb,"<p>If you prefer to type initializing code direct into python source file, this code modified manage.py might help (and thanks for Cjkjvfnby's little code!):</p>

<pre><code>#!/usr/bin/env python
import os
import sys

if __name__ == ""__main__"":
    # set your django setting module here
    os.environ.setdefault(""DJANGO_SETTINGS_MODULE"", ""app.settings"") 

    from django.core.management import execute_from_command_line

    # hack to prevent admin prompt
    if len(sys.argv) == 2 and sys.argv[1] == 'syncdb':
        sys.argv.append('--noinput')

    execute_from_command_line(sys.argv)

    # additional process for creation additional user, misc data, and anything
    for arg in sys.argv:
        # if syncdb occurs and users don't exist, create them
        if arg.lower() == 'syncdb':
            print 'syncdb post process...'
            from django.contrib.auth.models import User

            admin_id = 'admin'
            admin_email = 'superuser@mail.com'
            admin_password = 'superuser_password'
            additional_users = [
                                ['tempuser', 'user_email@mail.com', 'tempuser_password']
                                ]

            # admin exists?
            user_list = User.objects.filter(username=admin_id)
            if len(user_list) == 0: 
                print 'create superuser: ' + admin_id
                new_admin = User.objects.create_superuser(admin_id, admin_email, admin_password)

            # additional user exists?
            for additional_user in additional_users:
                user_list = User.objects.filter(username=additional_user[0])
                if len(user_list) == 0: 
                    print 'create additional user: ' + additional_user[0]
                    new_admin = User.objects.create_user(additional_user[0], additional_user[1], additional_user[2])

            # any other data
</code></pre>

<p>I'm just showing the user creation code here, but you can enhance this code more as you want.</p>
",Kenial,Kenial,1353382780,1353383374,1353383374
http://stackoverflow.com/a/13468943/1446634,Deleting all files from a folder using PHP?,295890,getaway,Peter Mortensen,1294148143,1548430070,1431810813,https://stackoverflow.com/questions/4594180/deleting-all-files-from-a-folder-using-php,"<p>If you want to delete everything from folder (including subfolders) use this combination of <code>array_map</code>, <code>unlink</code> and <code>glob</code>:</p>

<pre><code>array_map('unlink', glob(""path/to/temp/*""));
</code></pre>

<p><strong>Update</strong></p>

<p>This call can also handle empty directories - thanks for the tip, @mojuba!</p>

<pre><code>array_map('unlink', array_filter((array) glob(""path/to/temp/*"")));
</code></pre>
",Stichoza,Philipp,1353399045,1536921212,1536921212
http://stackoverflow.com/a/13483496/4391298,XQuery looking for text with &#39;single&#39; quote,26788,Juan Mendes,Richard J. Ross III,1353446453,1496595421,1354306190,https://stackoverflow.com/questions/13482352/xquery-looking-for-text-with-single-quote,"<p>Here's a hackaround (Thanks Dimitre Novatchev) that will allow me to search for any text in xpaths, whether it contains single or double quotes. Implemented in JS, but could be easily translated to other languages</p>

<pre><code>function cleanStringForXpath(str)  {
    var parts = str.match(/[^'""]+|['""]/g);
    parts = parts.map(function(part){
        if (part === ""'"")  {
            return '""\'""'; // output ""'""
        }

        if (part === '""') {
            return ""'\""'""; // output '""'
        }
        return ""'"" + part + ""'"";
    });
    return ""concat("" + parts.join("","") + "")"";
}
</code></pre>

<p>If I'm looking for <code>I'm reading ""Harry Potter""</code> I could do the following</p>

<pre><code>var xpathString = cleanStringForXpath( ""I'm reading \""Harry Potter\"""" );
$x(""//*[text()=""+ xpathString +""]"");
// The xpath created becomes 
// //*[text()=concat('I',""'"",'m reading ','""','Harry Potter','""')]
</code></pre>

<p>Here's a (much shorter) Java version. It's exactly the same as JavaScript, if you remove type information. Thanks to <a href=""https://stackoverflow.com/users/1850609/acdcjunior"">https://stackoverflow.com/users/1850609/acdcjunior</a></p>

<pre><code>String escapedText = ""concat('""+originalText.replace(""'"", ""', \""'\"", '"") + ""', '')"";!
</code></pre>
",Juan Mendes,Community,1353451466,1454268733,1495541818
http://stackoverflow.com/a/13492589/4184258,How to suppress GCC warnings from library headers?,37589,AdSR,,1260279820,1562242517,0,https://stackoverflow.com/questions/1867065/how-to-suppress-gcc-warnings-from-library-headers,"<p>You can use pragmas. For example:</p>

<pre><code>// save diagnostic state
#pragma GCC diagnostic push 

// turn off the specific warning. Can also use ""-Wall""
#pragma GCC diagnostic ignored ""-Wunused-but-set-variable""

#include &lt;boost/uuid/uuid.hpp&gt;
#include &lt;boost/uuid/uuid_generators.hpp&gt;
#include &lt;boost/uuid/uuid_io.hpp&gt;
#include &lt;boost/lexical_cast.hpp&gt;

// turn the warnings back on
#pragma GCC diagnostic pop
</code></pre>
",andrewrjones,wheybags,1353498400,1396804615,1396804615
http://stackoverflow.com/a/134930/1593459,How do I find the mime-type of a file with php?,108808,Issac Kelly,j0k,1222365112,1511830979,1354875677,https://stackoverflow.com/questions/134833/how-do-i-find-the-mime-type-of-a-file-with-php,"<p>mime_content_type() is deprecated, so you won't be able to count on it working in the future. There is a ""fileinfo"" PECL extension, but I haven't heard good things about it.</p>

<p>If you are running on a *nix server, you can do the following, which has worked fine for me:</p>

<pre><code>$file = escapeshellarg( $filename );
$mime = shell_exec(""file -bi "" . $file);
$filename should probably include the absolute path.
</code></pre>
",Eric_WVGG,Mahmoud Gamal,1222365914,1329227590,1329227590
http://stackoverflow.com/a/1349426/209505,Generate random string/characters in JavaScript,1103969,Tom Lehman,T.Todua,1251494081,1559324263,1469104025,https://stackoverflow.com/questions/1349404/generate-random-string-characters-in-javascript,"<p>I think this will work for you:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function makeid(length) {
   var result           = '';
   var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
   var charactersLength = characters.length;
   for ( var i = 0; i &lt; length; i++ ) {
      result += characters.charAt(Math.floor(Math.random() * charactersLength));
   }
   return result;
}

console.log(makeid(5));</code></pre>
</div>
</div>
</p>
",csharptest.net,Jake,1251494463,1556058616,1556058616
http://stackoverflow.com/a/13505966/161801,Python Split path recursively,2408,user1757703,user1757703,1353557794,1430745941,1353606554,https://stackoverflow.com/questions/13505819/python-split-path-recursively,"<p>Something like this</p>

<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; s = ""E:/John/2012/practice/question11""
&gt;&gt;&gt; os.path.split(s)
('E:/John/2012/practice', 'question11')
</code></pre>

<p>Notice <code>os.path.split()</code> doesn't split up the whole path as <code>str.split()</code> would</p>

<pre><code>&gt;&gt;&gt; def rec_split(s):
...     rest, tail = os.path.split(s)
...     if rest == '':
...         return tail,
...     return rec_split(rest) + (tail,)
...
&gt;&gt;&gt; rec_split(s)
('E:', 'John', '2012', 'practice', 'question11')
</code></pre>

<p>Edit: Although the question was about Windows paths. It's quite easy to modify it for unix/linux paths including those starting with ""/""</p>

<pre><code>&gt;&gt;&gt; def rec_split(s):
...     rest, tail = os.path.split(s)
...     if rest in ('', os.path.sep):
...         return tail,
...     return rec_split(rest) + (tail,)
</code></pre>
",John La Rooy,John La Rooy,1353558995,1430745941,1430745941
http://stackoverflow.com/a/13512344/1518329,make_unique and perfect forwarding,66089,fredoverflow,Xeo,1313142383,1473055998,1336829792,https://stackoverflow.com/questions/7038357/make-unique-and-perfect-forwarding,"<p>Nice, but Stephan T. Lavavej (better known as STL) has a better solution for <code>make_unique</code>, which works correctly for the array version.</p>

<pre><code>#include &lt;memory&gt;
#include &lt;type_traits&gt;
#include &lt;utility&gt;

template &lt;typename T, typename... Args&gt;
std::unique_ptr&lt;T&gt; make_unique_helper(std::false_type, Args&amp;&amp;... args) {
  return std::unique_ptr&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...));
}

template &lt;typename T, typename... Args&gt;
std::unique_ptr&lt;T&gt; make_unique_helper(std::true_type, Args&amp;&amp;... args) {
   static_assert(std::extent&lt;T&gt;::value == 0,
       ""make_unique&lt;T[N]&gt;() is forbidden, please use make_unique&lt;T[]&gt;()."");

   typedef typename std::remove_extent&lt;T&gt;::type U;
   return std::unique_ptr&lt;T&gt;(new U[sizeof...(Args)]{std::forward&lt;Args&gt;(args)...});
}

template &lt;typename T, typename... Args&gt;
std::unique_ptr&lt;T&gt; make_unique(Args&amp;&amp;... args) {
   return make_unique_helper&lt;T&gt;(std::is_array&lt;T&gt;(), std::forward&lt;Args&gt;(args)...);
}
</code></pre>

<p>This can be seen on <a href=""http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/STLCCSeries6"">his Core C++ 6 video</a>.</p>

<p>An updated version of STL's version of make_unique is now available as <a href=""http://isocpp.org/files/papers/N3656.txt"">N3656</a>. This version <a href=""http://isocpp.org/blog/2013/04/n3656-make-unique-revision-1"">got adopted</a> into draft C++14.</p>
",tominator,Bruno De Fraine,1353585620,1366715369,1366715369
http://stackoverflow.com/a/13515807/99089,Executing SFTP/FTP command in libcurl without actual transfer,3326,elevener,AlexP11223,1353577233,1437149710,1437149710,https://stackoverflow.com/questions/13509709/executing-sftp-ftp-command-in-libcurl-without-actual-transfer,"<p><a href=""http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTNOBODY"" rel=""nofollow"">CURLOPT_NOBODY</a> is the key for asking that no ""body"" is to get transferred. </p>
",Daniel Stenberg,,1353597946,1353597946,0
http://stackoverflow.com/a/13556882/639619,Shim Twitter Bootstrap for RequireJS,29043,Johan Alkst&#229;l,,1352890166,1429161334,0,https://stackoverflow.com/questions/13377373/shim-twitter-bootstrap-for-requirejs,"<p>According to the docs that error is thrown if ""Script was part of a shim config that specified a global string property that can be checked for loading, and that check failed.""</p>

<p>To fix this you need to add exports value in the shim config so that RequireJS can check whether the script was succesfully loaded. In case of Bootstrap that's slightly tricky as Bootstrap doesn't 'export' a propert global variable only a bunch of jquery plugins, but you can use any of those plugins as an export value e.g. <code>$.fn.popover</code>:</p>

<pre><code>{
    paths: {
        ""bootstrap"": ""../bootstrap"",
        ""jquery"": ""../jquery-1.8.2""
    },
    shim: {
        ""bootstrap"": {
          deps: [""jquery""],
          exports: ""$.fn.popover""
        }
    },
    enforceDefine: true
}
</code></pre>
",Karolis,,1353887463,1353887463,0
http://stackoverflow.com/a/13563946/504611,Multiline EditText with Done SoftInput Action Label on 2.3,36687,ohhorob,,1297845534,1510030181,0,https://stackoverflow.com/questions/5014219/multiline-edittext-with-done-softinput-action-label-on-2-3,"<p>An alternative solution to subclassing the EditText class is to configure your EditText instance with this:</p>

<pre><code>editText.setHorizontallyScrolling(false);
editText.setMaxLines(Integer.MAX_VALUE);
</code></pre>

<p>At least, this works for me on Android 4.0. It configures the EditText instance so that the user edits a single-line string that is displayed with soft-wrapping on multiple lines, even if an IME action is set.</p>
",Futzilogik,,1353929515,1353929515,0
http://stackoverflow.com/a/13592567/1759443,Parse a URI String into Name-Value Collection,262818,Sergey Shafiev,T J,1354047118,1561713459,1540998864,https://stackoverflow.com/questions/13592236/parse-a-uri-string-into-name-value-collection,"<p>If you are looking for a way to achieve it without using an external library, the following code will help you.</p>

<pre><code>public static Map&lt;String, String&gt; splitQuery(URL url) throws UnsupportedEncodingException {
    Map&lt;String, String&gt; query_pairs = new LinkedHashMap&lt;String, String&gt;();
    String query = url.getQuery();
    String[] pairs = query.split(""&amp;"");
    for (String pair : pairs) {
        int idx = pair.indexOf(""="");
        query_pairs.put(URLDecoder.decode(pair.substring(0, idx), ""UTF-8""), URLDecoder.decode(pair.substring(idx + 1), ""UTF-8""));
    }
    return query_pairs;
}
</code></pre>

<p>You can access the returned Map using <code>&lt;map&gt;.get(""client_id"")</code>, with the URL given in your question this would return ""SS"".</p>

<p><strong>UPDATE</strong>  URL-Decoding added</p>

<p><strong>UPDATE</strong> As this answer is still quite popular, I made an improved version of the method above, which handles multiple parameters with the same key and parameters with no value as well.</p>

<pre><code>public static Map&lt;String, List&lt;String&gt;&gt; splitQuery(URL url) throws UnsupportedEncodingException {
  final Map&lt;String, List&lt;String&gt;&gt; query_pairs = new LinkedHashMap&lt;String, List&lt;String&gt;&gt;();
  final String[] pairs = url.getQuery().split(""&amp;"");
  for (String pair : pairs) {
    final int idx = pair.indexOf(""="");
    final String key = idx &gt; 0 ? URLDecoder.decode(pair.substring(0, idx), ""UTF-8"") : pair;
    if (!query_pairs.containsKey(key)) {
      query_pairs.put(key, new LinkedList&lt;String&gt;());
    }
    final String value = idx &gt; 0 &amp;&amp; pair.length() &gt; idx + 1 ? URLDecoder.decode(pair.substring(idx + 1), ""UTF-8"") : null;
    query_pairs.get(key).add(value);
  }
  return query_pairs;
}
</code></pre>

<p><strong>UPDATE</strong> Java8 version</p>

<pre><code>public Map&lt;String, List&lt;String&gt;&gt; splitQuery(URL url) {
    if (Strings.isNullOrEmpty(url.getQuery())) {
        return Collections.emptyMap();
    }
    return Arrays.stream(url.getQuery().split(""&amp;""))
            .map(this::splitQueryParameter)
            .collect(Collectors.groupingBy(SimpleImmutableEntry::getKey, LinkedHashMap::new, mapping(Map.Entry::getValue, toList())));
}

public SimpleImmutableEntry&lt;String, String&gt; splitQueryParameter(String it) {
    final int idx = it.indexOf(""="");
    final String key = idx &gt; 0 ? it.substring(0, idx) : it;
    final String value = idx &gt; 0 &amp;&amp; it.length() &gt; idx + 1 ? it.substring(idx + 1) : null;
    return new SimpleImmutableEntry&lt;&gt;(key, value);
}
</code></pre>

<p>Running the above method with the URL </p>

<p><code>https://stackoverflow.com?param1=value1&amp;param2=&amp;param3=value3&amp;param3</code></p>

<p>returns this Map:</p>

<pre><code>{param1=[""value1""], param2=[null], param3=[""value3"", null]}
</code></pre>
",Pr0gr4mm3r,Stephan,1354048522,1497602335,1497602335
http://stackoverflow.com/a/13594408/2097055,Mongodb: Perform a Date range query from the ObjectId in the mongo shell,9614,sc28,JohnnyHK,1354053539,1556841813,1354054616,https://stackoverflow.com/questions/13593896/mongodb-perform-a-date-range-query-from-the-objectid-in-the-mongo-shell,"<p>You can do that in 2 steps:</p>

<pre><code> var objIdMin = ObjectId(Math.floor((new Date('1990/10/10'))/1000).toString(16) + ""000
0000000000000"")
 var objIdMax = ObjectId(Math.floor((new Date('2011/10/22'))/1000).toString(16) + ""000
    0000000000000"")
 db.myCollection.find({_id:{$gt: objIdMin, $lt: objIdMax}})
</code></pre>

<p>or in one step (what is less readable):</p>

<pre><code>db.myCollection.find({_id:{$gt: ObjectId(Math.floor((new Date('1990/10/10'))/1000).toString(16) + ""000
    0000000000000""), $lt: ObjectId(Math.floor((new Date('2011/10/10'))/1000).toString(16) + ""000
    0000000000000"")}})
</code></pre>
",Kath,Skarlinski,1354055629,1505130628,1505130628
http://stackoverflow.com/a/13605607/3223422,Fastest way to get sorted unique list in python?,23244,jdm,Community,1354098964,1534873121,1495535474,https://stackoverflow.com/questions/13603042/fastest-way-to-get-sorted-unique-list-in-python,"<p>I believe <code>sorted(set(sequence))</code> is the fastest way of doing it.
Yes, <code>set</code> iterates over the sequence but that's a C-level loop, which is <strong>a lot</strong> faster than any looping you would do at python level.</p>

<p>Note that even with <code>groupby</code> you still have <code>O(n) + O(nlogn) = O(nlogn)</code> and what's worst is that <code>groupby</code> will require a python-level loop, which increases dramatically the constants in that <code>O(n)</code> thus in the end you obtain worst results.</p>

<p>When speaking of CPython the way to optimize things is to do as much as you can at C-level (see <a href=""https://stackoverflow.com/questions/12840451/python-string-comparison-pointing-to-the-result/12843154#12843154"">this</a> answer to have an other example of counter-intuitive performance). To have a faster solution you must reimplement a sort, in a C-extensions. And even then, good luck with obtaining something as fast as python's Timsort!</p>

<p>A small comparison of the ""canonical solution"" versus the <code>groupby</code> solution:</p>

<pre><code>&gt;&gt;&gt; import timeit
&gt;&gt;&gt; sequence = list(range(500)) + list(range(700)) + list(range(1000))
&gt;&gt;&gt; timeit.timeit('sorted(set(sequence))', 'from __main__ import sequence', number=1000)
0.11532402038574219
&gt;&gt;&gt; import itertools
&gt;&gt;&gt; def my_sort(seq):
...     return list(k for k,_ in itertools.groupby(sorted(seq)))
... 
&gt;&gt;&gt; timeit.timeit('my_sort(sequence)', 'from __main__ import sequence, my_sort', number=1000)
0.3162040710449219
</code></pre>

<p>As you can see it's <em>3 times slower</em>.</p>

<p>The version provided by jdm is actually even worse:</p>

<pre><code>&gt;&gt;&gt; def make_unique(lst):
...     if len(lst) &lt;= 1:
...         return lst
...     last = lst[-1]
...     for i in range(len(lst) - 2, -1, -1):
...         item = lst[i]
...         if item == last:
...             del lst[i]
...         else:
...             last = item
... 
&gt;&gt;&gt; def my_sort2(seq):
...     make_unique(sorted(seq))
... 
&gt;&gt;&gt; timeit.timeit('my_sort2(sequence)', 'from __main__ import sequence, my_sort2', number=1000)
0.46814608573913574
</code></pre>

<p>Almost 5 times slower.
Note that using <code>seq.sort()</code> and then <code>make_unique(seq)</code> and <code>make_unique(sorted(seq))</code> are actually the same thing, since Timsort uses <code>O(n)</code> space you always have some reallocation, so using <code>sorted(seq)</code> does not actually change much the timings.</p>

<p>The jdm's benchmarks give different results because the input he is using are way too small and thus all the time is taken by the <code>time.clock()</code> calls.</p>
",Bakuriu,Community,1354107481,1427612371,1495542869
http://stackoverflow.com/a/13609888/1060339,How to check the TEMPLATE_DEBUG flag in a django template?,27194,luc,luc,1250166306,1540418163,1260164977,https://stackoverflow.com/questions/1271631/how-to-check-the-template-debug-flag-in-a-django-template,"<p>If modifying <code>INTERNAL_IPS</code> is not possible/suitable, you can do this with a context processor:</p>

<p>in <code>myapp/context_processors.py</code>:</p>

<pre><code>from django.conf import settings

def debug(context):
  return {'DEBUG': settings.DEBUG}
</code></pre>

<p>in <code>settings.py</code>:</p>

<pre><code>TEMPLATE_CONTEXT_PROCESSORS = (
    ...
    'myapp.context_processors.debug',
)
</code></pre>

<p>Then in my templates, simply:</p>

<pre><code> {% if DEBUG %} .header { background:#f00; } {% endif %}
</code></pre>
",fredley,fredley,1354120360,1423218405,1423218405
http://stackoverflow.com/a/13650579/2285811,Normalizing mousewheel speed across browsers,63175,Phrogz,Community,1301805377,1520168818,1495542881,https://stackoverflow.com/questions/5527601/normalizing-mousewheel-speed-across-browsers,"<p>Here is my crazy attempt to produce a cross browser coherent and normalized delta ( -1 &lt;= delta &lt;= 1 ) :</p>

<pre><code>var o = e.originalEvent,
    d = o.detail, w = o.wheelDelta,
    n = 225, n1 = n-1;

// Normalize delta
d = d ? w &amp;&amp; (f = w/d) ? d/f : -d/1.35 : w/120;
// Quadratic scale if |d| &gt; 1
d = d &lt; 1 ? d &lt; -1 ? (-Math.pow(d, 2) - n1) / n : d : (Math.pow(d, 2) + n1) / n;
// Delta *should* not be greater than 2...
e.delta = Math.min(Math.max(d / 2, -1), 1);
</code></pre>

<p>This is totally empirical but works quite good on Safari 6, FF 16, Opera 12 (OS X) and IE 7 on XP</p>
",smrtl,,1354298319,1354298319,0
http://stackoverflow.com/a/13652152/1068746,How to &#39;unwatch&#39; an expression,41614,Roy Truelove,,1354302746,1456164470,0,https://stackoverflow.com/questions/13651578/how-to-unwatch-an-expression,"<p><strong>To have a repeater with a large array that you don't watch to watch every item.</strong></p>

<p>You'll need to create a custom directive that takes one argument, and expression to your array, then in the linking function you'd just watch that array, and you'd have the linking function programmatically refresh the HTML (rather than using an ng-repeat)</p>

<p>something like (psuedo-code):</p>

<pre><code>app.directive('leanRepeat', function() {
    return {
        restrict: 'E',
        scope: {
           'data' : '='
        },
        link: function(scope, elem, attr) {
           scope.$watch('data', function(value) {
              elem.empty(); //assuming jquery here.
              angular.forEach(scope.data, function(d) {
                  //write it however you're going to write it out here.
                  elem.append('&lt;div&gt;' + d + '&lt;/div&gt;');
              });
           });
        }
    };
});
</code></pre>

<p>... which seems like a pain in the butt.</p>

<p><strong>Alternate hackish method</strong></p>

<p>You might be able to loop through <code>$scope.$$watchers</code> and examine <code>$scope.$$watchers[0].exp.exp</code> to see if it matches the expression you'd like to remove, then remove it with a simple <code>splice()</code> call. The PITA here, is that things like <code>Blah {{whatever}} Blah</code> between tags will be the expression, and will even include carriage returns.</p>

<p>On the upside, you might be able to just loop through the $scope of your ng-repeat and just remove everything, then explicitly add the watch you want... I dunno.</p>

<p>Either way, it seems like a hack.</p>

<p><strong>To remove a watcher made by $scope.$watch</strong></p>

<p>You can unregister a <code>$watch</code> with the function returned by the <code>$watch</code> call:</p>

<p>For example, to have a <code>$watch</code> only fire once:</p>

<pre><code>var unregister = $scope.$watch('whatever', function(){ 
     alert('once!');
     unregister();
});
</code></pre>

<p>You can, of course call the unregister function any time you want... that was just an example.</p>

<p><strong>Conclusion: There isn't really a great way to do exactly what you're asking</strong></p>

<p>But one thing to consider: Is it even worth worrying about? Furthermore is it truly a good idea to have thousands of records loaded into dozens of DOMElements each? Food for thought.</p>

<p>I hope that helps.</p>

<hr>

<p><strong>EDIT 2 (removed bad idea)</strong> </p>
",Ben Lesh,Ben Lesh,1354305181,1354578893,1354578893
http://stackoverflow.com/a/1365284/1162888,"On localhost, how do I pick a free port number?",95244,Anton L.,jeteon,1251850034,1548334881,1510221872,https://stackoverflow.com/questions/1365265/on-localhost-how-do-i-pick-a-free-port-number,"<p>Do not bind to a specific port, or bind to port 0, e.g. <code>sock.bind(('', 0))</code>.  The OS will then pick an available port for you.  You can get the port that was chosen using <code>sock.getsockname()[1]</code>, and pass it on to the slaves so that they can connect back.</p>
",mark4o,mark4o,1251850454,1251851499,1251851499
http://stackoverflow.com/a/13653180/800016,How to test valid UUID/GUID?,115506,Marek Sebera,Nadeem_MK,1319647249,1553534810,1384754790,https://stackoverflow.com/questions/7905929/how-to-test-valid-uuid-guid,"<p>Currently, UUID's are as specified in RFC4122.</p>

<p>Therefore to validate a UUID...</p>

<pre><code>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i
</code></pre>

<p>...ensures you have a canonically formatted UUID that is Version 1 through 5 and is the appropriate Variant as per RFC4122.</p>

<p>NOTE: Braces <code>{</code> and <code>}</code> are not canonical. They are an artifact of some systems and usages.</p>

<p>Easy to modify the above regex to meet the requirements of the original question.</p>

<p>HINT: regex group/captures</p>
",Gambol,Eric Martin,1354309592,1529343705,1529343705
http://stackoverflow.com/a/13653312/315168,Get fully qualified class name of an object in Python,64679,Hanno S.,Peter Mortensen,1262865028,1558434520,1466701608,https://stackoverflow.com/questions/2020014/get-fully-qualified-class-name-of-an-object-in-python,"<p>Here's one based on Greg Bacon's excellent answer, but with a couple of extra checks:</p>

<p><code>__module__</code> can be <code>None</code> (according to the docs), and also for a type like <code>str</code> it can be <code>__builtin__</code> (which you might not want appearing in logs or whatever).  The following checks for both those possibilities:</p>

<pre><code>def fullname(o):
    module = o.__class__.__module__
    if module is None or module == str.__class__.__module__:
        return o.__class__.__name__
    return module + '.' + o.__class__.__name__
</code></pre>

<p>(There might be a better way to check for <code>__builtin__</code>.  The above just relies on the fact that str is always available, and its module is always <code>__builtin__</code>)</p>
",MB.,,1354310263,1354310263,0
http://stackoverflow.com/a/1366113/837709,What&#39;s the complete range for Chinese characters in Unicode?,83947,omg,Makoto,1251872008,1560120336,1337546199,https://stackoverflow.com/questions/1366068/whats-the-complete-range-for-chinese-characters-in-unicode,"<p>May be you would find a complete list through the <a href=""http://www.unicode.org/faq/han_cjk.html"" rel=""nofollow noreferrer"">CJK Unicode FAQ</a> (which does include ""Chinese, Japanese, and Korean"" characters)</p>

<p>The ""<a href=""http://www.unicode.org/versions/Unicode5.0.0/ch12.pdf#G12159"" rel=""nofollow noreferrer"">East Asian Script</a>"" document does mention:</p>

<blockquote>
  <p>Blocks Containing Han Ideographs</p>
  
  <p>Han ideographic characters are found in five main blocks of the Unicode Standard, as
  shown in Table 12-2</p>
</blockquote>

<p>Table 12-2. Blocks Containing Han Ideographs</p>

<pre><code>Block                                   Range       Comment
CJK Unified Ideographs                  4E00-9FFF   Common
CJK Unified Ideographs Extension A      3400-4DBF   Rare
CJK Unified Ideographs Extension B      20000-2A6DF Rare, historic
CJK Unified Ideographs Extension C      2A7002B73F Rare, historic
CJK Unified Ideographs Extension D      2B7402B81F Uncommon, some in current use
CJK Unified Ideographs Extension E      2B8202CEAF Rare, historic
CJK Compatibility Ideographs            F900-FAFF   Duplicates, unifiable variants, corporate characters
CJK Compatibility Ideographs Supplement 2F800-2FA1F Unifiable variants
</code></pre>

<p>Note: the block ranges can evolve over time: latest is in <a href=""https://en.wikipedia.org/wiki/CJK_Unified_Ideographs"" rel=""nofollow noreferrer"">CJK Unified Ideographs</a>.</p>

<p>See also Wikipedia:</p>

<ul>
<li><a href=""https://en.wikipedia.org/wiki/CJK_Unified_Ideographs_Extension_A"" rel=""nofollow noreferrer"">CJK Unified Ideographs Extension A</a></li>
<li><a href=""https://en.wikipedia.org/wiki/CJK_Unified_Ideographs_Extension_B"" rel=""nofollow noreferrer"">CJK Unified Ideographs Extension B</a></li>
<li><a href=""https://en.wikipedia.org/wiki/CJK_Unified_Ideographs_Extension_C"" rel=""nofollow noreferrer"">CJK Unified Ideographs Extension C</a></li>
<li><a href=""https://en.wikipedia.org/wiki/CJK_Unified_Ideographs_Extension_D"" rel=""nofollow noreferrer"">CJK Unified Ideographs Extension D</a></li>
<li><a href=""https://en.wikipedia.org/wiki/CJK_Unified_Ideographs_Extension_E"" rel=""nofollow noreferrer"">CJK Unified Ideographs Extension E</a></li>
<li><a href=""https://en.wikipedia.org/wiki/CJK_Unified_Ideographs_Extension_F"" rel=""nofollow noreferrer"">CJK Unified Ideographs Extension F</a> (Unicode 10)</li>
</ul>
",VonC,devio,1251872866,1545468652,1545468652
http://stackoverflow.com/a/13692248/2088273,Save Bundle to SharedPreferences,23920,Dan,Dan,1354376008,1464563685,1354617052,https://stackoverflow.com/questions/13660889/save-bundle-to-sharedpreferences,"<p>I have now come up with my own solution to this problem, which is a semi-automatic means of saving Bundles to SharedPreferences. I say semi-automatic because, although saving the Bundle requires only one method, retrieving the data again and turning it back into a Bundle takes some work.</p>

<p>Here is the code to save the Bundle:</p>

<pre><code>SharedPreferences save = getSharedPreferences(SAVE, MODE_PRIVATE);
Editor ed = save.edit();
saveBundle(ed, """", gameState);

/**
 * Manually save a Bundle object to SharedPreferences.
 * @param ed
 * @param header
 * @param gameState
 */
private void saveBundle(Editor ed, String header, Bundle gameState) {
    Set&lt;String&gt; keySet = gameState.keySet();
    Iterator&lt;String&gt; it = keySet.iterator();

    while (it.hasNext()){
        key = it.next();
        o = gameState.get(key);
        if (o == null){
            ed.remove(header + key);
        } else if (o instanceof Integer){
            ed.putInt(header + key, (Integer) o);
        } else if (o instanceof Long){
            ed.putLong(header + key, (Long) o);
        } else if (o instanceof Boolean){
            ed.putBoolean(header + key, (Boolean) o);
        } else if (o instanceof CharSequence){
            ed.putString(header + key, ((CharSequence) o).toString());
        } else if (o instanceof Bundle){
            saveBundle(header + key, ((Bundle) o));
        }
    }

    ed.commit();
}
</code></pre>

<p>Note that I have only written cases for the types I needed, but this should be easily adaptable if you have Bundles that also include other types.</p>

<p>This method will recursively save other Bundle objects stored inside the given Bundle. However, it will not work for Parcelable objects, so I had to alter my Parcelable objects to make them store themselves into a Bundle instead. Since Parcels and Bundles are pretty similar, this wasn't too hard. I think Bundles may also be slightly slower than Parcels, unfortunately.</p>

<p>I then wrote constructors in all of my previously-Parcelable objects to enable them to re-Bundle themselves from the data stored SharedPreferences. It's easy enough to reconstruct the keys to the data you need. Say you have the following data structure:</p>

<pre><code>Bundle b {
    KEY_X -&gt; int x;
    KEY_Y -&gt; Bundle y {
                 KEY_Z -&gt; int z;
             }
}
</code></pre>

<p>These will be saved to SharedPreferences as follows:</p>

<pre><code>KEY_X -&gt; x
KEY_YKEY_Z -&gt; z
</code></pre>

<p>It may not be the prettiest method in the world, but it works, and it cost me much less code than the alternative, since now my onSaveInstanceState method and my onPause methods use the same technique.</p>
",Dan,Dan,1354570967,1398363492,1398363492
http://stackoverflow.com/a/13709431/292185,Detect 64-bit or 32-bit Windows from User Agent or Javascript?,60914,user9876,user9876,1258374949,1560827355,1259088809,https://stackoverflow.com/questions/1741933/detect-64-bit-or-32-bit-windows-from-user-agent-or-javascript,"<p>Analysing around <a href=""http://pastebin.com/csVFA72Y"">14000 unique user-agents</a> (<a href=""http://www.useragentstring.com/pages/useragentstring.php"">from here</a>), I've come up with the following strings to look for:</p>

<ul>
<li>x86_64</li>
<li>x86-64</li>
<li>Win64</li>
<li>x64; (Mind the semicolon! Without it you will have false-positives.)</li>
<li>amd64</li>
<li>AMD64</li>
<li>WOW64</li>
<li>x64_64</li>
</ul>

<p>Additionally, although they have different instruction sets and are not compatible with Intel x86_64, you may want to detect the following:</p>

<ul>
<li>ia64</li>
<li>sparc64</li>
<li>ppc64</li>
<li>IRIX64</li>
</ul>

<p>Beware though, don't just look for anything containing ""64"" or even ""x64"". Chrome's build numbers, spiders/bots, libraries, .NET versions, resolutions, etc. may also contain the string ""x64"" while still being a 32-bits (or other) OS.</p>

<p>Note that you can search for all those strings case-insensitively.</p>

<p>I have not been able to find anything on ARM. Perhaps someone else? Please edit, it is a community wiki.</p>
",Luc,Luc,1354645434,1429269666,1429269666
http://stackoverflow.com/a/13733588/179104,"PHP: How to generate a random, unique, alphanumeric string?",513772,Andrew,hakre,1259923740,1560037992,1334492106,https://stackoverflow.com/questions/1846202/php-how-to-generate-a-random-unique-alphanumeric-string,"<p>I was just looking into how to solve this same problem, but I also want my function to create a token that can be used for password retrieval as well. This means that I need to limit the ability of the token to be guessed. Because <a href=""http://php.net/uniqid"" rel=""noreferrer""><code>uniqid</code></a> is based on the time, and according to php.net ""the return value is little different from microtime()"", <code>uniqid</code> does not meet the criteria. PHP recommends using <code>openssl_random_pseudo_bytes()</code> instead to generate cryptographically secure tokens.</p>

<p>A quick, short and to the point answer is:</p>

<pre><code>bin2hex(openssl_random_pseudo_bytes($bytes))
</code></pre>

<p>which will generate a random string of alphanumeric characters of length = $bytes * 2. Unfortunately this only has an alphabet of <code>[a-f][0-9]</code>, but it works.
<hr>
Below is the strongest function I could make that satisfies the criteria (This is an implemented version of Erik's answer).</p>

<pre><code>function crypto_rand_secure($min, $max)
{
    $range = $max - $min;
    if ($range &lt; 1) return $min; // not so random...
    $log = ceil(log($range, 2));
    $bytes = (int) ($log / 8) + 1; // length in bytes
    $bits = (int) $log + 1; // length in bits
    $filter = (int) (1 &lt;&lt; $bits) - 1; // set all lower bits to 1
    do {
        $rnd = hexdec(bin2hex(openssl_random_pseudo_bytes($bytes)));
        $rnd = $rnd &amp; $filter; // discard irrelevant bits
    } while ($rnd &gt; $range);
    return $min + $rnd;
}

function getToken($length)
{
    $token = """";
    $codeAlphabet = ""ABCDEFGHIJKLMNOPQRSTUVWXYZ"";
    $codeAlphabet.= ""abcdefghijklmnopqrstuvwxyz"";
    $codeAlphabet.= ""0123456789"";
    $max = strlen($codeAlphabet); // edited

    for ($i=0; $i &lt; $length; $i++) {
        $token .= $codeAlphabet[crypto_rand_secure(0, $max-1)];
    }

    return $token;
}
</code></pre>

<p><code>crypto_rand_secure($min, $max)</code> works as a drop in replacement for <code>rand()</code> or <code>mt_rand</code>. It uses openssl_random_pseudo_bytes to help create a random number between $min and $max.</p>

<p><code>getToken($length)</code> creates an alphabet to use within the token and then creates a string of length <code>$length</code>.</p>

<p><b>EDIT:</b> I neglected to cite source - <a href=""http://us1.php.net/manual/en/function.openssl-random-pseudo-bytes.php#104322"" rel=""noreferrer"">http://us1.php.net/manual/en/function.openssl-random-pseudo-bytes.php#104322</a></p>

<p><b>EDIT (PHP7):</b> With the release of PHP7, the standard library now has two new functions that can replace/improve/simplify the crypto_rand_secure function above. <code>random_bytes($length)</code> and <code>random_int($min, $max)</code></p>

<p><a href=""http://php.net/manual/en/function.random-bytes.php"" rel=""noreferrer"">http://php.net/manual/en/function.random-bytes.php</a></p>

<p><a href=""http://php.net/manual/en/function.random-int.php"" rel=""noreferrer"">http://php.net/manual/en/function.random-int.php</a></p>

<p>Example:</p>

<pre><code>function getToken($length){
     $token = """";
     $codeAlphabet = ""ABCDEFGHIJKLMNOPQRSTUVWXYZ"";
     $codeAlphabet.= ""abcdefghijklmnopqrstuvwxyz"";
     $codeAlphabet.= ""0123456789"";
     $max = strlen($codeAlphabet); // edited

    for ($i=0; $i &lt; $length; $i++) {
        $token .= $codeAlphabet[random_int(0, $max-1)];
    }

    return $token;
}
</code></pre>
",Scott,Scott,1354746300,1498671057,1498671057
http://stackoverflow.com/a/13755911/5184480,C How to &quot;draw&quot; a Binary Tree to the console,75493,Marek Szanyi,SouvikMaji,1241000372,1475590036,1436442129,https://stackoverflow.com/questions/801740/c-how-to-draw-a-binary-tree-to-the-console,"<p>Code:</p>

<pre><code>int _print_t(tnode *tree, int is_left, int offset, int depth, char s[20][255])
{
    char b[20];
    int width = 5;

    if (!tree) return 0;

    sprintf(b, ""(%03d)"", tree-&gt;val);

    int left  = _print_t(tree-&gt;left,  1, offset,                depth + 1, s);
    int right = _print_t(tree-&gt;right, 0, offset + left + width, depth + 1, s);

#ifdef COMPACT
    for (int i = 0; i &lt; width; i++)
        s[depth][offset + left + i] = b[i];

    if (depth &amp;&amp; is_left) {

        for (int i = 0; i &lt; width + right; i++)
            s[depth - 1][offset + left + width/2 + i] = '-';

        s[depth - 1][offset + left + width/2] = '.';

    } else if (depth &amp;&amp; !is_left) {

        for (int i = 0; i &lt; left + width; i++)
            s[depth - 1][offset - width/2 + i] = '-';

        s[depth - 1][offset + left + width/2] = '.';
    }
#else
    for (int i = 0; i &lt; width; i++)
        s[2 * depth][offset + left + i] = b[i];

    if (depth &amp;&amp; is_left) {

        for (int i = 0; i &lt; width + right; i++)
            s[2 * depth - 1][offset + left + width/2 + i] = '-';

        s[2 * depth - 1][offset + left + width/2] = '+';
        s[2 * depth - 1][offset + left + width + right + width/2] = '+';

    } else if (depth &amp;&amp; !is_left) {

        for (int i = 0; i &lt; left + width; i++)
            s[2 * depth - 1][offset - width/2 + i] = '-';

        s[2 * depth - 1][offset + left + width/2] = '+';
        s[2 * depth - 1][offset - width/2 - 1] = '+';
    }
#endif

    return left + width + right;
}

void print_t(tnode *tree)
{
    char s[20][255];
    for (int i = 0; i &lt; 20; i++)
        sprintf(s[i], ""%80s"", "" "");

    _print_t(tree, 0, 0, 0, s);

    for (int i = 0; i &lt; 20; i++)
        printf(""%s\n"", s[i]);
}
</code></pre>

<p>Output:</p>

<pre><code>                           .----------------------(006)-------.                 
                      .--(001)-------.                   .--(008)--.            
                 .--(-02)       .--(003)-------.       (007)     (009)          
       .-------(-06)          (002)       .--(005)                              
  .--(-08)--.                           (004)                                   
(-09)     (-07)                     
</code></pre>

<p>or</p>

<pre><code>                                                  (006)                         
                           +------------------------+---------+                 
                         (001)                              (008)               
                      +----+---------+                   +----+----+            
                    (-02)          (003)               (007)     (009)          
                 +----+         +----+---------+                                
               (-06)          (002)          (005)                              
       +---------+                        +----+                                
     (-08)                              (004)                                   
  +----+----+                                                                   
(-09)     (-07)                                                       
</code></pre>
",user1571409,Ray Hulha,1354846318,1475590036,1475590036
http://stackoverflow.com/a/13756038/5244995,Format timedelta to string,230061,mawcs,martineau,1234384843,1561583799,1561583799,https://stackoverflow.com/questions/538666/format-timedelta-to-string,"<pre><code>def td_format(td_object):
    seconds = int(td_object.total_seconds())
    periods = [
        ('year',        60*60*24*365),
        ('month',       60*60*24*30),
        ('day',         60*60*24),
        ('hour',        60*60),
        ('minute',      60),
        ('second',      1)
    ]

    strings=[]
    for period_name, period_seconds in periods:
        if seconds &gt; period_seconds:
            period_value , seconds = divmod(seconds, period_seconds)
            has_s = 's' if period_value &gt; 1 else ''
            strings.append(""%s %s%s"" % (period_value, period_name, has_s))

    return "", "".join(strings)
</code></pre>
",Adam Jacob Muller,Jean-Francois T.,1354847093,1520052946,1520052946
http://stackoverflow.com/a/13790289/1314882,"Get last n lines of a file with Python, similar to tail",132596,Armin Ronacher,dbr,1222377071,1557892629,1257802788,https://stackoverflow.com/questions/136168/get-last-n-lines-of-a-file-with-python-similar-to-tail,"<p>Here is my answer. Pure python. Using timeit it seems pretty fast. Tailing 100 lines of a log file that has 100,000 lines:</p>

<pre><code>&gt;&gt;&gt; timeit.timeit('tail.tail(f, 100, 4098)', 'import tail; f = open(""log.txt"", ""r"");', number=10)
0.0014600753784179688
&gt;&gt;&gt; timeit.timeit('tail.tail(f, 100, 4098)', 'import tail; f = open(""log.txt"", ""r"");', number=100)
0.00899195671081543
&gt;&gt;&gt; timeit.timeit('tail.tail(f, 100, 4098)', 'import tail; f = open(""log.txt"", ""r"");', number=1000)
0.05842900276184082
&gt;&gt;&gt; timeit.timeit('tail.tail(f, 100, 4098)', 'import tail; f = open(""log.txt"", ""r"");', number=10000)
0.5394978523254395
&gt;&gt;&gt; timeit.timeit('tail.tail(f, 100, 4098)', 'import tail; f = open(""log.txt"", ""r"");', number=100000)
5.377126932144165
</code></pre>

<p>Here is the code:</p>

<pre><code>import os


def tail(f, lines=1, _buffer=4098):
    """"""Tail a file and get X lines from the end""""""
    # place holder for the lines found
    lines_found = []

    # block counter will be multiplied by buffer
    # to get the block size from the end
    block_counter = -1

    # loop until we find X lines
    while len(lines_found) &lt; lines:
        try:
            f.seek(block_counter * _buffer, os.SEEK_END)
        except IOError:  # either file is too small, or too many lines requested
            f.seek(0)
            lines_found = f.readlines()
            break

        lines_found = f.readlines()

        # we found enough lines, get out
        # Removed this line because it was redundant the while will catch
        # it, I left it for history
        # if len(lines_found) &gt; lines:
        #    break

        # decrement the block counter to get the
        # next X bytes
        block_counter -= 1

    return lines_found[-lines:]
</code></pre>
",glenbot,glenbot,1355077302,1507299631,1507299631
http://stackoverflow.com/a/13823184/2028814,Regular expression to remove comments from SQL statement,5794,Nuno Leong,casperOne,1331665746,1557648854,1331665894,https://stackoverflow.com/questions/9690448/regular-expression-to-remove-comments-from-sql-statement,"<p>In PHP, i'm using this code to uncomment SQL:</p>

<pre><code>$sqlComments = '@(([\'""]).*?[^\\\]\2)|((?:\#|--).*?$|/\*(?:[^/*]|/(?!\*)|\*(?!/)|(?R))*\*\/)\s*|(?&lt;=;)\s+@ms';
/* Commented version
$sqlComments = '@
    (([\'""]).*?[^\\\]\2) # $1 : Skip single &amp; double quoted expressions
    |(                   # $3 : Match comments
        (?:\#|--).*?$    # - Single line comments
        |                # - Multi line (nested) comments
         /\*             #   . comment open marker
            (?: [^/*]    #   . non comment-marker characters
                |/(?!\*) #   . ! not a comment open
                |\*(?!/) #   . ! not a comment close
                |(?R)    #   . recursive case
            )*           #   . repeat eventually
        \*\/             #   . comment close marker
    )\s*                 # Trim after comments
    |(?&lt;=;)\s+           # Trim after semi-colon
    @msx';
*/
$uncommentedSQL = trim( preg_replace( $sqlComments, '$1', $sql ) );
preg_match_all( $sqlComments, $sql, $comments );
$extractedComments = array_filter( $comments[ 3 ] );
var_dump( $uncommentedSQL, $extractedComments );
</code></pre>
",Adrien Gibrat,,1355240115,1355240115,0
http://stackoverflow.com/a/13826802/1048589,Playing HTML5 Video on IPad and seeking,8071,K2xL,,1340913971,1401896043,0,https://stackoverflow.com/questions/11252062/playing-html5-video-on-ipad-and-seeking,"<p>While this question is quite old the issue remains open. I discovered a solution that works on multiple tested iPads (1+2+3) for iOS 5 and 6 (iOS3+4 not tested):</p>

<p>Basically you first have to wait for the initial <code>playing</code> event, then add a one-time binder for <code>canplaythrough</code> and then for <code>progress</code> - only then can you actually change the the <code>currentTime</code> value. Any tries before that will fail!</p>

<p>The video has to start playing at first, which makes a black layer on top of the video element kinda handy. Unfortunately, sounds within the video canNOT be deactivated via JavaScript --> not a perfect UX</p>

<pre><code>// https://github.com/JoernBerkefeld/iOSvideoSeekOnLoad / MIT License 
// requires jQuery 1.8+
// seekToInitially (float) : video-time in seconds
function loadingSeek(seekToInitially, callback) {
    if(""undefined""==typeof callback) {
        callback = function() {};
    }
    var video = $(""video""),
        video0 = video[0],
        isiOS = navigator.userAgent.match(/(iPad|iPhone|iPod)/) !== null,
        test;
    if(isiOS) { // get the iOS Version
        test =navigator.userAgent.match(""OS ([0-9]{1})_([0-9]{1})"");
        // you could add a loading spinner and a black layer onPlay HERE to hide the video as it starts at 0:00 before seeking
        // don't add it before or ppl will not click on the play button, thinking the player still needs to load
    }
    video.one(""playing"",function() { 
        if(seekToInitially &gt; 0) {
            //log(""seekToInitially: ""+seekToInitially);
            if(isiOS) {
                // iOS devices fire an error if currentTime is set before the video started playing
                // this will only set the time on the first timeupdate after canplaythrough... everything else fails
                video.one(""canplaythrough"",function() { 
                    video.one(""progress"",function() { 
                        video0.currentTime = seekToInitially;
                        video.one(""seeked"",function() {
                            // hide the loading spinner and the black layer HERE if you added one before

                            // optionally execute a callback function once seeking is done
                            callback();
                        });
                    });
                });
            } else {
                // seek directly after play was executed for all other devices
                video0.currentTime = seekToInitially; 

                // optionally execute a callback function once seeking is done
                callback();
            }
        } else {
            // seek not necessary

            // optionally execute a callback function once seeking is done
            callback();
        }
    });
}
</code></pre>

<p>the whole thing can be downloaded from <a href=""https://github.com/JoernBerkefeld/iOSvideoSeekOnLoad/"" rel=""nofollow"" title=""my GitHub repo"">my GitHub repo</a></p>
",Jrn Berkefeld,Jrn Berkefeld,1355252790,1355254055,1355254055
http://stackoverflow.com/a/1383402/118495,Using property() on classmethods,66372,Mark Roddy,Aaron Hall,1222277831,1555099961,1491845181,https://stackoverflow.com/questions/128573/using-property-on-classmethods,"<p>Reading the <a href=""http://www.python.org/download/releases/2.2/descrintro/#property"" rel=""nofollow noreferrer"">Python 2.2 release</a> notes, I find the following.</p>

<blockquote>
  <p>The get method [of a property] won't be called when
  the property is accessed as a class
  attribute (C.x) instead of as an
  instance attribute (C().x). If you
  want to override the __get__ operation
  for properties when used as a class
  attribute, you can subclass property -
  it is a new-style type itself - to
  extend its __get__ method, or you can
  define a descriptor type from scratch
  by creating a new-style class that
  defines __get__, __set__ and
  __delete__ methods.</p>
</blockquote>

<p><strong>NOTE: The below method doesn't actually work for setters, only getters.</strong></p>

<p>Therefore, I believe the prescribed solution is to create a ClassProperty as a subclass of property.</p>

<pre><code>class ClassProperty(property):
    def __get__(self, cls, owner):
        return self.fget.__get__(None, owner)()

class foo(object):
    _var=5
    def getvar(cls):
        return cls._var
    getvar=classmethod(getvar)
    def setvar(cls,value):
        cls._var=value
    setvar=classmethod(setvar)
    var=ClassProperty(getvar,setvar)

assert foo.getvar() == 5
foo.setvar(4)
assert foo.getvar() == 4
assert foo.var == 4
foo.var = 3
assert foo.var == 3
</code></pre>

<p>However, the setters don't actually work:</p>

<pre><code>foo.var = 4
assert foo.var == foo._var # raises AssertionError
</code></pre>

<p><code>foo._var</code> is unchanged, you've simply overwritten the property with a new value.</p>

<p>You can also use <code>ClassProperty</code> as a decorator:</p>

<pre><code>class foo(object):
    _var = 5

    @ClassProperty
    @classmethod
    def var(cls):
        return cls._var

    @var.setter
    @classmethod
    def var(cls, value):
        cls._var = value

assert foo.var == 5
</code></pre>
",Jason R. Coombs,Jason R. Coombs,1252159934,1519671644,1519671644
http://stackoverflow.com/a/1383501/227779,Is my spin lock implementation correct and optimal?,40446,Hongli,Kim Gr&#228;sman,1252158352,1406281070,1252161663,https://stackoverflow.com/questions/1383363/is-my-spin-lock-implementation-correct-and-optimal,"<p>Looks fine to me.  Btw, here is the <a href=""https://rads.stackoverflow.com/amzn/click/com/0131019082"" rel=""noreferrer"" rel=""nofollow noreferrer"">textbook</a> implementation that is more efficient even in the contended case.</p>

<pre><code>void lock(volatile int *exclusion)
{
    while (__sync_lock_test_and_set(exclusion, 1))
        while (*exclusion)
            ;
}
</code></pre>
",sigjuice,,1252162223,1252162223,0
http://stackoverflow.com/a/13842223/250962,"Django: When saving, how can you check if a field has changed?",130764,Paul Tarjan,Paul Tarjan,1251672987,1549288187,1251675809,https://stackoverflow.com/questions/1355150/django-when-saving-how-can-you-check-if-a-field-has-changed,"<p>I use following mixin:</p>

<pre><code>from django.forms.models import model_to_dict


class ModelDiffMixin(object):
    """"""
    A model mixin that tracks model fields' values and provide some useful api
    to know what fields have been changed.
    """"""

    def __init__(self, *args, **kwargs):
        super(ModelDiffMixin, self).__init__(*args, **kwargs)
        self.__initial = self._dict

    @property
    def diff(self):
        d1 = self.__initial
        d2 = self._dict
        diffs = [(k, (v, d2[k])) for k, v in d1.items() if v != d2[k]]
        return dict(diffs)

    @property
    def has_changed(self):
        return bool(self.diff)

    @property
    def changed_fields(self):
        return self.diff.keys()

    def get_field_diff(self, field_name):
        """"""
        Returns a diff for field if it's changed and None otherwise.
        """"""
        return self.diff.get(field_name, None)

    def save(self, *args, **kwargs):
        """"""
        Saves model and set initial state.
        """"""
        super(ModelDiffMixin, self).save(*args, **kwargs)
        self.__initial = self._dict

    @property
    def _dict(self):
        return model_to_dict(self, fields=[field.name for field in
                             self._meta.fields])
</code></pre>

<p>Usage:</p>

<pre><code>&gt;&gt;&gt; p = Place()
&gt;&gt;&gt; p.has_changed
False
&gt;&gt;&gt; p.changed_fields
[]
&gt;&gt;&gt; p.rank = 42
&gt;&gt;&gt; p.has_changed
True
&gt;&gt;&gt; p.changed_fields
['rank']
&gt;&gt;&gt; p.diff
{'rank': (0, 42)}
&gt;&gt;&gt; p.categories = [1, 3, 5]
&gt;&gt;&gt; p.diff
{'categories': (None, [1, 3, 5]), 'rank': (0, 42)}
&gt;&gt;&gt; p.get_field_diff('categories')
(None, [1, 3, 5])
&gt;&gt;&gt; p.get_field_diff('rank')
(0, 42)
&gt;&gt;&gt;
</code></pre>

<hr>

<h2>Note</h2>

<p>Please note that this solution works well in context of current request only. Thus it's suitable primarily for simple cases. In concurrent environment where multiple requests can manipulate the same model instance at the same time, you definitely need a different approach.</p>
",iperelivskiy,iperelivskiy,1355323673,1447735063,1447735063
http://stackoverflow.com/a/13867690/608639,Does static constexpr variable make sense?,65412,David Stone,David Stone,1355422119,1536406619,1355422506,https://stackoverflow.com/questions/13865842/does-static-constexpr-variable-make-sense,"<p>The short answer is that not only is <code>static</code> useful, it is pretty well always going to be desired.</p>

<p>First, note that <code>static</code> and <code>constexpr</code> are completely independent of each other. <code>static</code> defines the object's lifetime during execution; <code>constexpr</code> specifies that the object should be available during compilation. Compilation and execution are disjoint and discontiguous, both in time and space. So once the program is compiled, <code>constexpr</code> is no longer relevant.</p>

<p>Every variable declared <code>constexpr</code> is implicitly <code>const</code> but <code>const</code> and <code>static</code> are almost orthogonal (except for the interaction with <code>static const</code> integers.)</p>

<p>The <code>C++</code> object model (&sect;1.9) requires that all objects other than bit-fields occupy at least one byte of memory and have addresses; furthermore all such objects observable in a program at a given moment must have distinct addresses (paragraph 6). This does not quite require the compiler to create a new array on the stack for every invocation of a function with a local non-static const array, because the compiler could take refuge in the <code>as-if</code> principle provided it can prove that no other such object can be observed.</p>

<p>That's not going to be easy to prove, unfortunately, unless the function is trivial (for example, it does not call any other function whose body is not visible within the translation unit) because arrays, more or less by definition, are addresses. So in most cases, the non-static <code>const(expr)</code> array will have to be recreated on the stack at every invocation, which defeats the point of being able to compute it at compile time.</p>

<p>On the other hand, a local <code>static const</code> object is shared by all observers, and furthermore may be initialized even if the function it is defined in is never called. So none of the above applies, and a compiler is free not only to generate only a single instance of it; it is free to generate a single instance of it in read-only storage.</p>

<p>So you should definitely use <code>static constexpr</code> in your example.</p>

<p>However, there is one case where you wouldn't want to use <code>static constexpr</code>. Unless a <code>constexpr</code> declared object is either <a href=""https://en.cppreference.com/w/cpp/language/definition#ODR-use"" rel=""noreferrer"">ODR-used</a> or declared <code>static</code>, the compiler is free to not include it at all. That's pretty useful, because it allows the use of compile-time temporary <code>constexpr</code> arrays without polluting the compiled program with unnecessary bytes. In that case, you would clearly not want to use <code>static</code>, since <code>static</code> is likely to force the object to exist at runtime.</p>
",rici,user5534993,1355429535,1536406619,1536406619
http://stackoverflow.com/a/13911048/1659732,Progress of Python requests post,14941,Robin Begbie,Martijn Pieters,1355728878,1489294885,1355729330,https://stackoverflow.com/questions/13909900/progress-of-python-requests-post,"<p><code>requests</code> <a href=""https://github.com/kennethreitz/requests/issues/295"" rel=""nofollow noreferrer"">doesn't support</a> <a href=""https://github.com/kennethreitz/requests/issues/952"" rel=""nofollow noreferrer"">upload</a> <a href=""https://github.com/shazow/urllib3/issues/51"" rel=""nofollow noreferrer"">streaming</a> e.g.:</p>

<pre><code>import os
import sys
import requests  # pip install requests

class upload_in_chunks(object):
    def __init__(self, filename, chunksize=1 &lt;&lt; 13):
        self.filename = filename
        self.chunksize = chunksize
        self.totalsize = os.path.getsize(filename)
        self.readsofar = 0

    def __iter__(self):
        with open(self.filename, 'rb') as file:
            while True:
                data = file.read(self.chunksize)
                if not data:
                    sys.stderr.write(""\n"")
                    break
                self.readsofar += len(data)
                percent = self.readsofar * 1e2 / self.totalsize
                sys.stderr.write(""\r{percent:3.0f}%"".format(percent=percent))
                yield data

    def __len__(self):
        return self.totalsize

# XXX fails
r = requests.post(""http://httpbin.org/post"",
                  data=upload_in_chunks(__file__, chunksize=10))
</code></pre>

<p><sup>btw, if you don't need to report progress; <a href=""https://stackoverflow.com/questions/2502596/python-http-post-a-large-file-with-streaming"">you could use memory-mapped file to upload large file</a>.</sup></p>

<p>To workaround it, you could create a file adaptor similar to the one from
<a href=""https://stackoverflow.com/questions/5925028/urllib2-post-progress-monitoring"">urllib2 POST progress monitoring</a>:</p>

<pre><code>class IterableToFileAdapter(object):
    def __init__(self, iterable):
        self.iterator = iter(iterable)
        self.length = len(iterable)

    def read(self, size=-1): # TBD: add buffer for `len(data) &gt; size` case
        return next(self.iterator, b'')

    def __len__(self):
        return self.length
</code></pre>

<h3>Example</h3>

<pre><code>it = upload_in_chunks(__file__, 10)
r = requests.post(""http://httpbin.org/post"", data=IterableToFileAdapter(it))

# pretty print
import json
json.dump(r.json, sys.stdout, indent=4, ensure_ascii=False)
</code></pre>
",jfs,Community,1355734874,1355735211,1495535408
http://stackoverflow.com/a/13952198/284318,How can I use Django permissions without defining a content type or model?,17686,Chewie,,1355832878,1547271056,0,https://stackoverflow.com/questions/13932774/how-can-i-use-django-permissions-without-defining-a-content-type-or-model,"<p>Following <a href=""https://stackoverflow.com/a/13933002/486362"">Gonzalo's advice</a>, I used a <a href=""https://docs.djangoproject.com/en/1.5/topics/db/models/#proxy-models"" rel=""noreferrer"">proxy model</a> and a <a href=""https://docs.djangoproject.com/en/1.5/topics/db/managers/#custom-managers"" rel=""noreferrer"">custom manager</a> to handle my ""modelless"" permissions with a dummy content type.</p>

<pre><code>from django.db import models
from django.contrib.auth.models import Permission
from django.contrib.contenttypes.models import ContentType


class GlobalPermissionManager(models.Manager):
    def get_query_set(self):
        return super(GlobalPermissionManager, self).\
            get_query_set().filter(content_type__name='global_permission')


class GlobalPermission(Permission):
    """"""A global permission, not attached to a model""""""

    objects = GlobalPermissionManager()

    class Meta:
        proxy = True

    def save(self, *args, **kwargs):
        ct, created = ContentType.objects.get_or_create(
            name=""global_permission"", app_label=self._meta.app_label
        )
        self.content_type = ct
        super(GlobalPermission, self).save(*args, **kwargs)
</code></pre>
",Chewie,Community,1355918945,1355918945,1495541910
http://stackoverflow.com/a/13952198/3818777,How can I use Django permissions without defining a content type or model?,17686,Chewie,,1355832878,1547271056,0,https://stackoverflow.com/questions/13932774/how-can-i-use-django-permissions-without-defining-a-content-type-or-model,"<p>Following <a href=""https://stackoverflow.com/a/13933002/486362"">Gonzalo's advice</a>, I used a <a href=""https://docs.djangoproject.com/en/1.5/topics/db/models/#proxy-models"" rel=""noreferrer"">proxy model</a> and a <a href=""https://docs.djangoproject.com/en/1.5/topics/db/managers/#custom-managers"" rel=""noreferrer"">custom manager</a> to handle my ""modelless"" permissions with a dummy content type.</p>

<pre><code>from django.db import models
from django.contrib.auth.models import Permission
from django.contrib.contenttypes.models import ContentType


class GlobalPermissionManager(models.Manager):
    def get_query_set(self):
        return super(GlobalPermissionManager, self).\
            get_query_set().filter(content_type__name='global_permission')


class GlobalPermission(Permission):
    """"""A global permission, not attached to a model""""""

    objects = GlobalPermissionManager()

    class Meta:
        proxy = True

    def save(self, *args, **kwargs):
        ct, created = ContentType.objects.get_or_create(
            name=""global_permission"", app_label=self._meta.app_label
        )
        self.content_type = ct
        super(GlobalPermission, self).save(*args, **kwargs)
</code></pre>
",Chewie,Community,1355918945,1355918945,1495541910
http://stackoverflow.com/a/13959585/3035127,Android dialoginterface get inner dialog views,38652,user1220817,,1332164301,1556832032,0,https://stackoverflow.com/questions/9771228/android-dialoginterface-get-inner-dialog-views,"<p>This way runs perfect in my code:  </p>

<pre><code>public void onClick(DialogInterface dialog, int which) {

   Dialog dialog2 =Dialog.class.cast(dialog);
   EditText edit = (EditText) dialog2.findViewById(R.id.myedittext);

}
</code></pre>

<p>cheers</p>
",user23,,1355944826,1355944826,0
http://stackoverflow.com/a/1399432/141245,java.util.zip - Recreating directory structure,55579,Eric,Eric,1252495899,1536079057,1401865466,https://stackoverflow.com/questions/1399126/java-util-zip-recreating-directory-structure,"<p>The <a href=""http://java.sun.com/javase/6/docs/api/java/net/URI.html"" rel=""noreferrer"">URI</a> class is useful for working with relative paths.</p>

<pre><code>File mydir = new File(""C:\\mydir"");
File myfile = new File(""C:\\mydir\\path\\myfile.txt"");
System.out.println(mydir.toURI().relativize(myfile.toURI()).getPath());
</code></pre>

<p>The above code will emit the string <code>path/myfile.txt</code>.</p>

<p>For completeness, here is a <code>zip</code> method for archiving a directory:</p>

<pre><code>  public static void zip(File directory, File zipfile) throws IOException {
    URI base = directory.toURI();
    Deque&lt;File&gt; queue = new LinkedList&lt;File&gt;();
    queue.push(directory);
    OutputStream out = new FileOutputStream(zipfile);
    Closeable res = out;
    try {
      ZipOutputStream zout = new ZipOutputStream(out);
      res = zout;
      while (!queue.isEmpty()) {
        directory = queue.pop();
        for (File kid : directory.listFiles()) {
          String name = base.relativize(kid.toURI()).getPath();
          if (kid.isDirectory()) {
            queue.push(kid);
            name = name.endsWith(""/"") ? name : name + ""/"";
            zout.putNextEntry(new ZipEntry(name));
          } else {
            zout.putNextEntry(new ZipEntry(name));
            copy(kid, zout);
            zout.closeEntry();
          }
        }
      }
    } finally {
      res.close();
    }
  }
</code></pre>

<p>This code makes doesn't preserve dates and I'm not sure how it would react to stuff like symlinks. No attempt is made to add directory entries, so empty directories would not be included.</p>

<p>The corresponding <code>unzip</code> command:</p>

<pre><code>  public static void unzip(File zipfile, File directory) throws IOException {
    ZipFile zfile = new ZipFile(zipfile);
    Enumeration&lt;? extends ZipEntry&gt; entries = zfile.entries();
    while (entries.hasMoreElements()) {
      ZipEntry entry = entries.nextElement();
      File file = new File(directory, entry.getName());
      if (entry.isDirectory()) {
        file.mkdirs();
      } else {
        file.getParentFile().mkdirs();
        InputStream in = zfile.getInputStream(entry);
        try {
          copy(in, file);
        } finally {
          in.close();
        }
      }
    }
  }
</code></pre>

<p>Utility methods on which they rely:</p>

<pre><code>  private static void copy(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    while (true) {
      int readCount = in.read(buffer);
      if (readCount &lt; 0) {
        break;
      }
      out.write(buffer, 0, readCount);
    }
  }

  private static void copy(File file, OutputStream out) throws IOException {
    InputStream in = new FileInputStream(file);
    try {
      copy(in, out);
    } finally {
      in.close();
    }
  }

  private static void copy(InputStream in, File file) throws IOException {
    OutputStream out = new FileOutputStream(file);
    try {
      copy(in, out);
    } finally {
      out.close();
    }
  }
</code></pre>

<p>The buffer size is entirely arbitrary.</p>
",McDowell,McDowell,1252499759,1252504372,1252504372
http://stackoverflow.com/a/1400046/1236542,Unique fields that allow nulls in Django,33670,Sergey Golovchenko,Constantinius,1232241219,1554551806,1499095067,https://stackoverflow.com/questions/454436/unique-fields-that-allow-nulls-in-django,"<p>Django has not considered NULL to be equal to NULL for the purpose of uniqueness checks since ticket #9039 was fixed, see:</p>

<p><a href=""http://code.djangoproject.com/ticket/9039"" rel=""noreferrer"">http://code.djangoproject.com/ticket/9039</a></p>

<p>The issue here is that the normalized ""blank"" value for a form CharField is an empty string, not None. So if you leave the field blank, you get an empty string, not NULL, stored in the DB.  Empty strings are equal to empty strings for uniqueness checks, under both Django and database rules.</p>

<p>You can force the admin interface to store NULL for an empty string by providing your own customized model form for Foo with a clean_bar method that turns the empty string into None:</p>

<pre><code>class FooForm(forms.ModelForm):
    class Meta:
        model = Foo
    def clean_bar(self):
        return self.cleaned_data['bar'] or None

class FooAdmin(admin.ModelAdmin):
    form = FooForm
</code></pre>
",Karen Tracey,xblitz,1252506362,1377829073,1377829073
http://stackoverflow.com/a/14010215/4218920,Algorithm for iterating over an outward spiral on a discrete 2D grid from the origin,13824,Justin L.,Justin L.,1284440316,1551220517,1284445340,https://stackoverflow.com/questions/3706219/algorithm-for-iterating-over-an-outward-spiral-on-a-discrete-2d-grid-from-the-or,"<p>Here's a stab at it in C++, a stateful iterator.</p>

<pre><code>class SpiralOut{
protected:
    unsigned layer;
    unsigned leg;
public:
    int x, y; //read these as output from next, do not modify.
    SpiralOut():layer(1),leg(0),x(0),y(0){}
    void goNext(){
        switch(leg){
        case 0: ++x; if(x  == layer)  ++leg;                break;
        case 1: ++y; if(y  == layer)  ++leg;                break;
        case 2: --x; if(-x == layer)  ++leg;                break;
        case 3: --y; if(-y == layer){ leg = 0; ++layer; }   break;
        }
    }
};
</code></pre>

<p>Should be about as efficient as it gets.</p>
",mako,mako,1356258440,1416954317,1416954317
http://stackoverflow.com/a/14023930/226013,Flask URL Route: Route All other URLs to some function,10816,Gaby Solis,,1356367904,1503194065,0,https://stackoverflow.com/questions/14023864/flask-url-route-route-all-other-urls-to-some-function,"<p>This works for your second issue.</p>

<pre><code>from flask import Flask

app = Flask(__name__)

@app.route('/')
def index():
    return 'This is the front page'

@app.route('/hello/')
def hello():
    return 'This catches /hello'

@app.route('/&lt;path:dummy&gt;')
def fallback(dummy):
    return 'This one catches everything else'
</code></pre>

<p><code>path</code> will catch everything until the end. <a href=""http://flask.pocoo.org/docs/quickstart/#routing"" rel=""noreferrer"">More about the variable converters</a>.</p>
",justinas,,1356368412,1356368412,0
http://stackoverflow.com/a/14045047/676195,getting the X/Y coordinates of a mouse click on an image with jQuery,152501,Ron Harlev,,1264724509,1429109165,0,https://stackoverflow.com/questions/2159044/getting-the-x-y-coordinates-of-a-mouse-click-on-an-image-with-jquery,"<p>Here is a better script:</p>

<pre><code>$('#mainimage').click(function(e)
{   
    var offset_t = $(this).offset().top - $(window).scrollTop();
    var offset_l = $(this).offset().left - $(window).scrollLeft();

    var left = Math.round( (e.clientX - offset_l) );
    var top = Math.round( (e.clientY - offset_t) );

    alert(""Left: "" + left + "" Top: "" + top);

});
</code></pre>
",rckehoe,Eric Leschinski,1356549017,1385619136,1385619136
http://stackoverflow.com/a/1405971/798575,How do I determine if my python shell is executing in 32bit or 64bit mode on OS X?,275453,jkp,CharlesB,1252595641,1547472671,1369820328,https://stackoverflow.com/questions/1405913/how-do-i-determine-if-my-python-shell-is-executing-in-32bit-or-64bit-mode-on-os,"<p>UPDATED:
One way is to look at <code>sys.maxsize</code> as documented <a href=""http://docs.python.org/library/platform.html#cross-platform"" rel=""noreferrer"">here</a>:</p>

<pre><code>$ python-32 -c 'import sys;print(""%x"" % sys.maxsize, sys.maxsize &gt; 2**32)'
('7fffffff', False)
$ python-64 -c 'import sys;print(""%x"" % sys.maxsize, sys.maxsize &gt; 2**32)'
('7fffffffffffffff', True)
</code></pre>

<p><code>sys.maxsize</code> was introduced in Python 2.6.  If you need a test for older systems, this slightly more complicated test should work on all Python 2 and 3 releases:</p>

<pre><code>$ python-32 -c 'import struct;print( 8 * struct.calcsize(""P""))'
32
$ python-64 -c 'import struct;print( 8 * struct.calcsize(""P""))'
64
</code></pre>

<p>BTW, you might be tempted to use <code>platform.architecture()</code> for this.  Unfortunately, its results are not always reliable, <a href=""http://docs.python.org/library/platform.html#platform.architecture"" rel=""noreferrer"">particularly in the case of OS X universal binaries</a>.</p>

<pre><code>$ arch -x86_64 /usr/bin/python2.6 -c 'import sys,platform; print platform.architecture()[0], sys.maxsize &gt; 2**32'
64bit True
$ arch -i386 /usr/bin/python2.6 -c 'import sys,platform; print platform.architecture()[0], sys.maxsize &gt; 2**32'
64bit False
</code></pre>
",Ned Deily,lukmdo,1252596102,1348273104,1348273104
http://stackoverflow.com/a/14076841/931303,What is PyMySQL and how does it differ from MySQLdb? Can it affect Django deployment?,43123,Hafiz,Mark Amery,1314575358,1517207283,1453231496,https://stackoverflow.com/questions/7224807/what-is-pymysql-and-how-does-it-differ-from-mysqldb-can-it-affect-django-deploy,"<p>PyMySQL and MySQLdb provide the same functionality - they are both database connectors. The difference is in the implementation where MySQLdb is a C extension and PyMySQL is pure Python.</p>

<p>There are a few reasons to try PyMySQL:</p>

<ul>
<li>it might be easier to get running on some systems</li>
<li>it works with PyPy</li>
<li>it can be ""greened"" and works with gevent</li>
</ul>

<p>The proper way to use it with Django is to import it and tell it to impersonate MySQLdb in your top-level file, usually manage.py. Put the following code at the very top of your manage.py (or whatever file you call when starting your server):</p>

<pre><code>try:
    import pymysql
    pymysql.install_as_MySQLdb()
except ImportError:
    pass
</code></pre>
",Daniel Eriksson,Benjamin,1356735511,1389606966,1389606966
http://stackoverflow.com/a/14078260/586382,How to stringify inherited objects to JSON?,13332,wtjones,,1326040888,1497574454,0,https://stackoverflow.com/questions/8779249/how-to-stringify-inherited-objects-to-json,"<p>Another option would be to define a <code>toJSON</code> method in the object prototype you want to serialize:</p>

<pre><code>function Test(){}

Test.prototype = {

    someProperty: ""some value"", 

    toJSON: function() {
        var tmp = {};

        for(var key in this) {
            if(typeof this[key] !== 'function')
                tmp[key] = this[key];
        }

        return tmp;
    }
};

var t = new Test;

JSON.stringify(t); // returns ""{""someProperty"" : ""some value""}""
</code></pre>

<p>This works since JSON.stringify searches for a <code>toJSON</code> method in the object it receives, before trying the native serialization.</p>
",Cesar Varela,JotaBe,1356749191,1451554731,1451554731
http://stackoverflow.com/a/14115494/190597,Finding centre of a polygon using limited data,7373,djcmm476,grael,1357077463,1471446211,1471446211,https://stackoverflow.com/questions/14114610/finding-centre-of-a-polygon-using-limited-data,"<p>For finding a centroid, you can use <a href=""http://en.wikipedia.org/wiki/Centroid#Centroid_of_polygon"">the formula described on wikipedia</a>:</p>

<pre><code>import math

def area_for_polygon(polygon):
    result = 0
    imax = len(polygon) - 1
    for i in range(0,imax):
        result += (polygon[i]['x'] * polygon[i+1]['y']) - (polygon[i+1]['x'] * polygon[i]['y'])
    result += (polygon[imax]['x'] * polygon[0]['y']) - (polygon[0]['x'] * polygon[imax]['y'])
    return result / 2.

def centroid_for_polygon(polygon):
    area = area_for_polygon(polygon)
    imax = len(polygon) - 1

    result_x = 0
    result_y = 0
    for i in range(0,imax):
        result_x += (polygon[i]['x'] + polygon[i+1]['x']) * ((polygon[i]['x'] * polygon[i+1]['y']) - (polygon[i+1]['x'] * polygon[i]['y']))
        result_y += (polygon[i]['y'] + polygon[i+1]['y']) * ((polygon[i]['x'] * polygon[i+1]['y']) - (polygon[i+1]['x'] * polygon[i]['y']))
    result_x += (polygon[imax]['x'] + polygon[0]['x']) * ((polygon[imax]['x'] * polygon[0]['y']) - (polygon[0]['x'] * polygon[imax]['y']))
    result_y += (polygon[imax]['y'] + polygon[0]['y']) * ((polygon[imax]['x'] * polygon[0]['y']) - (polygon[0]['x'] * polygon[imax]['y']))
    result_x /= (area * 6.0)
    result_y /= (area * 6.0)

    return {'x': result_x, 'y': result_y}

def bottommost_index_for_polygon(polygon):
    bottommost_index = 0
    for index, point in enumerate(polygon):
        if (point['y'] &lt; polygon[bottommost_index]['y']):
            bottommost_index = index
    return bottommost_index

def angle_for_vector(start_point, end_point):
    y = end_point['y'] - start_point['y']
    x = end_point['x'] - start_point['x']
    angle = 0

    if (x == 0):
        if (y &gt; 0):
            angle = 90.0
        else:
            angle = 270.0
    elif (y == 0):
        if (x &gt; 0):
            angle = 0.0
        else:
            angle = 180.0
    else:
        angle = math.degrees(math.atan((y+0.0)/x))
        if (x &lt; 0):
            angle += 180
        elif (y &lt; 0):
            angle += 360

    return angle

def convex_hull_for_polygon(polygon):
    starting_point_index = bottommost_index_for_polygon(polygon)
    convex_hull = [polygon[starting_point_index]]
    polygon_length = len(polygon)

    hull_index_candidate = 0 #arbitrary
    previous_hull_index_candidate = starting_point_index
    previous_angle = 0
    while True:
        smallest_angle = 360

        for j in range(0,polygon_length):
            if (previous_hull_index_candidate == j):
                continue
            current_angle = angle_for_vector(polygon[previous_hull_index_candidate], polygon[j])
            if (current_angle &lt; smallest_angle and current_angle &gt; previous_angle):
                hull_index_candidate = j
                smallest_angle = current_angle

        if (hull_index_candidate == starting_point_index): # we've wrapped all the way around
            break
        else:
            convex_hull.append(polygon[hull_index_candidate])
            previous_angle = smallest_angle
            previous_hull_index_candidate = hull_index_candidate

    return convex_hull
</code></pre>

<p>I used a <a href=""http://en.wikipedia.org/wiki/Gift_wrapping_algorithm"">gift-wrapping algorithm</a> to find the outside points (a.k.a. <a href=""http://en.wikipedia.org/wiki/Convex_hull"">convex hull</a>).  There are a bunch of ways to do this, but gift-wrapping is nice because of its conceptual and practical simplicity.  Here's an animated gif explaining this particular implementation:</p>

<p><img src=""https://i.stack.imgur.com/cpadV.gif"" alt=""step-by-step animated gif for counter-clockwise gift-wrapping, starting at the bottommost node""></p>

<p>Here's some naive code to find centroids of the individual voronoi cells based on a collection of nodes and edges for a voronoi diagram.  It introduces a method to find edges belonging to a node and relies on the previous centroid and convex-hull code:</p>

<pre><code>def midpoint(edge):
    x1 = edge[0][0]
    y1 = edge[0][9]
    x2 = edge[1][0]
    y2 = edge[1][10]

    mid_x = x1+((x2-x1)/2.0)
    mid_y = y1+((y2-y1)/2.0)

    return (mid_x, mid_y)

def ccw(A,B,C): # from http://www.bryceboe.com/2006/10/23/line-segment-intersection-algorithm/
    return (C[1]-A[1])*(B[0]-A[0]) &gt; (B[1]-A[1])*(C[0]-A[0])

def intersect(segment1, segment2): # from http://www.bryceboe.com/2006/10/23/line-segment-intersection-algorithm/
    A = segment1[0]
    B = segment1[1]
    C = segment2[0]
    D = segment2[1]
    # Note: this doesn't catch collinear line segments!
    return ccw(A,C,D) != ccw(B,C,D) and ccw(A,B,C) != ccw(A,B,D)

def points_from_edges(edges):
    point_set = set()
    for i in range(0,len(edges)):
          point_set.add(edges[i][0])
          point_set.add(edges[i][11])

    points = []
    for point in point_set:
          points.append({'x':point[0], 'y':point[1]})

    return list(points)

def centroids_for_points_and_edges(points, edges):

    centroids = []

    # for each voronoi_node,
    for i in range(0,len(points)):
        cell_edges = []

        # for each edge
        for j in range(0,len(edges)):
            is_cell_edge = True

            # let vector be the line from voronoi_node to the midpoint of edge
            vector = (points[i],midpoint(edges[j]))

            # for each other_edge
            for k in range(0,len(edges)):

                # if vector crosses other_edge
                if (k != j and intersect(edges[k], vector)):
                    # edge is not in voronoi_node's polygon
                    is_cell_edge = False
                    break

            # if the vector didn't cross any other edges, it's an edge for the current node
            if (is_cell_edge):
                cell_edges.append(edges[j])

        # find the hull for the cell
        convex_hull = convex_hull_for_polygon(points_from_edges(cell_edges))

        # calculate the centroid of the hull
        centroids.append(centroid_for_polygon(convex_hull))

    return centroids

edges = [
  ((10,  200),(30,  50 )),
  ((10,  200),(100, 140)),
  ((10,  200),(200, 180)),
  ((30,  50 ),(100, 140)),
  ((30,  50 ),(150, 75 )),
  ((30,  50 ),(200, 10 )),
  ((100, 140),(150, 75 )),
  ((100, 140),(200, 180)),
  ((150, 75 ),(200, 10 )),
  ((150, 75 ),(200, 180)),
  ((150, 75 ),(220, 80 )),
  ((200, 10 ),(220, 80 )),
  ((200, 10 ),(350, 100)),
  ((200, 180),(220, 80 )),
  ((200, 180),(350, 100)),
  ((220, 80 ),(350, 100))
]

points = [
  (50,130),
  (100,95),
  (100,170),
  (130,45),
  (150,130),
  (190,55),
  (190,110),
  (240,60),
  (245,120)
]

centroids = centroids_for_points_and_edges(points, edges)
print ""centroids:""
for centroid in centroids:
    print ""  (%s, %s)"" % (centroid['x'], centroid['y'])
</code></pre>

<p>Below is an image of the script results.  The blue lines are edges.  The black squares are nodes.  The red squares are vertices that the blue lines are derived from.  The vertices and nodes were chosen arbitrarily.  The red crosses are centroids.  While not an actual voronoi tesselation, the method used to procure the centroids should hold for tessalations composed of convex cells:</p>

<p><img src=""https://i.stack.imgur.com/uP7f9.png"" alt=""triangulated point cloud with calculated centroids and arbitrarily-chosen approximate centers""></p>

<p>Here's the html to render the image:</p>

<pre><code>&lt;html&gt;
&lt;head&gt;
  &lt;script&gt;
    window.onload = draw;
    function draw() {
      var canvas = document.getElementById('canvas').getContext('2d');

      // draw polygon points
      var polygon = [ 
        {'x':220, 'y':80},
        {'x':200, 'y':180},
        {'x':350, 'y':100},
        {'x':30, 'y':50}, 
        {'x':100, 'y':140},
        {'x':200, 'y':10},
        {'x':10, 'y':200},
        {'x':150, 'y':75}
      ];  
      plen=polygon.length;
      for(i=0; i&lt;plen; i++) {
        canvas.fillStyle = 'red';
        canvas.fillRect(polygon[i].x-4,polygon[i].y-4,8,8);
        canvas.fillStyle = 'yellow';
        canvas.fillRect(polygon[i].x-2,polygon[i].y-2,4,4);
      }   

      // draw edges
      var edges = [ 
        [[10,  200],[30,  50 ]], 
        [[10,  200],[100, 140]],
        [[10,  200],[200, 180]],
        [[30,  50 ],[100, 140]], 
        [[30,  50 ],[150, 75 ]], 
        [[30,  50 ],[200, 10 ]], 
        [[100, 140],[150, 75 ]], 
        [[100, 140],[200, 180]],
        [[150, 75 ],[200, 10 ]], 
        [[150, 75 ],[200, 180]],
        [[150, 75 ],[220, 80 ]], 
        [[200, 10 ],[220, 80 ]], 
        [[200, 10 ],[350, 100]],
        [[200, 180],[220, 80 ]], 
        [[200, 180],[350, 100]],
        [[220, 80 ],[350, 100]]
      ];  
      elen=edges.length;
      canvas.beginPath();
      for(i=0; i&lt;elen; i++) {
        canvas.moveTo(edges[i][0][0], edges[i][0][1]);
        canvas.lineTo(edges[i][13][0], edges[i][14][1]);
      }   
      canvas.closePath();
      canvas.strokeStyle = 'blue';
      canvas.stroke();

      // draw center points
      var points = [ 
        [50,130],
        [100,95],
        [100,170],
        [130,45],
        [150,130],
        [190,55],
        [190,110],
        [240,60],
        [245,120]
      ]   
      plen=points.length;
      for(i=0; i&lt;plen; i++) {
        canvas.fillStyle = 'black';
        canvas.fillRect(points[i][0]-3,points[i][15]-3,6,6);
        canvas.fillStyle = 'white';
        canvas.fillRect(points[i][0]-1,points[i][16]-1,2,2);
      }   

      // draw centroids
      var centroids = [ 
        [46.6666666667, 130.0],
        [93.3333333333, 88.3333333333],
        [103.333333333, 173.333333333],
        [126.666666667, 45.0],
        [150.0, 131.666666667],
        [190.0, 55.0],
        [190.0, 111.666666667],
        [256.666666667, 63.3333333333],
        [256.666666667, 120.0]
      ]
      clen=centroids.length;
      canvas.beginPath();
      for(i=0; i&lt;clen; i++) {
        canvas.moveTo(centroids[i][0], centroids[i][17]-5);
        canvas.lineTo(centroids[i][0], centroids[i][18]+5);
        canvas.moveTo(centroids[i][0]-5, centroids[i][19]);
        canvas.lineTo(centroids[i][0]+5, centroids[i][20]);
      }
      canvas.closePath();
      canvas.strokeStyle = 'red';
      canvas.stroke();
    }
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;canvas id='canvas' width=""400px"" height=""250px""&lt;/canvas&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>This will likely get the job done.  A more robust algo for finding which edges belong to a cell would be to use an inverse gift-wrapping method where edges are linked end-to-end and path choice at a split would be determined by angle.  That method would not have a susceptibility to concave polygons and it would have the added benefit of not relying on the nodes.</p>
",mgamba,mgamba,1357085510,1357544322,1357544322
http://stackoverflow.com/a/14161012/654755,Google contacts import using oauth2.0,6298,Nikolay Fominyh,bossylobster,1334655601,1407907904,1353006925,https://stackoverflow.com/questions/10188768/google-contacts-import-using-oauth2-0,"<p>The <a href=""https://developers.google.com/google-apps/contacts/v3/"" rel=""nofollow noreferrer"">Google Contacts API</a> can't be used with the <code>google-api-python-client</code> library because it is a <a href=""https://developers.google.com/gdata/docs/2.0/reference"" rel=""nofollow noreferrer"">Google Data API</a>, while <code>google-api-python-client</code> is intended to be used with <a href=""https://developers.google.com/discovery/v1/getting_started#background"" rel=""nofollow noreferrer"">discovery-based APIs</a>.</p>

<p>Rather than going through all the trouble described by <a href=""https://stackoverflow.com/users/656804/nikolay-fominyh"">@NikolayFominyh</a>, you can use the native support for OAuth 2.0 in <code>gdata-python-client</code>.</p>

<p>To get a valid token, follow the instructions from a Google Developers <a href=""http://googleappsdeveloper.blogspot.com/2011/09/python-oauth-20-google-data-apis.html"" rel=""nofollow noreferrer"">blog post</a> for an in-depth description of the process.</p>

<h2>First, create a token object:</h2>

<pre><code>import gdata.gauth

CLIENT_ID = 'bogus.id'  # Provided in the APIs console
CLIENT_SECRET = 'SeCr3Tv4lu3'  # Provided in the APIs console
SCOPE = 'https://www.google.com/m8/feeds'
USER_AGENT = 'dummy-sample'

auth_token = gdata.gauth.OAuth2Token(
    client_id=CLIENT_ID, client_secret=CLIENT_SECRET,
    scope=SCOPE, user_agent=USER_AGENT)
</code></pre>

<h2>Then, authorize your application with this token:</h2>

<pre><code>APPLICATION_REDIRECT_URI = 'http://www.example.com/oauth2callback'
authorize_url = auth_token.generate_authorize_url(
    redirect_uri=APPLICATION_REDIRECT_URI)
</code></pre>

<p>After generating this <code>authorize_url</code>, you (or users of your application) will need to visit it and accept the OAuth 2.0 prompt. If this is within a web application, you can simply redirect, otherwise you'll need to visit the link in a browser.</p>

<h2>After authorizing, exchange the code for a token:</h2>

<pre><code>import atom.http_core

redirect_url = 'http://www.example.com/oauth2callback?code=SOME-RETURNED-VALUE'
url = atom.http_core.ParseUri(redirect_url)
auth_token.get_access_token(url.query)
</code></pre>

<p>In the case you visited a browser, you'll need to copy the URL you were redirected to into the variable <code>redirect_url</code>.</p>

<p>In the case you are in a web application, you will be able to specify the handler for the path <code>/oauth2callback</code> (for example) and simply can retrieve the query parameter <code>code</code> to exchange the code for a token. For example, if using <code>WebOb</code>:</p>

<pre><code>redirect_url = atom.http_core.Uri.parse_uri(self.request.uri)
</code></pre>

<h2>Finally authorize your client with this token:</h2>

<pre><code>import gdata.contacts.service

client = gdata.contacts.service.ContactsService(source='appname')
auth_token.authorize(client)
</code></pre>

<h2>Update (12+ months after original answer):</h2>

<p>Alternately you can use the <code>google-api-python-client</code> support as I describe in a <a href=""http://blog.bossylobster.com/2012/12/bridging-oauth-20-objects-between-gdata.html"" rel=""nofollow noreferrer"">blog post</a>.</p>
",bossylobster,Community,1357317110,1407907904,1495540919
http://stackoverflow.com/a/14195313/3781327,Python code generation with pyside-uic,43004,ArtDijk,Cur,1292348541,1503665210,1503665210,https://stackoverflow.com/questions/4442286/python-code-generation-with-pyside-uic,"<pre class=""lang-py prettyprint-override""><code>import pysideuic
import xml.etree.ElementTree as xml
from cStringIO import StringIO

def loadUiType(uiFile):
    """"""
    Pyside ""loadUiType"" command like PyQt4 has one, so we have to convert the 
    ui file to py code in-memory first and then execute it in a special frame
    to retrieve the form_class.
    """"""
    parsed = xml.parse(uiFile)
    widget_class = parsed.find('widget').get('class')
    form_class = parsed.find('class').text

    with open(uiFile, 'r') as f:
        o = StringIO()
        frame = {}

        pysideuic.compileUi(f, o, indent=0)
        pyc = compile(o.getvalue(), '&lt;string&gt;', 'exec')
        exec pyc in frame

        # Fetch the base_class and form class based on their type
        # in the xml from designer
        form_class = frame['Ui_%s'%form_class]
        base_class = eval('QtGui.%s'%widget_class)

    return form_class, base_class
</code></pre>

<p>You can use this way to load the UI and can also get form_class as well as the base class as return type... but if you do not want to convert, otherwise Yes the following is the correct way.</p>

<pre><code>pyside-uic.exe MyWindow.ui -o MyWindow.py
</code></pre>
",user1176501,pradyunsg,1357559321,1375977588,1375977588
http://stackoverflow.com/a/14196482/5351316,PHP date_parse_from_format( ) alternative in PHP 5.2,9788,Acacio,hakre,1310490838,1512049517,1365129783,https://stackoverflow.com/questions/6668223/php-date-parse-from-format-alternative-in-php-5-2,"<p>Here is my improved version and I think complete. Only errors and warnings are not taken into account.</p>

<pre><code>if( !function_exists('date_parse_from_format') ){
    function date_parse_from_format($format, $date) {
        // reverse engineer date formats
        $keys = array(
            'Y' =&gt; array('year', '\d{4}'),              //Anne sur 4 chiffres
            'y' =&gt; array('year', '\d{2}'),              //Anne sur 2 chiffres
            'm' =&gt; array('month', '\d{2}'),             //Mois au format numrique, avec zros initiaux
            'n' =&gt; array('month', '\d{1,2}'),           //Mois sans les zros initiaux
            'M' =&gt; array('month', '[A-Z][a-z]{3}'),     //Mois, en trois lettres, en anglais
            'F' =&gt; array('month', '[A-Z][a-z]{2,8}'),   //Mois, textuel, version longue; en anglais, comme January ou December
            'd' =&gt; array('day', '\d{2}'),               //Jour du mois, sur deux chiffres (avec un zro initial)
            'j' =&gt; array('day', '\d{1,2}'),             //Jour du mois sans les zros initiaux
            'D' =&gt; array('day', '[A-Z][a-z]{2}'),       //Jour de la semaine, en trois lettres (et en anglais)
            'l' =&gt; array('day', '[A-Z][a-z]{6,9}'),     //Jour de la semaine, textuel, version longue, en anglais
            'u' =&gt; array('hour', '\d{1,6}'),            //Microsecondes
            'h' =&gt; array('hour', '\d{2}'),              //Heure, au format 12h, avec les zros initiaux
            'H' =&gt; array('hour', '\d{2}'),              //Heure, au format 24h, avec les zros initiaux
            'g' =&gt; array('hour', '\d{1,2}'),            //Heure, au format 12h, sans les zros initiaux
            'G' =&gt; array('hour', '\d{1,2}'),            //Heure, au format 24h, sans les zros initiaux
            'i' =&gt; array('minute', '\d{2}'),            //Minutes avec les zros initiaux
            's' =&gt; array('second', '\d{2}')             //Secondes, avec zros initiaux
        );

        // convert format string to regex
        $regex = '';
        $chars = str_split($format);
        foreach ( $chars AS $n =&gt; $char ) {
            $lastChar = isset($chars[$n-1]) ? $chars[$n-1] : '';
            $skipCurrent = '\\' == $lastChar;
            if ( !$skipCurrent &amp;&amp; isset($keys[$char]) ) {
                $regex .= '(?P&lt;'.$keys[$char][0].'&gt;'.$keys[$char][1].')';
            }
            else if ( '\\' == $char ) {
                $regex .= $char;
            }
            else {
                $regex .= preg_quote($char);
            }
        }

        $dt = array();
        // now try to match it
        if( preg_match('#^'.$regex.'$#', $date, $dt) ){
            foreach ( $dt AS $k =&gt; $v ){
                if ( is_int($k) ){
                    unset($dt[$k]);
                }
            }
            if( !checkdate($dt['month'], $dt['day'], $dt['year']) ){
                $dt['error_count'] = 1;
            } else {
                $dt['error_count'] = 0;
            }
        }
        else {
            $dt['error_count'] = 1;
        }

        $dt['errors'] = array();
        $dt['fraction'] = '';
        $dt['warning_count'] = 0;
        $dt['warnings'] = array();
        $dt['is_localtime'] = 0;
        $dt['zone_type'] = 0;
        $dt['zone'] = 0;
        $dt['is_dst'] = '';
        return $dt;
    }
}
</code></pre>
",Jeremy,Gyrocode.com,1357563543,1471954583,1471954583
http://stackoverflow.com/a/1420225/5628,The Hostname Regex,35399,CannibalSmith,CannibalSmith,1252865162,1560322902,1252866052,https://stackoverflow.com/questions/1418423/the-hostname-regex,"<p><code>^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$</code></p>
",CannibalSmith,Prof. Falken,1252915202,1363159194,1363159194
http://stackoverflow.com/a/1421458/1084488,How do I sort a list by different parameters at different timed,85443,runaros,Cur,1252932190,1483208028,1483208028,https://stackoverflow.com/questions/1421322/how-do-i-sort-a-list-by-different-parameters-at-different-timed,"<p>You can create comparators for each of properties you might want to sort and then try ""comparator chaining"" :-) like this:</p>

<pre><code>public class ChainedComparator&lt;T&gt; implements Comparator&lt;T&gt; {
    private List&lt;Comparator&lt;T&gt;&gt; simpleComparators; 
    public ChainedComparator(Comparator&lt;T&gt;... simpleComparators) {
        this.simpleComparators = Arrays.asList(simpleComparators);
    }
    public int compare(T o1, T o2) {
        for (Comparator&lt;T&gt; comparator : simpleComparators) {
            int result = comparator.compare(o1, o2);
            if (result != 0) {
                return result;
            }
        }
        return 0;
    }
}
</code></pre>
",Tadeusz Kopec,,1252933794,1354088986,1354088986
http://stackoverflow.com/a/14219159/79697,shlex.split still not supporting unicode?,2805,petr,Martijn Pieters,1357660673,1561447392,1412100721,https://stackoverflow.com/questions/14218992/shlex-split-still-not-supporting-unicode,"<p>The <code>shlex.split()</code> code wraps both <code>unicode()</code> and <code>str()</code> instances in a <code>StringIO()</code> object, which can only handle Latin-1 bytes (so not the full unicode codepoint range).</p>

<p>You'll have to encode (to UTF-8 should work) if you still want to use <code>shlex.split()</code>; the maintainers of the module meant that <code>unicode()</code> objects are supported now, just not anything outside the Latin-1 range of codepoints.</p>

<p>Encoding, splitting, decoding gives me:</p>

<pre><code>&gt;&gt;&gt; map(lambda s: s.decode('UTF8'), shlex.split(command_full.encode('utf8')))
[u'software.py', u'-fileA=sequence.fasta', u'-fileB=\u65b0\u5efa\u6587\u672c\u6587\u6863.fasta.txt', u'-output_dir=...', u'-FORMtitle=tst']
</code></pre>

<p>A <a href=""http://bugs.python.org/issue742290"">now closed Python issue</a> tried to address this, but the module is very byte-stream oriented, and no new patch has materialized. For now using <code>iso-8859-1</code> or <code>UTF-8</code> encoding is the best I can come up with for you.</p>
",Martijn Pieters,Martijn Pieters,1357661240,1357665266,1357665266
http://stackoverflow.com/a/1421988/187954,Check whether variable is number or string in JavaScript,516636,Jin Yong,Brett DeWoody,1250735000,1562584965,1500810448,https://stackoverflow.com/questions/1303646/check-whether-variable-is-number-or-string-in-javascript,"<p>Best way to do that is using isNaN + type casting:</p>

<p><strong>Updated all-in method:</strong></p>

<pre><code>function isNumber(n) { return !isNaN(parseFloat(n)) &amp;&amp; !isNaN(n - 0) }
</code></pre>

<p><strong>The same using regex:</strong></p>

<pre><code>function isNumber(n) { return /^-?[\d.]+(?:e-?\d+)?$/.test(n); } 

------------------------

isNumber ('123'); // true  
isNumber ('123abc'); // true  
isNumber (5); // true  
isNumber ('q345'); // false
isNumber(null); // false
isNumber(undefined); // false
isNumber(false); // false
isNumber('   '); // false
</code></pre>
",BitOfUniverse,BitOfUniverse,1252939220,1512398183,1512398183
http://stackoverflow.com/a/14274466/459543,APT command line interface-like yes/no input?,156676,h3.,martineau,1276564434,1552385113,1468419159,https://stackoverflow.com/questions/3041986/apt-command-line-interface-like-yes-no-input,"<p>There is a function <code>strtobool</code> in Python's standard library: <a href=""http://docs.python.org/2/distutils/apiref.html?highlight=distutils.util#distutils.util.strtobool"">http://docs.python.org/2/distutils/apiref.html?highlight=distutils.util#distutils.util.strtobool</a></p>

<p>You can use it to check user's input and transform it to <code>True</code> or <code>False</code> value.</p>
",Alexander Artemenko,Danilo Bargen,1357893869,1369169535,1369169535
http://stackoverflow.com/a/14279336/1702561,PHP / Mime Types - List of mime types publically available?,30157,John Himmelman,John Himmelman,1316714832,1422115510,1316717570,https://stackoverflow.com/questions/7519393/php-mime-types-list-of-mime-types-publically-available,"<p>Here's <a href=""http://pastie.org/5668002"" rel=""noreferrer"">a PHP array with the 996 extensions</a> defined in <a href=""http://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types"" rel=""noreferrer"">Apache's mime.types</a> file (built with <a href=""https://github.com/broofa/node-mime"" rel=""noreferrer"">node-mime</a>).  If you want JSON and have <code>node.js</code> installed, just <code>npm install mime</code> then:</p>

<pre><code>node -e ""console.log(JSON.stringify(require('./mime').extensions))""
</code></pre>

<p><strong>Edit</strong>: The node mime-db project now maintains a current, CDN-hosted, <a href=""https://cdn.rawgit.com/jshttp/mime-db/master/db.json"" rel=""noreferrer"">JSON file of mime-types</a>.  The one caveat is that this file includes additional meta-data about each type you may not need. That's probably only important if you care about the JSON file size though.</p>
",broofa,broofa,1357911427,1422115510,1422115510
http://stackoverflow.com/a/14298190/1170370,Convert a filename to a file:// URL,23074,Simon Sapin,,1343390898,1477794440,0,https://stackoverflow.com/questions/11687478/convert-a-filename-to-a-file-url,"<p>I'm not sure the docs are rigorous enough to guarantee it, but I think this works in practice:</p>

<pre><code>import urlparse, urllib

def path2url(path):
    return urlparse.urljoin(
      'file:', urllib.pathname2url(path))
</code></pre>
",Dave Abrahams,,1358026736,1358026736,0
http://stackoverflow.com/a/14330595/1927178,Why do all of the keybindings in this directive get overwritten by the last one?,712,iand675,,1358219121,1358219687,0,https://stackoverflow.com/questions/14330527/why-do-all-of-the-keybindings-in-this-directive-get-overwritten-by-the-last-one,"<p>You've fallen for a common trap: variables in JavaScript are always function scoped.  When you do this:</p>

<pre><code>for (var k in attribute) {
    console.log('binding ' + k + ' as ' + attribute[k]);
    Mousetrap.bind(k, function() { return attribute[k](scope, element); });
}
</code></pre>

<p>With that <code>bind()</code>, you're creating four closures that all close over the variable <code>k</code>but they all close over the <em>same variable</em>.  You don't get a new one for each run of the loop.  The <code>console.log</code> works perfectly because the <em>value</em> of <code>k</code> is used immediately.  The closure doesn't evaluate <code>k</code> until it's actually run, and by then, its value has changed to whatever it was when the loop finished.</p>

<p>Depending on your target audience, the easiest way by far to fix this is to use <code>let</code> instead of <code>var</code>.  <code>let</code> does block scoping (which works about how you'd expect), but is a fairly recent invention, and I'm not sure how well it's supported.</p>

<p>Otherwise, to get a new scope, you need a new function:</p>

<pre><code>for (var k in attribute) {
    (function(k) {
        console.log('binding ' + k + ' as ' + attribute[k]);
        Mousetrap.bind(k, function() { return attribute[k](scope, element); });
    })(k);
}
</code></pre>

<p>This passes the outer <code>k</code> to the function's inner <code>k</code>, which will be a different variable every time.  You could also split this out into a little factory function, but for something this tiny, I wouldn't bother.</p>
",Eevee,,1358219687,1358219687,0
http://stackoverflow.com/a/14336566/577298,Get best matching overload from set of overloads,836,atlaste,atlaste,1358153771,1358248627,1358155332,https://stackoverflow.com/questions/14315437/get-best-matching-overload-from-set-of-overloads,"<p>For other people that want to do runtime overload resolution, this is a fairly complete description on how to implement it.</p>

<p>Important side note is that the 'dynamic' trick doesn't work in all scenario's as well (specifically: generics); it seems that the compiler is more flexible than runtime behavior. </p>

<p>Also note that this is not a complete algorithm/implementation (or at least I think that it isn't), but works in most cases including nevertheless. I found this to work in all cases that I encountered so far, including difficult cases like array covariance.</p>

<p>The scoring algorithm works as follows:</p>

<ul>
<li>If parameter type == source type: score = 0</li>
<li>If the parameter is a generic type argument that is valid (generic constraints): score = 1</li>
<li>If the source type is implicitly convertible to the parameter type: score = 2 (see: <a href=""http://msdn.microsoft.com/en-us/library/y5b434w4.aspx"" rel=""nofollow"">http://msdn.microsoft.com/en-us/library/y5b434w4.aspx</a> for all rules)</li>
<li>If you need to fill in a default parameter: score = 3</li>
<li>Otherwise calculate the score for compatibility score as below</li>
</ul>

<p>The compatibility score is the most strict conversion between a type type A and type B (including and covariance, contravariance). For example, string[] has 1 conversion to IList (using object[] and then IList) and 2 conversions to IEnumerable (1. by using object[] and then IEnumerable or 2. by IEnumerable). Therefore, IList is the more strict conversion and is therefore selected.</p>

<p>Counting the number of conversions is easy:</p>

<pre><code>            int cnt = CountCompatible(parameter.ParameterType, sourceType.GetInterfaces()) +
                      CountCompatible(parameter.ParameterType, sourceType.GetBaseTypes()) +
                      CountCompatible(parameter.ParameterType, new Type[] { sourceType });
            [...]

    private static int CountCompatible(Type dst, IEnumerable&lt;Type&gt; types)
    {
        int cnt = 0;
        foreach (var t in types)
        {
            if (dst.IsAssignableFrom(t))
            {
                ++cnt;
            }
        }
        return cnt;
    }
</code></pre>

<p>To make sure that a better score is selected when a more strict conversion is used, I calculate score as 'score = 5 - 1.0 / (cnt + 2);'. The +2 ensures that you never divide by 0 or 1, leading to a score between 4 and 5.</p>

<p>To do overload resolution, select the method with the minimum score for all arguments. Make sure you enter default method arguments properly when invoking (see the excellent link by Andras above) and make sure you fill in the generic arguments before you return the method. If you encounter a draw for the best method: the best resolution is to throw an exception.</p>

<p>In case you wonder, yes... it's quite a bit of work to get it all working correctly... I plan to make a working version available in my framework once that's done. (You'll see the moment my profile has a working website link :-) )</p>
",atlaste,,1358248627,1358248627,0
http://stackoverflow.com/a/14364249/10612,How can I safely create a nested directory?,2310696,Parand,Georgy,1226084205,1558226445,1557996686,https://stackoverflow.com/questions/273192/how-can-i-safely-create-a-nested-directory,"<h2>Python 3.5+:</h2>

<pre><code>import pathlib
pathlib.Path('/my/directory').mkdir(parents=True, exist_ok=True) 
</code></pre>

<p><a href=""https://docs.python.org/library/pathlib.html#pathlib.Path.mkdir"" rel=""noreferrer""><code>pathlib.Path.mkdir</code></a> as used above recursively creates the directory and does not raise an exception if the directory already exists. If you don't need or want the parents to be created, skip the <code>parents</code> argument.</p>

<h2>Python 3.2+:</h2>

<p><strong>Using <code>pathlib</code>:</strong></p>

<p>If you can, install the current <code>pathlib</code> backport named <a href=""https://pypi.python.org/pypi/pathlib2/"" rel=""noreferrer""><code>pathlib2</code></a>. Do not install the older unmaintained backport named <a href=""https://pypi.python.org/pypi/pathlib/"" rel=""noreferrer""><code>pathlib</code></a>. Next, refer to the Python 3.5+ section above and use it the same.</p>

<p>If using Python 3.4, even though it comes with <code>pathlib</code>, it is missing the useful <code>exist_ok</code> option. The backport is intended to offer a newer and superior implementation of <code>mkdir</code> which includes this missing option.</p>

<p><strong>Using <code>os</code>:</strong></p>

<pre><code>import os
os.makedirs(path, exist_ok=True)
</code></pre>

<p><a href=""https://docs.python.org/library/os.html#os.makedirs"" rel=""noreferrer""><code>os.makedirs</code></a> as used above recursively creates the directory and does not raise an exception if the directory already exists. It has the optional <code>exist_ok</code> argument only if using Python 3.2+, with a default value of <code>False</code>. This argument does not exist in Python 2.x up to 2.7. As such, there is no need for manual exception handling as with Python 2.7.</p>

<h2>Python 2.7+:</h2>

<p><strong>Using <code>pathlib</code>:</strong></p>

<p>If you can, install the current <code>pathlib</code> backport named <a href=""https://pypi.python.org/pypi/pathlib2/"" rel=""noreferrer""><code>pathlib2</code></a>. Do not install the older unmaintained backport named <a href=""https://pypi.python.org/pypi/pathlib/"" rel=""noreferrer""><code>pathlib</code></a>. Next, refer to the Python 3.5+ section above and use it the same.</p>

<p><strong>Using <code>os</code>:</strong></p>

<pre><code>import os
try: 
    os.makedirs(path)
except OSError:
    if not os.path.isdir(path):
        raise
</code></pre>

<p>While a naive solution may first use <a href=""https://docs.python.org/2/library/os.path.html#os.path.isdir"" rel=""noreferrer"" title=""os.path.isdir""><code>os.path.isdir</code></a> followed by <a href=""https://docs.python.org/2/library/os.html#os.makedirs"" rel=""noreferrer"" title=""os.makedirs""><code>os.makedirs</code></a>, the solution above reverses the order of the two operations. In doing so, it prevents a common race condition having to do with a duplicated attempt at creating the directory, and also disambiguates files from directories.</p>

<p>Note that capturing the exception and using <code>errno</code> is of limited usefulness because <code>OSError: [Errno 17] File exists</code>, i.e. <code>errno.EEXIST</code>, is raised for both files and directories. It is more reliable simply to check if the directory exists.</p>

<h2>Alternative:</h2>

<p><a href=""https://docs.python.org/distutils/apiref.html#distutils.dir_util.mkpath"" rel=""noreferrer""><code>mkpath</code></a> creates the nested directory, and does nothing if the directory already exists. This works in both Python 2 and 3.</p>

<pre><code>import distutils.dir_util
distutils.dir_util.mkpath(path)
</code></pre>

<p>Per <a href=""http://bugs.python.org/issue10948"" rel=""noreferrer"">Bug 10948</a>, a severe limitation of this alternative is that it works only once per python process for a given path. In other words, if you use it to create a directory, then delete the directory from inside or outside Python, then use <code>mkpath</code> again to recreate the same directory, <code>mkpath</code> will simply silently use its invalid cached info of having previously created the directory, and will not actually make the directory again. In contrast, <code>os.makedirs</code> doesn't rely on any such cache. This limitation may be okay for some applications.</p>

<hr>

<p>With regard to the directory's <em>mode</em>, please refer to the documentation if you care about it.</p>
",Acumenus,Acumenus,1358357479,1526577383,1526577383
http://stackoverflow.com/a/14369329/900747,Missing parentheses with Regex,2712,Ghoul Fool,Alan Moore,1358242623,1358625025,1358248444,https://stackoverflow.com/questions/14334740/missing-parentheses-with-regex,"<p>You can't do the recursion in the regex itself, but you can always do it in JavaScript.</p>

<p>Here is an example:</p>

<pre><code>// First remove non-brackets:
string=string.replace(/[^{}[\]()]/g,"""");
// Then remove bracket pairs recursively
while (string!==oldstring) {
  oldstring=string;
  string=string.replace(/({}|\[\]|\(\))/g,"""");
}
</code></pre>

<p>The remainder are the non-matching brackets.</p>

<p>Live demo: <a href=""http://jsfiddle.net/3Njzv/"" rel=""nofollow"">http://jsfiddle.net/3Njzv/</a></p>

<p>If you need to count the pairs, you can do the replacements one at a time and add a counter:</p>

<pre><code>// First remove non-brackets:
string=string.replace(/[^{}[\]()]/g,"""");

// Then remove bracket pairs recursively
var counter=-1;
while (string!==oldstring) {
  counter ++;
  oldstring=string;
  string=string.replace(/({}|\[\]|\(\))/,"""");
}
</code></pre>
",Christophe,Christophe,1358376445,1358378964,1358378964
http://stackoverflow.com/a/14374832/569101,postgresql - can&#39;t create database - OperationalError: source database &quot;template1&quot; is being accessed by other users,38790,Andrius,,1358410684,1558016242,0,https://stackoverflow.com/questions/14374726/postgresql-cant-create-database-operationalerror-source-database-template,"<p>Database <a href=""http://www.postgresql.org/docs/9.2/static/manage-ag-templatedbs.html""><code>template1</code></a> exists only to provide barebone structure to create another empty database. You should <em>never</em> logon to <code>template1</code>, otherwise you will have problems.</p>

<p>Probably easiest solution for you is to restart PostgreSQL server process, and logon again. Database that should always exist and is safe to logon is <code>postgres</code>.</p>

<p>If restarting is not an option, you can use another emergency template database: <code>template0</code>.</p>

<p>By default, this statement:</p>

<pre><code>CREATE DATABASE dbname;
</code></pre>

<p>is equivalent to:</p>

<pre><code>CREATE DATABASE dbname TEMPLATE template1;
</code></pre>

<p>If <code>template1</code> is not available or corrupted, you can use <code>template0</code> as last resort:</p>

<pre><code>CREATE DATABASE dbname TEMPLATE template0;
</code></pre>

<p>You can read more about template databases <a href=""http://www.postgresql.org/docs/9.2/static/manage-ag-templatedbs.html"">here</a>.</p>
",mvp,mvp,1358411134,1358411888,1358411888
http://stackoverflow.com/a/14387791/583363,Fastest way to copy file in node.js,278417,bonbonez,Aur&#233;lien Ooms,1341232736,1555432042,1428496707,https://stackoverflow.com/questions/11293857/fastest-way-to-copy-file-in-node-js,"<p>Same mechanism, but this adds error handling:</p>

<pre><code>function copyFile(source, target, cb) {
  var cbCalled = false;

  var rd = fs.createReadStream(source);
  rd.on(""error"", function(err) {
    done(err);
  });
  var wr = fs.createWriteStream(target);
  wr.on(""error"", function(err) {
    done(err);
  });
  wr.on(""close"", function(ex) {
    done();
  });
  rd.pipe(wr);

  function done(err) {
    if (!cbCalled) {
      cb(err);
      cbCalled = true;
    }
  }
}
</code></pre>
",Mike Schilling,,1358455513,1358455513,0
http://stackoverflow.com/a/14396189/111426,Proper initialization of static constexpr array in class template?,8761,monkey0506,Community,1358501662,1394825219,1495542744,https://stackoverflow.com/questions/14395967/proper-initialization-of-static-constexpr-array-in-class-template,"<p>I think you want 9.4.2p3:</p>

<blockquote>
  <p>If a non-volatile <code>const static</code> data member is of integral or enumeration type, its declaration in the class definition can specify a <em>brace-or-equal-initializer</em> in which every <em>initializer-clause</em> that is an <em>assignment-expression</em> is a constant expression (5.19). A static data member of literal type can be declared in the class definition with the <code>constexpr</code> specifier; if so, its declaration shall specify a <em>brace-or-equal-initializer</em> in which every <em>initializer-clause</em> that is an <em>assignment-expression</em> is a constant expression. [...] The member shall still be defined in a namespace scope if it is odr-used (3.2) in the program and the namespace scope definition shall not contain an <em>initializer</em>.</p>
</blockquote>

<p>The definition of a <em>template</em> static data member is a <em>template-declaration</em> (14p1).  The example given in 14.5.1.3p1 is:</p>

<pre><code>template&lt;class T&gt; class X {
  static T s;
};
template&lt;class T&gt; T X&lt;T&gt;::s = 0;
</code></pre>

<p>However, as above a <code>constexpr static</code> or <code>const static</code> member whose in-class declaration specifies an <em>initializer</em> should not have an <em>initializer</em> in its namespace scope definition, so the syntax becomes:</p>

<pre><code>template&lt;class T&gt; class X {
  const static T s = 0;
};
template&lt;class T&gt; T X&lt;T&gt;::s;
</code></pre>

<p>The difference with the non-array (i.e. integral or enumeration) static constexpr data member is that its use in lvalue-to-rvalue conversion is not odr-use; you would only need to define it if taking its address or forming a const reference to it.</p>
",ecatmur,ecatmur,1358502460,1358502851,1358502851
http://stackoverflow.com/a/14412601/352796,How to create very basic left/right equal power panning with createPanner();,4851,William,William,1358422964,1424328455,1424328455,https://stackoverflow.com/questions/14378305/how-to-create-very-basic-left-right-equal-power-panning-with-createpanner,"<p>I can still get a panning effect by changing only the first argument to setPosition() and keeping other arguments zero.</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;script&gt;
var c = new webkitAudioContext();
var s = c.createBufferSource();
var g = c.createGainNode();
var p = c.createPanner();
s.connect(g);
g.connect(p);   
p.connect(c.destination);

function play(e) {
  var fr = new FileReader();
  var file = document.getElementById(""file"").files[0];
  fr.onload = function(e) {
    c.decodeAudioData(e.target.result, 
      function (buf) {
        s.buffer = buf;
        g.gain.value = 0.5;
        s.noteOn(0)
      },
      function () {
        console.error('decodeAudioData failed.');
      }
    );
  };
  fr.readAsArrayBuffer(file);
}

function pan(range) {
  var x = Math.sin(range.value * (Math.PI / 180));
  p.setPosition(x, 0, 0);
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  Choose your MP3 file:&lt;br&gt;
  &lt;input type=""file"" id=""file"" name=""file"" /&gt;&lt;br&gt;
  &lt;input type=""submit"" id=""go"" onclick=""play()"" value=""Play"" /&gt;&lt;br&gt;
  L&lt;input type=""range"" min=""-45"" max=""45"" value=""0"" onchange=""pan(this);""&gt;R
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>But to get a natural panning effect, you need to specify the third argument as well.</p>

<pre><code>function pan(range) {
  var xDeg = parseInt(range.value);
  var zDeg = xDeg + 90;
  if (zDeg &gt; 90) {
    zDeg = 180 - zDeg;
  }
  var x = Math.sin(xDeg * (Math.PI / 180));
  var z = Math.sin(zDeg * (Math.PI / 180));
  p.setPosition(x, 0, z);
}
</code></pre>
",kuu,kuu,1358584777,1358651582,1358651582
http://stackoverflow.com/a/14412929/1682918,How to detect the SQL error state of SQLException,5051,Mr rain,joey rohan,1358532165,1359385284,1358534035,https://stackoverflow.com/questions/14404866/how-to-detect-the-sql-error-state-of-sqlexception,"<p>The SQL standard (ISO/IEC-9075), specifically book 2 Foundation defines SQL States. They are a 2-character class value followed by a 3-character subclass value.</p>

<blockquote>
  <p>Class values that begin with one of the digits '0', '1', '2', '3', or '4' or one of the simple Latin upper case letters 'A', 'B', 'C', 'D', 'E', 'F', 'G', or 'H' are returned only for conditions defined in ISO/IEC 9075 or in any other International Standard. [...] Subclass values associated with such classes that also begin with one of those 13 characters are returned only for conditions defined in ISO/IEC 9075 or some other International Standard. [...] Subclass values associated with such classes that begin with one of the digits '5', '6', '7', '8', or '9' or one of the simple Latin upper case letters 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', or 'Z' are reserved for implementation-defined conditions and are called implementation-defined subclasses.</p>
  
  <p>Class values that begin with one of the digits '5', '6', '7', '8', or '9' or one of the simple Latin upper case letters 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', or 'Z' are reserved for implementation-defined exception conditions and are called implementation-defined classes. All subclass values except '000', which means no subclass, associated with such classes are reserved for implementation-defined conditions and are called implementation-defined subclasses.</p>
</blockquote>

<p><em>(from SQL:2011 book 2)</em></p>

<p>These standard classes (and standard defined subclasses) are listed in book 2 (foundation), 3 (CLI), 4 (PSM), 9 (MED), 10 (OLB), 13 (JRT) and 14 (XML). It also lists whether something is an exception, warning, successful completion condition or no-data completion condition (not all SQL states are errors!)</p>

<p>For example the sqlstates listed in your question are:</p>

<ul>
<li><code>08001</code>: class: connection exception, subclass: SQL-client unable to establish SQL-connection</li>
<li><code>08007</code>: class: connection exception, subclass: transaction resolution unknown</li>
<li><code>08S01</code>: class: connection exception, subclass: begins with S, so is an implementation-defined subclass (it is defined in ODBC as Communication link failure)</li>
<li><code>57P01</code>: class: begins with 5, so is an implementation defined-class, it seems to be the PostgreSQL sqlstate for ADMIN SHUTDOWN</li>
<li><code>HY000</code>: class: CLI-specific condition (defined in book 3, CLI), subclass: (no subclass)</li>
</ul>

<p><code>HY000</code> is a very generic error as some databases or drivers will return it for any error that has no specific sqlstate, so it is usually treated as fatal. I do that BoneCP's behavior to treat it as a reason to kill off the entire connection pool a bit overkill as <code>HY000</code> could also be thrown for relatively benign errors. The other sqlstates are usually an indication of a problem connecting to the database (<code>08001</code>, <code>08S01</code>) or unavailability of the database (<code>57P01</code>), or a problem with the database itself (<code>08007</code>).</p>
",Mark Rotteveel,,1358587686,1358587686,0
http://stackoverflow.com/a/14419483/1297909,How to refresh token with Google API client?,116261,seorch.me,Roman Starkov,1328972847,1556304167,1352332696,https://stackoverflow.com/questions/9241213/how-to-refresh-token-with-google-api-client,"<p>The problem is in the refresh token:
</p>

<pre><code>[refresh_token] =&gt; 1\/lov250YQTMCC9LRQbE6yMv-FiX_Offo79UXimV8kvwY
</code></pre>

<p>When a string with a <code>'/'</code> gets <code>json encoded</code>, It is escaped with a <code>'\'</code>, hence you need to remove it. </p>

<p>The refresh token in your case should be:
</p>

<pre><code>1/lov250YQTMCC9LRQbE6yMv-FiX_Offo79UXimV8kvwY
</code></pre>

<p>What i'm assuming you've done is that you've printed the json string which google sent back and copied and pasted the token into your code because if you <code>json_decode</code> it then it will correctly remove the <code>'\'</code> for you!</p>
",Asim,methode,1358634005,1437972554,1437972554
http://stackoverflow.com/a/14446414/102476,How can code in a JavaScript file get the file&#39;s URL?,22409,montrealist,,1250271901,1504950611,0,https://stackoverflow.com/questions/1279195/how-can-code-in-a-javascript-file-get-the-files-url,"<pre><code>var JS_SELF_URL = (function() {
    var script_tags = document.getElementsByTagName('script');
    return script_tags[script_tags.length-1].src;
})();
</code></pre>

<p>As the browser parses  tags, it also downloads and executes them. Therefore when your JS file is executed it is currently the last  tag parsed.</p>
",bradt,,1358799096,1358799096,0
http://stackoverflow.com/a/1445289/771663,Completely wrap an object in Python,12131,Smashery,Smashery,1253260902,1541381440,1253261992,https://stackoverflow.com/questions/1443129/completely-wrap-an-object-in-python,"<p>The simplest way in most cases is probably:</p>

<pre><code>class ObjectWrapper(BaseClass):
    def __init__(self, baseObject):
        self.__class__ = type(baseObject.__class__.__name__,
                              (self.__class__, baseObject.__class__),
                              {})
        self.__dict__ = baseObject.__dict__

    def overriddenMethod(self):
        ...
</code></pre>

<p>Working in this way, i.e. by reassigning self's <code>__class__</code> and <code>__dict__</code> in this fashion, you need only provide your overrides -- Python's normal attribute getting and setting mechanisms will do the rest... <em>mostly</em>.</p>

<p>You'll be in trouble only if <code>baseObject.__class__</code> defines <code>__slots__</code>, in which case the multiple inheritance approach doesn't work and you do need the cumbersome <code>__getattr__</code> (as others said, at least you don't need to worry that it will be called with attributes you're overriding, as it won't!-), <code>__setattr__</code> (a greater pain, as it DOES get called for every attribute), etc; and making <code>isinstance</code> and special methods work takes painstaking and cumbersome detailed work.</p>

<p>Essentially, <code>__slots__</code> means that a class is a special, each instance a lightweight ""value object"" NOT to be subject to further sophisticated manipulation, wrapping, etc, because the need to save a few bytes per instance of that class overrides all the normal concerns about flexibility and so on; it's therefore not surprising that dealing with such extreme, rare classes in the same smooth and flexible way as you can deal with 99%+ of Python objects is truly a pain. So DO you need to deal with <code>__slots__</code> (to the point of writing, testing, debugging and maintaining hundreds of lines of code just for those corner cases), or will the 99% solution in half a dozen lines suffice?-)</p>

<p>It should also be noted that this may lead to memory leaks, as creating a subclass adds the subclass to the base class' list of subclasses, and isn't removed when all instances of the subclass are GC'd.</p>
",Alex Martelli,David Wolever,1253287842,1455229565,1455229565
http://stackoverflow.com/a/14485901/711380,Resize QStackedWidget to the page which is opened,5876,darkgaze,UmNyobe,1358947144,1399450596,1399450596,https://stackoverflow.com/questions/14480696/resize-qstackedwidget-to-the-page-which-is-opened,"<p>You can use this <a href=""http://qt-project.org/faq/answer/how_can_i_get_a_qstackedwidget_to_automatically_switch_size_depending_on_th"" rel=""noreferrer"">Resizable StackedWidget</a></p>

<p>In my practice i remember that i had class derived from QStackedWidget with redefined addWidget method. In this method i did next:</p>

<pre><code>void ResizableStackedWidget::addWidget(QWidget* pWidget)
{
   pWidget-&gt;setSizePolicy(QSizePolicy::Ignored, QSizePolicy::Ignored);
   QStackedWidget::addWidget(pWidget);
}
</code></pre>

<p>And connected to currentChange(QWidget*) signal with this slot:</p>

<pre><code>void ResizableStackedWidget::onCurrentChanged(int index)
{
   QWidget* pWidget = widget(index);
   Q_ASSERT(pWidget);
   pWidget-&gt;setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);
   pWidget-&gt;adjustSize();
   adjustSize();
}
</code></pre>
",Milovidov,,1358962729,1358962729,0
http://stackoverflow.com/a/14511396/905697,How to get ActiveAdmin to work with Strong Parameters?,28675,Gary S. Weaver,Gary S. Weaver,1351269741,1430133642,1386278947,https://stackoverflow.com/questions/13091011/how-to-get-activeadmin-to-work-with-strong-parameters,"<p>The accepted answer did not work for me with resources defined in an engine, so I tracked down the original resource_params in inherited_resources/lib/inherited_resources/base_helpers.rb and came up with this solution which closer mimics that code, and which works with engines:</p>

<p>In <code>config/initializers/active_admin.rb</code>:</p>

<pre><code>ActiveAdmin::ResourceController.class_eval do
  # Allow ActiveAdmin admins to freely mass-assign when using strong_parameters
  def resource_params
    [(params[resource_request_name] || params[resource_instance_name]).try(:permit!) || {}]
  end
end
</code></pre>
",Nick Urban,Nick Urban,1359064017,1359131613,1359131613
http://stackoverflow.com/a/14519881/4212249,How do I bind to list of checkbox values with AngularJS?,562221,nickponline,Peter Mortensen,1359081406,1538550127,1483802168,https://stackoverflow.com/questions/14514461/how-do-i-bind-to-list-of-checkbox-values-with-angularjs,"<p>Here's a quick little reusable directive that seems to do what you're looking to do. I've simply called it <code>checkList</code>. It updates the array when the checkboxes change, and updates the checkboxes when the array changes.</p>

<pre class=""lang-javascript prettyprint-override""><code>app.directive('checkList', function() {
  return {
    scope: {
      list: '=checkList',
      value: '@'
    },
    link: function(scope, elem, attrs) {
      var handler = function(setup) {
        var checked = elem.prop('checked');
        var index = scope.list.indexOf(scope.value);

        if (checked &amp;&amp; index == -1) {
          if (setup) elem.prop('checked', false);
          else scope.list.push(scope.value);
        } else if (!checked &amp;&amp; index != -1) {
          if (setup) elem.prop('checked', true);
          else scope.list.splice(index, 1);
        }
      };

      var setupHandler = handler.bind(null, true);
      var changeHandler = handler.bind(null, false);

      elem.bind('change', function() {
        scope.$apply(changeHandler);
      });
      scope.$watch('list', setupHandler, true);
    }
  };
});
</code></pre>

<p>Here's a controller and a view that shows how you might go about using it.</p>

<pre class=""lang-html prettyprint-override""><code>&lt;div ng-app=""myApp"" ng-controller='MainController'&gt;
  &lt;span ng-repeat=""fruit in fruits""&gt;
    &lt;input type='checkbox' value=""{{fruit}}"" check-list='checked_fruits'&gt; {{fruit}}&lt;br /&gt;
  &lt;/span&gt;

  &lt;div&gt;The following fruits are checked: {{checked_fruits | json}}&lt;/div&gt;

  &lt;div&gt;Add fruit to the array manually:
    &lt;button ng-repeat=""fruit in fruits"" ng-click='addFruit(fruit)'&gt;{{fruit}}&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<pre class=""lang-javascript prettyprint-override""><code>app.controller('MainController', function($scope) {
  $scope.fruits = ['apple', 'orange', 'pear', 'naartjie'];
  $scope.checked_fruits = ['apple', 'pear'];
  $scope.addFruit = function(fruit) {
    if ($scope.checked_fruits.indexOf(fruit) != -1) return;
    $scope.checked_fruits.push(fruit);
  };
});
</code></pre>

<p>(The buttons demonstrate that changing the array will also update the checkboxes.)</p>

<p>Finally, here is an example of the directive in action on Plunker: <a href=""http://plnkr.co/edit/3YNLsyoG4PIBW6Kj7dRK?p=preview"">http://plnkr.co/edit/3YNLsyoG4PIBW6Kj7dRK?p=preview</a></p>
",Michelle Tilley,Michelle Tilley,1359109698,1374628779,1374628779
http://stackoverflow.com/a/14536035/201354,Detecting honest web crawlers,16185,JavadocMD,j0k,1234490133,1362170509,1359198201,https://stackoverflow.com/questions/544450/detecting-honest-web-crawlers,"<p>You said matching the user agent on bot may be awkward, but weve found it to be a pretty good match. Our studies have shown that it will cover about 98% of the hits you receive. We also havent come across any false positive matches yet either. If you want to raise this up to 99.9% you can include a few other well-known matches such as crawler, baiduspider, ia_archiver, curl etc. Weve tested this on our production systems over millions of hits. </p>

<p>Here are a few c# solutions for you:</p>

<h3>1) Simplest</h3>

<p>Is the fastest when processing a miss. i.e. traffic from a non-bot  a normal user.
Catches 99+% of crawlers.</p>

<pre><code>bool iscrawler = Regex.IsMatch(Request.UserAgent, @""bot|crawler|baiduspider|80legs|ia_archiver|voyager|curl|wget|yahoo! slurp|mediapartners-google"", RegexOptions.IgnoreCase);
</code></pre>

<h3>2) Medium</h3>

<p>Is the fastest when processing a hit. i.e. traffic from a bot. Pretty fast for misses too.
Catches close to 100% of crawlers.
Matches bot, crawler, spider upfront. 
You can add to it any other known crawlers.</p>

<pre><code>List&lt;string&gt; Crawlers3 = new List&lt;string&gt;()
{
    ""bot"",""crawler"",""spider"",""80legs"",""baidu"",""yahoo! slurp"",""ia_archiver"",""mediapartners-google"",
    ""lwp-trivial"",""nederland.zoek"",""ahoy"",""anthill"",""appie"",""arale"",""araneo"",""ariadne"",            
    ""atn_worldwide"",""atomz"",""bjaaland"",""ukonline"",""calif"",""combine"",""cosmos"",""cusco"",
    ""cyberspyder"",""digger"",""grabber"",""downloadexpress"",""ecollector"",""ebiness"",""esculapio"",
    ""esther"",""felix ide"",""hamahakki"",""kit-fireball"",""fouineur"",""freecrawl"",""desertrealm"",
    ""gcreep"",""golem"",""griffon"",""gromit"",""gulliver"",""gulper"",""whowhere"",""havindex"",""hotwired"",
    ""htdig"",""ingrid"",""informant"",""inspectorwww"",""iron33"",""teoma"",""ask jeeves"",""jeeves"",
    ""image.kapsi.net"",""kdd-explorer"",""label-grabber"",""larbin"",""linkidator"",""linkwalker"",
    ""lockon"",""marvin"",""mattie"",""mediafox"",""merzscope"",""nec-meshexplorer"",""udmsearch"",""moget"",
    ""motor"",""muncher"",""muninn"",""muscatferret"",""mwdsearch"",""sharp-info-agent"",""webmechanic"",
    ""netscoop"",""newscan-online"",""objectssearch"",""orbsearch"",""packrat"",""pageboy"",""parasite"",
    ""patric"",""pegasus"",""phpdig"",""piltdownman"",""pimptrain"",""plumtreewebaccessor"",""getterrobo-plus"",
    ""raven"",""roadrunner"",""robbie"",""robocrawl"",""robofox"",""webbandit"",""scooter"",""search-au"",
    ""searchprocess"",""senrigan"",""shagseeker"",""site valet"",""skymob"",""slurp"",""snooper"",""speedy"",
    ""curl_image_client"",""suke"",""www.sygol.com"",""tach_bw"",""templeton"",""titin"",""topiclink"",""udmsearch"",
    ""urlck"",""valkyrie libwww-perl"",""verticrawl"",""victoria"",""webscout"",""voyager"",""crawlpaper"",
    ""webcatcher"",""t-h-u-n-d-e-r-s-t-o-n-e"",""webmoose"",""pagesinventory"",""webquest"",""webreaper"",
    ""webwalker"",""winona"",""occam"",""robi"",""fdse"",""jobo"",""rhcs"",""gazz"",""dwcp"",""yeti"",""fido"",""wlm"",
    ""wolp"",""wwwc"",""xget"",""legs"",""curl"",""webs"",""wget"",""sift"",""cmc""
};
string ua = Request.UserAgent.ToLower();
bool iscrawler = Crawlers3.Exists(x =&gt; ua.Contains(x));
</code></pre>

<h3>3) Paranoid</h3>

<p>Is pretty fast, but a little slower than options 1 and 2.
Its the most accurate, and allows you to maintain the lists if you want.
You can maintain a separate list of names with bot in them if you are afraid of false positives in future.
If we get a short match we log it and check it for a false positive.</p>

<pre><code>// crawlers that have 'bot' in their useragent
List&lt;string&gt; Crawlers1 = new List&lt;string&gt;()
{
    ""googlebot"",""bingbot"",""yandexbot"",""ahrefsbot"",""msnbot"",""linkedinbot"",""exabot"",""compspybot"",
    ""yesupbot"",""paperlibot"",""tweetmemebot"",""semrushbot"",""gigabot"",""voilabot"",""adsbot-google"",
    ""botlink"",""alkalinebot"",""araybot"",""undrip bot"",""borg-bot"",""boxseabot"",""yodaobot"",""admedia bot"",
    ""ezooms.bot"",""confuzzledbot"",""coolbot"",""internet cruiser robot"",""yolinkbot"",""diibot"",""musobot"",
    ""dragonbot"",""elfinbot"",""wikiobot"",""twitterbot"",""contextad bot"",""hambot"",""iajabot"",""news bot"",
    ""irobot"",""socialradarbot"",""ko_yappo_robot"",""skimbot"",""psbot"",""rixbot"",""seznambot"",""careerbot"",
    ""simbot"",""solbot"",""mail.ru_bot"",""spiderbot"",""blekkobot"",""bitlybot"",""techbot"",""void-bot"",
    ""vwbot_k"",""diffbot"",""friendfeedbot"",""archive.org_bot"",""woriobot"",""crystalsemanticsbot"",""wepbot"",
    ""spbot"",""tweetedtimes bot"",""mj12bot"",""who.is bot"",""psbot"",""robot"",""jbot"",""bbot"",""bot""
};

// crawlers that don't have 'bot' in their useragent
List&lt;string&gt; Crawlers2 = new List&lt;string&gt;()
{
    ""baiduspider"",""80legs"",""baidu"",""yahoo! slurp"",""ia_archiver"",""mediapartners-google"",""lwp-trivial"",
    ""nederland.zoek"",""ahoy"",""anthill"",""appie"",""arale"",""araneo"",""ariadne"",""atn_worldwide"",""atomz"",
    ""bjaaland"",""ukonline"",""bspider"",""calif"",""christcrawler"",""combine"",""cosmos"",""cusco"",""cyberspyder"",
    ""cydralspider"",""digger"",""grabber"",""downloadexpress"",""ecollector"",""ebiness"",""esculapio"",""esther"",
    ""fastcrawler"",""felix ide"",""hamahakki"",""kit-fireball"",""fouineur"",""freecrawl"",""desertrealm"",
    ""gammaspider"",""gcreep"",""golem"",""griffon"",""gromit"",""gulliver"",""gulper"",""whowhere"",""portalbspider"",
    ""havindex"",""hotwired"",""htdig"",""ingrid"",""informant"",""infospiders"",""inspectorwww"",""iron33"",
    ""jcrawler"",""teoma"",""ask jeeves"",""jeeves"",""image.kapsi.net"",""kdd-explorer"",""label-grabber"",
    ""larbin"",""linkidator"",""linkwalker"",""lockon"",""logo_gif_crawler"",""marvin"",""mattie"",""mediafox"",
    ""merzscope"",""nec-meshexplorer"",""mindcrawler"",""udmsearch"",""moget"",""motor"",""muncher"",""muninn"",
    ""muscatferret"",""mwdsearch"",""sharp-info-agent"",""webmechanic"",""netscoop"",""newscan-online"",
    ""objectssearch"",""orbsearch"",""packrat"",""pageboy"",""parasite"",""patric"",""pegasus"",""perlcrawler"",
    ""phpdig"",""piltdownman"",""pimptrain"",""pjspider"",""plumtreewebaccessor"",""getterrobo-plus"",""raven"",
    ""roadrunner"",""robbie"",""robocrawl"",""robofox"",""webbandit"",""scooter"",""search-au"",""searchprocess"",
    ""senrigan"",""shagseeker"",""site valet"",""skymob"",""slcrawler"",""slurp"",""snooper"",""speedy"",
    ""spider_monkey"",""spiderline"",""curl_image_client"",""suke"",""www.sygol.com"",""tach_bw"",""templeton"",
    ""titin"",""topiclink"",""udmsearch"",""urlck"",""valkyrie libwww-perl"",""verticrawl"",""victoria"",
    ""webscout"",""voyager"",""crawlpaper"",""wapspider"",""webcatcher"",""t-h-u-n-d-e-r-s-t-o-n-e"",
    ""webmoose"",""pagesinventory"",""webquest"",""webreaper"",""webspider"",""webwalker"",""winona"",""occam"",
    ""robi"",""fdse"",""jobo"",""rhcs"",""gazz"",""dwcp"",""yeti"",""crawler"",""fido"",""wlm"",""wolp"",""wwwc"",""xget"",
    ""legs"",""curl"",""webs"",""wget"",""sift"",""cmc""
};

string ua = Request.UserAgent.ToLower();
string match = null;

if (ua.Contains(""bot"")) match = Crawlers1.FirstOrDefault(x =&gt; ua.Contains(x));
else match = Crawlers2.FirstOrDefault(x =&gt; ua.Contains(x));

if (match != null &amp;&amp; match.Length &lt; 5) Log(""Possible new crawler found: "", ua);

bool iscrawler = match != null;
</code></pre>

<p><strong>Notes:</strong></p>

<ul>
<li>Its tempting to just keep adding names to the regex option 1. But if you do this it will become slower. If you want a more complete list then linq with lambda is faster.</li>
<li>Make sure .ToLower() is outside of your linq method  remember the method is a loop and you would be modifying the string during each iteration.</li>
<li>Always put the heaviest bots at the start of the list, so they match sooner.</li>
<li>Put the lists into a static class so that they are not rebuilt on every pageview.</li>
</ul>

<p><strong>Honeypots</strong></p>

<p>The only real alternative to this is to create a honeypot link on your site that only a bot will reach. You then log the user agent strings that hit the honeypot page to a database. You can then use those logged strings to classify crawlers.</p>

<p><code>Postives:</code> It will match some unknown crawlers that arent declaring themselves.</p>

<p><code>Negatives:</code> Not all crawlers dig deep enough to hit every link on your site, and so they may not reach your honeypot.</p>
",Dave Sumter,Dave Sumter,1359196075,1359197753,1359197753
http://stackoverflow.com/a/14539953/378881,How to display a progress indicator in pure C/C++ (cout/printf)?,72720,xmllmx,xmllmx,1359223350,1545411161,1359223785,https://stackoverflow.com/questions/14539867/how-to-display-a-progress-indicator-in-pure-c-c-cout-printf,"<p>With a fixed width of your output, use something like the following:</p>

<pre><code>float progress = 0.0;
while (progress &lt; 1.0) {
    int barWidth = 70;

    std::cout &lt;&lt; ""["";
    int pos = barWidth * progress;
    for (int i = 0; i &lt; barWidth; ++i) {
        if (i &lt; pos) std::cout &lt;&lt; ""="";
        else if (i == pos) std::cout &lt;&lt; ""&gt;"";
        else std::cout &lt;&lt; "" "";
    }
    std::cout &lt;&lt; ""] "" &lt;&lt; int(progress * 100.0) &lt;&lt; "" %\r"";
    std::cout.flush();

    progress += 0.16; // for demonstration only
}
std::cout &lt;&lt; std::endl;
</code></pre>

<p><a href=""http://ideone.com/Yg8NKj"" rel=""noreferrer"">http://ideone.com/Yg8NKj</a></p>

<pre><code>[&gt;                                                                     ] 0 %
[===========&gt;                                                          ] 15 %
[======================&gt;                                               ] 31 %
[=================================&gt;                                    ] 47 %
[============================================&gt;                         ] 63 %
[========================================================&gt;             ] 80 %
[===================================================================&gt;  ] 96 %
</code></pre>

<p>Note that this output is <em>shown</em> one line below each other, but in a terminal emulator (I think also in Windows command line) it will be printed <em>on the same line</em>.</p>

<p>At the very end, don't forget to print a newline before printing more stuff.</p>

<p>If you want to remove the bar at the end, you have to overwrite it with spaces, to print something shorter like for example <code>""Done.""</code>.</p>

<p>Also, the same can of course be done using <code>printf</code> in C; adapting the code above should be straight-forward.</p>
",leemes,leemes,1359223871,1359224667,1359224667
http://stackoverflow.com/a/14561664/148668,How do I detect triangle and rectangle intersection?,4660,Barbara PM,,1358945260,1379908447,0,https://stackoverflow.com/questions/14480124/how-do-i-detect-triangle-and-rectangle-intersection,"<p>Ive finally done this using the function intersect for two lines. Lines are defined with initial point (x,y) and final point (x,y)</p>

<pre><code>// a1 is line1 start, a2 is line1 end, b1 is line2 start, b2 is line2 end
 static boolean intersects(Vector2 a1, Vector2 a2, Vector2 b1, Vector2 b2)
{
    Vector2 intersection = Vector2.Zero();

    Vector2 b = Vector2.Subtract(a2,a1);
    Vector2 d = Vector2.Subtract(b2,b1);
    float bDotDPerp = b.getX() * d.getY() - b.getY() * d.getX();

    // if b dot d == 0, it means the lines are parallel so have infinite intersection points
    if (bDotDPerp == 0)
        return false;

    Vector2 c = Vector2.Subtract(b1,a1);
    float t = (c.getX() * d.getY() - c.getY() * d.getX()) / bDotDPerp;
    if (t &lt; 0 || t &gt; 1)
        return false;

    float u = (c.getX() * b.getY() - c.getY() * b.getX()) / bDotDPerp;
    if (u &lt; 0 || u &gt; 1)
        return false;

    intersection = Vector2.Sum(a1,Vector2.Multiply(b,t));

    return true;
}
</code></pre>

<p>To know if a triagle intersects a rectangle you check the intersection of every line from the triangle with every line from the rectangle with function above.</p>
",Barbara PM,,1359374757,1359374757,0
http://stackoverflow.com/a/14620633/2127762,Accessing dict keys like an attribute?,143239,Izz ad-Din Ruhulessin,martineau,1297606998,1561844054,1508261313,https://stackoverflow.com/questions/4984647/accessing-dict-keys-like-an-attribute,"<p>The best way to do this is:</p>

<pre><code>class AttrDict(dict):
    def __init__(self, *args, **kwargs):
        super(AttrDict, self).__init__(*args, **kwargs)
        self.__dict__ = self
</code></pre>

<p>Some pros:</p>

<ul>
<li>It actually works!</li>
<li>No dictionary class methods are shadowed (e.g. <code>.keys()</code> work just fine)</li>
<li>Attributes and items are always in sync</li>
<li>Trying to access non-existent key as an attribute correctly raises <code>AttributeError</code> instead of <code>KeyError</code></li>
</ul>

<p>Cons:</p>

<ul>
<li>Methods like <code>.keys()</code> will <strong>not</strong> work just fine if they get overwritten by incoming data</li>
<li>Causes a <a href=""http://bugs.python.org/issue1469629"">memory leak</a> in Python &lt; 2.7.4 / Python3 &lt; 3.2.3</li>
<li>Pylint goes bananas with <code>E1123(unexpected-keyword-arg)</code> and <code>E1103(maybe-no-member)</code></li>
<li>For the uninitiated it seems like pure magic.</li>
</ul>

<h3>A short explanation on how this works</h3>

<ul>
<li>All python objects internally store their attributes in a dictionary that is named <code>__dict__</code>.</li>
<li>There is no requirement that the internal dictionary <code>__dict__</code> would need to be ""just a plain dict"", so we can assign any subclass of <code>dict()</code> to the internal dictionary.</li>
<li>In our case we simply assign the <code>AttrDict()</code> instance we are instantiating (as we are in <code>__init__</code>).</li>
<li>By calling <code>super()</code>'s <code>__init__()</code> method we made sure that it (already) behaves exactly like a dictionary, since that function calls all the <em>dictionary instantiation</em> code.</li>
</ul>

<h3>One reason why Python doesn't provide this functionality out of the box</h3>

<p>As noted in the ""cons"" list, this combines the namespace of stored keys (which may come from arbitrary and/or untrusted data!) with the namespace of builtin dict method attributes. For example:</p>

<pre><code>d = AttrDict()
d.update({'items':[""jacket"", ""necktie"", ""trousers""]})
for k, v in d.items():    # TypeError: 'list' object is not callable
    print ""Never reached!""
</code></pre>
",Kimvais,natevw,1359617601,1452718037,1452718037
http://stackoverflow.com/a/14620633/8879,Accessing dict keys like an attribute?,143239,Izz ad-Din Ruhulessin,martineau,1297606998,1561844054,1508261313,https://stackoverflow.com/questions/4984647/accessing-dict-keys-like-an-attribute,"<p>The best way to do this is:</p>

<pre><code>class AttrDict(dict):
    def __init__(self, *args, **kwargs):
        super(AttrDict, self).__init__(*args, **kwargs)
        self.__dict__ = self
</code></pre>

<p>Some pros:</p>

<ul>
<li>It actually works!</li>
<li>No dictionary class methods are shadowed (e.g. <code>.keys()</code> work just fine)</li>
<li>Attributes and items are always in sync</li>
<li>Trying to access non-existent key as an attribute correctly raises <code>AttributeError</code> instead of <code>KeyError</code></li>
</ul>

<p>Cons:</p>

<ul>
<li>Methods like <code>.keys()</code> will <strong>not</strong> work just fine if they get overwritten by incoming data</li>
<li>Causes a <a href=""http://bugs.python.org/issue1469629"">memory leak</a> in Python &lt; 2.7.4 / Python3 &lt; 3.2.3</li>
<li>Pylint goes bananas with <code>E1123(unexpected-keyword-arg)</code> and <code>E1103(maybe-no-member)</code></li>
<li>For the uninitiated it seems like pure magic.</li>
</ul>

<h3>A short explanation on how this works</h3>

<ul>
<li>All python objects internally store their attributes in a dictionary that is named <code>__dict__</code>.</li>
<li>There is no requirement that the internal dictionary <code>__dict__</code> would need to be ""just a plain dict"", so we can assign any subclass of <code>dict()</code> to the internal dictionary.</li>
<li>In our case we simply assign the <code>AttrDict()</code> instance we are instantiating (as we are in <code>__init__</code>).</li>
<li>By calling <code>super()</code>'s <code>__init__()</code> method we made sure that it (already) behaves exactly like a dictionary, since that function calls all the <em>dictionary instantiation</em> code.</li>
</ul>

<h3>One reason why Python doesn't provide this functionality out of the box</h3>

<p>As noted in the ""cons"" list, this combines the namespace of stored keys (which may come from arbitrary and/or untrusted data!) with the namespace of builtin dict method attributes. For example:</p>

<pre><code>d = AttrDict()
d.update({'items':[""jacket"", ""necktie"", ""trousers""]})
for k, v in d.items():    # TypeError: 'list' object is not callable
    print ""Never reached!""
</code></pre>
",Kimvais,natevw,1359617601,1452718037,1452718037
http://stackoverflow.com/a/14633482/3359826,ListView selection remains persistent after exiting choice mode,19449,CjS,Nikola K.,1332021884,1456906809,1433060073,https://stackoverflow.com/questions/9754170/listview-selection-remains-persistent-after-exiting-choice-mode,"<p>The main reason for the problem is that once the <code>ListView</code> selection mode is switched to <code>CHOICE_MODE_NONE</code>, the framework optimizes out the <strong>clear</strong> operation as it is no longer supporting 'selections'. I have improved the above workarounds a bit by clearing the selection state manually and then setting the mode in a delayed manner so the framework will have its turn to clear the state before turning the mode to <code>CHOICE_MODE_NONE</code>.</p>

<pre><code>final ListView lv = getListView();
lv.clearChoices();
for (int i = 0; i &lt; lv.getCount(); i++)
    lv.setItemChecked(i, false);
lv.post(new Runnable() {
    @Override
    public void run() {
        lv.setChoiceMode(ListView.CHOICE_MODE_NONE);
    }
});
</code></pre>
",Rudi,Sufian,1359660040,1404291714,1404291714
http://stackoverflow.com/a/1463370/6820620,How does exec work with locals?,7938,ubershmekel,Esteban K&#252;ber,1253665127,1548323383,1253731232,https://stackoverflow.com/questions/1463306/how-does-exec-work-with-locals,"<p>This issue is somewhat discussed in the <a href=""http://bugs.python.org/issue4831"" rel=""noreferrer"">Python3 bug list</a>.  Ultimately, to get this behavior, you need to do:</p>

<pre><code>def foo():
    ldict = {}
    exec(""a=3"",globals(),ldict)
    a = ldict['a']
    print(a)
</code></pre>

<p>And if you check <a href=""http://docs.python.org/3.1/library/functions.html#exec"" rel=""noreferrer"">the Python3 documentation on <code>exec</code></a>, you'll see the following note:</p>

<blockquote>
  <p>The default locals act as described for function <code>locals()</code> below: modifications to the default locals dictionary should not be attempted. Pass an explicit locals dictionary if you need to see effects of the code on locals after function exec() returns.</p>
</blockquote>

<p>Referring back to <a href=""http://bugs.python.org/msg79061"" rel=""noreferrer"">a specific message on the bug report</a>, Georg Brandl says:</p>

<blockquote>
  <p>To modify the locals of a function on the fly is not
  possible without several consequences: <strong>normally, function locals are not
  stored in a dictionary, but an array</strong>, whose indices are determined at
  compile time from the known locales.  This collides at least with new
  locals added by exec.  The old exec statement circumvented this, because
  the compiler knew that if an exec without globals/locals args occurred
  in a function, that namespace would be ""unoptimized"", i.e. not using the
  locals array.  Since exec() is now a normal function, <strong>the compiler does
  not know what ""exec"" may be bound to, and therefore can not treat is
  specially</strong>.</p>
</blockquote>

<p>Emphasis is mine.</p>

<p>So the gist of it is that Python3 can better optimize the use of local variables by <em>not</em> allowing this behavior by default.</p>

<p>And for the sake of completeness, as mentioned in the comments above, this <em>does</em> work as expected in Python 2.X:</p>

<pre><code>Python 2.6.2 (release26-maint, Apr 19 2009, 01:56:41) 
[GCC 4.3.3] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; def f():
...     a = 1
...     exec ""a=3""
...     print a
... 
&gt;&gt;&gt; f()
3
</code></pre>
",Mark Rushakoff,user2357112,1253666247,1532030401,1532030401
http://stackoverflow.com/a/14652605/917880,How to Cleanly Destroy WebBrowser Control,6257,hB0,,1322252828,1360095456,0,https://stackoverflow.com/questions/8273910/how-to-cleanly-destroy-webbrowser-control,"<p>I had many problems with ""access violation"" when closing webbrowser control, these are the steps that worked for me:</p>

<ol>
<li>Unadvise any previously advised events (DWebBrowserEvents2 in my case).</li>
<li>If you've attached click events unattach them like this: <code>_variant_t v; v.vt = VT_DISPATCH; v.pdispVal = 0; IHTMLDocument2-&gt;put_onclick(v);</code></li>
<li><code>IWebBrowser2-&gt;Stop()</code></li>
<li><code>IWebBrowser2-&gt;ExecWB(OLECMDID_CLOSE, OLECMDEXECOPT_DONTPROMPTUSER, 0, 0)</code> - when closing browser window through window.external.CloseWindow() I had unhandled exceptions and OLECMDID_CLOSE fixed it.</li>
<li><code>IWebBrowser2-&gt;put_Visible(VARIANT_FALSE)</code></li>
<li><code>IWebBrowser2-&gt;Release()</code></li>
<li><code>IOleInPlaceObject-&gt;InPlaceDeactivate()</code></li>
<li><code>IOleInPlaceObject-&gt;Release()</code></li>
<li><code>IOleObject-&gt;DoVerb(OLEIVERB_HIDE, NULL, IOleClientSite, 0, windowHandle_, NULL)</code></li>
<li><code>IOleObject-&gt;Close(OLECLOSE_NOSAVE)</code></li>
<li><code>OleSetContainedObject(IOleObject, FALSE)</code></li>
<li><code>IOleObject-&gt;SetClientSite(NULL)</code></li>
<li><code>CoDisconnectObject(IOleObject, 0)</code></li>
<li><code>IOleObject-&gt;Release()</code></li>
</ol>

<p><code>IWebBrowser2-&gt;Quit()</code> should not be called for WebBrowser control (CLSID_WebBrowser), it is intended only for Internet Explorer object (CLSID_InternetExplorer).</p>

<p>Why must it be so hard?</p>
",Czarek Tomczak,Czarek Tomczak,1359742818,1360095456,1360095456
http://stackoverflow.com/a/14654988/4068492,Center a map in d3 given a geoJSON object,55445,climboid,Hugolpz,1358989870,1522584435,1377183251,https://stackoverflow.com/questions/14492284/center-a-map-in-d3-given-a-geojson-object,"<p>The following seems to do approximately what you want. The scaling seems to be ok. When applying it to my map there is a small offset. This small offset is probably caused because I use the translate command to center the map, while I should probably use the center command.  </p>

<ol>
<li>Create a projection and d3.geo.path</li>
<li>Calculate the bounds of the current projection</li>
<li>Use these bounds to calculate the scale and translation</li>
<li>Recreate the projection </li>
</ol>

<p>In code:</p>

<pre><code>  var width  = 300;
  var height = 400;

  var vis = d3.select(""#vis"").append(""svg"")
      .attr(""width"", width).attr(""height"", height)

  d3.json(""nld.json"", function(json) {
      // create a first guess for the projection
      var center = d3.geo.centroid(json)
      var scale  = 150;
      var offset = [width/2, height/2];
      var projection = d3.geo.mercator().scale(scale).center(center)
          .translate(offset);

      // create the path
      var path = d3.geo.path().projection(projection);

      // using the path determine the bounds of the current map and use 
      // these to determine better values for the scale and translation
      var bounds  = path.bounds(json);
      var hscale  = scale*width  / (bounds[1][0] - bounds[0][0]);
      var vscale  = scale*height / (bounds[1][1] - bounds[0][1]);
      var scale   = (hscale &lt; vscale) ? hscale : vscale;
      var offset  = [width - (bounds[0][0] + bounds[1][0])/2,
                        height - (bounds[0][1] + bounds[1][1])/2];

      // new projection
      projection = d3.geo.mercator().center(center)
        .scale(scale).translate(offset);
      path = path.projection(projection);

      // add a rectangle to see the bound of the svg
      vis.append(""rect"").attr('width', width).attr('height', height)
        .style('stroke', 'black').style('fill', 'none');

      vis.selectAll(""path"").data(json.features).enter().append(""path"")
        .attr(""d"", path)
        .style(""fill"", ""red"")
        .style(""stroke-width"", ""1"")
        .style(""stroke"", ""black"")
    });
</code></pre>
",Jan van der Laan,,1359752540,1359752540,0
http://stackoverflow.com/a/14676665/1458162,How to import Google Web Font in CSS file?,573069,David,,1359921380,1545478034,0,https://stackoverflow.com/questions/14676613/how-to-import-google-web-font-in-css-file,"<p>Use the import method:</p>

<pre><code>@import url('https://fonts.googleapis.com/css?family=Open+Sans');
</code></pre>

<p>Obviously, ""Open Sans"" is the font that is imported. But you can replace it with yours. If it is a single word font, just include the font name after the <code>family=...</code> if it is two words, do as I did and add a <code>+</code> sign between each word.</p>

<p>NOTE: <strong>Place <code>@import</code> at the <i>very</i> first line of the CSS file.</strong> (<em>Thanks to @Ronny for pointing that out</em>).</p>

<p>In the Google Webfont Library, when you decide upon which fonts you want to use, it gives you a box with three tabs. Each tab is an injection method, HTML, CSS or JavaScript. The <code>@import</code> tab should give you the code you need for css files. See image:</p>

<p><a href=""https://images.wikia.com/private-tfc-storage/images/1/13/Myimg2.PNG"" rel=""noreferrer""><img src=""https://images.wikia.com/private-tfc-storage/images/1/13/Myimg2.PNG""></a></p>
",ModernDesigner,Dave Jarvis,1359921641,1505886506,1505886506
http://stackoverflow.com/a/14685465/1001675,Disable automatic formatting inside WordPress shortcodes,18901,helgatheviking,,1304965399,1470684886,0,https://stackoverflow.com/questions/5940854/disable-automatic-formatting-inside-wordpress-shortcodes,"<p>After implementing @helgatheviking's solution on multiple websites, I'm convinced that only these lines are required:</p>

<pre><code>//move wpautop filter to AFTER shortcode is processed
remove_filter( 'the_content', 'wpautop' );
add_filter( 'the_content', 'wpautop' , 99);
add_filter( 'the_content', 'shortcode_unautop',100 );
</code></pre>

<p>Put them in your <code>functions.php</code> file and you're set.</p>
",Matthew Blackford,,1359976098,1359976098,0
http://stackoverflow.com/a/14693789/868724,How can I remove the ANSI escape sequences from a string in python,36792,SpartaSixZero,Martijn Pieters,1360004824,1555546938,1360005748,https://stackoverflow.com/questions/14693701/how-can-i-remove-the-ansi-escape-sequences-from-a-string-in-python,"<p>Delete them with a regular expression:</p>

<pre><code>import re

ansi_escape = re.compile(r'\x1B\[[0-?]*[ -/]*[@-~]')
ansi_escape.sub('', sometext)
</code></pre>

<p>Demo:</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; ansi_escape = re.compile(r'\x1B\[[0-?]*[ -/]*[@-~]')
&gt;&gt;&gt; sometext = 'ls\r\n\x1b[00m\x1b[01;31mexamplefile.zip\x1b[00m\r\n\x1b[01;31m'
&gt;&gt;&gt; ansi_escape.sub('', sometext)
'ls\r\nexamplefile.zip\r\n'
</code></pre>

<p>(I've tidied up the escape sequence expression to follow <a href=""https://en.wikipedia.org/wiki/ANSI_escape_code"" rel=""noreferrer"">the Wikipedia overview of ANSI escape codes</a>, focusing on the CSI sequences, and ignoring the C1 codes as they are never used in today's UTF-8 world).</p>
",Martijn Pieters,Martijn Pieters,1360005172,1513786654,1513786654
http://stackoverflow.com/a/14721570/1483986,Drawing transparent ShapeRenderer in libgdx,26504,UVM,UVM,1360041017,1451542137,1360047049,https://stackoverflow.com/questions/14700577/drawing-transparent-shaperenderer-in-libgdx,"<p>The following code is working for me in this case, maybe it will help someone else:</p>

<pre><code>Gdx.gl.glEnable(GL10.GL_BLEND);
Gdx.gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
shapeRenderer.setProjectionMatrix(camera.combined);
shapeRenderer.begin(ShapeType.FilledCircle);
shapeRenderer.setColor(new Color(0, 1, 0, 0.5f));
shapeRenderer.filledCircle(470, 45, 10);
shapeRenderer.end();
Gdx.gl.glDisable(GL10.GL_BLEND);
</code></pre>
",UVM,Alex Crist,1360124894,1451542137,1451542137
http://stackoverflow.com/a/14731922/153718,How to resize images proportionally / keeping the aspect ratio?,276436,kobe,Moin Zaman,1287515591,1534184150,1339630281,https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio,"<p>I think this is a really <a href=""http://opensourcehacker.com/2011/12/01/calculate-aspect-ratio-conserving-resize-for-images-in-javascript/"" rel=""noreferrer"">cool method</a>:</p>

<pre class=""lang-js prettyprint-override""><code> /**
  * Conserve aspect ratio of the original region. Useful when shrinking/enlarging
  * images to fit into a certain area.
  *
  * @param {Number} srcWidth width of source image
  * @param {Number} srcHeight height of source image
  * @param {Number} maxWidth maximum available width
  * @param {Number} maxHeight maximum available height
  * @return {Object} { width, height }
  */
function calculateAspectRatioFit(srcWidth, srcHeight, maxWidth, maxHeight) {

    var ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);

    return { width: srcWidth*ratio, height: srcHeight*ratio };
 }
</code></pre>
",Jason J. Nathan,Pang,1360162343,1533779194,1533779194
http://stackoverflow.com/a/14734310/1950264,"Custom ContentProvider - openInputStream(), openOutputStream()",5982,hannasm,Community,1264607497,1363495162,1495535317,https://stackoverflow.com/questions/2148301/custom-contentprovider-openinputstream-openoutputstream,"<p>Check out this great example project from the always helpful CommonsWare.  It lets you create a ParcelFileDescriptor pipe with whatever InputStream you want on one side, and the receiving application on the other side:</p>

<p><a href=""https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Pipe"" rel=""noreferrer"">https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Pipe</a></p>

<p>The key parts are creating the pipe in <code>openFile</code>:</p>

<pre><code>public ParcelFileDescriptor openFile(Uri uri, String mode)
                                                        throws FileNotFoundException {
    ParcelFileDescriptor[] pipe=null;

    try {
      pipe=ParcelFileDescriptor.createPipe();
      AssetManager assets=getContext().getResources().getAssets();

      new TransferThread(assets.open(uri.getLastPathSegment()),
                       new AutoCloseOutputStream(pipe[1])).start();
    }
    catch (IOException e) {
      Log.e(getClass().getSimpleName(), ""Exception opening pipe"", e);
      throw new FileNotFoundException(""Could not open pipe for: ""
          + uri.toString());
    }

    return(pipe[0]);
  }
</code></pre>

<p>Then create a thread that keeps the pipe full:</p>

<pre><code>static class TransferThread extends Thread {
    InputStream in;
    OutputStream out;

    TransferThread(InputStream in, OutputStream out) {
        this.in = in;
        this.out = out;
    }

    @Override
    public void run() {
        byte[] buf = new byte[8192];
        int len;

        try {
            while ((len = in.read(buf)) &gt; 0) {
                out.write(buf, 0, len);
            }

            in.close();
            out.flush();
            out.close();
        } catch (IOException e) {
            Log.e(getClass().getSimpleName(),
                    ""Exception transferring file"", e);
        }
    }
}
</code></pre>
",Hans-Christoph Steiner,,1360169046,1360169046,0
http://stackoverflow.com/a/14753235/244576,How to make a Scroll Listener for WebView in Android,40115,Qadir Hussain,halfer,1360244451,1559914251,1484313570,https://stackoverflow.com/questions/14752523/how-to-make-a-scroll-listener-for-webview-in-android,"<p>Something like:</p>

<pre><code>public class ObservableWebView extends WebView
{
    private OnScrollChangedCallback mOnScrollChangedCallback;

    public ObservableWebView(final Context context)
    {
        super(context);
    }

    public ObservableWebView(final Context context, final AttributeSet attrs)
    {
        super(context, attrs);
    }

    public ObservableWebView(final Context context, final AttributeSet attrs, final int defStyle)
    {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onScrollChanged(final int l, final int t, final int oldl, final int oldt)
    {
        super.onScrollChanged(l, t, oldl, oldt);
        if(mOnScrollChangedCallback != null) mOnScrollChangedCallback.onScroll(l, t, oldl, oldt);
    }

    public OnScrollChangedCallback getOnScrollChangedCallback()
    {
        return mOnScrollChangedCallback;
    }

    public void setOnScrollChangedCallback(final OnScrollChangedCallback onScrollChangedCallback)
    {
        mOnScrollChangedCallback = onScrollChangedCallback;
    }

    /**
     * Impliment in the activity/fragment/view that you want to listen to the webview
     */
    public static interface OnScrollChangedCallback
    {
        public void onScroll(int l, int t, int oldl, int oldt);
    }
}
</code></pre>

<p>Should work, this is untested but this works for almost every other view in Android.</p>

<p>You would implement like:</p>

<pre><code>wv = (ObservableWebView) findViewById(R.id.scorllableWebview);
wv.setOnScrollChangedCallback(new OnScrollChangedCallback(){
    public void onScroll(int l, int t, int oldl, int oldt){
        if(t&gt; oldt){
            //Do stuff
            System.out.println(""Swipe UP"");
            //Do stuff
        }
        else if(t&lt; oldt){
            System.out.println(""Swipe Down"");
        }
        Log.d(TAG,""We Scrolled etc..."");
    }
});
</code></pre>
",Chris.Jenkins,user2025187,1360246566,1521195643,1521195643
http://stackoverflow.com/a/14777419/298171,Dynamic casting for unique_ptr,31299,betabandido,ildjarn,1339525868,1539212667,1339525991,https://stackoverflow.com/questions/11002641/dynamic-casting-for-unique-ptr,"<p>How about this for a C++11 approach:</p>

<pre><code>template &lt;class T_SRC, class T_DEST&gt;
std::unique_ptr&lt;T_DEST&gt; unique_cast(std::unique_ptr&lt;T_SRC&gt; &amp;&amp;src)
{
    if (!src) return std::unique_ptr&lt;T_DEST&gt;();

    // Throws a std::bad_cast() if this doesn't work out
    T_DEST *dest_ptr = &amp;dynamic_cast&lt;T_DEST &amp;&gt;(*src.get());

    src.release();
    return std::unique_ptr&lt;T_DEST&gt; ret(dest_ptr);
}
</code></pre>
",Bob F,,1360342155,1360342155,0
http://stackoverflow.com/a/1479881/14379,How to stream XML data using XOM?,2421,Jonik,Community,1244499279,1373966715,1495540891,https://stackoverflow.com/questions/967288/how-to-stream-xml-data-using-xom,"<p>I ran in to the same issue, but found it's pretty simple to do what you mentioned as an option and subclass Serializer as follows:</p>

<pre><code>public class StreamSerializer extends Serializer {

    public StreamSerializer(OutputStream out) {
        super(out);
    }

    @Override
    public void write(Element element) throws IOException {
        super.write(element);
    }

    @Override
    public void writeXMLDeclaration() throws IOException {
        super.writeXMLDeclaration();
    }

    @Override
    public void writeEndTag(Element element) throws IOException {
        super.writeEndTag(element);
    }

    @Override
    public void writeStartTag(Element element) throws IOException {
        super.writeStartTag(element);
    }

}
</code></pre>

<p>Then you can still take advantage of the various XOM config like setIdent, etc. but use it like this:</p>

<pre><code>Element rootElement = new Element(""resultset"");
StreamSerializer serializer = new StreamSerializer(out);
serializer.setIndent(4);
serializer.writeXMLDeclaration();
serializer.writeStartTag(rootElement);
while(hasNextElement()) {
    serializer.write(nextElement());
}
serializer.writeEndTag(rootElement);
serializer.flush();
</code></pre>
",Dave L.,kostmo,1253919200,1344218100,1344218100
http://stackoverflow.com/a/14831904/654755,Django Celery ConnectionError: Too many heartbeats missed,4433,Jeff,,1360602684,1360669818,0,https://stackoverflow.com/questions/14817181/django-celery-connectionerror-too-many-heartbeats-missed,"<p>How often does it happen?</p>

<p>It may be that the heartbeat monitoring is not working properly in your case.
The heartbeat support was introduced fairly recently, so there may be bugs.
I cannot reproduce this here, so I need more data to understand what is going on.</p>

<p>You can disable heartbeats by setting <code>BROKER_HEARTBEAT=0</code>.
If this is a bug then the worker should run fine, but it will not be able
to quickly detect a broken connection.  Being unable to detect connection loss is only
a problem in some environments (usually caused by specific router/firewall configurations)</p>
",asksol,,1360669818,1360669818,0
http://stackoverflow.com/a/14834599/786644,Ranking array elements,16749,Y&#249;z Nagami,Denys S&#233;guret,1360678527,1560553042,1360747131,https://stackoverflow.com/questions/14834571/ranking-array-elements,"<pre><code>var arr = [79, 5, 18, 5, 32, 1, 16, 1, 82, 13];
var sorted = arr.slice().sort(function(a,b){return b-a})
var ranks = arr.slice().map(function(v){ return sorted.indexOf(v)+1 });
</code></pre>

<p>Result :</p>

<pre><code>[2, 7, 4, 7, 3, 9, 5, 9, 1, 6]
</code></pre>

<p>If you want to be compatible with old browsers, you may have to <a href=""https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf"" rel=""noreferrer"">define a shim for indexOf</a> and for <a href=""https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map"" rel=""noreferrer"">map</a> (note that if you want to do this very fast for very big arrays, you'd better use <code>for</code> loops and use an object as map instead of <code>indexOf</code>).</p>
",Denys Sguret,Denys Sguret,1360678620,1360679761,1360679761
http://stackoverflow.com/a/1483487/729729,How to get all  elements that are highlighted,2924,John Sheares,Lightness Races in Orbit,1254027941,1527086365,1323876390,https://stackoverflow.com/questions/1482832/how-to-get-all-elements-that-are-highlighted,"<p>You could use a <a href=""https://developer.mozilla.org/en/DOM/TreeWalker"" rel=""noreferrer""><code>TreeWalker</code></a> using <a href=""https://developer.mozilla.org/en/DOM/document.createTreeWalker"" rel=""noreferrer""><code>document.createTreeWalker</code></a>. An example is below. It lists all elements that are partially or fully selected. You can easily change the behaviour by modifying the parameters passed to <code>document.createTreeWalker</code>.</p>

<p>Note that in Firefox you don't need to check for the existence of the <code>getRangeAt</code> method of a selection. This check is only required for older versions of WebKit. Also, IE &lt; 9 does not support TreeWalker or Range, so the following won't work in those browsers.</p>

<p><strong>Edit</strong> Fixed as per comments below.</p>

<pre><code>function rangeIntersectsNode(range, node) {
    var nodeRange;
    if (range.intersectsNode) {
        return range.intersectsNode(node);
    } else {
        nodeRange = node.ownerDocument.createRange();
        try {
            nodeRange.selectNode(node);
        } catch (e) {
            nodeRange.selectNodeContents(node);
        }

        return range.compareBoundaryPoints(Range.END_TO_START, nodeRange) == -1 &amp;&amp;
            range.compareBoundaryPoints(Range.START_TO_END, nodeRange) == 1;
    }
}

function getSelectedElementTags(win) {
    var range, sel, elmlist, treeWalker, containerElement;
    sel = win.getSelection();
    if (sel.rangeCount &gt; 0) {
        range = sel.getRangeAt(0);
    }

    if (range) {
        containerElement = range.commonAncestorContainer;
        if (containerElement.nodeType != 1) {
            containerElement = containerElement.parentNode;
        }

        treeWalker = win.document.createTreeWalker(
            containerElement,
            NodeFilter.SHOW_ELEMENT,
            function(node) { return rangeIntersectsNode(range, node) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT; },
            false
        );

        elmlist = [treeWalker.currentNode];
        while (treeWalker.nextNode()) {
            elmlist.push(treeWalker.currentNode);
        }

        console.log(elmlist);
    }
}

&lt;input type=""button"" onclick=""getSelectedElementTags(window)"" value=""Get selected elements""&gt;
</code></pre>
",Tim Down,Tim Down,1254053938,1322145273,1322145273
http://stackoverflow.com/a/14845740/119937,Altering an Enum field using Alembic,17838,bboe,Mark Amery,1360720399,1534729170,1532948385,https://stackoverflow.com/questions/14845203/altering-an-enum-field-using-alembic,"<p>I decided to try to follow the <a href=""https://stackoverflow.com/questions/1771543/postgresql-updating-an-enum-type"">postgres approach</a> as directly as possible and came up with the following migration.</p>

<pre><code>from alembic import op
import sqlalchemy as sa

old_options = ('nonexistent_executable', 'signal', 'success', 'timed_out')
new_options = sorted(old_options + ('output_limit_exceeded',))

old_type = sa.Enum(*old_options, name='status')
new_type = sa.Enum(*new_options, name='status')
tmp_type = sa.Enum(*new_options, name='_status')

tcr = sa.sql.table('testcaseresult',
                   sa.Column('status', new_type, nullable=False))


def upgrade():
    # Create a tempoary ""_status"" type, convert and drop the ""old"" type
    tmp_type.create(op.get_bind(), checkfirst=False)
    op.execute('ALTER TABLE testcaseresult ALTER COLUMN status TYPE _status'
               ' USING status::text::_status')
    old_type.drop(op.get_bind(), checkfirst=False)
    # Create and convert to the ""new"" status type
    new_type.create(op.get_bind(), checkfirst=False)
    op.execute('ALTER TABLE testcaseresult ALTER COLUMN status TYPE status'
               ' USING status::text::status')
    tmp_type.drop(op.get_bind(), checkfirst=False)


def downgrade():
    # Convert 'output_limit_exceeded' status into 'timed_out'
    op.execute(tcr.update().where(tcr.c.status==u'output_limit_exceeded')
               .values(status='timed_out'))
    # Create a tempoary ""_status"" type, convert and drop the ""new"" type
    tmp_type.create(op.get_bind(), checkfirst=False)
    op.execute('ALTER TABLE testcaseresult ALTER COLUMN status TYPE _status'
               ' USING status::text::_status')
    new_type.drop(op.get_bind(), checkfirst=False)
    # Create and convert to the ""old"" status type
    old_type.create(op.get_bind(), checkfirst=False)
    op.execute('ALTER TABLE testcaseresult ALTER COLUMN status TYPE status'
               ' USING status::text::status')
    tmp_type.drop(op.get_bind(), checkfirst=False)
</code></pre>

<p>It appears that alembic has no direct support for the <code>USING</code> statement in its <code>alter_table</code> method.</p>
",bboe,Community,1360724643,1481123795,1495540506
http://stackoverflow.com/a/14853974/483704,How to compare arrays in JavaScript?,735998,Julian H. Lam,user633183,1319120877,1561719293,1443997260,https://stackoverflow.com/questions/7837456/how-to-compare-arrays-in-javascript,"<p>To compare arrays, loop through them and compare every value:  </p>

<h2>Comparing arrays:</h2>

<pre><code>// Warn if overriding existing method
if(Array.prototype.equals)
    console.warn(""Overriding existing Array.prototype.equals. Possible causes: New API defines the method, there's a framework conflict or you've got double inclusions in your code."");
// attach the .equals method to Array's prototype to call it on any array
Array.prototype.equals = function (array) {
    // if the other array is a falsy value, return
    if (!array)
        return false;

    // compare lengths - can save a lot of time 
    if (this.length != array.length)
        return false;

    for (var i = 0, l=this.length; i &lt; l; i++) {
        // Check if we have nested arrays
        if (this[i] instanceof Array &amp;&amp; array[i] instanceof Array) {
            // recurse into the nested arrays
            if (!this[i].equals(array[i]))
                return false;       
        }           
        else if (this[i] != array[i]) { 
            // Warning - two different object instances will never be equal: {x:20} != {x:20}
            return false;   
        }           
    }       
    return true;
}
// Hide method from for-in loops
Object.defineProperty(Array.prototype, ""equals"", {enumerable: false});
</code></pre>

<h3>Usage:</h3>

<pre><code>[1, 2, [3, 4]].equals([1, 2, [3, 2]]) === false;
[1, ""2,3""].equals([1, 2, 3]) === false;
[1, 2, [3, 4]].equals([1, 2, [3, 4]]) === true;
[1, 2, 1, 2].equals([1, 2, 1, 2]) === true;
</code></pre>

<p>You may say ""<em>But it is much faster to compare strings - no loops...</em>"" well, then you should note there ARE loops. First recursive loop that converts Array to string and second, that compares two strings. So this method <strong>is faster than use of string</strong>.</p>

<p><sub>I believe that larger amounts of data should be always stored in arrays, not in objects. However if you use objects, they can be partially compared too.<br>
<strong>Here's how:</strong></sub></p>

<h2>Comparing objects:</h2>

<p>I've stated above, that two object <strong>instances</strong> will never be equal, even if they contain same data at the moment:</p>

<pre><code>({a:1, foo:""bar"", numberOfTheBeast: 666}) == ({a:1, foo:""bar"", numberOfTheBeast: 666})  //false
</code></pre>

<p>This has a reason, since there may be, for example <a href=""https://stackoverflow.com/a/201471/607407"">private variables within objects.</a></p>

<p>However, if you just use object structure to contain data, comparing is still possible:</p>

<pre><code>Object.prototype.equals = function(object2) {
    //For the first loop, we only check for types
    for (propName in this) {
        //Check for inherited methods and properties - like .equals itself
        //https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty
        //Return false if the return value is different
        if (this.hasOwnProperty(propName) != object2.hasOwnProperty(propName)) {
            return false;
        }
        //Check instance type
        else if (typeof this[propName] != typeof object2[propName]) {
            //Different types =&gt; not equal
            return false;
        }
    }
    //Now a deeper check using other objects property names
    for(propName in object2) {
        //We must check instances anyway, there may be a property that only exists in object2
            //I wonder, if remembering the checked values from the first loop would be faster or not 
        if (this.hasOwnProperty(propName) != object2.hasOwnProperty(propName)) {
            return false;
        }
        else if (typeof this[propName] != typeof object2[propName]) {
            return false;
        }
        //If the property is inherited, do not check any more (it must be equa if both objects inherit it)
        if(!this.hasOwnProperty(propName))
          continue;

        //Now the detail check and recursion

        //This returns the script back to the array comparing
        /**REQUIRES Array.equals**/
        if (this[propName] instanceof Array &amp;&amp; object2[propName] instanceof Array) {
                   // recurse into the nested arrays
           if (!this[propName].equals(object2[propName]))
                        return false;
        }
        else if (this[propName] instanceof Object &amp;&amp; object2[propName] instanceof Object) {
                   // recurse into another objects
                   //console.log(""Recursing to compare "", this[propName],""with"",object2[propName], "" both named \""""+propName+""\"""");
           if (!this[propName].equals(object2[propName]))
                        return false;
        }
        //Normal value comparison for strings and numbers
        else if(this[propName] != object2[propName]) {
           return false;
        }
    }
    //If everything passed, let's say YES
    return true;
}  
</code></pre>

<p>However, remember that this one is to serve in comparing JSON like data, not class instances and other stuff. If you want to compare mor complicated objects, look at <a href=""https://stackoverflow.com/a/1144249/607407"">this answer and it's superlong function</a>.<br>
To make this work with <code>Array.equals</code> you must edit the original function a little bit:</p>

<pre><code>...
    // Check if we have nested arrays
    if (this[i] instanceof Array &amp;&amp; array[i] instanceof Array) {
        // recurse into the nested arrays
        if (!this[i].equals(array[i]))
            return false;
    }
    /**REQUIRES OBJECT COMPARE**/
    else if (this[i] instanceof Object &amp;&amp; array[i] instanceof Object) {
        // recurse into another objects
        //console.log(""Recursing to compare "", this[propName],""with"",object2[propName], "" both named \""""+propName+""\"""");
        if (!this[i].equals(array[i]))
            return false;
        }
    else if (this[i] != array[i]) {
...
</code></pre>

<p>I made a <a href=""http://jsfiddle.net/Darker/SBtu2/"" rel=""noreferrer"">little test tool for both of the functions</a>.</p>

<h2>Bonus: Nested arrays with <code>indexOf</code> and <code>contains</code></h2>

<p><a href=""https://stackoverflow.com/questions/7837456/how-to-compare-arrays-in-javascript/14853974?noredirect=1#comment59337127_14853974"">Samy Bencherif has prepared</a> useful functions for the case you're searching for a specific object in nested arrays, which are available here: <a href=""https://jsfiddle.net/SamyBencherif/8352y6yw/"" rel=""noreferrer"">https://jsfiddle.net/SamyBencherif/8352y6yw/</a></p>
",Tom Zato,Rob Bednark,1360759745,1520657108,1520657108
http://stackoverflow.com/a/14853974/805649,How to compare arrays in JavaScript?,735998,Julian H. Lam,user633183,1319120877,1561719293,1443997260,https://stackoverflow.com/questions/7837456/how-to-compare-arrays-in-javascript,"<p>To compare arrays, loop through them and compare every value:  </p>

<h2>Comparing arrays:</h2>

<pre><code>// Warn if overriding existing method
if(Array.prototype.equals)
    console.warn(""Overriding existing Array.prototype.equals. Possible causes: New API defines the method, there's a framework conflict or you've got double inclusions in your code."");
// attach the .equals method to Array's prototype to call it on any array
Array.prototype.equals = function (array) {
    // if the other array is a falsy value, return
    if (!array)
        return false;

    // compare lengths - can save a lot of time 
    if (this.length != array.length)
        return false;

    for (var i = 0, l=this.length; i &lt; l; i++) {
        // Check if we have nested arrays
        if (this[i] instanceof Array &amp;&amp; array[i] instanceof Array) {
            // recurse into the nested arrays
            if (!this[i].equals(array[i]))
                return false;       
        }           
        else if (this[i] != array[i]) { 
            // Warning - two different object instances will never be equal: {x:20} != {x:20}
            return false;   
        }           
    }       
    return true;
}
// Hide method from for-in loops
Object.defineProperty(Array.prototype, ""equals"", {enumerable: false});
</code></pre>

<h3>Usage:</h3>

<pre><code>[1, 2, [3, 4]].equals([1, 2, [3, 2]]) === false;
[1, ""2,3""].equals([1, 2, 3]) === false;
[1, 2, [3, 4]].equals([1, 2, [3, 4]]) === true;
[1, 2, 1, 2].equals([1, 2, 1, 2]) === true;
</code></pre>

<p>You may say ""<em>But it is much faster to compare strings - no loops...</em>"" well, then you should note there ARE loops. First recursive loop that converts Array to string and second, that compares two strings. So this method <strong>is faster than use of string</strong>.</p>

<p><sub>I believe that larger amounts of data should be always stored in arrays, not in objects. However if you use objects, they can be partially compared too.<br>
<strong>Here's how:</strong></sub></p>

<h2>Comparing objects:</h2>

<p>I've stated above, that two object <strong>instances</strong> will never be equal, even if they contain same data at the moment:</p>

<pre><code>({a:1, foo:""bar"", numberOfTheBeast: 666}) == ({a:1, foo:""bar"", numberOfTheBeast: 666})  //false
</code></pre>

<p>This has a reason, since there may be, for example <a href=""https://stackoverflow.com/a/201471/607407"">private variables within objects.</a></p>

<p>However, if you just use object structure to contain data, comparing is still possible:</p>

<pre><code>Object.prototype.equals = function(object2) {
    //For the first loop, we only check for types
    for (propName in this) {
        //Check for inherited methods and properties - like .equals itself
        //https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty
        //Return false if the return value is different
        if (this.hasOwnProperty(propName) != object2.hasOwnProperty(propName)) {
            return false;
        }
        //Check instance type
        else if (typeof this[propName] != typeof object2[propName]) {
            //Different types =&gt; not equal
            return false;
        }
    }
    //Now a deeper check using other objects property names
    for(propName in object2) {
        //We must check instances anyway, there may be a property that only exists in object2
            //I wonder, if remembering the checked values from the first loop would be faster or not 
        if (this.hasOwnProperty(propName) != object2.hasOwnProperty(propName)) {
            return false;
        }
        else if (typeof this[propName] != typeof object2[propName]) {
            return false;
        }
        //If the property is inherited, do not check any more (it must be equa if both objects inherit it)
        if(!this.hasOwnProperty(propName))
          continue;

        //Now the detail check and recursion

        //This returns the script back to the array comparing
        /**REQUIRES Array.equals**/
        if (this[propName] instanceof Array &amp;&amp; object2[propName] instanceof Array) {
                   // recurse into the nested arrays
           if (!this[propName].equals(object2[propName]))
                        return false;
        }
        else if (this[propName] instanceof Object &amp;&amp; object2[propName] instanceof Object) {
                   // recurse into another objects
                   //console.log(""Recursing to compare "", this[propName],""with"",object2[propName], "" both named \""""+propName+""\"""");
           if (!this[propName].equals(object2[propName]))
                        return false;
        }
        //Normal value comparison for strings and numbers
        else if(this[propName] != object2[propName]) {
           return false;
        }
    }
    //If everything passed, let's say YES
    return true;
}  
</code></pre>

<p>However, remember that this one is to serve in comparing JSON like data, not class instances and other stuff. If you want to compare mor complicated objects, look at <a href=""https://stackoverflow.com/a/1144249/607407"">this answer and it's superlong function</a>.<br>
To make this work with <code>Array.equals</code> you must edit the original function a little bit:</p>

<pre><code>...
    // Check if we have nested arrays
    if (this[i] instanceof Array &amp;&amp; array[i] instanceof Array) {
        // recurse into the nested arrays
        if (!this[i].equals(array[i]))
            return false;
    }
    /**REQUIRES OBJECT COMPARE**/
    else if (this[i] instanceof Object &amp;&amp; array[i] instanceof Object) {
        // recurse into another objects
        //console.log(""Recursing to compare "", this[propName],""with"",object2[propName], "" both named \""""+propName+""\"""");
        if (!this[i].equals(array[i]))
            return false;
        }
    else if (this[i] != array[i]) {
...
</code></pre>

<p>I made a <a href=""http://jsfiddle.net/Darker/SBtu2/"" rel=""noreferrer"">little test tool for both of the functions</a>.</p>

<h2>Bonus: Nested arrays with <code>indexOf</code> and <code>contains</code></h2>

<p><a href=""https://stackoverflow.com/questions/7837456/how-to-compare-arrays-in-javascript/14853974?noredirect=1#comment59337127_14853974"">Samy Bencherif has prepared</a> useful functions for the case you're searching for a specific object in nested arrays, which are available here: <a href=""https://jsfiddle.net/SamyBencherif/8352y6yw/"" rel=""noreferrer"">https://jsfiddle.net/SamyBencherif/8352y6yw/</a></p>
",Tom Zato,Rob Bednark,1360759745,1520657108,1520657108
http://stackoverflow.com/a/14859546/1323144,Calculating Median in Ruby,26795,tomgalpin,Morgan,1360775733,1552269046,1360777917,https://stackoverflow.com/questions/14859120/calculating-median-in-ruby,"<p>Here is a solution that works on both even and odd length array and won't alter the array:</p>

<pre><code>def median(array)
  sorted = array.sort
  len = sorted.length
  (sorted[(len - 1) / 2] + sorted[len / 2]) / 2.0
end
</code></pre>
",nbarraille,tanman,1360777026,1454703076,1454703076
http://stackoverflow.com/a/14869071/185839,&quot;Enter&quot; Keypress to Submit the Form is not working in IE 9/10,8958,Rajasekhar,Samuel Liew,1360820206,1360823703,1360822900,https://stackoverflow.com/questions/14868424/enter-keypress-to-submit-the-form-is-not-working-in-ie-9-10,"<p><strong>Points to note:</strong></p>

<ol>
<li>You are missing a closing bracket.</li>
<li>Also, change the selector to <code>window</code></li>
<li>Use <code>.on()</code> function</li>
<li>Use the <code>.which</code> property of event. See jQuery <a href=""http://api.jquery.com/event.which/"" rel=""nofollow noreferrer"">documentation</a></li>
<li>The keycode is an integer - remove the quotes</li>
<li>Add a <code>return false;</code> to stop the event from bubbling to the form (and possibly submitting the form twice). See <a href=""https://stackoverflow.com/questions/699065/submitting-a-form-on-enter-with-jquery?rq=1"">Submitting a form on &#39;Enter&#39; with jQuery?</a> </li>
</ol>

<p><strong>Final code:</strong></p>

<pre><code>$(function() {
    $(window).on('keydown', function(event) {
        if(event.which == 13) {
            doPost();
            return false;
        }
    });
});
</code></pre>
",Samuel Liew,Community,1360823703,1360823703,1495542765
http://stackoverflow.com/a/14883803/5678759,Resolve a relative path in a URL with PHP,2199,Jacob Cruz,Community,1360873882,1360875025,1495541748,https://stackoverflow.com/questions/14883501/resolve-a-relative-path-in-a-url-with-php,"<p>This is a more simple problem then you are thinking about it. All you need to do is <code>explode()</code> on the <code>/</code> character, and parse out all of the individual segments using a stack. As you traverse the array from left to right, if you see <code>.</code>, do nothing. If you see <code>..</code>, pop an element from the stack. Otherwise, push an element onto the stack.</p>

<pre><code>$str = 'domain.com/dir_1/dir_2/dir_3/./../../../';
$array = explode( '/', $str);
$domain = array_shift( $array);

$parents = array();
foreach( $array as $dir) {
    switch( $dir) {
        case '.':
        // Don't need to do anything here
        break;
        case '..':
            array_pop( $parents);
        break;
        default:
            $parents[] = $dir;
        break;
    }
}

echo $domain . '/' . implode( '/', $parents);
</code></pre>

<p>This will properly resolve the URLs in all of your test cases.</p>

<p>Note that error checking is left as an exercise to the user (i.e. when the <code>$parents</code> stack is empty and you try to pop something off of it).</p>
",nickb,,1360875025,1360875025,0
http://stackoverflow.com/a/14885950/835696,Getting request payload from POST request in Java servlet,230210,Fasih Awan,Fasih Awan,1359131070,1558297326,1386371895,https://stackoverflow.com/questions/14525982/getting-request-payload-from-post-request-in-java-servlet,"<pre><code>String payloadRequest = getBody(request);
</code></pre>

<p>Using this method </p>

<pre><code>public static String getBody(HttpServletRequest request) throws IOException {

    String body = null;
    StringBuilder stringBuilder = new StringBuilder();
    BufferedReader bufferedReader = null;

    try {
        InputStream inputStream = request.getInputStream();
        if (inputStream != null) {
            bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
            char[] charBuffer = new char[128];
            int bytesRead = -1;
            while ((bytesRead = bufferedReader.read(charBuffer)) &gt; 0) {
                stringBuilder.append(charBuffer, 0, bytesRead);
            }
        } else {
            stringBuilder.append("""");
        }
    } catch (IOException ex) {
        throw ex;
    } finally {
        if (bufferedReader != null) {
            try {
                bufferedReader.close();
            } catch (IOException ex) {
                throw ex;
            }
        }
    }

    body = stringBuilder.toString();
    return body;
}
</code></pre>
",Adrian Ayala Torres,cricket_007,1360884474,1526994963,1526994963
http://stackoverflow.com/a/14902564/134960,"json.loads allows duplicate keys in a dictionary, overwriting the first value",7700,Anuj Acharya,MattDMo,1360957960,1550256578,1451443283,https://stackoverflow.com/questions/14902299/json-loads-allows-duplicate-keys-in-a-dictionary-overwriting-the-first-value,"<p><a href=""http://tools.ietf.org/html/rfc4627#section-2.2"">The rfc 4627 for <code>application/json</code> media type</a> recommends unique keys but it doesn't forbid them explicitly:</p>

<blockquote>
  <p>The names within an object SHOULD be unique.</p>
</blockquote>

<p>From <a href=""http://tools.ietf.org/html/rfc2119"">rfc 2119</a>:</p>

<blockquote>
  <p><strong>SHOULD</strong>   This word, or the adjective ""RECOMMENDED"", mean that there<br>
  may exist valid reasons in particular circumstances to ignore a<br>
  particular item, but the full implications must be understood and<br>
  carefully weighed before choosing a different course.</p>
</blockquote>

<pre><code>import json

def dict_raise_on_duplicates(ordered_pairs):
    """"""Reject duplicate keys.""""""
    d = {}
    for k, v in ordered_pairs:
        if k in d:
           raise ValueError(""duplicate key: %r"" % (k,))
        else:
           d[k] = v
    return d

json.loads(raw_post_data, object_pairs_hook=dict_raise_on_duplicates)
# -&gt; ValueError: duplicate key: u'1'
</code></pre>
",jfs,jfs,1360959018,1360959356,1360959356
http://stackoverflow.com/a/14932395/3102996,AngularJS For Loop with Numbers &amp; Ranges,533827,matsko,domino_katrino,1344461847,1520855329,1417781189,https://stackoverflow.com/questions/11873570/angularjs-for-loop-with-numbers-ranges,"<p>I came up with a slightly different syntax which suits me a little bit more and adds an optional lower bound as well:</p>

<pre class=""lang-javascript prettyprint-override""><code>myApp.filter('makeRange', function() {
        return function(input) {
            var lowBound, highBound;
            switch (input.length) {
            case 1:
                lowBound = 0;
                highBound = parseInt(input[0]) - 1;
                break;
            case 2:
                lowBound = parseInt(input[0]);
                highBound = parseInt(input[1]);
                break;
            default:
                return input;
            }
            var result = [];
            for (var i = lowBound; i &lt;= highBound; i++)
                result.push(i);
            return result;
        };
    });
</code></pre>

<p>which you can use as</p>

<pre class=""lang-html prettyprint-override""><code>&lt;div ng-repeat=""n in [10] | makeRange""&gt;Do something 0..9: {{n}}&lt;/div&gt;
</code></pre>

<p>or</p>

<pre class=""lang-html prettyprint-override""><code>&lt;div ng-repeat=""n in [20, 29] | makeRange""&gt;Do something 20..29: {{n}}&lt;/div&gt;
</code></pre>
",Mormegil,,1361177262,1361177262,0
http://stackoverflow.com/a/14948713/115145,Print the contents of a Bundle to Logcat?,25780,Quasaur,Hi I&#39;m Frogatto,1361239999,1555527853,1544263229,https://stackoverflow.com/questions/14948697/print-the-contents-of-a-bundle-to-logcat,"<p><a href=""http://developer.android.com/reference/android/os/Bundle.html#keySet%28%29"" rel=""noreferrer"">Bundle#keySet()</a> should work.</p>

<pre><code>for (String key: bundle.keySet())
{
  Log.d (""myApplication"", key + "" is a key in the bundle"");
}
</code></pre>

<p>And if you want to get the Object, you can use <a href=""http://developer.android.com/reference/android/os/Bundle.html#get%28java.lang.String%29"" rel=""noreferrer""><code>Bundle#get(String key)</code>(which is also in the same documentation I linked at the top of my answer)</a>. However, keep in mind using the generic <code>get()</code> call:</p>

<ul>
<li>You're working with Object. If you're simply printing to a Log, <code>toString()</code> will be invoked and all will be fine. However, if you actually want to use the key's pair, you need to do <code>instanceof</code> checks to avoid calling the wrong method.</li>
<li>Since toString will be invoked, if you have a special Object (eg ArrayLists, or special Serializable/Parcelable extras) you're most likely not going to get anything useful from the printout.</li>
</ul>
",A--C,A--C,1361240122,1361249027,1361249027
http://stackoverflow.com/a/1495675/1072626,How to download any(!) webpage with correct charset in python?,14078,Tarnay K&#225;lm&#225;n,Tarnay K&#225;lm&#225;n,1254271319,1495017396,1283560434,https://stackoverflow.com/questions/1495627/how-to-download-any-webpage-with-correct-charset-in-python,"<p>When you download a file with urllib or urllib2, you can find out whether a charset header was transmitted:</p>

<pre><code>fp = urllib2.urlopen(request)
charset = fp.headers.getparam('charset')
</code></pre>

<p>You can use BeautifulSoup to locate a meta element in the HTML:</p>

<pre><code>soup = BeatifulSoup.BeautifulSoup(data)
meta = soup.findAll('meta', {'http-equiv':lambda v:v.lower()=='content-type'})
</code></pre>

<p>If neither is available, browsers typically fall back to user configuration, combined with auto-detection. As rajax proposes, you could use the chardet module. If you have user configuration available telling you that the page should be Chinese (say), you may be able to do better.</p>
",Martin v. Lwis,Martin v. Lwis,1254272676,1254939902,1254939902
http://stackoverflow.com/a/14974448/2726725,Can you change a path without reloading the controller in AngularJS?,154190,Coder1,Coder1,1361344525,1559144388,1361360714,https://stackoverflow.com/questions/14974271/can-you-change-a-path-without-reloading-the-controller-in-angularjs,"<p>If you don't have to use URLs like <code>#/item/{{item.id}}/foo</code> and <code>#/item/{{item.id}}/bar</code> but <code>#/item/{{item.id}}/?foo</code> and <code>#/item/{{item.id}}/?bar</code> instead, you can set up your route for <code>/item/{{item.id}}/</code> to have <code>reloadOnSearch</code> set to <code>false</code> (<a href=""http://docs.angularjs.org/api/ngRoute.$routeProvider"" rel=""nofollow noreferrer"">https://docs.angularjs.org/api/ngRoute/provider/$routeProvider</a>). That tells AngularJS to not reload the view if the search part of the url changes.</p>
",Anders Ekdahl,Gonzalo.-,1361345250,1559144388,1559144388
http://stackoverflow.com/a/14975139/148668,Eigen perspective projection matrix,3380,cpburnz,,1361330395,1379018528,0,https://stackoverflow.com/questions/14971712/eigen-perspective-projection-matrix,"<p>In your case, the simplest is to use the <a href=""http://eigen.tuxfamily.org/dox-devel/group__TutorialAdvancedInitialization.html"" rel=""nofollow"">comma initializer</a> syntax:</p>

<pre><code>Eigen::Matrix4f pmat;
pmat &lt;&lt; xScale, 0, 0, 0,
        0, yScale, 0, 0,
        0, 0, -(zFar+zNear)/(zFar-zNear), -1,
        0, 0, -2*zNear*zFar/(zFar-zNear), 0;
</code></pre>
",ggael,ggael,1361348263,1379018528,1379018528
http://stackoverflow.com/a/14983747/4721910,Measuring a ViewPager,19388,Saad Farooq,Steve Konves,1329404496,1437847593,1361374986,https://stackoverflow.com/questions/9313554/measuring-a-viewpager,"<p>I wasn't very happy with the accepted answer (nor with the pre-inflate-all-views solution in the comments), so I put together a <code>ViewPager</code> that takes its height from the first available child. It does this by doing a second measurement pass, allowing you to steal the first child's height. </p>

<p>A better solution would be to make a new class inside the <code>android.support.v4.view</code> package that implements a better version of <code>onMeasure</code> (with access to package-visible methods like <code>populate()</code>)</p>

<p>For the time being, though, the solution below suits me fine.</p>

<pre><code>public class HeightWrappingViewPager extends ViewPager {

    public HeightWrappingViewPager(Context context) {
        super(context);
    }

    public HeightWrappingViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        boolean wrapHeight = MeasureSpec.getMode(heightMeasureSpec) 
                == MeasureSpec.AT_MOST;

        if(wrapHeight) {
            /**
             * The first super.onMeasure call made the pager take up all the 
             * available height. Since we really wanted to wrap it, we need 
             * to remeasure it. Luckily, after that call the first child is 
             * now available. So, we take the height from it. 
             */

            int width = getMeasuredWidth(), height = getMeasuredHeight();

            // Use the previously measured width but simplify the calculations
            widthMeasureSpec = MeasureSpec.makeMeasureSpec(width, MeasureSpec.EXACTLY);

            /* If the pager actually has any children, take the first child's 
             * height and call that our own */ 
            if(getChildCount() &gt; 0) {
                View firstChild = getChildAt(0);

                /* The child was previously measured with exactly the full height.
                 * Allow it to wrap this time around. */
                firstChild.measure(widthMeasureSpec, 
                        MeasureSpec.makeMeasureSpec(height, MeasureSpec.AT_MOST));

                height = firstChild.getMeasuredHeight();
            }

            heightMeasureSpec = MeasureSpec.makeMeasureSpec(height, MeasureSpec.EXACTLY);

            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
    }
}
</code></pre>
",Delyan,,1361374440,1361374440,0
http://stackoverflow.com/a/14989037/746068,Android 4.2.1 wrong character kerning (spacing),3416,Seraphim&#39;s,Community,1356013147,1521446423,1495542837,https://stackoverflow.com/questions/13974129/android-4-2-1-wrong-character-kerning-spacing,"<p>I answer my own question after accepting the only response that proposed a workaround for my specific issue. That could be a ""nice"" and ""definitive"" solution:</p>

<pre><code>public static void drawTextOnCanvasWithMagnifier(Canvas canvas, String text, float x, float y, Paint paint) {
        if (android.os.Build.VERSION.SDK_INT &lt;= 15) {
            //draw normally
            canvas.drawText(text, x, y, paint);
        }
        else {
            //workaround
            float originalTextSize = paint.getTextSize();
            final float magnifier = 1000f;
            canvas.save();
            canvas.scale(1f / magnifier, 1f / magnifier);
            paint.setTextSize(originalTextSize * magnifier);
            canvas.drawText(text, x * magnifier, y * magnifier, paint);
            canvas.restore();
            paint.setTextSize(originalTextSize);
        }
    }
</code></pre>
",Seraphim's,Seraphim's,1361391210,1424417524,1424417524
http://stackoverflow.com/a/14996261/1984644,Select text on input focus,89406,Billy Coover,Blackhole,1361427987,1549655225,1410037371,https://stackoverflow.com/questions/14995884/select-text-on-input-focus,"<p>The way to do this in Angular is to create a custom directive which does the autoselect for you.</p>

<pre><code>module.directive('selectOnClick', ['$window', function ($window) {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            element.on('click', function () {
                if (!$window.getSelection().toString()) {
                    // Required for mobile Safari
                    this.setSelectionRange(0, this.value.length)
                }
            });
        }
    };
}]);
</code></pre>

<p>Apply the directive like this:</p>

<pre><code>&lt;input type=""text"" value=""test"" select-on-click /&gt;
</code></pre>

<p><kbd><a href=""http://plnkr.co/edit/bgUG0vbQ3nwuZXfiS71W?p=preview"">View demo</a></kbd></p>

<p><strong>Update1</strong>: Removed jQuery dependency.</p>

<p><strong>Update2</strong>: Restrict as attribute.</p>

<p><strong>Update3</strong>: Works in mobile Safari. Allows selecting part of the text (requires IE>8).</p>
",Martin,Martin,1361429598,1435308210,1435308210
http://stackoverflow.com/a/1500517/52251,Compile time sizeof_array without using a macro,13475,Viktor Sehr,Viktor Sehr,1254341162,1501548588,1494933593,https://stackoverflow.com/questions/1500363/compile-time-sizeof-array-without-using-a-macro,"<p>Try the following from <a href=""http://blogs.msdn.com/the1/archive/2004/05/07/128242.aspx"" rel=""noreferrer"">here</a>:</p>

<pre><code>template &lt;typename T, size_t N&gt;
char ( &amp;_ArraySizeHelper( T (&amp;array)[N] ))[N];
#define mycountof( array ) (sizeof( _ArraySizeHelper( array ) ))

int testarray[10];
enum { testsize = mycountof(testarray) };

void test() {
    printf(""The array count is: %d\n"", testsize);
}
</code></pre>

<p>It should print out: ""The array count is: 10""</p>
",Adisak,,1254343024,1254343024,0
http://stackoverflow.com/a/15015748/5998718,Write file with specific permissions in Python,57216,lfaraone,Acumenus,1302538875,1549509376,1477028966,https://stackoverflow.com/questions/5624359/write-file-with-specific-permissions-in-python,"<p>This answer addresses multiple concerns with the <a href=""https://stackoverflow.com/a/5624691/832230"">answer by vartec</a>, especially the <code>umask</code> concern.</p>

<pre><code>import os
import stat

# Define file params
fname = '/tmp/myfile'
flags = os.O_WRONLY | os.O_CREAT | os.O_EXCL  # Refer to ""man 2 open"".
mode = stat.S_IRUSR | stat.S_IWUSR  # This is 0o600.
umask = 0o777 ^ mode  # Prevents always downgrading umask to 0.

# For security, remove file with potentially elevated mode
try:
    os.remove(fname)
except OSError:
    pass

# Open file descriptor
umask_original = os.umask(umask)
try:
    fdesc = os.open(fname, flags, mode)
finally:
    os.umask(umask_original)

# Open file handle and write to file
with os.fdopen(fdesc, 'w') as fout:
    fout.write('something\n')
</code></pre>

<p>If the desired mode is <code>0600</code>, it can more clearly be specified as the octal number <code>0o600</code>. Even better, just use the <code>stat</code> module.</p>

<p>Even though the old file is first deleted, a race condition is still possible. Including <code>os.O_EXCL</code> with <code>os.O_CREAT</code> in the flags will prevent the file from being created if it exists due to a race condition. This is a necessary secondary security measure to prevent opening a file that may already exist with a potentially elevated <code>mode</code>. In Python 3, <code>FileExistsError</code> with [Errno 17] is raised if the file exists.</p>

<p>Failing to first set the <code>umask</code> to <code>0</code> or to <code>0o777 ^ mode</code> can lead to an incorrect <code>mode</code> (permission) being set by <code>os.open</code>. This is because the default <code>umask</code> is usually not <code>0</code>, and it will be applied to the specified <code>mode</code>. For example, if my original <code>umask</code> is <code>2</code> i.e. <code>0o002</code>, and my specified mode is <code>0o222</code>, if I fail to first set the <code>umask</code>, the resulting file can instead have a <code>mode</code> of <code>0o220</code>, which is not what I wanted. Per <code>man 2 open</code>, the mode of the created file is <code>mode &amp; ~umask</code>.</p>

<p>The <code>umask</code> is restored to its original value as soon as possible. This getting and setting is not thread safe, and a <code>threading.Lock</code> must be used in a multithreaded application.</p>

<p>For more info about umask, refer to <a href=""https://askubuntu.com/questions/44542/what-is-umask-and-how-does-it-work"">this thread</a>.</p>
",Acumenus,Acumenus,1361499265,1549509376,1549509376
http://stackoverflow.com/a/1501725/148668,Shortest distance between a point and a line segment,227329,Eli Courtwright,smci,1242064072,1553004551,1463175064,https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment,"<p><strike>Eli, the code you've settled on is incorrect. A point near the line on which the segment lies but far off one end of the segment would be incorrectly judged near the segment.</strike> <em>Update: The incorrect answer mentioned is no longer the accepted one.</em></p>

<p>Here's some correct code, in C++. It presumes a class 2D-vector <code>class vec2 {float x,y;}</code>, essentially, with operators to add, subract, scale, etc, and a distance and dot product function (i.e. <code>x1 x2 + y1 y2</code>).</p>

<pre class=""lang-c++ prettyprint-override""><code>float minimum_distance(vec2 v, vec2 w, vec2 p) {
  // Return minimum distance between line segment vw and point p
  const float l2 = length_squared(v, w);  // i.e. |w-v|^2 -  avoid a sqrt
  if (l2 == 0.0) return distance(p, v);   // v == w case
  // Consider the line extending the segment, parameterized as v + t (w - v).
  // We find projection of point p onto the line. 
  // It falls where t = [(p-v) . (w-v)] / |w-v|^2
  // We clamp t from [0,1] to handle points outside the segment vw.
  const float t = max(0, min(1, dot(p - v, w - v) / l2));
  const vec2 projection = v + t * (w - v);  // Projection falls on the segment
  return distance(p, projection);
}
</code></pre>

<p>EDIT: I needed a Javascript implementation, so here it is, with no dependencies (or comments, but it's a direct port of the above). Points are represented as objects with <code>x</code> and <code>y</code> attributes.</p>

<pre class=""lang-javascript prettyprint-override""><code>function sqr(x) { return x * x }
function dist2(v, w) { return sqr(v.x - w.x) + sqr(v.y - w.y) }
function distToSegmentSquared(p, v, w) {
  var l2 = dist2(v, w);
  if (l2 == 0) return dist2(p, v);
  var t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;
  t = Math.max(0, Math.min(1, t));
  return dist2(p, { x: v.x + t * (w.x - v.x),
                    y: v.y + t * (w.y - v.y) });
}
function distToSegment(p, v, w) { return Math.sqrt(distToSegmentSquared(p, v, w)); }
</code></pre>

<p>EDIT 2: I needed a Java version, but more important, I needed it in 3d instead of 2d.</p>

<pre class=""lang-java prettyprint-override""><code>float dist_to_segment_squared(float px, float py, float pz, float lx1, float ly1, float lz1, float lx2, float ly2, float lz2) {
  float line_dist = dist_sq(lx1, ly1, lz1, lx2, ly2, lz2);
  if (line_dist == 0) return dist_sq(px, py, pz, lx1, ly1, lz1);
  float t = ((px - lx1) * (lx2 - lx1) + (py - ly1) * (ly2 - ly1) + (pz - lz1) * (lz2 - lz1)) / line_dist;
  t = constrain(t, 0, 1);
  return dist_sq(px, py, pz, lx1 + t * (lx2 - lx1), ly1 + t * (ly2 - ly1), lz1 + t * (lz2 - lz1));
}
</code></pre>
",Grumdrig,Radiodef,1254367100,1522541392,1522541392
http://stackoverflow.com/a/1501725/2037879,Shortest distance between a point and a line segment,227329,Eli Courtwright,smci,1242064072,1553004551,1463175064,https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment,"<p><strike>Eli, the code you've settled on is incorrect. A point near the line on which the segment lies but far off one end of the segment would be incorrectly judged near the segment.</strike> <em>Update: The incorrect answer mentioned is no longer the accepted one.</em></p>

<p>Here's some correct code, in C++. It presumes a class 2D-vector <code>class vec2 {float x,y;}</code>, essentially, with operators to add, subract, scale, etc, and a distance and dot product function (i.e. <code>x1 x2 + y1 y2</code>).</p>

<pre class=""lang-c++ prettyprint-override""><code>float minimum_distance(vec2 v, vec2 w, vec2 p) {
  // Return minimum distance between line segment vw and point p
  const float l2 = length_squared(v, w);  // i.e. |w-v|^2 -  avoid a sqrt
  if (l2 == 0.0) return distance(p, v);   // v == w case
  // Consider the line extending the segment, parameterized as v + t (w - v).
  // We find projection of point p onto the line. 
  // It falls where t = [(p-v) . (w-v)] / |w-v|^2
  // We clamp t from [0,1] to handle points outside the segment vw.
  const float t = max(0, min(1, dot(p - v, w - v) / l2));
  const vec2 projection = v + t * (w - v);  // Projection falls on the segment
  return distance(p, projection);
}
</code></pre>

<p>EDIT: I needed a Javascript implementation, so here it is, with no dependencies (or comments, but it's a direct port of the above). Points are represented as objects with <code>x</code> and <code>y</code> attributes.</p>

<pre class=""lang-javascript prettyprint-override""><code>function sqr(x) { return x * x }
function dist2(v, w) { return sqr(v.x - w.x) + sqr(v.y - w.y) }
function distToSegmentSquared(p, v, w) {
  var l2 = dist2(v, w);
  if (l2 == 0) return dist2(p, v);
  var t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;
  t = Math.max(0, Math.min(1, t));
  return dist2(p, { x: v.x + t * (w.x - v.x),
                    y: v.y + t * (w.y - v.y) });
}
function distToSegment(p, v, w) { return Math.sqrt(distToSegmentSquared(p, v, w)); }
</code></pre>

<p>EDIT 2: I needed a Java version, but more important, I needed it in 3d instead of 2d.</p>

<pre class=""lang-java prettyprint-override""><code>float dist_to_segment_squared(float px, float py, float pz, float lx1, float ly1, float lz1, float lx2, float ly2, float lz2) {
  float line_dist = dist_sq(lx1, ly1, lz1, lx2, ly2, lz2);
  if (line_dist == 0) return dist_sq(px, py, pz, lx1, ly1, lz1);
  float t = ((px - lx1) * (lx2 - lx1) + (py - ly1) * (ly2 - ly1) + (pz - lz1) * (lz2 - lz1)) / line_dist;
  t = constrain(t, 0, 1);
  return dist_sq(px, py, pz, lx1 + t * (lx2 - lx1), ly1 + t * (ly2 - ly1), lz1 + t * (lz2 - lz1));
}
</code></pre>
",Grumdrig,Radiodef,1254367100,1522541392,1522541392
http://stackoverflow.com/a/1501725/331379,Shortest distance between a point and a line segment,227329,Eli Courtwright,smci,1242064072,1553004551,1463175064,https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment,"<p><strike>Eli, the code you've settled on is incorrect. A point near the line on which the segment lies but far off one end of the segment would be incorrectly judged near the segment.</strike> <em>Update: The incorrect answer mentioned is no longer the accepted one.</em></p>

<p>Here's some correct code, in C++. It presumes a class 2D-vector <code>class vec2 {float x,y;}</code>, essentially, with operators to add, subract, scale, etc, and a distance and dot product function (i.e. <code>x1 x2 + y1 y2</code>).</p>

<pre class=""lang-c++ prettyprint-override""><code>float minimum_distance(vec2 v, vec2 w, vec2 p) {
  // Return minimum distance between line segment vw and point p
  const float l2 = length_squared(v, w);  // i.e. |w-v|^2 -  avoid a sqrt
  if (l2 == 0.0) return distance(p, v);   // v == w case
  // Consider the line extending the segment, parameterized as v + t (w - v).
  // We find projection of point p onto the line. 
  // It falls where t = [(p-v) . (w-v)] / |w-v|^2
  // We clamp t from [0,1] to handle points outside the segment vw.
  const float t = max(0, min(1, dot(p - v, w - v) / l2));
  const vec2 projection = v + t * (w - v);  // Projection falls on the segment
  return distance(p, projection);
}
</code></pre>

<p>EDIT: I needed a Javascript implementation, so here it is, with no dependencies (or comments, but it's a direct port of the above). Points are represented as objects with <code>x</code> and <code>y</code> attributes.</p>

<pre class=""lang-javascript prettyprint-override""><code>function sqr(x) { return x * x }
function dist2(v, w) { return sqr(v.x - w.x) + sqr(v.y - w.y) }
function distToSegmentSquared(p, v, w) {
  var l2 = dist2(v, w);
  if (l2 == 0) return dist2(p, v);
  var t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;
  t = Math.max(0, Math.min(1, t));
  return dist2(p, { x: v.x + t * (w.x - v.x),
                    y: v.y + t * (w.y - v.y) });
}
function distToSegment(p, v, w) { return Math.sqrt(distToSegmentSquared(p, v, w)); }
</code></pre>

<p>EDIT 2: I needed a Java version, but more important, I needed it in 3d instead of 2d.</p>

<pre class=""lang-java prettyprint-override""><code>float dist_to_segment_squared(float px, float py, float pz, float lx1, float ly1, float lz1, float lx2, float ly2, float lz2) {
  float line_dist = dist_sq(lx1, ly1, lz1, lx2, ly2, lz2);
  if (line_dist == 0) return dist_sq(px, py, pz, lx1, ly1, lz1);
  float t = ((px - lx1) * (lx2 - lx1) + (py - ly1) * (ly2 - ly1) + (pz - lz1) * (lz2 - lz1)) / line_dist;
  t = constrain(t, 0, 1);
  return dist_sq(px, py, pz, lx1 + t * (lx2 - lx1), ly1 + t * (ly2 - ly1), lz1 + t * (lz2 - lz1));
}
</code></pre>
",Grumdrig,Radiodef,1254367100,1522541392,1522541392
http://stackoverflow.com/a/15052131/1043187,How to compare vectors approximately in Eigen?,8711,DikobrAz,,1361705963,1504300955,0,https://stackoverflow.com/questions/15051367/how-to-compare-vectors-approximately-in-eigen,"<p>There is no built-in function implementing numpy.allclose, but you easily write one yourself if that's really what you need. However, I'd rather suggest the use of <a href=""http://eigen.tuxfamily.org/dox-devel/classEigen_1_1DenseBase.html#a40b9e8df68a52b2d46cf70c9babf2a16"" rel=""noreferrer"">isMuchSmallerThan</a> with reference value:</p>

<pre><code>(a-b).isMuchSmallerThan(ref)
</code></pre>

<p>where ref is a representative non zero for your problem.</p>

<p>EDIT: for reference here is a possible implementation of allclose:</p>

<pre><code>template&lt;typename DerivedA, typename DerivedB&gt;
bool allclose(const Eigen::DenseBase&lt;DerivedA&gt;&amp; a,
              const Eigen::DenseBase&lt;DerivedB&gt;&amp; b,
              const typename DerivedA::RealScalar&amp; rtol
                  = Eigen::NumTraits&lt;typename DerivedA::RealScalar&gt;::dummy_precision(),
              const typename DerivedA::RealScalar&amp; atol
                  = Eigen::NumTraits&lt;typename DerivedA::RealScalar&gt;::epsilon())
{
  return ((a.derived() - b.derived()).array().abs()
          &lt;= (atol + rtol * b.derived().array().abs())).all();
}
</code></pre>
",ggael,ggael,1361712027,1361712679,1361712679
http://stackoverflow.com/a/15096721/850828,Creating XML file representing folder structure (including subfolders) in C#,19635,Deepanjan Nag,,1361902796,1361904195,0,https://stackoverflow.com/questions/15096397/creating-xml-file-representing-folder-structure-including-subfolders-in-c,"<p>That's great example of problem, that can be easily solved using recursive algorithm!</p>

<p>Pseudo-code:</p>

<pre><code>function GetDirectoryXml(path)
    xml := ""&lt;dir name='"" + path + ""'&gt;""

    dirInfo := GetDirectoryInfo(path)
    for each file in dirInfo.Files
        xml += ""&lt;file name='"" + file.Name + ""' /&gt;""
    end for

    for each subDir in dirInfo.Directories
        xml += GetDirectoryXml(subDir.Path)
    end for

    xml += ""&lt;/dir&gt;""

    return xml
end function
</code></pre>

<p>It can be done with C# and <a href=""http://msdn.microsoft.com/en-us/library/8s2fzb02.aspx"" rel=""noreferrer""><code>DirectoryInfo</code></a>/<code>XDocument</code>/<code>XElement</code> classes like that:</p>

<pre><code>public static XElement GetDirectoryXml(DirectoryInfo dir)
{
    var info = new XElement(""dir"",
                   new XAttribute(""name"", dir.Name));

    foreach (var file in dir.GetFiles())
        info.Add(new XElement(""file"",
                     new XAttribute(""name"", file.Name)));

    foreach (var subDir in dir.GetDirectories())
        info.Add(GetDirectoryXml(subDir));

    return info;
}
</code></pre>

<p>And example of usage:</p>

<pre><code>static void Main(string[] args)
{
    string rootPath = Console.ReadLine();
    var dir = new DirectoryInfo(rootPath);

    var doc = new XDocument(GetDirectoryXml(dir));

    Console.WriteLine(doc.ToString());

    Console.Read();
}
</code></pre>

<p>Output for one of directories on my laptop:</p>

<pre><code>&lt;dir name=""eBooks""&gt;
  &lt;file name=""Edulinq.pdf"" /&gt;
  &lt;file name=""MCTS 70-516 Accessing Data with Microsoft NET Framework 4.pdf"" /&gt;
  &lt;dir name=""Silverlight""&gt;
    &lt;file name=""Sams - Silverlight 4 Unleashed.pdf"" /&gt;
    &lt;file name=""Silverlight 2 Unleashed.pdf"" /&gt;
    &lt;file name=""WhatsNewInSilverlight4.pdf"" /&gt;
  &lt;/dir&gt;
  &lt;dir name=""Windows Phone""&gt;
    &lt;file name=""11180349_Building_Windows_Phone_Apps_-_A_Developers_Guide_v7_NoCover (1).pdf"" /&gt;
    &lt;file name=""Programming Windows Phone 7.pdf"" /&gt;
  &lt;/dir&gt;
  &lt;dir name=""WPF""&gt;
    &lt;file name=""Building Enterprise Applications with WPF and the MVVM Pattern (pdf).pdf"" /&gt;
    &lt;file name=""Prism4.pdf"" /&gt;
    &lt;file name=""WPF Binding CheatSheet.pdf"" /&gt;
  &lt;/dir&gt;
&lt;/dir&gt;
</code></pre>
",MarcinJuraszek,MarcinJuraszek,1361903841,1361904195,1361904195
http://stackoverflow.com/a/15112059/753382,Getting number of elements in an iterator in Python,90992,user248237,Tomasz Wysocki,1280248341,1536235154,1314193976,https://stackoverflow.com/questions/3345785/getting-number-of-elements-in-an-iterator-in-python,"<p>You cannot (except the type of a particular iterator implements some specific methods that make it possible).</p>

<p>Generally, you may count iterator items only by consuming the iterator. One of probably the most efficient ways:</p>

<pre><code>import itertools
from collections import deque

def count_iter_items(iterable):
    """"""
    Consume an iterable not reading it into memory; return the number of items.
    """"""
    counter = itertools.count()
    deque(itertools.izip(iterable, counter), maxlen=0)  # (consume at C speed)
    return next(counter)
</code></pre>

<p>(For Python 3.x replace <code>itertools.izip</code> with <code>zip</code>).</p>
",zuo,zuo,1361967759,1361968289,1361968289
http://stackoverflow.com/a/15150143/4525767,C++ Efficiently Calculating a Running Median,25698,Edge,,1339067821,1498691872,0,https://stackoverflow.com/questions/10930732/c-efficiently-calculating-a-running-median,"<p>The Jeff McClintock running median estimate. Requires keeping only two values.
This example iterates over an array of sampled values (CPU consumption). Seems to converge relatively quickly (about 100 samples) to an estimate of the median.
 The idea is at each iteration the median inches toward the input signal at a constant rate. The rate depends on what magnitude you estimate the median to be. I use the average as an estimate of the magnitude of the median, to determines the size of each increment of the median. If you need your median accurate to about 1%, use a step-size of 0.01 * the average.</p>

<pre><code>float median = 0.0f;
float average = 0.0f;

// for each sample
{
    average += ( sample - average ) * 0.1f; // rough running average.
    median += _copysign( average * 0.01, sample - median );
}
</code></pre>

<p><img src=""https://i.stack.imgur.com/W85an.png"" alt=""enter image description here""></p>
",Jeff McClintock,Jeff McClintock,1362109472,1362119849,1362119849
http://stackoverflow.com/a/15193615/1148405,Convert a decimal number to a fraction / rational number,23829,Anderson Green,Jonathan Leffler,1360372448,1555938139,1362898285,https://stackoverflow.com/questions/14783869/convert-a-decimal-number-to-a-fraction-rational-number,"<p>I used this site <a href=""http://mathforum.org/library/drmath/view/51886.html"" rel=""nofollow noreferrer"">http://mathforum.org/library/drmath/view/51886.html</a> to build a function but as the article mentions you will get an unreasonable large number for radicals or pi.</p>

<p>Hope it helps though.</p>

<pre><code>function Fraction(){}
Fraction.prototype.convert = function(x, improper)
{
    improper = improper || false;
    var abs = Math.abs(x);
    this.sign = x/abs;
    x = abs;
    var stack = 0;
    this.whole = !improper ? Math.floor(x) : 0;
    var fractional = !improper ? x-this.whole : abs;
    /*recursive function that transforms the fraction*/
    function recurs(x){
        stack++;
        var intgr = Math.floor(x); //get the integer part of the number
        var dec = (x - intgr); //get the decimal part of the number
        if(dec &lt; 0.0019 || stack &gt; 20) return [intgr,1]; //return the last integer you divided by
        var num = recurs(1/dec); //call the function again with the inverted decimal part
        return[intgr*num[0]+num[1],num[0]]
    }
    var t = recurs(fractional); 
    this.numerator = t[0];
    this.denominator = t[1];
}

Fraction.prototype.toString = function()
{
    var l  = this.sign.toString().length;
    var sign = l === 2 ? '-' : '';
    var whole = this.whole !== 0 ? this.sign*this.whole+' ': sign;
    return whole+this.numerator+'/'+this.denominator;
}

//var frac = new Fraction()
//frac.convert(2.56, false)
//console.log(frac.toString())
//use frac.convert(2.56,true) to get it as an improper fraction
</code></pre>

<p>If you just want a self-contained function that only returns the numerator and denominator then use the function below.  </p>

<pre><code>var toFraction = function (dec) {
    var is_neg = dec &lt; 0;
    dec = Math.abs(dec);
    var done = false;
    //you can adjust the epsilon to a larger number if you don't need very high precision
    var n1 = 0, d1 = 1, n2 = 1, d2 = 0, n = 0, q = dec, epsilon = 1e-13;
    while (!done) {
        n++;
        if (n &gt; 10000) {
            done = true;
        }
        var a = parseInt(q);
        var num = n1 + a * n2;
        var den = d1 + a * d2;
        var e = (q - a);
        if (e &lt; epsilon) {
            done = true;
        }
        q = 1 / e;
        n1 = n2;
        d1 = d2;
        n2 = num;
        d2 = den;
        if (Math.abs(num / den - dec) &lt; epsilon || n &gt; 30) {
            done = true;
        }
    }
    return [is_neg ? -num : num, den];
};
//Usage:
//var frac = toFraction(0.5);
//console.log(frac)
//Output: [ 1, 2 ]
</code></pre>
",jiggzson,jiggzson,1362363941,1555938139,1555938139
http://stackoverflow.com/a/1520212/33611,Random shuffling of an array,402304,Hubert,leventov,1254744959,1559859412,1443770814,https://stackoverflow.com/questions/1519736/random-shuffling-of-an-array,"<p>Using Collections to shuffle an array of primitive types is a bit of an overkill...</p>

<p>It is simple enough to implement the function yourself, using for example the <a href=""http://en.wikipedia.org/wiki/Fisher-Yates_shuffle"" rel=""noreferrer"">FisherYates shuffle</a>:</p>

<pre><code>import java.util.*;
import java.util.concurrent.ThreadLocalRandom;

class Test
{
  public static void main(String args[])
  {
    int[] solutionArray = { 1, 2, 3, 4, 5, 6, 16, 15, 14, 13, 12, 11 };

    shuffleArray(solutionArray);
    for (int i = 0; i &lt; solutionArray.length; i++)
    {
      System.out.print(solutionArray[i] + "" "");
    }
    System.out.println();
  }

  // Implementing FisherYates shuffle
  static void shuffleArray(int[] ar)
  {
    // If running on Java 6 or older, use `new Random()` on RHS here
    Random rnd = ThreadLocalRandom.current();
    for (int i = ar.length - 1; i &gt; 0; i--)
    {
      int index = rnd.nextInt(i + 1);
      // Simple swap
      int a = ar[index];
      ar[index] = ar[i];
      ar[i] = a;
    }
  }
}
</code></pre>
",PhiLho,leventov,1254750827,1443771010,1443771010
http://stackoverflow.com/a/1521682/1550314,"Check double variable if it contains an integer, and not floating point",30972,vehomzzz,Jacob,1254766763,1500908158,1254767583,https://stackoverflow.com/questions/1521607/check-double-variable-if-it-contains-an-integer-and-not-floating-point,"<p>Use <a href=""http://en.cppreference.com/w/cpp/numeric/math/modf"" rel=""noreferrer""><code>std::modf</code></a>:</p>

<pre><code>double intpart;
modf(value, &amp;intpart) == 0.0
</code></pre>

<p>Don't convert to <code>int</code>! The number <code>1.0e+300</code> is an integer too you know.</p>

<p>Edit: As Pete Kirkham points out, passing 0 as the second argument is not guaranteed by the standard to work, requiring the use of a dummy variable and, unfortunately, making the code a lot less elegant.</p>
",avakar,Alec Jacobson,1254767570,1386957332,1386957332
http://stackoverflow.com/a/1523456/667301,What is the common header format of Python files?,358818,Ashwin Nanjappa,Martin Thoma,1254799394,1551365911,1430217249,https://stackoverflow.com/questions/1523427/what-is-the-common-header-format-of-python-files,"<p>Its all metadata for the <code>Foobar</code> module.</p>

<p>The first one is the <code>docstring</code> of the module, that is already explained in <a href=""https://stackoverflow.com/questions/1523427/python-what-is-the-common-header-format/1523435#1523435"">Peter's answer</a>.</p>

<blockquote>
  <h2><a href=""http://web.archive.org/web/20111010053227/http://jaynes.colorado.edu/PythonGuidelines.html#module_formatting"" rel=""noreferrer"">How do I organize my modules (source files)? (Archive)</a></h2>
  
  <p><strong>The first line of each file shoud be <code>#!/usr/bin/env python</code>.</strong> This makes it possible to run the file as a script invoking the interpreter implicitly, e.g. in a CGI context.</p>
  
  <p><strong><em>Next should be the docstring with a description.</em></strong> If the description is long, the first line should be a short summary that makes sense on its own, separated from the rest by a newline.</p>
  
  <p><strong>All code, including import statements, should follow the docstring.</strong> Otherwise, the docstring will not be recognized by the interpreter, and you will not have access to it in interactive sessions (i.e. through <code>obj.__doc__</code>) or when generating documentation with automated tools.</p>
  
  <p><strong>Import built-in modules first, followed by third-party modules, followed by any changes to the path and your own modules.</strong> Especially, additions to the path and names of your modules are likely to change rapidly: keeping them in one place makes them easier to find.</p>
  
  <p><strong>Next should be authorship information.</strong> This information should follow this format:</p>

<pre><code>__author__ = ""Rob Knight, Gavin Huttley, and Peter Maxwell""
__copyright__ = ""Copyright 2007, The Cogent Project""
__credits__ = [""Rob Knight"", ""Peter Maxwell"", ""Gavin Huttley"",
                    ""Matthew Wakefield""]
__license__ = ""GPL""
__version__ = ""1.0.1""
__maintainer__ = ""Rob Knight""
__email__ = ""rob@spot.colorado.edu""
__status__ = ""Production""
</code></pre>
  
  <p>Status should typically be one of ""Prototype"", ""Development"", or ""Production"". <code>__maintainer__</code> should be the person who will fix bugs and make improvements if imported. <code>__credits__</code> differs from <code>__author__</code> in that <code>__credits__</code> includes people who reported bug fixes, made suggestions, etc. but did not actually write the code.</p>
</blockquote>

<p><a href=""http://epydoc.sourceforge.net/manual-fields.html#module-metadata-variables"" rel=""noreferrer"">Here</a> you have more information, listing <code>__author__</code>, <code>__authors__</code>, <code>__contact__</code>, <code>__copyright__</code>, <code>__license__</code>, <code>__deprecated__</code>, <code>__date__</code> and <code>__version__</code> as recognized metadata.</p>
",Esteban Kber,Community,1254800040,1399920137,1495542870
http://stackoverflow.com/a/15238594/1031689,How to get Locale from its String representation in Java?,111730,Joonas Pulakka,Joonas Pulakka,1269596839,1544707678,1269597638,https://stackoverflow.com/questions/2522248/how-to-get-locale-from-its-string-representation-in-java,"<p>This answer may be a little late, but it turns out that parsing out the string is not as ugly as the OP assumed. I found it quite simple and concise:</p>

<pre><code>public static Locale fromString(String locale) {
    String parts[] = locale.split(""_"", -1);
    if (parts.length == 1) return new Locale(parts[0]);
    else if (parts.length == 2
            || (parts.length == 3 &amp;&amp; parts[2].startsWith(""#"")))
        return new Locale(parts[0], parts[1]);
    else return new Locale(parts[0], parts[1], parts[2]);
}
</code></pre>

<p>I tested this (on Java 7) with all the examples given in the Locale.toString() documentation: ""en"", ""de_DE"", ""_GB"", ""en_US_WIN"", ""de__POSIX"", ""zh_CN_#Hans"", ""zh_TW_#Hant-x-java"", and ""th_TH_TH_#u-nu-thai"".</p>

<p><strong>IMPORTANT UPDATE</strong>: This is not recommended for use in Java 7+ according to the <a href=""http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html"" rel=""noreferrer"">documentation</a>:</p>

<blockquote>
  <p>In particular, clients who parse the output of toString into language, country, and variant fields can continue to do so (although this is <strong>strongly discouraged</strong>), although the variant field will have additional information in it if script or extensions are present.</p>
</blockquote>

<p>Use Locale.forLanguageTag and Locale.toLanguageTag instead, or if you must, Locale.Builder.</p>
",andy,andy,1362541537,1385153862,1385153862
http://stackoverflow.com/a/15264039/425050,Gridview with two columns and auto resized images,160515,rogcg,rogcg,1362617223,1520073877,1372783717,https://stackoverflow.com/questions/15261088/gridview-with-two-columns-and-auto-resized-images,"<p>Here's a relatively easy method to do this. Throw a GridView into your layout, setting the stretch mode to stretch the column widths, set the spacing to 0 (or whatever you want), and set the number of columns to 2:</p>

<p><strong>res/layout/main.xml</strong></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;FrameLayout 
    xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;GridView
        android:id=""@+id/gridview""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:verticalSpacing=""0dp""
        android:horizontalSpacing=""0dp""
        android:stretchMode=""columnWidth""
        android:numColumns=""2""/&gt;

&lt;/FrameLayout&gt;
</code></pre>

<p>Make a custom <code>ImageView</code> that maintains its aspect ratio:</p>

<p><strong>src/com/example/graphicstest/SquareImageView.java</strong></p>

<pre><code>public class SquareImageView extends ImageView {
    public SquareImageView(Context context) {
        super(context);
    }

    public SquareImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public SquareImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        setMeasuredDimension(getMeasuredWidth(), getMeasuredWidth()); //Snap to width
    }
}
</code></pre>

<p>Make a layout for a grid item using this SquareImageView and set the scaleType to centerCrop:</p>

<p><strong>res/layout/grid_item.xml</strong></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;

&lt;FrameLayout xmlns:android=""http://schemas.android.com/apk/res/android""
             android:layout_width=""match_parent""
             android:layout_height=""match_parent""&gt;

    &lt;com.example.graphicstest.SquareImageView
        android:id=""@+id/picture""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:scaleType=""centerCrop""/&gt;

    &lt;TextView
        android:id=""@+id/text""
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:paddingLeft=""10dp""
        android:paddingRight=""10dp""
        android:paddingTop=""15dp""
        android:paddingBottom=""15dp""
        android:layout_gravity=""bottom""
        android:textColor=""@android:color/white""
        android:background=""#55000000""/&gt;

&lt;/FrameLayout&gt;
</code></pre>

<p>Now make some sort of adapter for your <code>GridView</code>:</p>

<p><strong>src/com/example/graphicstest/MyAdapter.java</strong></p>

<pre><code>private final class MyAdapter extends BaseAdapter {
    private final List&lt;Item&gt; mItems = new ArrayList&lt;Item&gt;();
    private final LayoutInflater mInflater;

    public MyAdapter(Context context) {
        mInflater = LayoutInflater.from(context);

        mItems.add(new Item(""Red"",       R.drawable.red));
        mItems.add(new Item(""Magenta"",   R.drawable.magenta));
        mItems.add(new Item(""Dark Gray"", R.drawable.dark_gray));
        mItems.add(new Item(""Gray"",      R.drawable.gray));
        mItems.add(new Item(""Green"",     R.drawable.green));
        mItems.add(new Item(""Cyan"",      R.drawable.cyan));
    }

    @Override
    public int getCount() {
        return mItems.size();
    }

    @Override
    public Item getItem(int i) {
        return mItems.get(i);
    }

    @Override
    public long getItemId(int i) {
        return mItems.get(i).drawableId;
    }

    @Override
    public View getView(int i, View view, ViewGroup viewGroup) {
        View v = view;
        ImageView picture;
        TextView name;

        if (v == null) {
            v = mInflater.inflate(R.layout.grid_item, viewGroup, false);
            v.setTag(R.id.picture, v.findViewById(R.id.picture));
            v.setTag(R.id.text, v.findViewById(R.id.text));
        }

        picture = (ImageView) v.getTag(R.id.picture);
        name = (TextView) v.getTag(R.id.text);

        Item item = getItem(i);

        picture.setImageResource(item.drawableId);
        name.setText(item.name);

        return v;
    }

    private static class Item {
        public final String name;
        public final int drawableId;

        Item(String name, int drawableId) {
            this.name = name;
            this.drawableId = drawableId;
        }
    }
}
</code></pre>

<p>Set that adapter to your <code>GridView</code>:</p>

<pre><code>@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    GridView gridView = (GridView)findViewById(R.id.gridview);
    gridView.setAdapter(new MyAdapter(this));
}
</code></pre>

<p>And enjoy the results:</p>

<p><img src=""https://i.stack.imgur.com/fAO3t.png"" alt=""Example GridView""></p>
",kcoppock,kcoppock,1362635379,1423582301,1423582301
http://stackoverflow.com/a/15277421/1816078,how to find the transformation matrix of a change of basis with Eigen,4098,rmbianchi,rmbianchi,1362587659,1539670585,1362673071,https://stackoverflow.com/questions/15252919/how-to-find-the-transformation-matrix-of-a-change-of-basis-with-eigen,"<p>Ok, I found the solution and I post it here for reference. I hope it can be useful to someone else as well.</p>

<p>Actually ggael's answer triggered the right solution, so many thanks to him and +1 for him.</p>

<hr>

<pre><code>#include &lt;Eigen/Geometry&gt;

typedef Eigen::Affine3d Transformation;
typedef Eigen::Vector3d   Point;
typedef Eigen::Vector3d  Vector;
typedef Eigen::Translation&lt;double,3&gt;  Translation;

Transformation findTransformBetween2CS(Point fr0,Point fr1,Point fr2,Point to0,Point to1,Point to2) {

  Transformation T, T2, T3 = Transformation::Identity();
  Vector3d x1,y1,z1, x2,y2,z2;

  // Axes of the coordinate system ""fr""
  x1 = (fr1 - fr0).normalized(); // the versor (unitary vector) of the (fr1-fr0) axis vector
  y1 = (fr2 - fr0).normalized();

  // Axes of the coordinate system ""to""
  x2 = (to1 - to0).normalized();
  y2 = (to2 - to0).normalized();

  // transform from CS1 to CS2 
  // Note: if fr0==(0,0,0) --&gt; CS1==CS2 --&gt; T2=Identity
  T2.linear() &lt;&lt; x1, y1, x1.cross(y1); 

  // transform from CS1 to CS3
  T3.linear() &lt;&lt; x2, y2, x2.cross(y2); 

  // T = transform to CS2 to CS3
  // Note: if CS1==CS2 --&gt; T = T3
  T.linear() = T3.linear() * T2.linear().inverse(); 


  T.translation() = t0;

  return T;

}
</code></pre>

<hr>

<p>Inspiration also came from this post:</p>

<p><a href=""https://gamedev.stackexchange.com/questions/26084/transform-between-two-3d-cartesian-coordinate-systems"">https://gamedev.stackexchange.com/questions/26084/transform-between-two-3d-cartesian-coordinate-systems</a></p>
",rmbianchi,Community,1362676150,1362676150,1492085921
http://stackoverflow.com/a/1527820/769384,Generating random whole numbers in JavaScript in a specific range?,1109859,zacharyliu,thadeuszlay,1254859541,1560509167,1552311286,https://stackoverflow.com/questions/1527803/generating-random-whole-numbers-in-javascript-in-a-specific-range,"<p>There are some examples on the <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random"" rel=""noreferrer"">Mozilla Developer Network</a> page:</p>

<pre><code>/**
 * Returns a random number between min (inclusive) and max (exclusive)
 */
function getRandomArbitrary(min, max) {
    return Math.random() * (max - min) + min;
}

/**
 * Returns a random integer between min (inclusive) and max (inclusive).
 * The value is no lower than min (or the next integer greater than min
 * if min isn't an integer) and no greater than max (or the next integer
 * lower than max if max isn't an integer).
 * Using Math.round() will give you a non-uniform distribution!
 */
function getRandomInt(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
}
</code></pre>

<hr>

<p>Here's the logic behind it. It's a simple rule of three:</p>

<p><code>Math.random()</code> returns a <code>Number</code> between 0 (inclusive) and 1 (exclusive). So we have an interval like this:</p>

<pre><code>[0 .................................... 1)
</code></pre>

<p>Now, we'd like a number between <code>min</code> (inclusive) and <code>max</code> (exclusive):</p>

<pre><code>[0 .................................... 1)
[min .................................. max)
</code></pre>

<p>We can use the <code>Math.random</code> to get the correspondent in the [min, max) interval. But, first we should factor a little bit the problem by subtracting <code>min</code> from the second interval:</p>

<pre><code>[0 .................................... 1)
[min - min ............................ max - min)
</code></pre>

<p>This gives:</p>

<pre><code>[0 .................................... 1)
[0 .................................... max - min)
</code></pre>

<p>We may now apply <code>Math.random</code> and then calculate the correspondent. Let's choose a random number:</p>

<pre><code>                Math.random()
                    |
[0 .................................... 1)
[0 .................................... max - min)
                    |
                    x (what we need)
</code></pre>

<p>So, in order to find <code>x</code>, we would do:</p>

<pre><code>x = Math.random() * (max - min);
</code></pre>

<p>Don't forget to add <code>min</code> back, so that we get a number in the [min, max) interval:</p>

<pre><code>x = Math.random() * (max - min) + min;
</code></pre>

<p>That was the first function from MDN. The second one, returns an integer between <code>min</code> and <code>max</code>, both inclusive.</p>

<p>Now for getting integers, you could use <code>round</code>, <code>ceil</code> or <code>floor</code>.</p>

<p>You could use <code>Math.round(Math.random() * (max - min)) + min</code>, this however gives a non-even distribution. Both, <code>min</code> and <code>max</code> only have approximately half the chance to roll:</p>

<pre><code>min...min+0.5...min+1...min+1.5   ...    max-0.5....max
 ...     Math.round()
   min          min+1                          max
</code></pre>

<p>With <code>max</code> excluded from the interval, it has an even less chance to roll than <code>min</code>.</p>

<p>With <code>Math.floor(Math.random() * (max - min +1)) + min</code> you have a perfectly even distribution.</p>

<pre><code>min.... min+1... min+2 ... max-1... max.... max+1 (is excluded from interval)
|        |        |         |        |        |
 ...     Math.floor()
   min     min+1               max-1    max
</code></pre>

<p>You can't use <code>ceil()</code> and <code>-1</code> in that equation because <code>max</code> now had a slightly less chance to roll, but you can roll the (unwanted) <code>min-1</code> result too.</p>
",Ionu G. Stan,micnic,1254859699,1555146076,1555146076
http://stackoverflow.com/a/15281070/1529139,Can I send a ctrl-C (SIGINT) to an application on Windows?,84153,Matthew Murdoch,JasonMArcher,1241209130,1554175572,1431969837,https://stackoverflow.com/questions/813086/can-i-send-a-ctrl-c-sigint-to-an-application-on-windows,"<p>I have done some research around this topic, which turned out to be more popular than I anticipated. KindDragon's reply was one of the pivotal points.</p>

<p>I wrote a <a href=""http://stanislavs.org/?p=387"" rel=""nofollow noreferrer"">longer blog post</a> on the topic and created a working demo program, which demonstrates using this type of system to close a command line application in a couple of nice fashions. That post also lists external links that I used in my research.</p>

<p>In short, those demo programs do the following:</p>

<ul>
<li>Start a program with a visible window using .Net, hide with pinvoke, run for 6 seconds, show with pinvoke, stop with .Net.</li>
<li>Start a program without a window using .Net, run for 6 seconds, stop by attaching console and issuing ConsoleCtrlEvent</li>
</ul>

<p><strong>Edit:</strong> The amended solution from KindDragon for those who are interested in the code here and now. If you plan to start other programs after stopping the first one, you should re-enable Ctrl-C handling, otherwise the next process will inherit the parent's disabled state and will not respond to Ctrl-C.</p>

<pre class=""lang-cs prettyprint-override""><code>[DllImport(""kernel32.dll"", SetLastError = true)]
static extern bool AttachConsole(uint dwProcessId);

[DllImport(""kernel32.dll"", SetLastError = true, ExactSpelling = true)]
static extern bool FreeConsole();

[DllImport(""kernel32.dll"")]
static extern bool SetConsoleCtrlHandler(ConsoleCtrlDelegate HandlerRoutine, bool Add);

delegate bool ConsoleCtrlDelegate(CtrlTypes CtrlType);

// Enumerated type for the control messages sent to the handler routine
enum CtrlTypes : uint
{
  CTRL_C_EVENT = 0,
  CTRL_BREAK_EVENT,
  CTRL_CLOSE_EVENT,
  CTRL_LOGOFF_EVENT = 5,
  CTRL_SHUTDOWN_EVENT
}

[DllImport(""kernel32.dll"")]
[return: MarshalAs(UnmanagedType.Bool)]
private static extern bool GenerateConsoleCtrlEvent(CtrlTypes dwCtrlEvent, uint dwProcessGroupId);

public void StopProgram(Process proc)
{
  //This does not require the console window to be visible.
  if (AttachConsole((uint)proc.Id))
  {
    // Disable Ctrl-C handling for our program
    SetConsoleCtrlHandler(null, true); 
    GenerateConsoleCtrlEvent(CtrlTypes.CTRL_C_EVENT, 0);

    //Moved this command up on suggestion from Timothy Jannace (see comments below)
    FreeConsole();

    // Must wait here. If we don't and re-enable Ctrl-C
    // handling below too fast, we might terminate ourselves.
    proc.WaitForExit(2000);

    //Re-enable Ctrl-C handling or any subsequently started
    //programs will inherit the disabled state.
    SetConsoleCtrlHandler(null, false); 
  }
}
</code></pre>

<p>Also, plan for a contingency solution if <code>AttachConsole()</code> or the sent signal should fail, for instance sleeping then this:</p>

<pre class=""lang-cs prettyprint-override""><code>if (!proc.HasExited)
{
  try
  {
    proc.Kill();
  }
  catch (InvalidOperationException e){}
}
</code></pre>
",Stanislav,Stanislav,1362688029,1548531209,1548531209
http://stackoverflow.com/a/15285588/3223422,isPrime Function for Python Language,153278,Giancarlo Manuel Guerra Salv&#225;,Ry-,1362708731,1548851229,1362709005,https://stackoverflow.com/questions/15285534/isprime-function-for-python-language,"<p>Of many primality tests floating around the Internet, consider the following prime test:</p>

<pre><code>def is_prime(n):
  if n == 2 or n == 3: return True
  if n &lt; 2 or n%2 == 0: return False
  if n &lt; 9: return True
  if n%3 == 0: return False
  r = int(n**0.5)
  f = 5
  while f &lt;= r:
    print '\t',f
    if n%f == 0: return False
    if n%(f+2) == 0: return False
    f +=6
  return True    
</code></pre>

<p>Consider the prime number 5003:</p>

<pre><code>print is_prime(5003)
</code></pre>

<p>Prints:</p>

<pre><code> 5
 11
 17
 23
 29
 35
 41
 47
 53
 59
 65
True
</code></pre>

<p>The line <code>r = int(n**0.5)</code> evaluates to 70 (the square root of 5003 is 70.7318881411 and <code>int()</code> truncates this value)</p>

<p>Because of the first few tests, and the tests in the middle of loop, the loop only needs to be evaluated every 6th number. </p>

<p>Consider the next odd number (since all even numbers other than 2 are not prime) of 5005, same thing prints:</p>

<pre><code> 5
False
</code></pre>

<p>The limit is the square root since <code>x*y == y*x</code> The function only has to go 1 loop to find that 5005 is divisible by 5 and therefore not prime. Since <code>5 X 1001 == 1001 X 5</code> (and both are 5005), we do not need to go all the way to 1001 in the loop to know what we know at 5!</p>

<hr>

<p>Now, let's look at the algorithm you have:</p>

<pre><code>def isPrime(n):
    for i in range(2,int(n**0.5)+1):
        if n%i==0:
            return False

    return True
</code></pre>

<p>There are two issues:</p>

<ol>
<li>It does not test if <code>n</code> is less than 2, and there are no primes less than 2;</li>
<li>It tests every number between 2 and n**0.5 including all even and all odd numbers. Since every number greater than 2 that is divisible by 2 is not prime, we can speed it up a little by only testing odd numbers greater than 2.</li>
</ol>

<p>So:  </p>

<pre><code>def isPrime2(n):
    if n==2 or n==3: return True
    if n%2==0 or n&lt;2: return False
    for i in range(3,int(n**0.5)+1,2):   # only odd numbers
        if n%i==0:
            return False    

    return True
</code></pre>

<p>OK -- that speeds it up by about 30% (I benchmarked it...)</p>

<p>The algorithm I used <code>is_prime</code> is about 2x times faster still, since only every 6th integer is looping through the loop.  (Once again, I benchmarked it.)</p>

<hr>

<p>Side note: x**0.5 is the square root:</p>

<pre><code>&gt;&gt;&gt; import math
&gt;&gt;&gt; math.sqrt(100)==100**0.5
True
</code></pre>

<hr>

<p>Side note 2: <a href=""http://en.wikipedia.org/wiki/Primality_test"">primality testing</a> is an interesting problem in computer science.</p>
",dawg,dawg,1362709071,1431888309,1431888309
http://stackoverflow.com/a/15314508/1203182,"Once for all, how to correctly save instance state of Fragments in back stack?",253468,The Vee,,1362849359,1503601139,0,https://stackoverflow.com/questions/15313598/once-for-all-how-to-correctly-save-instance-state-of-fragments-in-back-stack,"<p>This is the way I am using at this moment... it's very complicated but at least it handles all the possible situations. In case anyone is interested.</p>

<pre><code>public final class MyFragment extends Fragment {
    private TextView vstup;
    private Bundle savedState = null;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.whatever, null);
        vstup = (TextView)v.findViewById(R.id.whatever);

        /* (...) */

        /* If the Fragment was destroyed inbetween (screen rotation), we need to recover the savedState first */
        /* However, if it was not, it stays in the instance from the last onDestroyView() and we don't want to overwrite it */
        if(savedInstanceState != null &amp;&amp; savedState == null) {
            savedState = savedInstanceState.getBundle(App.STAV);
        }
        if(savedState != null) {
            vstup.setText(savedState.getCharSequence(App.VSTUP));
        }
        savedState = null;

        return v;
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
        savedState = saveState(); /* vstup defined here for sure */
        vstup = null;
    }

    private Bundle saveState() { /* called either from onDestroyView() or onSaveInstanceState() */
        Bundle state = new Bundle();
        state.putCharSequence(App.VSTUP, vstup.getText());
        return state;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        /* If onDestroyView() is called first, we can use the previously savedState but we can't call saveState() anymore */
        /* If onSaveInstanceState() is called first, we don't have savedState, so we need to call saveState() */
        /* =&gt; (?:) operator inevitable! */
        outState.putBundle(App.STAV, (savedState != null) ? savedState : saveState());
    }

    /* (...) */

}
</code></pre>

<p><strong>Alternatively</strong>, it is always a possibility to keep the data displayed in passive <code>View</code>s in variables and using the <code>View</code>s only for displaying them, keeping the two things in sync. I don't consider the last part very clean, though.</p>
",The Vee,Marcin Orlowski,1362854631,1435244662,1435244662
http://stackoverflow.com/a/1532454/345718,MySQL number of items within &quot;in clause&quot;,69450,Bart,DarkAjax,1254929345,1363040272,1363040272,https://stackoverflow.com/questions/1532366/mysql-number-of-items-within-in-clause,"<p>Starting from a certain number, the <code>IN</code> tables are faster.</p>

<p><code>MySQL</code> has something inside its code that makes building a range over a large number of constant values slower than doing the same in a nested loop.</p>

<p>See this article in my blog for performance details:</p>

<ul>
<li><a href=""http://explainextended.com/2009/08/18/passing-parameters-in-mysql-in-list-vs-temporary-table/"" rel=""noreferrer""><strong>Passing parameters in MySQL: IN list vs. temporary table</strong></a></li>
</ul>
",Quassnoi,,1254930170,1254930170,0
http://stackoverflow.com/a/15343686/199100,Bash style process substitution with Python&#39;s Popen,2229,MutantTurkey,MutantTurkey,1363018671,1363029391,1363019655,https://stackoverflow.com/questions/15343447/bash-style-process-substitution-with-pythons-popen,"<p>If <code>pram_axdnull</code> understands <code>""-""</code> convention to mean: ""read from stdin"" then you could:</p>



<pre class=""lang-py prettyprint-override""><code>p = Popen([""pram_axdnull"", str(kmer), input_filename, ""-""],
          stdin=PIPE, stdout=PIPE)
output = p.communicate(generate_kmers(3))[0]
</code></pre>

<p>If the input is generated by external process:</p>

<pre class=""lang-py prettyprint-override""><code>kmer_proc = Popen([""generate_kmers"", str(kmer)], stdout=PIPE)
p = Popen([""pram_axdnull"", str(kmer), input_filename, ""-""],
          stdin=kmer_proc.stdout, stdout=PIPE)
kmer_proc.stdout.close()
output = p.communicate()[0]
</code></pre>

<p>If <code>pram_axdnull</code> <em>doesn't</em> understand <code>""-""</code> convention:</p>

<pre class=""lang-py prettyprint-override""><code>import os
import tempfile
from subprocess import check_output

with tempfile.NamedTemporaryFile() as file:
    file.write(generate_kmers(3))
    file.delete = False

try:
    p = Popen([""pram_axdnull"", str(kmer), input_filename, file.name],
              stdout=PIPE)
    output = p.communicate()[0]
    # or
    # output = check_output([""pram_axdnull"", str(kmer), input_filename, 
                             file.name])
finally:
    os.remove(file.name)
</code></pre>

<p>To generate temporary file using external process:</p>

<pre class=""lang-py prettyprint-override""><code>from subprocess import check_call

with tempfile.NamedTemporaryFile() as file:
    check_call([""generate_kmers"", str(kmer)], stdout=file)
    file.delete = False
</code></pre>

<p>To avoid waiting for all kmers to be generated i.e., to write/read kmers simultaneously, you could use <code>os.mkfifo()</code> on Unix (suggested by @cdarke):</p>

<pre class=""lang-py prettyprint-override""><code>import os
import shutil
import tempfile
from contextlib import contextmanager
from subprocess import Popen, PIPE

@contextmanager
def named_pipe():
    dirname = tempfile.mkdtemp()
    try:
        path = os.path.join(dirname, 'named_pipe')
        os.mkfifo(path)
        yield path
    finally:
        shutil.rmtree(dirname)

with named_pipe() as path:
    p = Popen([""pram_axdnull"", str(kmer), input_filename, path],
              stdout=PIPE) # read from path
    with open(path, 'wb') as wpipe:
        kmer_proc = Popen([""generate_kmers"", str(kmer)],
                          stdout=wpipe) # write to path
    output = p.communicate()[0]
    kmer_proc.wait()
</code></pre>
",jfs,jfs,1363019456,1363029391,1363029391
http://stackoverflow.com/a/15347389/1657047,Python Finding Prime Factors,150264,francium,Anirudh Ramanathan,1363030953,1560607616,1363031080,https://stackoverflow.com/questions/15347174/python-finding-prime-factors,"<p>For prime number generation I always use <a href=""http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes"" rel=""nofollow""><code>Sieve of Eratosthenes</code></a>:</p>

<pre><code>def primes(n):
    if n&lt;=2:
        return []
    sieve=[True]*(n+1)
    for x in range(3,int(n**0.5)+1,2):
        for y in range(3,(n//x)+1,2):
            sieve[(x*y)]=False

    return [2]+[i for i in range(3,n,2) if sieve[i]]

In [42]: %timeit primes(10**5)
10 loops, best of 3: 60.4 ms per loop

In [43]: %timeit primes(10**6)
1 loops, best of 3: 1.01 s per loop
</code></pre>

<p>You can use <a href=""http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test"" rel=""nofollow"">Miller-Rabin primality test</a> to check whether a number is prime or not. You can find its Python implementations <a href=""http://web.archive.org/web/20130328080230/http://en.literateprograms.org/Miller-Rabin_primality_test_%28Python%29?"" rel=""nofollow"">here</a>.</p>

<p>Always use <a href=""http://docs.python.org/2/library/timeit.html"" rel=""nofollow""><code>timeit</code></a> module to time your code, the 2nd one takes just <code>15us</code>:</p>

<pre><code>def func():
    n = 600851475143
    i = 2
    while i * i &lt; n:
         while n % i == 0:
            n = n / i
         i = i + 1

In [19]: %timeit func()
1000 loops, best of 3: 1.35 ms per loop

def func():
    i=1
    while i&lt;100:i+=1
   ....:     

In [21]: %timeit func()
10000 loops, best of 3: 15.3 us per loop
</code></pre>
",Ashwini Chaudhary,Josh,1363031625,1401380267,1401380267
http://stackoverflow.com/a/15349865/680742,setImmediate vs. nextTick,82274,Benjamin Gruenbaum,Micha Perakowski,1363040060,1552623938,1490717668,https://stackoverflow.com/questions/15349733/setimmediate-vs-nexttick,"<p>Use <code>setImmediate</code> if you want to queue the function behind whatever I/O event callbacks that are already in the event queue.  Use <code>process.nextTick</code> to effectively queue the function at the head of the event queue so that it executes immediately after the current function completes.</p>

<p>So in a case where you're trying to break up a long running, CPU-bound job using recursion, you would now want to use <code>setImmediate</code> rather than <code>process.nextTick</code> to queue the next iteration as otherwise any I/O event callbacks wouldn't get the chance to run between iterations.</p>
",JohnnyHK,JohnnyHK,1363040763,1363183837,1363183837
http://stackoverflow.com/a/15353235/1006854,How to programmatically create a client side file in Javascript that can be downloaded by the user?,15574,ZenBalance,ZenBalance,1363046443,1363120089,1363120089,https://stackoverflow.com/questions/15350895/how-to-programmatically-create-a-client-side-file-in-javascript-that-can-be-down,"<p>One way to do this without having to use the filesystem is to create blobs.  Let's say we have a bunch of data (in your case, from a form) and we wish to save it to a text ""file"".  We could actually do something as follows:</p>

<pre><code>var formBlob = new Blob([someStringVariable], { type: 'text/plain' });
</code></pre>

<p>From here, we could link a user to download this as an actual file like so:</p>

<pre><code>someLink.href = window.URL.createObjectURL(formBlob);
</code></pre>

<p>If we wanted this data to persist, we could serialize our blob as a base64 string and save it to localStorage or any other persistent type of storage.  Converting blobs to base64 is a bit beyond the scope of this answer but you can find a good reference/library here: <a href=""http://blog.danguer.com/2011/10/24/base64-binary-decoding-in-javascript/"" rel=""noreferrer"">http://blog.danguer.com/2011/10/24/base64-binary-decoding-in-javascript/</a></p>
",Graham Robertson,,1363061903,1363061903,0
http://stackoverflow.com/a/15365656/127465,nodejs - Temporary file name,42101,nornagon,nornagon,1313297190,1550749968,1458748940,https://stackoverflow.com/questions/7055061/nodejs-temporary-file-name,"<p>Without using any additional plugins:</p>

<pre><code>var crypto = require('crypto');
var fs = require('fs'); 

var filename = 'foo'+crypto.randomBytes(4).readUInt32LE(0)+'bar';
fs.writeFileSync(filename, 'baz');
</code></pre>

<p>EDIT: read comments.</p>
",kinematic,kinematic,1363103024,1387319751,1387319751
http://stackoverflow.com/a/15372760/377927,Replace substring with another substring C++,133632,Steveng,Mark Cidade,1294630930,1562327989,1464792353,https://stackoverflow.com/questions/4643512/replace-substring-with-another-substring-c,"<p>I think all solutions will fail if the length of the replacing string is different from the length of the string to be replaced. (search for ""abc"" and replace by ""xxxxxx"")
A general approach might be:</p>

<pre><code>void replaceAll( string &amp;s, const string &amp;search, const string &amp;replace ) {
    for( size_t pos = 0; ; pos += replace.length() ) {
        // Locate the substring to replace
        pos = s.find( search, pos );
        if( pos == string::npos ) break;
        // Replace by erasing and inserting
        s.erase( pos, search.length() );
        s.insert( pos, replace );
    }
}
</code></pre>
",rotmax,,1363124517,1363124517,0
http://stackoverflow.com/a/154090/3191,Using the &quot;start&quot; command with parameters passed to the started program,306338,JosephStyons,a_horse_with_no_name,1222795271,1559663903,1492504987,https://stackoverflow.com/questions/154075/using-the-start-command-with-parameters-passed-to-the-started-program,"<p>START has a peculiarity involving double quotes around the first parameter. If the first parameter has double quotes it uses that as the optional TITLE for the new window.  </p>

<p>I believe what you want is:</p>

<pre><code>start """" ""c:\program files\Microsoft Virtual PC\Virtual PC.exe"" -pc MY-PC -launch
</code></pre>

<p>In other words, give it an empty title before the name of the program to fake it out.</p>
",Tim Farley,JosephStyons,1222795533,1456168903,1456168903
http://stackoverflow.com/a/15413637/205350,A numeric string as array key in PHP,65579,Dogbert,,1288899013,1558082960,0,https://stackoverflow.com/questions/4100488/a-numeric-string-as-array-key-in-php,"<p>My workaround is:</p>

<pre><code>$id = 55;
$array = array(
  "" $id"" =&gt; $value
);
</code></pre>

<p>The space char (prepend) is a good solution because keep the int conversion:</p>

<pre><code>foreach( $array as $key =&gt; $value ) {
  echo $key;
}
</code></pre>

<p>You'll see 55 as int.</p>
",Undolog,,1363275424,1363275424,0
http://stackoverflow.com/a/15423007/115478,How can I control what scalar form PyYAML uses for my data?,8622,Ned Batchelder,Anthon,1324957760,1535010580,1455532017,https://stackoverflow.com/questions/8640959/how-can-i-control-what-scalar-form-pyyaml-uses-for-my-data,"<p>I wanted any input with a <code>\n</code> in it to be a block literal. Using the code in <code>yaml/representer.py</code> as a base I got:</p>

<pre><code># -*- coding: utf-8 -*-
import yaml

def should_use_block(value):
    for c in u""\u000a\u000d\u001c\u001d\u001e\u0085\u2028\u2029"":
        if c in value:
            return True
    return False

def my_represent_scalar(self, tag, value, style=None):
    if style is None:
        if should_use_block(value):
             style='|'
        else:
            style = self.default_style

    node = yaml.representer.ScalarNode(tag, value, style=style)
    if self.alias_key is not None:
        self.represented_objects[self.alias_key] = node
    return node


a={'short': ""Hello"", 'multiline': """"""Line1
Line2
Line3
"""""", 'multiline-unicode': u""""""Lne1
Lne2
Lne3
""""""}

print(yaml.dump(a))
print(yaml.dump(a, allow_unicode=True))
yaml.representer.BaseRepresenter.represent_scalar = my_represent_scalar
print(yaml.dump(a))
print(yaml.dump(a, allow_unicode=True))
</code></pre>

<p><strong>Output</strong></p>

<pre><code>{multiline: 'Line1

    Line2

    Line3

    ', multiline-unicode: ""L\xEAne1\nL\xEAne2\nL\xEAne3\n"", short: Hello}

{multiline: 'Line1

    Line2

    Line3

    ', multiline-unicode: 'Lne1

    Lne2

    Lne3

    ', short: Hello}

After override

multiline: |
  Line1
  Line2
  Line3
multiline-unicode: ""L\xEAne1\nL\xEAne2\nL\xEAne3\n""
short: Hello

multiline: |
  Line1
  Line2
  Line3
multiline-unicode: |
  Lne1
  Lne2
  Lne3
short: Hello
</code></pre>
",lbt,,1363309675,1363309675,0
http://stackoverflow.com/a/15431343/875379,Can I set max_retries for requests.request?,89264,teferi,Brad Koch,1363346342,1555430693,1509999192,https://stackoverflow.com/questions/15431044/can-i-set-max-retries-for-requests-request,"<p>It is the underlying <code>urllib3</code> library that does the retrying. To set a different maximum retry count, use <a href=""http://docs.python-requests.org/en/latest/user/advanced/#transport-adapters"" rel=""noreferrer"">alternative transport adapters</a>:</p>

<pre><code>from requests.adapters import HTTPAdapter

s = requests.Session()
s.mount('http://stackoverflow.com', HTTPAdapter(max_retries=5))
</code></pre>

<p>The <code>max_retries</code> argument takes an integer or a <a href=""http://urllib3.readthedocs.io/en/latest/reference/urllib3.util.html#urllib3.util.retry.Retry"" rel=""noreferrer""><code>Retry()</code> object</a>; the latter gives you fine-grained control over what kinds of failures are retried (an integer value is turned into a <code>Retry()</code> instance which only handles connection failures; errors after a connection is made are by default not handled as these could lead to side-effects).</p>

<hr>

<p><em>Old answer, predating the release of requests 1.2.1</em>:</p>

<p>The <code>requests</code> library doesn't really make this configurable, nor does it intend to (see <a href=""https://github.com/kennethreitz/requests/pull/1219"" rel=""noreferrer"">this pull request</a>). Currently (requests 1.1), the retries count is set to 0. If you really want to set it to a higher value, you'll have to set this globally:</p>

<pre><code>import requests

requests.adapters.DEFAULT_RETRIES = 5
</code></pre>

<p>This constant is not documented; use it at your own peril as future releases could change how this is handled.</p>

<p><strong>Update</strong>: and this <em>did</em> change; in version 1.2.1 <a href=""https://github.com/kennethreitz/requests/commit/36dcce1a06fe0a82d8522c7d4287fb3623722c6c"" rel=""noreferrer"">the option to set the <code>max_retries</code> parameter</a> on the <a href=""http://docs.python-requests.org/en/latest/api/#requests.adapters.HTTPAdapter"" rel=""noreferrer""><code>HTTPAdapter()</code> class</a> was added, so that now you have to use alternative transport adapters, see above. The monkey-patch approach no longer works, unless you also patch the <code>HTTPAdapter.__init__()</code> defaults (very much not recommended).</p>
",Martijn Pieters,Martijn Pieters,1363347202,1506409812,1506409812
http://stackoverflow.com/a/15453996/937715,Icons in a List dialog,16830,A.Quiroga,,1324034100,1536767140,0,https://stackoverflow.com/questions/8533394/icons-in-a-list-dialog,"<p>Here is a complete solution with an extended ArrayAdapter that allows icons.</p>

<p>See design notes for dialogs at <a href=""http://developer.android.com/design/building-blocks/dialogs.html"" rel=""noreferrer"">http://developer.android.com/design/building-blocks/dialogs.html</a>  Iconogaphy at <a href=""http://developer.android.com/design/style/iconography.html"" rel=""noreferrer"">http://developer.android.com/design/style/iconography.html</a> and IconPacks at <a href=""http://developer.android.com/design/downloads/index.html"" rel=""noreferrer"">http://developer.android.com/design/downloads/index.html</a></p>

<p><strong>Note</strong> that the size for these looks pretty good at 48 x 48 dp, which isn't a bundled size, so you'll have to scale your own icon from the downloads.</p>

<p><strong>USAGE</strong>: </p>

<pre><code>            @Override
        public void onClick(View v) {
            final String [] items = new String[] {""From Gallery"", ""From Camera""};
            final Integer[] icons = new Integer[] {R.drawable.dialog_gallery_icon, R.drawable.dialog_camera_icon};
            ListAdapter adapter = new ArrayAdapterWithIcon(getActivity(), items, icons);

            new AlertDialog.Builder(getActivity()).setTitle(""Select Image"")
                .setAdapter(adapter, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int item ) {
                        Toast.makeText(getActivity(), ""Item Selected: "" + item, Toast.LENGTH_SHORT).show();
                    }
            }).show();
        }
</code></pre>

<p><strong>ArrayAdapterWithIcon.java</strong></p>

<pre><code>public class ArrayAdapterWithIcon extends ArrayAdapter&lt;String&gt; {

private List&lt;Integer&gt; images;

public ArrayAdapterWithIcon(Context context, List&lt;String&gt; items, List&lt;Integer&gt; images) {
    super(context, android.R.layout.select_dialog_item, items);
    this.images = images;
}

public ArrayAdapterWithIcon(Context context, String[] items, Integer[] images) {
    super(context, android.R.layout.select_dialog_item, items);
    this.images = Arrays.asList(images);
}

public ArrayAdapterWithIcon(Context context, int items, int images) {
    super(context, android.R.layout.select_dialog_item, context.getResources().getTextArray(items));

    final TypedArray imgs = context.getResources().obtainTypedArray(images);
    this.images = new ArrayList&lt;Integer&gt;() {{ for (int i = 0; i &lt; imgs.length(); i++) {add(imgs.getResourceId(i, -1));} }};

    // recycle the array
    imgs.recycle();
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = super.getView(position, convertView, parent);
    TextView textView = (TextView) view.findViewById(android.R.id.text1);

    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        textView.setCompoundDrawablesRelativeWithIntrinsicBounds(images.get(position), 0, 0, 0);
    } else {
        textView.setCompoundDrawablesWithIntrinsicBounds(images.get(position), 0, 0, 0);
    }
    textView.setCompoundDrawablePadding(
            (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 12, getContext().getResources().getDisplayMetrics()));
    return view;
}

}
</code></pre>
",aaronvargas,Gavriel,1363463707,1458075143,1458075143
http://stackoverflow.com/a/15458987/2803759,Check if a string is html or not,78453,user1240679,,1363508633,1556056879,0,https://stackoverflow.com/questions/15458876/check-if-a-string-is-html-or-not,"<p>A better regex to use to check if a string is HTML is:</p>

<pre><code>/^/
</code></pre>

<p>For example:</p>

<pre><code>/^/.test('') // true
/^/.test('foo bar baz') //true
/^/.test('&lt;p&gt;fizz buzz&lt;/p&gt;') //true
</code></pre>

<p>In fact, it's so good, that it'll return <code>true</code> for <em>every</em> string passed to it, which is because <strong><em>every string is HTML</em></strong>. Seriously, even if it's poorly formatted or invalid, it's still HTML.</p>

<p>If what you're looking for is the presence of HTML elements, rather than simply any text content, you could use something along the lines of:</p>

<pre><code>/&lt;[a-z][\s\S]*&gt;/i.test()
</code></pre>

<p>It won't help you parse the HTML in any way, but it will certainly flag the string as containing HTML elements.</p>
",zzzzBov,,1363509811,1363509811,0
http://stackoverflow.com/a/1547631/2066546,How to encode media in base64 given URL in Ruby,48842,Ramon Tayag,Adrian Mann,1255147030,1547000810,1429024676,https://stackoverflow.com/questions/1547008/how-to-encode-media-in-base64-given-url-in-ruby,"<p>The <code>open</code> method:</p>

<pre><code>open(""http://image.com/img.jpg"")
</code></pre>

<p>is returning a Tempfile object, while <code>encode64</code> expects a String.</p>

<p>Calling <code>read</code> on the tempfile should do the trick:</p>

<pre><code>ActiveSupport::Base64.encode64(open(""http://image.com/img.jpg"") { |io| io.read })
</code></pre>
",mtyaka,mtyaka,1255171787,1268131765,1268131765
http://stackoverflow.com/a/15476793/1673548,How to get the ActionBar height?,156088,znat,,1346939103,1531202894,0,https://stackoverflow.com/questions/12301510/how-to-get-the-actionbar-height,"<p>@Anthony answer works for devices that support <code>ActionBar</code> and for those devices which support only <code>Sherlock Action Bar</code> following method must be used</p>

<pre><code>    TypedValue tv = new TypedValue();
    if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
        actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());

    if(actionBarHeight ==0 &amp;&amp; getTheme().resolveAttribute(com.actionbarsherlock.R.attr.actionBarSize, tv, true)){
            actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
    }

   //OR as stated by @Marina.Eariel
   TypedValue tv = new TypedValue();
   if(Build.VERSION.SDK_INT&gt;=Build.VERSION_CODES.HONEYCOMB){
      if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
        actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
   }else if(getTheme().resolveAttribute(com.actionbarsherlock.R.attr.actionBarSize, tv, true){
        actionBarHeight = TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
   }
</code></pre>
",laaptu,laaptu,1363609428,1363666678,1363666678
http://stackoverflow.com/a/15479974/1424462,Why is the order in dictionaries and sets arbitrary?,14336,Edgar Aroutiounian,Machavity,1363618746,1548360418,1548360418,https://stackoverflow.com/questions/15479928/why-is-the-order-in-dictionaries-and-sets-arbitrary,"<p>The order is not arbitrary, but depends on the insertion and deletion history of the dictionary or set, as well as on the specific Python implementation. For the remainder of this answer, for 'dictionary', you can also read 'set'; sets are implemented as dictionaries with just keys and no values.</p>

<p>Keys are hashed, and hash values are assigned to slots in a dynamic table (it can grow or shrink based on needs). And that mapping process can lead to collisions, meaning that a key will have to be slotted in a <em>next</em> slot based on what is already there.</p>

<p>Listing the contents loops over the slots, and so keys are listed in the order they <em>currently</em> reside in the table.</p>

<p>Take the keys <code>'foo'</code> and <code>'bar'</code>, for example, and lets assume the table size is 8 slots. In Python 2.7, <code>hash('foo')</code> is <code>-4177197833195190597</code>, <code>hash('bar')</code> is <code>327024216814240868</code>. Modulo 8, that means these two keys are slotted in slots 3 and 4 then:</p>

<pre><code>&gt;&gt;&gt; hash('foo')
-4177197833195190597
&gt;&gt;&gt; hash('foo') % 8
3
&gt;&gt;&gt; hash('bar')
327024216814240868
&gt;&gt;&gt; hash('bar') % 8
4
</code></pre>

<p>This informs their listing order:</p>

<pre><code>&gt;&gt;&gt; {'bar': None, 'foo': None}
{'foo': None, 'bar': None}
</code></pre>

<p>All slots except 3 and 4 are empty, looping over the table first lists slot 3, then slot 4, so <code>'foo'</code> is listed before <code>'bar'</code>.</p>

<p><code>bar</code> and <code>baz</code>, however, have hash values that are exactly 8 apart and thus map to the exact same slot, <code>4</code>:</p>

<pre><code>&gt;&gt;&gt; hash('bar')
327024216814240868
&gt;&gt;&gt; hash('baz')
327024216814240876
&gt;&gt;&gt; hash('bar') % 8
4
&gt;&gt;&gt; hash('baz') % 8
4
</code></pre>

<p>Their order now depends on which key was slotted first; the second key will have to be moved to a next slot:</p>

<pre><code>&gt;&gt;&gt; {'baz': None, 'bar': None}
{'bar': None, 'baz': None}
&gt;&gt;&gt; {'bar': None, 'baz': None}
{'baz': None, 'bar': None}
</code></pre>

<p>The table order differs here, because one or the other key was slotted first.</p>

<p>The technical name for the underlying structure used by CPython (the most commonly used Python implemenation) is a <a href=""http://en.wikipedia.org/wiki/hash_table"" rel=""noreferrer"">hash table</a>, one that uses open addressing. If you are curious, and understand C well enough, take a look at the <a href=""http://hg.python.org/cpython/file/tip/Objects/dictobject.c"" rel=""noreferrer"">C implementation</a> for all the (well documented) details. You could also watch this <a href=""http://pyvideo.org/video/276/the-mighty-dictionary-55"" rel=""noreferrer"">Pycon 2010 presentation by Brandon Rhodes</a> about how CPython <code>dict</code> works, or pick up a copy of <a href=""http://shop.oreilly.com/product/9780596510046.do"" rel=""noreferrer"">Beautiful Code</a>, which includes a chapter on the implementation written by Andrew Kuchling.</p>

<p>Note that as of Python 3.3, a random hash seed is used as well, making hash collisions unpredictable to prevent certain types of denial of service (where an attacker renders a Python server unresponsive by causing mass hash collisions). This means that the order of a given dictionary is then <em>also</em> dependent on the random hash seed for the current Python invocation.</p>

<p>Other implementations are free to use a different structure for dictionaries, as long as they satisfy the documented Python interface for them, but I believe that all implementations so far use a variation of the hash table.</p>

<p>CPython 3.6 introduces a <em>new</em> <code>dict</code> implementation that maintains insertion order, and is faster and more memory efficient to boot. Rather than keep a large sparse table where each row references the stored hash value, and the key and value objects, the new implementation adds a smaller hash <em>array</em> that only references indices in dense table (one that only contains as many rows as there are actual key-value pairs), and it is the dense table that happens to list the contained items in order. See the <a href=""https://mail.python.org/pipermail/python-dev/2012-December/123028.html"" rel=""noreferrer"">proposal to Python-Dev for more details</a>. Note that in Python 3.6 this is considered an <em>implementation detail</em>, Python-the-language does not specify that other implementations have to retain order. This changed in Python 3.7, where this detail was <a href=""https://mail.python.org/pipermail/python-dev/2017-December/151283.html"" rel=""noreferrer"">elevated to be a <em>language specification</em></a>; for any implementation to be properly compatible with Python 3.7 or newer it <strong>must</strong> copy this order-preserving behaviour.</p>

<p>Python 2.7 and newer also provides an <a href=""https://docs.python.org/2/library/collections.html#collections.OrderedDict"" rel=""noreferrer""><code>OrderedDict</code> class</a>, a subclass of <code>dict</code> that adds an additional data structure to record key order. At the price of some speed and extra memory, this class remembers in what order you inserted keys; listing keys, values or items will then do so in that order. It uses a doubly-linked list stored in an additional dictionary to keep the order up-to-date efficiently. See the <a href=""https://mail.python.org/pipermail/python-dev/2012-December/123028.html"" rel=""noreferrer"">post by Raymond Hettinger outlining the idea</a>. Note that the <code>set</code> type is still unordered.</p>

<p>If you wanted an ordered set, you can install the <a href=""https://pypi.python.org/pypi/oset"" rel=""noreferrer""><code>oset</code> package</a>; it works on Python 2.5 and up.</p>
",Martijn Pieters,Martijn Pieters,1363618872,1515147167,1515147167
http://stackoverflow.com/a/15559608/1838811,nicEdit does not wrap text,895,user2196541,,1363892255,1363905899,0,https://stackoverflow.com/questions/15555900/nicedit-does-not-wrap-text,"<p>You must add wrap to the nicEdit main div.</p>

<p>Look here for wrap <a href=""https://stackoverflow.com/questions/1638223/is-there-a-way-to-word-wrap-text-in-a-div"">Is there a way to word-wrap long words in a div?</a></p>

<pre><code>$(""div.nicEdit-main"").addClass('wordwrap');
</code></pre>

<p>See example on jsfiddle <a href=""http://jsfiddle.net/LfxGm/"" rel=""nofollow noreferrer"">http://jsfiddle.net/LfxGm/</a></p>
",nevtag,Community,1363905899,1363905899,1495541096
http://stackoverflow.com/a/15564039/1664216,"ActiveRecord.find(array_of_ids), preserving order",43186,Leonid Shevtsov,Mike Woodhouse,1257428085,1562149796,1257450495,https://stackoverflow.com/questions/1680627/activerecord-findarray-of-ids-preserving-order,"<p>Oddly, no one has suggested something like this:</p>

<pre class=""lang-ruby prettyprint-override""><code>index = Something.find(array_of_ids).group_by(&amp;:id)
array_of_ids.map { |i| index[i].first }
</code></pre>

<p>As efficient as it gets besides letting SQL backend do it.</p>

<p><strong>Edit:</strong> To improve on my own answer, you can also do it like this:</p>

<pre class=""lang-ruby prettyprint-override""><code>Something.find(array_of_ids).index_by(&amp;:id).slice(*array_of_ids).values
</code></pre>

<p><code>#index_by</code> and <code>#slice</code> are pretty handy additions in <a href=""http://guides.rubyonrails.org/active_support_core_extensions.html"" rel=""noreferrer"">ActiveSupport</a> for arrays and hashes respectively.</p>
",Gunchars,Gunchars,1363933511,1377544896,1377544896
http://stackoverflow.com/a/15572855/996592,error: requestFeature() must be called before adding content - Still won&#39;t work,7675,theblitz,theblitz,1317123521,1403071853,1317127792,https://stackoverflow.com/questions/7568479/error-requestfeature-must-be-called-before-adding-content-still-wont-work,"<p>I experienced the same problem. I found that the problem only occurs if I do both of the following things:</p>

<ul>
<li><p>I don't use activity managed dialogs (<code>activity.showDialog()</code> ->
<code>activity.onCreateDialog()</code>/<code>onPrepareDialog()</code>)</p></li>
<li><p>I do <code>dialog.findViewById()</code> (and this is indeed the line difference
between success or the requestFeature exception!).</p></li>
</ul>



<pre><code>final Builder dialogBuilder = new AlertDialog.Builder(activity);
b.setView(rootView);
b.setIcon(android.R.drawable.ic_dialog_info);
b.setTitle(R.string.message_of_the_day_title);
b.setCancelable(false);
dialog = b.createDialog();
dialog.findViewById(R.id.myid); // this is the problem
</code></pre>

<p>The <code>dialog.findViewById()</code> causes the problem because it calls</p>

<pre><code>dialog.getWindow().getDecorView()
</code></pre>

<p>and the method javadoc of  <code>getDecorView()</code> says: </p>

<blockquote>
  <p>Note that calling this function for the first time ""locks in"" various
  window characteristics as described in {@link #setContentView(View,
  android.view.ViewGroup.LayoutParams)}.</p>
</blockquote>

<p>Isn't that nice, <code>findViewById()</code> has a side effect which causes seemingly correct applications to crash. Why there's a difference between <code>Activity</code> managed dialogs and normal dialogs I do not know, but I guess <code>getDecorView()</code> does some magic for <code>Activity</code> managed dialogs.</p>

<p>I did the above because I moved from using <code>Activity</code> managed dialogs to handling dialogs myself. </p>

<p>The solution for me is to manipulate the rootView, using <code>rootView.findViewById()</code>, instead of manipulating the dialog.</p>
",arberg,Qantas 94 Heavy,1363962521,1403071853,1403071853
http://stackoverflow.com/a/15579198/654755,Logging requests to django-rest-framework,16155,OrPo,mlissner,1363982550,1560938359,1442602744,https://stackoverflow.com/questions/15578946/logging-requests-to-django-rest-framework,"<p>Override the <a href=""http://django-rest-framework.org/api-guide/views/#dispatch-methods"" rel=""noreferrer""><code>APIView.initial()</code></a> method to add logging yourself.</p>

<blockquote>
  <h2>Dispatch methods</h2>
  
  <p>The following methods are called directly by the view's .dispatch() method. These perform any actions that need to occur before or after calling the handler methods such as .get(), .post(), put(), patch() and .delete().</p>
  
  <p><code>.initial(self, request, *args, **kwargs)</code><br>
  Performs any actions that need to occur before the handler method gets called. This method is used to enforce permissions and throttling, and perform content negotiation.</p>
</blockquote>
",Glyn Jackson,Paulo Scardine,1363983582,1432057285,1432057285
http://stackoverflow.com/a/155812/641263,Detecting Unsaved Changes,82324,tbreffni,Qantas 94 Heavy,1222821688,1452518283,1392437005,https://stackoverflow.com/questions/155739/detecting-unsaved-changes,"<p>One piece of the puzzle:</p>

<pre><code>/**
 * Determines if a form is dirty by comparing the current value of each element
 * with its default value.
 *
 * @param {Form} form the form to be checked.
 * @return {Boolean} &lt;code&gt;true&lt;/code&gt; if the form is dirty, &lt;code&gt;false&lt;/code&gt;
 *                   otherwise.
 */
function formIsDirty(form) {
  for (var i = 0; i &lt; form.elements.length; i++) {
    var element = form.elements[i];
    var type = element.type;
    if (type == ""checkbox"" || type == ""radio"") {
      if (element.checked != element.defaultChecked) {
        return true;
      }
    }
    else if (type == ""hidden"" || type == ""password"" ||
             type == ""text"" || type == ""textarea"") {
      if (element.value != element.defaultValue) {
        return true;
      }
    }
    else if (type == ""select-one"" || type == ""select-multiple"") {
      for (var j = 0; j &lt; element.options.length; j++) {
        if (element.options[j].selected !=
            element.options[j].defaultSelected) {
          return true;
        }
      }
    }
  }
  return false;
}
</code></pre>

<p><a href=""http://developer.mozilla.org/en/DOM/window.onbeforeunload"" rel=""noreferrer"">And another</a>:</p>

<pre><code>window.onbeforeunload = function(e) {
  e = e || window.event;  
  if (formIsDirty(document.forms[""someForm""])) {
    // For IE and Firefox
    if (e) {
      e.returnValue = ""You have unsaved changes."";
    }
    // For Safari
    return ""You have unsaved changes."";
  }
};
</code></pre>

<p>Wrap it all up, and what do you get?</p>

<pre><code>var confirmExitIfModified = (function() {
  function formIsDirty(form) {
    // ...as above
  }

  return function(form, message) {
    window.onbeforeunload = function(e) {
      e = e || window.event;
      if (formIsDirty(document.forms[form])) {
        // For IE and Firefox
        if (e) {
          e.returnValue = message;
        }
        // For Safari
        return message;
      }
    };
  };
})();

confirmExitIfModified(""someForm"", ""You have unsaved changes."");
</code></pre>

<p>You'll probably also want to change the registration of the <code>beforeunload</code> event handler to use <code>LIBRARY_OF_CHOICE</code>'s event registration.</p>
",Jonny Buchanan,Jonny Buchanan,1222823386,1323721728,1323721728
http://stackoverflow.com/a/15610692/387558,Rails 3 - unserialize returns only ActiveRecord::AttributeMethods::Serialization::Attribute,1515,Florian Eck,fmendez,1364053208,1364201020,1364053407,https://stackoverflow.com/questions/15588643/rails-3-unserialize-returns-only-activerecordattributemethodsserialization,"<p>I now figured out when this problem happens, but i still dont know why:</p>

<p>This works:</p>

<pre><code>User &lt; ActiveRecord::Base
    serialize :options, Hash
end
</code></pre>

<p>Options return {}</p>

<p>If i call the model itself before serialize, like that:</p>

<pre><code>User &lt; ActiveRecord::Base
  USER_LIST = User.all.map {|u| [u.name, u.id]}

  serialize :options, Hash
end
</code></pre>

<p>i get ActiveRecord::AttributeMethods::Serialization::Attribute</p>

<p>Anybody got an idea?</p>
",Florian Eck,,1364201020,1364201020,0
http://stackoverflow.com/a/15612964/540909,Find location of removable SD card,244938,borisstr,LarsH,1303059469,1549307114,1548710146,https://stackoverflow.com/questions/5694933/find-location-of-removable-sd-card,"<p>I came up with the following solution based on some answers found here.</p>

<p><strong>CODE:</strong></p>

<pre><code>public class ExternalStorage {

    public static final String SD_CARD = ""sdCard"";
    public static final String EXTERNAL_SD_CARD = ""externalSdCard"";

    /**
     * @return True if the external storage is available. False otherwise.
     */
    public static boolean isAvailable() {
        String state = Environment.getExternalStorageState();
        if (Environment.MEDIA_MOUNTED.equals(state) || Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            return true;
        }
        return false;
    }

    public static String getSdCardPath() {
        return Environment.getExternalStorageDirectory().getPath() + ""/"";
    }

    /**
     * @return True if the external storage is writable. False otherwise.
     */
    public static boolean isWritable() {
        String state = Environment.getExternalStorageState();
        if (Environment.MEDIA_MOUNTED.equals(state)) {
            return true;
        }
        return false;

    }

    /**
     * @return A map of all storage locations available
     */
    public static Map&lt;String, File&gt; getAllStorageLocations() {
        Map&lt;String, File&gt; map = new HashMap&lt;String, File&gt;(10);

        List&lt;String&gt; mMounts = new ArrayList&lt;String&gt;(10);
        List&lt;String&gt; mVold = new ArrayList&lt;String&gt;(10);
        mMounts.add(""/mnt/sdcard"");
        mVold.add(""/mnt/sdcard"");

        try {
            File mountFile = new File(""/proc/mounts"");
            if(mountFile.exists()){
                Scanner scanner = new Scanner(mountFile);
                while (scanner.hasNext()) {
                    String line = scanner.nextLine();
                    if (line.startsWith(""/dev/block/vold/"")) {
                        String[] lineElements = line.split("" "");
                        String element = lineElements[1];

                        // don't add the default mount path
                        // it's already in the list.
                        if (!element.equals(""/mnt/sdcard""))
                            mMounts.add(element);
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        try {
            File voldFile = new File(""/system/etc/vold.fstab"");
            if(voldFile.exists()){
                Scanner scanner = new Scanner(voldFile);
                while (scanner.hasNext()) {
                    String line = scanner.nextLine();
                    if (line.startsWith(""dev_mount"")) {
                        String[] lineElements = line.split("" "");
                        String element = lineElements[2];

                        if (element.contains("":""))
                            element = element.substring(0, element.indexOf("":""));
                        if (!element.equals(""/mnt/sdcard""))
                            mVold.add(element);
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }


        for (int i = 0; i &lt; mMounts.size(); i++) {
            String mount = mMounts.get(i);
            if (!mVold.contains(mount))
                mMounts.remove(i--);
        }
        mVold.clear();

        List&lt;String&gt; mountHash = new ArrayList&lt;String&gt;(10);

        for(String mount : mMounts){
            File root = new File(mount);
            if (root.exists() &amp;&amp; root.isDirectory() &amp;&amp; root.canWrite()) {
                File[] list = root.listFiles();
                String hash = ""["";
                if(list!=null){
                    for(File f : list){
                        hash += f.getName().hashCode()+"":""+f.length()+"", "";
                    }
                }
                hash += ""]"";
                if(!mountHash.contains(hash)){
                    String key = SD_CARD + ""_"" + map.size();
                    if (map.size() == 0) {
                        key = SD_CARD;
                    } else if (map.size() == 1) {
                        key = EXTERNAL_SD_CARD;
                    }
                    mountHash.add(hash);
                    map.put(key, root);
                }
            }
        }

        mMounts.clear();

        if(map.isEmpty()){
                 map.put(SD_CARD, Environment.getExternalStorageDirectory());
        }
        return map;
    }
}
</code></pre>

<p><strong>USAGE:</strong></p>

<pre><code>Map&lt;String, File&gt; externalLocations = ExternalStorage.getAllStorageLocations();
File sdCard = externalLocations.get(ExternalStorage.SD_CARD);
File externalSdCard = externalLocations.get(ExternalStorage.EXTERNAL_SD_CARD);
</code></pre>
",Richard,hasanghaforian,1364208209,1431225700,1431225700
http://stackoverflow.com/a/15645088/1547223,Python progress bar and downloads,46701,user1607549,,1364323386,1545349453,0,https://stackoverflow.com/questions/15644964/python-progress-bar-and-downloads,"<p>Updated for your sample url:</p>

<p>I've just written a super simple (slightly hacky) approach to this for scraping pdfs off a certain site. Note, it only works correctly on unix based systems (linux, mac os) as powershell does not handle ""\r""</p>

<pre><code>import requests

link = ""http://indy/abcde1245""
file_name = ""download.data""
with open(file_name, ""wb"") as f:
        print ""Downloading %s"" % file_name
        response = requests.get(link, stream=True)
        total_length = response.headers.get('content-length')

        if total_length is None: # no content length header
            f.write(response.content)
        else:
            dl = 0
            total_length = int(total_length)
            for data in response.iter_content(chunk_size=4096):
                dl += len(data)
                f.write(data)
                done = int(50 * dl / total_length)
                sys.stdout.write(""\r[%s%s]"" % ('=' * done, ' ' * (50-done)) )    
                sys.stdout.flush()
</code></pre>

<p>It uses the <a href=""http://docs.python-requests.org/en/latest/"" rel=""noreferrer"">requests library</a> so you'll need to install that. This outputs something like the following into your console:</p>

<blockquote>
  <p>>Downloading download.data</p>
  
  <p>>[=============&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</p>
</blockquote>

<p>The progress bar is 52 characters wide in the script (2 characters are simply the <code>[]</code> so 50 characters of progress).  Each <code>=</code> represents 2% of the download.</p>
",Endophage,craymichael,1364323852,1523039325,1523039325
http://stackoverflow.com/a/15650556/1198772,Sorting a list of dictionaries based on the order of values of another list,1840,Fifteen,Blckknght,1364346856,1364427636,1364427636,https://stackoverflow.com/questions/15650348/sorting-a-list-of-dictionaries-based-on-the-order-of-values-of-another-list,"<p>The simplest way would be to use <code>list.index</code> to generate a sort value for your list of dictionaries:</p>

<pre><code>listTwo.sort(key=lambda x: listOne.index(x[""eyecolor""]))
</code></pre>

<p>This is a little bit inefficient though, since <code>list.index</code> does a linear search through the eye-color list. If you had many eye colors to check against, it would be slow. A somewhat better approach would build an index dictionary instead:</p>

<pre><code>order_dict = {color: index for index, color in enumerate(listOne)}
listTwo.sort(key=lambda x: order_dict[x[""eyecolor""]])
</code></pre>

<p>If you don't want to modify <code>listTwo</code>, you can use the built-in <code>sorted</code> function instead of the <code>list.sort</code> method. It returns a sorted copy of the list, rather than sorting in-place.</p>
",Blckknght,,1364348346,1364348346,0
https://stackoverflow.com/questions/156508/closing-a-java-fileinputstream/156525#156525,Closing a Java FileInputStream,48898,Matt H,Matt H,1222844442,1430231008,1430231008,,,,,,,
http://stackoverflow.com/a/15654598/4928558,How to load a resource bundle from a file resource in Java?,196572,user143794,Jared Harley,1248361639,1529975776,1358879426,https://stackoverflow.com/questions/1172424/how-to-load-a-resource-bundle-from-a-file-resource-in-java,"<p>As long as you name your resource bundle files correctly (with a .properties extension), then this works:</p>

<pre><code>File file = new File(""C:\\temp"");
URL[] urls = {file.toURI().toURL()};
ClassLoader loader = new URLClassLoader(urls);
ResourceBundle rb = ResourceBundle.getBundle(""myResource"", Locale.getDefault(), loader);
</code></pre>

<p>where ""c:\temp"" is the external folder (NOT on the classpath) holding the property files, and ""myResource"" relates to myResource.properties, myResource_fr_FR.properties, etc.</p>

<p>Credit to <a href=""http://www.coderanch.com/t/432762/java/java/absolute-path-bundle-file"">http://www.coderanch.com/t/432762/java/java/absolute-path-bundle-file</a></p>
",Forge_7,,1364373354,1364373354,0
http://stackoverflow.com/a/15664201/362780,Get insert_id for all rows inserted in single mysqli query (multiple values),1897,Joe Bergevin,,1364401217,1424982131,0,https://stackoverflow.com/questions/15663918/get-insert-id-for-all-rows-inserted-in-single-mysqli-query-multiple-values,"<p>It should be safe to assume that your ids are mysql_insert_id + the next 3 (whatever) in succession, as your statement is done in one transaction</p>
",Thomas Kjr Pedersen,,1364401943,1364401943,0
http://stackoverflow.com/a/15690816/2055594,Recursively looping through an object to build a property list,66411,Jake,,1364499649,1553088192,0,https://stackoverflow.com/questions/15690706/recursively-looping-through-an-object-to-build-a-property-list,"<p>I made a <a href=""http://jsfiddle.net/tbynA/1/"" rel=""noreferrer""><strong>FIDDLE</strong></a> for you. I am storing a <code>stack</code> string and then output it, if the property is of primitive type:</p>

<pre><code>function iterate(obj, stack) {
        for (var property in obj) {
            if (obj.hasOwnProperty(property)) {
                if (typeof obj[property] == ""object"") {
                    iterate(obj[property], stack + '.' + property);
                } else {
                    console.log(property + ""   "" + obj[property]);
                    $('#output').append($(""&lt;div/&gt;"").text(stack + '.' + property))
                }
            }
        }
    }

iterate(object, '')
</code></pre>

<hr>

<h1>UPDATE (24/07/2017) - do not use, it's bugged </h1>

<p>I have received a lot of upvotes for this question recently, so I've decided to refine the solution with some ES2015+ magic and more functional style.</p>

<p>It might be less readable, but I like how it looks :) You can still use a simpler solution from above - both of these should work exactly the same.</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""true"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const isObject = val =&gt;
  typeof val === 'object' &amp;&amp; !Array.isArray(val);

const paths = (obj = {}) =&gt;
  Object.entries(obj)
    .reduce(
      (product, [key, value]) =&gt;
        isObject(value) ?
        product.concat([
          [key, paths(value)] // adds [root, [children]] list
        ]) :
        product.concat([key]), // adds [child] list
      []
    )

const addDelimiter = (a, b) =&gt;
  a ? `${a}.${b}` : b;

const pathToString = ([root, children]) =&gt;
  children.map(
    child =&gt;
      Array.isArray(child) ?
      addDelimiter(root, pathToString(child)) :
      addDelimiter(root, child)
  )
  .join('\n');

const input = {
  aProperty: {
    aSetting1: 1,
    aSetting2: 2,
    aSetting3: 3,
    aSetting4: 4,
    aSetting5: 5
  },
  bProperty: {
    bSetting1: {
      bPropertySubSetting: true
    },
    bSetting2: ""bString""
  },
  cProperty: {
    cSetting: ""cString""
  }
};

// ^ implies a ""root"" level will be ["""", paths(input)]
// ideally paths() should return that structure, but I could not figure out how :)
// shows desired output format
console.log(pathToString(["""", paths(input)]));

// showcase the resulting data structure
// any object can be recursively represented as a list [objectPropertyName, [...nestedPropertyNames]]
// console.log(paths(input));</code></pre>
</div>
</div>
</p>
",Artyom Neustroev,Artyom Neustroev,1364500025,1546899988,1546899988
http://stackoverflow.com/a/15723105/315168,List all the modules that are part of a python package?,67410,static_rtti,CharlesB,1257857250,1393931687,1361805511,https://stackoverflow.com/questions/1707709/list-all-the-modules-that-are-part-of-a-python-package,"<p>This works for me:</p>

<pre><code>import types

for key, obj in nltk.__dict__.iteritems():
    if type(obj) is types.ModuleType: 
        print key
</code></pre>
",DarinP,ifischer,1364675070,1393931687,1393931687
http://stackoverflow.com/a/15733571/1060339,Python OrderedDict not keeping element order,22874,Ecolitan,Charles,1364757951,1530077345,1370882539,https://stackoverflow.com/questions/15733558/python-ordereddict-not-keeping-element-order,"<p>Your problem is that you are constructing a <code>dict</code> to give the initial data to the <code>OrderedDict</code> - this <code>dict</code> <em>doesn't</em> store any order, so the order is lost before it gets to the <code>OrderedDict</code>.</p>

<p>The solution is to build from an ordered data type - the easiest being a <code>list</code> of <code>tuple</code>s:</p>

<pre><code>&gt;&gt;&gt; from collections import OrderedDict
&gt;&gt;&gt; od = OrderedDict([((0, 0), [2]), ((0, 1), [1, 9]), ((0, 2), [1, 5, 9])])
&gt;&gt;&gt; od
OrderedDict([((0, 0), [2]), ((0, 1), [1, 9]), ((0, 2), [1, 5, 9])])
</code></pre>

<p>It's worth noting that this is why <code>OrderedDict</code> uses the syntax it does for it's string representation - string representations should try to be valid Python code to reproduce the object where possible, and that's why the output uses a list of tuples instead of a dict.</p>

<p>Edit: <a href=""https://docs.python.org/3/whatsnew/3.6.html#pep-468-preserving-keyword-argument-order"" rel=""noreferrer"">As of Python 3.6, <code>kwargs</code> is ordered</a>, so you can use keyword arguments instead, provided you are on an up-to-date Python version.</p>

<p><a href=""https://docs.python.org/3.7/whatsnew/3.7.html"" rel=""noreferrer"">As of 3.7</a>, this is also true for <code>dict</code>s (it was for CPython in 3.6, but the language spec didn't specify it, so using <code>OrderedDict</code> was still required for compatibility). This means if you can assume a 3.7+ environment, you can often drop <code>OrderedDict</code> altogether, or construct one from a regular <code>dict</code> if you need a specific feature (e.g: order to matter for equality).</p>
",Gareth Latty,Gareth Latty,1364758049,1530077345,1530077345
http://stackoverflow.com/a/15767111/768469,Assembly code/AVX instructions for multiplication of complex numbers. (GCC inline assembly),3932,Jean Nicolas,phuclv,1364913336,1429936379,1429936311,https://stackoverflow.com/questions/15766921/assembly-code-avx-instructions-for-multiplication-of-complex-numbers-gcc-inlin,"<p>As you surmise, the problem is that you havent told GCC which registers you are clobbering.  Im surprised if they dont yet support putting YMM registers in the clobber list; what version of GCC are you using?</p>

<p>In any event, it will almost certainly suffice to put the corresponding XMM registers in the clobber list instead:</p>

<pre><code>: ""=m"" (ret) : ""m"" (*a), ""m"" (*b) : ""%xmm1"", ""%xmm2"");
</code></pre>

<hr>

<p>Some other notes:</p>

<ul>
<li>Youre loading both inputs twice, which is inefficient.  Theres no reason to do that.</li>
<li>I would use <code>""r"" (a), ""r"" (b)</code> as constraints and write my loads like <code>vmovupd (%2), %%ymm1</code>.  Probably no difference in the generated code, but it seems more idiomatically correct.</li>
<li>Dont forget to put a <code>vzeroupper</code> following AVX code before any SSE code is executed to avoid (large) stalls.</li>
</ul>
",Stephen Canon,phuclv,1364913856,1429936379,1429936379
http://stackoverflow.com/a/15780326/1382740,How to spread django unit tests over multiple files?,29295,John Mee,,1307341995,1561765014,0,https://stackoverflow.com/questions/6248510/how-to-spread-django-unit-tests-over-multiple-files,"<p>The answer as stated by Tomasz is correct. However, it can become tedious to ensure that the imports in <code>__init__.py</code> match your file structure.  </p>

<p>To <strong>automatically detect all tests in the folder</strong> you can add this in <code>__init__.py</code>:</p>

<pre><code>import unittest

def suite():   
    return unittest.TestLoader().discover(""appname.tests"", pattern=""*.py"")
</code></pre>

<p>This will allow you to run <code>./manage.py test appname</code> but won't handle running specific tests. To do that you can use this code (also in <code>__init__.py</code>):</p>

<pre><code>import pkgutil
import unittest

for loader, module_name, is_pkg in pkgutil.walk_packages(__path__):
    module = loader.find_module(module_name).load_module(module_name)
    for name in dir(module):
        obj = getattr(module, name)
        if isinstance(obj, type) and issubclass(obj, unittest.case.TestCase):
            exec ('%s = obj' % obj.__name__)
</code></pre>

<p>Now you can run all your tests via <code>manage.py test app</code> or specific ones via <code>manage.py test app.TestApples</code></p>
",Bryce Drennan,Bryce Drennan,1364970495,1366401903,1366401903
http://stackoverflow.com/a/15805399/983070,back button in browser not working properly after using pushState (in Chrome),13659,Nick Ginanto,Mohsen Safari,1363201323,1535807591,1535807591,https://stackoverflow.com/questions/15394156/back-button-in-browser-not-working-properly-after-using-pushstate-in-chrome,"<p>It happened my with sinatra &amp; chrome. </p>

<p>Solved it with:</p>

<pre class=""lang-js prettyprint-override""><code>$.ajaxSetup({ cache: false });
</code></pre>
",trompa,Simon,1365061737,1372878603,1372878603
http://stackoverflow.com/a/15831608/3101412,Adding files to a Tar Archive in PHP with different filenames,181,user2248522,hakre,1365156244,1467987737,1365158459,https://stackoverflow.com/questions/15831121/adding-files-to-a-tar-archive-in-php-with-different-filenames,"<p><code>Archive_Tar</code> in its latest version does not yet support such a functionality out of the box. Part of the functionality is in <code>_addFile()</code> and the other part in <code>_addString()</code>.</p>

<p>Most easy is probably to extend from <code>Archive_Tar</code> and proxy all calls to <a href=""http://pear.php.net/package/Archive_Tar/docs/latest/__filesource/fsource_Archive_Tar__Archive_Tar-1.3.11ArchiveTar.php.html#a1182"" rel=""nofollow""><code>_writeHeaderBlock()</code></a> which is public, applying a map on the filename parameter so to rename it when written into headers.</p>

<pre><code>class Patched_Archive_Tar extends Archive_Tar
{
    var $renameMap = array();

    function _writeHeaderBlock($p_filename, $p_size, $p_mtime=0, $p_perms=0,
                               $p_type='', $p_uid=0, $p_gid=0)
    {
        return parent::_writeHeaderBlock($this-&gt;_translateFilename($p_filename), 
                                  $p_size, $p_mtime=0, $p_perms=0,
                                  $p_type='', $p_uid=0, $p_gid=0);
    }

    function _translateFilename($orignal)
    {
        $map = $this-&gt;renameMap;
        if (isset($map[$orignal])) {
            return $map[$orignal];
        }

        return $original;
    }
}
</code></pre>

<p>Usage:</p>

<pre><code>$obj = new Patched_Archive_Tar('dummy.tar'); // name of archive

$files = array('mystuff/ad.gif', 
               'mystuff/alcon.doc.t', 
               'mystuff/alcon.xls.t');   // files to store in archive

$obj-&gt;renameMap = array(
    'mystuff/alcon.doc.t' =&gt; 'mystuff/alcon.doc',
    'mystuff/alcon.xls.t' =&gt; 'mystuff/alcon.xls',
)  // files to rename

if ($obj-&gt;create($files)) {
    echo 'Created successfully!';
} else {
    echo 'Error in file creation';
}
</code></pre>

<p>This is quick and dirty but hopefully worky. For something better see the function I noticed at the beginning <code>_addFile()</code> and <code>_addString()</code>, you basically want another one that is able to add a file (as with <code>_addFile()</code>) by specifiying the filename (as with <code>_addString()</code>).</p>
",hakre,hakre,1365157829,1467987737,1467987737
http://stackoverflow.com/a/1583753/1025836,304: Not modified and front end caching,16978,jd.,Boaz,1255829883,1551195840,1370718182,https://stackoverflow.com/questions/1583740/304-not-modified-and-front-end-caching,"<p><code>HTTP_IF_MODIFIED_SINCE</code> is the right way to do it. If you aren't getting it, check that Apache has <a href=""http://httpd.apache.org/docs/1.3/mod/mod_expires.html"" rel=""noreferrer""><code>mod_expires</code></a> and <a href=""http://httpd.apache.org/docs/1.3/mod/mod_headers.html"" rel=""noreferrer""><code>mod_headers</code></a> enabled and working properly. Borrowed from <a href=""http://www.php.net/manual/en/function.header.php#85146"" rel=""noreferrer"">a comment on PHP.net</a>:</p>

<pre><code>$last_modified_time = filemtime($file); 
$etag = md5_file($file);
// always send headers
header(""Last-Modified: "".gmdate(""D, d M Y H:i:s"", $last_modified_time)."" GMT""); 
header(""Etag: $etag""); 
// exit if not modified
if (@strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) == $last_modified_time || 
    @trim($_SERVER['HTTP_IF_NONE_MATCH']) == $etag) { 
    header(""HTTP/1.1 304 Not Modified""); 
    exit; 
}

// output data
</code></pre>
",c_harm,Boaz,1255830380,1370718230,1370718230
http://stackoverflow.com/a/15851602/2066546,Send email to address alternate from &quot;To:&quot;,1096,hmind,JJD,1348031173,1384279700,1384279700,https://stackoverflow.com/questions/12488893/send-email-to-address-alternate-from-to,"<h2>Mail vs. Envelope</h2>

<p>In emails as in physical mails (paper sheet in paper envelope), the recipient on the envelope may differ from the recipient on the letter sheet itself. </p>

<p>As the mailman would only consider the envelope's recipient, so do mail servers. </p>

<p>That means, one actually can tell the smtp service to send and email to a recipient different than the one listed in the <code>To:</code> field of the emails header.</p>

<h3>Trying This Out Manually</h3>

<p>You can try this out, manually, for example, by using the <code>sendmail</code> command of postfix.</p>

<pre><code># bash
sendmail really_send_to_this_address@example.com &lt; mail.txt
</code></pre>

<p>where</p>

<pre><code># mail.txt
From: foo@example.com
To: this_will_be_seen_in_the_to_field_in_email_clients@example.com
Subject: Testmail

This is a test mail.
</code></pre>

<p>This will deliver the email to <code>really_send_to_this_address@example.com</code>, not to <code>this_will_be_seen_in_the_to_field_in_email_clients@example.com</code>, but the latter will be shown in the recipient field of the mail client. </p>

<h2>Specifying the Envelope_to Field in Rails</h2>

<p>The <code>ActionMailer::Base</code> internally uses the <a href=""https://github.com/mikel/mail"" rel=""noreferrer"">mail gem</a>. Currently, Apr 2013, there is a <a href=""https://github.com/mikel/mail/pull/477"" rel=""noreferrer"">pull request</a>, allowing to specify the <code>envelope_to</code> field on a message before delivery.</p>

<p>Until this is pulled, you can specify the fork in the <code>Gemfile</code>.</p>

<pre><code># Gemfile 
# ...
gem 'mail', git: 'git://github.com/jeremy/mail.git'
</code></pre>

<p>You need to run <code>bundle update mail</code> after that, and, depending on your current rails version, maybe also <code>bundle update rails</code> in order to resolve some dependency issues.</p>

<p>After that, you can set the envelope recipient of a mail message like this:</p>

<pre><code># rails
message # =&gt; &lt;Mail::Message ...&gt;
message.to = [ ""this_will_be_seen_in_the_to_field_in_email_clients@example.com"" ]
message.smtp_envelope_to = [ ""really_send_to_this_address@example.com"" ]
message.from = ...
message.subject = ...
message.body = ...
message.deliver
</code></pre>

<h2>Documentation</h2>

<ul>
<li><a href=""https://github.com/mikel/mail/pull/477"" rel=""noreferrer"">https://github.com/mikel/mail/pull/477</a></li>
<li><a href=""http://rubydoc.info/github/jeremy/mail/master/Mail/Message#smtp_envelope_to%3D-instance_method"" rel=""noreferrer"">http://rubydoc.info/github/jeremy/mail/master/Mail/Message#smtp_envelope_to%3D-instance_method</a></li>
<li><a href=""https://github.com/mikel/mail"" rel=""noreferrer"">https://github.com/mikel/mail</a></li>
</ul>
",fiedl,,1365255310,1365255310,0
http://stackoverflow.com/a/15856139/2506748,Twitter bootstrap multiple modal error,54164,maxisam,,1354294061,1516112904,0,https://stackoverflow.com/questions/13649459/twitter-bootstrap-multiple-modal-error,"<p>You can apply the first solution of maxisam answer, without modifying bootstrap files (if you can not, or don't want to).</p>

<p>Just write this line somewhere after bootstrap files have been included.</p>

<pre><code>$.fn.modal.Constructor.prototype.enforceFocus = function () {};
</code></pre>

<p><strong>Note:</strong> This has been tested with Bootstrap 2 only, not with Bootstrap 3.</p>
",Tony - Currentuser.io,Tony - Currentuser.io,1365283250,1384112358,1384112358
http://stackoverflow.com/a/15868720/1483360,Remove duplicate values from JS array,1181212,kramden88,John Slegers,1328885602,1554804872,1525171643,https://stackoverflow.com/questions/9229645/remove-duplicate-values-from-js-array,"<p>Got tired of seeing all bad examples with for-loops or jQuery. Javascript has the perfect tools for this nowadays: sort, map and reduce. </p>

<h2>Uniq reduce while keeping existing order</h2>

<pre><code>var names = [""Mike"",""Matt"",""Nancy"",""Adam"",""Jenny"",""Nancy"",""Carl""];

var uniq = names.reduce(function(a,b){
    if (a.indexOf(b) &lt; 0 ) a.push(b);
    return a;
  },[]);

console.log(uniq, names) // [ 'Mike', 'Matt', 'Nancy', 'Adam', 'Jenny', 'Carl' ]

// one liner
return names.reduce(function(a,b){if(a.indexOf(b)&lt;0)a.push(b);return a;},[]);
</code></pre>

<h2>Faster uniq with sorting</h2>

<p>There are probably faster ways but this one is pretty decent.</p>

<pre><code>var uniq = names.slice() // slice makes copy of array before sorting it
  .sort(function(a,b){
    return a &gt; b;
  })
  .reduce(function(a,b){
    if (a.slice(-1)[0] !== b) a.push(b); // slice(-1)[0] means last item in array without removing it (like .pop())
    return a;
  },[]); // this empty array becomes the starting value for a

// one liner
return names.slice().sort(function(a,b){return a &gt; b}).reduce(function(a,b){if (a.slice(-1)[0] !== b) a.push(b);return a;},[]);
</code></pre>

<h2>Update 2015: ES6 version:</h2>

<p>In ES6 you have Sets and Spread which makes it very easy and performant to remove all duplicates:</p>

<pre><code>var uniq = [ ...new Set(names) ]; // [ 'Mike', 'Matt', 'Nancy', 'Adam', 'Jenny', 'Carl' ]
</code></pre>

<h2>Sort based on occurrence:</h2>

<p>Someone asked about ordering the results based on how many unique names there are:</p>

<pre><code>var names = ['Mike', 'Matt', 'Nancy', 'Adam', 'Jenny', 'Nancy', 'Carl']

var uniq = names
  .map((name) =&gt; {
    return {count: 1, name: name}
  })
  .reduce((a, b) =&gt; {
    a[b.name] = (a[b.name] || 0) + b.count
    return a
  }, {})

var sorted = Object.keys(uniq).sort((a, b) =&gt; uniq[a] &lt; uniq[b])

console.log(sorted)
</code></pre>
",Christian Landgren,Christian Landgren,1365374528,1449094086,1449094086
http://stackoverflow.com/a/15912228/63991,Overriding return type in function template specialization,45761,M. Dudley,,1365539443,1390454565,0,https://stackoverflow.com/questions/15911890/overriding-return-type-in-function-template-specialization,"<p>Since the specialization has to agree with the base template on the return type, you can make it so by adding a ""return type trait"", a struct you can specialize and draw the true return type from:</p>

<pre><code>// in the normal case, just the identity
template&lt;class T&gt;
struct item_return{ typedef T type; };

template&lt;class T&gt;
typename item_return&lt;T&gt;::type item();

template&lt;&gt;
struct item_return&lt;float&gt;{ typedef int type; };
template&lt;&gt;
int item&lt;float&gt;();
</code></pre>

<p><a href=""https://ideone.com/NSGksm"" rel=""noreferrer"">Live example.</a></p>

<p>Note that you might want to stick to the following, so you only need to update the return-type in the <code>item_return</code> specialization.</p>

<pre><code>template&lt;&gt;
item_return&lt;float&gt;::type foo&lt;float&gt;(){ ... }
// note: No `typename` needed, because `float` is not a dependent type
</code></pre>
",Xeo,,1365540579,1365540579,0
http://stackoverflow.com/a/1597129/99089,Creating C macro with ## and __LINE__ (token concatenation with positioning macro),57507,DD.,animuson,1256069503,1489542212,1373092317,https://stackoverflow.com/questions/1597007/creating-c-macro-with-and-line-token-concatenation-with-positioning-macr,"<p>The problem is that when you have a macro replacement, the preprocessor will only expand the macros recursively if neither the stringizing operator <code>#</code> nor the token-pasting operator <code>##</code> are applied to it.  So, you have to use some extra layers of indirection, you can use the token-pasting operator with a recursively expanded argument:</p>

<pre><code>#define TOKENPASTE(x, y) x ## y
#define TOKENPASTE2(x, y) TOKENPASTE(x, y)
#define UNIQUE static void TOKENPASTE2(Unique_, __LINE__)(void) {}
</code></pre>

<p>Then, <code>__LINE__</code> gets expanded to the line number during the expansion of <code>UNIQUE</code> (since it's not involved with either <code>#</code> or <code>##</code>), and then the token pasting happens during the expansion of <code>TOKENPASTE</code>.</p>

<p>It should also be noted that there is also the <code>__COUNTER__</code> macro, which expands to a new integer each time it is evaluated, in case you need to have multiple instantiations of the <code>UNIQUE</code> macro on the same line. Note: <code>__COUNTER__</code> is supported by MS Visual Studio, GCC (since V4.3), and Clang, but is not standard C.</p>
",Adam Rosenfield,Warty,1256070806,1470848152,1470848152
http://stackoverflow.com/a/16056691/943814,How does python prevent a class from being subclassed?,1916,alexis,,1366191402,1370181304,0,https://stackoverflow.com/questions/16056574/how-does-python-prevent-a-class-from-being-subclassed,"<p>The <code>bool</code> type is defined in C, and its <code>tp_flags</code> slot deliberately does not include the <a href=""http://docs.python.org/2/c-api/typeobj.html#Py_TPFLAGS_BASETYPE"" rel=""noreferrer""><code>Py_TPFLAGS_BASETYPE</code> flag</a>.</p>

<p>C types need to mark themselves <em>explicitly</em> as subclassable.</p>

<p>To do this for custom Python classes, use a metaclass:</p>

<pre><code>class Final(type):
    def __new__(cls, name, bases, classdict):
        for b in bases:
            if isinstance(b, Final):
                raise TypeError(""type '{0}' is not an acceptable base type"".format(b.__name__))
        return type.__new__(cls, name, bases, dict(classdict))

class Foo:
    __metaclass__ = Final

class Bar(Foo):
    pass
</code></pre>

<p>gives:</p>

<pre><code>&gt;&gt;&gt; class Bar(Foo):
...     pass
... 
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""&lt;stdin&gt;"", line 5, in __new__
TypeError: type 'Foo' is not an acceptable base type
</code></pre>
",Martijn Pieters,alexis,1366191726,1370181304,1370181304
http://stackoverflow.com/a/16071616/3760486,Multiprocessing: How to use Pool.map on a function defined in a class?,87110,Mermoz,martineau,1279617932,1562727979,1462801073,https://stackoverflow.com/questions/3288595/multiprocessing-how-to-use-pool-map-on-a-function-defined-in-a-class,"<p>I could not use the codes posted so far because the codes using ""multiprocessing.Pool"" do not work with lambda expressions and the codes not using ""multiprocessing.Pool"" spawn as many processes as there are work items.</p>

<p>I adapted the code s.t. it spawns a predefined amount of workers and only iterates through the input list if there exists an idle worker. I also enabled the ""daemon"" mode for the workers s.t. ctrl-c works as expected.</p>

<pre><code>import multiprocessing


def fun(f, q_in, q_out):
    while True:
        i, x = q_in.get()
        if i is None:
            break
        q_out.put((i, f(x)))


def parmap(f, X, nprocs=multiprocessing.cpu_count()):
    q_in = multiprocessing.Queue(1)
    q_out = multiprocessing.Queue()

    proc = [multiprocessing.Process(target=fun, args=(f, q_in, q_out))
            for _ in range(nprocs)]
    for p in proc:
        p.daemon = True
        p.start()

    sent = [q_in.put((i, x)) for i, x in enumerate(X)]
    [q_in.put((None, None)) for _ in range(nprocs)]
    res = [q_out.get() for _ in range(len(sent))]

    [p.join() for p in proc]

    return [x for i, x in sorted(res)]


if __name__ == '__main__':
    print(parmap(lambda i: i * 2, [1, 2, 3, 4, 6, 7, 8]))
</code></pre>
",klaus se,klaus se,1366239107,1512256469,1512256469
http://stackoverflow.com/a/16076965/5678759,How to find out if you&#39;re using HTTPS without $_SERVER[&#39;HTTPS&#39;],226953,Tyler Carter,Quill,1248392569,1562104621,1428986768,https://stackoverflow.com/questions/1175096/how-to-find-out-if-youre-using-https-without-serverhttps,"<p>My solution (because the standard conditions [$_SERVER['HTTPS'] == 'on'] do not work on servers behind a load balancer) is:</p>

<pre><code>$isSecure = false;
if (isset($_SERVER['HTTPS']) &amp;&amp; $_SERVER['HTTPS'] == 'on') {
    $isSecure = true;
}
elseif (!empty($_SERVER['HTTP_X_FORWARDED_PROTO']) &amp;&amp; $_SERVER['HTTP_X_FORWARDED_PROTO'] == 'https' || !empty($_SERVER['HTTP_X_FORWARDED_SSL']) &amp;&amp; $_SERVER['HTTP_X_FORWARDED_SSL'] == 'on') {
    $isSecure = true;
}
$REQUEST_PROTOCOL = $isSecure ? 'https' : 'http';
</code></pre>

<p>HTTP_X_FORWARDED_PROTO: a <em>de facto</em> standard for identifying the originating protocol of an HTTP request, since a reverse proxy (load balancer) may communicate with a web server using HTTP even if the request to the reverse proxy is HTTPS
<a href=""http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Common_non-standard_request_headers"" rel=""noreferrer"">http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Common_non-standard_request_headers</a></p>
",temuraru,temuraru,1366270126,1366270514,1366270514
http://stackoverflow.com/a/16091319/24998,How to detect page zoom level in all modern browsers?,237034,understack,Community,1257927415,1561533564,1495535497,https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers,"<p>My coworker and I used the script from <a href=""https://github.com/tombigel/detect-zoom"" rel=""noreferrer"">https://github.com/tombigel/detect-zoom</a>.  In addition, we also dynamically created a svg element and check its currentScale property. It works great on Chrome and likely most browsers too. On FF the ""zoom text only"" feature has to be turned off though.  SVG is <a href=""http://caniuse.com/#feat=svg-img"" rel=""noreferrer"">supported</a> on most browsers.  At the time of this writing, tested on IE10, FF19 and Chrome28.</p>

<pre><code>var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
svg.setAttribute('version', '1.1');
document.body.appendChild(svg);
var z = svg.currentScale;
... more code ...
document.body.removeChild(svg);
</code></pre>
",Jay,,1366312650,1366312650,0
http://stackoverflow.com/a/16124677/395857,Heatmap in matplotlib with pcolor?,113264,Jason Sundram,MERose,1358479877,1474535449,1474501461,https://stackoverflow.com/questions/14391959/heatmap-in-matplotlib-with-pcolor,"<p>This is late, but here is my python implementation of the flowingdata NBA heatmap.</p>

<p><strong>updated:1/4/2014</strong>: thanks everyone</p>

<pre><code># -*- coding: utf-8 -*-
# &lt;nbformat&gt;3.0&lt;/nbformat&gt;

# ------------------------------------------------------------------------
# Filename   : heatmap.py
# Date       : 2013-04-19
# Updated    : 2014-01-04
# Author     : @LotzJoe &gt;&gt; Joe Lotz
# Description: My attempt at reproducing the FlowingData graphic in Python
# Source     : http://flowingdata.com/2010/01/21/how-to-make-a-heatmap-a-quick-and-easy-solution/
#
# Other Links:
#     http://stackoverflow.com/questions/14391959/heatmap-in-matplotlib-with-pcolor
#
# ------------------------------------------------------------------------

import matplotlib.pyplot as plt
import pandas as pd
from urllib2 import urlopen
import numpy as np
%pylab inline

page = urlopen(""http://datasets.flowingdata.com/ppg2008.csv"")
nba = pd.read_csv(page, index_col=0)

# Normalize data columns
nba_norm = (nba - nba.mean()) / (nba.max() - nba.min())

# Sort data according to Points, lowest to highest
# This was just a design choice made by Yau
# inplace=False (default) -&gt;thanks SO user d1337
nba_sort = nba_norm.sort('PTS', ascending=True)

nba_sort['PTS'].head(10)

# Plot it out
fig, ax = plt.subplots()
heatmap = ax.pcolor(nba_sort, cmap=plt.cm.Blues, alpha=0.8)

# Format
fig = plt.gcf()
fig.set_size_inches(8, 11)

# turn off the frame
ax.set_frame_on(False)

# put the major ticks at the middle of each cell
ax.set_yticks(np.arange(nba_sort.shape[0]) + 0.5, minor=False)
ax.set_xticks(np.arange(nba_sort.shape[1]) + 0.5, minor=False)

# want a more natural, table-like display
ax.invert_yaxis()
ax.xaxis.tick_top()

# Set the labels

# label source:https://en.wikipedia.org/wiki/Basketball_statistics
labels = [
    'Games', 'Minutes', 'Points', 'Field goals made', 'Field goal attempts', 'Field goal percentage', 'Free throws made', 'Free throws attempts', 'Free throws percentage',
    'Three-pointers made', 'Three-point attempt', 'Three-point percentage', 'Offensive rebounds', 'Defensive rebounds', 'Total rebounds', 'Assists', 'Steals', 'Blocks', 'Turnover', 'Personal foul']

# note I could have used nba_sort.columns but made ""labels"" instead
ax.set_xticklabels(labels, minor=False)
ax.set_yticklabels(nba_sort.index, minor=False)

# rotate the
plt.xticks(rotation=90)

ax.grid(False)

# Turn off all the ticks
ax = plt.gca()

for t in ax.xaxis.get_major_ticks():
    t.tick1On = False
    t.tick2On = False
for t in ax.yaxis.get_major_ticks():
    t.tick1On = False
    t.tick2On = False
</code></pre>

<p>The output looks like this:
<img src=""https://i.stack.imgur.com/7B4Dk.png"" alt=""flowingdata-like nba heatmap""></p>

<p>There's an ipython notebook with all this code <a href=""http://nbviewer.ipython.org/5427209"">here</a>. I've learned a lot from 'overflow so hopefully someone will find this useful.</p>
",joelotz,joelotz,1366488579,1388888133,1388888133
http://stackoverflow.com/a/16136789/1081396,Cross browser JavaScript (not jQuery...) scroll to top animation,146750,Heather Hins,,1326923184,1555334148,0,https://stackoverflow.com/questions/8917921/cross-browser-javascript-not-jquery-scroll-to-top-animation,"<p>I modified TimWolla's answer to use quadratic in-out easing ( a little smoother :). Here is an example in action: <a href=""http://jsfiddle.net/62MTU/15/"">on jsFiddle</a>. Easing functions are available here: <a href=""http://robertpenner.com/easing/"">Robert Penner's Easing functions</a></p>

<pre><code>document.getElementsByTagName('button')[0].onclick = function () {
    scrollTo(document.body, 0, 1250);   
}

function scrollTo(element, to, duration) {
    var start = element.scrollTop,
        change = to - start,
        increment = 20;

    var animateScroll = function(elapsedTime) {        
        elapsedTime += increment;
        var position = easeInOut(elapsedTime, start, change, duration);                        
        element.scrollTop = position; 
        if (elapsedTime &lt; duration) {
            setTimeout(function() {
                animateScroll(elapsedTime);
            }, increment);
        }
    };

    animateScroll(0);
}

function easeInOut(currentTime, start, change, duration) {
    currentTime /= duration / 2;
    if (currentTime &lt; 1) {
        return change / 2 * currentTime * currentTime + start;
    }
    currentTime -= 1;
    return -change / 2 * (currentTime * (currentTime - 2) - 1) + start;
}
</code></pre>
",akai,abroz,1366582673,1440107896,1440107896
http://stackoverflow.com/a/16200769/2257172,What is the best way to detect whether an application is launched by Webstart,3186,ddimitrov,Community,1224416854,1436430993,1495539978,https://stackoverflow.com/questions/216315/what-is-the-best-way-to-detect-whether-an-application-is-launched-by-webstart,"<p>When your code is launched via javaws, javaws.jar is loaded and the JNLP API classes that you don't want to depend on are available. Instead of testing for a system property that is not guaranteed to exist, you could instead see if a JNLP API class exists:</p>

<pre><code>private boolean isRunningJavaWebStart() {
    boolean hasJNLP = false;
    try {
      Class.forName(""javax.jnlp.ServiceManager"");
      hasJNLP = true;
    } catch (ClassNotFoundException ex) {
      hasJNLP = false;
    }
    return hasJNLP;
}
</code></pre>

<p>This also avoids needing to include javaws.jar on your class path when compiling.</p>

<p>Alternatively you could switch to compiling with javaws.jar and catching NoClassDefFoundError instead:</p>

<pre><code>private boolean isRunningJavaWebStart() {
    try {
        ServiceManager.getServiceNames();
        return ds != null;
    } catch (NoClassDefFoundError e) {
        return false;
    }
}
</code></pre>

<p>Using ServiceManager.lookup(String) and UnavailableServiceException is trouble because both are part of the JNLP API. The ServiceManager.getServiceNames() is not documented to throw. We are specifically calling this code to check for a NoClassDefFoundError.</p>
",jla,,1366832430,1366832430,0
http://stackoverflow.com/a/16221114/1001675,WordPress - Enqueue scripts for only if LT IE 9,22881,circlecube,Ahmad Awais,1342711653,1490550647,1474566747,https://stackoverflow.com/questions/11564142/wordpress-enqueue-scripts-for-only-if-lt-ie-9,"<p><strong>For WordPress 4.2+</strong></p>

<p>Use <a href=""https://developer.wordpress.org/reference/functions/wp_script_add_data/"" rel=""noreferrer""><code>wp_script_add_data</code></a> to wrap the script in a conditional comment:</p>

<pre><code>wp_enqueue_script( 'html5shiv', '//cdn.jsdelivr.net/html5shiv/3.7.2/html5shiv.js' );
wp_script_add_data( 'html5shiv', 'conditional', 'lt IE 9' );

wp_enqueue_script( 'respond', get_template_directory_uri() . '/js/respond.min.js' );
wp_script_add_data( 'respond', 'conditional', 'lt IE 9' );
</code></pre>

<p>Just make sure you register the script before invoking <code>wp_script_add_data</code> (registering is handled by <code>wp_enqueue_script</code> above), and that the first argument you pass to <code>wp_script_add_data</code> matches the first argument you passed when you registered the script.</p>

<hr>

<p><strong>For WordPress 4.1</strong></p>

<p>You can use the <a href=""https://developer.wordpress.org/reference/hooks/script_loader_tag/"" rel=""noreferrer""><code>script_loader_tag</code> filter</a> today to enqueue scripts wrapped in conditional comments. Heres an example implementation:</p>

<pre><code>wp_enqueue_script( 'html5shiv', '//cdn.jsdelivr.net/html5shiv/3.7.2/html5shiv.js', array(), '3.7.2', false );
add_filter( 'script_loader_tag', function( $tag, $handle ) {
    if ( $handle === 'html5shiv' ) {
        $tag = ""&lt;!--[if lt IE 9]&gt;$tag&lt;![endif]--&gt;"";
    }
    return $tag;
}, 10, 2 );
</code></pre>

<p>And if you want to include more than one script in the same way, you can use something like:</p>

<pre><code>// Conditional polyfills
$conditional_scripts = array(
    'html5shiv'           =&gt; '//cdn.jsdelivr.net/html5shiv/3.7.2/html5shiv.js',
    'html5shiv-printshiv' =&gt; '//cdn.jsdelivr.net/html5shiv/3.7.2/html5shiv-printshiv.js',
    'respond'             =&gt; '//cdn.jsdelivr.net/respond/1.4.2/respond.min.js'
);
foreach ( $conditional_scripts as $handle =&gt; $src ) {
    wp_enqueue_script( $handle, $src, array(), '', false );
}
add_filter( 'script_loader_tag', function( $tag, $handle ) use ( $conditional_scripts ) {
    if ( array_key_exists( $handle, $conditional_scripts ) ) {
        $tag = ""&lt;!--[if lt IE 9]&gt;$tag&lt;![endif]--&gt;"";
    }
    return $tag;
}, 10, 2 );
</code></pre>
",Andrew Patton,Andrew Patton,1366911113,1453664848,1453664848
http://stackoverflow.com/a/16229480/694494,How to perform union or intersection on an array of arrays with Underscore.js,13707,Nandeep Mali,Elias Zamaria,1366954928,1533698634,1533698634,https://stackoverflow.com/questions/16229479/how-to-perform-union-or-intersection-on-an-array-of-arrays-with-underscore-js,"<p>One can use <code>apply</code> to pass an arbitrary number of arguments to a method.</p>

<p>For union:</p>

<pre><code>// Outputs [1, 4, 5, 6, 2, 3, 7]
var selectedUnion = _.union.apply(_, selected);
</code></pre>

<p>For intersection:</p>

<pre><code>// Outputs [1]
var selectedIntersection = _.intersection.apply(_, selected);
</code></pre>
",Nandeep Mali,,1366954928,1366954928,0
http://stackoverflow.com/a/16239377/1794248,memory_get_peak_usage() with &quot;real usage&quot;,59619,thelolcat,Benjamin,1364826763,1555326104,1379606062,https://stackoverflow.com/questions/15745385/memory-get-peak-usage-with-real-usage,"<p>Ok, lets test this using a simple script:</p>

<pre><code>ini_set('memory_limit', '1M');
$x = '';
while(true) {
  echo ""not real: "".(memory_get_peak_usage(false)/1024/1024)."" MiB\n"";
  echo ""real: "".(memory_get_peak_usage(true)/1024/1024)."" MiB\n\n"";
  $x .= str_repeat(' ', 1024*25); //store 25kb more to string
}
</code></pre>

<p>Output:</p>

<pre><code>not real: 0.73469543457031 MiB
real: 0.75 MiB

not real: 0.75910949707031 MiB
real: 1 MiB

...

not real: 0.95442199707031 MiB
real: 1 MiB

not real: 0.97883605957031 MiB
real: 1 MiB

PHP Fatal error:  Allowed memory size of 1048576 bytes exhausted (tried to allocate 793601 bytes) in /home/niko/test.php on line 7
</code></pre>

<p>Seems like real usage is the memory allocated from the system - which seems to get allocated in larger buckets than currently needed by the script. (I guess for performance reasons). This is also the memory the php process uses.</p>

<p>The <code>$real_usage = false</code> usage is the memory usage you actually used in your script, not the actual amount of memory allocated by Zend's memory manager.</p>

<p>Read <a href=""https://stackoverflow.com/a/2290965/781662"">this question</a> for more information.</p>

<p>In short: to get how close are you to the memory limit, use <code>$real_usage = true</code></p>
",Niko Sams,Community,1366987987,1472651924,1495540958
http://stackoverflow.com/a/1624988/596939,Alternative way to split a list into groups of n,47402,Jed Smith,Jed Smith,1256564772,1375176374,1256574693,https://stackoverflow.com/questions/1624883/alternative-way-to-split-a-list-into-groups-of-n,"<p>How about:</p>

<pre><code>&gt;&gt;&gt; n = 2
&gt;&gt;&gt; l = [1,2,3,4,5,6,7,8,9]
&gt;&gt;&gt; [ l[i:i+n] for i in range(0, len(l), n) ]
[[1, 2], [3, 4], [5, 6], [7, 8], [9]]
</code></pre>
",Steg,,1256565762,1256565762,0
http://stackoverflow.com/a/1625013/221001,Alternative way to split a list into groups of n,47402,Jed Smith,Jed Smith,1256564772,1375176374,1256574693,https://stackoverflow.com/questions/1624883/alternative-way-to-split-a-list-into-groups-of-n,"<p>A <a href=""http://docs.python.org/3.1/library/itertools.html#recipes"" rel=""noreferrer"">Python recipe</a> (In Python 2.6, use <code>itertools.izip_longest</code>):</p>

<pre><code>def grouper(n, iterable, fillvalue=None):
    ""grouper(3, 'ABCDEFG', 'x') --&gt; ABC DEF Gxx""
    args = [iter(iterable)] * n
    return itertools.zip_longest(*args, fillvalue=fillvalue)
</code></pre>

<p>Example usage:</p>

<pre><code>&gt;&gt;&gt; list(grouper(3, range(9)))
[(0, 1, 2), (3, 4, 5), (6, 7, 8)]
&gt;&gt;&gt; list(grouper(3, range(10)))
[(0, 1, 2), (3, 4, 5), (6, 7, 8), (9, None, None)]
</code></pre>

<p>If you want the last group to be shorter than the others instead of padded with <code>fillvalue</code>, then you could e.g. change the code like this:</p>

<pre><code>&gt;&gt;&gt; def mygrouper(n, iterable):
...     args = [iter(iterable)] * n
...     return ([e for e in t if e != None] for t in itertools.zip_longest(*args))
... 
&gt;&gt;&gt; list(mygrouper(3, range(9)))
[[0, 1, 2], [3, 4, 5], [6, 7, 8]]
&gt;&gt;&gt; list(mygrouper(3, range(10)))
[[0, 1, 2], [3, 4, 5], [6, 7, 8], [9]]
</code></pre>
",Stephan202,Stephan202,1256566131,1256566931,1256566931
http://stackoverflow.com/a/16277865/763010,JQuery Mobile 1.3.1 &quot;$.mobile.loading&quot; not working,22131,pguimera,Gajotres,1367232543,1435761339,1435761339,https://stackoverflow.com/questions/16276753/jquery-mobile-1-3-1-mobile-loading-not-working,"<p>What jQuery Mobile documentation is lacking information regarding successful execution of:</p>

<pre><code>$.mobile.loading('show');
</code></pre>

<p>and </p>

<pre><code>$.mobile.loading('hide');
</code></pre>

<p>They will show <strong>ONLY</strong> during the <strong><code>pageshow</code></strong> event. In any other case you need to wrap them into the <strong><code>setinterval</code></strong>, like this:</p>

<p>In case you don't know anything about <strong><code>pageshow</code></strong> and rest of jQuery Mobile page events take a look at this <strong><a href=""http://www.gajotres.net/document-onpageinit-vs-document-ready/"" rel=""noreferrer"">ARTICLE</a></strong>, it is my personal blog. Or find it <strong><a href=""https://stackoverflow.com/a/14469041/1848600"">HERE</a></strong>.</p>

<p>First, you will not be able to show/hide <strong><code>AJAX</code></strong> loader without set interval. There's is only one situation where this is possible without and that is during the <strong><code>pageshow</code></strong> event. In any other case <strong><code>setinterval</code></strong> is needed to kick start the loader.</p>

<p>Here's a working example: <a href=""http://jsfiddle.net/Gajotres/Zr7Gf/"" rel=""noreferrer"">http://jsfiddle.net/Gajotres/Zr7Gf/</a></p>

<pre><code>    var interval = setInterval(function(){
        $.mobile.loading('show');
        clearInterval(interval);
    },1);    

    var interval = setInterval(function(){
        $.mobile.loading('hide');
        clearInterval(interval);
    },1);      
</code></pre>
",Gajotres,Community,1367235928,1372248699,1495542818
http://stackoverflow.com/a/16283349/4085004,Find centerpoint of polygon in JavaScript,12408,user1082754,,1367248738,1536247402,0,https://stackoverflow.com/questions/16282330/find-centerpoint-of-polygon-in-javascript,"<p>This should get the <a href=""http://en.wikipedia.org/wiki/Centroid"" rel=""noreferrer"">centroid</a> of the <a href=""http://en.wikipedia.org/wiki/Area"" rel=""noreferrer"">area</a> of any <a href=""https://en.wikipedia.org/wiki/Polygon"" rel=""noreferrer"">polygon</a></p>

<pre><code>/*jslint sub: true, maxerr: 50, indent: 4, browser: true */
/*global console */

(function () {
    ""use strict"";

    function Point(x, y) {
        this.x = x;
        this.y = y;
    }

    function Region(points) {
        this.points = points || [];
        this.length = points.length;
    }

    Region.prototype.area = function () {
        var area = 0,
            i,
            j,
            point1,
            point2;

        for (i = 0, j = this.length - 1; i &lt; this.length; j=i,i++) {
            point1 = this.points[i];
            point2 = this.points[j];
            area += point1.x * point2.y;
            area -= point1.y * point2.x;
        }
        area /= 2;

        return area;
    };

    Region.prototype.centroid = function () {
        var x = 0,
            y = 0,
            i,
            j,
            f,
            point1,
            point2;

        for (i = 0, j = this.length - 1; i &lt; this.length; j=i,i++) {
            point1 = this.points[i];
            point2 = this.points[j];
            f = point1.x * point2.y - point2.x * point1.y;
            x += (point1.x + point2.x) * f;
            y += (point1.y + point2.y) * f;
        }

        f = this.area() * 6;

        return new Point(x / f, y / f);
    };

    var polygon = [
            {""x"": -1.2, ""y"": 5.1},
            {""x"": -1.3, ""y"": 5.2},
            {""x"": -1.8, ""y"": 5.9},
            {""x"": -1.9, ""y"": 5.8}
        ],
        region = new Region(polygon);

    console.log(region.centroid());
}());
</code></pre>

<p>On <a href=""http://jsfiddle.net/Xotic750/KtzLq/"" rel=""noreferrer"">jsfiddle</a></p>
",Xotic750,jedierikb,1367251940,1455225015,1455225015
http://stackoverflow.com/a/1630350/654755,What is the pythonic way to detect the last element in a python &#39;for&#39; loop?,131689,e.tadeu,lesmana,1256644473,1549003592,1322500693,https://stackoverflow.com/questions/1630320/what-is-the-pythonic-way-to-detect-the-last-element-in-a-python-for-loop,"<p>Most of the times it is easier (and cheaper) to make the <em>first</em> iteration the special case instead of the last one:</p>

<pre><code>first = True
for data in data_list:
    if first:
        first = False
    else:
        between_items()

    item()
</code></pre>

<p>This will work for any iterable, even for those that have no <code>len()</code>:</p>

<pre><code>file = open('/path/to/file')
for line in file:
    process_line(line)

    # No way of telling if this is the last line!
</code></pre>

<p>Apart from that, I don't think there is a generally superior solution as it depends on what you are trying to do. For example, if you are building a string from a list, it's naturally better to use <code>str.join()</code> than using a <code>for</code> loop with special case.</p>

<hr>

<p>Using the same principle but more compact:</p>

<pre><code>for i, line in enumerate(data_list):
    if i &gt; 0:
        between_items()
    item()
</code></pre>

<p>Looks familiar, doesn't it? :)</p>

<hr>

<p>For @ofko, and others who really need to find out if the current value of an iterable without <code>len()</code> is the last one, you will need to look ahead:</p>

<pre><code>def lookahead(iterable):
    """"""Pass through all values from the given iterable, augmented by the
    information if there are more values to come after the current one
    (True), or if it is the last value (False).
    """"""
    # Get an iterator and pull the first value.
    it = iter(iterable)
    last = next(it)
    # Run the iterator to exhaustion (starting from the second value).
    for val in it:
        # Report the *previous* value (more to come).
        yield last, True
        last = val
    # Report the last value.
    yield last, False
</code></pre>

<p>Then you can use it like this:</p>

<pre><code>&gt;&gt;&gt; for i, has_more in lookahead(range(3)):
...     print(i, has_more)
0 True
1 True
2 False
</code></pre>
",Ferdinand Beyer,Ferdinand Beyer,1256644948,1449435606,1449435606
http://stackoverflow.com/a/16327037/125507,Factorial of a large number in python,13999,Juan Jos&#233; Castro,Rob,1367440323,1550396291,1367440421,https://stackoverflow.com/questions/16325988/factorial-of-a-large-number-in-python,"<p>Multiplying the numbers in sequence,</p>

<pre><code>for i in range(1, n + 1):
    r *= i
return r
</code></pre>

<p>creates a large number (as in tens of thousands of bits) very quickly, and then you have a lot of multiplications of one huge number and one small number. Multiplications where at least one of the factors is huge are slow.</p>

<p>You can speed it up considerably by reducing the number of multiplications involving huge numbers, for example</p>

<pre><code>def range_prod(lo,hi):
    if lo+1 &lt; hi:
        mid = (hi+lo)//2
        return range_prod(lo,mid) * range_prod(mid+1,hi)
    if lo == hi:
        return lo
    return lo*hi

def treefactorial(n):
    if n &lt; 2:
        return 1
    return range_prod(1,n)
</code></pre>

<p>produces, timing the computation of <code>100000! % 100019</code> (I first tried <code>len(str(fun(100000))</code>, but the conversion to string is abominably slow, so that made the difference seem smaller than it is):</p>

<pre><code>$ python factorial.py 
81430
math.factorial took 4.06193709373 seconds
81430
factorial took 3.84716391563 seconds
81430
treefactorial took 0.344486951828 seconds
</code></pre>

<p>so a more than 10 speedup for <code>100000!</code>.</p>
",Daniel Fischer,,1367444673,1367444673,0
http://stackoverflow.com/a/16328399/122353,Are HTTP cookies port specific?,88710,guerda,Matthew Murdoch,1256287986,1432567369,1256288120,https://stackoverflow.com/questions/1612177/are-http-cookies-port-specific,"<p>The current cookie specification is <a href=""http://tools.ietf.org/html/rfc6265"" rel=""noreferrer"">RFC 6265</a>, which replaces <a href=""http://tools.ietf.org/html/rfc2109"" rel=""noreferrer"">RFC 2109</a> and <a href=""http://tools.ietf.org/html/rfc2965"" rel=""noreferrer"">RFC 2965</a> (both RFCs are now marked as ""Historic"") and formalizes the syntax for real-world usages of cookies.  It clearly states:</p>

<blockquote>
  <ol>
  <li>Introduction</li>
  </ol>
  
  <p>...</p>
  
  <p>For historical reasons, cookies contain a number of security and privacy infelicities.  For example, a server can indicate that a given cookie is intended for ""secure"" connections, but the Secure attribute does not provide integrity in the presence of an active network attacker.  <strong>Similarly, cookies for a given host are shared across all the ports on that host, even though the usual ""same-origin policy"" used by web browsers isolates content retrieved via different ports.</strong></p>
</blockquote>

<p>And also:</p>

<blockquote>
  <p>8.5.  Weak Confidentiality</p>
  
  <p><strong>Cookies do not provide isolation by port</strong>.  If a cookie is readable by a service running on one port, the cookie is also readable by a service running on another port of the same server.  If a cookie is writable by a service on one port, the cookie is also writable by a service running on another port of the same server.  For this reason, servers SHOULD NOT both run mutually distrusting services on different ports of the same host and use cookies to store security sensitive information.</p>
</blockquote>
",Remy Lebeau,Remy Lebeau,1367453374,1367454244,1367454244
http://stackoverflow.com/a/16331286/1162884,"Python looping combinations of 8 objects into 3 groups, 3-3-2",736,user2341726,jamylak,1367470945,1367479778,1367476033,https://stackoverflow.com/questions/16330649/python-looping-combinations-of-8-objects-into-3-groups-3-3-2,"<pre><code>def F(seq, parts, indexes=None, res=[], cur=0):
    if indexes is None: # indexes to use for combinations
        indexes = range(len(seq))

    if cur &gt;= len(parts): # base case
        yield [[seq[i] for i in g] for g in res]
        return    

    for x in combinations(indexes, r=parts[cur]):
        set_x = set(x)
        new_indexes = [i for i in indexes if i not in set_x]
        for comb in F(seq, parts, new_indexes, res=res + [x], cur=cur + 1):
            yield comb

it = F('12345678', parts=(2,3,3))
for i in range(10):
    print [''.join(g) for g in next(it)]
</code></pre>

<hr>

<pre><code>['12', '345', '678']
['12', '346', '578']
['12', '347', '568']
['12', '348', '567']
['12', '356', '478']
['12', '357', '468']
['12', '358', '467']
['12', '367', '458']
['12', '368', '457']
['12', '378', '456']
</code></pre>

<hr>

<p>Another example:</p>

<pre><code>for c in F('1234', parts=(2,2)):
    print [''.join(g) for g in c]
</code></pre>

<hr>

<pre><code>['12', '34']
['13', '24']
['14', '23']
['23', '14']
['24', '13']
['34', '12']
</code></pre>
",jamylak,jamylak,1367474321,1367475668,1367475668
http://stackoverflow.com/a/16333149/3233827,Spring MVC @PathVariable with dot (.) is getting truncated,134245,Kanagavelu Sugumar,Prags,1367477698,1540555343,1521916263,https://stackoverflow.com/questions/16332092/spring-mvc-pathvariable-with-dot-is-getting-truncated,"<p>As far as i know this issue appears only for the pathvariable at the end of the requestmapping. </p>

<p>We were able to solve that by defining the regex addon in the requestmapping.</p>

<pre><code> /somepath/{variable:.+}
</code></pre>
",Martin Frey,,1367481869,1367481869,0
http://stackoverflow.com/a/16344621/402133,Compute elapsed time,123809,George2,Ricardo Zea,1249014787,1520855204,1445832380,https://stackoverflow.com/questions/1210701/compute-elapsed-time,"<p>This is what I am using:</p>

<p>Milliseconds to a pretty format time string:</p>

<pre><code>function ms2Time(ms) {
    var secs = ms / 1000;
    ms = Math.floor(ms % 1000);
    var minutes = secs / 60;
    secs = Math.floor(secs % 60);
    var hours = minutes / 60;
    minutes = Math.floor(minutes % 60);
    hours = Math.floor(hours % 24);
    return hours + "":"" + minutes + "":"" + secs + ""."" + ms;  
}
</code></pre>
",Dr.YSG,,1367517397,1367517397,0
http://stackoverflow.com/a/16395220/151312,ExpressJS &amp; Websocket &amp; session sharing,19222,skorczan,skorczan,1346258464,1509718522,1346258780,https://stackoverflow.com/questions/12182651/expressjs-websocket-session-sharing,"<p>I was able to get this working.  I think you need to specify the secret on cookieParser instead of session store.</p>

<p>Example from my app:</p>

<pre><code>var app = express();
var RedisStore = require('connect-redis')(express);
var sessionStore = new RedisStore();
var cookieParser = express.cookieParser('some secret');

app.use(cookieParser);
app.use(express.session({store: sessionStore}));


wss.on('connection', function(rawSocket) {

  cookieParser(rawSocket.upgradeReq, null, function(err) {
    var sessionID = rawSocket.upgradeReq.signedCookies['connect.sid'];
    sessionStore.get(sessionID, function(err, sess) {
      console.log(sess);
    });
  });

});
</code></pre>
",StereoSteve,,1367830531,1367830531,0
http://stackoverflow.com/a/1640399/391161,Need a fast random generator for c++,52224,Martin Andersson,Martin Andersson,1256765614,1552700537,1256766225,https://stackoverflow.com/questions/1640258/need-a-fast-random-generator-for-c,"<p>The other thread mentioned Marsaglia's xorshf generator, but no one posted the code.</p>

<pre><code>static unsigned long x=123456789, y=362436069, z=521288629;

unsigned long xorshf96(void) {          //period 2^96-1
unsigned long t;
    x ^= x &lt;&lt; 16;
    x ^= x &gt;&gt; 5;
    x ^= x &lt;&lt; 1;

   t = x;
   x = y;
   y = z;
   z = t ^ x ^ y;

  return z;
}
</code></pre>

<p>I've used this one all over the place.  The only place it failed was when I was trying to produce random binary matrices.  Past about 95x95 matrices, it starts generating too few or too many singular matrices (I forget which).  It's been shown that this generator is equivalent to a linear shift feedback register.  But unless you are doing cryptography or serious monte carlo work, this generator rocks.</p>
",AndyV,Michael Myers,1256767100,1256767708,1256767708
http://stackoverflow.com/a/164258/403310,Why do I get a segmentation fault when writing to a string initialized with &quot;char *s&quot; but not &quot;char s[]&quot;?,66903,Markus,Antti Haapala,1222976721,1549289377,1539597175,https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string-initialized-with-cha,"<p>See the C FAQ, <a href=""http://c-faq.com/decl/strlitinit.html"" rel=""noreferrer"">Question 1.32</a></p>

<blockquote>
  <p><strong>Q</strong>: What is the difference between these initializations?<br>
  <code>char a[] = ""string literal"";</code><br>
  <code>char *p  = ""string literal"";</code><br>
  My program crashes if I try to assign a new value to <code>p[i]</code>.</p>
  
  <p><strong>A</strong>: A string literal (the formal term
  for a double-quoted string in C
  source) can be used in two slightly
  different ways:</p>
  
  <ol>
  <li>As the initializer for an array of char, as in the declaration of <code>char a[]</code> , it specifies the initial values
  of the characters in that array (and,
  if necessary, its size).</li>
  <li>Anywhere else, it turns into an unnamed, static array of characters,
  and this unnamed array may be stored
  in read-only memory, and which
  therefore cannot necessarily be
  modified. In an expression context,
  the array is converted at once to a
  pointer, as usual (see section 6), so
  the second declaration initializes p
  to point to the unnamed array's first
  element. </li>
  </ol>
  
  <p>Some compilers have a switch
  controlling whether string literals
  are writable or not (for compiling old
  code), and some may have options to
  cause string literals to be formally
  treated as arrays of const char (for
  better error catching).</p>
</blockquote>
",matli,herohuyongtao,1222977244,1394870532,1394870532
http://stackoverflow.com/a/16459606/376773,How to detect chrome and safari browser (webkit),112832,Rouge,,1348763010,1554582358,0,https://stackoverflow.com/questions/12625876/how-to-detect-chrome-and-safari-browser-webkit,"<p>Most of the answers here are obsolete, there is no more <code>jQuery.browser</code>, and why would anyone even use jQuery or would sniff the <code>User Agent</code> is beyond me.</p>

<p><strong>Instead of detecting a browser, you should rather detect a feature</strong> (whether it's supported or not).<br>
The following is <code>false</code> in Mozilla Firefox, Microsoft Edge; it is <code>true</code> in Google Chrome.</p>

<pre><code>""webkitLineBreak"" in document.documentElement.style
</code></pre>

<p><strong>Note this is not future-proof.</strong> A browser could implement the <code>-webkit-line-break</code> property at any time in the future, thus resulting in false detection.
Then you can just look at the document object in Chrome and pick anything with <code>webkit</code> prefix and check for that to be missing in other browsers.</p>
",vsync,Francesco Menzani,1368095249,1540736512,1540736512
http://stackoverflow.com/a/16468264/328272,CKEditor unwanted &amp;nbsp; characters,48451,user969724,Vito Gentile,1331917989,1526082297,1402586933,https://stackoverflow.com/questions/9741620/ckeditor-unwanted-nbsp-characters,"<p>There is another way that a non breaking space character can occur. By simply entering a space at the end of a sentence.</p>

<p>CKEditor escapes basic HTML entities along with latin and greek entities.</p>

<p>Add these config options to prevent this (you can also add them in your config file):</p>

<pre><code>CKEDITOR.on( 'instanceCreated', function( event ) {
 editor.on( 'configLoaded', function() {

  editor.config.basicEntities = false;
  editor.config.entities_greek = false; 
  editor.config.entities_latin = false; 
  editor.config.entities_additional = '';

 });
});
</code></pre>

<p>These options will prevent CKEditor from escaping <code>nbsp gt lt amp ' ""</code> an other latin and greek characters.</p>

<p>Sources:
<a href=""http://docs.ckeditor.com/#!/api/CKEDITOR.config"" rel=""noreferrer"">http://docs.ckeditor.com/#!/api/CKEDITOR.config</a>
<a href=""http://docs.ckeditor.com/source/plugin48.html#CKEDITOR-config-cfg-basicEntities"" rel=""noreferrer"">http://docs.ckeditor.com/source/plugin48.html#CKEDITOR-config-cfg-basicEntities</a></p>
",gabriel,,1368123040,1368123040,0
http://stackoverflow.com/a/1646913/126995,Quick and Simple Hash Code Combinations,27990,RobV,Henk Holterman,1256853201,1555657837,1256856883,https://stackoverflow.com/questions/1646807/quick-and-simple-hash-code-combinations,"<p>I would personally avoid XOR - it means that any two equal values will result in 0 - so hash(1, 1) == hash(2, 2) == hash(3, 3) etc. Also hash(5, 0) == hash(0, 5) etc which may come up occasionally. I <em>have</em> deliberately used it for set hashing - if you want to hash a sequence of items and you <em>don't</em> care about the ordering, it's nice.</p>

<p>I usually use:</p>

<pre><code>unchecked
{
    int hash = 17;
    hash = hash * 31 + firstField.GetHashCode();
    hash = hash * 31 + secondField.GetHashCode();
    return hash;
}
</code></pre>

<p>That's the form that Josh Bloch suggests in Effective Java. Last time I answered a similar question I managed to find an article where this was discussed in detail - IIRC, no-one really knows why it works well, but it does. It's also easy to remember, easy to implement, and easy to extend to any number of fields.</p>
",Jon Skeet,Jon Skeet,1256854264,1348206298,1348206298
http://stackoverflow.com/a/16479685/161257,How do I call a method of a Java instance from JavaScript?,8529,Aaron Digulla,,1281370099,1456235697,0,https://stackoverflow.com/questions/3441947/how-do-i-call-a-method-of-a-java-instance-from-javascript,"<p>When a java method (whether static or non-static) is to be made available as a global function within a scope we use the following logic:</p>

<pre><code>FunctionObject javascriptFunction = new FunctionObject(/* String*/ javascriptFunctionName, /* Method */ javaMethod, /*Scriptable */ parentScope);
boundScope.put(javascriptFunctionName, boundScope, javascriptFunction);
</code></pre>

<p>Here the <code>boundScope</code> should always be the scope in which the function is to be made available.</p>

<p>However the value of the parent scope depends on whether we are binding an instance method or static method. In case of a static method, it can be any scope that makes sense. It can even be the same as the <code>boundScope</code>.</p>

<p>But in case of instance method, the <code>parentScope</code> should be the instance whose method is being bound.</p>

<p>The above was just background info. Now I will explain what the issue is and give a natural solution for it i.e. one that allows invoking the instance method directly as a global function rather than explicitly creating an instance of the object and then invoking the method using that instance.</p>

<p>When a function is called, Rhino invokes the <code>FunctionObject.call()</code> method that is passed a reference to <code>this</code>. In case the function is a global function, it is called without a reference to <code>this</code> (i.e. <code>xxx()</code> instead of <code>this.xxx()</code>), the value of the <code>this</code> variable that gets passed to the <code>FunctionObject.call()</code> method is the scope in which the call was made (i.e. in this case the value of the <code>this</code> parameter will be same as the value of the <code>scope</code> parameter). </p>

<p>This becomes a problem in case the java method being invoked is an instance method because as per the JavaDocs of constructor of <code>FunctionObject</code> class:</p>

<p>If the method is not static, the Java <code>this</code> value will correspond to the JavaScript <code>this</code> value. Any attempt to call the function with a <code>this</code> value that is not of the right Java type will result in an error.</p>

<p>And in the scenario described above that is exactly the case. The javascript <code>this</code> value does NOT correspond to the java <code>this</code> value and results in an incompatible object error.</p>

<p>The solution is to subclass <code>FunctionObject</code>, override the <code>call()</code> method, forcefully 'fix' the <code>this</code> reference, and then let the call proceed normally.</p>

<p>So something like:</p>

<pre><code>FunctionObject javascriptFunction = new MyFunctionObject(javascriptFunctionName, javaMethod, parentScope);
boundScope.put(javascriptFunctionName, boundScope, javascriptFunction);


private static class MyFunctionObject extends FunctionObject {

    private MyFunctionObject(String name, Member methodOrConstructor, Scriptable parentScope) {
      super(name, methodOrConstructor, parentScope);
    }

    @Override
    public Object call(Context cx, Scriptable scope, Scriptable thisObj, Object[] args) {
      return super.call(cx, scope, getParentScope(), args);
    }
  }
</code></pre>

<p>I think it would be best understood with a self-contained/complete example pasted below. In this example, we are exposing the instance method: myJavaInstanceMethod(Double number) as a global function within a javascript scope ('scriptExecutionScope'). So in this case the value of the 'parentScope' parameter must be an instance of the class that contains this method (i.e. MyScriptable).</p>

<pre><code>package test;

import org.mozilla.javascript.*;

import java.lang.reflect.Member;
import java.lang.reflect.Method;

//-- This is the class whose instance method will be made available in a JavaScript scope as a global function.
//-- It extends from ScriptableObject because instance methods of only scriptable objects can be directly exposed
//-- in a js scope as a global function.
public class MyScriptable extends ScriptableObject {

  public static void main(String args[]) throws Exception {

    Context.enter();
    try {
      //-- Create a top-level scope in which we will execute a simple test script to test if things are working or not.
      Scriptable scriptExecutionScope = new ImporterTopLevel(Context.getCurrentContext());
      //-- Create an instance of the class whose instance method is to be made available in javascript as a global function.
      Scriptable myScriptable = new MyScriptable();
      //-- This is not strictly required but it is a good practice to set the parent of all scriptable objects
      //-- except in case of a top-level scriptable.
      myScriptable.setParentScope(scriptExecutionScope);

      //-- Get a reference to the instance method this is to be made available in javascript as a global function.
      Method scriptableInstanceMethod = MyScriptable.class.getMethod(""myJavaInstanceMethod"", new Class[]{Double.class});
      //-- Choose a name to be used for invoking the above instance method from within javascript.
      String javascriptFunctionName = ""myJavascriptGlobalFunction"";
      //-- Create the FunctionObject that binds the above function name to the instance method.
      FunctionObject scriptableInstanceMethodBoundJavascriptFunction = new MyFunctionObject(javascriptFunctionName,
              scriptableInstanceMethod, myScriptable);
      //-- Make it accessible within the scriptExecutionScope.
      scriptExecutionScope.put(javascriptFunctionName, scriptExecutionScope,
              scriptableInstanceMethodBoundJavascriptFunction);

      //-- Define a simple test script to test if things are working or not.
      String testScript = ""function simpleJavascriptFunction() {"" +
              ""  try {"" +
              ""    result = myJavascriptGlobalFunction(12.34);"" +
              ""    java.lang.System.out.println(result);"" +
              ""  }"" +
              ""  catch(e) {"" +
              ""    throw e;"" +
              ""  }"" +
              ""}"" +
              ""simpleJavascriptFunction();"";

      //-- Compile the test script.
      Script compiledScript = Context.getCurrentContext().compileString(testScript, ""My Test Script"", 1, null);
      //-- Execute the test script.
      compiledScript.exec(Context.getCurrentContext(), scriptExecutionScope);
    } catch (Exception e) {
      throw e;
    } finally {
      Context.exit();
    }
  }

  public Double myJavaInstanceMethod(Double number) {
    return number * 2.0d;
  }

  @Override
  public String getClassName() {
    return getClass().getName();
  }

  private static class MyFunctionObject extends FunctionObject {

    private MyFunctionObject(String name, Member methodOrConstructor, Scriptable parentScope) {
      super(name, methodOrConstructor, parentScope);
    }

    @Override
    public Object call(Context cx, Scriptable scope, Scriptable thisObj, Object[] args) {
      return super.call(cx, scope, getParentScope(), args);
//      return super.call(cx, scope, thisObj, args);
    }
  }
}
</code></pre>

<p>If you want to see the behavior WITH the fix then uncomment line 78 and comment line 79:</p>

<pre><code>return super.call(cx, scope, getParentScope(), args);
//return super.call(cx, scope, thisObj, args);
</code></pre>

<p>If you want to see the behavior WITHOUT the fix then comment line 78 and uncomment line 79:</p>

<pre><code>//return super.call(cx, scope, getParentScope(), args);
return super.call(cx, scope, thisObj, args);
</code></pre>

<p>Hope this helps.</p>
",Jawad,Jawad,1368179972,1368537902,1368537902
http://stackoverflow.com/a/16491074/1208233,How to validate a domain name using Regex &amp; Php?,29484,Ryan,Onur Yldrm,1276300854,1499715452,1368221530,https://stackoverflow.com/questions/3026957/how-to-validate-a-domain-name-using-regex-php,"<p>The selected answer is incomplete/wrong.</p>

<p>The regex pattern;  </p>

<ul>
<li><p><strong>should NOT</strong> validate domains such as:<br>
<code>-domain.com</code>, <code>domain--.com</code>, <code>-domain-.-.com</code>, <code>domain.000</code>, etc...   </p></li>
<li><p><strong>should</strong> validate domains such as:<br>
<code>schools.k12</code>, <code>newTLD.clothing</code>, <code>good.photography</code>, etc...</p></li>
</ul>

<p>After some further research; below is the most correct, cross-language and compact pattern I could come up with:  </p>

<pre class=""lang-js prettyprint-override""><code>^(?!\-)(?:[a-zA-Z\d\-]{0,62}[a-zA-Z\d]\.){1,126}(?!\d+)[a-zA-Z\d]{1,63}$
</code></pre>

<p>This pattern conforms with most* of the rules defined in the specs:  </p>

<ul>
<li>Each label/level (splitted by a dot) may contain up to <strong>63 characters</strong>.</li>
<li>The full domain name may have up to <strong>127 levels</strong>.</li>
<li>The full domain name may not exceed the length of <strong>253 characters</strong> in its textual representation.</li>
<li>Each label can consist of <strong>letters, digits and hyphens</strong>.</li>
<li>Labels cannot <strong>start</strong> or <strong>end</strong> with a hyphen.</li>
<li>The top-level domain (extension) cannot be <strong>all-numeric</strong>.</li>
</ul>

<p><strong><em>Note 1</strong>: The full domain length check is not included in the regex. It should be simply checked by native methods e.g. <code>strlen(domain) &lt;= 253</code>.</em><br>
<strong><em>Note 2</strong>: This pattern works with most languages including PHP, Javascript, Python, etc...</em>  </p>

<p>See <a href=""https://regex101.com/r/ZIMkXh/1"" rel=""noreferrer""><strong>DEMO here</strong></a> (for JS, PHP, Python)</p>

<h3>More Info:</h3>

<ul>
<li><p>The regex above does not support <a href=""http://en.wikipedia.org/wiki/Internationalized_domain_name"" rel=""noreferrer"">IDN</a>s.</p></li>
<li><p>There is no spec that says the extension (TLD) should be between 2 and 6 characters. It actually supports 63 characters. See the current <a href=""http://data.iana.org/TLD/tlds-alpha-by-domain.txt"" rel=""noreferrer""><strong>TLD list</strong> here</a>. Also, some networks do internally use custom/pseudo TLDs.  </p></li>
<li><p>Registration authorities might impose some extra, <a href=""https://www.register.com/policy/domain-extension-rules.rcmx"" rel=""noreferrer"">specific rules</a> which are not explicitly supported in this regex. For example, <code>.CO.UK</code> and <code>.ORG.UK</code> must have at least 3 characters, but less than 23, not including the extension. These kinds of rules are non-standard and subject to change. Do not implement them if you cannot maintain.</p></li>
<li><p>Regular Expressions are great but not the best effective, performant solution to every problem. So a native URL parser should be used instead, whenever possible. e.g. Python's <a href=""https://docs.python.org/2/library/urlparse.html"" rel=""noreferrer""><code>urlparse()</code></a> method or PHP's <a href=""http://php.net/manual/en/function.parse-url.php"" rel=""noreferrer""><code>parse_url()</code></a> method...</p></li>
<li><p>After all, this is just a format validation. A regex test does not confirm that a domain name is actually configured/exists! You should test the existence by making a request.</p></li>
</ul>

<h3>Specs &amp; References:</h3>

<ul>
<li><a href=""http://tools.ietf.org/html/rfc1035"" rel=""noreferrer"">IETF: RFC1035</a></li>
<li><a href=""http://tools.ietf.org/html/rfc1123#section-2.1"" rel=""noreferrer"">IETF: RFC1123</a></li>
<li><a href=""http://tools.ietf.org/html/rfc2181#page-13"" rel=""noreferrer"">IETF: RFC2181</a></li>
<li><a href=""http://tools.ietf.org/html/rfc952"" rel=""noreferrer"">IETF: RFC952</a></li>
<li><a href=""http://en.wikipedia.org/wiki/Domain_Name_System#cite_ref-rfc1034_1-2"" rel=""noreferrer"">Wikipedia: Domain Name System</a></li>
</ul>
",Onur Yldrm,Federico Biccheddu,1368221261,1499715452,1499715452
http://stackoverflow.com/a/16496730/1688568,Can php detect 4-byte encoded utf8 chars?,8492,Abby Chau Yu Hoi,,1368271365,1518183544,0,https://stackoverflow.com/questions/16496554/can-php-detect-4-byte-encoded-utf8-chars,"<p>This should work:</p>

<pre><code>if (max(array_map('ord', str_split($string))) &gt;= 240) 
</code></pre>

<p>The rational being that code points up to and including U+FFFF are encoded as three bytes of the form <code>1110xxxx 10xxxxxx 10xxxxxx</code>. Higher code points are of the form <code>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</code>, i.e. the highest byte has a value of 240 or higher. If there are any such bytes in the string, it's an indicator for a 4-byte sequence.</p>

<p>If you want to <em>remove</em> long characters, this will do:</p>

<pre><code>preg_replace_callback('/./u', function (array $match) {
    return strlen($match[0]) &gt;= 4 ? null : $match[0];
}, $string)
</code></pre>

<p>Though there may be a more elegant regex way to express high codepoints directly.</p>
",deceze,Community,1368272739,1412775844,1412775844
http://stackoverflow.com/a/16551670/1084488,Android EditText delete(backspace) key event,108059,Buda Gavril,Brian Tompsett - ,1296740712,1525690596,1437397586,https://stackoverflow.com/questions/4886858/android-edittext-deletebackspace-key-event,"<p>This is just an addition to Idris's answer, adding in the override to deleteSurroundingText as well. I found more info on that here: <a href=""https://stackoverflow.com/questions/14560344/android-backspace-in-webview-baseinputconnection"">Android: Backspace in WebView/BaseInputConnection</a></p>

<pre><code>package com.elavon.virtualmerchantmobile.utils;

import java.util.Random;

import android.content.Context;
import android.graphics.Color;
import android.util.AttributeSet;
import android.view.KeyEvent;
import android.view.inputmethod.EditorInfo;
import android.view.inputmethod.InputConnection;
import android.view.inputmethod.InputConnectionWrapper;
import android.widget.EditText;

public class ZanyEditText extends EditText {

    private Random r = new Random();

    public ZanyEditText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ZanyEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ZanyEditText(Context context) {
        super(context);
    }

    public void setRandomBackgroundColor() {
        setBackgroundColor(Color.rgb(r.nextInt(256), r.nextInt(256), r
                .nextInt(256)));
    }

    @Override
    public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
        return new ZanyInputConnection(super.onCreateInputConnection(outAttrs),
                true);
    }

    private class ZanyInputConnection extends InputConnectionWrapper {

        public ZanyInputConnection(InputConnection target, boolean mutable) {
            super(target, mutable);
        }

        @Override
        public boolean sendKeyEvent(KeyEvent event) {
            if (event.getAction() == KeyEvent.ACTION_DOWN
                    &amp;&amp; event.getKeyCode() == KeyEvent.KEYCODE_DEL) {
                ZanyEditText.this.setRandomBackgroundColor();
                // Un-comment if you wish to cancel the backspace:
                // return false;
            }
            return super.sendKeyEvent(event);
        }


        @Override
        public boolean deleteSurroundingText(int beforeLength, int afterLength) {       
            // magic: in latest Android, deleteSurroundingText(1, 0) will be called for backspace
            if (beforeLength == 1 &amp;&amp; afterLength == 0) {
                // backspace
                return sendKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DEL))
                    &amp;&amp; sendKeyEvent(new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_DEL));
            }

            return super.deleteSurroundingText(beforeLength, afterLength);
        }

    }

}
</code></pre>
",Jeff,Community,1368560956,1368560956,1495541430
http://stackoverflow.com/a/16571630/579925,How to capture stdout output from a Python function call?,41113,Nico Schl&#246;mer,,1368638010,1534444738,0,https://stackoverflow.com/questions/16571150/how-to-capture-stdout-output-from-a-python-function-call,"<p>Try this context manager:</p>

<pre><code>from cStringIO import StringIO
import sys

class Capturing(list):
    def __enter__(self):
        self._stdout = sys.stdout
        sys.stdout = self._stringio = StringIO()
        return self
    def __exit__(self, *args):
        self.extend(self._stringio.getvalue().splitlines())
        del self._stringio    # free up some memory
        sys.stdout = self._stdout
</code></pre>

<p>Usage:</p>

<pre><code>with Capturing() as output:
    do_something(my_object)
</code></pre>

<p><code>output</code> is now a list containing the lines printed by the function call.</p>

<p>Advanced usage:</p>

<p>What may not be obvious is that this can be done more than once and the results concatenated:</p>

<pre><code>with Capturing() as output:
    print 'hello world'

print 'displays on screen'

with Capturing(output) as output:  # note the constructor argument
    print 'hello world2'

print 'done'
print 'output:', output
</code></pre>

<p>Output:</p>

<pre class=""lang-none prettyprint-override""><code>displays on screen                     
done                                   
output: ['hello world', 'hello world2']
</code></pre>

<p><em>Update</em>: They added <code>redirect_stdout()</code> to <a href=""https://docs.python.org/3/library/contextlib.html#contextlib.redirect_stdout"" rel=""noreferrer""><code>contextlib</code></a> in Python 3.4 (along with <code>redirect_stderr()</code>). So you could use <code>io.StringIO</code> with that to achieve a similar result (though <code>Capturing</code> being a list as well as a context manager is arguably more convenient).</p>
",kindall,kindall,1368639819,1534444738,1534444738
http://stackoverflow.com/a/16585072/1045199,How do I disable orientation change on Android?,238222,Vidar Vestnes,Peter Mortensen,1254521564,1533145578,1457119635,https://stackoverflow.com/questions/1512045/how-do-i-disable-orientation-change-on-android,"<p>To lock the screen by code you have to use the actual rotation of the screen (0, 90, 180, 270) and you have to know the natural position of it, in a smartphone the natural position will be portrait and in a tablet, it will be landscape.</p>

<p>Here's the code (lock and unlock methods), it has been tested in some devices (smartphones and tablets) and it works great.</p>

<pre><code>public static void lockScreenOrientation(Activity activity)
{   
    WindowManager windowManager =  (WindowManager) activity.getSystemService(Context.WINDOW_SERVICE);   
    Configuration configuration = activity.getResources().getConfiguration();   
    int rotation = windowManager.getDefaultDisplay().getRotation(); 

    // Search for the natural position of the device    
    if(configuration.orientation == Configuration.ORIENTATION_LANDSCAPE &amp;&amp;  
       (rotation == Surface.ROTATION_0 || rotation == Surface.ROTATION_180) ||  
       configuration.orientation == Configuration.ORIENTATION_PORTRAIT &amp;&amp;   
       (rotation == Surface.ROTATION_90 || rotation == Surface.ROTATION_270))   
    {   
        // Natural position is Landscape    
        switch (rotation)   
        {   
            case Surface.ROTATION_0:    
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);    
                break;      
            case Surface.ROTATION_90:   
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT); 
            break;      
            case Surface.ROTATION_180: 
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE); 
                break;          
            case Surface.ROTATION_270: 
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
                break;
        }
    }
    else
    {
        // Natural position is Portrait
        switch (rotation) 
        {
            case Surface.ROTATION_0: 
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
            break;   
            case Surface.ROTATION_90: 
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
            break;   
            case Surface.ROTATION_180: 
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT); 
                break;          
            case Surface.ROTATION_270: 
                activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE); 
                break;
        }
    }
}

public static void unlockScreenOrientation(Activity activity)
{
    activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
}
</code></pre>
",PoOk,,1368700300,1368700300,0
http://stackoverflow.com/a/16591175/4328459,javascript calculate date from week number,39268,user2369009,higuaro,1368715304,1537294019,1368716523,https://stackoverflow.com/questions/16590500/javascript-calculate-date-from-week-number,"<pre><code>function getDateOfWeek(w, y) {
    var d = (1 + (w - 1) * 7); // 1st of January + 7 days for each week

    return new Date(y, 0, d);
}
</code></pre>

<p>This uses the <a href=""http://www.proesite.com/timex/wkcalc.htm"" rel=""noreferrer"">simple week definition</a>, meaning the 20th week of 2013 is May 14.</p>

<p>To calculate the date of the start of a given <a href=""http://en.wikipedia.org/wiki/ISO_week_date#First_week"" rel=""noreferrer"">ISO8601 week</a> (which will always be a Monday)</p>

<pre><code>function getDateOfISOWeek(w, y) {
    var simple = new Date(y, 0, 1 + (w - 1) * 7);
    var dow = simple.getDay();
    var ISOweekStart = simple;
    if (dow &lt;= 4)
        ISOweekStart.setDate(simple.getDate() - simple.getDay() + 1);
    else
        ISOweekStart.setDate(simple.getDate() + 8 - simple.getDay());
    return ISOweekStart;
}
</code></pre>

<p>Result: the 20th week of 2013 is May 13, which can be confirmed <a href=""http://www.epochconverter.com/date-and-time/weeknumbers-by-year.php?year=2013"" rel=""noreferrer"">here</a>.</p>
",Elle,Daniel Sokolowski,1368716979,1531929257,1531929257
http://stackoverflow.com/a/16623868/6763239,Specify which controllers to exclude from before_filter,32232,chaz hamilton,Jakub Hampl,1305499744,1492678077,1305499938,https://stackoverflow.com/questions/6011764/specify-which-controllers-to-exclude-from-before-filter,"<p>In config/application.rb</p>

<pre><code>config.to_prepare do
  Devise::SessionsController.skip_before_filter :authenticate_user!
end
</code></pre>

<p>Referenced by:</p>

<p><a href=""https://stackoverflow.com/questions/6209663/how-to-skip-a-before-filter-for-devises-sessionscontroller"">How to skip a before_filter for Devise&#39;s SessionsController?</a></p>
",Taimoor Changaiz,Community,1368877257,1368877257,1495541878
http://stackoverflow.com/a/16630332/577298,Remove last character from C++ string,256655,skazhy,,1266843394,1522013145,0,https://stackoverflow.com/questions/2310939/remove-last-character-from-c-string,"<p>Simple solution if you are using C++11. Probably O(1) time as well:</p>

<pre><code>st.pop_back();
</code></pre>
",mpgaillard,user2891462,1368923389,1477676126,1477676126
http://stackoverflow.com/a/16643074/386193,How to get all properties values of a Javascript Object (without knowing the keys)?,579441,Mellon,,1315218032,1534516490,1473260730,https://stackoverflow.com/questions/7306669/how-to-get-all-properties-values-of-a-javascript-object-without-knowing-the-key,"<p>Depending on which browsers you have to support, this can be done in a number of ways. The overwhelming majority of browsers in the wild support ECMAScript 5 (ES5), but be warned that many of the examples below use <code>Object.keys</code>, which is not available in IE &lt; 9. See the <a href=""http://kangax.github.io/compat-table/es5/"" rel=""noreferrer"">compatibility table</a>.</p>

<h1>ECMAScript 3+</h1>

<p>If you have to support older versions of IE, then this is the option for you:</p>

<pre><code>for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
        var val = obj[key];
        // use val
    }
}
</code></pre>

<p>The nested <code>if</code> makes sure that you don't enumerate over properties in the prototype chain of the object (which is the behaviour you almost certainly want). You must use</p>

<pre><code>Object.prototype.hasOwnProperty.call(obj, key) // ok
</code></pre>

<p>rather than</p>

<pre><code>obj.hasOwnProperty(key) // bad
</code></pre>

<p>because ECMAScript 5+ allows you to create prototypeless objects with <code>Object.create(null)</code>, and these objects will not have the <code>hasOwnProperty</code> method. Naughty code might also produce objects which override the <code>hasOwnProperty</code> method.</p>

<h1>ECMAScript 5+</h1>

<p>You can use these methods in any browser that supports ECMAScript 5 and above. These get values from an object and avoid enumerating over the prototype chain. Where <code>obj</code> is your object:</p>

<pre><code>var keys = Object.keys(obj);

for (var i = 0; i &lt; keys.length; i++) {
    var val = obj[keys[i]];
    // use val
}
</code></pre>

<p>If you want something a little more compact or you want to be careful with functions in loops, then <code>Array.prototype.forEach</code> is your friend:</p>

<pre><code>Object.keys(obj).forEach(function (key) {
    var val = obj[key];
    // use val
});
</code></pre>

<p>The next method builds an array containing the values of an object. This is convenient for looping over.</p>

<pre><code>var vals = Object.keys(obj).map(function (key) {
    return obj[key];
});

// use vals array
</code></pre>

<p>If you want to make those using <code>Object.keys</code> safe against <code>null</code> (as <code>for-in</code> is), then you can do <code>Object.keys(obj || {})...</code>.</p>

<p><code>Object.keys</code> returns <em>enumerable</em> properties. For iterating over simple objects, this is usually sufficient. If you have something with non-enumerable properties that you need to work with, you may use <code>Object.getOwnPropertyNames</code> in place of <code>Object.keys</code>.</p>

<h1>ECMAScript 2015+ (A.K.A. ES6)</h1>

<p>Arrays are easier to iterate with ECMAScript 2015. You can use this to your advantage when working with values one-byone in a loop:</p>

<pre><code>for (const key of Object.keys(obj)) {
    const val = obj[key];
    // use val
}
</code></pre>

<p>Using ECMAScript 2015 fat-arrow functions, mapping the object to an array of values becomes a one-liner:</p>

<pre><code>const vals = Object.keys(obj).map(key =&gt; obj[key]);

// use vals array
</code></pre>

<p>ECMAScript 2015 introduces <code>Symbol</code>, instances of which may be used as property names. To get the symbols of an object to enumerate over, use <code>Object.getOwnPropertySymbols</code> (this function is why <code>Symbol</code> <em>can't</em> be used to make private properties). The new <code>Reflect</code> API from ECMAScript 2015 provides <code>Reflect.ownKeys</code>, which returns a list of property names (including non-enumerable ones) and symbols.</p>

<h2>Array comprehensions (do not attempt to use)</h2>

<p>Array comprehensions were <strong>removed</strong> from ECMAScript 6 before publication. Prior to their removal, a solution would have looked like:</p>

<pre><code>const vals = [for (key of Object.keys(obj)) obj[key]];

// use vals array
</code></pre>

<h1>ECMAScript 2017+</h1>

<p>ECMAScript 2016 adds features which do not impact this subject. The ECMAScript 2017 specification adds <code>Object.values</code> and <code>Object.entries</code>. Both return arrays (which will be surprising to some given the analogy with <code>Array.entries</code>). <code>Object.values</code> can be used as is or with a <code>for-of</code> loop.</p>

<pre><code>const values = Object.values(obj);

// use values array or:

for (const val of Object.values(obj)) {
    // use val
}
</code></pre>

<p>If you want to use both the key and the value, then <code>Object.entries</code> is for you. It produces an array filled with <code>[key, value]</code> pairs. You can use this as is, or (note also the ECMAScript 2015 destructuring assignment) in a <code>for-of</code> loop:</p>

<pre><code>for (const [key, val] of Object.entries(obj)) {
    // use key and val
}
</code></pre>

<h1><code>Object.values</code> shim</h1>

<p>Finally, as noted in the comments and by teh_senaus in another answer, it may be worth using one of these as a shim. Don't worry, the following does not change the prototype, it just adds a method to <code>Object</code> (which is much less dangerous). Using fat-arrow functions, this can be done in one line too:</p>

<pre><code>Object.values = obj =&gt; Object.keys(obj).map(key =&gt; obj[key]);
</code></pre>

<p>which you can now use like</p>

<pre><code>// ['one', 'two', 'three']
var values = Object.values({ a: 'one', b: 'two', c: 'three' });
</code></pre>

<p>If you want to avoid shimming when a native <code>Object.values</code> exists, then you can do:</p>

<pre><code>Object.values = Object.values || (obj =&gt; Object.keys(obj).map(key =&gt; obj[key]));
</code></pre>

<h1>Finally...</h1>

<p>Be aware of the browsers/versions you need to support. The above are correct where the methods or language features are implemented. For example, support for ECMAScript 2015 was switched off by default in V8 until recently, which powered browsers such as Chrome. Features from ECMAScript 2015 should be be avoided until the browsers you intend to support implement the features that you need. If you use <a href=""https://babeljs.io/"" rel=""noreferrer"">babel</a> to compile your code to ECMAScript 5, then you have access to all the features in this answer.</p>
",qubyte,qubyte,1369027366,1502502143,1502502143
http://stackoverflow.com/a/16683147/16509,Can macros be overloaded by number of arguments?,10261,Potatoswatter,Community,1369194468,1554718870,1495535449,https://stackoverflow.com/questions/16683146/can-macros-be-overloaded-by-number-of-arguments,"<p>(Edit: See the end for a ready-made solution.)</p>

<p>To get an overloaded macro, first we need a macro which selects between several implementations. This part doesn't use a variadic macro. Then a variadic macro which generically counts its arguments produces a selector. Plugging the argument count into a dispatcher produces an overloaded macro.</p>

<p><strong>Caveat:</strong> This system cannot tell the difference between zero and one arguments because there <em>is</em> no difference between no argument, and a single empty argument. They both look like <code>MACRO()</code>.</p>

<hr>

<p>To select between implementations, use the macro catenation operator with a series of function-like macros.</p>

<pre><code>#define select( selector, ... ) impl ## _ ## selector( __VA_ARGS__ )
#define impl_1() meh
#define impl_2( abc, xyz ) # abc ""wizza"" xyz()
//etc

// usage: select( 1 ) =&gt; impl_1() =&gt; meh
//        select( 2, huz, bar ) =&gt; impl_2( huzza, bar ) =&gt; ""huz"" ""wizza"" bar()
</code></pre>

<p>Because the <code>##</code> operator suppresses macro expansion of its arguments, it's better to wrap it in another macro.</p>

<pre><code>#define CAT( A, B ) A ## B
#define SELECT( NAME, NUM ) CAT( NAME ## _, NUM )
</code></pre>

<hr>

<p>To count arguments, use <code>__VA_ARGS__</code> to shift arguments like so (this is the clever part):</p>

<pre><code>#define GET_COUNT( _1, _2, _3, _4, _5, _6 /* ad nauseam */, COUNT, ... ) COUNT
#define VA_SIZE( ... ) GET_COUNT( __VA_ARGS__, 6, 5, 4, 3, 2, 1 )
</code></pre>

<hr>

<h2>Library code:</h2>

<pre><code>#define CAT( A, B ) A ## B
#define SELECT( NAME, NUM ) CAT( NAME ## _, NUM )

#define GET_COUNT( _1, _2, _3, _4, _5, _6 /* ad nauseam */, COUNT, ... ) COUNT
#define VA_SIZE( ... ) GET_COUNT( __VA_ARGS__, 6, 5, 4, 3, 2, 1 )

#define VA_SELECT( NAME, ... ) SELECT( NAME, VA_SIZE(__VA_ARGS__) )(__VA_ARGS__)
</code></pre>

<h2>Usage:</h2>

<pre><code>#define MY_OVERLOADED( ... ) VA_SELECT( MY_OVERLOADED, __VA_ARGS__ )
#define MY_OVERLOADED_1( X ) foo&lt; X &gt;
#define MY_OVERLOADED_2( X, Y ) bar&lt; X &gt;( Y )
#define MY_OVERLOADED_3( X, Y, Z ) bang_ ## X&lt; Y &gt;.Z()
</code></pre>
",Potatoswatter,Potatoswatter,1369194468,1482736727,1482736727
http://stackoverflow.com/a/16701952/899470,How to linebreak an svg text within javascript?,96713,sollniss,,1369256621,1543961317,0,https://stackoverflow.com/questions/16701522/how-to-linebreak-an-svg-text-within-javascript,"<p>This is not something that SVG 1.1 supports. SVG 1.2 does have the <code>textArea</code> element, with automatic word wrapping, but it's not implemented in all browsers. SVG 2 <a href=""https://www.w3.org/Graphics/SVG/WG/wiki/SVG2_Requirements_Input#the_textArea_element"">does not plan on implementing <code>textArea</code></a>, but it does have <a href=""https://svgwg.org/svg2-draft/text.html#TextLayoutAuto"">auto-wrapped text</a>.</p>

<p>However, given that you already know where your linebreaks should occur, you can break your text into multiple <code>&lt;tspan&gt;</code>s, each with <code>x=""0""</code> and <code>dy=""1.4em""</code> to simulate actual lines of text. For example:</p>

<pre><code>&lt;g transform=""translate(123 456)""&gt;&lt;!-- replace with your target upper left corner coordinates --&gt;
  &lt;text x=""0"" y=""0""&gt;
    &lt;tspan x=""0"" dy=""1.2em""&gt;very long text&lt;/tspan&gt;
    &lt;tspan x=""0"" dy=""1.2em""&gt;I would like to linebreak&lt;/tspan&gt;
  &lt;/text&gt;
&lt;/g&gt;
</code></pre>

<p>Of course, since you want to do that from JavaScript, you'll have to manually create and insert each element into the DOM.</p>
",Sergiu Dumitriu,Sergiu Dumitriu,1369258493,1471895518,1471895518
http://stackoverflow.com/a/16725290/5351316,Convert a PHP date format to a jQueryUI Datepicker date format,9976,Tristan Jahier,Tristan Jahier,1369260392,1520836769,1406069228,https://stackoverflow.com/questions/16702398/convert-a-php-date-format-to-a-jqueryui-datepicker-date-format,"<p>I chose the brutal method : converting symbol-by-symbol the date format.
I made a 'not-so-dummy' code snippet.</p>

<pre><code>/*
* Matches each symbol of PHP date format standard
* with jQuery equivalent codeword
 * @author Tristan Jahier
*/
function dateformat_PHP_to_jQueryUI($php_format)
{
$SYMBOLS_MATCHING = array(
// Day
'd' =&gt; 'dd',
'D' =&gt; 'D',
'j' =&gt; 'd',
'l' =&gt; 'DD',
'N' =&gt; '',
'S' =&gt; '',
'w' =&gt; '',
'z' =&gt; 'o',
// Week
'W' =&gt; '',
// Month
'F' =&gt; 'MM',
'm' =&gt; 'mm',
'M' =&gt; 'M',
'n' =&gt; 'm',
't' =&gt; '',
// Year
'L' =&gt; '',
'o' =&gt; '',
'Y' =&gt; 'yy',
'y' =&gt; 'y',
// Time
'a' =&gt; '',
'A' =&gt; '',
'B' =&gt; '',
'g' =&gt; '',
'G' =&gt; '',
'h' =&gt; '',
'H' =&gt; '',
'i' =&gt; '',
's' =&gt; '',
'u' =&gt; ''
);
$jqueryui_format = """";
$escaping = false;
for($i = 0; $i &lt; strlen($php_format); $i++)
{
$char = $php_format[$i];
if($char === '\\') // PHP date format escaping character
{
$i++;
if($escaping) $jqueryui_format .= $php_format[$i];
else $jqueryui_format .= '\'' . $php_format[$i];
$escaping = true;
}
else
{
if($escaping) { $jqueryui_format .= ""'""; $escaping = false; }
if(isset($SYMBOLS_MATCHING[$char]))
$jqueryui_format .= $SYMBOLS_MATCHING[$char];
else
$jqueryui_format .= $char;
}
}
return $jqueryui_format;
}
</code></pre>

<p>This function handles all the common codewords between PHP and Datepicker date format standards.</p>

<p>Plus, I added support for character escaping :</p>

<p><code>d m \o\f Y</code> becomes <code>dd mm 'of' yy</code></p>

<p>You may still have problems with symbols like 'W', 'L' that have no equivalent handled by Datepicker.</p>
",Tristan Jahier,Tristan Jahier,1369350226,1377361482,1377361482
http://stackoverflow.com/a/16725715/35448,Test if two lines intersect - JavaScript function,41125,Jarrod,jacob,1327737469,1550843863,1527287156,https://stackoverflow.com/questions/9043805/test-if-two-lines-intersect-javascript-function,"<p>Although it is useful to be able to find the intersection point, testing for <em>whether</em> line segments intersect is most often used for polygon hit-testing, and given the usual applications of that, you need to do it <em>fast</em>. Therefore I suggest you do it like this, using only subtraction, multiplication, comparison and AND. <code>Turn</code> computes the direction of the change in slope between the two edges described by the three points: 1 means counter-clockwise, 0 means no turn and -1 means clockwise.</p>

<p>This code expects points expressed as GLatLng objects but can be trivially rewritten to other systems of representation. The slope comparison has been normalised to <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/EPSILON"" rel=""noreferrer"">epsilon</a> tolerance to damp floating point errors.</p>

<pre><code>function Turn(p1, p2, p3) {
  a = p1.lng(); b = p1.lat(); 
  c = p2.lng(); d = p2.lat();
  e = p3.lng(); f = p3.lat();
  A = (f - b) * (c - a);
  B = (d - b) * (e - a);
  return (A &gt; B + Number.EPSILON) ? 1 : (A + Number.EPSILON &lt; B) ? -1 : 0;
}

function isIntersect(p1, p2, p3, p4) {
  return (Turn(p1, p3, p4) != Turn(p2, p3, p4)) &amp;&amp; (Turn(p1, p2, p3) != Turn(p1, p2, p4));
}
</code></pre>
",Peter Wone,Peter Wone,1369352906,1468997085,1468997085
http://stackoverflow.com/a/16745540/400236,Extra padding on TextView with HTML contents,9045,Benoit Duffez,,1368701672,1549213842,0,https://stackoverflow.com/questions/16585557/extra-padding-on-textview-with-html-contents,"<p>The extra 'padding' you're seeing, is in fact just a line break followed by another line break:</p>

<p><img src=""https://i.stack.imgur.com/i2o7d.png"" alt=""enter image description here""></p>

<p>When you dive into the <code>Html.fromHtml(...)</code> implementation, you'll come across the following method that handles paragraph tags:</p>

<pre><code>private static void handleP(SpannableStringBuilder text) {
    int len = text.length();

    if (len &gt;= 1 &amp;&amp; text.charAt(len - 1) == '\n') {
        if (len &gt;= 2 &amp;&amp; text.charAt(len - 2) == '\n') {
            return;
        }

        text.append(""\n"");
        return;
    }

    if (len != 0) {
        text.append(""\n\n"");
    }
}
</code></pre>

<p>Above snippet was takes from the <a href=""http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/text/Html.java#HtmlToSpannedConverter.handleP%28android.text.SpannableStringBuilder%29"" rel=""noreferrer"">Android 4.2.2 source</a>. The logic is quite straightforward and basically ensures that every paragraph tag ends with <code>\n\n</code>, to give a visual gap between two element blocks. It means the framework will not into account whether the whole Html text consists of only a single paragraph (your case), or multiple, successive paragaps - there will <em>always</em> be two line breaks at the end of a transformed paragraph.</p>

<p>That being said, if you know you're always dealing with a single paragraph, the easiest solution is to remove that wrapping paragraph before feeding it to <code>Html.fromHtml(...)</code>. This is pretty much what was proposed in one of the other answers.</p>

<p>Now, since you mentioned this isn't really an option, the alternative would be to 'trim' the result of <code>Html.fromHtml(...)</code>, removing any trailing white spaces. Android returns a <code>Spanned</code> (usually this is a <code>SpannableStringBuilder</code> object), which, unfortunately, doesn't come with a built-in <code>trim()</code> method. It's not too tricky to come up with your own though, or borrow one of several implementations available out there.</p>

<p>A basic implementation for a <code>trim()</code> method would like somewhat like this:</p>

<pre><code>public static CharSequence trim(CharSequence s, int start, int end) {
    while (start &lt; end &amp;&amp; Character.isWhitespace(s.charAt(start))) {
        start++;
    }

    while (end &gt; start &amp;&amp; Character.isWhitespace(s.charAt(end - 1))) {
        end--;
    }

    return s.subSequence(start, end);
}
</code></pre>

<p>To use it, change your original code to:</p>

<pre><code>String html = ""&lt;p&gt;Hi,&lt;br/&gt;Do you think you could get a logcat during the crash? That seems really strange, especially the fact that it makes Android reboot.&lt;br/&gt;You can get the SDK here: http://developer.android.com/sdk/index.html&lt;br/&gt;(needed for logcat)&lt;/p&gt;"";
CharSequence trimmed = trim(Html.fromHtml(html));
theTextView.setText(trimmed);
</code></pre>

<p>And voil, before and after:</p>

<p><img src=""https://i.stack.imgur.com/aukRX.png"" alt=""enter image description here""></p>
",MH.,MH.,1369444893,1369445193,1369445193
http://stackoverflow.com/a/16794345/1931663,hashmap for 2d(3d) coordinates (i.e. vector of doubles)?,5733,Denis,Community,1369745955,1513873369,1495540906,https://stackoverflow.com/questions/16792751/hashmap-for-2d3d-coordinates-i-e-vector-of-doubles,"<p>To avoid extra dependencies, you can use <a href=""http://en.cppreference.com/w/cpp/utility/hash"" rel=""nofollow""><code>std::hash</code></a>. Here's an example using the code from the link you posted, and updated to use a <code>std::pair&lt;double,double&gt;</code>:</p>

<pre><code>#include &lt;unordered_map&gt;
#include &lt;cassert&gt;

using namespace std;

class TPoint3D{
public:
    TPoint3D(double x, double y, double z) : x(x), y(y), z(z){};

    double x, y, z;
};

struct hashFunc{
    size_t operator()(const TPoint3D &amp;k) const{
    size_t h1 = std::hash&lt;double&gt;()(k.x);
    size_t h2 = std::hash&lt;double&gt;()(k.y);
    size_t h3 = std::hash&lt;double&gt;()(k.z);
    return (h1 ^ (h2 &lt;&lt; 1)) ^ h3;
    }
};

struct equalsFunc{
  bool operator()( const TPoint3D&amp; lhs, const TPoint3D&amp; rhs ) const{
    return (lhs.x == rhs.x) &amp;&amp; (lhs.y == rhs.y) &amp;&amp; (lhs.z == rhs.z);
  }
};

typedef unordered_map&lt;TPoint3D, int, hashFunc, equalsFunc&gt; TPoint3DMap;

int main(){
  TPoint3DMap myMap;

  // test equalsFunc
  myMap[TPoint3D(10.0, 20.0, 30.0)] = 100;
  myMap[TPoint3D(10.0, 20.0, 30.0)] = 200;

  assert(myMap[TPoint3D(10.0, 20.0, 30.0)] == 200);

  // test if hashFunc handles well repeated values inside TPoint3D
  myMap[TPoint3D(10.0, 10.0, 10.0)] = 1;
  myMap[TPoint3D(10.0, 20.0, 10.0)] = 2;
  myMap[TPoint3D(10.0, 10.0, 20.0)] = 3;
  myMap[TPoint3D(20.0, 10.0, 10.0)] = 4;

  assert(myMap[TPoint3D(10.0, 10.0, 10.0)] == 1);
  assert(myMap[TPoint3D(10.0, 20.0, 10.0)] == 2);
  assert(myMap[TPoint3D(10.0, 10.0, 20.0)] == 3);
  assert(myMap[TPoint3D(20.0, 10.0, 10.0)] == 4);

  return 0;
}
</code></pre>

<p>As I said before, if you wish to use another structure you have to adapt both the <code>pairHash</code> class and <code>pairEquals</code> struct  <code>operator()</code> to appropriately hash and compare the new keys, respectively.</p>

<p>Cheers</p>

<p><strong>EDIT :</strong></p>

<ul>
<li>Modified code to use custom TPPoint3D class and uniform functor classes definitions (both using struct).</li>
<li>Added simple tests to validate the hash and equals functors. </li>
</ul>
",Andr Neves,Andr Neves,1369750418,1369926620,1369926620
http://stackoverflow.com/a/16795664/4070143,Connecting overloaded signals and slots in Qt 5,40833,dtruby,Toby Speight,1369751446,1521127638,1463584833,https://stackoverflow.com/questions/16794695/connecting-overloaded-signals-and-slots-in-qt-5,"

<p>The problem here is that there are <strong>two</strong> signals with that name: <code>QSpinBox::valueChanged(int)</code> and <code>QSpinBox::valueChanged(QString)</code>.  From Qt 5.7, there are helper functions provided to select the desired overload, so you can write</p>

<pre class=""lang-cpp prettyprint-override""><code>connect(spinbox, qOverload&lt;int&gt;(&amp;QSpinBox::valueChanged),
        slider, &amp;QSlider::setValue);
</code></pre>

<p>For Qt 5.6 and earlier, you need to tell Qt which one you want to pick, by casting it to the right type:</p>

<pre class=""lang-cpp prettyprint-override""><code>connect(spinbox, static_cast&lt;void (QSpinBox::*)(int)&gt;(&amp;QSpinBox::valueChanged),
        slider, &amp;QSlider::setValue);
</code></pre>

<p>I know, it's <strong>ugly</strong>. But there's no way around this. Today's lesson is: <em>do not overload your signals and slots!</em></p>

<hr>

<p><strong>Addendum</strong>: what's really annoying about the cast is that </p>

<ol>
<li>one repeats the class name twice</li>
<li>one has to specify the return value even if it's usually <code>void</code> (for signals).</li>
</ol>

<p>So I've found myself sometimes using this C++11 snippet:</p>

<pre class=""lang-cpp prettyprint-override""><code>template&lt;typename... Args&gt; struct SELECT { 
    template&lt;typename C, typename R&gt; 
    static constexpr auto OVERLOAD_OF( R (C::*pmf)(Args...) ) -&gt; decltype(pmf) { 
        return pmf;
    } 
};
</code></pre>

<p>Usage:</p>

<pre class=""lang-cpp prettyprint-override""><code>connect(spinbox, SELECT&lt;int&gt;::OVERLOAD_OF(&amp;QSpinBox::valueChanged), ...)
</code></pre>

<p>I personally find it not really useful. I expect this problem to go away by itself when Creator (or your IDE) will automatically insert the right cast when autocompleting the operation of taking the PMF. But in the meanwhile...</p>

<p>Note: the PMF-based connect syntax <strong>does not require C++11</strong>!</p>

<hr>

<p><strong>Addendum 2</strong>: in Qt 5.7 helper functions were added to mitigate this, modelled after my workaround above. The main helper is <a href=""https://doc.qt.io/qt-5/qtglobal.html#qOverload"" rel=""noreferrer""><code>qOverload</code></a> (you've also got <a href=""https://doc.qt.io/qt-5/qtglobal.html#qConstOverload"" rel=""noreferrer""><code>qConstOverload</code></a> and <a href=""https://doc.qt.io/qt-5/qtglobal.html#qNonConstOverload"" rel=""noreferrer""><code>qNonConstOverload</code></a>). </p>

<p>Usage example (from the docs):</p>

<pre class=""lang-cpp prettyprint-override""><code>struct Foo {
    void overloadedFunction();
    void overloadedFunction(int, QString);
};

// requires C++14
qOverload&lt;&gt;(&amp;Foo:overloadedFunction)
qOverload&lt;int, QString&gt;(&amp;Foo:overloadedFunction)

// same, with C++11
QOverload&lt;&gt;::of(&amp;Foo:overloadedFunction)
QOverload&lt;int, QString&gt;::of(&amp;Foo:overloadedFunction)
</code></pre>
",peppe,Toby Speight,1369754294,1521127638,1521127638
http://stackoverflow.com/a/16863232/3658919,Which Sphinx code-block language to use for JSON,14165,JayhawksFan93,Glen Solsberry,1290534381,1529570468,1294169363,https://stackoverflow.com/questions/4259105/which-sphinx-code-block-language-to-use-for-json,"<p>Even with Sphinx 1.2b1 and Pygments 1.6, I needed to call add_lexer to get <code>.. code-block:: json</code> to do anything.  I ended up putting the following code fragment into an extension (<code>docs/_ext/jsonlexer.py</code>):
</p>

<pre class=""lang-py prettyprint-override""><code>def setup(app):
    # enable Pygments json lexer
    try:
        import pygments
        if pygments.__version__ &gt;= '1.5':
            # use JSON lexer included in recent versions of Pygments
            from pygments.lexers import JsonLexer
        else:
            # use JSON lexer from pygments-json if installed
            from pygson.json_lexer import JSONLexer as JsonLexer
    except ImportError:
        pass  # not fatal if we have old (or no) Pygments and no pygments-json
    else:
        app.add_lexer('json', JsonLexer())
</code></pre>

<p>My <code>docs/conf.py</code> for Sphinx has the following to enable the extension:</p>

<pre class=""lang-py prettyprint-override""><code>import os
import sys

sys.path.insert(0, os.path.abspath('_ext'))

# Add any Sphinx extension module names here, as strings. They can be
# extensions # coming with Sphinx (named 'sphinx.ext.*') or your custom
# ones.
extensions = ['jsonlexer']
</code></pre>
",Alex Dupuy,,1370023411,1370023411,0
http://stackoverflow.com/a/16903162/1243495,Resolved: MAMP Php can&#39;t exec (&#39;convert&#39;) after Homebrew ImageMagick install,8141,firedev,aorcsik,1314113127,1370937641,1358439565,https://stackoverflow.com/questions/7163497/resolved-mamp-php-cant-exec-convert-after-homebrew-imagemagick-install,"<p>Adding my own answer here so you can vote: </p>

<p>It was caused by MAMP, here is the fix: <a href=""http://firedevcom.tumblr.com/post/22791937644/fix-for-homebrew-imagemagick-and-mamp"">http://firedevcom.tumblr.com/post/22791937644/fix-for-homebrew-imagemagick-and-mamp</a></p>

<p>Open <code>/Applications/MAMP/Library/bin/envvars</code></p>

<p>And comment out the following lines:</p>

<pre><code>DYLD_LIBRARY_PATH=""/Applications/MAMP/Library/lib:$DYLD_LIBRARY_PATH""
export DYLD_LIBRARY_PATH
</code></pre>

<p>Done.</p>
",firedev,,1370283324,1370283324,0
http://stackoverflow.com/a/16934373/603516,Could ThreadLocal&lt;AtomicInteger&gt; possibly be useful?,1948,Riking,Riking,1370416401,1383980466,1383980466,https://stackoverflow.com/questions/16933691/could-threadlocalatomicinteger-possibly-be-useful,"<p>Suppose we need an integer counter per thread. ThreadLocal can work only with objects so logically we need to use an int wrapper - Integer</p>

<pre><code>ThreadLocal&lt;Integer&gt; count = new ThreadLocal&lt;&gt;();
...
count.set(count.get() + 1);
</code></pre>

<p>alternatavely we can use AtomicInteger, not because it's thread safe but because it's mutable </p>

<pre><code>ThreadLocal&lt;AtomicInteger&gt; count = new ThreadLocal&lt;&gt;();
...
count.get().incrementAndGet();
</code></pre>

<p>Version 2 has a much better performance than version 1 which is a real performance killer</p>
",Evgeniy Dorofeev,Evgeniy Dorofeev,1370418789,1370429119,1370429119
http://stackoverflow.com/a/16939962/4186768,android.util.AndroidRuntimeException: requestFeature() must be called before adding content,83628,Matt,,1370434773,1550262591,0,https://stackoverflow.com/questions/16939814/android-util-androidruntimeexception-requestfeature-must-be-called-before-add,"<p>I also faced this problem but when i call window request before calling <strong>super.onCreate()</strong> then problem was solved, please try it also like..</p>

<pre><code>@Override
public void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainmenu);
}
</code></pre>

<p>Hope this will help you...:)</p>

<hr>

<p><strong>Edited: For other possible solutions for Android'd new versions</strong></p>

<p><strong>Hide the Status Bar on Android 4.0 and Lower</strong></p>

<pre><code>&lt;application
    ...
    android:theme=""@android:style/Theme.Holo.NoActionBar.Fullscreen"" &gt;
    ...
&lt;/application&gt;
</code></pre>

<p>The advantages of using an activity theme are as follows:</p>

<ul>
<li>It's easier to maintain and less error-prone than setting a flag programmatically.</li>
<li>It results in smoother UI transitions, because the system has the information it needs to render your UI before instantiating your app's main activity.</li>
</ul>

<hr>

<p><strong>Android version is lower than Jellybean</strong></p>

<pre><code>@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // If the Android version is lower than Jellybean, use this call to hide
    // the status bar.
    if (Build.VERSION.SDK_INT &lt; 16) {
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
    }
    setContentView(R.layout.activity_main);
}
</code></pre>

<hr>

<p><strong>Hide the Status Bar on Android 4.1 and Higher</strong></p>

<pre><code>View decorView = getWindow().getDecorView();
// Hide the status bar.
int uiOptions = View.SYSTEM_UI_FLAG_FULLSCREEN;
decorView.setSystemUiVisibility(uiOptions);
// Remember that you should never show the action bar if the
// status bar is hidden, so hide that too if necessary.
ActionBar actionBar = getActionBar();
actionBar.hide();
</code></pre>

<p>Note the following:</p>

<ul>
<li>Once UI flags have been cleared (for example, by navigating away from the activity), your app needs to reset them if you want to hide the bars again. See <a href=""http://developer.android.com/training/system-ui/visibility.html"" rel=""noreferrer"">Responding to UI Visibility Changes</a> for a discussion of how to listen for UI visibility changes so that your app can respond accordingly.</li>
<li>Where you set the UI flags makes a difference. If you hide the system bars in your activity's onCreate() method and the user presses Home, the system bars will reappear. When the user reopens the activity, onCreate() won't get called, so the system bars will remain visible. If you want system UI changes to persist as the user navigates in and out of your activity, set UI flags in onResume() or onWindowFocusChanged().</li>
<li>The method setSystemUiVisibility() only has an effect if the view you call it from is visible.</li>
<li>Navigating away from the view causes flags set with setSystemUiVisibility() to be cleared.</li>
</ul>
",vishesh chandra,vishesh chandra,1370435290,1432298232,1432298232
http://stackoverflow.com/a/1695250/987738,How can I represent an &#39;Enum&#39; in Python?,759773,sectrean,igaurav,1220198147,1555551978,1411401796,https://stackoverflow.com/questions/36932/how-can-i-represent-an-enum-in-python,"<p>Enums have been added to Python 3.4 as described in <a href=""http://www.python.org/dev/peps/pep-0435/"" rel=""noreferrer"">PEP 435</a>.  It has also been <a href=""https://pypi.python.org/pypi/enum34"" rel=""noreferrer"">backported to 3.3, 3.2, 3.1, 2.7, 2.6, 2.5, and 2.4</a> on pypi.  </p>

<p>For more advanced Enum techniques try the <a href=""https://pypi.python.org/pypi/aenum"" rel=""noreferrer"">aenum library</a> (2.7, 3.3+, same author as <code>enum34</code>. Code is not perfectly compatible between py2 and py3, e.g. you'll need <a href=""https://stackoverflow.com/a/25982264/57461""><code>__order__</code> in python 2</a>).</p>

<ul>
<li>To use <code>enum34</code>, do <code>$ pip install enum34</code></li>
<li>To use <code>aenum</code>, do <code>$ pip install aenum</code></li>
</ul>

<p>Installing <code>enum</code> (no numbers) will install a completely different and incompatible version.</p>

<hr>

<pre><code>from enum import Enum     # for enum34, or the stdlib version
# from aenum import Enum  # for the aenum version
Animal = Enum('Animal', 'ant bee cat dog')

Animal.ant  # returns &lt;Animal.ant: 1&gt;
Animal['ant']  # returns &lt;Animal.ant: 1&gt; (string lookup)
Animal.ant.name  # returns 'ant' (inverse lookup)
</code></pre>

<p>or equivalently:</p>

<pre><code>class Animal(Enum):
    ant = 1
    bee = 2
    cat = 3
    dog = 4
</code></pre>

<hr>

<p>In earlier versions, one way of accomplishing enums is:</p>

<pre><code>def enum(**enums):
    return type('Enum', (), enums)
</code></pre>

<p>which is used like so:</p>

<pre><code>&gt;&gt;&gt; Numbers = enum(ONE=1, TWO=2, THREE='three')
&gt;&gt;&gt; Numbers.ONE
1
&gt;&gt;&gt; Numbers.TWO
2
&gt;&gt;&gt; Numbers.THREE
'three'
</code></pre>

<p>You can also easily support automatic enumeration with something like this:</p>

<pre><code>def enum(*sequential, **named):
    enums = dict(zip(sequential, range(len(sequential))), **named)
    return type('Enum', (), enums)
</code></pre>

<p>and used like so:</p>

<pre><code>&gt;&gt;&gt; Numbers = enum('ZERO', 'ONE', 'TWO')
&gt;&gt;&gt; Numbers.ZERO
0
&gt;&gt;&gt; Numbers.ONE
1
</code></pre>

<p>Support for converting the values back to names can be added this way:</p>

<pre><code>def enum(*sequential, **named):
    enums = dict(zip(sequential, range(len(sequential))), **named)
    reverse = dict((value, key) for key, value in enums.iteritems())
    enums['reverse_mapping'] = reverse
    return type('Enum', (), enums)
</code></pre>

<p>This overwrites anything with that name, but it is useful for rendering your enums in output.  It will throw KeyError if the reverse mapping doesn't exist.  With the first example:</p>

<pre><code>&gt;&gt;&gt; Numbers.reverse_mapping['three']
'THREE'
</code></pre>
",Alec Thomas,Community,1257650128,1476714190,1495540052
http://stackoverflow.com/a/16957370/1198772,Python to JSON Serialization fails on Decimal,33952,Dinesh,Martijn Pieters,1370507535,1502789087,1502789087,https://stackoverflow.com/questions/16957275/python-to-json-serialization-fails-on-decimal,"<p>It is not (no longer) recommended you create a subclass; the <code>json.dump()</code> and <code>json.dumps()</code> functions take a <code>default</code> function:</p>

<pre><code>def decimal_default(obj):
    if isinstance(obj, decimal.Decimal):
        return float(obj)
    raise TypeError

json.dumps({'x': decimal.Decimal('5.5')}, default=decimal_default)
</code></pre>

<p>Demo:</p>

<pre><code>&gt;&gt;&gt; def decimal_default(obj):
...     if isinstance(obj, decimal.Decimal):
...         return float(obj)
...     raise TypeError
... 
&gt;&gt;&gt; json.dumps({'x': decimal.Decimal('5.5')}, default=decimal_default)
'{""x"": 5.5}'
</code></pre>

<p>The code you found only worked on Python 2.6 and overrides a private method that is no longer called in later versions.</p>
",Martijn Pieters,Martijn Pieters,1370507819,1401086535,1401086535
http://stackoverflow.com/a/16975971/1084488,Replace instances of character in a string with array values,4640,David,David,1370577160,1370714571,1370714571,https://stackoverflow.com/questions/16975945/replace-instances-of-character-in-a-string-with-array-values,"<p>By using <code>String.format</code>:</p>

<pre><code>public static String replaceNeedlesWithValues(String subject, String needle, String[] values) {
    return String.format(subject.replace(""%"", ""%%"")
                                .replace(needle, ""%s""),
                         values);
}
</code></pre>

<p>:-)</p>

<p>Of course, you'll probably just want to work with <code>String.format</code> directly:</p>

<pre><code>String.format(""The %s %s was %s his %s"", ""brown"", ""dog"", ""eating"", ""food"");
// =&gt; ""The brown dog was eating his food""
</code></pre>
",Chris Jester-Young,Chris Jester-Young,1370577350,1370578160,1370578160
http://stackoverflow.com/a/16993115/2475775,Logging uncaught exceptions in Python,39061,Jacob Marble,DavidRR,1307156002,1491427969,1426167052,https://stackoverflow.com/questions/6234405/logging-uncaught-exceptions-in-python,"<p>Here's a complete small example that also includes a few other tricks:</p>

<pre><code>import sys
import logging
logger = logging.getLogger(__name__)
handler = logging.StreamHandler(stream=sys.stdout)
logger.addHandler(handler)

def handle_exception(exc_type, exc_value, exc_traceback):
    if issubclass(exc_type, KeyboardInterrupt):
        sys.__excepthook__(exc_type, exc_value, exc_traceback)
        return

    logger.error(""Uncaught exception"", exc_info=(exc_type, exc_value, exc_traceback))

sys.excepthook = handle_exception

if __name__ == ""__main__"":
    raise RuntimeError(""Test unhandled"")
</code></pre>

<ul>
<li><p>Ignore KeyboardInterrupt so a console python program can exit with Ctrl + C.</p></li>
<li><p>Rely entirely on python's logging module for formatting the exception.</p></li>
<li><p>Use a custom logger with an example handler. This one changes the unhandled exception to go to stdout rather than stderr, but you could add all sorts of handlers in this same style to the logger object.</p></li>
</ul>
",gnu_lorien,Dennis Golomazov,1370639904,1491427969,1491427969
http://stackoverflow.com/a/17004263/2931197,How to run unittest discover from &quot;python setup.py test&quot;?,42006,cdwilson,cdwilson,1370705231,1500416642,1370730168,https://stackoverflow.com/questions/17001010/how-to-run-unittest-discover-from-python-setup-py-test,"<p>One possible solution is to simply extend the <code>test</code> command for <code>distutils</code>and <code>setuptools</code>/<code>distribute</code>.  This seems like a total kluge and way more complicated than I would prefer, but seems to correctly discover and run all the tests in my package upon running <code>python setup.py test</code>.  I'm holding off on selecting this as the answer to my question in hopes that someone will provide a more elegant solution :)</p>

<p>(Inspired by <a href=""https://docs.pytest.org/en/latest/goodpractices.html#integrating-with-setuptools-python-setup-py-test-pytest-runner"" rel=""nofollow noreferrer"">https://docs.pytest.org/en/latest/goodpractices.html#integrating-with-setuptools-python-setup-py-test-pytest-runner</a>)</p>

<p>Example <code>setup.py</code>:</p>

<pre><code>try:
    from setuptools import setup
except ImportError:
    from distutils.core import setup

def discover_and_run_tests():
    import os
    import sys
    import unittest

    # get setup.py directory
    setup_file = sys.modules['__main__'].__file__
    setup_dir = os.path.abspath(os.path.dirname(setup_file))

    # use the default shared TestLoader instance
    test_loader = unittest.defaultTestLoader

    # use the basic test runner that outputs to sys.stderr
    test_runner = unittest.TextTestRunner()

    # automatically discover all tests
    # NOTE: only works for python 2.7 and later
    test_suite = test_loader.discover(setup_dir)

    # run the test suite
    test_runner.run(test_suite)

try:
    from setuptools.command.test import test

    class DiscoverTest(test):

        def finalize_options(self):
            test.finalize_options(self)
            self.test_args = []
            self.test_suite = True

        def run_tests(self):
            discover_and_run_tests()

except ImportError:
    from distutils.core import Command

    class DiscoverTest(Command):
        user_options = []

        def initialize_options(self):
                pass

        def finalize_options(self):
            pass

        def run(self):
            discover_and_run_tests()

config = {
    'name': 'name',
    'version': 'version',
    'url': 'http://example.com',
    'cmdclass': {'test': DiscoverTest},
}

setup(**config)
</code></pre>
",cdwilson,Jan Tojnar,1370728757,1500416642,1500416642
http://stackoverflow.com/a/17039560/2726725,How to use a variable as a field name in mongodb-native findOne()?,43124,WillMcavoy,WillMcavoy,1370937020,1520103358,1520103358,https://stackoverflow.com/questions/17039018/how-to-use-a-variable-as-a-field-name-in-mongodb-native-findone,"<p>You need to set the key of the query object dynamically:</p>

<pre><code>var name = req.params.name;
var value = req.params.value;
var query = {};
query[name] = value;
collection.findOne(query, function (err, item) { ... });
</code></pre>

<p>When you do <code>{name: value}</code>, the key is the string <code>'name'</code> and not the value of the variable <code>name</code>.</p>
",maxdec,,1370939190,1370939190,0
http://stackoverflow.com/a/17040962/1931663,read pixel value in bmp file,84590,Sourav,,1329319344,1558605762,0,https://stackoverflow.com/questions/9296059/read-pixel-value-in-bmp-file,"<p>Code of readBMP function after padding fix:</p>

<pre><code>unsigned char* ReadBMP(char* filename)
{
    int i;
    FILE* f = fopen(filename, ""rb"");

    if(f == NULL)
        throw ""Argument Exception"";

    unsigned char info[54];
    fread(info, sizeof(unsigned char), 54, f); // read the 54-byte header

    // extract image height and width from header
    int width = *(int*)&amp;info[18];
    int height = *(int*)&amp;info[22];

    cout &lt;&lt; endl;
    cout &lt;&lt; ""  Name: "" &lt;&lt; filename &lt;&lt; endl;
    cout &lt;&lt; "" Width: "" &lt;&lt; width &lt;&lt; endl;
    cout &lt;&lt; ""Height: "" &lt;&lt; height &lt;&lt; endl;

    int row_padded = (width*3 + 3) &amp; (~3);
    unsigned char* data = new unsigned char[row_padded];
    unsigned char tmp;

    for(int i = 0; i &lt; height; i++)
    {
        fread(data, sizeof(unsigned char), row_padded, f);
        for(int j = 0; j &lt; width*3; j += 3)
        {
            // Convert (B, G, R) to (R, G, B)
            tmp = data[j];
            data[j] = data[j+2];
            data[j+2] = tmp;

            cout &lt;&lt; ""R: ""&lt;&lt; (int)data[j] &lt;&lt; "" G: "" &lt;&lt; (int)data[j+1]&lt;&lt; "" B: "" &lt;&lt; (int)data[j+2]&lt;&lt; endl;
        }
    }

    fclose(f);
    return data;
}
</code></pre>
",Krzysztof Kachniarz,,1370943516,1370943516,0
http://stackoverflow.com/a/17056530/1718155,function.name not supported in IE. ,12783,McKayla,Brian Webster,1312228932,1492654399,1312233148,https://stackoverflow.com/questions/6903762/function-name-not-supported-in-ie,"<p>You can use Object.defineProperty to add support for it on IE9+</p>

<pre><code>// Fix Function#name on browsers that do not support it (IE):
if (!(function f() {}).name) {
    Object.defineProperty(Function.prototype, 'name', {
        get: function() {
            var name = (this.toString().match(/^function\s*([^\s(]+)/) || [])[1];
            // For better performance only parse once, and then cache the
            // result through a new accessor for repeated access.
            Object.defineProperty(this, 'name', { value: name });
            return name;
        }
    });
}
</code></pre>
",Jrg Lehni,Jrg Lehni,1371001923,1489167707,1489167707
http://stackoverflow.com/a/17084893/717643,DateTime::CreateFromFormat for PHP 5.2.14,3585,Kody,,1371077033,1376383644,0,https://stackoverflow.com/questions/17076627/datetimecreatefromformat-for-php-5-2-14,"<p>You could extend the DateTime class and implement <code>createFromFormat()</code> yourself like this:-</p>

<pre><code>class MyDateTime extends DateTime
{
    public static function createFromFormat($format, $time, $timezone = null)
    {
        if(!$timezone) $timezone = new DateTimeZone(date_default_timezone_get());
        $version = explode('.', phpversion());
        if(((int)$version[0] &gt;= 5 &amp;&amp; (int)$version[1] &gt;= 2 &amp;&amp; (int)$version[2] &gt; 17)){
            return parent::createFromFormat($format, $time, $timezone);
        }
        return new DateTime(date($format, strtotime($time)), $timezone);
    }
}

$dateTime = MyDateTime::createFromFormat('Y-m-d', '2013-6-13');
var_dump($dateTime);
var_dump($dateTime-&gt;format('Y-m-d'));
</code></pre>

<p>This will work in all versions of PHP >= 5.2.0.</p>

<p>See here for a demo <a href=""http://3v4l.org/djucq"" rel=""nofollow"">http://3v4l.org/djucq</a></p>
",vascowhite,vascowhite,1371119625,1376383644,1376383644
http://stackoverflow.com/a/17108137/255982,Is there a workaround to open URLs containing underscores in Ruby?,23898,Arty,John Bachir,1299388421,1481231287,1348590525,https://stackoverflow.com/questions/5208851/is-there-a-workaround-to-open-urls-containing-underscores-in-ruby,"<p><code>URI</code> has an old-fashioned idea of what an url looks like.</p>

<p><a href=""http://scraperblog.blogspot.com/2013/06/replace-rubys-uri-parser-with.html"" rel=""noreferrer"">Lately I'm using <code>addressable</code></a> to get around that:</p>

<pre><code>require 'open-uri'
require 'addressable/uri'

class URI::Parser
  def split url
    a = Addressable::URI::parse url
    [a.scheme, a.userinfo, a.host, a.port, nil, a.path, nil, a.query, a.fragment]
  end
end

resp = open(""http://sub_domain.domain.com"") # Yay!
</code></pre>

<p>Don't forget to <code>gem install addressable</code></p>
",pguardiario,pguardiario,1371211644,1371212255,1371212255
http://stackoverflow.com/a/17112962/3771458,Get the new record primary key ID from mysql insert query?,212377,Amy Neville,,1371226237,1556702518,0,https://stackoverflow.com/questions/17112852/get-the-new-record-primary-key-id-from-mysql-insert-query,"<p>You need to use the <code>LAST_INSERT_ID()</code> function: <a href=""http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id"" rel=""noreferrer"">http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id</a></p>

<p>Eg:</p>

<pre><code>INSERT INTO table_name (col1, col2,...) VALUES ('val1', 'val2'...);
SELECT LAST_INSERT_ID();
</code></pre>

<p>This will get you back the <code>PRIMARY KEY</code> value of the last row that <em>you</em> inserted:</p>

<blockquote>
  <p>The ID that was generated is maintained in the server on a <em>per-connection basis</em>. This means that the value returned by the function to a given client is the first AUTO_INCREMENT value generated for most recent statement affecting an AUTO_INCREMENT column <em>by that client</em>.</p>
</blockquote>

<p>So the value returned by <code>LAST_INSERT_ID()</code> is per user and is <em>unaffected</em> by other queries that might be running on the server <em>from other users</em>.</p>
",Duncan Lock,Duncan Lock,1371226613,1540429050,1540429050
http://stackoverflow.com/a/17124446/1079728,How to get the first N sentences from text?,2415,flowfree,,1371304600,1371307153,0,https://stackoverflow.com/questions/17124403/how-to-get-the-first-n-sentences-from-text,"<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; text = ""Lorem ipsum, dolor sit amet. consectetur adipisicing elit; sed do eiusmod tempor. incididunt ut labore: et dolore magna aliqua. Ut enim ad. minim veniam.""
&gt;&gt;&gt; ' '.join(re.split(r'(?&lt;=[.:;])\s', text)[:4])
'Lorem ipsum, dolor sit amet. consectetur adipisicing elit; sed do eiusmod tempor. incididunt ut labore:'
</code></pre>

<p>Something like this would be more efficient, adjust to your needs by formatting the <code>4</code>:</p>

<pre><code>&gt;&gt;&gt; re.match(r'(?:[^.:;]+[.:;]){4}', text).group()
'Lorem ipsum, dolor sit amet. consectetur adipisicing elit; sed do eiusmod tempor. incididunt ut labore:'
</code></pre>
",jamylak,jamylak,1371304942,1371305263,1371305263
http://stackoverflow.com/a/17129256/356408,Http Servlet request lose params from POST body after read it once,84445,amuniz,stites,1334756450,1551184426,1444856149,https://stackoverflow.com/questions/10210645/http-servlet-request-lose-params-from-post-body-after-read-it-once,"<p>As an aside, an alternative way to solve this problem is to not use the filter chain and instead build your own interceptor component, perhaps using aspects, which can operate on the parsed request body. It will also likely be more efficient as you are only converting the request <code>InputStream</code> into your own model object once.</p>

<p>However, I still think it's reasonable to want to read the request body more than once particularly as the request moves through the filter chain. I would typically use filter chains for certain operations that I want to keep at the HTTP layer, decoupled from the service components.</p>

<p>As suggested by <a href=""https://stackoverflow.com/a/10211289/551467"">Will Hartung</a> I achieved this by extending <code>HttpServletRequestWrapper</code>, consuming the request <code>InputStream</code> and essentially caching the bytes.</p>

<pre><code>public class MultiReadHttpServletRequest extends HttpServletRequestWrapper {
  private ByteArrayOutputStream cachedBytes;

  public MultiReadHttpServletRequest(HttpServletRequest request) {
    super(request);
  }

  @Override
  public ServletInputStream getInputStream() throws IOException {
    if (cachedBytes == null)
      cacheInputStream();

      return new CachedServletInputStream();
  }

  @Override
  public BufferedReader getReader() throws IOException{
    return new BufferedReader(new InputStreamReader(getInputStream()));
  }

  private void cacheInputStream() throws IOException {
    /* Cache the inputstream in order to read it multiple times. For
     * convenience, I use apache.commons IOUtils
     */
    cachedBytes = new ByteArrayOutputStream();
    IOUtils.copy(super.getInputStream(), cachedBytes);
  }

  /* An inputstream which reads the cached request body */
  public class CachedServletInputStream extends ServletInputStream {
    private ByteArrayInputStream input;

    public CachedServletInputStream() {
      /* create a new input stream from the cached request body */
      input = new ByteArrayInputStream(cachedBytes.toByteArray());
    }

    @Override
    public int read() throws IOException {
      return input.read();
    }
  }
}
</code></pre>

<p>Now the request body can be read more than once by wrapping the original request before passing it through the filter chain:</p>

<pre><code>public class MyFilter implements Filter {
  @Override
  public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {

    /* wrap the request in order to read the inputstream multiple times */
    MultiReadHttpServletRequest multiReadRequest = new MultiReadHttpServletRequest((HttpServletRequest) request);

    /* here I read the inputstream and do my thing with it; when I pass the
     * wrapped request through the filter chain, the rest of the filters, and
     * request handlers may read the cached inputstream
     */
    doMyThing(multiReadRequest.getInputStream());
    //OR
    anotherUsage(multiReadRequest.getReader());
    chain.doFilter(multiReadRequest, response);
  }
}
</code></pre>

<p>This solution will also allow you to read the request body multiple times via the <code>getParameterXXX</code> methods because the underlying call is <code>getInputStream()</code>, which will of course read the cached request <code>InputStream</code>.</p>

<p><strong>Edit</strong></p>

<p>For newer version of <code>ServletInputStream</code> interface. You need to provide implementation of few more methods like <code>isReady</code>, <code>setReadListener</code> etc. Refer this <a href=""https://stackoverflow.com/a/30748533/3503187"">question</a> as provided in comment below.</p>
",pestrella,Ubercool,1371343827,1548228217,1548228217
http://stackoverflow.com/a/17129256/835696,Http Servlet request lose params from POST body after read it once,84445,amuniz,stites,1334756450,1551184426,1444856149,https://stackoverflow.com/questions/10210645/http-servlet-request-lose-params-from-post-body-after-read-it-once,"<p>As an aside, an alternative way to solve this problem is to not use the filter chain and instead build your own interceptor component, perhaps using aspects, which can operate on the parsed request body. It will also likely be more efficient as you are only converting the request <code>InputStream</code> into your own model object once.</p>

<p>However, I still think it's reasonable to want to read the request body more than once particularly as the request moves through the filter chain. I would typically use filter chains for certain operations that I want to keep at the HTTP layer, decoupled from the service components.</p>

<p>As suggested by <a href=""https://stackoverflow.com/a/10211289/551467"">Will Hartung</a> I achieved this by extending <code>HttpServletRequestWrapper</code>, consuming the request <code>InputStream</code> and essentially caching the bytes.</p>

<pre><code>public class MultiReadHttpServletRequest extends HttpServletRequestWrapper {
  private ByteArrayOutputStream cachedBytes;

  public MultiReadHttpServletRequest(HttpServletRequest request) {
    super(request);
  }

  @Override
  public ServletInputStream getInputStream() throws IOException {
    if (cachedBytes == null)
      cacheInputStream();

      return new CachedServletInputStream();
  }

  @Override
  public BufferedReader getReader() throws IOException{
    return new BufferedReader(new InputStreamReader(getInputStream()));
  }

  private void cacheInputStream() throws IOException {
    /* Cache the inputstream in order to read it multiple times. For
     * convenience, I use apache.commons IOUtils
     */
    cachedBytes = new ByteArrayOutputStream();
    IOUtils.copy(super.getInputStream(), cachedBytes);
  }

  /* An inputstream which reads the cached request body */
  public class CachedServletInputStream extends ServletInputStream {
    private ByteArrayInputStream input;

    public CachedServletInputStream() {
      /* create a new input stream from the cached request body */
      input = new ByteArrayInputStream(cachedBytes.toByteArray());
    }

    @Override
    public int read() throws IOException {
      return input.read();
    }
  }
}
</code></pre>

<p>Now the request body can be read more than once by wrapping the original request before passing it through the filter chain:</p>

<pre><code>public class MyFilter implements Filter {
  @Override
  public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {

    /* wrap the request in order to read the inputstream multiple times */
    MultiReadHttpServletRequest multiReadRequest = new MultiReadHttpServletRequest((HttpServletRequest) request);

    /* here I read the inputstream and do my thing with it; when I pass the
     * wrapped request through the filter chain, the rest of the filters, and
     * request handlers may read the cached inputstream
     */
    doMyThing(multiReadRequest.getInputStream());
    //OR
    anotherUsage(multiReadRequest.getReader());
    chain.doFilter(multiReadRequest, response);
  }
}
</code></pre>

<p>This solution will also allow you to read the request body multiple times via the <code>getParameterXXX</code> methods because the underlying call is <code>getInputStream()</code>, which will of course read the cached request <code>InputStream</code>.</p>

<p><strong>Edit</strong></p>

<p>For newer version of <code>ServletInputStream</code> interface. You need to provide implementation of few more methods like <code>isReady</code>, <code>setReadListener</code> etc. Refer this <a href=""https://stackoverflow.com/a/30748533/3503187"">question</a> as provided in comment below.</p>
",pestrella,Ubercool,1371343827,1548228217,1548228217
http://stackoverflow.com/a/1714899/1885921,Query-string encoding of a Javascript Object,307798,Napolux,Sheharyar,1257941257,1562777786,1488691176,https://stackoverflow.com/questions/1714786/query-string-encoding-of-a-javascript-object,"<p>like this?</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>serialize = function(obj) {
  var str = [];
  for (var p in obj)
    if (obj.hasOwnProperty(p)) {
      str.push(encodeURIComponent(p) + ""="" + encodeURIComponent(obj[p]));
    }
  return str.join(""&amp;"");
}

console.log(serialize({
  foo: ""hi there"",
  bar: ""100%""
}));
// foo=hi%20there&amp;bar=100%25</code></pre>
</div>
</div>
</p>

<p>Edit: this one also converts recursive objects (using php ""array"" notation for the query string)</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>serialize = function(obj, prefix) {
  var str = [],
    p;
  for (p in obj) {
    if (obj.hasOwnProperty(p)) {
      var k = prefix ? prefix + ""["" + p + ""]"" : p,
        v = obj[p];
      str.push((v !== null &amp;&amp; typeof v === ""object"") ?
        serialize(v, k) :
        encodeURIComponent(k) + ""="" + encodeURIComponent(v));
    }
  }
  return str.join(""&amp;"");
}

console.log(serialize({
  foo: ""hi there"",
  bar: {
    blah: 123,
    quux: [1, 2, 3]
  }
}));
// foo=hi%20there&amp;bar%5Bblah%5D=123&amp;bar%5Bquux%5D%5B0%5D=1&amp;bar%5Bquux%5D%5B1%5D=2&amp;bar%5Bquux%5D%5B2%5D=3</code></pre>
</div>
</div>
</p>
",user187291,Anoop H.N,1257942686,1520255283,1520255283
http://stackoverflow.com/a/1714899/3347292,Query-string encoding of a Javascript Object,307798,Napolux,Sheharyar,1257941257,1562777786,1488691176,https://stackoverflow.com/questions/1714786/query-string-encoding-of-a-javascript-object,"<p>like this?</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>serialize = function(obj) {
  var str = [];
  for (var p in obj)
    if (obj.hasOwnProperty(p)) {
      str.push(encodeURIComponent(p) + ""="" + encodeURIComponent(obj[p]));
    }
  return str.join(""&amp;"");
}

console.log(serialize({
  foo: ""hi there"",
  bar: ""100%""
}));
// foo=hi%20there&amp;bar=100%25</code></pre>
</div>
</div>
</p>

<p>Edit: this one also converts recursive objects (using php ""array"" notation for the query string)</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>serialize = function(obj, prefix) {
  var str = [],
    p;
  for (p in obj) {
    if (obj.hasOwnProperty(p)) {
      var k = prefix ? prefix + ""["" + p + ""]"" : p,
        v = obj[p];
      str.push((v !== null &amp;&amp; typeof v === ""object"") ?
        serialize(v, k) :
        encodeURIComponent(k) + ""="" + encodeURIComponent(v));
    }
  }
  return str.join(""&amp;"");
}

console.log(serialize({
  foo: ""hi there"",
  bar: {
    blah: 123,
    quux: [1, 2, 3]
  }
}));
// foo=hi%20there&amp;bar%5Bblah%5D=123&amp;bar%5Bquux%5D%5B0%5D=1&amp;bar%5Bquux%5D%5B1%5D=2&amp;bar%5Bquux%5D%5B2%5D=3</code></pre>
</div>
</div>
</p>
",user187291,Anoop H.N,1257942686,1520255283,1520255283
http://stackoverflow.com/a/17176843/315168,Can Alembic Autogenerate column alterations?,5705,Dexter,Dexter,1371574493,1476683762,1371581428,https://stackoverflow.com/questions/17174636/can-alembic-autogenerate-column-alterations,"<p>Looks like I found the answer on reddit's /r/flask.</p>

<p><a href=""http://www.reddit.com/r/flask/comments/1glejl/alembic_autogenerate_column_changes/cale9o0"" rel=""noreferrer"">http://www.reddit.com/r/flask/comments/1glejl/alembic_autogenerate_column_changes/cale9o0</a></p>

<p>Just add ""compare_type=True"" to context.configure() parameters inside your env.py's ""run_migrations_online"" function.</p>

<pre><code>    context.configure(
                connection=connection,
                target_metadata=target_metadata,
                compare_type=True
                )
</code></pre>
",Dexter,zengr,1371582221,1396855740,1396855740
http://stackoverflow.com/a/171784/1657047,What is the best way to get all the divisors of a number?,115625,Andrea Ambu,Community,1223200138,1556264990,1495535491,https://stackoverflow.com/questions/171765/what-is-the-best-way-to-get-all-the-divisors-of-a-number,"<p>Given your factorGenerator function, here is a divisorGen that should work:</p>

<pre><code>def divisorGen(n):
    factors = list(factorGenerator(n))
    nfactors = len(factors)
    f = [0] * nfactors
    while True:
        yield reduce(lambda x, y: x*y, [factors[x][0]**f[x] for x in range(nfactors)], 1)
        i = 0
        while True:
            f[i] += 1
            if f[i] &lt;= factors[i][1]:
                break
            f[i] = 0
            i += 1
            if i &gt;= nfactors:
                return
</code></pre>

<p>The overall efficiency of this algorithm will depend entirely on the efficiency of the factorGenerator.</p>
",Greg Hewgill,Greg Hewgill,1223201360,1432796494,1432796494
http://stackoverflow.com/a/1719155/148668,What is the right approach when using STL container for median calculation?,26715,sharkin,xskxzr,1257985952,1559719530,1559719530,https://stackoverflow.com/questions/1719070/what-is-the-right-approach-when-using-stl-container-for-median-calculation,"<p>Any random-access container (like <code>std::vector</code>) can be sorted with the standard <code>std::sort</code> algorithm, available in the <code>&lt;algorithm&gt;</code> header.</p>

<p>For finding the median, it would be quicker to use <code>std::nth_element</code>; this does enough of a sort to put one chosen element in the correct position, but doesn't completely sort the container. So you could find the median like this:</p>

<pre><code>int median(vector&lt;int&gt; &amp;v)
{
    size_t n = v.size() / 2;
    nth_element(v.begin(), v.begin()+n, v.end());
    return v[n];
}
</code></pre>
",Mike Seymour,Mike Seymour,1257987011,1327877391,1327877391
http://stackoverflow.com/a/17195806/1931663,Whats the best way to check if a file exists in C++? (cross platform),99679,c0m4,Community,1225962891,1551740578,1495542375,https://stackoverflow.com/questions/268023/what-s-the-best-way-to-check-if-a-file-exists-in-c-cross-platform,"<p>Another possibility consists in using the <code>good()</code> function in the stream:</p>

<pre><code>#include &lt;fstream&gt;     
bool checkExistence(const char* filename)
{
     ifstream Infield(filename);
     return Infield.good();
}
</code></pre>
",Samer,Samer,1371657269,1438176477,1438176477
http://stackoverflow.com/a/17202968/778449,Merging some sorted lists with unknown order sequence,1235,Gabriel,jcsanyi,1294655831,1372282745,1371751694,https://stackoverflow.com/questions/4645874/merging-some-sorted-lists-with-unknown-order-sequence,"<p>This can be solved with a <a href=""http://en.wikipedia.org/wiki/Topological_sorting"" rel=""noreferrer""><strong>Topological Sort</strong></a> algorithm.</p>

<p>If you consider each of your input sequences to be a path through a directed graph, a topological sort will order your set of nodes from left to right in such a way that each directed edge points to the right.
<img src=""https://i.stack.imgur.com/CQzOi.png"" alt=""Diagram of a directed graph after topological sorting""></p>

<p>The wikipedia page on <a href=""http://en.wikipedia.org/wiki/Topological_sorting"" rel=""noreferrer"">Topological Sorting</a> includes this algorithm, first described by Arthur Kahn in 1962:</p>

<pre><code>L  Empty list that will contain the sorted elements
S  Set of all nodes with no incoming edges
while S is non-empty do
    remove a node n from S
    insert n into L
    for each node m with an edge e from n to m do
        remove edge e from the graph
        if m has no other incoming edges then
            insert m into S
if graph has edges then
    return error (graph has at least one cycle)
else 
    return L (a topologically sorted order)
</code></pre>

<p>This algorithm, as written, doesn't actually fail if it finds ambiguous sequences, but that's easy to add by inserting a check at the beginning of the loop, like this:</p>

<pre><code>...
while S is non-empty do
    if S contains more than 1 item
        return error (inputs are ambiguous)
    remove a node n from S
    ...
</code></pre>

<p>I don't know what language you're working in, but I've thrown together this PHP implementation as a proof of concept:</p>

<pre class=""lang-php prettyprint-override""><code>function mergeSequences($sequences, $detectAmbiguity = false) {

    // build a list of nodes, with each node recording a list of all incoming edges
    $nodes = array();
    foreach ($sequences as $seq) {
        foreach ($seq as $i =&gt; $item) {
            if (!isset($nodes[$item])) $nodes[$item] = array();
            if ($i !== 0) {
                $nodes[$item][] = $seq[$i-1];
            }
        }
    }

    // build a list of all nodes with no incoming edges
    $avail = array();
    foreach ($nodes as $item =&gt; $edges) {
        if (count($edges) == 0) {
            $avail[] = $item;
            unset($nodes[$item]);
        }
    }

    $sorted = array();
    $curr = '(start)';
    while (count($avail) &gt; 0) {

        // optional: check for ambiguous sequence
        if ($detectAmbiguity &amp;&amp; count($avail) &gt; 1) {
           throw new Exception(""Ambiguous sequence: {$curr} can be followed by "" . join(' or ', $avail));
        }

        // get the next item and add it to the sorted list
        $curr = array_pop($avail);
        $sorted[] = $curr;

        // remove all edges from the currently selected items to all others
        foreach ($nodes as $item =&gt; $edges) {
            $nodes[$item] = array_diff($edges, array($curr));                
            if (count($nodes[$item]) == 0) {
                $avail[] = $item;
                unset($nodes[$item]);
            }
        }

    }

    if (count($nodes) &gt; 0) {
        throw new Exception('Sequences contain conflicting information. Cannot continue after: ' . join(', ', $sorted));
    }

    return $sorted;
}
</code></pre>

<p>You can call the function like this:</p>

<pre class=""lang-php prettyprint-override""><code>$input = array(
    array('XS', 'M', 'L', 'XL'),
    array('S', 'M', 'XXL'),
    array('XXS', 'XS', 'S', 'L'),
);
echo(join(', ', mergeSequences($input)));
echo(join(', ', mergeSequences($input, true)));
</code></pre>

<p>To get the following output:</p>

<pre><code>XXS, XS, S, M, XXL, L, XL
Uncaught exception 'Exception' with message 'Ambiguous sequence: M can be followed by L or XXL'
</code></pre>
",jcsanyi,jcsanyi,1371684228,1371685822,1371685822
http://stackoverflow.com/a/17203834/99876,What are some approaches to outputting a Python data structure to reStructuredText,2039,cieplak,,1341501828,1528575821,0,https://stackoverflow.com/questions/11347505/what-are-some-approaches-to-outputting-a-python-data-structure-to-restructuredte,"<p>@cieplak's answer was great. I refined it a bit so that columns are sized independently</p>

<pre><code>    print make_table( [      ['Name', 'Favorite Food', 'Favorite Subject'],
                             ['Joe', 'Hamburgrs', 'I like things with really long names'],
                             ['Jill', 'Salads', 'American Idol'],
                             ['Sally', 'Tofu', 'Math']])

    ===== ============= ==================================== 
    Name  Favorite Food Favorite Subject                     
    ===== ============= ==================================== 
    Joe   Hamburgrs     I like things with really long names 
    ----- ------------- ------------------------------------ 
    Jill  Salads        American Idol                        
    ----- ------------- ------------------------------------ 
    Sally Tofu          Math                                 
    ===== ============= ==================================== 
</code></pre>

<p>Here is the code</p>

<pre><code>def make_table(grid):
    max_cols = [max(out) for out in map(list, zip(*[[len(item) for item in row] for row in grid]))]
    rst = table_div(max_cols, 1)

    for i, row in enumerate(grid):
        header_flag = False
        if i == 0 or i == len(grid)-1: header_flag = True
        rst += normalize_row(row,max_cols)
        rst += table_div(max_cols, header_flag )
    return rst

def table_div(max_cols, header_flag=1):
    out = """"
    if header_flag == 1:
        style = ""=""
    else:
        style = ""-""

    for max_col in max_cols:
        out += max_col * style + "" ""

    out += ""\n""
    return out


def normalize_row(row, max_cols):
    r = """"
    for i, max_col in enumerate(max_cols):
        r += row[i] + (max_col  - len(row[i]) + 1) * "" ""

    return r + ""\n""
</code></pre>
",Gourneau,,1371690893,1371690893,0
http://stackoverflow.com/a/17215011/778449,Programmatically configure LogBack appender,55163,user1732480,,1370326395,1533349781,0,https://stackoverflow.com/questions/16910955/programmatically-configure-logback-appender,"<p>Here a simple example that works for me (note that I use the FileAppender in this example)</p>

<pre><code>import org.slf4j.LoggerFactory;

import ch.qos.logback.classic.Level;
import ch.qos.logback.classic.Logger;
import ch.qos.logback.classic.LoggerContext;
import ch.qos.logback.classic.encoder.PatternLayoutEncoder;
import ch.qos.logback.classic.spi.ILoggingEvent;
import ch.qos.logback.core.FileAppender;

public class Loggerutils {

    public static void main(String[] args) {
          Logger foo = createLoggerFor(""foo"", ""foo.log"");
          Logger bar = createLoggerFor(""bar"", ""bar.log"");
          foo.info(""test"");
          bar.info(""bar"");
    }

    private static Logger createLoggerFor(String string, String file) {
          LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();
          PatternLayoutEncoder ple = new PatternLayoutEncoder();

          ple.setPattern(""%date %level [%thread] %logger{10} [%file:%line] %msg%n"");
          ple.setContext(lc);
          ple.start();
          FileAppender&lt;ILoggingEvent&gt; fileAppender = new FileAppender&lt;ILoggingEvent&gt;();
          fileAppender.setFile(file);
          fileAppender.setEncoder(ple);
          fileAppender.setContext(lc);
          fileAppender.start();

          Logger logger = (Logger) LoggerFactory.getLogger(string);
          logger.addAppender(fileAppender);
          logger.setLevel(Level.DEBUG);
          logger.setAdditive(false); /* set to true if root should log too */

          return logger;
    }

}
</code></pre>
",reto,reto,1371735148,1385459130,1385459130
http://stackoverflow.com/a/17246463/2299887,ListView: TextView with LinkMovementMethod makes list item unclickable?,18953,Patrick Boos,rekire,1324283304,1493197485,1386334146,https://stackoverflow.com/questions/8558732/listview-textview-with-linkmovementmethod-makes-list-item-unclickable,"<p>babay's answer is very nice. But if you don't want to subclass TextView and don't care about LinkMovementMethod features other than clicking on links you could use this approach (this is basically copying LinkMovementMethod's onTouch functionality into TextView's OnTouchListener):</p>

<pre><code>        myTextView.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                boolean ret = false;
                CharSequence text = ((TextView) v).getText();
                Spannable stext = Spannable.Factory.getInstance().newSpannable(text);
                TextView widget = (TextView) v;
                int action = event.getAction();

                if (action == MotionEvent.ACTION_UP ||
                        action == MotionEvent.ACTION_DOWN) {
                    int x = (int) event.getX();
                    int y = (int) event.getY();

                    x -= widget.getTotalPaddingLeft();
                    y -= widget.getTotalPaddingTop();

                    x += widget.getScrollX();
                    y += widget.getScrollY();

                    Layout layout = widget.getLayout();
                    int line = layout.getLineForVertical(y);
                    int off = layout.getOffsetForHorizontal(line, x);

                    ClickableSpan[] link = stext.getSpans(off, off, ClickableSpan.class);

                    if (link.length != 0) {
                        if (action == MotionEvent.ACTION_UP) {
                            link[0].onClick(widget);
                        }
                        ret = true;
                    }
                }
                return ret;
            }
        });
</code></pre>

<p>Just assign this listener to your TextView in your list adapter getView() method.</p>
",Dennis K,Dennis K,1371864380,1371866287,1371866287
http://stackoverflow.com/a/17252228/546491,Multiple View paths on Node.js + Express,23017,Moshe Simantov,,1341333415,1482760611,0,https://stackoverflow.com/questions/11315351/multiple-view-paths-on-node-js-express,"<p>In addition to @user85461 answer, the require view part did not work for me. 
What i did: removed the path stuff and moved it all to a module i could require,
patch.ViewEnableMultiFolders.js (Works with current express):</p>

<pre><code>function ViewEnableMultiFolders(app) {
    // Monkey-patch express to accept multiple paths for looking up views.
    // this path may change depending on your setup.
    var lookup_proxy = app.get('view').prototype.lookup;

    app.get('view').prototype.lookup = function(viewName) {
        var context, match;
        if (this.root instanceof Array) {
            for (var i = 0; i &lt; this.root.length; i++) {
                context = {root: this.root[i]};
                match = lookup_proxy.call(context, viewName);
                if (match) {
                    return match;
                }
            }
            return null;
        }
        return lookup_proxy.call(this, viewName);
    };
}

module.exports.ViewEnableMultiFolders = ViewEnableMultiFolders;
</code></pre>

<p>and used:</p>

<pre><code>var Patch = require('patch.ViewEnableMultiFolders.js');
Patch.ViewEnableMultiFolders(app);
app.set('views', ['./htdocs/views', '/htdocs/tpls']);
</code></pre>
",BananaAcid,BananaAcid,1371914279,1372028067,1372028067
http://stackoverflow.com/a/17310199/1170370,PyYaml dumping things backwards,3649,Matt Habel,,1333152848,1372210873,0,https://stackoverflow.com/questions/9951852/pyyaml-dumping-things-backwards,"<p>If the order if preferred in dump, below code could be used</p>

<pre><code>import yaml

class MyDict(dict):
   def to_omap(self):
      return [('question', self['question']), ('answer', self['answer'])]

def represent_omap(dumper, data):
   return dumper.represent_mapping(u'tag:yaml.org,2002:map', data.to_omap())

yaml.add_representer(MyDict, represent_omap)

questions = [
   MyDict({'answer': 'My name is Bob.', 'question': 'What is your name?'}),
   MyDict({'question': 'How are you?', 'answer': 'I am fine.'}),
]
print yaml.dump(questions, default_flow_style=False)
</code></pre>

<p>The output is:</p>

<pre><code>- question: What is your name?
  answer: My name is Bob.
- question: How are you?
  answer: I am fine.
</code></pre>
",Congbin Guo,Congbin Guo,1372210481,1372210873,1372210873
http://stackoverflow.com/a/1732454/2720566,RegEx match open tags except XHTML self-contained tags,2584735,Jeff,richarbernal,1258151906,1556037876,1338064625,https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags,"<p>You can't parse [X]HTML with regex. Because HTML can't be parsed by regex. Regex is not a tool that can be used to correctly parse HTML. As I have answered in HTML-and-regex questions here so many times before, the use of regex will not allow you to consume HTML. Regular expressions are a tool that is insufficiently sophisticated to understand the constructs employed by HTML. HTML is not a regular language and hence cannot be parsed by regular expressions. Regex queries are not equipped to break down HTML into its meaningful parts. so many times but it is not getting to me. Even enhanced irregular regular expressions as used by Perl are not up to the task of parsing HTML. You will never make me crack. HTML is a language of sufficient complexity that it cannot be parsed by regular expressions. Even Jon Skeet cannot parse HTML using regular expressions. Every time you attempt to parse HTML with regular expressions, the unholy child weeps the blood of virgins, and Russian hackers pwn your webapp. Parsing HTML with regex summons tainted souls into the realm of the living. HTML and regex go together like love, marriage, and ritual infanticide. The &lt;center> cannot hold it is too late. The force of regex and HTML together in the same conceptual space will destroy your mind like so much watery putty. If you parse HTML with regex you are giving in to Them and their blasphemous ways which doom us all to inhuman toil for the One whose Name cannot be expressed in the Basic Multilingual Plane, he comes. HTML-plus-regexp will liquify the nerves of the sentient whilst you observe, your psyche withering in the onslaught of horror. Regex-based HTML parsers are the cancer that is killing StackOverflow <i>it is too late it is too late we cannot be saved</i> the trangession of a child ensures regex will consume all living tissue (except for HTML which it cannot, as previously prophesied) <i>dear lord help us how can anyone survive this scourge</i> using regex to parse HTML has doomed humanity to an eternity of dread torture and security holes <i>using rege</i>x as a tool to process HTML establishes a brea<i>ch between this world</i> and the dread realm of corrupt entities (like SGML entities, but <i>more corrupt) a mere glimp</i>se of the world of reg<b>ex parsers for HTML will ins</b>tantly transport a p<i>rogrammer's consciousness i</i>nto a w<i>orl</i>d of ceaseless screaming, he comes<strike>, the pestilent sl</strike>ithy regex-infection wil<b>l devour your HT</b>ML parser, application and existence for all time like Visual Basic only worse <i>he comes he com</i>es <i>do not fi</i>ght h<b>e comes, hi</b>s unholy radiance de<i>stroying all enlightenment, HTML tags <b>leaking from your eyes like liq</b>uid p</i>ain, the song of regular expre<strike>ssion parsing </strike>will exti<i>nguish the voices of mor<b>tal man from the sp</b>here I can see it can you see it it is beautiful t</i>he f<code>inal snuf</code>fing o<i>f the lie<b>s of Man ALL IS LOST A</b></i><b>LL IS L</b>OST th<i>e pony he come</i>s he com<strike>es he co</strike><b><strike>me</strike>s t<i>he</i> ich</b>or permeat<i>es al</i>l MY FAC<i>E MY FACE h god n<b>o NO NOO</b></i><b>OO N</b> stop t<i>he an*gl</i>es<code> are</code> n<b>ot real ZALG IS T</b>O TH<b>E PONY HE COME</b>S</p>

<hr>

<p>Have you tried using an XML parser instead?</p>

<hr>

<blockquote>
  <p><strong>Moderator's Note</strong></p>
  
  <p>This post is locked to prevent inappropriate edits to its content. The post looks exactly as it is supposed to look - there are no problems with its content. Please do not flag it for our attention.</p>
</blockquote>
",bobince,animuson,1258153470,1404875226,1404875226
http://stackoverflow.com/a/17336944/1000543,How to keep onItemSelected from firing off on a newly instantiated Spinner?,127399,FauxReal,CaptJak,1270142286,1511390585,1463348930,https://stackoverflow.com/questions/2562248/how-to-keep-onitemselected-from-firing-off-on-a-newly-instantiated-spinner,"<p>The use of Runnables is completely incorrect. </p>

<p>Use <code>setSelection(position, false);</code> in the initial selection before <code>setOnItemSelectedListener(listener)</code> </p>

<p>This way you set your selection with no animation which causes the on item selected listener to be called. But the listener is null so nothing is run. Then your listener is assigned. </p>

<p>So follow this exact sequence: </p>

<pre><code>Spinner s = (Spinner)Util.findViewById(view, R.id.sound, R.id.spinner);
s.setAdapter(adapter);
s.setSelection(position, false);
s.setOnItemSelectedListener(listener);
</code></pre>
",Brad,,1372317543,1372317543,0
http://stackoverflow.com/a/1734255/36850,What is the equivalent of JavaScript&#39;s encodeURIcomponent in PHP?,54558,Gal,philfreo,1258205848,1552559326,1285001659,https://stackoverflow.com/questions/1734250/what-is-the-equivalent-of-javascripts-encodeuricomponent-in-php,"<p>Try <a href=""http://php.net/rawurlencode"" rel=""noreferrer""><code>rawurlencode</code></a>. Or to be more precise:</p>

<pre><code>function encodeURIComponent($str) {
    $revert = array('%21'=&gt;'!', '%2A'=&gt;'*', '%27'=&gt;""'"", '%28'=&gt;'(', '%29'=&gt;')');
    return strtr(rawurlencode($str), $revert);
}
</code></pre>

<p>This function works exactly <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent"" rel=""noreferrer"">how <code>encodeURIComponent</code> is defined</a>:</p>

<blockquote>
  <p><code>encodeURIComponent</code> escapes all characters except the following: alphabetic, decimal digits, <code>-</code> <code>_</code> <code>.</code> <code>!</code> <code>~</code> <code>*</code> <code>'</code> <code>(</code> <code>)</code></p>
</blockquote>
",Gumbo,pikachu0,1258205960,1392007737,1392007737
http://stackoverflow.com/a/1734255/526985,What is the equivalent of JavaScript&#39;s encodeURIcomponent in PHP?,54558,Gal,philfreo,1258205848,1552559326,1285001659,https://stackoverflow.com/questions/1734250/what-is-the-equivalent-of-javascripts-encodeuricomponent-in-php,"<p>Try <a href=""http://php.net/rawurlencode"" rel=""noreferrer""><code>rawurlencode</code></a>. Or to be more precise:</p>

<pre><code>function encodeURIComponent($str) {
    $revert = array('%21'=&gt;'!', '%2A'=&gt;'*', '%27'=&gt;""'"", '%28'=&gt;'(', '%29'=&gt;')');
    return strtr(rawurlencode($str), $revert);
}
</code></pre>

<p>This function works exactly <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent"" rel=""noreferrer"">how <code>encodeURIComponent</code> is defined</a>:</p>

<blockquote>
  <p><code>encodeURIComponent</code> escapes all characters except the following: alphabetic, decimal digits, <code>-</code> <code>_</code> <code>.</code> <code>!</code> <code>~</code> <code>*</code> <code>'</code> <code>(</code> <code>)</code></p>
</blockquote>
",Gumbo,pikachu0,1258205960,1392007737,1392007737
http://stackoverflow.com/a/17343582/157882,Implement converters for entities with Java Generics,9706,Marco Righele,BalusC,1372335693,1495530185,1372337809,https://stackoverflow.com/questions/17343032/implement-converters-for-entities-with-java-generics,"<p>Easiest would be to let all your JPA entities extend from a base entity like this:</p>

<pre><code>public abstract class BaseEntity&lt;T extends Number&gt; implements Serializable {

    private static final long serialVersionUID = 1L;

    public abstract T getId();

    public abstract void setId(T id);

    @Override
    public int hashCode() {
        return (getId() != null) 
            ? (getClass().getSimpleName().hashCode() + getId().hashCode())
            : super.hashCode();
    }

    @Override
    public boolean equals(Object other) {
        return (other != null &amp;&amp; getId() != null
                &amp;&amp; other.getClass().isAssignableFrom(getClass()) 
                &amp;&amp; getClass().isAssignableFrom(other.getClass())) 
            ? getId().equals(((BaseEntity&lt;?&gt;) other).getId())
            : (other == this);
    }

    @Override
    public String toString() {
        return String.format(""%s[id=%d]"", getClass().getSimpleName(), getId());
    }

}
</code></pre>

<p>Note that it's important to have a proper <code>equals()</code> (and <code>hashCode()</code>), otherwise you will face <a href=""https://stackoverflow.com/questions/9069379/validation-error-value-is-not-valid"">Validation Error: Value is not valid</a>. The <code>Class#isAssignableFrom()</code> tests are to avoid failing tests on e.g. Hibernate based proxies without the need to fall back to Hibernate-specific <a href=""https://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Hibernate.html#getClass(java.lang.Object)"" rel=""nofollow noreferrer""><code>Hibernate#getClass(Object)</code></a> helper method.</p>

<p>And have a base service like this (yes, I'm ignoring the fact that you're using Spring; it's just to give the base idea):</p>

<pre><code>@Stateless
public class BaseService {

    @PersistenceContext
    private EntityManager em;

    public BaseEntity&lt;? extends Number&gt; find(Class&lt;BaseEntity&lt;? extends Number&gt;&gt; type, Number id) {
        return em.find(type, id);
    }

}
</code></pre>

<p>And implement the converter as follows:</p>

<pre><code>@ManagedBean
@ApplicationScoped
@SuppressWarnings({ ""rawtypes"", ""unchecked"" }) // We don't care about BaseEntity's actual type here.
public class BaseEntityConverter implements Converter {

    @EJB
    private BaseService baseService;

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        if (value == null) {
            return """";
        }

        if (modelValue instanceof BaseEntity) {
            Number id = ((BaseEntity) modelValue).getId();
            return (id != null) ? id.toString() : null;
        } else {
            throw new ConverterException(new FacesMessage(String.format(""%s is not a valid User"", modelValue)), e);
        }
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        if (value == null || value.isEmpty()) {
            return null;
        }

        try {
            Class&lt;?&gt; type = component.getValueExpression(""value"").getType(context.getELContext());
            return baseService.find((Class&lt;BaseEntity&lt;? extends Number&gt;&gt;) type, Long.valueOf(submittedValue));
        } catch (NumberFormatException e) {
            throw new ConverterException(new FacesMessage(String.format(""%s is not a valid ID of BaseEntity"", submittedValue)), e);
        }
    }

}
</code></pre>

<p>Note that it's registered as a <code>@ManagedBean</code> instead of a <code>@FacesConverter</code>. This trick allows you to inject a service in the converter via e.g. <code>@EJB</code>. See also <a href=""https://stackoverflow.com/questions/7665673/how-to-inject-ejb-persistencecontext-inject-autowired-etc-in-facesconve"">How to inject @EJB, @PersistenceContext, @Inject, @Autowired, etc in @FacesConverter?</a> So you need to reference it as <code>converter=""#{baseEntityConverter}""</code> instead of <code>converter=""baseEntityConverter""</code>.</p>

<p>If you happen to use such a converter more than often for <a href=""http://docs.oracle.com/javaee/6/api/javax/faces/component/UISelectOne.html"" rel=""nofollow noreferrer""><code>UISelectOne</code></a>/<a href=""http://docs.oracle.com/javaee/6/api/javax/faces/component/UISelectMany.html"" rel=""nofollow noreferrer""><code>UISelectMany</code></a> components (<code>&lt;h:selectOneMenu&gt;</code> and friends), you may find <a href=""http://omnifaces.org"" rel=""nofollow noreferrer"">OmniFaces</a> <a href=""http://showcase.omnifaces.org/converters/SelectItemsConverter"" rel=""nofollow noreferrer""><code>SelectItemsConverter</code></a> much more useful. It converts based on the values available in <code>&lt;f:selectItems&gt;</code> instead of making (potentially expensive) DB calls everytime.</p>
",BalusC,Community,1372337201,1444117216,1495540519
http://stackoverflow.com/a/17355238/507629,Generating a drop down list of timezones with PHP,102180,Xeoncross,0x6adb015,1258085248,1547716522,1495719123,https://stackoverflow.com/questions/1727077/generating-a-drop-down-list-of-timezones-with-php,"<p>Following user210179's example above, I've written the following function to generate me a list of all timezones with their offsets:</p>

<pre><code>function generate_timezone_list()
{
    static $regions = array(
        DateTimeZone::AFRICA,
        DateTimeZone::AMERICA,
        DateTimeZone::ANTARCTICA,
        DateTimeZone::ASIA,
        DateTimeZone::ATLANTIC,
        DateTimeZone::AUSTRALIA,
        DateTimeZone::EUROPE,
        DateTimeZone::INDIAN,
        DateTimeZone::PACIFIC,
    );

    $timezones = array();
    foreach( $regions as $region )
    {
        $timezones = array_merge( $timezones, DateTimeZone::listIdentifiers( $region ) );
    }

    $timezone_offsets = array();
    foreach( $timezones as $timezone )
    {
        $tz = new DateTimeZone($timezone);
        $timezone_offsets[$timezone] = $tz-&gt;getOffset(new DateTime);
    }

    // sort timezone by offset
    asort($timezone_offsets);

    $timezone_list = array();
    foreach( $timezone_offsets as $timezone =&gt; $offset )
    {
        $offset_prefix = $offset &lt; 0 ? '-' : '+';
        $offset_formatted = gmdate( 'H:i', abs($offset) );

        $pretty_offset = ""UTC${offset_prefix}${offset_formatted}"";

        $timezone_list[$timezone] = ""(${pretty_offset}) $timezone"";
    }

    return $timezone_list;
}
</code></pre>

<p>This will generate an array looking like:</p>

<pre><code>[Pacific/Midway] =&gt; (UTC-11:00) Pacific/Midway
[Pacific/Pago_Pago] =&gt; (UTC-11:00) Pacific/Pago_Pago
[Pacific/Niue] =&gt; (UTC-11:00) Pacific/Niue
[Pacific/Honolulu] =&gt; (UTC-10:00) Pacific/Honolulu
[Pacific/Fakaofo] =&gt; (UTC-10:00) Pacific/Fakaofo

</code></pre>

<p>It's currently sorted by offsets, but you can easily sort by the timezone name by doing a <code>ksort()</code> instead of <code>asort()</code>.</p>
",Toland Hon,,1372378061,1372378061,0
http://stackoverflow.com/a/17364366/386210,ImportError when using Haystack 2.0.0 with Django 1.5 and Gunicorn WSGI,1037,Tom,,1370968946,1372421101,0,https://stackoverflow.com/questions/17049426/importerror-when-using-haystack-2-0-0-with-django-1-5-and-gunicorn-wsgi,"<p>I don't use gunicorn, but I had the same problem when I used the HAYSTACK_SIGNAL_PROCESSOR setting to point to a custom class that I wrote.  That class imported one of my models, which eventually propagated up the import chain, to import my settings module, thus causing a circular import.</p>

<p>When using a setting such as HAYSTACK_SIGNAL_PROCESSOR that points to a class, make sure that class standsalone, and doesn't import either directly or indirectly the Django settings file.</p>
",Steve Bradshaw,,1372421101,1372421101,0
http://stackoverflow.com/a/17365740/262462,Html List tag not working in android textview. what can i do?,59504,Praveen,Simon MKenzie,1277909434,1521705615,1369444955,https://stackoverflow.com/questions/3150400/html-list-tag-not-working-in-android-textview-what-can-i-do,"<p>Full sample project is located at <a href=""https://bitbucket.org/Kuitsi/android-textview-html-list"" rel=""noreferrer"">https://bitbucket.org/Kuitsi/android-textview-html-list</a>.<br>
Sample picture is available at <a href=""https://kuitsi.bitbucket.io/stackoverflow3150400_screen.png"" rel=""noreferrer"">https://kuitsi.bitbucket.io/stackoverflow3150400_screen.png</a></p>

<p>This solution is closest to <a href=""https://stackoverflow.com/a/16169511/262462"">masha's answer</a>. Some code is also taken from inner class <code>android.text.Html.HtmlToSpannedConverter</code>. It supports nested ordered and unordered lists but too long texts in ordered lists are still aligned with item number rather than text. Mixed lists (ol and ul) needs some work too. Sample project contains implementation of <a href=""http://developer.android.com/reference/android/text/Html.TagHandler.html"" rel=""noreferrer"">Html.TagHandler</a> which is passed to <a href=""http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String,%20android.text.Html.ImageGetter,%20android.text.Html.TagHandler%29"" rel=""noreferrer"">Html.fromHtml(String, ImageGetter, TagHandler)</a>.</p>

<p>Edit: For wider HTML tag support, <a href=""https://github.com/NightWhistler/HtmlSpanner"" rel=""noreferrer"">https://github.com/NightWhistler/HtmlSpanner</a> might also be worth trying.</p>
",Kuitsi,Kuitsi,1372425792,1496174794,1496174794
http://stackoverflow.com/a/17369948/750563,Is there an equivalent of java.util.regex for &quot;glob&quot; type patterns?,29102,Paul Tomblin,Community,1249697638,1536101449,1495540987,https://stackoverflow.com/questions/1247772/is-there-an-equivalent-of-java-util-regex-for-glob-type-patterns,"<p>Thanks to everyone here for their contributions. I wrote a more comprehensive conversion than any of the previous answers:</p>

<pre><code>/**
 * Converts a standard POSIX Shell globbing pattern into a regular expression
 * pattern. The result can be used with the standard {@link java.util.regex} API to
 * recognize strings which match the glob pattern.
 * &lt;p/&gt;
 * See also, the POSIX Shell language:
 * http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_13_01
 * 
 * @param pattern A glob pattern.
 * @return A regex pattern to recognize the given glob pattern.
 */
public static final String convertGlobToRegex(String pattern) {
    StringBuilder sb = new StringBuilder(pattern.length());
    int inGroup = 0;
    int inClass = 0;
    int firstIndexInClass = -1;
    char[] arr = pattern.toCharArray();
    for (int i = 0; i &lt; arr.length; i++) {
        char ch = arr[i];
        switch (ch) {
            case '\\':
                if (++i &gt;= arr.length) {
                    sb.append('\\');
                } else {
                    char next = arr[i];
                    switch (next) {
                        case ',':
                            // escape not needed
                            break;
                        case 'Q':
                        case 'E':
                            // extra escape needed
                            sb.append('\\');
                        default:
                            sb.append('\\');
                    }
                    sb.append(next);
                }
                break;
            case '*':
                if (inClass == 0)
                    sb.append("".*"");
                else
                    sb.append('*');
                break;
            case '?':
                if (inClass == 0)
                    sb.append('.');
                else
                    sb.append('?');
                break;
            case '[':
                inClass++;
                firstIndexInClass = i+1;
                sb.append('[');
                break;
            case ']':
                inClass--;
                sb.append(']');
                break;
            case '.':
            case '(':
            case ')':
            case '+':
            case '|':
            case '^':
            case '$':
            case '@':
            case '%':
                if (inClass == 0 || (firstIndexInClass == i &amp;&amp; ch == '^'))
                    sb.append('\\');
                sb.append(ch);
                break;
            case '!':
                if (firstIndexInClass == i)
                    sb.append('^');
                else
                    sb.append('!');
                break;
            case '{':
                inGroup++;
                sb.append('(');
                break;
            case '}':
                inGroup--;
                sb.append(')');
                break;
            case ',':
                if (inGroup &gt; 0)
                    sb.append('|');
                else
                    sb.append(',');
                break;
            default:
                sb.append(ch);
        }
    }
    return sb.toString();
}
</code></pre>

<p>And the unit tests to prove it works:</p>

<pre><code>/**
 * @author Neil Traft
 */
public class StringUtils_ConvertGlobToRegex_Test {

    @Test
    public void star_becomes_dot_star() throws Exception {
        assertEquals(""gl.*b"", StringUtils.convertGlobToRegex(""gl*b""));
    }

    @Test
    public void escaped_star_is_unchanged() throws Exception {
        assertEquals(""gl\\*b"", StringUtils.convertGlobToRegex(""gl\\*b""));
    }

    @Test
    public void question_mark_becomes_dot() throws Exception {
        assertEquals(""gl.b"", StringUtils.convertGlobToRegex(""gl?b""));
    }

    @Test
    public void escaped_question_mark_is_unchanged() throws Exception {
        assertEquals(""gl\\?b"", StringUtils.convertGlobToRegex(""gl\\?b""));
    }

    @Test
    public void character_classes_dont_need_conversion() throws Exception {
        assertEquals(""gl[-o]b"", StringUtils.convertGlobToRegex(""gl[-o]b""));
    }

    @Test
    public void escaped_classes_are_unchanged() throws Exception {
        assertEquals(""gl\\[-o\\]b"", StringUtils.convertGlobToRegex(""gl\\[-o\\]b""));
    }

    @Test
    public void negation_in_character_classes() throws Exception {
        assertEquals(""gl[^a-n!p-z]b"", StringUtils.convertGlobToRegex(""gl[!a-n!p-z]b""));
    }

    @Test
    public void nested_negation_in_character_classes() throws Exception {
        assertEquals(""gl[[^a-n]!p-z]b"", StringUtils.convertGlobToRegex(""gl[[!a-n]!p-z]b""));
    }

    @Test
    public void escape_carat_if_it_is_the_first_char_in_a_character_class() throws Exception {
        assertEquals(""gl[\\^o]b"", StringUtils.convertGlobToRegex(""gl[^o]b""));
    }

    @Test
    public void metachars_are_escaped() throws Exception {
        assertEquals(""gl..*\\.\\(\\)\\+\\|\\^\\$\\@\\%b"", StringUtils.convertGlobToRegex(""gl?*.()+|^$@%b""));
    }

    @Test
    public void metachars_in_character_classes_dont_need_escaping() throws Exception {
        assertEquals(""gl[?*.()+|^$@%]b"", StringUtils.convertGlobToRegex(""gl[?*.()+|^$@%]b""));
    }

    @Test
    public void escaped_backslash_is_unchanged() throws Exception {
        assertEquals(""gl\\\\b"", StringUtils.convertGlobToRegex(""gl\\\\b""));
    }

    @Test
    public void slashQ_and_slashE_are_escaped() throws Exception {
        assertEquals(""\\\\Qglob\\\\E"", StringUtils.convertGlobToRegex(""\\Qglob\\E""));
    }

    @Test
    public void braces_are_turned_into_groups() throws Exception {
        assertEquals(""(glob|regex)"", StringUtils.convertGlobToRegex(""{glob,regex}""));
    }

    @Test
    public void escaped_braces_are_unchanged() throws Exception {
        assertEquals(""\\{glob\\}"", StringUtils.convertGlobToRegex(""\\{glob\\}""));
    }

    @Test
    public void commas_dont_need_escaping() throws Exception {
        assertEquals(""(glob,regex),"", StringUtils.convertGlobToRegex(""{glob\\,regex},""));
    }

}
</code></pre>
",Neil Traft,,1372438722,1372438722,0
http://stackoverflow.com/a/17386803/2055594,How to check if a canvas is blank?,14619,user2535056,xyz,1372561069,1552599519,1372561169,https://stackoverflow.com/questions/17386707/how-to-check-if-a-canvas-is-blank,"<p><strong>Faster: Using <a href=""https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData"" rel=""noreferrer""><code>context.getImageData()</code></a> to find ""colored"" pixels (non-zero values)</strong></p>

<pre><code>// returns true if all color channels in each pixel are 0 (or ""blank"")
function isCanvasBlank(canvas) {
  return !canvas.getContext('2d')
    .getImageData(0, 0, canvas.width, canvas.height).data
    .some(channel =&gt; channel !== 0);
}
</code></pre>

<p>As <a href=""https://stackoverflow.com/questions/17386707/how-to-check-if-a-canvas-is-blank/17386803#comment96825186_17386803"">@Kaiido</a> points out, you can get even better performance by enumerating over a <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array"" rel=""noreferrer""><code>Uint32Array</code></a> of pixels instead of each color channel in every pixel.</p>

<pre><code>// returns true if every pixel's uint32 representation is 0 (or ""blank"")
function isCanvasBlank(canvas) {
  const context = canvas.getContext('2d');

  const pixelBuffer = new Uint32Array(
    context.getImageData(0, 0, canvas.width, canvas.height).data.buffer
  );

  return !pixelBuffer.some(color =&gt; color !== 0);
}
</code></pre>

<p><strong>Slower: Comparing data URLs with a blank canvas</strong></p>

<pre><code>function isCanvasBlank(canvas) {
  const blank = document.createElement('canvas');

  blank.width = canvas.width;
  blank.height = canvas.height;

  return canvas.toDataURL() === blank.toDataURL();
}
</code></pre>

<p><a href=""https://jsbench.me/e3jsy70r9c/1"" rel=""noreferrer"">Benchmark</a></p>

<p><strong><em>Demo</em></strong></p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>document.getElementById('check').addEventListener('click', function() {
  const blank = isCanvasBlank(document.getElementById('canvas'));

  alert(blank ? 'blank' : 'not blank');
});

document.getElementById('draw').addEventListener('click', function() {
  drawOnCanvas(document.getElementById('canvas'));
});

document.getElementById('clear').addEventListener('click', function() {
  const canvas = document.getElementById('canvas');

  canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);
});

function isCanvasBlank(canvas) {
  const context = canvas.getContext('2d');

  const pixelBuffer = new Uint32Array(
    context.getImageData(0, 0, canvas.width, canvas.height).data.buffer
  );

  return !pixelBuffer.some(color =&gt; color !== 0);
}

function drawOnCanvas(canvas) {
  const context = canvas.getContext('2d');

  context.fillStyle = '#' + Math.floor(Math.random() * 0xFFFFFF).toString(16);

  context.fillRect(Math.floor(Math.random() * canvas.width),
    Math.floor(Math.random() * canvas.height),
    Math.floor(Math.random() * canvas.width),
    Math.floor(Math.random() * canvas.height));
}</code></pre>
<pre class=""snippet-code-css lang-css prettyprint-override""><code>canvas {
  display: block;
  margin-top: 10px;
  border: 1px solid black;
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;button id=""check""&gt; Check &lt;/button&gt;
&lt;button id=""draw""&gt; Draw &lt;/button&gt;
&lt;button id=""clear""&gt; Clear &lt;/button&gt;
&lt;canvas id=""canvas"" width=""200"" height=""200""&gt;&lt;/canvas&gt;</code></pre>
</div>
</div>
</p>
",Austin Brunkhorst,Austin Brunkhorst,1372562348,1552599519,1552599519
http://stackoverflow.com/a/1739037/448068,Java JTextField with input hint,90038,Wienczny,Yugerten,1258321691,1551980509,1536605786,https://stackoverflow.com/questions/1738966/java-jtextfield-with-input-hint,"<p>You could create your own:</p>

<pre><code>import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import javax.swing.*;

public class Main {

  public static void main(String[] args) {

    final JFrame frame = new JFrame();

    frame.setLayout(new BorderLayout());

    final JTextField textFieldA = new HintTextField(""A hint here"");
    final JTextField textFieldB = new HintTextField(""Another hint here"");

    frame.add(textFieldA, BorderLayout.NORTH);
    frame.add(textFieldB, BorderLayout.CENTER);
    JButton btnGetText = new JButton(""Get text"");

    btnGetText.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent e) {
        String message = String.format(""textFieldA='%s', textFieldB='%s'"",
            textFieldA.getText(), textFieldB.getText());
        JOptionPane.showMessageDialog(frame, message);
      }
    });

    frame.add(btnGetText, BorderLayout.SOUTH);
    frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    frame.setVisible(true);
    frame.pack();
  }
}

class HintTextField extends JTextField implements FocusListener {

  private final String hint;
  private boolean showingHint;

  public HintTextField(final String hint) {
    super(hint);
    this.hint = hint;
    this.showingHint = true;
    super.addFocusListener(this);
  }

  @Override
  public void focusGained(FocusEvent e) {
    if(this.getText().isEmpty()) {
      super.setText("""");
      showingHint = false;
    }
  }
  @Override
  public void focusLost(FocusEvent e) {
    if(this.getText().isEmpty()) {
      super.setText(hint);
      showingHint = true;
    }
  }

  @Override
  public String getText() {
    return showingHint ? """" : super.getText();
  }
}
</code></pre>

<p>If you're still on Java 1.5, replace the <code>this.getText().isEmpty()</code> with <code>this.getText().length() == 0</code>.</p>
",Bart Kiers,Bart Kiers,1258323119,1376392903,1376392903
http://stackoverflow.com/a/1739265/447288,How to use QueryPerformanceCounter?,162114,Anonymous,Evan Carslake,1258327342,1506177854,1440962556,https://stackoverflow.com/questions/1739259/how-to-use-queryperformancecounter,"<pre><code>#include &lt;windows.h&gt;

double PCFreq = 0.0;
__int64 CounterStart = 0;

void StartCounter()
{
    LARGE_INTEGER li;
    if(!QueryPerformanceFrequency(&amp;li))
    cout &lt;&lt; ""QueryPerformanceFrequency failed!\n"";

    PCFreq = double(li.QuadPart)/1000.0;

    QueryPerformanceCounter(&amp;li);
    CounterStart = li.QuadPart;
}
double GetCounter()
{
    LARGE_INTEGER li;
    QueryPerformanceCounter(&amp;li);
    return double(li.QuadPart-CounterStart)/PCFreq;
}

int main()
{
    StartCounter();
    Sleep(1000);
    cout &lt;&lt; GetCounter() &lt;&lt;""\n"";
    return 0;
}
</code></pre>

<p>This program should output a number close to 1000 (windows sleep isn't that accurate, but it should be like 999).</p>

<p>The <code>StartCounter()</code> function records the number of ticks the performance counter has in the <code>CounterStart</code> variable. The <code>GetCounter()</code> function returns the number of milliseconds since <code>StartCounter()</code> was last called as a double, so if <code>GetCounter()</code> returns 0.001 then it has been about 1 microsecond since <code>StartCounter()</code> was called.</p>

<p>If you want to have the timer use seconds instead then change</p>

<pre><code>PCFreq = double(li.QuadPart)/1000.0;
</code></pre>

<p>to</p>

<pre><code>PCFreq = double(li.QuadPart);
</code></pre>

<p>or if you want microseconds then use</p>

<pre><code>PCFreq = double(li.QuadPart)/1000000.0;
</code></pre>

<p>But really it's about convenience since it returns a double.</p>
",Ramnster,GntS,1258327500,1506177854,1506177854
http://stackoverflow.com/a/17426611/410767,Implementation C++14 make_integer_sequence,16740,Khurshid,JulianAustralia,1372764709,1541847970,1435837488,https://stackoverflow.com/questions/17424477/implementation-c14-make-integer-sequence,"<p>Here's a <code>log N</code> implementation that doesn't even need an increased max-depth for template instantiations and compiles pretty fast:</p>

<pre class=""lang-cpp prettyprint-override""><code>// using aliases for cleaner syntax
template&lt;class T&gt; using Invoke = typename T::type;

template&lt;unsigned...&gt; struct seq{ using type = seq; };

template&lt;class S1, class S2&gt; struct concat;

template&lt;unsigned... I1, unsigned... I2&gt;
struct concat&lt;seq&lt;I1...&gt;, seq&lt;I2...&gt;&gt;
  : seq&lt;I1..., (sizeof...(I1)+I2)...&gt;{};

template&lt;class S1, class S2&gt;
using Concat = Invoke&lt;concat&lt;S1, S2&gt;&gt;;

template&lt;unsigned N&gt; struct gen_seq;
template&lt;unsigned N&gt; using GenSeq = Invoke&lt;gen_seq&lt;N&gt;&gt;;

template&lt;unsigned N&gt;
struct gen_seq : Concat&lt;GenSeq&lt;N/2&gt;, GenSeq&lt;N - N/2&gt;&gt;{};

template&lt;&gt; struct gen_seq&lt;0&gt; : seq&lt;&gt;{};
template&lt;&gt; struct gen_seq&lt;1&gt; : seq&lt;0&gt;{};
</code></pre>
",Xeo,,1372770834,1372770834,0
http://stackoverflow.com/a/17439317/1179226,How and why is Google OAuth token validation performed?,8154,Jakob,,1371838438,1372823202,0,https://stackoverflow.com/questions/17241771/how-and-why-is-google-oauth-token-validation-performed,"<p>Google is referring specifically to the <em>access</em> token.</p>

<p>In the context of OAuth 2.0, the confused deputy problem applies to the <a href=""http://tools.ietf.org/html/rfc6749#section-4.2"">Implicit Grant protocol flow</a> when used for <em>authentication</em>. What Google calls ""OAuth 2.0 for Client-side Applications"" is based on the implicit grant protocol flow.</p>

<p>Since the implicit flow exposes the access token to the end user through the URI fragment, it introduces the possiblity that the access token might be tampered with. A legitimate app (an OAuth client) can become the confused deputy by accepting an access token that was issued to a different (malicious) app, thereby giving an attacker access to a victim's account.</p>

<p>The critical step in validating the access token is that the app verifies that the access token was not originally issued to a different app. <a href=""https://developers.google.com/accounts/docs/OAuth2UserAgent#validatetoken"">Google calls attention to this when they say</a>:</p>

<blockquote>
  <p>Note: When verifying a token, it is critical to ensure the audience field in the response exactly matches your client_id registered in the APIs Console. This is the mitigation for the confused deputy issue, and it is absolutely vital to perform this step.</p>
</blockquote>

<p>As a simplified example, imagine there are two apps: (1) FileStore, a legitimate file storage app, and (2) EvilApp. Both apps use Google's authentication process for client-side apps. Alice is an innocent end user, and her Google user ID is XYZ.</p>

<ol>
<li>Alice signs into FileStore using Google.</li>
<li>After the auth process, FileStore creates an account for Alice and associates it with Google user ID XYZ.</li>
<li>Alice uploads some files to her FileStore account. So far everything is fine.</li>
<li>Later, Alice signs into EvilApp, which offers games that look kind of fun.</li>
<li>As a result, EvilApp gains an access token that is associated with Google user ID XYZ.</li>
<li>The owner of EvilApp can now construct the redirect URI for FileStore, inserting the access token it was issued for Alice's Google account.</li>
<li>The attacker connects to FileStore, which will take the access token and check with Google to see what user it is for. Google will say that it is user XYZ.</li>
<li>FileStore will give the attacker access to Alice's files because the attacker has an access token for Google user XYZ.</li>
</ol>

<p>FileStore's mistake was not verifying with Google that the access token it was given was truly issued to FileStore; the token was really issued to EvilApp.</p>

<p>Others have described this much more elegantly than I:</p>

<ul>
<li><a href=""http://www.thread-safe.com/2012/02/more-on-oauth-implicit-flow-application.html"">http://www.thread-safe.com/2012/02/more-on-oauth-implicit-flow-application.html</a></li>
<li><a href=""http://www.thread-safe.com/2012/01/problem-with-oauth-for-authentication.html"">http://www.thread-safe.com/2012/01/problem-with-oauth-for-authentication.html</a></li>
<li><a href=""http://tools.ietf.org/html/rfc6749#section-10.16"">http://tools.ietf.org/html/rfc6749#section-10.16</a></li>
</ul>

<p>I hope this explains the <em>why</em> part of access token validation with client-side apps, and how it relates to the confused deputy problem.</p>
",Andre D,,1372823202,1372823202,0
http://stackoverflow.com/a/17440673/2528668,How can I measure CPU time and wall clock time on both Linux/Windows?,68393,yak,yak,1372787710,1446071892,1372788907,https://stackoverflow.com/questions/17432502/how-can-i-measure-cpu-time-and-wall-clock-time-on-both-linux-windows,"<p>Here's a copy-paste solution that works on both Windows and Linux as well as C and C++.</p>

<p>As mentioned in the comments, there's a boost library that does this. But if you can't use boost, this should work:</p>

<pre><code>//  Windows
#ifdef _WIN32
#include &lt;Windows.h&gt;
double get_wall_time(){
    LARGE_INTEGER time,freq;
    if (!QueryPerformanceFrequency(&amp;freq)){
        //  Handle error
        return 0;
    }
    if (!QueryPerformanceCounter(&amp;time)){
        //  Handle error
        return 0;
    }
    return (double)time.QuadPart / freq.QuadPart;
}
double get_cpu_time(){
    FILETIME a,b,c,d;
    if (GetProcessTimes(GetCurrentProcess(),&amp;a,&amp;b,&amp;c,&amp;d) != 0){
        //  Returns total user time.
        //  Can be tweaked to include kernel times as well.
        return
            (double)(d.dwLowDateTime |
            ((unsigned long long)d.dwHighDateTime &lt;&lt; 32)) * 0.0000001;
    }else{
        //  Handle error
        return 0;
    }
}

//  Posix/Linux
#else
#include &lt;time.h&gt;
#include &lt;sys/time.h&gt;
double get_wall_time(){
    struct timeval time;
    if (gettimeofday(&amp;time,NULL)){
        //  Handle error
        return 0;
    }
    return (double)time.tv_sec + (double)time.tv_usec * .000001;
}
double get_cpu_time(){
    return (double)clock() / CLOCKS_PER_SEC;
}
#endif
</code></pre>

<p>There's a bunch of ways to implement these clocks. But here's what the above snippet uses:</p>

<p>For Windows:</p>

<ul>
<li>Wall Time: <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa373083%28v=vs.85%29.aspx"">Performance Counters</a></li>
<li>CPU Time: <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms683223%28v=vs.85%29.aspx""><code>GetProcessTimes()</code></a></li>
</ul>

<p>For Linux:</p>

<ul>
<li>Wall Time: <a href=""http://linux.die.net/man/2/gettimeofday""><code>gettimeofday()</code></a></li>
<li>CPU Time: <a href=""http://www.cplusplus.com/reference/ctime/clock/""><code>clock()</code></a></li>
</ul>

<hr>

<p>And here's a small demonstration:</p>

<pre><code>#include &lt;math.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main(){

    //  Start Timers
    double wall0 = get_wall_time();
    double cpu0  = get_cpu_time();

    //  Perform some computation.
    double sum = 0;
#pragma omp parallel for reduction(+ : sum)
    for (long long i = 1; i &lt; 10000000000; i++){
        sum += log((double)i);
    }

    //  Stop timers
    double wall1 = get_wall_time();
    double cpu1  = get_cpu_time();

    cout &lt;&lt; ""Wall Time = "" &lt;&lt; wall1 - wall0 &lt;&lt; endl;
    cout &lt;&lt; ""CPU Time  = "" &lt;&lt; cpu1  - cpu0  &lt;&lt; endl;

    //  Prevent Code Elimination
    cout &lt;&lt; endl;
    cout &lt;&lt; ""Sum = "" &lt;&lt; sum &lt;&lt; endl;

}
</code></pre>

<p>Output (12 threads):</p>

<pre><code>Wall Time = 15.7586
CPU Time  = 178.719

Sum = 2.20259e+011
</code></pre>
",Mysticial,Mysticial,1372830928,1433894492,1433894492
http://stackoverflow.com/a/1744503/905256,Using Windows 7 taskbar features in PyQt,3440,WrongAboutMostThings,,1258253140,1283968547,0,https://stackoverflow.com/questions/1736394/using-windows-7-taskbar-features-in-pyqt,"<p>As quark said, the functionality is not in Qt 4.5, but you can call the windows API directly from Qt. Its a little bit of work though.</p>

<ol>
<li><p>The new taskbar API is exposed through COM, so you can't use ctypes.windll . You need to create a .tlb file to access the functions. Get the interface definition for ITaskbarList from <a href=""http://www.neowin.net/forum/index.php?s=6352ade29ce66f2b51506c64e455d2f4&amp;showtopic=716968&amp;st=0&amp;p=590434472&amp;#entry590434472"" rel=""noreferrer"">this forum post</a> , or from the windows SDK. Save it to a file called e.g. TaskbarLib.idl .</p></li>
<li><p>Create the .tlb file. You'll probably need the Windows SDK, or get an IDL compiler from somewhere else.</p>

<pre><code>midl TaskbarLib.idl /tlb TaskbarLib.tlb
</code></pre></li>
<li><p>Load the .tlb (you need the Win32 Extensions for Python, <a href=""http://python.net/crew/skippy/win32/Downloads.html"" rel=""noreferrer"">http://python.net/crew/skippy/win32/Downloads.html</a>):</p>

<pre><code>import comtypes.client as cc
cc.GetModule(""TaskbarLib.tlb"")
</code></pre></li>
<li><p>Create the TaskbarList object. The function for setting the progress bar is in the interface ITaskbarList3:</p>

<pre><code>import comtypes.gen.TaskbarLib as tbl
taskbar = cc.CreateObject(
    ""{56FDF344-FD6D-11d0-958A-006097C9A090}"",
    interface=tbl.ITaskbarList3)
</code></pre></li>
<li><p>Now you can call the API functions:</p>

<pre><code>taskbar.HrInit()
taskbar.SetProgressValue(self.winId(),40,100)
</code></pre></li>
</ol>

<p>Here's a <a href=""http://pastebin.com/f7ed294a8"" rel=""noreferrer"">complete example script</a>.
Sources:
    <a href=""http://aspn.activestate.com/ASPN/Mail/Message/python-win32/3757531"" rel=""noreferrer"">1</a>
    <a href=""http://www.neowin.net/forum/index.php?s=6352ade29ce66f2b51506c64e455d2f4&amp;showtopic=716968&amp;st=0&amp;p=590434472&amp;#entry590434472"" rel=""noreferrer"">2</a></p>
",jdm,jdm,1258401605,1258401926,1258401926
http://stackoverflow.com/a/17447718/693934,How can I target only Internet Explorer 11 with JavaScript?,77460,dave1010,BoltClock,1372852779,1535012642,1429723769,https://stackoverflow.com/questions/17447373/how-can-i-target-only-internet-explorer-11-with-javascript,"<p>The User-agent string for IE 11 is currently this one :</p>

<pre><code>Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv 11.0) like Gecko
</code></pre>

<p>Windows 10 example:</p>

<pre><code>Mozilla/5.0 (Windows NT 10.0; Trident/7.0; rv:11.0) like Gecko
</code></pre>

<p>Which means your can simply test, for versions 11.xx, </p>

<pre><code>var isIE11 = /Trident.*rv[ :]*11\./.test(navigator.userAgent);
</code></pre>

<p>As <a href=""http://msdn.microsoft.com/en-us/library/ie/hh920767%28v=vs.85%29.aspx"" rel=""noreferrer"">IE10 user agent was</a></p>

<pre><code>Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)
</code></pre>

<p>it's probably also safe to bet on the fact that now <code>Trident/X</code> is supposed to be the real versionning.</p>
",Denys Sguret,Lars Gyrup Brink Nielsen,1372853762,1477380066,1477380066
http://stackoverflow.com/a/17496836/308265,Using Django auth UserAdmin for a custom user model,44719,nip3o,Mariusz Jamro,1361480799,1533412339,1389211179,https://stackoverflow.com/questions/15012235/using-django-auth-useradmin-for-a-custom-user-model,"<p>nico's answer has been extremely helpful but I found Django still references the User model when creating a new user.</p>

<p>Ticket <a href=""https://code.djangoproject.com/ticket/19353"">#19353</a> references this problem.</p>

<p>In order to fix it i had to make a few more additions to <code>admin.py</code></p>

<p><strong>admin.py:</strong></p>

<pre><code>from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from django.contrib.auth.forms import UserChangeForm, UserCreationForm
from main.models import MyUser
from django import forms


class MyUserChangeForm(UserChangeForm):
    class Meta(UserChangeForm.Meta):
        model = MyUser


class MyUserCreationForm(UserCreationForm):
    class Meta(UserCreationForm.Meta):
        model = MyUser

    def clean_username(self):
        username = self.cleaned_data['username']
        try:
            MyUser.objects.get(username=username)
        except MyUser.DoesNotExist:
            return username
        raise forms.ValidationError(self.error_messages['duplicate_username'])


class MyUserAdmin(UserAdmin):
    form = MyUserChangeForm
    add_form = MyUserCreationForm
    fieldsets = UserAdmin.fieldsets + (
        (None, {'fields': ('extra_field1', 'extra_field2',)}),
    )

admin.site.register(MyUser, MyUserAdmin)
</code></pre>
",kdh454,,1373058290,1373058290,0
http://stackoverflow.com/a/17502838/6124862,How can I find out which lines my regex matched on?,293,ammt,Tim Pietzcker,1373107586,1373128912,1373111051,https://stackoverflow.com/questions/17502167/how-can-i-find-out-which-lines-my-regex-matched-on,"<p>If you use <code>regex.finditer</code> you could get the line number like this:</p>

<pre><code>regex = re.compile(""(?&lt;=i)s"")
s = """"""This
is
a multiline
string""""""
for match in regex.finditer(s):
    lineno = s.count('\n', 0, match.start())
    ...
</code></pre>
",mata,mata,1373112727,1373114067,1373114067
http://stackoverflow.com/a/17525223/182183,how to prevent focus event in IE when mousedown happens,3702,Jinceon,Jinceon,1332331505,1373282048,1332335693,https://stackoverflow.com/questions/9804280/how-to-prevent-focus-event-in-ie-when-mousedown-happens,"<p>You can use ""unselectable"" attribute for prevent losing focus in IE and mousedown handler for other.</p>

<pre><code>&lt;input type=""text"" id=""name""&gt;

&lt;div onmousedown=""return false"" unselectable=""on"" id=""suggest""&gt;
  &lt;div unselectable=""on""&gt;mark&lt;/div&gt;
  &lt;div unselectable=""on""&gt;sam&lt;/div&gt;
  &lt;div unselectable=""on""&gt;john&lt;/div&gt;
&lt;/div&gt;
</code></pre>
",nameoutname,,1373282048,1373282048,0
http://stackoverflow.com/a/17527101/868724,How to convert a unicode list of tuples into utf-8 with python,7855,user2560609,Martijn Pieters,1373287738,1474298445,1467471776,https://stackoverflow.com/questions/17527072/how-to-convert-a-unicode-list-of-tuples-into-utf-8-with-python,"<p>Use a nested list comprehension:</p>

<pre><code>encoded = [[s.encode('utf8') for s in t] for t in resultsList]
</code></pre>

<p>This produces a list of lists containing byte strings of UTF-8 encoded data.</p>

<p>If you were to print these lists, you'll see Python represent the contents of the Python byte strings as Python literal strings; with quotes and with any bytes that aro not printable ASCII  codepoints represented with escape sequences:</p>

<pre><code>&gt;&gt;&gt; l = ['Kaiserstra\xc3\x9fe']
&gt;&gt;&gt; l
['Kaiserstra\xc3\x9fe']
&gt;&gt;&gt; l[0]
'Kaiserstra\xc3\x9fe'
&gt;&gt;&gt; print l[0]
Kaiserstrae
</code></pre>

<p>This is <strong>normal</strong> as Python presents this data for debugging purposes. The <code>\xc3</code> and <code>\x9f</code> escape sequences represent the two UTF-8 bytes C39F (hexadecimal) that are used to encode the small ringel-es character.</p>
",Martijn Pieters,Martijn Pieters,1373287814,1373288886,1373288886
http://stackoverflow.com/a/17534350/3698944,Converting Roman Numerals To Decimal,84092,Daniel Cook,Ripon Al Wasim,1327972124,1531454866,1435567686,https://stackoverflow.com/questions/9073150/converting-roman-numerals-to-decimal,"<p>Try this - It is simple and compact and works quite smoothly:</p>

<pre><code>    public static int ToArabic(string number) {
        if (number == string.Empty) return 0;
        if (number.StartsWith(""M"")) return 1000 + ToArabic(number.Remove(0, 1));
        if (number.StartsWith(""CM"")) return 900 + ToArabic(number.Remove(0, 2));
        if (number.StartsWith(""D"")) return 500 + ToArabic(number.Remove(0, 1));
        if (number.StartsWith(""CD"")) return 400 + ToArabic(number.Remove(0, 2));
        if (number.StartsWith(""C"")) return 100 + ToArabic(number.Remove(0, 1));
        if (number.StartsWith(""XC"")) return 90 + ToArabic(number.Remove(0, 2));
        if (number.StartsWith(""L"")) return 50 + ToArabic(number.Remove(0, 1));
        if (number.StartsWith(""XL"")) return 40 + ToArabic(number.Remove(0, 2));
        if (number.StartsWith(""X"")) return 10 + ToArabic(number.Remove(0, 1));
        if (number.StartsWith(""IX"")) return 9 + ToArabic(number.Remove(0, 2));
        if (number.StartsWith(""V"")) return 5 + ToArabic(number.Remove(0, 1));
        if (number.StartsWith(""IV"")) return 4 + ToArabic(number.Remove(0, 2));
        if (number.StartsWith(""I"")) return 1 + ToArabic(number.Remove(0, 1));
        throw new ArgumentOutOfRangeException(""something bad happened"");
    }
</code></pre>
",Shaltiel Shmidman,,1373311319,1373311319,0
http://stackoverflow.com/a/17546800/213042,Loop through nested objects with jQuery,9046,Simo D&#39;lo Mafuxwana,a better oliver,1373368281,1373874815,1373370060,https://stackoverflow.com/questions/17546739/loop-through-nested-objects-with-jquery,"<p>You can simply nest calls to <a href=""http://api.jquery.com/jQuery.each""><code>$.each</code></a>:</p>

<p><a href=""http://jsbin.com/ofifor/1"">Live Example</a> | <a href=""http://jsbin.com/ofifor/1/edit"">Live Source</a></p>

<pre><code>// Loop the top level
$.each(myobj, walker);

function walker(key, value) {
    // ...do what you like with `key` and `value`

    if (value !== null &amp;&amp; typeof value === ""object"") {
        // Recurse into children
        $.each(value, walker);
    }
}
</code></pre>

<p>If you want to know how deep you are, you can do that too:</p>

<p><a href=""http://jsbin.com/ofifor/2"">Live Example</a> | <a href=""http://jsbin.com/ofifor/2/edit"">Live Source</a></p>

<pre><code>var path = """";

// Loop the top level
$.each(myobj, walker);

function walker(key, value) {
    var savepath = path;

    path = path ? (path + ""."" + key) : key;

    // ...do what you like with `key` and `value`

    if (value !== null &amp;&amp; typeof value === ""object"") {
        // Recurse into children
        $.each(value, walker);
    }

    path = savepath;
}
</code></pre>
",T.J. Crowder,T.J. Crowder,1373368471,1373373527,1373373527
http://stackoverflow.com/a/17564369/978369,Using javascript to download file as a.csv file,59644,Samuel Tang,SpursP,1373438812,1538606789,1373439135,https://stackoverflow.com/questions/17564103/using-javascript-to-download-file-as-a-csv-file,"<p>in modern browsers there is a new attribute in anchors.</p>

<p><code>download</code></p>

<p><a href=""http://caniuse.com/download"">http://caniuse.com/download</a></p>

<p>so instead of using </p>

<pre><code>window.open(""data:text/csv;charset=utf-8,"" + escape(csv))
</code></pre>

<p>create a download link:</p>

<pre><code>&lt;a href=""data:text/csv;charset=utf-8,'+escape(csv)+'"" download=""filename.csv""&gt;download&lt;/a&gt;
</code></pre>

<p>another solution is to use php</p>

<p><strong>EDIT</strong> </p>

<p>i don't use jQuery, but you need to edit your code to add the download link
with something like that in your function.</p>

<pre><code>var csv=ConvertToCSV(jsonObject),
a=document.createElement('a');
a.textContent='download';
a.download=""myFileName.csv"";
a.href='data:text/csv;charset=utf-8,'+escape(csv);
document.body.appendChild(a);
</code></pre>
",cocco,cocco,1373439863,1373442049,1373442049
http://stackoverflow.com/a/17586891/180751,inotify missing events,4417,bad,,1365065280,1477304842,0,https://stackoverflow.com/questions/15806488/inotify-missing-events,"<p>The subfolder problem with inotify is well known and easily reproduced:</p>

<ol>
<li><p>Start inotifywait watching an empty tmp directory:</p>

<p>inotifywait -e create -m -r --format '%:e %f' ./tmp </p></li>
<li><p>In another shell enter:</p>

<p>mkdir tmp/0 tmp/0/0 tmp/0/0/0 tmp/0/0/0/0</p></li>
<li><p>You will most likely only get a notification for the first subdirectory.</p>

<p>CREATE:ISDIR 0</p></li>
</ol>

<p>The distinct possibility of losing events (particularly subdirectory creation events) between the time a directory is created, your app gets notified, and a new inotify watch is added, makes recursive monitoring too unreliable. The only safe option is to scan contents of newly created directories.</p>

<p>From the <a href=""http://linux.die.net/man/7/inotify"" rel=""noreferrer"">inotify doc</a> under <em>Limitations and caveats</em>:</p>

<blockquote>
  <p>If monitoring an entire directory subtree, and a new subdirectory is
  created in that tree, be aware that by the time you create a watch for
  the new subdirectory, new files may already have been created in the
  subdirectory. Therefore, you may want to scan the contents of the
  subdirectory immediately after adding the watch.</p>
</blockquote>
",Peter Krnjevic,,1373525725,1373525725,0
http://stackoverflow.com/a/17610709/1649388,Protected inner-class is NOT accessible from subclass of another package,3854,user2575537,user2575537,1373617006,1373627315,1373627315,https://stackoverflow.com/questions/17610498/protected-inner-class-is-not-accessible-from-subclass-of-another-package,"<p>As johnchen902 said the default constructor of a protected class is implicitly protected.
Protected means that only subclasses and classes within the same package can access it.</p>

<ol>
<li>The protectedInnerClass doesn't declare a constructor thus it is implicitly protected.</li>
<li>MyClass is not a subclass of protectedInnerClass, thus it can not access it.</li>
</ol>

<p>So you have to make it public or you can modify your code like this:</p>

<pre><code>public class MyClass extends ClassInOtherPackage {

    public MyClass() {
        MyClass x = new MyClass();
        x.protectedMethod(); // &lt;-- This one ok
        MyClass.protectedInnerClass y = x.new MyProtectedInnerClass();
    }

    protected class MyProtectedInnerClass extends protectedInnerClass {

    }
}
</code></pre>
",Ren Link,Ren Link,1373617857,1373618302,1373618302
http://stackoverflow.com/a/17623521/651779,Get indices of n maximums in java array,6567,Brian Vanover,Roman C,1373660734,1532180815,1458384536,https://stackoverflow.com/questions/17623468/get-indices-of-n-maximums-in-java-array,"<p>Sorting is an option, at the expense of extra memory. Consider the following algorithm.</p>

<pre><code>1. Allocate additional array and copy into - O(n)
2. Sort additional array - O(n lg n)
3. Lop off the top k elements (in this case 5) - O(n), since k could be up to n
4. Iterate over the original array - O(n)
    4.a search the top k elements for to see if they contain the current element - O(lg n)
</code></pre>

<p>So it step 4 is (n * lg n), just like the sort. The entire algorithm is n lg n, and is very simple to code.</p>

<p>Here's a quick and dirty example. There may be bugs in it, and obviously null checking and the like come into play.</p>

<p>import java.util.Arrays;</p>

<pre><code>class ArrayTest {

    public static void main(String[] args) {
        int[] arr = {1, 3, 5, 7, 9, 2, 4, 6, 8, 10};
        int[] indexes = indexesOfTopElements(arr,3);
        for(int i = 0; i &lt; indexes.length; i++) {
            int index = indexes[i];
            System.out.println(index + "" "" + arr[index]);
        }
    }

    static int[] indexesOfTopElements(int[] orig, int nummax) {
        int[] copy = Arrays.copyOf(orig,orig.length);
        Arrays.sort(copy);
        int[] honey = Arrays.copyOfRange(copy,copy.length - nummax, copy.length);
        int[] result = new int[nummax];
        int resultPos = 0;
        for(int i = 0; i &lt; orig.length; i++) {
            int onTrial = orig[i];
            int index = Arrays.binarySearch(honey,onTrial);
            if(index &lt; 0) continue;
            result[resultPos++] = i;
        }
        return result;
    }

}
</code></pre>

<p>There are other things you can do to reduce the overhead of this operation. For example instead of sorting, you could opt to use a queue that just tracks the largest 5. Being <code>int</code>s they values would probably have to be boxed to be added to a collection (unless you rolled your own) which adds to overhead significantly.</p>
",corsiKa,corsiKa,1373660988,1373662831,1373662831
http://stackoverflow.com/a/17628350/99834,Changing default encoding of Python?,246715,Ali Nadalizadeh,Peter Mortensen,1266353188,1523569137,1415731557,https://stackoverflow.com/questions/2276200/changing-default-encoding-of-python,"<p>Here is a simpler method (hack) that gives you back the <code>setdefaultencoding()</code> function that was deleted from <code>sys</code>:</p>

<pre><code>import sys
# sys.setdefaultencoding() does not exist, here!
reload(sys)  # Reload does the trick!
sys.setdefaultencoding('UTF8')
</code></pre>

<p><strong>This is not a safe thing to do</strong>, though: this is obviously a hack, since <code>sys.setdefaultencoding()</code> is purposely removed from <code>sys</code> when Python starts. Reenabling it and changing the default encoding <a href=""https://anonbadger.wordpress.com/2015/06/16/why-sys-setdefaultencoding-will-break-code/"" rel=""noreferrer"">can break code that relies on ASCII being the default</a> (this code can be third-party, which would generally make fixing it impossible or dangerous).</p>
",Eric O Lebigot,Eric O Lebigot,1373703496,1497281397,1497281397
http://stackoverflow.com/a/17646775/12421,Implementing SSE 4.2&#39;s CRC32C in software,16392,LMS,,1373848075,1517168796,0,https://stackoverflow.com/questions/17645167/implementing-sse-4-2s-crc32c-in-software,"<p>Here are both software and hardware versions of CRC-32C.  The software version is optimized to process eight bytes at a time.  The hardware version is optimized to run three <code>crc32q</code> instructions effectively in parallel on a single core, since the throughput of that instruction is one cycle, but the latency is three cycles.</p>

<pre><code>/* crc32c.c -- compute CRC-32C using the Intel crc32 instruction
 * Copyright (C) 2013 Mark Adler
 * Version 1.1  1 Aug 2013  Mark Adler
 */

/*
  This software is provided 'as-is', without any express or implied
  warranty.  In no event will the author be held liable for any damages
  arising from the use of this software.

  Permission is granted to anyone to use this software for any purpose,
  including commercial applications, and to alter it and redistribute it
  freely, subject to the following restrictions:

  1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
  2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
  3. This notice may not be removed or altered from any source distribution.

  Mark Adler
  madler@alumni.caltech.edu
 */

/* Use hardware CRC instruction on Intel SSE 4.2 processors.  This computes a
   CRC-32C, *not* the CRC-32 used by Ethernet and zip, gzip, etc.  A software
   version is provided as a fall-back, as well as for speed comparisons. */

/* Version history:
   1.0  10 Feb 2013  First version
   1.1   1 Aug 2013  Correct comments on why three crc instructions in parallel
 */

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdint.h&gt;
#include &lt;unistd.h&gt;
#include &lt;pthread.h&gt;

/* CRC-32C (iSCSI) polynomial in reversed bit order. */
#define POLY 0x82f63b78

/* Table for a quadword-at-a-time software crc. */
static pthread_once_t crc32c_once_sw = PTHREAD_ONCE_INIT;
static uint32_t crc32c_table[8][256];

/* Construct table for software CRC-32C calculation. */
static void crc32c_init_sw(void)
{
    uint32_t n, crc, k;

    for (n = 0; n &lt; 256; n++) {
        crc = n;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc32c_table[0][n] = crc;
    }
    for (n = 0; n &lt; 256; n++) {
        crc = crc32c_table[0][n];
        for (k = 1; k &lt; 8; k++) {
            crc = crc32c_table[0][crc &amp; 0xff] ^ (crc &gt;&gt; 8);
            crc32c_table[k][n] = crc;
        }
    }
}

/* Table-driven software version as a fall-back.  This is about 15 times slower
   than using the hardware instructions.  This assumes little-endian integers,
   as is the case on Intel processors that the assembler code here is for. */
static uint32_t crc32c_sw(uint32_t crci, const void *buf, size_t len)
{
    const unsigned char *next = buf;
    uint64_t crc;

    pthread_once(&amp;crc32c_once_sw, crc32c_init_sw);
    crc = crci ^ 0xffffffff;
    while (len &amp;&amp; ((uintptr_t)next &amp; 7) != 0) {
        crc = crc32c_table[0][(crc ^ *next++) &amp; 0xff] ^ (crc &gt;&gt; 8);
        len--;
    }
    while (len &gt;= 8) {
        crc ^= *(uint64_t *)next;
        crc = crc32c_table[7][crc &amp; 0xff] ^
              crc32c_table[6][(crc &gt;&gt; 8) &amp; 0xff] ^
              crc32c_table[5][(crc &gt;&gt; 16) &amp; 0xff] ^
              crc32c_table[4][(crc &gt;&gt; 24) &amp; 0xff] ^
              crc32c_table[3][(crc &gt;&gt; 32) &amp; 0xff] ^
              crc32c_table[2][(crc &gt;&gt; 40) &amp; 0xff] ^
              crc32c_table[1][(crc &gt;&gt; 48) &amp; 0xff] ^
              crc32c_table[0][crc &gt;&gt; 56];
        next += 8;
        len -= 8;
    }
    while (len) {
        crc = crc32c_table[0][(crc ^ *next++) &amp; 0xff] ^ (crc &gt;&gt; 8);
        len--;
    }
    return (uint32_t)crc ^ 0xffffffff;
}

/* Multiply a matrix times a vector over the Galois field of two elements,
   GF(2).  Each element is a bit in an unsigned integer.  mat must have at
   least as many entries as the power of two for most significant one bit in
   vec. */
static inline uint32_t gf2_matrix_times(uint32_t *mat, uint32_t vec)
{
    uint32_t sum;

    sum = 0;
    while (vec) {
        if (vec &amp; 1)
            sum ^= *mat;
        vec &gt;&gt;= 1;
        mat++;
    }
    return sum;
}

/* Multiply a matrix by itself over GF(2).  Both mat and square must have 32
   rows. */
static inline void gf2_matrix_square(uint32_t *square, uint32_t *mat)
{
    int n;

    for (n = 0; n &lt; 32; n++)
        square[n] = gf2_matrix_times(mat, mat[n]);
}

/* Construct an operator to apply len zeros to a crc.  len must be a power of
   two.  If len is not a power of two, then the result is the same as for the
   largest power of two less than len.  The result for len == 0 is the same as
   for len == 1.  A version of this routine could be easily written for any
   len, but that is not needed for this application. */
static void crc32c_zeros_op(uint32_t *even, size_t len)
{
    int n;
    uint32_t row;
    uint32_t odd[32];       /* odd-power-of-two zeros operator */

    /* put operator for one zero bit in odd */
    odd[0] = POLY;              /* CRC-32C polynomial */
    row = 1;
    for (n = 1; n &lt; 32; n++) {
        odd[n] = row;
        row &lt;&lt;= 1;
    }

    /* put operator for two zero bits in even */
    gf2_matrix_square(even, odd);

    /* put operator for four zero bits in odd */
    gf2_matrix_square(odd, even);

    /* first square will put the operator for one zero byte (eight zero bits),
       in even -- next square puts operator for two zero bytes in odd, and so
       on, until len has been rotated down to zero */
    do {
        gf2_matrix_square(even, odd);
        len &gt;&gt;= 1;
        if (len == 0)
            return;
        gf2_matrix_square(odd, even);
        len &gt;&gt;= 1;
    } while (len);

    /* answer ended up in odd -- copy to even */
    for (n = 0; n &lt; 32; n++)
        even[n] = odd[n];
}

/* Take a length and build four lookup tables for applying the zeros operator
   for that length, byte-by-byte on the operand. */
static void crc32c_zeros(uint32_t zeros[][256], size_t len)
{
    uint32_t n;
    uint32_t op[32];

    crc32c_zeros_op(op, len);
    for (n = 0; n &lt; 256; n++) {
        zeros[0][n] = gf2_matrix_times(op, n);
        zeros[1][n] = gf2_matrix_times(op, n &lt;&lt; 8);
        zeros[2][n] = gf2_matrix_times(op, n &lt;&lt; 16);
        zeros[3][n] = gf2_matrix_times(op, n &lt;&lt; 24);
    }
}

/* Apply the zeros operator table to crc. */
static inline uint32_t crc32c_shift(uint32_t zeros[][256], uint32_t crc)
{
    return zeros[0][crc &amp; 0xff] ^ zeros[1][(crc &gt;&gt; 8) &amp; 0xff] ^
           zeros[2][(crc &gt;&gt; 16) &amp; 0xff] ^ zeros[3][crc &gt;&gt; 24];
}

/* Block sizes for three-way parallel crc computation.  LONG and SHORT must
   both be powers of two.  The associated string constants must be set
   accordingly, for use in constructing the assembler instructions. */
#define LONG 8192
#define LONGx1 ""8192""
#define LONGx2 ""16384""
#define SHORT 256
#define SHORTx1 ""256""
#define SHORTx2 ""512""

/* Tables for hardware crc that shift a crc by LONG and SHORT zeros. */
static pthread_once_t crc32c_once_hw = PTHREAD_ONCE_INIT;
static uint32_t crc32c_long[4][256];
static uint32_t crc32c_short[4][256];

/* Initialize tables for shifting crcs. */
static void crc32c_init_hw(void)
{
    crc32c_zeros(crc32c_long, LONG);
    crc32c_zeros(crc32c_short, SHORT);
}

/* Compute CRC-32C using the Intel hardware instruction. */
static uint32_t crc32c_hw(uint32_t crc, const void *buf, size_t len)
{
    const unsigned char *next = buf;
    const unsigned char *end;
    uint64_t crc0, crc1, crc2;      /* need to be 64 bits for crc32q */

    /* populate shift tables the first time through */
    pthread_once(&amp;crc32c_once_hw, crc32c_init_hw);

    /* pre-process the crc */
    crc0 = crc ^ 0xffffffff;

    /* compute the crc for up to seven leading bytes to bring the data pointer
       to an eight-byte boundary */
    while (len &amp;&amp; ((uintptr_t)next &amp; 7) != 0) {
        __asm__(""crc32b\t"" ""(%1), %0""
                : ""=r""(crc0)
                : ""r""(next), ""0""(crc0));
        next++;
        len--;
    }

    /* compute the crc on sets of LONG*3 bytes, executing three independent crc
       instructions, each on LONG bytes -- this is optimized for the Nehalem,
       Westmere, Sandy Bridge, and Ivy Bridge architectures, which have a
       throughput of one crc per cycle, but a latency of three cycles */
    while (len &gt;= LONG*3) {
        crc1 = 0;
        crc2 = 0;
        end = next + LONG;
        do {
            __asm__(""crc32q\t"" ""(%3), %0\n\t""
                    ""crc32q\t"" LONGx1 ""(%3), %1\n\t""
                    ""crc32q\t"" LONGx2 ""(%3), %2""
                    : ""=r""(crc0), ""=r""(crc1), ""=r""(crc2)
                    : ""r""(next), ""0""(crc0), ""1""(crc1), ""2""(crc2));
            next += 8;
        } while (next &lt; end);
        crc0 = crc32c_shift(crc32c_long, crc0) ^ crc1;
        crc0 = crc32c_shift(crc32c_long, crc0) ^ crc2;
        next += LONG*2;
        len -= LONG*3;
    }

    /* do the same thing, but now on SHORT*3 blocks for the remaining data less
       than a LONG*3 block */
    while (len &gt;= SHORT*3) {
        crc1 = 0;
        crc2 = 0;
        end = next + SHORT;
        do {
            __asm__(""crc32q\t"" ""(%3), %0\n\t""
                    ""crc32q\t"" SHORTx1 ""(%3), %1\n\t""
                    ""crc32q\t"" SHORTx2 ""(%3), %2""
                    : ""=r""(crc0), ""=r""(crc1), ""=r""(crc2)
                    : ""r""(next), ""0""(crc0), ""1""(crc1), ""2""(crc2));
            next += 8;
        } while (next &lt; end);
        crc0 = crc32c_shift(crc32c_short, crc0) ^ crc1;
        crc0 = crc32c_shift(crc32c_short, crc0) ^ crc2;
        next += SHORT*2;
        len -= SHORT*3;
    }

    /* compute the crc on the remaining eight-byte units less than a SHORT*3
       block */
    end = next + (len - (len &amp; 7));
    while (next &lt; end) {
        __asm__(""crc32q\t"" ""(%1), %0""
                : ""=r""(crc0)
                : ""r""(next), ""0""(crc0));
        next += 8;
    }
    len &amp;= 7;

    /* compute the crc for up to seven trailing bytes */
    while (len) {
        __asm__(""crc32b\t"" ""(%1), %0""
                : ""=r""(crc0)
                : ""r""(next), ""0""(crc0));
        next++;
        len--;
    }

    /* return a post-processed crc */
    return (uint32_t)crc0 ^ 0xffffffff;
}

/* Check for SSE 4.2.  SSE 4.2 was first supported in Nehalem processors
   introduced in November, 2008.  This does not check for the existence of the
   cpuid instruction itself, which was introduced on the 486SL in 1992, so this
   will fail on earlier x86 processors.  cpuid works on all Pentium and later
   processors. */
#define SSE42(have) \
    do { \
        uint32_t eax, ecx; \
        eax = 1; \
        __asm__(""cpuid"" \
                : ""=c""(ecx) \
                : ""a""(eax) \
                : ""%ebx"", ""%edx""); \
        (have) = (ecx &gt;&gt; 20) &amp; 1; \
    } while (0)

/* Compute a CRC-32C.  If the crc32 instruction is available, use the hardware
   version.  Otherwise, use the software version. */
uint32_t crc32c(uint32_t crc, const void *buf, size_t len)
{
    int sse42;

    SSE42(sse42);
    return sse42 ? crc32c_hw(crc, buf, len) : crc32c_sw(crc, buf, len);
}

#ifdef TEST

#define SIZE (262144*3)
#define CHUNK SIZE

int main(int argc, char **argv)
{
    char *buf;
    ssize_t got;
    size_t off, n;
    uint32_t crc;

    (void)argv;
    crc = 0;
    buf = malloc(SIZE);
    if (buf == NULL) {
        fputs(""out of memory"", stderr);
        return 1;
    }
    while ((got = read(0, buf, SIZE)) &gt; 0) {
        off = 0;
        do {
            n = (size_t)got - off;
            if (n &gt; CHUNK)
                n = CHUNK;
            crc = argc &gt; 1 ? crc32c_sw(crc, buf + off, n) :
                             crc32c(crc, buf + off, n);
            off += n;
        } while (off &lt; (size_t)got);
    }
    free(buf);
    if (got == -1) {
        fputs(""read error\n"", stderr);
        return 1;
    }
    printf(""%08x\n"", crc);
    return 0;
}

#endif /* TEST */
</code></pre>
",Mark Adler,Mark Adler,1373862514,1375403033,1375403033
http://stackoverflow.com/a/17646775/1821055,Implementing SSE 4.2&#39;s CRC32C in software,16392,LMS,,1373848075,1517168796,0,https://stackoverflow.com/questions/17645167/implementing-sse-4-2s-crc32c-in-software,"<p>Here are both software and hardware versions of CRC-32C.  The software version is optimized to process eight bytes at a time.  The hardware version is optimized to run three <code>crc32q</code> instructions effectively in parallel on a single core, since the throughput of that instruction is one cycle, but the latency is three cycles.</p>

<pre><code>/* crc32c.c -- compute CRC-32C using the Intel crc32 instruction
 * Copyright (C) 2013 Mark Adler
 * Version 1.1  1 Aug 2013  Mark Adler
 */

/*
  This software is provided 'as-is', without any express or implied
  warranty.  In no event will the author be held liable for any damages
  arising from the use of this software.

  Permission is granted to anyone to use this software for any purpose,
  including commercial applications, and to alter it and redistribute it
  freely, subject to the following restrictions:

  1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
  2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
  3. This notice may not be removed or altered from any source distribution.

  Mark Adler
  madler@alumni.caltech.edu
 */

/* Use hardware CRC instruction on Intel SSE 4.2 processors.  This computes a
   CRC-32C, *not* the CRC-32 used by Ethernet and zip, gzip, etc.  A software
   version is provided as a fall-back, as well as for speed comparisons. */

/* Version history:
   1.0  10 Feb 2013  First version
   1.1   1 Aug 2013  Correct comments on why three crc instructions in parallel
 */

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdint.h&gt;
#include &lt;unistd.h&gt;
#include &lt;pthread.h&gt;

/* CRC-32C (iSCSI) polynomial in reversed bit order. */
#define POLY 0x82f63b78

/* Table for a quadword-at-a-time software crc. */
static pthread_once_t crc32c_once_sw = PTHREAD_ONCE_INIT;
static uint32_t crc32c_table[8][256];

/* Construct table for software CRC-32C calculation. */
static void crc32c_init_sw(void)
{
    uint32_t n, crc, k;

    for (n = 0; n &lt; 256; n++) {
        crc = n;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc = crc &amp; 1 ? (crc &gt;&gt; 1) ^ POLY : crc &gt;&gt; 1;
        crc32c_table[0][n] = crc;
    }
    for (n = 0; n &lt; 256; n++) {
        crc = crc32c_table[0][n];
        for (k = 1; k &lt; 8; k++) {
            crc = crc32c_table[0][crc &amp; 0xff] ^ (crc &gt;&gt; 8);
            crc32c_table[k][n] = crc;
        }
    }
}

/* Table-driven software version as a fall-back.  This is about 15 times slower
   than using the hardware instructions.  This assumes little-endian integers,
   as is the case on Intel processors that the assembler code here is for. */
static uint32_t crc32c_sw(uint32_t crci, const void *buf, size_t len)
{
    const unsigned char *next = buf;
    uint64_t crc;

    pthread_once(&amp;crc32c_once_sw, crc32c_init_sw);
    crc = crci ^ 0xffffffff;
    while (len &amp;&amp; ((uintptr_t)next &amp; 7) != 0) {
        crc = crc32c_table[0][(crc ^ *next++) &amp; 0xff] ^ (crc &gt;&gt; 8);
        len--;
    }
    while (len &gt;= 8) {
        crc ^= *(uint64_t *)next;
        crc = crc32c_table[7][crc &amp; 0xff] ^
              crc32c_table[6][(crc &gt;&gt; 8) &amp; 0xff] ^
              crc32c_table[5][(crc &gt;&gt; 16) &amp; 0xff] ^
              crc32c_table[4][(crc &gt;&gt; 24) &amp; 0xff] ^
              crc32c_table[3][(crc &gt;&gt; 32) &amp; 0xff] ^
              crc32c_table[2][(crc &gt;&gt; 40) &amp; 0xff] ^
              crc32c_table[1][(crc &gt;&gt; 48) &amp; 0xff] ^
              crc32c_table[0][crc &gt;&gt; 56];
        next += 8;
        len -= 8;
    }
    while (len) {
        crc = crc32c_table[0][(crc ^ *next++) &amp; 0xff] ^ (crc &gt;&gt; 8);
        len--;
    }
    return (uint32_t)crc ^ 0xffffffff;
}

/* Multiply a matrix times a vector over the Galois field of two elements,
   GF(2).  Each element is a bit in an unsigned integer.  mat must have at
   least as many entries as the power of two for most significant one bit in
   vec. */
static inline uint32_t gf2_matrix_times(uint32_t *mat, uint32_t vec)
{
    uint32_t sum;

    sum = 0;
    while (vec) {
        if (vec &amp; 1)
            sum ^= *mat;
        vec &gt;&gt;= 1;
        mat++;
    }
    return sum;
}

/* Multiply a matrix by itself over GF(2).  Both mat and square must have 32
   rows. */
static inline void gf2_matrix_square(uint32_t *square, uint32_t *mat)
{
    int n;

    for (n = 0; n &lt; 32; n++)
        square[n] = gf2_matrix_times(mat, mat[n]);
}

/* Construct an operator to apply len zeros to a crc.  len must be a power of
   two.  If len is not a power of two, then the result is the same as for the
   largest power of two less than len.  The result for len == 0 is the same as
   for len == 1.  A version of this routine could be easily written for any
   len, but that is not needed for this application. */
static void crc32c_zeros_op(uint32_t *even, size_t len)
{
    int n;
    uint32_t row;
    uint32_t odd[32];       /* odd-power-of-two zeros operator */

    /* put operator for one zero bit in odd */
    odd[0] = POLY;              /* CRC-32C polynomial */
    row = 1;
    for (n = 1; n &lt; 32; n++) {
        odd[n] = row;
        row &lt;&lt;= 1;
    }

    /* put operator for two zero bits in even */
    gf2_matrix_square(even, odd);

    /* put operator for four zero bits in odd */
    gf2_matrix_square(odd, even);

    /* first square will put the operator for one zero byte (eight zero bits),
       in even -- next square puts operator for two zero bytes in odd, and so
       on, until len has been rotated down to zero */
    do {
        gf2_matrix_square(even, odd);
        len &gt;&gt;= 1;
        if (len == 0)
            return;
        gf2_matrix_square(odd, even);
        len &gt;&gt;= 1;
    } while (len);

    /* answer ended up in odd -- copy to even */
    for (n = 0; n &lt; 32; n++)
        even[n] = odd[n];
}

/* Take a length and build four lookup tables for applying the zeros operator
   for that length, byte-by-byte on the operand. */
static void crc32c_zeros(uint32_t zeros[][256], size_t len)
{
    uint32_t n;
    uint32_t op[32];

    crc32c_zeros_op(op, len);
    for (n = 0; n &lt; 256; n++) {
        zeros[0][n] = gf2_matrix_times(op, n);
        zeros[1][n] = gf2_matrix_times(op, n &lt;&lt; 8);
        zeros[2][n] = gf2_matrix_times(op, n &lt;&lt; 16);
        zeros[3][n] = gf2_matrix_times(op, n &lt;&lt; 24);
    }
}

/* Apply the zeros operator table to crc. */
static inline uint32_t crc32c_shift(uint32_t zeros[][256], uint32_t crc)
{
    return zeros[0][crc &amp; 0xff] ^ zeros[1][(crc &gt;&gt; 8) &amp; 0xff] ^
           zeros[2][(crc &gt;&gt; 16) &amp; 0xff] ^ zeros[3][crc &gt;&gt; 24];
}

/* Block sizes for three-way parallel crc computation.  LONG and SHORT must
   both be powers of two.  The associated string constants must be set
   accordingly, for use in constructing the assembler instructions. */
#define LONG 8192
#define LONGx1 ""8192""
#define LONGx2 ""16384""
#define SHORT 256
#define SHORTx1 ""256""
#define SHORTx2 ""512""

/* Tables for hardware crc that shift a crc by LONG and SHORT zeros. */
static pthread_once_t crc32c_once_hw = PTHREAD_ONCE_INIT;
static uint32_t crc32c_long[4][256];
static uint32_t crc32c_short[4][256];

/* Initialize tables for shifting crcs. */
static void crc32c_init_hw(void)
{
    crc32c_zeros(crc32c_long, LONG);
    crc32c_zeros(crc32c_short, SHORT);
}

/* Compute CRC-32C using the Intel hardware instruction. */
static uint32_t crc32c_hw(uint32_t crc, const void *buf, size_t len)
{
    const unsigned char *next = buf;
    const unsigned char *end;
    uint64_t crc0, crc1, crc2;      /* need to be 64 bits for crc32q */

    /* populate shift tables the first time through */
    pthread_once(&amp;crc32c_once_hw, crc32c_init_hw);

    /* pre-process the crc */
    crc0 = crc ^ 0xffffffff;

    /* compute the crc for up to seven leading bytes to bring the data pointer
       to an eight-byte boundary */
    while (len &amp;&amp; ((uintptr_t)next &amp; 7) != 0) {
        __asm__(""crc32b\t"" ""(%1), %0""
                : ""=r""(crc0)
                : ""r""(next), ""0""(crc0));
        next++;
        len--;
    }

    /* compute the crc on sets of LONG*3 bytes, executing three independent crc
       instructions, each on LONG bytes -- this is optimized for the Nehalem,
       Westmere, Sandy Bridge, and Ivy Bridge architectures, which have a
       throughput of one crc per cycle, but a latency of three cycles */
    while (len &gt;= LONG*3) {
        crc1 = 0;
        crc2 = 0;
        end = next + LONG;
        do {
            __asm__(""crc32q\t"" ""(%3), %0\n\t""
                    ""crc32q\t"" LONGx1 ""(%3), %1\n\t""
                    ""crc32q\t"" LONGx2 ""(%3), %2""
                    : ""=r""(crc0), ""=r""(crc1), ""=r""(crc2)
                    : ""r""(next), ""0""(crc0), ""1""(crc1), ""2""(crc2));
            next += 8;
        } while (next &lt; end);
        crc0 = crc32c_shift(crc32c_long, crc0) ^ crc1;
        crc0 = crc32c_shift(crc32c_long, crc0) ^ crc2;
        next += LONG*2;
        len -= LONG*3;
    }

    /* do the same thing, but now on SHORT*3 blocks for the remaining data less
       than a LONG*3 block */
    while (len &gt;= SHORT*3) {
        crc1 = 0;
        crc2 = 0;
        end = next + SHORT;
        do {
            __asm__(""crc32q\t"" ""(%3), %0\n\t""
                    ""crc32q\t"" SHORTx1 ""(%3), %1\n\t""
                    ""crc32q\t"" SHORTx2 ""(%3), %2""
                    : ""=r""(crc0), ""=r""(crc1), ""=r""(crc2)
                    : ""r""(next), ""0""(crc0), ""1""(crc1), ""2""(crc2));
            next += 8;
        } while (next &lt; end);
        crc0 = crc32c_shift(crc32c_short, crc0) ^ crc1;
        crc0 = crc32c_shift(crc32c_short, crc0) ^ crc2;
        next += SHORT*2;
        len -= SHORT*3;
    }

    /* compute the crc on the remaining eight-byte units less than a SHORT*3
       block */
    end = next + (len - (len &amp; 7));
    while (next &lt; end) {
        __asm__(""crc32q\t"" ""(%1), %0""
                : ""=r""(crc0)
                : ""r""(next), ""0""(crc0));
        next += 8;
    }
    len &amp;= 7;

    /* compute the crc for up to seven trailing bytes */
    while (len) {
        __asm__(""crc32b\t"" ""(%1), %0""
                : ""=r""(crc0)
                : ""r""(next), ""0""(crc0));
        next++;
        len--;
    }

    /* return a post-processed crc */
    return (uint32_t)crc0 ^ 0xffffffff;
}

/* Check for SSE 4.2.  SSE 4.2 was first supported in Nehalem processors
   introduced in November, 2008.  This does not check for the existence of the
   cpuid instruction itself, which was introduced on the 486SL in 1992, so this
   will fail on earlier x86 processors.  cpuid works on all Pentium and later
   processors. */
#define SSE42(have) \
    do { \
        uint32_t eax, ecx; \
        eax = 1; \
        __asm__(""cpuid"" \
                : ""=c""(ecx) \
                : ""a""(eax) \
                : ""%ebx"", ""%edx""); \
        (have) = (ecx &gt;&gt; 20) &amp; 1; \
    } while (0)

/* Compute a CRC-32C.  If the crc32 instruction is available, use the hardware
   version.  Otherwise, use the software version. */
uint32_t crc32c(uint32_t crc, const void *buf, size_t len)
{
    int sse42;

    SSE42(sse42);
    return sse42 ? crc32c_hw(crc, buf, len) : crc32c_sw(crc, buf, len);
}

#ifdef TEST

#define SIZE (262144*3)
#define CHUNK SIZE

int main(int argc, char **argv)
{
    char *buf;
    ssize_t got;
    size_t off, n;
    uint32_t crc;

    (void)argv;
    crc = 0;
    buf = malloc(SIZE);
    if (buf == NULL) {
        fputs(""out of memory"", stderr);
        return 1;
    }
    while ((got = read(0, buf, SIZE)) &gt; 0) {
        off = 0;
        do {
            n = (size_t)got - off;
            if (n &gt; CHUNK)
                n = CHUNK;
            crc = argc &gt; 1 ? crc32c_sw(crc, buf + off, n) :
                             crc32c(crc, buf + off, n);
            off += n;
        } while (off &lt; (size_t)got);
    }
    free(buf);
    if (got == -1) {
        fputs(""read error\n"", stderr);
        return 1;
    }
    printf(""%08x\n"", crc);
    return 0;
}

#endif /* TEST */
</code></pre>
",Mark Adler,Mark Adler,1373862514,1375403033,1375403033
http://stackoverflow.com/a/1765088/2683223,Convert string from __DATE__ into a time_t,13326,tfinniga,Brian Tompsett - ,1258651070,1498180830,1465495409,https://stackoverflow.com/questions/1765014/convert-string-from-date-into-a-time-t,"<p>Edit: the corrected function should look something like this:</p>

<pre><code>time_t cvt_TIME(char const *time) { 
    char s_month[5];
    int month, day, year;
    struct tm t = {0};
    static const char month_names[] = ""JanFebMarAprMayJunJulAugSepOctNovDec"";

    sscanf(time, ""%s %d %d"", s_month, &amp;day, &amp;year);

    month = (strstr(month_names, s_month)-month_names)/3;

    t.tm_mon = month;
    t.tm_mday = day;
    t.tm_year = year - 1900;
    t.tm_isdst = -1;

    return mktime(&amp;t);
}
</code></pre>
",Jerry Coffin,Jerry Coffin,1258651830,1384488470,1384488470
http://stackoverflow.com/a/17710503/123776,What is the most broad P3P header that will work with IE?,14813,ripper234,ripper234,1320744626,1527506442,1320748599,https://stackoverflow.com/questions/8048306/what-is-the-most-broad-p3p-header-that-will-work-with-ie,"<blockquote>
  <p>""I want to skip the nasty details of the P3P policy""</p>
</blockquote>

<p>It is possible to set a <code>P3P</code> HTTP header without valid compact privacy policy attributes.</p>

<p>Facebook does this. Here is the <code>P3P</code> HTTP header from facebook.com:</p>

<pre><code>P3P: CP=""Facebook does not have a P3P policy. Learn why here: http://fb.me/p3p""
</code></pre>

<p>Google does it too:</p>

<pre><code>p3p: CP=""This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&amp;answer=151657 for more info.""
</code></pre>

<p>This is accepted by Internet Explorer. For example, IE's ""high"" privacy setting blocks all cookies from websites that do not have a compact privacy policy, but cookies accompanied by P3P non-policies like those above are not blocked.</p>

<p>If you implement such a P3P non-policy, be sure to include natural language that explains it is <em>not</em> a real P3P policy, avoid using words that are valid P3P tokens, and also link to the URL of a longer explanation or to your site's real privacy policy.</p>

<hr>

<p>UPDATE: In 2012, Microsoft <a href=""https://blogs.msdn.microsoft.com/ie/2012/02/20/google-bypassing-user-privacy-settings/%20%22%22"" rel=""nofollow noreferrer"">accused Google of bypassing user privacy settings</a> because of this practice, and they <a href=""https://blogs.msdn.microsoft.com/ieinternals/2013/10/16/strict-p3p-validation/"" rel=""nofollow noreferrer"">added a ""strict P3P validation"" setting to IE 10 and 11</a>. When enabled, it rejects cookies that are accompanied by P3P policies that contain undefined tokens. I believe the setting was disabled by default.</p>

<p><a href=""https://msdn.microsoft.com/en-us/library/mt146424(v=vs.85).aspx"" rel=""nofollow noreferrer"">Microsoft finally gave up on P3P</a> as of Windows 10. So for Edge (and IE 11 on Windows 10), a P3P policy has no bearing on cookie acceptance.</p>

<p>You can inspect the <code>User-Agent</code> request header in order to only set the <code>P3P</code> header on affected versions of IE.</p>
",Andre D,Andre D,1374096197,1502910507,1502910507
http://stackoverflow.com/a/17726104/2865523,printf makes setrlimit not working,610,Kevin MOLCARD,Community,1374140037,1374157191,1495541578,https://stackoverflow.com/questions/17719715/printf-makes-setrlimit-not-working,"<p>Here's a better version of the program that demonstrates more facets of the problem.</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;sys/resource.h&gt;
#include &lt;err.h&gt;
#include &lt;fcntl.h&gt;

int
main(int argc, char **argv)
{
        struct rlimit rl;
        int i;

        rl.rlim_cur = 10;
        rl.rlim_max = RLIM_INFINITY;
        if (setrlimit(RLIMIT_NOFILE, &amp;rl))
                err(1, ""setrlimit"");

        printf(""Hello\n"");

        rl.rlim_cur = 100;
        rl.rlim_max = RLIM_INFINITY;
        if (setrlimit(RLIMIT_NOFILE, &amp;rl))
                err(1, ""setrlimit"");

        if (getrlimit(RLIMIT_NOFILE, &amp;rl))
                err(1, ""getrlimit"");
        printf(""limit %lld\n"", rl.rlim_cur);

        for(i = 0; i &lt; 10000; i++) {
                FILE *fp;
#if 1
                if ((fp = fopen(""foo"", ""r"")) == NULL) {
                        err(1, ""failed after %d"", i);
                }
#else
                if (open(""foo"", O_RDONLY) == -1) {
                        err(1, ""failed after %d"", i);
                }
#endif
        }
        return 0;
}
</code></pre>

<p>If you run this program with the ""#if 1"" changed to ""#if 0"" it works as expected. It looks like MacOS reads limits for open files once during initialization of stdio in libc and doesn't read them again later. Your first call to printf initializes stdio in libc and that caches whatever the rlimit value was for number of open files. </p>

<p>Running dtruss on a trivial ""hello, world"" shows:</p>

<pre><code>$ cat &gt; hw.c
#include &lt;stdio.h&gt;
int main() { printf(""hello, world\n""); return 0; }
$ cc -Wall -o hw hw.c &amp;&amp; sudo dtruss ./hw 2&gt;&amp;1 | grep rlimit
getrlimit(0x1008, 0x7FFF58875AE8, 0x7FFF8BE92470)        = 0 0
$
</code></pre>

<p>Which shows that this is in fact what happens.</p>

<p>This is something that you should take up with Apple though, it smells like a bug.</p>
",Art,,1374157191,1374157191,0
http://stackoverflow.com/a/17739731/2726725,How to set focus on input field?,567761,Misha Moroshko,Blackhole,1360674532,1544428955,1410037547,https://stackoverflow.com/questions/14833326/how-to-set-focus-on-input-field,"<p>I've written a two-way binding focus directive, just like model recently.</p>

<p>You can use the focus directive like this:</p>

<pre><code>&lt;input focus=""someFocusVariable""&gt;
</code></pre>

<p>If you make someFocusVariable scope variable <code>true</code> in anywhere in your controller, the input get focused. And if you want to ""blur"" your input then, someFocusVariable can be set to false. It's like Mark Rajcok's first answer but with two-way binding.</p>

<p>Here is the directive:</p>

<pre><code>function Ctrl($scope) {
  $scope.model = ""ahaha""
  $scope.someFocusVariable = true; // If you want to focus initially, set this to true. Else you don't need to define this at all.
}

angular.module('experiement', [])
  .directive('focus', function($timeout, $parse) {
    return {
      restrict: 'A',
      link: function(scope, element, attrs) {
          scope.$watch(attrs.focus, function(newValue, oldValue) {
              if (newValue) { element[0].focus(); }
          });
          element.bind(""blur"", function(e) {
              $timeout(function() {
                  scope.$apply(attrs.focus + ""=false""); 
              }, 0);
          });
          element.bind(""focus"", function(e) {
              $timeout(function() {
                  scope.$apply(attrs.focus + ""=true"");
              }, 0);
          })
      }
    }
  });
</code></pre>

<p>Usage:</p>

<pre><code>&lt;div ng-app=""experiement""&gt;
  &lt;div ng-controller=""Ctrl""&gt;
    An Input: &lt;input ng-model=""model"" focus=""someFocusVariable""&gt;
    &lt;hr&gt;
        &lt;div ng-click=""someFocusVariable=true""&gt;Focus!&lt;/div&gt;  
        &lt;pre&gt;someFocusVariable: {{ someFocusVariable }}&lt;/pre&gt;
        &lt;pre&gt;content: {{ model }}&lt;/pre&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p><strong>Here is the fiddle:</strong></p>

<p><a href=""http://fiddle.jshell.net/ubenzer/9FSL4/8/"" rel=""nofollow noreferrer"">http://fiddle.jshell.net/ubenzer/9FSL4/8/</a></p>
",Umut Benzer,Pramesh Bajracharya,1374216554,1540279389,1540279389
http://stackoverflow.com/a/17800645/405017,Repeat String - Javascript,136450,brad,,1224015018,1558775337,0,https://stackoverflow.com/questions/202605/repeat-string-javascript,"<p>This problem is a well-known / ""classic"" optimization issue for JavaScript, caused by the fact that JavaScript strings are ""immutable"" and addition by concatenation of even a single character to a string requires creation of, including memory allocation for and copying to, an entire new string.</p>

<p>Unfortunately, the accepted answer on this page is wrong, where ""wrong"" means by a performance factor of 3x for simple one-character strings, and 8x-97x for short strings repeated more times, to 300x for repeating sentences, and infinitely wrong when taking the limit of the ratios of complexity of the algorithms as <code>n</code> goes to infinity. Also, there is another answer on this page which is almost right (based on one of the many generations and variations of the correct solution circulating throughout the Internet in the past 13 years). However, this ""almost right"" solution misses a key point of the correct algorithm causing a 50% performance degradation.</p>

<p><a href=""http://jsperf.com/repeating-strings"" rel=""noreferrer"" title=""JS Performance Results for the accepted answer, the top-performing other answer, and this answer"">JS Performance Results for the accepted answer, the top-performing other answer (based on a degraded version of the original algorithm in this answer), and this answer using my algorithm created 13 years ago</a></p>

<p>~ October 2000 I published an algorithm for this exact problem which was widely adapted, modified, then eventually poorly understood and forgotten. To remedy this issue, in August, 2008 I published an article <a href=""http://www.webreference.com/programming/javascript/jkm3/3.html"" rel=""noreferrer"">http://www.webreference.com/programming/javascript/jkm3/3.html</a> explaining the algorithm and using it as an example of simple of general-purpose JavaScript optimizations. By now, <em>Web Reference</em> has scrubbed my contact information and even my name from this article. And once again, the algorithm has been widely adapted, modified, then poorly understood and largely forgotten.</p>

<blockquote>
  <p>Original string repetition/multiplication JavaScript algorithm by
  Joseph Myers, circa Y2K as a text multiplying function within Text.js;
  published August, 2008 in this form by Web Reference:
  <a href=""http://www.webreference.com/programming/javascript/jkm3/3.html"" rel=""noreferrer"">http://www.webreference.com/programming/javascript/jkm3/3.html</a> (The
  article used the function as an example of JavaScript optimizations,
  which is the only for the strange name ""stringFill3."")</p>
</blockquote>

<pre><code>/*
 * Usage: stringFill3(""abc"", 2) == ""abcabc""
 */

function stringFill3(x, n) {
    var s = '';
    for (;;) {
        if (n &amp; 1) s += x;
        n &gt;&gt;= 1;
        if (n) x += x;
        else break;
    }
    return s;
}
</code></pre>

<p>Within two months after publication of that article, this same question was posted to Stack Overflow and flew under my radar until now, when apparently the original algorithm for this problem has once again been forgotten. The best solution available on this Stack Overflow page is a modified version of my solution, possibly separated by several generations. Unfortunately, the modifications ruined the solution's optimality. In fact, by changing the structure of the loop from my original, the modified solution performs a completely unneeded extra step of exponential duplicating (thus joining the largest string used in the proper answer with itself an extra time and then discarding it).</p>

<p>Below ensues a discussion of some JavaScript optimizations related to all of the answers to this problem and for the benefit of all.</p>

<h2>Technique: Avoid references to objects or object properties</h2>

<p>To illustrate how this technique works, we use a real-life JavaScript function which creates strings of whatever length is needed. And as we'll see, more optimizations can be added!</p>

<p>A function like the one used here is to create padding to align columns of text, for formatting money, or for filling block data up to the boundary. A text generation function also allows variable length input for testing any other function that operates on text. This function is one of the important components of the JavaScript text processing module.</p>

<p>As we proceed, we will be covering two more of the most important optimization techniques while developing the original code into an optimized algorithm for creating strings. The final result is an industrial-strength, high-performance function that I've used everywhere--aligning item prices and totals in JavaScript order forms, data formatting and email / text message formatting and many other uses.</p>

<p><strong>Original code for creating strings <code>stringFill1()</code></strong></p>

<pre><code>function stringFill1(x, n) { 
    var s = ''; 
    while (s.length &lt; n) s += x; 
    return s; 
} 
/* Example of output: stringFill1('x', 3) == 'xxx' */ 
</code></pre>

<p>The syntax is here is clear. As you can see, we've used local function variables already, before going on to more optimizations.</p>

<p>Be aware that there's one innocent reference to an object property <code>s.length</code> in the code that hurts its performance. Even worse, the use of this object property reduces the simplicity of the program by making the assumption that the reader knows about the properties of JavaScript string objects.</p>

<p>The use of this object property destroys the generality of the computer program. The program assumes that <code>x</code> must be a string of length one. This limits the application of the <code>stringFill1()</code> function to anything except repetition of single characters. Even single characters cannot be used if they contain multiple bytes like the HTML entity <code>&amp;nbsp;</code>.</p>

<p>The worst problem caused by this unnecessary use of an object property is that the function creates an infinite loop if tested on an empty input string <code>x</code>. To check generality, apply a program to the smallest possible amount of input. A program which crashes when asked to exceed the amount of available memory has an excuse. A program like this one which crashes when asked to produce nothing is unacceptable. Sometimes pretty code is poisonous code.</p>

<p>Simplicity may be an ambiguous goal of computer programming, but generally it's not. When a program lacks any reasonable level of generality, it's not valid to say, ""The program is good enough as far as it goes."" As you can see, using the <code>string.length</code> property prevents this program from working in a general setting, and in fact, the incorrect program is ready to cause a browser or system crash.</p>

<p>Is there a way to improve the performance of this JavaScript as well as take care of these two serious problems?</p>

<p>Of course. Just use integers.</p>

<p><strong>Optimized code for creating strings <code>stringFill2()</code></strong></p>

<pre><code>function stringFill2(x, n) { 
    var s = ''; 
    while (n-- &gt; 0) s += x; 
    return s; 
} 
</code></pre>

<p><strong>Timing code to compare <code>stringFill1()</code> and <code>stringFill2()</code></strong></p>

<pre><code>function testFill(functionToBeTested, outputSize) { 
    var i = 0, t0 = new Date(); 
    do { 
        functionToBeTested('x', outputSize); 
        t = new Date() - t0; 
        i++; 
    } while (t &lt; 2000); 
    return t/i/1000; 
} 
seconds1 = testFill(stringFill1, 100); 
seconds2 = testFill(stringFill2, 100); 
</code></pre>

<p><strong>The success so far of <code>stringFill2()</code></strong></p>

<p><code>stringFill1()</code> takes 47.297 microseconds (millionths of a second) to fill a 100-byte string, and <code>stringFill2()</code> takes 27.68 microseconds to do the same thing. That's almost a doubling in performance by avoiding a reference to an object property.</p>

<h2>Technique: Avoid adding short strings to long strings</h2>

<p>Our previous result looked good--very good, in fact. The improved function <code>stringFill2()</code> is much faster due to the use of our first two optimizations. Would you believe it if I told you that it can be improved to be many times faster than it is now?</p>

<p>Yes, we can accomplish that goal. Right now we need to explain how we avoid appending short strings to long strings.</p>

<p>The short-term behavior appears to be quite good, in comparison to our original function. Computer scientists like to analyze the ""asymptotic behavior"" of a function or computer program algorithm, which means to study its long-term behavior by testing it with larger inputs. Sometimes without doing further tests, one never becomes aware of ways that a computer program could be improved. To see what will happen, we're going to create a 200-byte string.</p>

<p><strong>The problem that shows up with <code>stringFill2()</code></strong></p>

<p>Using our timing function, we find that the time increases to 62.54 microseconds for a 200-byte string, compared to 27.68 for a 100-byte string. It seems like the time should be doubled for doing twice as much work, but instead it's tripled or quadrupled. From programming experience, this result seems strange, because if anything, the function should be slightly faster since work is being done more efficiently (200 bytes per function call rather than 100 bytes per function call). This issue has to do with an insidious property of JavaScript strings: JavaScript strings are ""immutable.""</p>

<p>Immutable means that you cannot change a string once it's created. By adding on one byte at a time, we're not using up one more byte of effort. We're actually recreating the entire string plus one more byte.</p>

<p>In effect, to add one more byte to a 100-byte string, it takes 101 bytes worth of work. Let's briefly analyze the computational cost for creating a string of <code>N</code> bytes. The cost of adding the first byte is 1 unit of computational effort. The cost of adding the second byte isn't one unit but 2 units (copying the first byte to a new string object as well as adding the second byte). The third byte requires a cost of 3 units, etc.</p>

<p><code>C(N) = 1 + 2 + 3 + ... + N = N(N+1)/2 = O(N^2)</code>. The symbol <code>O(N^2)</code> is pronounced Big O of N squared, and it means that the computational cost in the long run is proportional to the square of the string length. To create 100 characters takes 10,000 units of work, and to create 200 characters takes 40,000 units of work.</p>

<p>This is why it took more than twice as long to create 200 characters than 100 characters. In fact, it should have taken four times as long. Our programming experience was correct in that the work is being done slightly more efficiently for longer strings, and hence it took only about three times as long. Once the overhead of the function call becomes negligible as to how long of a string we're creating, it will actually take four times as much time to create a string twice as long.</p>

<p>(Historical note: This analysis doesn't necessarily apply to strings in source code, such as <code>html = 'abcd\n' + 'efgh\n' + ... + 'xyz.\n'</code>, since the JavaScript source code compiler can join the strings together before making them into a JavaScript string object. Just a few years ago, the KJS implementation of JavaScript would freeze or crash when loading long strings of source code joined by plus signs. Since the computational time was <code>O(N^2)</code> it wasn't difficult to make Web pages which overloaded the Konqueror Web browser or Safari, which used the KJS JavaScript engine core. I first came across this issue when I was developing a markup language and JavaScript markup language parser, and then I discovered what was causing the problem when I wrote my script for JavaScript Includes.)</p>

<p>Clearly this rapid degradation of performance is a huge problem. How can we deal with it, given that we cannot change JavaScript's way of handling strings as immutable objects? The solution is to use an algorithm which recreates the string as few times as possible.</p>

<p>To clarify, our goal is to avoid adding short strings to long strings, since in order to add the short string, the entire long string also must be duplicated.</p>

<p>How the algorithm works to avoid adding short strings to long strings</p>

<p>Here's a good way to reduce the number of times new string objects are created. Concatenate longer lengths of string together so that more than one byte at a time is added to the output.</p>

<p>For instance, to make a string of length <code>N = 9</code>:</p>

<pre><code>x = 'x'; 
s = ''; 
s += x; /* Now s = 'x' */ 
x += x; /* Now x = 'xx' */ 
x += x; /* Now x = 'xxxx' */ 
x += x; /* Now x = 'xxxxxxxx' */ 
s += x; /* Now s = 'xxxxxxxxx' as desired */
</code></pre>

<p>Doing this required creating a string of length 1, creating a string of length 2, creating a string of length 4, creating a string of length 8, and finally, creating a string of length 9. How much cost have we saved?</p>

<p>Old cost <code>C(9) = 1 + 2 + 3 + 4 + 5 + 6 + 7 + 9 = 45</code>.</p>

<p>New cost <code>C(9) = 1 + 2 + 4 + 8 + 9 = 24</code>.</p>

<p>Note that we had to add a string of length 1 to a string of length 0, then a string of length 1 to a string of length 1, then a string of length 2 to a string of length 2, then a string of length 4 to a string of length 4, then a string of length 8 to a string of length 1, in order to obtain a string of length 9. What we're doing can be summarized as avoiding adding short strings to long strings, or in other words, trying to concatenate strings together that are of equal or nearly equal length.</p>

<p>For the old computational cost we found a formula <code>N(N+1)/2</code>. Is there a formula for the new cost? Yes, but it's complicated. The important thing is that it is <code>O(N)</code>, and so doubling the string length will approximately double the amount of work rather than quadrupling it.</p>

<p>The code that implements this new idea is nearly as complicated as the formula for the computational cost. When you read it, remember that <code>&gt;&gt;= 1</code> means to shift right by 1 byte. So if <code>n = 10011</code> is a binary number, then <code>n &gt;&gt;= 1</code> results in the value <code>n = 1001</code>.</p>

<p>The other part of the code you might not recognize is the bitwise and operator, written <code>&amp;</code>. The expression <code>n &amp; 1</code> evaluates true if the last binary digit of <code>n</code> is 1, and false if the last binary digit of <code>n</code> is 0.</p>

<p><strong>New highly-efficient <code>stringFill3()</code> function</strong></p>

<pre><code>function stringFill3(x, n) { 
    var s = ''; 
    for (;;) { 
        if (n &amp; 1) s += x; 
        n &gt;&gt;= 1; 
        if (n) x += x; 
        else break; 
    } 
    return s; 
} 
</code></pre>

<p>It looks ugly to the untrained eye, but it's performance is nothing less than lovely.</p>

<p>Let's see just how well this function performs. After seeing the results, it's likely that you'll never forget the difference between an <code>O(N^2)</code> algorithm and an <code>O(N)</code> algorithm.</p>

<p><code>stringFill1()</code> takes 88.7 microseconds (millionths of a second) to create a 200-byte string, <code>stringFill2()</code> takes 62.54, and <code>stringFill3()</code> takes only 4.608. What made this algorithm so much better? All of the functions took advantage of using local function variables, but taking advantage of the second and third optimization techniques added a twenty-fold improvement to performance of <code>stringFill3()</code>.</p>

<p><strong>Deeper analysis</strong></p>

<p>What makes this particular function blow the competition out of the water?</p>

<p>As I've mentioned, the reason that both of these functions, <code>stringFill1()</code> and <code>stringFill2()</code>, run so slowly is that JavaScript strings are immutable. Memory cannot be reallocated to allow one more byte at a time to be appended to the string data stored by JavaScript. Every time one more byte is added to the end of the string, the entire string is regenerated from beginning to end.</p>

<p>Thus, in order to improve the script's performance, one must precompute longer length strings by concatenating two strings together ahead of time, and then recursively building up the desired string length.</p>

<p>For instance, to create a 16-letter byte string, first a two byte string would be precomputed. Then the two byte string would be reused to precompute a four-byte string. Then the four-byte string would be reused to precompute an eight byte string. Finally, two eight-byte strings would be reused to create the desired new string of 16 bytes. Altogether four new strings had to be created, one of length 2, one of length 4, one of length 8 and one of length 16. The total cost is 2 + 4 + 8 + 16 = 30.</p>

<p>In the long run this efficiency can be computed by adding in reverse order and using a geometric series starting with a first term a1 = N and having a common ratio of r = 1/2. The sum of a geometric series is given by <code>a_1 / (1-r) = 2N</code>.</p>

<p>This is more efficient than adding one character to create a new string of length 2, creating a new string of length 3, 4, 5, and so on, until 16. The previous algorithm used that process of adding a single byte at a time, and the total cost of it would be <code>n (n + 1) / 2 = 16 (17) / 2 = 8 (17) = 136</code>.</p>

<p>Obviously, 136 is a much greater number than 30, and so the previous algorithm takes much, much more time to build up a string.</p>

<p>To compare the two methods you can see how much faster the recursive algorithm (also called ""divide and conquer"") is on a string of length 123,457. On my FreeBSD computer this algorithm, implemented in the <code>stringFill3()</code> function, creates the string in 0.001058 seconds, while the original <code>stringFill1()</code> function creates the string in 0.0808 seconds. The new function is 76 times faster.</p>

<p>The difference in performance grows as the length of the string becomes larger. In the limit as larger and larger strings are created, the original function behaves roughly like <code>C1</code> (constant) times <code>N^2</code>, and the new function behaves like <code>C2</code> (constant) times <code>N</code>.</p>

<p>From our experiment we can determine the value of <code>C1</code> to be <code>C1 = 0.0808 / (123457)2 = .00000000000530126997</code>, and the value of <code>C2</code> to be <code>C2 = 0.001058 / 123457 = .00000000856978543136</code>. In 10 seconds, the new function could create a string containing 1,166,890,359 characters. In order to create this same string, the old function would need 7,218,384 seconds of time.</p>

<p>This is almost three months compared to ten seconds!</p>

<p>I'm only answering (several years late) because my original solution to this problem has been floating around the Internet for more than 10 years, and apparently is still poorly-understood by the few who do remember it. I thought that by writing an article about it here I would help:</p>

<p><a href=""http://www.webreference.com/programming/javascript/jkm3/3.html"" rel=""noreferrer"" title=""Performance Optimizations for High Speed JavaScript / Page 3"">Performance Optimizations for High Speed JavaScript / Page 3</a></p>

<p>Unfortunately, some of the other solutions presented here are still some of those that would take three months to produce the same amount of output that a proper solution creates in 10 seconds.</p>

<p>I want to take the time to reproduce part of the article here as a canonical answer on Stack Overflow.</p>

<p>Note that the best-performing algorithm here is clearly based on my algorithm and was probably inherited from someone else's 3rd or 4th generation adaptation. Unfortunately, the modifications resulted in reducing its performance. The variation of my solution presented here perhaps did not understand my confusing <code>for (;;)</code> expression which looks like the main infinite loop of a server written in C, and which was simply designed to allow a carefully-positioned break statement for loop control, the most compact way to avoid exponentially replicating the string one extra unnecessary time.</p>
",Joseph Myers,Joseph Myers,1374547478,1375199766,1375199766
http://stackoverflow.com/a/17827724/1360263,Size of a directory,16639,smallB,ST3,1333556794,1475881279,1379149544,https://stackoverflow.com/questions/10015341/size-of-a-directory,"<p>Zilog has written quite good answer, but I would make that in similar but different way.</p>

<p>I have my types definition file with:</p>

<pre><code>typedef std::wstring String;
typedef std::vector&lt;String&gt; StringVector;
typedef unsigned long long uint64_t;
</code></pre>

<p>and code is:</p>

<pre><code>uint64_t CalculateDirSize(const String &amp;path, StringVector *errVect = NULL, uint64_t size = 0)
{
    WIN32_FIND_DATA data;
    HANDLE sh = NULL;
    sh = FindFirstFile((path + L""\\*"").c_str(), &amp;data);

    if (sh == INVALID_HANDLE_VALUE )
    {
        //if we want, store all happened error  
        if (errVect != NULL)
            errVect -&gt;push_back(path);
        return size;
    }

    do
    {
        // skip current and parent
        if (!IsBrowsePath(data.cFileName))
        {
            // if found object is ...
            if ((data.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY) == FILE_ATTRIBUTE_DIRECTORY)
                // directory, then search it recursievly
                size = CalculateDirSize(path + L""\\"" + data.cFileName, NULL, size);
            else
                // otherwise get object size and add it to directory size
                size += (uint64_t) (data.nFileSizeHigh * (MAXDWORD ) + data.nFileSizeLow);
        }

    } while (FindNextFile(sh, &amp;data)); // do

    FindClose(sh);

    return size;
} 

bool IsBrowsePath(const String&amp; path)
{
    return (path == _T(""."") || path == _T(""..""));
}
</code></pre>

<p>This uses UNICODE and returns failed dirs if you want that.</p>

<p>To call use:</p>

<pre><code>StringVector vect;
CalculateDirSize(L""C:\\boost_1_52_0"", &amp;vect);
CalculateDirSize(L""C:\\boost_1_52_0"");
</code></pre>

<p>But never pass <code>size</code></p>
",ST3,ST3,1374650795,1424774758,1424774758
http://stackoverflow.com/a/1782990/276949,How to join filesystem path strings in PHP?,45224,user89021,kiamlaluno,1246956729,1541172129,1315444399,https://stackoverflow.com/questions/1091107/how-to-join-filesystem-path-strings-in-php,"<p>@deceze's function doesn't keep the leading / when trying to join a path that starts with a Unix absolute path, e.g. <code>joinPaths('/var/www', '/vhosts/site');</code>.</p>

<pre><code>function unix_path() {
  $args = func_get_args();
  $paths = array();

  foreach($args as $arg) {
    $paths = array_merge($paths, (array)$arg);
  }

  foreach($paths as &amp;$path) {
    $path = trim($path, '/');
  }

  if (substr($args[0], 0, 1) == '/') {
    $paths[0] = '/' . $paths[0];
  }

  return join('/', $paths);
}
</code></pre>
",David Miller,kiamlaluno,1258980752,1315443910,1315443910
http://stackoverflow.com/a/17861016/115145,Convert InputStream to byte array in Java,864331,JGC,Duncan Jones,1250062042,1555947122,1410343749,https://stackoverflow.com/questions/1264709/convert-inputstream-to-byte-array-in-java,"<pre><code>public static byte[] getBytesFromInputStream(InputStream is) throws IOException {
    ByteArrayOutputStream os = new ByteArrayOutputStream(); 
    byte[] buffer = new byte[0xFFFF];
    for (int len = is.read(buffer); len != -1; len = is.read(buffer)) { 
        os.write(buffer, 0, len);
    }
    return os.toByteArray();
}
</code></pre>
",oliverkn,Ivan Gammel,1374762823,1524910895,1524910895
http://stackoverflow.com/a/17870390/3950982,Convert URL to normal windows filename Java,43348,David,Andrey Adamovich,1306618207,1459985060,1306618529,https://stackoverflow.com/questions/6164448/convert-url-to-normal-windows-filename-java,"<p>The current recommendation (with JDK 1.7+) is to convert URL  URI  Path. So to convert a URL to File, you would say <code>Paths.get(url.toURI()).toFile()</code>. If you cant use JDK 1.7 yet, I would recommend <code>new File(URI.getSchemeSpecificPart())</code>.</p>

<p>Converting file  URI: First Ill show you some examples of what URIs you are likely to get in Java.</p>

<pre><code>                          -classpath URLClassLoader File.toURI()                Path.toUri()
C:\Program Files          file:/C:/Program%20Files/ file:/C:/Program%20Files/   file:///C:/Program%20Files/
C:\main.c++               file:/C:/main.c++         file:/C:/main.c++           file:///C:/main.c++
\\VBOXSVR\Downloads       file://VBOXSVR/Downloads/ file:////VBOXSVR/Downloads/ file://VBOXSVR/Downloads/
C:\Rsume.txt             file:/C:/R%c3%a9sume.txt  file:/C:/Rsume.txt         file:///C:/Rsume.txt
\\?\C:\Windows (non-path) file://%3f/C:/Windows/    file:////%3F/C:/Windows/    InvalidPathException
</code></pre>

<p>Some observations about these URIs:</p>

<ul>
<li>The URI specifications are  <a href=""http://tools.ietf.org/html/rfc1738"">RFC 1738: URL</a>, superseded by <a href=""http://tools.ietf.org/html/rfc2396"">RFC 2396: URI</a>, superseded by <a href=""http://tools.ietf.org/html/rfc3986"">RFC 3986: URI</a>. (The WHATWG also has a <a href=""http://url.spec.whatwg.org/"">URI spec</a>, but it does not specify how file URIs should be interpreted.) Any reserved characters within the path are percent-quoted, and non-ascii characters in a URI are percent-quoted when you call URI.toASCIIString().</li>
<li>File.toURI() is worse than Path.toUri() because File.toURI() <a href=""https://bugs.openjdk.java.net/browse/JDK-6356783?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel"">returns an unusual non-RFC 1738 URI</a> (gives file:/ instead of file:///) and does not format URIs for UNC paths according to <a href=""http://blogs.msdn.com/b/ie/archive/2006/12/06/file-uris-in-windows.aspx"">Microsofts preferred format</a>. None of these UNC URIs work in Firefox though (Firefox requires file://///).</li>
<li>Path is more strict than File; you cannot construct an invalid Path from <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx"">\.\ prefix</a>. These prefixes are not used as part of the path itself, but they can be passed to Win32 APIs.</li>
</ul>

<p>Converting URI  file: Lets try converting the preceding examples to files:</p>

<pre><code>                            new File(URI)            Paths.get(URI)           new File(URI.getSchemeSpecificPart())
file:///C:/Program%20Files  C:\Program Files         C:\Program Files         C:\Program Files
file:/C:/Program%20Files    C:\Program Files         C:\Program Files         C:\Program Files
file:///C:/main.c++         C:\main.c++              C:\main.c++              C:\main.c++
file://VBOXSVR/Downloads/   IllegalArgumentException \\VBOXSVR\Downloads\     \\VBOXSVR\Downloads
file:////VBOXSVR/Downloads/ \\VBOXSVR\Downloads      \\VBOXSVR\Downloads\     \\VBOXSVR\Downloads
file://///VBOXSVR/Downloads \\VBOXSVR\Downloads      \\VBOXSVR\Downloads\     \\VBOXSVR\Downloads
file://%3f/C:/Windows/      IllegalArgumentException IllegalArgumentException \\?\C:\Windows
file:////%3F/C:/Windows/    \\?\C:\Windows           InvalidPathException     \\?\C:\Windows
</code></pre>

<p>Again, using <code>Paths.get(URI)</code> is preferred over <code>new File(URI)</code>, because Path is able to handle the UNC URI and reject invalid paths with the \?\ prefix. But if you cant use Java 1.7, say <code>new File(URI.getSchemeSpecificPart())</code> instead.</p>

<p>By the way, do <strong>not</strong> use <code>URLDecoder</code> to decode a file URL. For files containing + such as file:///C:/main.c++,  <code>URLDecoder</code> will turn it into C:\main.c&nbsp;&nbsp;! <code>URLDecoder</code> is only for parsing application/x-www-form-urlencoded HTML form submissions within a URIs query (<code>param=value&amp;param=value</code>), not for unquoting a URIs path.</p>

<p>2014-09: edited to add examples.</p>
",yonran,yonran,1374794379,1410162729,1410162729
http://stackoverflow.com/a/17871737/470451,Regular expression that matches valid IPv6 addresses,139543,Readonly,Stefan Lasiewski,1221026244,1526541138,1446501513,https://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses,"<p>I was unable to get @Factor Mystic's answer to work with POSIX regular expressions, so I wrote one that works with POSIX regular expressions and PERL regular expressions.</p>

<p>It should match:</p>

<ul>
<li>IPv6 addresses</li>
<li>zero compressed IPv6 addresses (<a href=""https://tools.ietf.org/html/rfc5952#section-2.2"" rel=""noreferrer"">section 2.2 of rfc5952</a>)</li>
<li>link-local IPv6 addresses with zone index (<a href=""https://tools.ietf.org/html/rfc4007#section-11"" rel=""noreferrer"">section 11 of rfc4007</a>)</li>
<li>IPv4-Embedded IPv6 Address (<a href=""https://tools.ietf.org/html/rfc6052#section-2"" rel=""noreferrer"">section 2 of rfc6052</a>)</li>
<li>IPv4-mapped IPv6 addresses (<a href=""https://tools.ietf.org/html/rfc2765#section-2.1"" rel=""noreferrer"">section 2.1 of rfc2765</a>)</li>
<li>IPv4-translated addresses  (<a href=""https://tools.ietf.org/html/rfc2765#section-2.1"" rel=""noreferrer"">section 2.1 of rfc2765</a>)</li>
</ul>

<p>IPv6 Regular Expression:</p>

<pre><code>(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))
</code></pre>

<p>For ease of reading, the following is the above regular expression split at major OR points into separate lines:</p>

<pre><code># IPv6 RegEx
(
([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|          # 1:2:3:4:5:6:7:8
([0-9a-fA-F]{1,4}:){1,7}:|                         # 1::                              1:2:3:4:5:6:7::
([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|         # 1::8             1:2:3:4:5:6::8  1:2:3:4:5:6::8
([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|  # 1::7:8           1:2:3:4:5::7:8  1:2:3:4:5::8
([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|  # 1::6:7:8         1:2:3:4::6:7:8  1:2:3:4::8
([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|  # 1::5:6:7:8       1:2:3::5:6:7:8  1:2:3::8
([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|  # 1::4:5:6:7:8     1:2::4:5:6:7:8  1:2::8
[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|       # 1::3:4:5:6:7:8   1::3:4:5:6:7:8  1::8  
:((:[0-9a-fA-F]{1,4}){1,7}|:)|                     # ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8 ::8       ::     
fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|     # fe80::7:8%eth0   fe80::7:8%1     (link-local IPv6 addresses with zone index)
::(ffff(:0{1,4}){0,1}:){0,1}
((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}
(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|          # ::255.255.255.255   ::ffff:255.255.255.255  ::ffff:0:255.255.255.255  (IPv4-mapped IPv6 addresses and IPv4-translated addresses)
([0-9a-fA-F]{1,4}:){1,4}:
((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}
(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])           # 2001:db8:3:4::192.0.2.33  64:ff9b::192.0.2.33 (IPv4-Embedded IPv6 Address)
)

# IPv4 RegEx
((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])
</code></pre>

<p>To make the above easier to understand, the following ""pseudo"" code replicates the above:</p>

<pre><code>IPV4SEG  = (25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])
IPV4ADDR = (IPV4SEG\.){3,3}IPV4SEG
IPV6SEG  = [0-9a-fA-F]{1,4}
IPV6ADDR = (
           (IPV6SEG:){7,7}IPV6SEG|                # 1:2:3:4:5:6:7:8
           (IPV6SEG:){1,7}:|                      # 1::                                 1:2:3:4:5:6:7::
           (IPV6SEG:){1,6}:IPV6SEG|               # 1::8               1:2:3:4:5:6::8   1:2:3:4:5:6::8
           (IPV6SEG:){1,5}(:IPV6SEG){1,2}|        # 1::7:8             1:2:3:4:5::7:8   1:2:3:4:5::8
           (IPV6SEG:){1,4}(:IPV6SEG){1,3}|        # 1::6:7:8           1:2:3:4::6:7:8   1:2:3:4::8
           (IPV6SEG:){1,3}(:IPV6SEG){1,4}|        # 1::5:6:7:8         1:2:3::5:6:7:8   1:2:3::8
           (IPV6SEG:){1,2}(:IPV6SEG){1,5}|        # 1::4:5:6:7:8       1:2::4:5:6:7:8   1:2::8
           IPV6SEG:((:IPV6SEG){1,6})|             # 1::3:4:5:6:7:8     1::3:4:5:6:7:8   1::8
           :((:IPV6SEG){1,7}|:)|                  # ::2:3:4:5:6:7:8    ::2:3:4:5:6:7:8  ::8       ::       
           fe80:(:IPV6SEG){0,4}%[0-9a-zA-Z]{1,}|  # fe80::7:8%eth0     fe80::7:8%1  (link-local IPv6 addresses with zone index)
           ::(ffff(:0{1,4}){0,1}:){0,1}IPV4ADDR|  # ::255.255.255.255  ::ffff:255.255.255.255  ::ffff:0:255.255.255.255 (IPv4-mapped IPv6 addresses and IPv4-translated addresses)
           (IPV6SEG:){1,4}:IPV4ADDR               # 2001:db8:3:4::192.0.2.33  64:ff9b::192.0.2.33 (IPv4-Embedded IPv6 Address)
           )
</code></pre>

<p>I posted a script on GitHub which tests the regular expression: <a href=""https://gist.github.com/syzdek/6086792"" rel=""noreferrer"">https://gist.github.com/syzdek/6086792</a></p>
",David M. Syzdek,Qix,1374804383,1511097483,1511097483
http://stackoverflow.com/a/17902439/1558890,How to implement make_unique function in C++11?,30313,user1899020,sasha.sochka,1374958750,1374965307,1374959207,https://stackoverflow.com/questions/17902405/how-to-implement-make-unique-function-in-c11,"<p>Version by Stephan T. Lavavej (also known by STL) who originally proposed adding this function to C++14</p>

<pre><code>#include &lt;cstddef&gt;
#include &lt;memory&gt;
#include &lt;type_traits&gt;
#include &lt;utility&gt;

namespace std {
    template&lt;class T&gt; struct _Unique_if {
        typedef unique_ptr&lt;T&gt; _Single_object;
    };

    template&lt;class T&gt; struct _Unique_if&lt;T[]&gt; {
        typedef unique_ptr&lt;T[]&gt; _Unknown_bound;
    };

    template&lt;class T, size_t N&gt; struct _Unique_if&lt;T[N]&gt; {
        typedef void _Known_bound;
    };

    template&lt;class T, class... Args&gt;
        typename _Unique_if&lt;T&gt;::_Single_object
        make_unique(Args&amp;&amp;... args) {
            return unique_ptr&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...));
        }

    template&lt;class T&gt;
        typename _Unique_if&lt;T&gt;::_Unknown_bound
        make_unique(size_t n) {
            typedef typename remove_extent&lt;T&gt;::type U;
            return unique_ptr&lt;T&gt;(new U[n]());
        }

    template&lt;class T, class... Args&gt;
        typename _Unique_if&lt;T&gt;::_Known_bound
        make_unique(Args&amp;&amp;...) = delete;
}
</code></pre>

<p>EDIT: updated code to the <a href=""http://isocpp.org/files/papers/N3656.txt"" rel=""noreferrer"">N3656</a> standard revision</p>
",sasha.sochka,sasha.sochka,1374958995,1374959664,1374959664
http://stackoverflow.com/a/17917624/265522,Check if a template has a specialization for a given type,1389,Manu343726,Manu343726,1375004274,1437156884,1437156884,https://stackoverflow.com/questions/17906888/check-if-a-template-has-a-specialization-for-a-given-type,"<blockquote>
  <p>@BartekBanachewicz the idea is to provide user friendly compiler errors through asserts. 
  If i can check (Following with the point_2d example) if the coordinates passed are addable
  (That is, a specialization of add metafuncion is or not defined for that coordinates),
  I can provide more readable errors like ""That coordinates are not addable. point_2d needs 
  addable coordinates for point addition"", instead of the common horrible template instantation errors.</p>
</blockquote>

<p>Given that this is the motivation of your question would not this be an
easier and more direct solution:</p>

<pre><code>#include &lt;type_traits&gt;

template&lt;typename LHS , typename RHS&gt;
using cannot_add =  std::integral_constant&lt;bool,std::is_same&lt;LHS,LHS&gt;::value&gt;;

template&lt;typename LHS , typename RHS&gt;
struct add
{
    /* Assert some expressively named condition that is always false 
        but is dependent on a template parameter.
    */
    static_assert(!cannot_add&lt;LHS,RHS&gt;::value,
        ""Types are not addable. Need specialization"");
};

template&lt;typename T1 , T1 VALUE1 , typename T2 , T2 VALUE2&gt;
struct add&lt;std::integral_constant&lt;T1,VALUE1&gt;,std::integral_constant&lt;T2,VALUE2&gt;&gt; 
: public std::integral_constant&lt;
    typename std::common_type&lt;T1,T2&gt;::type,
    VALUE1+VALUE2
&gt; {};  

int main()
{
    add&lt;std::integral_constant&lt;int,1&gt;,std::integral_constant&lt;int,2&gt;&gt; x; // Line 25 
    add&lt;float,float&gt; y; // Line 26
    return 0;
}
</code></pre>

<p>GCC 4.8.1 diagnoses:</p>

<pre><code>main.cpp:26:19:   required from here
main.cpp:12:2: error: static assertion failed: Types are not addable. Need specialization
</code></pre>

<p>Clang 3.3 diagnoses:</p>

<pre><code>main.cpp:12:2: error: static_assert failed ""Types are not addable. Need specialization""
    static_assert(!cannot_add&lt;LHS,RHS&gt;::value,
    ^             ~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.cpp:26:19: note: in instantiation of template class 'add&lt;float, float&gt;' requested here
    add&lt;float,float&gt; y; // Line 26
                 ^
</code></pre>
",Mike Kinghan,Mike Kinghan,1375080536,1375096391,1375096391
http://stackoverflow.com/a/17934723/1414881,How to tell if tinyMCE has been initated?,19969,Song,Thariama,1307585409,1545210849,1506063448,https://stackoverflow.com/questions/6287350/how-to-tell-if-tinymce-has-been-initated,"<p>I know this question is old, but...in case someone is still looking for the holy grail:</p>

<p>in tinymce 4, you can pass a callback to tinyMCE.init like so:</p>

<pre><code>tinyMCE.init({
  //your regular parameters here...
  setup: function(editor) {
    editor.on('init', function() {
      //all your after init logics here.
    });
  }
});
</code></pre>
",Yurui Ray Zhang,,1375134056,1375134056,0
http://stackoverflow.com/a/17961409/222487,Why does JSON.parse choke on encoded characters in nodejs?,4071,Andy Ray,Community,1375242817,1516952282,1495541496,https://stackoverflow.com/questions/17961303/why-does-json-parse-choke-on-encoded-characters-in-nodejs,"<p><code>\xHH</code> is not part of JSON, but is part of JavaScript. It is equivalent to <code>\u00HH</code>. Since the built-in <code>JSON</code> doesn't seem to support it and I doubt you'd want to go through the trouble of modifying a non-built-in JSON implementation, you might just want to run the code in a sandbox and collect the resulting object.</p>
",icktoofay,icktoofay,1375243541,1516952282,1516952282
http://stackoverflow.com/a/17961854/1084488,How can I use TypefaceSpan or StyleSpan with a custom Typeface?,33232,notme,Carl Anderson,1296146006,1552827581,1387407524,https://stackoverflow.com/questions/4819049/how-can-i-use-typefacespan-or-stylespan-with-a-custom-typeface,"<p>Whilst notme has essentially the right idea, the solution given is a bit hacky as ""family"" becomes redundant. It is also slightly incorrect because TypefaceSpan is one of the special spans that Android knows about and expects certain behaviour with respect to the ParcelableSpan interface (which notme's subclass does not properly, nor is it possible to, implement).</p>

<p>A simpler and more accurate solution would be:</p>

<pre><code>public class CustomTypefaceSpan extends MetricAffectingSpan
{
    private final Typeface typeface;

    public CustomTypefaceSpan(final Typeface typeface)
    {
        this.typeface = typeface;
    }

    @Override
    public void updateDrawState(final TextPaint drawState)
    {
        apply(drawState);
    }

    @Override
    public void updateMeasureState(final TextPaint paint)
    {
        apply(paint);
    }

    private void apply(final Paint paint)
    {
        final Typeface oldTypeface = paint.getTypeface();
        final int oldStyle = oldTypeface != null ? oldTypeface.getStyle() : 0;
        final int fakeStyle = oldStyle &amp; ~typeface.getStyle();

        if ((fakeStyle &amp; Typeface.BOLD) != 0)
        {
            paint.setFakeBoldText(true);
        }

        if ((fakeStyle &amp; Typeface.ITALIC) != 0)
        {
            paint.setTextSkewX(-0.25f);
        }

        paint.setTypeface(typeface);
    }
}
</code></pre>
",Benjamin Dobell,Benjamin Dobell,1375246301,1460986985,1460986985
http://stackoverflow.com/a/17981937/1942837,How to assert output with nosetest/unittest in python?,46089,Pedro Valencia,Oz123,1290115371,1520726754,1411924104,https://stackoverflow.com/questions/4219717/how-to-assert-output-with-nosetest-unittest-in-python,"<p>I use this <a href=""https://docs.python.org/2/library/contextlib.html#contextlib.contextmanager"" rel=""noreferrer"">context manager</a> to capture output. It ultimately uses the same technique as some of the other answers by temporarily replacing <code>sys.stdout</code>. I prefer the context manager because it wraps all the bookkeeping into a single function, so I don't have to re-write any try-finally code, and I don't have to write setup and teardown functions just for this.</p>

<pre><code>import sys
from contextlib import contextmanager
from StringIO import StringIO

@contextmanager
def captured_output():
    new_out, new_err = StringIO(), StringIO()
    old_out, old_err = sys.stdout, sys.stderr
    try:
        sys.stdout, sys.stderr = new_out, new_err
        yield sys.stdout, sys.stderr
    finally:
        sys.stdout, sys.stderr = old_out, old_err
</code></pre>

<p>Use it like this:</p>

<pre><code>with captured_output() as (out, err):
    foo()
# This can go inside or outside the `with` block
output = out.getvalue().strip()
self.assertEqual(output, 'hello world!')
</code></pre>

<p>Furthermore, since the original output state is restored upon exiting the <code>with</code> block, we can set up a second capture block in the same function as the first one, which isn't possible using setup and teardown functions, and gets wordy when writing try-finally blocks manually. That ability came in handy when the goal of a test was to compare the results of two functions relative to each other rather than to some precomputed value.</p>
",Rob Kennedy,Felipe S. S. Schneider,1375308960,1520726754,1520726754
http://stackoverflow.com/a/17981937/223092,How to assert output with nosetest/unittest in python?,46089,Pedro Valencia,Oz123,1290115371,1520726754,1411924104,https://stackoverflow.com/questions/4219717/how-to-assert-output-with-nosetest-unittest-in-python,"<p>I use this <a href=""https://docs.python.org/2/library/contextlib.html#contextlib.contextmanager"" rel=""noreferrer"">context manager</a> to capture output. It ultimately uses the same technique as some of the other answers by temporarily replacing <code>sys.stdout</code>. I prefer the context manager because it wraps all the bookkeeping into a single function, so I don't have to re-write any try-finally code, and I don't have to write setup and teardown functions just for this.</p>

<pre><code>import sys
from contextlib import contextmanager
from StringIO import StringIO

@contextmanager
def captured_output():
    new_out, new_err = StringIO(), StringIO()
    old_out, old_err = sys.stdout, sys.stderr
    try:
        sys.stdout, sys.stderr = new_out, new_err
        yield sys.stdout, sys.stderr
    finally:
        sys.stdout, sys.stderr = old_out, old_err
</code></pre>

<p>Use it like this:</p>

<pre><code>with captured_output() as (out, err):
    foo()
# This can go inside or outside the `with` block
output = out.getvalue().strip()
self.assertEqual(output, 'hello world!')
</code></pre>

<p>Furthermore, since the original output state is restored upon exiting the <code>with</code> block, we can set up a second capture block in the same function as the first one, which isn't possible using setup and teardown functions, and gets wordy when writing try-finally blocks manually. That ability came in handy when the goal of a test was to compare the results of two functions relative to each other rather than to some precomputed value.</p>
",Rob Kennedy,Felipe S. S. Schneider,1375308960,1520726754,1520726754
http://stackoverflow.com/a/17981937/398212,How to assert output with nosetest/unittest in python?,46089,Pedro Valencia,Oz123,1290115371,1520726754,1411924104,https://stackoverflow.com/questions/4219717/how-to-assert-output-with-nosetest-unittest-in-python,"<p>I use this <a href=""https://docs.python.org/2/library/contextlib.html#contextlib.contextmanager"" rel=""noreferrer"">context manager</a> to capture output. It ultimately uses the same technique as some of the other answers by temporarily replacing <code>sys.stdout</code>. I prefer the context manager because it wraps all the bookkeeping into a single function, so I don't have to re-write any try-finally code, and I don't have to write setup and teardown functions just for this.</p>

<pre><code>import sys
from contextlib import contextmanager
from StringIO import StringIO

@contextmanager
def captured_output():
    new_out, new_err = StringIO(), StringIO()
    old_out, old_err = sys.stdout, sys.stderr
    try:
        sys.stdout, sys.stderr = new_out, new_err
        yield sys.stdout, sys.stderr
    finally:
        sys.stdout, sys.stderr = old_out, old_err
</code></pre>

<p>Use it like this:</p>

<pre><code>with captured_output() as (out, err):
    foo()
# This can go inside or outside the `with` block
output = out.getvalue().strip()
self.assertEqual(output, 'hello world!')
</code></pre>

<p>Furthermore, since the original output state is restored upon exiting the <code>with</code> block, we can set up a second capture block in the same function as the first one, which isn't possible using setup and teardown functions, and gets wordy when writing try-finally blocks manually. That ability came in handy when the goal of a test was to compare the results of two functions relative to each other rather than to some precomputed value.</p>
",Rob Kennedy,Felipe S. S. Schneider,1375308960,1520726754,1520726754
http://stackoverflow.com/a/18000094/115145,How to marshall and unmarshall a Parcelable to a byte array with help of Parcel?,16041,Flow,Flow,1375376077,1470906472,1434975466,https://stackoverflow.com/questions/18000093/how-to-marshall-and-unmarshall-a-parcelable-to-a-byte-array-with-help-of-parcel,"<p>First create a helper class <strong>ParcelableUtil.java</strong>:</p>

<pre><code>public class ParcelableUtil {    
    public static byte[] marshall(Parcelable parceable) {
        Parcel parcel = Parcel.obtain();
        parceable.writeToParcel(parcel, 0);
        byte[] bytes = parcel.marshall();
        parcel.recycle();
        return bytes;
    }

    public static Parcel unmarshall(byte[] bytes) {
        Parcel parcel = Parcel.obtain();
        parcel.unmarshall(bytes, 0, bytes.length);
        parcel.setDataPosition(0); // This is extremely important!
        return parcel;
    }

    public static &lt;T&gt; T unmarshall(byte[] bytes, Parcelable.Creator&lt;T&gt; creator) {
        Parcel parcel = unmarshall(bytes);
        T result = creator.createFromParcel(parcel);
        parcel.recycle();
        return result;
    }
}
</code></pre>

<p>With the help of the util class above, you can marshall/unmarshall instances of your class <code>MyClass implements Parcelable</code> like so:</p>

<p><strong>Unmarshalling (with <code>CREATOR</code>)</strong></p>

<pre><code>byte[] bytes = 
MyClass myclass = ParcelableUtil.unmarshall(bytes, MyClass.CREATOR);
</code></pre>

<p><strong>Unmarshalling (without <code>CREATOR</code>)</strong></p>

<pre><code>byte[] bytes = 
Parcel parcel = ParcelableUtil.unmarshall(bytes);
MyClass myclass = new MyClass(parcel); // Or MyClass.CREATOR.createFromParcel(parcel).
</code></pre>

<p><strong>Marshalling</strong></p>

<pre><code>MyClass myclass = 
byte[] bytes = ParcelableUtil.marshall(myclass);
</code></pre>
",Flow,Flow,1375376077,1470906472,1470906472
http://stackoverflow.com/a/18004334/1158146,Desktop API is not supported on the current platform,18052,user2520969,Ahmed Ashour,1375389755,1556274652,1556274652,https://stackoverflow.com/questions/18004150/desktop-api-is-not-supported-on-the-current-platform,"<p>Basically, the problem is that Java Desktop integration doesn't work well on Linux.</p>

<p>It was designed to work good with Windows; something works on other systems, but nobody really cared to add proper support for those. Even if you install the required 'gnome libraries', the results will be poor.</p>

<p>I've faced the very same problem a while ago, and came up with the class below.</p>

<p>The goal is achieved by using <em>system-specific commands</em>:</p>

<pre><code>KDE:     kde-open
GNOME:   gnome-open
Any X-server system: xdg-open
MAC:     open
Windows: explorer
</code></pre>

<p>If none of those works, it tries the implementation provided by Java Desktop.<br>
Because this one usually fails, it's tried as the last resort.</p>

<hr>

<p><strong>DesktopApi class</strong></p>

<p>This class provides static methods <code>open</code>, <code>browse</code> and <code>edit</code>.<br>
It is tested to work on Linux (Kde and Gnome), Windows and Mac.</p>

<p><em>If you use it, please give me credit.</em></p>

<pre><code>package net.mightypork.rpack.utils;

import java.awt.Desktop;
import java.io.File;
import java.io.IOException;
import java.net.URI;
import java.util.ArrayList;
import java.util.List;


public class DesktopApi {

    public static boolean browse(URI uri) {

        if (openSystemSpecific(uri.toString())) return true;

        if (browseDESKTOP(uri)) return true;

        return false;
    }


    public static boolean open(File file) {

        if (openSystemSpecific(file.getPath())) return true;

        if (openDESKTOP(file)) return true;

        return false;
    }


    public static boolean edit(File file) {

        // you can try something like
        // runCommand(""gimp"", ""%s"", file.getPath())
        // based on user preferences.

        if (openSystemSpecific(file.getPath())) return true;

        if (editDESKTOP(file)) return true;

        return false;
    }


    private static boolean openSystemSpecific(String what) {

        EnumOS os = getOs();

        if (os.isLinux()) {
            if (runCommand(""kde-open"", ""%s"", what)) return true;
            if (runCommand(""gnome-open"", ""%s"", what)) return true;
            if (runCommand(""xdg-open"", ""%s"", what)) return true;
        }

        if (os.isMac()) {
            if (runCommand(""open"", ""%s"", what)) return true;
        }

        if (os.isWindows()) {
            if (runCommand(""explorer"", ""%s"", what)) return true;
        }

        return false;
    }


    private static boolean browseDESKTOP(URI uri) {

        logOut(""Trying to use Desktop.getDesktop().browse() with "" + uri.toString());
        try {
            if (!Desktop.isDesktopSupported()) {
                logErr(""Platform is not supported."");
                return false;
            }

            if (!Desktop.getDesktop().isSupported(Desktop.Action.BROWSE)) {
                logErr(""BROWSE is not supported."");
                return false;
            }

            Desktop.getDesktop().browse(uri);

            return true;
        } catch (Throwable t) {
            logErr(""Error using desktop browse."", t);
            return false;
        }
    }


    private static boolean openDESKTOP(File file) {

        logOut(""Trying to use Desktop.getDesktop().open() with "" + file.toString());
        try {
            if (!Desktop.isDesktopSupported()) {
                logErr(""Platform is not supported."");
                return false;
            }

            if (!Desktop.getDesktop().isSupported(Desktop.Action.OPEN)) {
                logErr(""OPEN is not supported."");
                return false;
            }

            Desktop.getDesktop().open(file);

            return true;
        } catch (Throwable t) {
            logErr(""Error using desktop open."", t);
            return false;
        }
    }


    private static boolean editDESKTOP(File file) {

        logOut(""Trying to use Desktop.getDesktop().edit() with "" + file);
        try {
            if (!Desktop.isDesktopSupported()) {
                logErr(""Platform is not supported."");
                return false;
            }

            if (!Desktop.getDesktop().isSupported(Desktop.Action.EDIT)) {
                logErr(""EDIT is not supported."");
                return false;
            }

            Desktop.getDesktop().edit(file);

            return true;
        } catch (Throwable t) {
            logErr(""Error using desktop edit."", t);
            return false;
        }
    }


    private static boolean runCommand(String command, String args, String file) {

        logOut(""Trying to exec:\n   cmd = "" + command + ""\n   args = "" + args + ""\n   %s = "" + file);

        String[] parts = prepareCommand(command, args, file);

        try {
            Process p = Runtime.getRuntime().exec(parts);
            if (p == null) return false;

            try {
                int retval = p.exitValue();
                if (retval == 0) {
                    logErr(""Process ended immediately."");
                    return false;
                } else {
                    logErr(""Process crashed."");
                    return false;
                }
            } catch (IllegalThreadStateException itse) {
                logErr(""Process is running."");
                return true;
            }
        } catch (IOException e) {
            logErr(""Error running command."", e);
            return false;
        }
    }


    private static String[] prepareCommand(String command, String args, String file) {

        List&lt;String&gt; parts = new ArrayList&lt;String&gt;();
        parts.add(command);

        if (args != null) {
            for (String s : args.split("" "")) {
                s = String.format(s, file); // put in the filename thing

                parts.add(s.trim());
            }
        }

        return parts.toArray(new String[parts.size()]);
    }

    private static void logErr(String msg, Throwable t) {
        System.err.println(msg);
        t.printStackTrace();
    }

    private static void logErr(String msg) {
        System.err.println(msg);
    }

    private static void logOut(String msg) {
        System.out.println(msg);
    }

    public static enum EnumOS {
        linux, macos, solaris, unknown, windows;

        public boolean isLinux() {

            return this == linux || this == solaris;
        }


        public boolean isMac() {

            return this == macos;
        }


        public boolean isWindows() {

            return this == windows;
        }
    }


    public static EnumOS getOs() {

        String s = System.getProperty(""os.name"").toLowerCase();

        if (s.contains(""win"")) {
            return EnumOS.windows;
        }

        if (s.contains(""mac"")) {
            return EnumOS.macos;
        }

        if (s.contains(""solaris"")) {
            return EnumOS.solaris;
        }

        if (s.contains(""sunos"")) {
            return EnumOS.solaris;
        }

        if (s.contains(""linux"")) {
            return EnumOS.linux;
        }

        if (s.contains(""unix"")) {
            return EnumOS.linux;
        } else {
            return EnumOS.unknown;
        }
    }
}
</code></pre>
",MightyPork,sbk,1375390383,1438695731,1438695731
http://stackoverflow.com/a/1801703/577298,How to reverse a singly linked list using only two pointers?,258891,Madhan,chqrlie,1259210065,1557086442,1557086442,https://stackoverflow.com/questions/1801549/how-to-reverse-a-singly-linked-list-using-only-two-pointers,"<p>Any alternative?  No, this is as simple as it gets, and there's no fundamentally-different way of doing it.  This algorithm is already O(n) time, and you can't get any faster than that, as you must modify every node.</p>

<p>It looks like your code is on the right track, but it's not quite working in the form above.  Here's a working version:</p>

<pre><code>#include &lt;stdio.h&gt;

typedef struct Node {
  char data;
  struct Node* next;
} Node;

void print_list(Node* root) {
  while (root) {
    printf(""%c "", root-&gt;data);
    root = root-&gt;next;
  }
  printf(""\n"");
}

Node* reverse(Node* root) {
  Node* new_root = 0;
  while (root) {
    Node* next = root-&gt;next;
    root-&gt;next = new_root;
    new_root = root;
    root = next;
  }
  return new_root;
}

int main() {
  Node d = { 'd', 0 };
  Node c = { 'c', &amp;d };
  Node b = { 'b', &amp;c };
  Node a = { 'a', &amp;b };

  Node* root = &amp;a;
  print_list(root);
  root = reverse(root);
  print_list(root);

  return 0;
}
</code></pre>
",Roger Pate,,1259213291,1259215663,1259215663
http://stackoverflow.com/a/18031024/211734,Exclude module docstring in autodoc,1461,Jonatan,,1375110829,1375625599,0,https://stackoverflow.com/questions/17927741/exclude-module-docstring-in-autodoc,"<p>Add the following to <strong>conf.py</strong>:</p>

<pre><code>def remove_module_docstring(app, what, name, obj, options, lines):
    if what == ""module"" and name == ""yourmodule"":
        del lines[:]

def setup(app):
    app.connect(""autodoc-process-docstring"", remove_module_docstring)
</code></pre>

<p>This code removes the module docstring in the <code>yourmodule</code> module, by providing a handler for the <a href=""http://sphinx-doc.org/ext/autodoc.html#event-autodoc-process-docstring"" rel=""nofollow"">autodoc-process-docstring</a> event.</p>
",mzjn,mzjn,1375519441,1375625599,1375625599
http://stackoverflow.com/a/1806161/1526861,Extracting URLs from a text document using Java + Regular Expressions,16831,rburton,,1259275808,1358444842,0,https://stackoverflow.com/questions/1806017/extracting-urls-from-a-text-document-using-java-regular-expressions,"<p>If you want to make sure you are really matching a url adress and not only some word starting with 'www.' you can use the expression mentioned by DVK before. I modified it slightly and wrote a small code snippet to be a starting point for you:</p>

<pre><code>import java.util.*;
import java.util.regex.*;

class FindUrls
{
    public static List&lt;String&gt; extractUrls(String input) {
        List&lt;String&gt; result = new ArrayList&lt;String&gt;();

        Pattern pattern = Pattern.compile(
            ""\\b(((ht|f)tp(s?)\\:\\/\\/|~\\/|\\/)|www.)"" + 
            ""(\\w+:\\w+@)?(([-\\w]+\\.)+(com|org|net|gov"" + 
            ""|mil|biz|info|mobi|name|aero|jobs|museum"" + 
            ""|travel|[a-z]{2}))(:[\\d]{1,5})?"" + 
            ""(((\\/([-\\w~!$+|.,=]|%[a-f\\d]{2})+)+|\\/)+|\\?|#)?"" + 
            ""((\\?([-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?"" + 
            ""([-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)"" + 
            ""(&amp;(?:[-\\w~!$+|.,*:]|%[a-f\\d{2}])+=?"" + 
            ""([-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)*)*"" + 
            ""(#([-\\w~!$+|.,*:=]|%[a-f\\d]{2})*)?\\b"");

        Matcher matcher = pattern.matcher(input);
        while (matcher.find()) {
            result.add(matcher.group());
        }

        return result;
    }
}
</code></pre>
",Philip Daubmeier,,1259279329,1259279329,0
http://stackoverflow.com/a/18090273/1050577,PHP Simple HTML Dom Parser Memory Leak / Usage,6145,Flash Thunder,Flash Thunder,1375822162,1518960023,1375853516,https://stackoverflow.com/questions/18090212/php-simple-html-dom-parser-memory-leak-usage,"<p>I believe you need to call <code>clear()</code> on <code>$main_html</code></p>

<p><a href=""http://simplehtmldom.sourceforge.net/manual_faq.htm"" rel=""nofollow"">From the docs</a>...</p>

<p>Q: This script is leaking memory seriously... After it finished running, it's not cleaning up dom object properly from memory.. </p>

<p>A: Due to php5 circular references memory leak, after creating DOM object, you must call $dom->clear() to free memory if call file_get_dom() more then once. </p>

<p>Example: </p>

<pre><code>$html = file_get_html(...); 
// do something... 
$html-&gt;clear(); 
unset($html);
</code></pre>
",Paul Dessert,,1375822359,1375822359,0
http://stackoverflow.com/a/1810086/223092,Hide stderr output in unit tests,5061,l0b0,,1259344030,1430670790,0,https://stackoverflow.com/questions/1809958/hide-stderr-output-in-unit-tests,"<p>I suggest writing a context manager:</p>

<pre><code>import contextlib
import sys

@contextlib.contextmanager
def nostderr():
    savestderr = sys.stderr
    class Devnull(object):
        def write(self, _): pass
        def flush(self): pass
    sys.stderr = Devnull()
    try:
        yield
    finally:
        sys.stderr = savestderr
</code></pre>

<p>Now, wrap any code snippet whose stderr you want suppressed in a <code>with nostderr():</code> and you have the localized, temporary, guaranteed-reversible stderr suppression that you want.</p>
",Alex Martelli,jan-glx,1259346045,1430670790,1430670790
http://stackoverflow.com/a/1810086/882918,Hide stderr output in unit tests,5061,l0b0,,1259344030,1430670790,0,https://stackoverflow.com/questions/1809958/hide-stderr-output-in-unit-tests,"<p>I suggest writing a context manager:</p>

<pre><code>import contextlib
import sys

@contextlib.contextmanager
def nostderr():
    savestderr = sys.stderr
    class Devnull(object):
        def write(self, _): pass
        def flush(self): pass
    sys.stderr = Devnull()
    try:
        yield
    finally:
        sys.stderr = savestderr
</code></pre>

<p>Now, wrap any code snippet whose stderr you want suppressed in a <code>with nostderr():</code> and you have the localized, temporary, guaranteed-reversible stderr suppression that you want.</p>
",Alex Martelli,jan-glx,1259346045,1430670790,1430670790
http://stackoverflow.com/a/1810990/763010,Number of days in any month,30117,Bryan hackett,Taryn East,1259364381,1469509028,1363318834,https://stackoverflow.com/questions/1810984/number-of-days-in-any-month,"<p>Try this:</p>

<pre><code>function numberOfDays(year, month) {
    var d = new Date(year, month, 0);
    return d.getDate();
}
</code></pre>

<p>Because of leap years you need to pass the year too.</p>
",Caleb,,1259364557,1259364557,0
http://stackoverflow.com/a/18143318/298479,How to use Python to programmatically generate part of Sphinx documentation,8482,mac,Mogsdad,1314744393,1516311338,1516311338,https://stackoverflow.com/questions/7250659/how-to-use-python-to-programmatically-generate-part-of-sphinx-documentation,"<p>An improvement based on Michael's code and the built-in include directive:</p>

<pre><code>import sys
from os.path import basename

try:
    from StringIO import StringIO
except ImportError:
    from io import StringIO

from sphinx.util.compat import Directive
from docutils import nodes, statemachine

class ExecDirective(Directive):
    """"""Execute the specified python code and insert the output into the document""""""
    has_content = True

    def run(self):
        oldStdout, sys.stdout = sys.stdout, StringIO()

        tab_width = self.options.get('tab-width', self.state.document.settings.tab_width)
        source = self.state_machine.input_lines.source(self.lineno - self.state_machine.input_offset - 1)

        try:
            exec('\n'.join(self.content))
            text = sys.stdout.getvalue()
            lines = statemachine.string2lines(text, tab_width, convert_whitespace=True)
            self.state_machine.insert_input(lines, source)
            return []
        except Exception:
            return [nodes.error(None, nodes.paragraph(text = ""Unable to execute python code at %s:%d:"" % (basename(source), self.lineno)), nodes.paragraph(text = str(sys.exc_info()[1])))]
        finally:
            sys.stdout = oldStdout

def setup(app):
    app.add_directive('exec', ExecDirective)
</code></pre>

<p>This one imports the output earlier so that it goes straight through the parser.  It also works in Python 3.  </p>
",alex.forencich,,1376039688,1376039688,0
http://stackoverflow.com/a/18163288/122441,How can I get path of resource under WEB-INF/class folder (java ee web dynamic project),10415,anna,anna,1376089846,1471593579,1376140889,https://stackoverflow.com/questions/18156991/how-can-i-get-path-of-resource-under-web-inf-class-folder-java-ee-web-dynamic-p,"<p>Generally speaking you should not rely on modifying files in your web application directory.</p>

<p>One of the reasons is that servlet container is not obligated to extract your <code>.war</code> file to the fs, it could, in theory, run your web application from memory. Yeah, Tomcat and most of the containers do unpack <code>.war</code> but there is nothing in Java EE specs that says that they must do this.</p>

<p>Anyway, if you think that this worth the risk you can use <a href=""http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29"" rel=""nofollow"">ServletContext.getRealPath</a> to get location of the file inside your webapp directory.</p>

<p>This should look something like this:</p>

<ol>
<li>Create a file <code>myfile</code> under your webapp root (should be located <strong>in the same folder</strong> as <code>WEB-INF</code> in your <code>.war</code>).</li>
<li><p>do something like this in your servlet (or anywhere where you can access servlet context):</p>

<p>String filePath = getServletContext().getRealPath(""myfile"");</p></li>
</ol>

<p>Note that in order for this to work you should be able to fetch the file with request, like: <code>http://&lt;host&gt;:&lt;port&gt;/&lt;contextPath&gt;/myfile</code> (see method docs for details)</p>
",Eugene Loy,,1376147901,1376147901,0
http://stackoverflow.com/a/181654/1265472,Disable output buffering,233355,Eli Bendersky,Whymarrh,1221902240,1544485877,1446493382,https://stackoverflow.com/questions/107705/disable-output-buffering,"<pre><code># reopen stdout file descriptor with write mode
# and 0 as the buffer size (unbuffered)
sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0)
</code></pre>

<p>Credits: ""Sebastian"", somewhere on the Python mailing list.</p>

<p><strong>3rd Party EDIT</strong></p>

<p><strong>Unsupported in recent versions of Python 3</strong></p>
",Federico A. Ramponi,Mike,1223450590,1544485877,1544485877
http://stackoverflow.com/a/18170014/180733,PHP MySQL update with multiple WHERE (syntax error),6913,user2465936,Community,1376207989,1419374155,1495539910,https://stackoverflow.com/questions/18169946/php-mysql-update-with-multiple-where-syntax-error,"<p>No, this is incorrect and won't work. As <a href=""http://dev.mysql.com/doc/refman/5.5/en/update.html"" rel=""nofollow"">manual</a> says, <code>UPDATE</code> has the following syntax:</p>

<pre><code>UPDATE [LOW_PRIORITY] [IGNORE] table_reference
    SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
    [WHERE where_condition]
    [ORDER BY ...]
    [LIMIT row_count]
</code></pre>

<p>There can be only 1 WHERE clause in the request. Actually, your blog page clearly says: ""you cant do multiple changes to a table in a single UPDATE query like this"".</p>

<p>He is using CASE command:</p>

<pre><code>UPDATE mytable SET title = CASE
    WHEN id = 1 THEN 'Great Expectations'
    WHEN id = 2 THEN 'War and Peace'
ELSE title
END;
</code></pre>

<p>But CASE will work for only 1 variable:</p>

<pre><code>CASE case_value
    WHEN when_value THEN statement_list
    [WHEN when_value THEN statement_list] ...
    [ELSE statement_list]
END CASE
</code></pre>

<p>It won't work with compound clauses like yours:</p>

<pre><code>CompanyName = ? OR RegistrationNumber = ?
</code></pre>

<p>So, you'll have to send several UPDATE requests.
<em>EDIT</em> removed semi colons from the <code>CASE</code> conditions</p>
",user4035,aexl,1376208653,1419374155,1419374155
http://stackoverflow.com/a/18184016/328406,Get previous value of an observable in subscribe of same observable,35024,KodeKreachor,,1349882753,1522010093,0,https://stackoverflow.com/questions/12822954/get-previous-value-of-an-observable-in-subscribe-of-same-observable,"<pre><code>ko.subscribable.fn.subscribeChanged = function (callback) {
    var oldValue;
    this.subscribe(function (_oldValue) {
        oldValue = _oldValue;
    }, this, 'beforeChange');

    this.subscribe(function (newValue) {
        callback(newValue, oldValue);
    });
};
</code></pre>

<p>Use the above like this:</p>

<pre><code>MyViewModel.MyObservableProperty.subscribeChanged(function (newValue, oldValue) {

});
</code></pre>
",JBeagle,,1376300994,1376300994,0
http://stackoverflow.com/a/18193383/111426,plain C: opening a directory with fopen(),10848,Heinrich,Heinrich,1376328279,1535460230,1535460230,https://stackoverflow.com/questions/18192998/plain-c-opening-a-directory-with-fopen,"<p>Directories do not exist in the C99 standard (or the C2011 one). So by definition, <code>fopen</code>-ing a directory is either implementation specific or undefined behavior.</p>

<p><a href=""http://man7.org/linux/man-pages/man3/fopen.3.html"" rel=""nofollow noreferrer"">fopen(3)</a> can fail (giving a <code>NULL</code> result). <a href=""http://man7.org/linux/man-pages/man3/fseek.3.html"" rel=""nofollow noreferrer"">fseek(3)</a> can also fail (by returning -1). And then you should preferably check <a href=""http://man7.org/linux/man-pages/man3/errno.3.html"" rel=""nofollow noreferrer"">errno(3)</a> or use <a href=""http://man7.org/linux/man-pages/man3/perror.3.html"" rel=""nofollow noreferrer"">perror(3)</a></p>

<p><code>ftell</code> is documented to return a <code>long</code>, and <code>-1L</code> on failure. On 64 bits Linux this is <code>0xffffffffffffffff</code>.</p>

<p>You code should be instead</p>

<pre><code>FILE* fd = fopen(argv[1], ""rb"");
if (!fd) 
  { perror(argv[1]); exit(EXIT_FAILURE); };
if (fseek(fd, 0, SEEK_END)&lt;0) 
  { perror(""fseek""); exit(EXIT_FAILURE); };
long flen = ftell(fd);
if (flen == -1L)
  { perror(""ftell""); exit(EXIT_FAILURE); };
</code></pre>

<p><sup>BTW, On Linux/Debian/Sid/AMD64 with libc-2.17 and 3.10.6 kernel, that codes runs ok when <code>argv[1]</code> is <code>/tmp</code>; surprizingly, <code>flen</code> is <code>LONG_MAX</code> i.e. <code>0x7fffffffffffffff</code> </sup></p>

<p>BTW, on Linux, directories are a special case of files. Use <a href=""http://man7.org/linux/man-pages/man2/stat.2.html"" rel=""nofollow noreferrer"">stat(2)</a> on a file path (and <code>fstat</code> on a <a href=""https://en.wikipedia.org/wiki/File_descriptor"" rel=""nofollow noreferrer"">file descriptor</a>, perhaps obtained with <a href=""http://man7.org/linux/man-pages/man3/fileno.3.html"" rel=""nofollow noreferrer"">fileno(3)</a> from some <code>FILE*</code>) to know more meta data about some file, including its ""type"" (thru its mode). You want <a href=""http://man7.org/linux/man-pages/man3/opendir.3.html"" rel=""nofollow noreferrer"">opendir(3)</a>, <a href=""http://man7.org/linux/man-pages/man3/readdir.3.html"" rel=""nofollow noreferrer"">readdir(3)</a> &amp; <a href=""http://man7.org/linux/man-pages/man3/closedir.3.html"" rel=""nofollow noreferrer"">closedir(3)</a> to operate on directory contents. See also <a href=""http://man7.org/linux/man-pages/man7/inode.7.html"" rel=""nofollow noreferrer"">inode(7)</a>.</p>
",Basile Starynkevitch,Basile Starynkevitch,1376329683,1507314859,1507314859
http://stackoverflow.com/a/18195921/932593,Set Matplotlib colorbar size to match graph,83475,Elliot,,1376338012,1562320870,0,https://stackoverflow.com/questions/18195758/set-matplotlib-colorbar-size-to-match-graph,"<p>You can do this easily with a matplotlib <a href=""http://matplotlib.org/mpl_toolkits/axes_grid/users/overview.html#axesdivider"" rel=""noreferrer"">AxisDivider</a>.</p>

<p>The example from the linked page also works without using subplots:</p>

<pre><code>import matplotlib.pyplot as plt
from mpl_toolkits.axes_grid1 import make_axes_locatable
import numpy as np

plt.figure()
ax = plt.gca()
im = ax.imshow(np.arange(100).reshape((10,10)))

# create an axes on the right side of ax. The width of cax will be 5%
# of ax and the padding between cax and ax will be fixed at 0.05 inch.
divider = make_axes_locatable(ax)
cax = divider.append_axes(""right"", size=""5%"", pad=0.05)

plt.colorbar(im, cax=cax)
</code></pre>

<p><img src=""https://i.stack.imgur.com/k13gf.png"" alt=""enter image description here""></p>
",bogatron,bogatron,1376338555,1376340004,1376340004
http://stackoverflow.com/a/1824228/751089,Deleting a window property in IE,17728,gasper_k,Sam,1246527124,1423183525,1414235953,https://stackoverflow.com/questions/1073414/deleting-a-window-property-in-ie,"<p>Gasper made a comment with the solution he finished on, but I think its worth calling out as an actual answer:</p>

<pre><code>try 
{ 
    delete window.x; 
} 
catch(e) 
{ 
    window[""x""] = undefined; 
}
</code></pre>

<p>Interesting issue, I was just banging my head against it tonight.  The exception is thrown on IE but not Firefox.  I would suspect this workaround leaks memory, so use sparingly.</p>

<p>It was asked, why not just assign undefined?  It matters if you want to enumerate the keys later (though if you're relying on the workaround, the key enumeration still won't do what you want...).  But anyhow, to highlight the difference between delete and simply assigning undefined (<a href=""http://jsfiddle.net/fschwiet/T4akL/"" rel=""noreferrer"">http://jsfiddle.net/fschwiet/T4akL/</a>):</p>

<pre><code>var deleted = {
    a: 1
};

var cleared = {
    a: 1
};

delete deleted[""a""];
cleared[""a""] = undefined;

for(var key in deleted) {
    console.log(""deleted has key"", key);
}

for(var key in cleared) {
    console.log(""cleared has key"", key);
}

console.log(""deleted has a?"", deleted.hasOwnProperty('a'));
console.log(""cleared has a?"", cleared.hasOwnProperty('a'));
</code></pre>

<p>produces output:</p>

<pre><code>cleared has key a
deleted has a? false
cleared has a? true 
</code></pre>
",Frank Schwieterman,Frank Schwieterman,1259646478,1385506831,1385506831
http://stackoverflow.com/a/18269491/1072626,How to fetch a non-ascii url with Python urlopen?,25216,omat,omat,1291824393,1540966735,1291826007,https://stackoverflow.com/questions/4389572/how-to-fetch-a-non-ascii-url-with-python-urlopen,"<p>Python 3 has libraries to handle this situation.  Use
<code>urllib.parse.urlsplit</code> to split the URL into its components, and
<code>urllib.parse.quote</code> to properly quote/escape the unicode characters
and <code>urllib.parse.urlunsplit</code> to join it back together.</p>

<pre><code>&gt;&gt;&gt; import urllib.parse
&gt;&gt;&gt; url = 'http://example.com/unicod'
&gt;&gt;&gt; url = urllib.parse.urlsplit(url)
&gt;&gt;&gt; url = list(url)
&gt;&gt;&gt; url[2] = urllib.parse.quote(url[2])
&gt;&gt;&gt; url = urllib.parse.urlunsplit(url)
&gt;&gt;&gt; print(url)
http://example.com/unicod%C3%A8
</code></pre>
",darkfeline,,1376643401,1376643401,0
http://stackoverflow.com/a/18283141/676195,javascript get current filescript path,27903,pleerock,John Slegers,1323965921,1525171973,1525171973,https://stackoverflow.com/questions/8523200/javascript-get-current-filescript-path,"<p>Add the following code to your JS :</p>

<pre><code>var retrieveURL = function(filename) {
    var scripts = document.getElementsByTagName('script');
    if (scripts &amp;&amp; scripts.length &gt; 0) {
        for (var i in scripts) {
            if (scripts[i].src &amp;&amp; scripts[i].src.match(new RegExp(filename+'\\.js$'))) {
                return scripts[i].src.replace(new RegExp('(.*)'+filename+'\\.js$'), '$1');
            }
        }
    }
};
</code></pre>

<p>Suppose these are the scripts called in your HTML :</p>

<pre><code>&lt;script src=""assets/js/awesome.js""&gt;&lt;/script&gt;
&lt;script src=""assets/js/oldcode/fancy-stuff.js""&gt;&lt;/script&gt;
&lt;script src=""assets/js/jquery/cool-plugin.js""&gt;&lt;/script&gt;
</code></pre>

<p>Then, you can use the function like this</p>

<pre><code>var awesomeURL = retrieveURL('awesome');
// result : 'assets/js/'

var awesomeURL = retrieveURL('fancy-stuff');
// result : 'assets/js/oldcode/'

var awesomeURL = retrieveURL('cool-plugin');
// result : 'assets/js/jquery/'
</code></pre>

<p>Note that this only works when there are no two script files in your HTML with the same name. If you have two scripts with the same name that are located in a different folder, the result will be unreliable.</p>

<hr>

<h3>Note</h3>

<p>If you dynamically add scripts to your page, you need to make sure your code is executed after the last script has been added to the DOM.</p>

<p>The follow example shows how to do this with one dynamically loaded script. It outputs a JSON array with the <code>src</code> link for scripts that load an external js file and a base64-encoded string of the JS content for inline scripts:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var addScript = function(src, callback) {
    var s = document.createElement( 'script' );
    s.setAttribute( 'src', src );
    document.body.appendChild( s );
    s.onload = callback;
}

var retrieveURL = function(filename) {
    var scripts = document.getElementsByTagName('script');
    if (scripts &amp;&amp; scripts.length &gt; 0) {
        for (var i in scripts) {
            if (scripts[i].src &amp;&amp; scripts[i].src.match(new RegExp(filename+'\\.js$'))) {
                return scripts[i].src.replace(new RegExp('(.*)'+filename+'\\.js$'), '$1');
            }
        }
    }
};

addScript('https://code.jquery.com/jquery-1.12.4.min.js', function() {
    var scripts = document.getElementsByTagName('script');
    var sources = [];
    for (var i = 0; i &lt; scripts.length; i++) {
        if(scripts[i].src == '') {
            sources.push(btoa(scripts[i].innerHTML));
        } else {
            sources.push(scripts[i].src);
        }
    }
    document.body.innerHTML += '&lt;pre&gt;' + JSON.stringify(sources,null,2) + '&lt;/pre&gt;';
});</code></pre>
</div>
</div>
</p>

<p>See also <a href=""https://jsfiddle.net/ckt5xyr9/"" rel=""nofollow noreferrer""><strong>this Fiddle</strong></a>.</p>
",John Slegers,John Slegers,1376692655,1499871305,1499871305
http://stackoverflow.com/a/18295416/830737,How to set focus on input field?,567761,Misha Moroshko,Blackhole,1360674532,1544428955,1410037547,https://stackoverflow.com/questions/14833326/how-to-set-focus-on-input-field,"<h2>(EDIT: I've added an updated solution below this explanation)</h2>

<p>Mark Rajcok is the man... and his answer is a valid answer, but it <strike>has</strike> had a defect (sorry Mark)...</p>

<p><strike>...Try using the boolean to focus on the input, then blur the input, then try using it to focus the input again. It won't work unless you reset the boolean to false, then $digest, then reset it back to true. Even if you use a string comparison in your expression, you'll be forced to change the string to something else, $digest, then change it back.</strike> (This has been addressed with the blur event handler.)</p>

<p>So I propose this alternate solution:</p>

<h3>Use an event, the forgotten feature of Angular.</h3>

<p>JavaScript loves events after all. Events are inherently loosely coupled, and even better, you avoid adding another $watch to your $digest.</p>

<pre class=""lang-js prettyprint-override""><code>app.directive('focusOn', function() {
   return function(scope, elem, attr) {
      scope.$on(attr.focusOn, function(e) {
          elem[0].focus();
      });
   };
});
</code></pre>

<p>So now you could use it like this:</p>

<pre class=""lang-html prettyprint-override""><code>&lt;input type=""text"" focus-on=""newItemAdded"" /&gt;
</code></pre>

<p>and then anywhere in your app... </p>

<pre class=""lang-js prettyprint-override""><code>$scope.addNewItem = function () {
    /* stuff here to add a new item... */

    $scope.$broadcast('newItemAdded');
};
</code></pre>

<p>This is awesome because you can do all sorts of things with something like this. For one, you could tie into events that already exist. For another thing you start doing something smart by having different parts of your app publish events that other parts of your app can subscribe to.</p>

<p>Anyhow, this type of thing screams ""event driven"" to me. I think as Angular developers we try really hard to hammer $scope shaped pegs into event shape holes.</p>

<p>Is it the best solution? I dunno. It's <em>a</em> solution.</p>

<hr>

<h2>Updated Solution</h2>

<p>After @ShimonRachlenko's comment below, I've changed my method of doing this slightly. Now I use a combination of a service and a directive that handles an event ""behind the scenes"":</p>

<p>Other than that, it's the same principal outlined above.</p>

<p><a href=""http://plnkr.co/edit/teMQoV3pQGj7BHp3oNCz?p=preview"">Here is a quick demo Plunk</a></p>

<h3>Usage</h3>

<pre class=""lang-html prettyprint-override""><code>&lt;input type=""text"" focus-on=""focusMe""/&gt;
</code></pre>

<pre class=""lang-js prettyprint-override""><code>app.controller('MyCtrl', function($scope, focus) {
    focus('focusMe');
});
</code></pre>

<h3>Source</h3>

<pre class=""lang-js prettyprint-override""><code>app.directive('focusOn', function() {
   return function(scope, elem, attr) {
      scope.$on('focusOn', function(e, name) {
        if(name === attr.focusOn) {
          elem[0].focus();
        }
      });
   };
});

app.factory('focus', function ($rootScope, $timeout) {
  return function(name) {
    $timeout(function (){
      $rootScope.$broadcast('focusOn', name);
    });
  }
});
</code></pre>
",Ben Lesh,Mark Rajcok,1376796645,1407607148,1407607148
http://stackoverflow.com/a/1830844/316944,Validate decimal numbers in JavaScript - IsNumeric(),1440509,Michael Haren,Nhan,1219242073,1549818668,1481083051,https://stackoverflow.com/questions/18082/validate-decimal-numbers-in-javascript-isnumeric,"<p><a href=""https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric/174921#174921"">@Joel's answer</a> is pretty close, but it will fail in the following cases:</p>

<pre><code>// Whitespace strings:
IsNumeric(' ')    == true;
IsNumeric('\t\t') == true;
IsNumeric('\n\r') == true;

// Number literals:
IsNumeric(-1)  == false;
IsNumeric(0)   == false;
IsNumeric(1.1) == false;
IsNumeric(8e5) == false;
</code></pre>

<p>Some time ago I had to implement an <code>IsNumeric</code> function, to find out if a variable contained a numeric value, <strong>regardless of its type</strong>, it could be a <code>String</code> containing a numeric value (I had to consider also exponential notation, etc.), a <code>Number</code> object, virtually anything could be passed to that function, I couldn't make any type assumptions,  taking care of type coercion (eg. <code>+true == 1;</code> but <code>true</code> shouldn't be considered as <code>""numeric""</code>).</p>

<p>I think is worth sharing this set of <a href=""http://run.plnkr.co/plunks/93FPpacuIcXqqKMecLdk/"" rel=""noreferrer""><strong>+30 unit tests</strong></a> made to numerous function implementations, and also share the one that passes all my tests:</p>

<pre><code>function isNumeric(n) {
    return !isNaN(parseFloat(n)) &amp;&amp; isFinite(n);
}
</code></pre>

<p><strong>P.S.</strong> <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/isNaN"" rel=""noreferrer"">isNaN</a> &amp; <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/isFinite"" rel=""noreferrer"">isFinite</a> have a confusing behavior due to forced conversion to number. In ES6, <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN"" rel=""noreferrer"">Number.isNaN</a> &amp; <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite"" rel=""noreferrer"">Number.isFinite</a> would fix these issues. Keep that in mind when using them. </p>

<hr>

<p><strong>Update</strong> : 
<a href=""https://github.com/jquery/jquery/blob/2.2-stable/src/core.js#L215"" rel=""noreferrer"">Here's how jQuery does it now (2.2-stable)</a>: </p>

<pre><code>isNumeric: function(obj) {
    var realStringObj = obj &amp;&amp; obj.toString();
    return !jQuery.isArray(obj) &amp;&amp; (realStringObj - parseFloat(realStringObj) + 1) &gt;= 0;
}
</code></pre>

<p><strong>Update</strong> :
<a href=""https://github.com/angular/angular/blob/4.3.x/packages/common/src/pipes/number_pipe.ts#L172"" rel=""noreferrer"">Angular 4.3</a>:</p>

<pre><code>export function isNumeric(value: any): boolean {
    return !isNaN(value - parseFloat(value));
}
</code></pre>
",CMS,Marcos Dimitrio,1259732182,1527866471,1527866471
http://stackoverflow.com/a/1830844/648802,Validate decimal numbers in JavaScript - IsNumeric(),1440509,Michael Haren,Nhan,1219242073,1549818668,1481083051,https://stackoverflow.com/questions/18082/validate-decimal-numbers-in-javascript-isnumeric,"<p><a href=""https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric/174921#174921"">@Joel's answer</a> is pretty close, but it will fail in the following cases:</p>

<pre><code>// Whitespace strings:
IsNumeric(' ')    == true;
IsNumeric('\t\t') == true;
IsNumeric('\n\r') == true;

// Number literals:
IsNumeric(-1)  == false;
IsNumeric(0)   == false;
IsNumeric(1.1) == false;
IsNumeric(8e5) == false;
</code></pre>

<p>Some time ago I had to implement an <code>IsNumeric</code> function, to find out if a variable contained a numeric value, <strong>regardless of its type</strong>, it could be a <code>String</code> containing a numeric value (I had to consider also exponential notation, etc.), a <code>Number</code> object, virtually anything could be passed to that function, I couldn't make any type assumptions,  taking care of type coercion (eg. <code>+true == 1;</code> but <code>true</code> shouldn't be considered as <code>""numeric""</code>).</p>

<p>I think is worth sharing this set of <a href=""http://run.plnkr.co/plunks/93FPpacuIcXqqKMecLdk/"" rel=""noreferrer""><strong>+30 unit tests</strong></a> made to numerous function implementations, and also share the one that passes all my tests:</p>

<pre><code>function isNumeric(n) {
    return !isNaN(parseFloat(n)) &amp;&amp; isFinite(n);
}
</code></pre>

<p><strong>P.S.</strong> <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/isNaN"" rel=""noreferrer"">isNaN</a> &amp; <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/isFinite"" rel=""noreferrer"">isFinite</a> have a confusing behavior due to forced conversion to number. In ES6, <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN"" rel=""noreferrer"">Number.isNaN</a> &amp; <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite"" rel=""noreferrer"">Number.isFinite</a> would fix these issues. Keep that in mind when using them. </p>

<hr>

<p><strong>Update</strong> : 
<a href=""https://github.com/jquery/jquery/blob/2.2-stable/src/core.js#L215"" rel=""noreferrer"">Here's how jQuery does it now (2.2-stable)</a>: </p>

<pre><code>isNumeric: function(obj) {
    var realStringObj = obj &amp;&amp; obj.toString();
    return !jQuery.isArray(obj) &amp;&amp; (realStringObj - parseFloat(realStringObj) + 1) &gt;= 0;
}
</code></pre>

<p><strong>Update</strong> :
<a href=""https://github.com/angular/angular/blob/4.3.x/packages/common/src/pipes/number_pipe.ts#L172"" rel=""noreferrer"">Angular 4.3</a>:</p>

<pre><code>export function isNumeric(value: any): boolean {
    return !isNaN(value - parseFloat(value));
}
</code></pre>
",CMS,Marcos Dimitrio,1259732182,1527866471,1527866471
http://stackoverflow.com/a/18337268/1626109,Bootstrap 3 Collapse show state with Chevron icon,256884,Ryan Scott,Jens,1376963481,1535057568,1440720377,https://stackoverflow.com/questions/18325779/bootstrap-3-collapse-show-state-with-chevron-icon,"<p>You could use this kind of code :</p>

<pre class=""lang-js prettyprint-override""><code>function toggleChevron(e) {
    $(e.target)
        .prev('.panel-heading')
        .find('i.indicator')
        .toggleClass('glyphicon-chevron-down glyphicon-chevron-up');
}
$('#accordion').on('hidden.bs.collapse', toggleChevron);
$('#accordion').on('shown.bs.collapse', toggleChevron);
</code></pre>

<p>=> Working <a href=""http://jsfiddle.net/zessx/R6EAW/12/"">JsFiddle</a></p>
",zessx,KyleMit,1377007939,1384291240,1384291240
http://stackoverflow.com/a/18337754/1773758,"Saving utf-8 texts in json.dumps as UTF8, not as \u escape sequence",259064,Berry Tsakala,Berry Tsakala,1377008298,1554409490,1534323948,https://stackoverflow.com/questions/18337407/saving-utf-8-texts-in-json-dumps-as-utf8-not-as-u-escape-sequence,"<p>Use the <code>ensure_ascii=False</code> switch to <code>json.dumps()</code>, then encode the value to UTF-8 manually:</p>

<pre><code>&gt;&gt;&gt; json_string = json.dumps(u"" "", ensure_ascii=False).encode('utf8')
&gt;&gt;&gt; json_string
'""\xd7\x91\xd7\xa8\xd7\x99 \xd7\xa6\xd7\xa7\xd7\x9c\xd7\x94""'
&gt;&gt;&gt; print json_string
"" ""
</code></pre>

<p>If you are writing this to a file, you can use <a href=""https://docs.python.org/2/library/io.html#io.open""><code>io.open()</code></a> instead of <code>open()</code> to produce a file object that encodes Unicode values for you as you write, then use <code>json.dump()</code> instead to write to that file:</p>

<pre><code>with io.open('filename', 'w', encoding='utf8') as json_file:
    json.dump(u"" "", json_file, ensure_ascii=False)
</code></pre>

<p>In Python 3, the built-in <code>open()</code> is an alias for <code>io.open()</code>. Do note that there is a <a href=""http://bugs.python.org/issue13769"">bug in the <code>json</code> module</a> where the <code>ensure_ascii=False</code> flag can produce a <em>mix</em> of <code>unicode</code> and <code>str</code> objects. The workaround for Python 2 then is:</p>

<pre><code>with io.open('filename', 'w', encoding='utf8') as json_file:
    data = json.dumps(u"" "", ensure_ascii=False)
    # unicode(data) auto-decodes data to unicode if str
    json_file.write(unicode(data))
</code></pre>

<p>If you are passing in byte strings (type <code>str</code> in Python 2, <code>bytes</code> in Python 3) encoded to UTF-8, make sure to also set the <code>encoding</code> keyword:</p>

<pre><code>&gt;&gt;&gt; d={ 1: "" "", 2: u"" "" }
&gt;&gt;&gt; d
{1: '\xd7\x91\xd7\xa8\xd7\x99 \xd7\xa6\xd7\xa7\xd7\x9c\xd7\x94', 2: u'\u05d1\u05e8\u05d9 \u05e6\u05e7\u05dc\u05d4'}

&gt;&gt;&gt; s=json.dumps(d, ensure_ascii=False, encoding='utf8')
&gt;&gt;&gt; s
u'{""1"": ""\u05d1\u05e8\u05d9 \u05e6\u05e7\u05dc\u05d4"", ""2"": ""\u05d1\u05e8\u05d9 \u05e6\u05e7\u05dc\u05d4""}'
&gt;&gt;&gt; json.loads(s)['1']
u'\u05d1\u05e8\u05d9 \u05e6\u05e7\u05dc\u05d4'
&gt;&gt;&gt; json.loads(s)['2']
u'\u05d1\u05e8\u05d9 \u05e6\u05e7\u05dc\u05d4'
&gt;&gt;&gt; print json.loads(s)['1']
 
&gt;&gt;&gt; print json.loads(s)['2']
 
</code></pre>

<p>Note that <strong>your</strong> second sample is <strong>not</strong> valid Unicode; you gave it UTF-8 bytes as a unicode literal, that would <em>never</em> work:</p>

<pre><code>&gt;&gt;&gt; s = u'\xd7\x91\xd7\xa8\xd7\x99 \xd7\xa6\xd7\xa7\xd7\x9c\xd7\x94'
&gt;&gt;&gt; print s
 
&gt;&gt;&gt; print s.encode('latin1').decode('utf8')
 
</code></pre>

<p>Only when I encoded that string to Latin 1 (whose unicode codepoints map one-to-one to bytes) then decode as UTF-8 do you see the expected output. That has nothing to do with JSON and everything to do with that you use the wrong input. The result is called a <a href=""http://en.wikipedia.org/wiki/Mojibake"">Mojibake</a>.</p>

<p>If you got that Unicode value from a string literal, it was decoded using the wrong codec. It could be your terminal is mis-configured, or that your text editor saved your source code using a different codec than what you told Python to read the file with. Or you sourced it from a library that applied the wrong codec. <strong>This all has nothing to do with the JSON library</strong>.</p>
",Martijn Pieters,Martijn Pieters,1377009200,1422344469,1422344469
http://stackoverflow.com/a/1835529/216063,Byte order mark screws up file reading in Java,71256,Tom,Jeff Foster,1259784255,1516217015,1259785901,https://stackoverflow.com/questions/1835430/byte-order-mark-screws-up-file-reading-in-java,"<p><strong>EDIT</strong>: I've made a proper release on GitHub: <a href=""https://github.com/gpakosz/UnicodeBOMInputStream"" rel=""noreferrer"">https://github.com/gpakosz/UnicodeBOMInputStream</a></p>

<hr>

<p>Here is a class I coded a while ago, I just edited the package name before pasting. Nothing special, it is quite similar to solutions posted in SUN's bug database. Incorporate it in your code and you're fine.</p>

<pre><code>/* ____________________________________________________________________________
 * 
 * File:    UnicodeBOMInputStream.java
 * Author:  Gregory Pakosz.
 * Date:    02 - November - 2005    
 * ____________________________________________________________________________
 */
package com.stackoverflow.answer;

import java.io.IOException;
import java.io.InputStream;
import java.io.PushbackInputStream;

/**
 * The &lt;code&gt;UnicodeBOMInputStream&lt;/code&gt; class wraps any
 * &lt;code&gt;InputStream&lt;/code&gt; and detects the presence of any Unicode BOM
 * (Byte Order Mark) at its beginning, as defined by
 * &lt;a href=""http://www.faqs.org/rfcs/rfc3629.html""&gt;RFC 3629 - UTF-8, a transformation format of ISO 10646&lt;/a&gt;
 * 
 * &lt;p&gt;The
 * &lt;a href=""http://www.unicode.org/unicode/faq/utf_bom.html""&gt;Unicode FAQ&lt;/a&gt;
 * defines 5 types of BOMs:&lt;ul&gt;
 * &lt;li&gt;&lt;pre&gt;00 00 FE FF  = UTF-32, big-endian&lt;/pre&gt;&lt;/li&gt;
 * &lt;li&gt;&lt;pre&gt;FF FE 00 00  = UTF-32, little-endian&lt;/pre&gt;&lt;/li&gt;
 * &lt;li&gt;&lt;pre&gt;FE FF        = UTF-16, big-endian&lt;/pre&gt;&lt;/li&gt;
 * &lt;li&gt;&lt;pre&gt;FF FE        = UTF-16, little-endian&lt;/pre&gt;&lt;/li&gt;
 * &lt;li&gt;&lt;pre&gt;EF BB BF     = UTF-8&lt;/pre&gt;&lt;/li&gt;
 * &lt;/ul&gt;&lt;/p&gt;
 * 
 * &lt;p&gt;Use the {@link #getBOM()} method to know whether a BOM has been detected
 * or not.
 * &lt;/p&gt;
 * &lt;p&gt;Use the {@link #skipBOM()} method to remove the detected BOM from the
 * wrapped &lt;code&gt;InputStream&lt;/code&gt; object.&lt;/p&gt;
 */
public class UnicodeBOMInputStream extends InputStream
{
  /**
   * Type safe enumeration class that describes the different types of Unicode
   * BOMs.
   */
  public static final class BOM
  {
    /**
     * NONE.
     */
    public static final BOM NONE = new BOM(new byte[]{},""NONE"");

    /**
     * UTF-8 BOM (EF BB BF).
     */
    public static final BOM UTF_8 = new BOM(new byte[]{(byte)0xEF,
                                                       (byte)0xBB,
                                                       (byte)0xBF},
                                            ""UTF-8"");

    /**
     * UTF-16, little-endian (FF FE).
     */
    public static final BOM UTF_16_LE = new BOM(new byte[]{ (byte)0xFF,
                                                            (byte)0xFE},
                                                ""UTF-16 little-endian"");

    /**
     * UTF-16, big-endian (FE FF).
     */
    public static final BOM UTF_16_BE = new BOM(new byte[]{ (byte)0xFE,
                                                            (byte)0xFF},
                                                ""UTF-16 big-endian"");

    /**
     * UTF-32, little-endian (FF FE 00 00).
     */
    public static final BOM UTF_32_LE = new BOM(new byte[]{ (byte)0xFF,
                                                            (byte)0xFE,
                                                            (byte)0x00,
                                                            (byte)0x00},
                                                ""UTF-32 little-endian"");

    /**
     * UTF-32, big-endian (00 00 FE FF).
     */
    public static final BOM UTF_32_BE = new BOM(new byte[]{ (byte)0x00,
                                                            (byte)0x00,
                                                            (byte)0xFE,
                                                            (byte)0xFF},
                                                ""UTF-32 big-endian"");

    /**
     * Returns a &lt;code&gt;String&lt;/code&gt; representation of this &lt;code&gt;BOM&lt;/code&gt;
     * value.
     */
    public final String toString()
    {
      return description;
    }

    /**
     * Returns the bytes corresponding to this &lt;code&gt;BOM&lt;/code&gt; value.
     */
    public final byte[] getBytes()
    {
      final int     length = bytes.length;
      final byte[]  result = new byte[length];

      // Make a defensive copy
      System.arraycopy(bytes,0,result,0,length);

      return result;
    }

    private BOM(final byte bom[], final String description)
    {
      assert(bom != null)               : ""invalid BOM: null is not allowed"";
      assert(description != null)       : ""invalid description: null is not allowed"";
      assert(description.length() != 0) : ""invalid description: empty string is not allowed"";

      this.bytes          = bom;
      this.description  = description;
    }

            final byte    bytes[];
    private final String  description;

  } // BOM

  /**
   * Constructs a new &lt;code&gt;UnicodeBOMInputStream&lt;/code&gt; that wraps the
   * specified &lt;code&gt;InputStream&lt;/code&gt;.
   * 
   * @param inputStream an &lt;code&gt;InputStream&lt;/code&gt;.
   * 
   * @throws NullPointerException when &lt;code&gt;inputStream&lt;/code&gt; is
   * &lt;code&gt;null&lt;/code&gt;.
   * @throws IOException on reading from the specified &lt;code&gt;InputStream&lt;/code&gt;
   * when trying to detect the Unicode BOM.
   */
  public UnicodeBOMInputStream(final InputStream inputStream) throws  NullPointerException,
                                                                      IOException

  {
    if (inputStream == null)
      throw new NullPointerException(""invalid input stream: null is not allowed"");

    in = new PushbackInputStream(inputStream,4);

    final byte  bom[] = new byte[4];
    final int   read  = in.read(bom);

    switch(read)
    {
      case 4:
        if ((bom[0] == (byte)0xFF) &amp;&amp;
            (bom[1] == (byte)0xFE) &amp;&amp;
            (bom[2] == (byte)0x00) &amp;&amp;
            (bom[3] == (byte)0x00))
        {
          this.bom = BOM.UTF_32_LE;
          break;
        }
        else
        if ((bom[0] == (byte)0x00) &amp;&amp;
            (bom[1] == (byte)0x00) &amp;&amp;
            (bom[2] == (byte)0xFE) &amp;&amp;
            (bom[3] == (byte)0xFF))
        {
          this.bom = BOM.UTF_32_BE;
          break;
        }

      case 3:
        if ((bom[0] == (byte)0xEF) &amp;&amp;
            (bom[1] == (byte)0xBB) &amp;&amp;
            (bom[2] == (byte)0xBF))
        {
          this.bom = BOM.UTF_8;
          break;
        }

      case 2:
        if ((bom[0] == (byte)0xFF) &amp;&amp;
            (bom[1] == (byte)0xFE))
        {
          this.bom = BOM.UTF_16_LE;
          break;
        }
        else
        if ((bom[0] == (byte)0xFE) &amp;&amp;
            (bom[1] == (byte)0xFF))
        {
          this.bom = BOM.UTF_16_BE;
          break;
        }

      default:
        this.bom = BOM.NONE;
        break;
    }

    if (read &gt; 0)
      in.unread(bom,0,read);
  }

  /**
   * Returns the &lt;code&gt;BOM&lt;/code&gt; that was detected in the wrapped
   * &lt;code&gt;InputStream&lt;/code&gt; object.
   * 
   * @return a &lt;code&gt;BOM&lt;/code&gt; value.
   */
  public final BOM getBOM()
  {
    // BOM type is immutable.
    return bom;
  }

  /**
   * Skips the &lt;code&gt;BOM&lt;/code&gt; that was found in the wrapped
   * &lt;code&gt;InputStream&lt;/code&gt; object.
   * 
   * @return this &lt;code&gt;UnicodeBOMInputStream&lt;/code&gt;.
   * 
   * @throws IOException when trying to skip the BOM from the wrapped
   * &lt;code&gt;InputStream&lt;/code&gt; object.
   */
  public final synchronized UnicodeBOMInputStream skipBOM() throws IOException
  {
    if (!skipped)
    {
      in.skip(bom.bytes.length);
      skipped = true;
    }
    return this;
  }

  /**
   * {@inheritDoc}
   */
  public int read() throws IOException
  {
    return in.read();
  }

  /**
   * {@inheritDoc}
   */
  public int read(final byte b[]) throws  IOException,
                                          NullPointerException
  {
    return in.read(b,0,b.length);
  }

  /**
   * {@inheritDoc}
   */
  public int read(final byte b[],
                  final int off,
                  final int len) throws IOException,
                                        NullPointerException
  {
    return in.read(b,off,len);
  }

  /**
   * {@inheritDoc}
   */
  public long skip(final long n) throws IOException
  {
    return in.skip(n);
  }

  /**
   * {@inheritDoc}
   */
  public int available() throws IOException
  {
    return in.available();
  }

  /**
   * {@inheritDoc}
   */
  public void close() throws IOException
  {
    in.close();
  }

  /**
   * {@inheritDoc}
   */
  public synchronized void mark(final int readlimit)
  {
    in.mark(readlimit);
  }

  /**
   * {@inheritDoc}
   */
  public synchronized void reset() throws IOException
  {
    in.reset();
  }

  /**
   * {@inheritDoc}
   */
  public boolean markSupported() 
  {
    return in.markSupported();
  }

  private final PushbackInputStream in;
  private final BOM                 bom;
  private       boolean             skipped = false;

} // UnicodeBOMInputStream
</code></pre>

<p>And you're using it this way:</p>

<pre><code>import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader;

public final class UnicodeBOMInputStreamUsage
{
  public static void main(final String[] args) throws Exception
  {
    FileInputStream fis = new FileInputStream(""test/offending_bom.txt"");
    UnicodeBOMInputStream ubis = new UnicodeBOMInputStream(fis);

    System.out.println(""detected BOM: "" + ubis.getBOM());

    System.out.print(""Reading the content of the file without skipping the BOM: "");
    InputStreamReader isr = new InputStreamReader(ubis);
    BufferedReader br = new BufferedReader(isr);

    System.out.println(br.readLine());

    br.close();
    isr.close();
    ubis.close();
    fis.close();

    fis = new FileInputStream(""test/offending_bom.txt"");
    ubis = new UnicodeBOMInputStream(fis);
    isr = new InputStreamReader(ubis);
    br = new BufferedReader(isr);

    ubis.skipBOM();

    System.out.print(""Reading the content of the file after skipping the BOM: "");
    System.out.println(br.readLine());

    br.close();
    isr.close();
    ubis.close();
    fis.close();
  }

} // UnicodeBOMInputStreamUsage
</code></pre>
",Gregory Pakosz,Gregory Pakosz,1259785241,1419254088,1419254088
http://stackoverflow.com/a/1838702/2333354,How can I decompress a gzip stream with zlib?,77988,Greg Hewgill,,1259831979,1519821271,0,https://stackoverflow.com/questions/1838699/how-can-i-decompress-a-gzip-stream-with-zlib,"<p>To decompress a gzip format file with zlib, call <code>inflateInit2</code> with the <code>windowBits</code> parameter as <code>16+MAX_WBITS</code>, like this:</p>

<pre><code>inflateInit2(&amp;stream, 16+MAX_WBITS);
</code></pre>

<p>If you don't do this, zlib will complain about a bad stream format. By default, zlib creates streams with a zlib header, and on inflate does not recognise the different gzip header unless you tell it so. Although this is documented starting in version 1.2.1 of the <code>zlib.h</code> header file, it is not in the <a href=""http://www.zlib.net/manual.html#inflateInit2"" rel=""noreferrer"">zlib manual</a>. From the header file:</p>

<blockquote>
  <p><code>windowBits</code> can also be greater than 15 for optional gzip decoding. Add
     32 to <code>windowBits</code> to enable zlib and gzip decoding with automatic header
     detection, or add 16 to decode only the gzip format (the zlib format will
     return a <code>Z_DATA_ERROR</code>).  If a gzip stream is being decoded, <code>strm-&gt;adler</code> is
     a crc32 instead of an adler32.</p>
</blockquote>
",Greg Hewgill,,1259832026,1259832026,0
http://stackoverflow.com/a/18391400/2652567,Is it not possible to stringify an Error using JSON.stringify?,67727,JayQuerie.com,Community,1377207241,1559467179,1495535475,https://stackoverflow.com/questions/18391212/is-it-not-possible-to-stringify-an-error-using-json-stringify,"<p>You can define a <code>Error.prototype.toJSON</code> to retrieve a plain <code>Object</code> representing the <code>Error</code>:</p>

<pre><code>if (!('toJSON' in Error.prototype))
Object.defineProperty(Error.prototype, 'toJSON', {
    value: function () {
        var alt = {};

        Object.getOwnPropertyNames(this).forEach(function (key) {
            alt[key] = this[key];
        }, this);

        return alt;
    },
    configurable: true,
    writable: true
});
</code></pre>



<pre><code>var error = new Error('testing');
error.detail = 'foo bar';

console.log(JSON.stringify(error));
// {""message"":""testing"",""detail"":""foo bar""}
</code></pre>

<p>Using <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"" rel=""noreferrer""><code>Object.defineProperty()</code></a> adds <code>toJSON</code> without it being an <code>enumerable</code> property itself.</p>

<hr>

<p>Regarding modifying <code>Error.prototype</code>, while <code>toJSON()</code> may not be defined for <code>Error</code>s specifically, <a href=""http://www.ecma-international.org/ecma-262/6.0/#sec-24.3.2.1"" rel=""noreferrer"">the method is still standardized</a> for objects in general (ref: step 3). So, the risk of collisions or conflicts is minimal.</p>

<p>Though, to still avoid it completely, <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify"" rel=""noreferrer""><code>JSON.stringify()</code>'s <code>replacer</code> parameter</a> can be used instead:</p>

<pre><code>function replaceErrors(key, value) {
    if (value instanceof Error) {
        var error = {};

        Object.getOwnPropertyNames(value).forEach(function (key) {
            error[key] = value[key];
        });

        return error;
    }

    return value;
}

var error = new Error('testing');
error.detail = 'foo bar';

console.log(JSON.stringify(error, replaceErrors));
</code></pre>
",Jonathan Lonowski,Jonathan Lonowski,1377208088,1459737111,1459737111
http://stackoverflow.com/a/18391901/263525,Remove accents/diacritics in a string in JavaScript,194770,glmxndr,Martijn Pieters,1244908141,1562086668,1504692131,https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript,"<p>I slightly modified khel version for one reason: Every regexp parse/replace will cost O(n) operations, where n is number of characters in target text. But, regexp is not exactly what we need. So:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>/*
   Licensed under the Apache License, Version 2.0 (the ""License"");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an ""AS IS"" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
*/
    var defaultDiacriticsRemovalMap = [
        {'base':'A', 'letters':'\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F'},
        {'base':'AA','letters':'\uA732'},
        {'base':'AE','letters':'\u00C6\u01FC\u01E2'},
        {'base':'AO','letters':'\uA734'},
        {'base':'AU','letters':'\uA736'},
        {'base':'AV','letters':'\uA738\uA73A'},
        {'base':'AY','letters':'\uA73C'},
        {'base':'B', 'letters':'\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181'},
        {'base':'C', 'letters':'\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E'},
        {'base':'D', 'letters':'\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779\u00D0'},
        {'base':'DZ','letters':'\u01F1\u01C4'},
        {'base':'Dz','letters':'\u01F2\u01C5'},
        {'base':'E', 'letters':'\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E'},
        {'base':'F', 'letters':'\u0046\u24BB\uFF26\u1E1E\u0191\uA77B'},
        {'base':'G', 'letters':'\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E'},
        {'base':'H', 'letters':'\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D'},
        {'base':'I', 'letters':'\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197'},
        {'base':'J', 'letters':'\u004A\u24BF\uFF2A\u0134\u0248'},
        {'base':'K', 'letters':'\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2'},
        {'base':'L', 'letters':'\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780'},
        {'base':'LJ','letters':'\u01C7'},
        {'base':'Lj','letters':'\u01C8'},
        {'base':'M', 'letters':'\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C'},
        {'base':'N', 'letters':'\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4'},
        {'base':'NJ','letters':'\u01CA'},
        {'base':'Nj','letters':'\u01CB'},
        {'base':'O', 'letters':'\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C'},
        {'base':'OI','letters':'\u01A2'},
        {'base':'OO','letters':'\uA74E'},
        {'base':'OU','letters':'\u0222'},
        {'base':'OE','letters':'\u008C\u0152'},
        {'base':'oe','letters':'\u009C\u0153'},
        {'base':'P', 'letters':'\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754'},
        {'base':'Q', 'letters':'\u0051\u24C6\uFF31\uA756\uA758\u024A'},
        {'base':'R', 'letters':'\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782'},
        {'base':'S', 'letters':'\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784'},
        {'base':'T', 'letters':'\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786'},
        {'base':'TZ','letters':'\uA728'},
        {'base':'U', 'letters':'\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244'},
        {'base':'V', 'letters':'\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245'},
        {'base':'VY','letters':'\uA760'},
        {'base':'W', 'letters':'\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72'},
        {'base':'X', 'letters':'\u0058\u24CD\uFF38\u1E8A\u1E8C'},
        {'base':'Y', 'letters':'\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE'},
        {'base':'Z', 'letters':'\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762'},
        {'base':'a', 'letters':'\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250'},
        {'base':'aa','letters':'\uA733'},
        {'base':'ae','letters':'\u00E6\u01FD\u01E3'},
        {'base':'ao','letters':'\uA735'},
        {'base':'au','letters':'\uA737'},
        {'base':'av','letters':'\uA739\uA73B'},
        {'base':'ay','letters':'\uA73D'},
        {'base':'b', 'letters':'\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253'},
        {'base':'c', 'letters':'\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184'},
        {'base':'d', 'letters':'\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A'},
        {'base':'dz','letters':'\u01F3\u01C6'},
        {'base':'e', 'letters':'\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD'},
        {'base':'f', 'letters':'\u0066\u24D5\uFF46\u1E1F\u0192\uA77C'},
        {'base':'g', 'letters':'\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F'},
        {'base':'h', 'letters':'\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265'},
        {'base':'hv','letters':'\u0195'},
        {'base':'i', 'letters':'\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131'},
        {'base':'j', 'letters':'\u006A\u24D9\uFF4A\u0135\u01F0\u0249'},
        {'base':'k', 'letters':'\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3'},
        {'base':'l', 'letters':'\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747'},
        {'base':'lj','letters':'\u01C9'},
        {'base':'m', 'letters':'\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F'},
        {'base':'n', 'letters':'\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5'},
        {'base':'nj','letters':'\u01CC'},
        {'base':'o', 'letters':'\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275'},
        {'base':'oi','letters':'\u01A3'},
        {'base':'ou','letters':'\u0223'},
        {'base':'oo','letters':'\uA74F'},
        {'base':'p','letters':'\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755'},
        {'base':'q','letters':'\u0071\u24E0\uFF51\u024B\uA757\uA759'},
        {'base':'r','letters':'\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783'},
        {'base':'s','letters':'\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B'},
        {'base':'t','letters':'\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787'},
        {'base':'tz','letters':'\uA729'},
        {'base':'u','letters': '\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289'},
        {'base':'v','letters':'\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C'},
        {'base':'vy','letters':'\uA761'},
        {'base':'w','letters':'\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73'},
        {'base':'x','letters':'\u0078\u24E7\uFF58\u1E8B\u1E8D'},
        {'base':'y','letters':'\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF'},
        {'base':'z','letters':'\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763'}
    ];

    var diacriticsMap = {};
    for (var i=0; i &lt; defaultDiacriticsRemovalMap .length; i++){
        var letters = defaultDiacriticsRemovalMap [i].letters;
        for (var j=0; j &lt; letters.length ; j++){
            diacriticsMap[letters[j]] = defaultDiacriticsRemovalMap [i].base;
        }
    }

    // ""what?"" version ... http://jsperf.com/diacritics/12
    function removeDiacritics (str) {
        return str.replace(/[^\u0000-\u007E]/g, function(a){ 
           return diacriticsMap[a] || a; 
        });
    }    
    var paragraph = ""L'avantage d'utiliser le lorem ipsum est bien     videmment de pouvoir crer des maquettes ou de remplir un site internet de contenus qui prsentent un rendu s'approchant un maximum du rendu final. \n Par dfaut lorem ipsum ne contient pas d'accent ni de caractres spciaux contrairement  la langue franaise qui en contient beaucoup. C'est sur ce critre que nous proposons une solution avec cet outil qui gnrant du faux-texte lorem ipsum mais avec en plus, des caractres spciaux tel que les accents ou certains symboles utiles pour la langue franaise. \n L'utilisation du lorem standard est facile dutilisation mais lorsque le futur client utilisera votre logiciel il se peut que certains caractres spciaux ou qu'un accent ne soient pas cods correctement. \n Cette page a pour but donc de pouvoir perdre le moins de temps possible et donc de tester directement si tous les encodages de base de donne ou des sites sont les bons de plus il permet de rcuperer un code css avec le texte format !"";
    alert(removeDiacritics(paragraph));</code></pre>
</div>
</div>
</p>

<p>To test my theory I wrote a test in <a href=""http://jsperf.com/diacritics/12"">http://jsperf.com/diacritics/12</a>. Results:</p>

<p>Testing in Chrome 28.0.1500.95 32-bit on Windows 8 64-bit:<br/>
Using Regexp<br/>
4,558 ops/sec 4.16%. 37% slower<br/>
String Builder style<br/>
7,308 ops/sec 4.88%. fastest</p>

<h2>Update</h2>

<p>Testing in Chrome 33.0.1750 on Windows 8 64-bit:<br/></p>

<p>Using Regexp<br/>
5,260 1.25% ops/sec 76% slower<br/>
Using @skerit version<br/>
22,138 2.12% ops/sec fastest<br/></p>

<h3>Update - 19/03/2014</h3>

<p>Adding missing ""OE"" diacritics.</p>

<h3>Update - 27/03/2014</h3>

<p>Using a faster way to transverse a string using js - ""What?"" Version</p>

<p><img src=""https://i.stack.imgur.com/PlU88.png"" alt=""jsPerf comparision""></p>

<h3>Update - 14/05/2014</h3>

<p>Community wiki</p>
",rdllopes,halloei,1377210974,1479076128,1479076128
http://stackoverflow.com/a/18413224/122441,Java - Relative path of a file in a java web application,138642,Yatendra Goel,Yatendra Goel,1267953661,1390553674,1267967024,https://stackoverflow.com/questions/2395737/java-relative-path-of-a-file-in-a-java-web-application,"<p>Many popular Java webapps, including <a href=""http://jenkins-ci.org/"" rel=""nofollow"">Jenkins</a> and <a href=""http://www.sonatype.org/nexus/"" rel=""nofollow"">Nexus</a>, use this mechanism:</p>

<ol>
<li><p>Optionally, <strong>check a servlet context-param / init-param</strong>. This allows configuring multiple webapp instances per servlet container, using <code>context.xml</code> which can be done by modifying the WAR or by changing server settings (in case of Tomcat).</p></li>
<li><p><strong>Check an environment variable</strong> (using <a href=""http://docs.oracle.com/javase/7/docs/api/java/lang/System.html"" rel=""nofollow"">System.getenv</a>), if it is set, then use that folder as your application data folder. e.g. Jenkins uses <code>JENKINS_HOME</code> and Nexus uses <code>PLEXUS_NEXUS_WORK</code>. This allows flexible configuration without any changes to WAR.</p></li>
<li><p>Otherwise, <strong>use a subfolder inside user's home folder</strong>, e.g. <code>$HOME/.yourapp</code>. In Java code this will be:</p>

<pre><code>final File appFolder = new File(System.getProperty(""user.home""), "".yourapp"");
</code></pre></li>
</ol>
",Hendy Irawan,Hendy Irawan,1377299787,1377302304,1377302304
http://stackoverflow.com/a/18467892/1431.00,Convert number to month name in PHP,272357,user2710234,Amal Murali,1377612248,1561894807,1401911154,https://stackoverflow.com/questions/18467669/convert-number-to-month-name-in-php,"<p><strong>The recommended way to do this:</strong></p>

<p>Nowadays, you should really be using DateTime objects for any date/time math. This requires you to have a PHP version >= 5.2. As shown in <a href=""https://stackoverflow.com/a/18467880/1438393"">Glavi's answer</a>, you can use the following:</p>

<pre><code>$monthNum  = 3;
$dateObj   = DateTime::createFromFormat('!m', $monthNum);
$monthName = $dateObj-&gt;format('F'); // March
</code></pre>

<p>The <a href=""http://www.php.net/manual/en/datetime.createfromformat.php"" rel=""noreferrer""><code>!</code> formatting character</a> is used to reset everything to the <a href=""https://stackoverflow.com/q/20822821/1438393"">Unix epoch</a>. The <code>m</code> format character is the numeric representation of a month, with leading zeroes. </p>

<p><strong>Alternative solution:</strong></p>

<p>If you're using an older PHP version and can't upgrade at the moment, you could this solution.
The second parameter of <a href=""http://php.net/date"" rel=""noreferrer""><code>date()</code></a> function accepts a timestamp, and you could use <a href=""http://php.net/mktime"" rel=""noreferrer""><code>mktime()</code></a> to create one, like so:</p>

<pre><code>$monthNum  = 3;
$monthName = date('F', mktime(0, 0, 0, $monthNum, 10)); // March
</code></pre>

<p>If you want the 3-letter month name like <code>Mar</code>, change <code>F</code> to <code>M</code>. The list of all available formatting options can be found in <a href=""http://php.net/manual/en/function.date.php"" rel=""noreferrer"">the PHP manual documentation</a>.</p>
",Amal Murali,Community,1377612786,1401911045,1495540484
http://stackoverflow.com/a/1848414/58524,JS Events: hooking on value change event on text inputs,36608,Esteban Feldman,Community,1259942344,1416412661,1495541853,https://stackoverflow.com/questions/1847893/js-events-hooking-on-value-change-event-on-text-inputs,"<blockquote>
  <p>I can't find a suitable event for that.</p>
</blockquote>

<p>Yeah, there isn't one.</p>

<p>There are <a href=""https://developer.mozilla.org/En/XUL/Events#Mutation_DOM_events"" rel=""noreferrer"">DOM Mutation Events</a>, but they aren't supported well cross-browser, and don't fire for form values anyway as those aren't reflected in attributes (except in IE due to a bug).</p>

<p>In Mozilla only, a JavaScript <a href=""https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference:Global_Objects:Object:watch"" rel=""noreferrer"">watch</a> could be set on the value property to catch scripted changes. In IE only, a JScript <a href=""http://msdn.microsoft.com/en-us/library/ms536956%28VS.85%29.aspx"" rel=""noreferrer"">onpropertychange</a> handler could be set to catch both scripted and user-driven changes. In other browsers you would have to use your own interval poller to look for changes.</p>

<pre><code>function watchProperty(obj, name, handler) {
    if ('watch' in obj) {
        obj.watch(name, handler);
    } else if ('onpropertychange' in obj) {
        name= name.toLowerCase();
        obj.onpropertychange= function() {
            if (window.event.propertyName.toLowerCase()===name)
                handler.call(obj);
        };
    } else {
        var o= obj[name];
        setInterval(function() {
            var n= obj[name];
            if (o!==n) {
                o= n;
                handler.call(obj);
            }
        }, 200);
    }
}

watchProperty(document.getElementById('myinput'), 'value', function() {
    alert('changed!');
});
</code></pre>

<p>This is highly unsatisfactory. It won't respond to user-driven changes in Mozilla, it allows only one watched property per object in IE, and in other browsers the handler function will get called much later in execution flow.</p>

<p>It's almost certainly better to rewrite the parts of script that set <code>value</code> to call a setValue wrapper function instead, that you can monitor for changes you want to trap.</p>
",bobince,,1259947206,1259947206,0
http://stackoverflow.com/a/18493673/145829,Mysql Connection with Phpstorm IDE,27718,Sarmen B.,hakre,1302848460,1492367889,1439021071,https://stackoverflow.com/questions/5673080/mysql-connection-with-phpstorm-ide,"<p>You can't use Unix sockets with the standard JDBC driver.  There's nothing about JDBC that prohibits writing a Unix socket driver, but I don't know of one.</p>

<p>Instead, you'll likely want to enable network connections in MySQL and use the following JDBC URL:</p>

<p>jdbc:mysql://localhost/mysql</p>
",rich remer,,1377708145,1377708145,0
http://stackoverflow.com/a/18542272/1470961,Check if PHP session has already started,404103,Logan,random,1307350851,1548882106,1342646705,https://stackoverflow.com/questions/6249707/check-if-php-session-has-already-started,"<p>Recommended way for versions of <strong>PHP >= 5.4.0 , PHP 7</strong></p>

<pre><code>if (session_status() == PHP_SESSION_NONE) {
    session_start();
}
</code></pre>

<p>Reference: <a href=""http://www.php.net/manual/en/function.session-status.php"" rel=""noreferrer"">http://www.php.net/manual/en/function.session-status.php</a></p>

<p>For versions of <strong>PHP &lt; 5.4.0</strong></p>

<pre><code>if(session_id() == '') {
    session_start();
}
</code></pre>
",lovelyramos,lovelyramos,1377901245,1544030859,1544030859
http://stackoverflow.com/a/18552461/115145,AppWidgetProvider: onAppWidgetOptionsChanged not being called on widget placement,2188,Eric Cochran,Eric Cochran,1377845741,1396993985,1377848047,https://stackoverflow.com/questions/18526770/appwidgetprovider-onappwidgetoptionschanged-not-being-called-on-widget-placemen,"<p>So, the documentation says about onUpdate(): ""...[I]f you have declared a configuration Activity, this method is not called when the user adds the App Widget, but is called for the subsequent updates.""
Well, apparently that is not true, either.  onUpdate() is called, even though I have a configuration Activity for my widget.</p>

<p>Anyway, calling onAppWidgetOptionsChanged() from onUpdate() seems to be a workaround in 4.2+-based launchers because onUpdate() is called when the widget is first placed on the home screen, and we can get the Bundle appWidgetOptions from the AppWidgetManager instance.</p>

<pre><code>@Override
  public void onUpdate(Context context, AppWidgetManager appWidgetManager, int appWidgetIds[]){
      super.onUpdate(context, appWidgetManager, appWidgetIds);
      final int N = appWidgetIds.length;
      for (int i=0; i&lt;N; i++) {
          int appWidgetId = appWidgetIds[i];
          Bundle options = appWidgetManager.getAppWidgetOptions(appWidgetId);
          if(options!=null){
              int nwidth = options.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH);
              int nheight = options.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_HEIGHT);
              onAppWidgetOptionsChanged(context, appWidgetManager, appWidgetId, options);
          }
      }
  }
</code></pre>
",Eric Cochran,Eric Cochran,1377980531,1377981515,1377981515
http://stackoverflow.com/a/18555142/790973,Make outer tokens change inner tokens in a chemical formula using pyparsing,341,Thales MG,Thales MG,1377798666,1378008682,1377812405,https://stackoverflow.com/questions/18517779/make-outer-tokens-change-inner-tokens-in-a-chemical-formula-using-pyparsing,"<p>Recursion is definitely needed to solve this. In pyparsing, you define a recursive grammar using the <code>Forward</code> class. See the annotations in this code sample:</p>

<pre><code>from pyparsing import (Suppress, Word, nums, alphas, Regex, Forward, Group, 
                        Optional, OneOrMore, ParseResults)
from collections import defaultdict

""""""
BNF for simple chemical formula (no nesting)

    integer :: '0'..'9'+
    element :: 'A'..'Z' 'a'..'z'*
    term :: element [integer]
    formula :: term+


BNF for nested chemical formula

    integer :: '0'..'9'+
    element :: 'A'..'Z' 'a'..'z'*
    term :: (element | '(' formula ')') [integer]
    formula :: term+

""""""

LPAR,RPAR = map(Suppress,""()"")
integer = Word(nums)

# add parse action to convert integers to ints, to support doing addition 
# and multiplication at parse time
integer.setParseAction(lambda t:int(t[0]))

element = Word(alphas.upper(), alphas.lower())
# or if you want to be more specific, use this Regex
# element = Regex(r""A[cglmrstu]|B[aehikr]?|C[adeflmorsu]?|D[bsy]|E[rsu]|F[emr]?|""
#                 ""G[ade]|H[efgos]?|I[nr]?|Kr?|L[airu]|M[dgnot]|N[abdeiop]?|""
#                 ""Os?|P[abdmortu]?|R[abefghnu]|S[bcegimnr]?|T[abcehilm]|""
#                 ""Uu[bhopqst]|U|V|W|Xe|Yb?|Z[nr]"")

# forward declare 'formula' so it can be used in definition of 'term'
formula = Forward()

term = Group((element | Group(LPAR + formula + RPAR)(""subgroup"")) + 
                Optional(integer, default=1)(""mult""))

# define contents of a formula as one or more terms
formula &lt;&lt; OneOrMore(term)


# add parse actions for parse-time processing

# parse action to multiply out subgroups
def multiplyContents(tokens):
    t = tokens[0]
    # if these tokens contain a subgroup, then use multiplier to
    # extend counts of all elements in the subgroup
    if t.subgroup:
        mult = t.mult
        for term in t.subgroup:
            term[1] *= mult
        return t.subgroup
term.setParseAction(multiplyContents)

# add parse action to sum up multiple references to the same element
def sumByElement(tokens):
    elementsList = [t[0] for t in tokens]

    # construct set to see if there are duplicates
    duplicates = len(elementsList) &gt; len(set(elementsList))

    # if there are duplicate element names, sum up by element and
    # return a new nested ParseResults
    if duplicates:
        ctr = defaultdict(int)
        for t in tokens:
            ctr[t[0]] += t[1]
        return ParseResults([ParseResults([k,v]) for k,v in ctr.items()])
formula.setParseAction(sumByElement)


# run some tests
tests = """"""\
    H
    NaCl
    HO
    H2O
    HOH
    (H2O)2
    (H2O)2OH
    ((H2O)2OH)12
    C6H5OH
    """""".splitlines()
for t in tests:
    if t.strip():
        results = formula.parseString(t)
        print t, '-&gt;', dict(results.asList())
</code></pre>

<p>Prints out:</p>

<pre><code>H -&gt; {'H': 1}
NaCl -&gt; {'Na': 1, 'Cl': 1}
HO -&gt; {'H': 1, 'O': 1}
H2O -&gt; {'H': 2, 'O': 1}
HOH -&gt; {'H': 2, 'O': 1}
(H2O)2 -&gt; {'H': 4, 'O': 2}
(H2O)2OH -&gt; {'H': 5, 'O': 3}
((H2O)2OH)12 -&gt; {'H': 60, 'O': 36}
C6H5OH -&gt; {'H': 6, 'C': 6, 'O': 1}
</code></pre>
",PaulMcG,,1378008682,1378008682,0
http://stackoverflow.com/a/18579046/1143732,Rails mailer views in separated directory,8864,Calin,,1333567481,1476320395,0,https://stackoverflow.com/questions/10017907/rails-mailer-views-in-separated-directory,"<p>I so agree with this organization strategy!</p>

<p>And from Nobita's example, I achieved it by doing:</p>

<pre><code>class UserMailer &lt; ActionMailer::Base
  default :from =&gt; ""whatever@whatever.com""
  default :template_path =&gt; '**your_path**'

  def whatever_email(user)
    @user = user
    @url  = ""http://whatever.com""
    mail(:to =&gt; user.email,
         :subject =&gt; ""Welcome to Whatever"",
         )
  end
end
</code></pre>

<p>It is Mailer-specific but not too bad! </p>
",Augustin Riedinger,,1378146775,1378146775,0
http://stackoverflow.com/a/18602474/1362108,"Converting timestamp to time ago in PHP e.g 1 day ago, 2 days ago...",213900,willdanceforfun,lorem monkey,1252809551,1562185590,1348738643,https://stackoverflow.com/questions/1416697/converting-timestamp-to-time-ago-in-php-e-g-1-day-ago-2-days-ago,"<h3>Use example :</h3>

<pre class=""lang-php prettyprint-override""><code>echo time_elapsed_string('2013-05-01 00:22:35');
echo time_elapsed_string('@1367367755'); # timestamp input
echo time_elapsed_string('2013-05-01 00:22:35', true);
</code></pre>

<p>Input can be any <a href=""http://www.php.net/manual/en/datetime.formats.php"" rel=""noreferrer"">supported date and time format</a>.</p>

<h3>Output :</h3>

<pre class=""lang-none prettyprint-override""><code>4 months ago
4 months, 2 weeks, 3 days, 1 hour, 49 minutes, 15 seconds ago
</code></pre>

<h3>Function :</h3>

<pre class=""lang-php prettyprint-override""><code>function time_elapsed_string($datetime, $full = false) {
    $now = new DateTime;
    $ago = new DateTime($datetime);
    $diff = $now-&gt;diff($ago);

    $diff-&gt;w = floor($diff-&gt;d / 7);
    $diff-&gt;d -= $diff-&gt;w * 7;

    $string = array(
        'y' =&gt; 'year',
        'm' =&gt; 'month',
        'w' =&gt; 'week',
        'd' =&gt; 'day',
        'h' =&gt; 'hour',
        'i' =&gt; 'minute',
        's' =&gt; 'second',
    );
    foreach ($string as $k =&gt; &amp;$v) {
        if ($diff-&gt;$k) {
            $v = $diff-&gt;$k . ' ' . $v . ($diff-&gt;$k &gt; 1 ? 's' : '');
        } else {
            unset($string[$k]);
        }
    }

    if (!$full) $string = array_slice($string, 0, 1);
    return $string ? implode(', ', $string) . ' ago' : 'just now';
}
</code></pre>
",Glavi,Glavi,1378247062,1494859613,1494859613
http://stackoverflow.com/a/18609594/296172,Recursion in Angular directives,63297,Benny Bottema,Community,1358725251,1545260752,1495542884,https://stackoverflow.com/questions/14430655/recursion-in-angular-directives,"<p>Inspired by the solutions described in the thread mentioned by @dnc253, I abstracted the recursion functionality <a href=""https://github.com/marklagendijk/angular-recursion"" rel=""nofollow noreferrer"">into a service</a>.</p>

<pre><code>module.factory('RecursionHelper', ['$compile', function($compile){
    return {
        /**
         * Manually compiles the element, fixing the recursion loop.
         * @param element
         * @param [link] A post-link function, or an object with function(s) registered via pre and post properties.
         * @returns An object containing the linking functions.
         */
        compile: function(element, link){
            // Normalize the link parameter
            if(angular.isFunction(link)){
                link = { post: link };
            }

            // Break the recursion loop by removing the contents
            var contents = element.contents().remove();
            var compiledContents;
            return {
                pre: (link &amp;&amp; link.pre) ? link.pre : null,
                /**
                 * Compiles and re-adds the contents
                 */
                post: function(scope, element){
                    // Compile the contents
                    if(!compiledContents){
                        compiledContents = $compile(contents);
                    }
                    // Re-add the compiled contents to the element
                    compiledContents(scope, function(clone){
                        element.append(clone);
                    });

                    // Call the post-linking function, if any
                    if(link &amp;&amp; link.post){
                        link.post.apply(null, arguments);
                    }
                }
            };
        }
    };
}]);
</code></pre>

<p>Which is used as follows:</p>

<pre><code>module.directive(""tree"", [""RecursionHelper"", function(RecursionHelper) {
    return {
        restrict: ""E"",
        scope: {family: '='},
        template: 
            '&lt;p&gt;{{ family.name }}&lt;/p&gt;'+
            '&lt;ul&gt;' + 
                '&lt;li ng-repeat=""child in family.children""&gt;' + 
                    '&lt;tree family=""child""&gt;&lt;/tree&gt;' +
                '&lt;/li&gt;' +
            '&lt;/ul&gt;',
        compile: function(element) {
            // Use the compile function from the RecursionHelper,
            // And return the linking function(s) which it returns
            return RecursionHelper.compile(element);
        }
    };
}]);
</code></pre>

<p>See this <a href=""http://plnkr.co/edit/JAIyolmqPqO9KsynSiZp?p=preview"" rel=""nofollow noreferrer"">Plunker</a> for a demo.
I like this solution best because:</p>

<ol>
<li>You don't need an special directive which makes your html less clean.</li>
<li>The recursion logic is abstracted away into the RecursionHelper service, so you keep your directives clean.</li>
</ol>

<p>Update:
  As of Angular 1.5.x, no more tricks are required, but works only with <em>template</em>, not with <em>templateUrl</em></p>
",Mark Lagendijk,Ilja Den,1378285446,1545260752,1545260752
http://stackoverflow.com/a/18618250/76472,How to calculate modulo of negative integers in JavaScript?,9547,jeff,ProgramFOX,1378309062,1446864467,1387808200,https://stackoverflow.com/questions/18618136/how-to-calculate-modulo-of-negative-integers-in-javascript,"<p>You can try this :p-</p>

<pre><code>Number.prototype.mod = function(n) {
    return ((this % n) + n) % n;
}
</code></pre>

<p>Check out <a href=""http://javascript.about.com/od/problemsolving/a/modulobug.htm"" rel=""noreferrer"">this</a></p>
",Rahul Tripathi,Mr. Polywhirl,1378309415,1446864467,1446864467
http://stackoverflow.com/a/18618273/1517919,How to calculate modulo of negative integers in JavaScript?,9547,jeff,ProgramFOX,1378309062,1446864467,1387808200,https://stackoverflow.com/questions/18618136/how-to-calculate-modulo-of-negative-integers-in-javascript,"<p>Most languages which inherit from C will return a negative result if the first operand of a modulo operation is negative and the second is positive. I'm not sure why this decision was made originally. Probably closest to what processors at that time did in assembly. In any case, since then the answer to why is most likely because that's what programmers who know C expect.</p>

<p>The <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#.25_.28Modulus.29"" rel=""noreferrer"">MDC Reference</a> contains a pointer to <a href=""http://wiki.ecmascript.org/doku.php?id=strawman:modulo_operator"" rel=""noreferrer"">a proposal to introduce a proper <em>mod</em> operator</a>. But even that would keep the existing <code>%</code> operator (which they call remainder to better distinguish between them) and introduce a new infix word notation <code>a mod b</code>. The proposal dates from 2011, and I know no more recent developments in this direction.</p>
",MvG,MvG,1378309466,1378311909,1378311909
http://stackoverflow.com/a/18630122/14379,JMS performance,8097,Lukas Eder,Lukas Eder,1301392322,1465475785,1301400376,https://stackoverflow.com/questions/5470691/jms-performance,"<p>Here are some relevant parts of the <a href=""http://download.oracle.com/otndocs/jcp/7195-jms-1.1-fr-spec-oth-JSpec/"" rel=""noreferrer"">jms spec</a>:</p>

<p>section 2.8 Multithreading</p>

<pre><code>JMS Object          Supports Concurrent Use
Destination         YES
ConnectionFactory   YES
Connection          YES
Session             NO
MessageProducer     NO
MessageConsumer     NO
</code></pre>

<p>section 4.4.14 Serial Execution of Client Code</p>

<blockquote>
  <p>JMS does not cause concurrent execution of client code unless a client explicitly requests it. One way this is done is to define that a session serializes all asynchronous delivery of messages</p>
</blockquote>

<p>So as already mentioned reuse as much as possible. Reuse the ConnectionFactory, Connection and Destinations for all Threads. For each Thread reuse consumers and producers.</p>

<p>If you are reusing a JMS connection beware, that the JMS Provider will multiplex different sessions on that connections. So even if it is safe to reuse connections it might be faster to create a connection for every session you need.</p>
",SpaceTrucker,SpaceTrucker,1378365661,1465475785,1465475785
http://stackoverflow.com/a/18648366/3962537,Boost.Python: Wrap functions to release the GIL,2946,Rippalka,Tanner Sansbury,1378309606,1437144424,1378430156,https://stackoverflow.com/questions/18618333/boost-python-wrap-functions-to-release-the-gil,"<p>Exposing functors as methods is not <a href=""http://www.boost.org/doc/libs/1_58_0/libs/python/todo.html#wrapping-function-objects"" rel=""noreferrer"">officially supported</a>. The supported approach would be to expose a non-member function that delegates to the member-function.  However, this can result in a large amount of boilerplate code.</p>

<p>As best as I can tell, Boost.Python's implementation does not explicitly preclude functors, as it allows for instances of <code>python::object</code> to be exposed as a method.  However, Boost.Python does place some requirements on the type of object being exposed as a method:</p>

<ul>
<li>The functor is CopyConstructible.</li>
<li>The functor is callable.  I.e. instance <code>o</code> can be called <code>o(a1, a2, a3)</code>.</li>
<li>The call signature must be available as meta-data during runtime.  Boost.Python calls the <code>boost::python::detail::get_signature()</code> function to obtain this meta-data.  The meta-data is used internally to setup proper invocation, as well as for dispatching from Python to C++.</li>
</ul>

<p>The latter requirement is where it gets complex.  For some reason that is not immediately clear to me, Boost.Python invokes <code>get_signature()</code> through a qualified-id, preventing argument dependent lookup.  Therefore, all candidates for <code>get_signature()</code> must be declared before the calling template's definition context.  For example, the only overloads for <code>get_signature()</code> that are considered are those declared before the definition of templates that invoke it, such as <code>class_</code>, <code>def()</code>, and <code>make_function()</code>.  To account for this behavior, when enabling a functor in Boost.Python, one must provide a <code>get_signature()</code> overload prior to including Boost.Python or explicitly provide a meta-sequence representing the signature to <code>make_function()</code>.</p>

<hr>

<p>Lets work through some examples of enabling functor support, as well as providing functors that support guards.  I have opted to not use C++11 features.  As such, there will be some boilerplate code that could be reduced with variadic templates.  Additionally, all of the examples will use the same model that provides two non-member functions and a <code>spam</code> class that has two member-functions:</p>

<pre class=""lang-cpp prettyprint-override""><code>/// @brief Mockup class with member functions.
class spam
{
public:
  void action()
  {
    std::cout &lt;&lt; ""spam::action()""  &lt;&lt; std::endl;
  }

  int times_two(int x)
  {
    std::cout &lt;&lt; ""spam::times_two()"" &lt;&lt; std::endl;
    return 2 * x;
  }
};

// Mockup non-member functions.
void action()
{
  std::cout &lt;&lt; ""action()""  &lt;&lt; std::endl;
}

int times_two(int x)
{
  std::cout &lt;&lt; ""times_two()"" &lt;&lt; std::endl;
  return 2 * x;
}
</code></pre>

<h3>Enabling <code>boost::function</code></h3>

<p>When using the <a href=""http://www.boost.org/doc/libs/1_58_0/doc/html/function/tutorial.html#idp59212272"" rel=""noreferrer"">preferred syntax</a> for Boost.Function, decomposing the signature into meta-data that meets Boost.Python requirements can be done with <a href=""http://www.boost.org/doc/libs/1_58_0/libs/function_types/doc/html/boost_functiontypes/reference/decomposition.html"" rel=""noreferrer"">Boost.FunctionTypes</a>.  Here is a complete example enabling <code>boost::function</code> functors to be exposed as a Boost.Python method:</p>

<pre><code>#include &lt;iostream&gt;

#include &lt;boost/function.hpp&gt;
#include &lt;boost/function_types/components.hpp&gt;

namespace boost  {
namespace python {
namespace detail {
// get_signature overloads must be declared before including
// boost/python.hpp.  The declaration must be visible at the
// point of definition of various Boost.Python templates during
// the first phase of two phase lookup.  Boost.Python invokes the
// get_signature function via qualified-id, thus ADL is disabled.

/// @brief Get the signature of a boost::function.
template &lt;typename Signature&gt;
inline typename boost::function_types::components&lt;Signature&gt;::type
get_signature(boost::function&lt;Signature&gt;&amp;, void* = 0)
{
  return typename boost::function_types::components&lt;Signature&gt;::type();
}

} // namespace detail
} // namespace python
} // namespace boost

#include &lt;boost/python.hpp&gt;

/// @brief Mockup class with member functions.
class spam
{
public:
  void action()
  {
    std::cout &lt;&lt; ""spam::action()""  &lt;&lt; std::endl;
  }

  int times_two(int x)
  {
    std::cout &lt;&lt; ""spam::times_two()"" &lt;&lt; std::endl;
    return 2 * x;
  }
};

// Mockup non-member functions.
void action()
{
  std::cout &lt;&lt; ""action()""  &lt;&lt; std::endl;
}

int times_two(int x)
{
  std::cout &lt;&lt; ""times_two()"" &lt;&lt; std::endl;
  return 2 * x;
}

BOOST_PYTHON_MODULE(example)
{
  namespace python = boost::python;

  // Expose class and member-function.
  python::class_&lt;spam&gt;(""Spam"")
    .def(""action"",  &amp;spam::action)
    .def(""times_two"", boost::function&lt;int(spam&amp;, int)&gt;(
        &amp;spam::times_two))
    ;

  // Expose non-member function.
  python::def(""action"",  &amp;action);
  python::def(""times_two"", boost::function&lt;int()&gt;(
      boost::bind(&amp;times_two, 21)));
}
</code></pre>

<p>And its usage:</p>

<pre class=""lang-python prettyprint-override""><code>&gt;&gt;&gt; import example
&gt;&gt;&gt; spam = example.Spam()
&gt;&gt;&gt; spam.action()
spam::action()
&gt;&gt;&gt; spam.times_two(5)
spam::times_two()
10
&gt;&gt;&gt; example.action()
action()
&gt;&gt;&gt; example.times_two()
times_two()
42
</code></pre>

<p>When providing a functor that will invoke a member-function, the provided signature needs to be the non-member function equivalent.  In this case, <code>int(spam::*)(int)</code> becomes <code>int(spam&amp;, int)</code>.</p>

<pre class=""lang-cpp prettyprint-override""><code>// ...
  .def(""times_two"", boost::function&lt;int(spam&amp;, int)&gt;(
        &amp;spam::times_two))
  ;
</code></pre>

<p>Also, arguments can be bound to the functors with <a href=""http://www.boost.org/doc/libs/1_58_0/libs/bind/bind.html"" rel=""noreferrer""><code>boost::bind</code></a>.  For example, calling <code>example.times_two()</code> does not have to provide an argument, as <code>21</code> is already bound to the functor.</p>

<pre class=""lang-cpp prettyprint-override""><code>python::def(""times_two"", boost::function&lt;int()&gt;(
    boost::bind(&amp;times_two, 21)));
</code></pre>

<h3>Custom functor with guards</h3>

<p>Expanding upon the above example, one can enable custom functor types to be used with Boost.Python.  Lets create a functor, called <code>guarded_function</code>, that will use <a href=""http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization"" rel=""noreferrer"">RAII</a>, only invoking the wrapped function during the RAII object's lifetime.</p>

<pre><code>/// @brief Functor that will invoke a function while holding a guard.
///        Upon returning from the function, the guard is released.
template &lt;typename Signature,
          typename Guard&gt;
class guarded_function
{
public:

  typedef typename boost::function_types::result_type&lt;Signature&gt;::type
      result_type;

  template &lt;typename Fn&gt;
  guarded_function(Fn fn)
    : fn_(fn)
  {}

  result_type operator()()
  {
    Guard g;
    return fn_();
  }

  // ... overloads for operator()

private:
  boost::function&lt;Signature&gt; fn_;
};
</code></pre>

<p>The <code>guarded_function</code> provides similar semantics to the Python <a href=""http://docs.python.org/2/reference/compound_stmts.html#with"" rel=""noreferrer""><code>with</code></a> statement.  Thus, to keep with the Boost.Python API name choices, a <code>with()</code> C++ function will provide a way to create functors.</p>

<pre><code>/// @brief Create a callable object with guards.
template &lt;typename Guard,
          typename Fn&gt;
boost::python::object
with(Fn fn)
{
   return boost::python::make_function(
     guarded_function&lt;Guard, Fn&gt;(fn), ...);
}
</code></pre>

<p>This allows for functions to be exposed which will run with a guard in a non-intrusive manner:</p>

<pre><code>class no_gil; // Guard

// ...
  .def(""times_two"", with&lt;no_gil&gt;(&amp;spam::times_two))
  ;
</code></pre>

<p>Additionally, the <code>with()</code> function provides the ability to deduce the function signatures, allowing the meta-data signature to be explicitly provided to Boost.Python rather than having to overload <code>boost::python::detail::get_signature()</code>.</p>

<p>Here is the complete example, using two RAII types:</p>

<ul>
<li><code>no_gil</code>: Releases GIL in constructor, and reacquires GIL in destructor.</li>
<li><code>echo_guard</code>: Prints in constructor and destructor.</li>
</ul>

<pre class=""lang-cpp prettyprint-override""><code>#include &lt;iostream&gt;

#include &lt;boost/function.hpp&gt;
#include &lt;boost/function_types/components.hpp&gt;
#include &lt;boost/function_types/function_type.hpp&gt;
#include &lt;boost/function_types/result_type.hpp&gt;
#include &lt;boost/python.hpp&gt;
#include &lt;boost/tuple/tuple.hpp&gt;

namespace detail {

/// @brief Functor that will invoke a function while holding a guard.
///        Upon returning from the function, the guard is released.
template &lt;typename Signature,
          typename Guard&gt;
class guarded_function
{
public:

  typedef typename boost::function_types::result_type&lt;Signature&gt;::type
      result_type;

  template &lt;typename Fn&gt;
  guarded_function(Fn fn)
    : fn_(fn)
  {}

  result_type operator()()
  {
    Guard g;
    return fn_();
  }

  template &lt;typename A1&gt;
  result_type operator()(A1 a1)
  {
    Guard g;
    return fn_(a1);
  }

  template &lt;typename A1, typename A2&gt;
  result_type operator()(A1 a1, A2 a2)
  {
    Guard g;
    return fn_(a1, a2);
  }

private:
  boost::function&lt;Signature&gt; fn_;
};

/// @brief Provides signature type.
template &lt;typename Signature&gt;
struct mpl_signature
{
  typedef typename boost::function_types::components&lt;Signature&gt;::type type;
};

// Support boost::function.
template &lt;typename Signature&gt;
struct mpl_signature&lt;boost::function&lt;Signature&gt; &gt;:
  public mpl_signature&lt;Signature&gt;
{};

/// @brief Create a callable object with guards.
template &lt;typename Guard,
          typename Fn,
          typename Policy&gt;
boost::python::object with_aux(Fn fn, const Policy&amp; policy)
{
  // Obtain the components of the Fn.  This will decompose non-member
  // and member functions into an mpl sequence.
  //   R (*)(A1)    =&gt; R, A1
  //   R (C::*)(A1) =&gt; R, C*, A1
  typedef typename mpl_signature&lt;Fn&gt;::type mpl_signature_type;

  // Synthesize the components into a function type.  This process
  // causes member functions to require the instance argument.
  // This is necessary because member functions will be explicitly
  // provided the 'self' argument.
  //   R, A1     =&gt; R (*)(A1)
  //   R, C*, A1 =&gt; R (*)(C*, A1)
  typedef typename boost::function_types::function_type&lt;
      mpl_signature_type&gt;::type signature_type;

  // Create a callable boost::python::object that delegates to the
  // guarded_function.
  return boost::python::make_function(
    guarded_function&lt;signature_type, Guard&gt;(fn),
    policy, mpl_signature_type());
}

} // namespace detail

/// @brief Create a callable object with guards.
template &lt;typename Guard,
          typename Fn,
          typename Policy&gt;
boost::python::object with(const Fn&amp; fn, const Policy&amp; policy)
{
  return detail::with_aux&lt;Guard&gt;(fn, policy);
}

/// @brief Create a callable object with guards.
template &lt;typename Guard,
          typename Fn&gt;
boost::python::object with(const Fn&amp; fn)
{
  return with&lt;Guard&gt;(fn, boost::python::default_call_policies());
}

/// @brief Mockup class with member functions.
class spam
{
public:
  void action()
  {
    std::cout &lt;&lt; ""spam::action()""  &lt;&lt; std::endl;
  }

  int times_two(int x)
  {
    std::cout &lt;&lt; ""spam::times_two()"" &lt;&lt; std::endl;
    return 2 * x;
  }
};

// Mockup non-member functions.
void action()
{
  std::cout &lt;&lt; ""action()""  &lt;&lt; std::endl;
}

int times_two(int x)
{
  std::cout &lt;&lt; ""times_two()"" &lt;&lt; std::endl;
  return 2 * x;
}

/// @brief Guard that will unlock the GIL upon construction, and
///        reacquire it upon destruction.
struct no_gil
{
public:
  no_gil()  { state_ = PyEval_SaveThread(); 
              std::cout &lt;&lt; ""no_gil()"" &lt;&lt; std::endl; }
  ~no_gil() { std::cout &lt;&lt; ""~no_gil()"" &lt;&lt; std::endl;
              PyEval_RestoreThread(state_); }
private:
  PyThreadState* state_;
};

/// @brief Guard that prints to std::cout.
struct echo_guard 
{
  echo_guard()  { std::cout &lt;&lt; ""echo_guard()"" &lt;&lt; std::endl;  }
  ~echo_guard() { std::cout &lt;&lt; ""~echo_guard()"" &lt;&lt; std::endl; }
};

BOOST_PYTHON_MODULE(example)
{
  namespace python = boost::python;

  // Expose class and member-function.
  python::class_&lt;spam&gt;(""Spam"")
    .def(""action"", &amp;spam::action)
    .def(""times_two"", with&lt;no_gil&gt;(&amp;spam::times_two))
    ;

  // Expose non-member function.
  python::def(""action"", &amp;action);
  python::def(""times_two"", with&lt;boost::tuple&lt;no_gil, echo_guard&gt; &gt;(
      &amp;times_two));
}
</code></pre>

<p>And its usage:</p>

<pre class=""lang-python prettyprint-override""><code>&gt;&gt;&gt; import example
&gt;&gt;&gt; spam = example.Spam()
&gt;&gt;&gt; spam.action()
spam::action()
&gt;&gt;&gt; spam.times_two(5)
no_gil()
spam::times_two()
~no_gil()
10
&gt;&gt;&gt; example.action()
action()
&gt;&gt;&gt; example.times_two(21)
no_gil()
echo_guard()
times_two()
~echo_guard()
~no_gil()
42
</code></pre>

<p>Notice how multiple guards can be provided by using a container type, such as <code>boost::tuple</code>:</p>

<pre class=""lang-cpp prettyprint-override""><code>  python::def(""times_two"", with&lt;boost::tuple&lt;no_gil, echo_guard&gt; &gt;(
      &amp;times_two));
</code></pre>

<p>When invoked in Python, <code>example.times_two(21)</code> produces the following output:</p>



<pre><code>no_gil()
echo_guard()
times_two()
~echo_guard()
~no_gil()
42
</code></pre>
",Tanner Sansbury,Tanner Sansbury,1378430084,1437144424,1437144424
http://stackoverflow.com/a/18665887/1084488,&quot;android.view.WindowManager$BadTokenException: Unable to add window&quot; on buider.show(),101870,MSIslam,Anis BEN NSIR,1378484368,1539615048,1539615048,https://stackoverflow.com/questions/18662239/android-view-windowmanagerbadtokenexception-unable-to-add-window-on-buider-s,"<pre><code>android.view.WindowManager$BadTokenException: Unable to add window""
</code></pre>

<p><strong>Problem :</strong></p>

<blockquote>
  <p>This exception occurs when the app is trying to notify the user from
  the background thread (AsyncTask) by opening a Dialog. </p>
  
  <p>If you are trying to modify the UI from background thread (usually
  from onPostExecute() of AsyncTask) and if the activity enters
  finishing stage i.e.) explicitly calling finish(), user pressing home
  or back button or activity clean up made by Android then you get this
  error.</p>
</blockquote>

<p><strong>Reason :</strong></p>

<blockquote>
  <p>The reason for this exception is that, as the exception message says,
  the activity has finished but you are trying to display a dialog with
  a context of the finished activity. Since there is no window for the
  dialog to display the android runtime throws this exception.</p>
</blockquote>

<p><strong>Solution:</strong></p>

<blockquote>
  <p>Use <code>isFinishing()</code> method which is called by Android to check whether
  this activity is in the process of finishing: be it explicit finish()
  call or activity clean up made by Android. By using this method it is
  very easy to avoid opening dialog from background thread when activity
  is finishing.</p>
  
  <p>Also maintain a <code>weak reference</code> for the activity (and not a strong
  reference so that activity can be destroyed once not needed) and check
  if the activity is not finishing before performing any UI using this
  activity reference (i.e. showing a dialog).</p>
</blockquote>

<p><strong>eg</strong>.</p>

<pre><code>private class chkSubscription extends AsyncTask&lt;String, Void, String&gt;{

  private final WeakReference&lt;login&gt; loginActivityWeakRef;

  public chkSubscription (login loginActivity) {
    super();
    this.loginActivityWeakRef= new WeakReference&lt;login &gt;(loginActivity)
  }

  protected String doInBackground(String... params) {
    //web service call
  }

  protected void onPostExecute(String result) {
    if(page.contains(""error"")) //when not subscribed
    {
      if (loginActivityWeakRef.get() != null &amp;&amp; !loginActivityWeakRef.get().isFinishing()) {
        AlertDialog.Builder builder = new AlertDialog.Builder(login.this);
        builder.setCancelable(true);
        builder.setMessage(sucObject);
        builder.setInverseBackgroundForced(true);

        builder.setNeutralButton(""Ok"",new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton){
            dialog.dismiss();
          }
        });

        builder.show();
      }
    }
  }
}
</code></pre>

<p><strong>Update :</strong></p>

<p><strong>Window Tokens:</strong></p>

<blockquote>
  <p>As its name implies, a window token is a special type of Binder token
  that the window manager uses to uniquely identify a window in the
  system. Window tokens are important for security because they make it
  impossible for malicious applications to draw on top of the windows of
  other applications. The window manager protects against this by
  requiring applications to pass their application's window token as
  part of each request to add or remove a window. If the tokens don't
  match, the window manager rejects the request and throws a
  <strong>BadTokenException</strong>. Without window tokens, this necessary
  identification step wouldn't be possible and the window manager
  wouldn't be able to protect itself from malicious applications.</p>
</blockquote>

<p><strong>A real-world scenario:</strong></p>

<blockquote>
  <p>When an application starts up for the first time,
  the<strong>ActivityManagerService</strong>creates a special kind of window token
  called an application window token, which uniquely identifies the
  application's top-level container window.The activity manager gives
  this token to both the application and the window manager, and the
  application sends the token to the window manager each time it wants
  to add a new window to the screen. This ensures secure interaction
  between the application and the window manager (by making it
  impossible to add windows on top of other applications), and also
  makes it easy for the activity manager to make direct requests to the
  window manager.</p>
</blockquote>
",Ritesh Gune,Ritesh Gune,1378498407,1382425737,1382425737
http://stackoverflow.com/a/18680280/3093378,Ways to do modulo multiplication with primitive types,5987,Christian Ammer,Christian Ammer,1346192499,1527048930,1346193202,https://stackoverflow.com/questions/12168348/ways-to-do-modulo-multiplication-with-primitive-types,"<p><a href=""https://stackoverflow.com/a/12171020/60075"">Keith Randall's answer</a> is good, but as he said, a caveat is that it works only if <code>m</code> is 63 bits or less.</p>

<p>Here is a modification which has two advantages:</p>

<ol>
<li>It works even if <code>m</code> is 64 bits.</li>
<li>It doesn't need to use the modulo operation, which can be expensive on some processors.</li>
</ol>

<p>(Note that the <code>res -= m</code> and <code>temp_b -= m</code> lines rely on 64-bit unsigned integer overflow in order to give the expected results. This should be fine since unsigned integer overflow is well-defined in C and C++. For this reason it's <a href=""https://stackoverflow.com/q/18195715/60075"">important to use <em>unsigned</em> integer types</a>.)</p>

<pre><code>uint64_t mulmod(uint64_t a, uint64_t b, uint64_t m) {
    uint64_t res = 0;
    uint64_t temp_b;

    /* Only needed if b may be &gt;= m */
    if (b &gt;= m) {
        if (m &gt; UINT64_MAX / 2u)
            b -= m;
        else
            b %= m;
    }

    while (a != 0) {
        if (a &amp; 1) {
            /* Add b to res, modulo m, without overflow */
            if (b &gt;= m - res) /* Equiv to if (res + b &gt;= m), without overflow */
                res -= m;
            res += b;
        }
        a &gt;&gt;= 1;

        /* Double b, modulo m */
        temp_b = b;
        if (b &gt;= m - b)       /* Equiv to if (2 * b &gt;= m), without overflow */
            temp_b -= m;
        b += temp_b;
    }
    return res;
}
</code></pre>
",Craig McQueen,Community,1378612947,1415843227,1495542351
http://stackoverflow.com/a/18696743/1895353,GiNaC undefined reference,565,rcalderon821,,1378692923,1447552394,0,https://stackoverflow.com/questions/18690666/ginac-undefined-reference,"<p>The problem is the order of the parameters on the compile line. Try one of the following two variants:</p>

<pre><code>g++ -o simple simple.cpp `pkg-config --cflags --libs ginac`

g++ -o simple -Wl,--no-as-needed `pkg-config --cflags --libs ginac` simple.cpp
</code></pre>

<p>The idea is that the order of the object files and libraries is important to the linker. Very simply put, by default it only links a library if it needs it to resolve some previously unresolved symbols.</p>

<p>The first variant above moves the libraries at the end of the build parameters (so after the object file for your code), while the second variant disables this behavior in the linker.</p>
",Ionut,,1378724475,1378724475,0
http://stackoverflow.com/a/1870487/187954,Remove all attributes,42929,David Hellsing,cletus,1260312498,1535031842,1260316930,https://stackoverflow.com/questions/1870441/remove-all-attributes,"<p><strong>Update:</strong> the previous method works in IE8 but not in IE8 compatibility mode and previous versions of IE. So here is a version that does and uses jQuery to remove the attributes as it does a better job of it:</p>

<pre><code>$(""img"").each(function() {
  // first copy the attributes to remove
  // if we don't do this it causes problems
  // iterating over the array we're removing
  // elements from
  var attributes = $.map(this.attributes, function(item) {
    return item.name;
  });

  // now use jQuery to remove the attributes
  var img = $(this);
  $.each(attributes, function(i, item) {
    img.removeAttr(item);
  });
});
</code></pre>

<p>Of course you could <a href=""http://docs.jquery.com/Plugins/Authoring"" rel=""noreferrer"">make a plug-in</a> out of it:</p>

<pre><code>jQuery.fn.removeAttributes = function() {
  return this.each(function() {
    var attributes = $.map(this.attributes, function(item) {
      return item.name;
    });
    var img = $(this);
    $.each(attributes, function(i, item) {
    img.removeAttr(item);
    });
  });
}
</code></pre>

<p>and then do:</p>

<pre><code>$(""img"").removeAttributes();
</code></pre>
",cletus,cletus,1260312997,1260328922,1260328922
http://stackoverflow.com/a/1872506/4070143,Is it possible to iterate over arguments in variadic macros?,45665,vshenoy,a3f,1260344104,1450311253,1427766642,https://stackoverflow.com/questions/1872220/is-it-possible-to-iterate-over-arguments-in-variadic-macros,"<p>Here is my homework of the day, it's based on macro tricks and today I particularly learnt about <a href=""http://groups.google.com/group/comp.std.c/browse_thread/thread/77ee8c8f92e4a3fb/346fc464319b1ee5"" rel=""noreferrer""><code>__VA_NARG__</code> invented by Laurent Deniau</a>. Anyway, the following sample code works up to 8 fields for the sake of clarity. Just extend the code by duplicating if you need more (this is because the preprocessor doesn't feature recursion, as it reads the file only once).</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stddef.h&gt;

struct a
{
  int a;
  int b;
  int c;
};

struct b
{
  int a;
  int b;
  int c;
  int d;
};

#define STRINGIZE(arg)  STRINGIZE1(arg)
#define STRINGIZE1(arg) STRINGIZE2(arg)
#define STRINGIZE2(arg) #arg

#define CONCATENATE(arg1, arg2)   CONCATENATE1(arg1, arg2)
#define CONCATENATE1(arg1, arg2)  CONCATENATE2(arg1, arg2)
#define CONCATENATE2(arg1, arg2)  arg1##arg2

/* PRN_STRUCT_OFFSETS will print offset of each of the fields 
 within structure passed as the first argument.
 */
#define PRN_STRUCT_OFFSETS_1(structure, field, ...) printf(STRINGIZE(structure)"":""STRINGIZE(field)""-%d\n"", offsetof(structure, field));
#define PRN_STRUCT_OFFSETS_2(structure, field, ...)\
  printf(STRINGIZE(structure)"":""STRINGIZE(field)""-%d\n"", offsetof(structure, field));\
  PRN_STRUCT_OFFSETS_1(structure, __VA_ARGS__)
#define PRN_STRUCT_OFFSETS_3(structure, field, ...)\
  printf(STRINGIZE(structure)"":""STRINGIZE(field)""-%d\n"", offsetof(structure, field));\
  PRN_STRUCT_OFFSETS_2(structure, __VA_ARGS__)
#define PRN_STRUCT_OFFSETS_4(structure, field, ...)\
  printf(STRINGIZE(structure)"":""STRINGIZE(field)""-%d\n"", offsetof(structure, field));\
  PRN_STRUCT_OFFSETS_3(structure, __VA_ARGS__)
#define PRN_STRUCT_OFFSETS_5(structure, field, ...)\
  printf(STRINGIZE(structure)"":""STRINGIZE(field)""-%d\n"", offsetof(structure, field));\
 PRN_STRUCT_OFFSETS_4(structure, __VA_ARGS__)
#define PRN_STRUCT_OFFSETS_6(structure, field, ...)\
  printf(STRINGIZE(structure)"":""STRINGIZE(field)""-%d\n"", offsetof(structure, field));\
  PRN_STRUCT_OFFSETS_5(structure, __VA_ARGS__)
#define PRN_STRUCT_OFFSETS_7(structure, field, ...)\
  printf(STRINGIZE(structure)"":""STRINGIZE(field)""-%d\n"", offsetof(structure, field));\
  PRN_STRUCT_OFFSETS_6(structure, __VA_ARGS__)
#define PRN_STRUCT_OFFSETS_8(structure, field, ...)\
  printf(STRINGIZE(structure)"":""STRINGIZE(field)""-%d\n"", offsetof(structure, field));\
  PRN_STRUCT_OFFSETS_7(structure, __VA_ARGS__)

#define PRN_STRUCT_OFFSETS_NARG(...) PRN_STRUCT_OFFSETS_NARG_(__VA_ARGS__, PRN_STRUCT_OFFSETS_RSEQ_N())
#define PRN_STRUCT_OFFSETS_NARG_(...) PRN_STRUCT_OFFSETS_ARG_N(__VA_ARGS__) 
#define PRN_STRUCT_OFFSETS_ARG_N(_1, _2, _3, _4, _5, _6, _7, _8, N, ...) N 
#define PRN_STRUCT_OFFSETS_RSEQ_N() 8, 7, 6, 5, 4, 3, 2, 1, 0

#define PRN_STRUCT_OFFSETS_(N, structure, field, ...) CONCATENATE(PRN_STRUCT_OFFSETS_, N)(structure, field, __VA_ARGS__)

#define PRN_STRUCT_OFFSETS(structure, field, ...) PRN_STRUCT_OFFSETS_(PRN_STRUCT_OFFSETS_NARG(field, __VA_ARGS__), structure, field, __VA_ARGS__)

int main(int argc, char *argv[])
{
  PRN_STRUCT_OFFSETS(struct a, a, b, c);
  printf(""\n"");
  PRN_STRUCT_OFFSETS(struct b, a, b, c, d);

  return 0;
}
</code></pre>

<p>which prints out:</p>

<pre><code>struct a:a-0
struct a:b-4
struct a:c-8

struct b:a-0
struct b:b-4
struct b:c-8
struct b:d-12
</code></pre>

<hr>

<p><strong>EDIT: Here is a slightly different version that tries to be more generic.</strong> The <code>FOR_EACH(what, ...)</code> macro applies <code>what</code> to every other argument in the variable argument list.</p>

<p>So, you just have to define a macro that takes a single argument like this:</p>

<pre><code>#define DO_STUFF(x) foo(x)
</code></pre>

<p>which is going to be applied to every argument in the list.
So, for your typical example you need to hack a bit but it still remains concise:</p>

<pre><code>#define PRN_STRUCT_OFFSETS_(structure, field) printf(STRINGIZE(structure)"":""STRINGIZE(field)"" - offset = %d\n"", offsetof(structure, field));
#define PRN_STRUCT_OFFSETS(field) PRN_STRUCT_OFFSETS_(struct a, field)
</code></pre>

<p>And you apply it like this:</p>

<pre><code>FOR_EACH(PRN_STRUCT_OFFSETS, a, b, c);
</code></pre>

<p>Finally, a complete sample program:</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stddef.h&gt;

struct a
{
  int a;
  int b;
  int c;
};

#define STRINGIZE(arg)  STRINGIZE1(arg)
#define STRINGIZE1(arg) STRINGIZE2(arg)
#define STRINGIZE2(arg) #arg

#define CONCATENATE(arg1, arg2)   CONCATENATE1(arg1, arg2)
#define CONCATENATE1(arg1, arg2)  CONCATENATE2(arg1, arg2)
#define CONCATENATE2(arg1, arg2)  arg1##arg2

#define FOR_EACH_1(what, x, ...) what(x)
#define FOR_EACH_2(what, x, ...)\
  what(x);\
  FOR_EACH_1(what,  __VA_ARGS__);
#define FOR_EACH_3(what, x, ...)\
  what(x);\
  FOR_EACH_2(what, __VA_ARGS__);
#define FOR_EACH_4(what, x, ...)\
  what(x);\
  FOR_EACH_3(what,  __VA_ARGS__);
#define FOR_EACH_5(what, x, ...)\
  what(x);\
 FOR_EACH_4(what,  __VA_ARGS__);
#define FOR_EACH_6(what, x, ...)\
  what(x);\
  FOR_EACH_5(what,  __VA_ARGS__);
#define FOR_EACH_7(what, x, ...)\
  what(x);\
  FOR_EACH_6(what,  __VA_ARGS__);
#define FOR_EACH_8(what, x, ...)\
  what(x);\
  FOR_EACH_7(what,  __VA_ARGS__);

#define FOR_EACH_NARG(...) FOR_EACH_NARG_(__VA_ARGS__, FOR_EACH_RSEQ_N())
#define FOR_EACH_NARG_(...) FOR_EACH_ARG_N(__VA_ARGS__) 
#define FOR_EACH_ARG_N(_1, _2, _3, _4, _5, _6, _7, _8, N, ...) N 
#define FOR_EACH_RSEQ_N() 8, 7, 6, 5, 4, 3, 2, 1, 0

#define FOR_EACH_(N, what, x, ...) CONCATENATE(FOR_EACH_, N)(what, x, __VA_ARGS__)
#define FOR_EACH(what, x, ...) FOR_EACH_(FOR_EACH_NARG(x, __VA_ARGS__), what, x, __VA_ARGS__)

#define PRN_STRUCT_OFFSETS_(structure, field) printf(STRINGIZE(structure)"":""STRINGIZE(field)"" - offset = %d\n"", offsetof(structure, field));
#define PRN_STRUCT_OFFSETS(field) PRN_STRUCT_OFFSETS_(struct a, field)

int main(int argc, char *argv[])
{
  FOR_EACH(PRN_STRUCT_OFFSETS, a, b, c);
  printf(""\n"");

  return 0;
}
</code></pre>
",Gregory Pakosz,Gregory Pakosz,1260349024,1293989633,1293989633
http://stackoverflow.com/a/18790494/1343587,@Transactional on @PostConstruct method,16078,Raphael Jolivet,,1372345261,1546219729,0,https://stackoverflow.com/questions/17346679/transactional-on-postconstruct-method,"<p>this might be helpful (<a href=""http://forum.springsource.org/showthread.php?58337-No-transaction-in-transactional-service-called-from-PostConstruct"">http://forum.springsource.org/showthread.php?58337-No-transaction-in-transactional-service-called-from-PostConstruct</a>):</p>

<blockquote>
  <p>In the @PostConstruct (as with the afterPropertiesSet from the InitializingBean interface) there is no way to ensure that all the post processing is already done, so (indeed) there can be no Transactions. The only way to ensure that that is working is by using a TransactionTemplate. </p>
</blockquote>

<p>So if you would like something in your <code>@PostConstruct</code> to be executed within transaction you have to do something like this:</p>

<pre><code>@Service(""something"")
public class Something {

    @Autowired
    @Qualifier(""transactionManager"")
    protected PlatformTransactionManager txManager;

    @PostConstruct
    private void init(){
        TransactionTemplate tmpl = new TransactionTemplate(txManager);
        tmpl.execute(new TransactionCallbackWithoutResult() {
            @Override
            protected void doInTransactionWithoutResult(TransactionStatus status) {
                //PUT YOUR CALL TO SERVICE HERE
            }
        });
   }
}
</code></pre>
",Platon,,1379087592,1379087592,0
http://stackoverflow.com/a/18794412/6692043,How to detect an ambiguous DST overlap in Joda Time?,2183,Matt Johnson,,1379098937,1379103252,0,https://stackoverflow.com/questions/18793411/how-to-detect-an-ambiguous-dst-overlap-in-joda-time,"<p>Take advantage of <a href=""http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#withEarlierOffsetAtOverlap%28%29"">withEarlierOffsetAtOverlap()</a> </p>

<pre><code>public static boolean isInOverlap(LocalDateTime ldt, DateTimeZone dtz) {
    DateTime dt1 = ldt.toDateTime(dtz).withEarlierOffsetAtOverlap();
    DateTime dt2 = dt1.withLaterOffsetAtOverlap();
    return dt1.getMillis() != dt2.getMillis();
}


public static void test() {
    // CET DST rolls back at 2011-10-30 2:59:59 (+02) to 2011-10-30 2:00:00 (+01)
    final DateTimeZone dtz = DateTimeZone.forID(""CET"");
    LocalDateTime ldt1 = new LocalDateTime(2011,10,30,1,50,0,0); // not in overlap
    LocalDateTime ldt2 = new LocalDateTime(2011,10,30,2,50,0,0); // in overlap
    System.out.println(ldt1 + "" is in overlap? "" + isInOverlap(ldt1, dtz)); 
    System.out.println(ldt2 + "" is in overlap? "" + isInOverlap(ldt2, dtz)); 
}
</code></pre>
",leonbloy,leonbloy,1379102835,1379103252,1379103252
http://stackoverflow.com/a/18798305/1000543,Leaked window exception even though no service is used,2011,La bla bla,Dave Newton,1375577745,1416737484,1375578009,https://stackoverflow.com/questions/18038772/leaked-window-exception-even-though-no-service-is-used,"<blockquote>
  <p>I keep getting this crash in my logcat, but the weird this is that my
  app has nothing to do with the Text To Speech thing. not just this
  activity, my entire app doesn't use it at all.</p>
</blockquote>

<p>Your app <em>indeed</em> has nothing to do with it.</p>

<p>Except that when you call:</p>

<pre><code>webView.getSettings().setJavaScriptEnabled(true);
</code></pre>

<p>the method WebViewClassic.updateJavaScriptEnabled(boolean) is executed:</p>

<pre><code>void updateJavaScriptEnabled(boolean enabled) {
    if (isAccessibilityInjectionEnabled()) {

 ==&gt;&gt;&gt;&gt; // Call placed to AccessibilityInjector.updateJavaScriptEnabled(boolean)
        getAccessibilityInjector().updateJavaScriptEnabled(enabled);
    }
}
</code></pre>

<p>Here, <code>isAccessibilityInjectionEnabled()</code> returns <code>true</code> in your device's case. It retrieves a list of Accessibility Services that are currently enabled, and provide/support <code>AccessibilityServiceInfo.FEEDBACK_SPOKEN</code>. If this list is non-empty, <code>true</code> is returned.</p>

<p>Moving up the stacktrace: </p>

<blockquote>
  <p>android.webkit.AccessibilityInjector.addTtsApis()</p>
</blockquote>

<p>eventually creates a <code>TextToSpeech</code> object. </p>

<p>The problem: <code>TextToSpeech.connectToEngine()</code> uses Context to call bindService(). The context is your Activity's context (passed on from WebView). I believe the Logcat shows this (or something similar) when <code>WebViewActivity</code> is started:</p>

<blockquote>
  <p>Sucessfully bound to com.google.android.tts</p>
</blockquote>

<p>Hypothesis: When your Activity is destroyed and recreated on screen rotation, the TTS service is still bound while the context isn't valid anymore. This is what the exception refers to. </p>

<p>I tried the following to test my hypothesis:</p>

<p>Instead of defining WebView in xml, I created it dynamically in onCreate():</p>

<pre><code>webView = new WebView(getApplicationContext());
</code></pre>

<p>Notice that I used the Application's context in place of Activity's (this). The context stays valid on orientation change, and hence the exception isn't thrown. </p>

<p>To confirm that one (or more) Accessibility Service is enabled, add this code to your activity's onCreate():</p>

<pre><code>AccessibilityManager am = (AccessibilityManager)
                                   getSystemService(ACCESSIBILITY_SERVICE);

List&lt;AccessibilityServiceInfo&gt; listOfServices = 
                                 am.getEnabledAccessibilityServiceList(
                                   AccessibilityServiceInfo.FEEDBACK_ALL_MASK);

for (AccessibilityServiceInfo asi : listOfServices) {
    Log.i("""", ""Accessibility Service &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;: "" + asi.getSettingsActivityName());
Log.i("""", ""Accessibility Service &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;: "" +
                                 asi.loadDescription(getPackageManager()));

}
</code></pre>

<p>Note: I had to turn on <code>TalkBack</code> (under Settings > Accessibility) to replicate the issue. Also, I am not sure why this exception isn't thrown after force stopping the application.</p>

<p>Based on user Robert Nekic's comment: behavior on back press: Exception is thrown when activity's context is used. Application's context still works.</p>

<p>Useful information: <a href=""https://stackoverflow.com/questions/1992676/i-cant-get-rid-of-this-error-message-activity-app-name-has-leaked-servicecon"">Link</a>.</p>
",Vikram,Community,1379132991,1379178699,1495541956
http://stackoverflow.com/a/18800233/230468,How to rotate matplotlib annotation to match a line?,7437,Adam,,1379055730,1471538494,0,https://stackoverflow.com/questions/18780198/how-to-rotate-matplotlib-annotation-to-match-a-line,"<p>I came up with something that works for me. Note the grey dashed lines:</p>

<p><img src=""https://i.stack.imgur.com/9I85Y.png"" alt=""annotated lines""></p>

<p>The rotation must be set manually, but this must be done AFTER <code>draw()</code> or layout. So my solution is to associate lines with annotations, then iterate through them and do this:</p>

<ol>
<li>get line's data transform (i.e. goes from data coordinates to display coordinates)</li>
<li>transform two points along the line to display coordinates</li>
<li>find slope of displayed line</li>
<li>set text rotation to match this slope</li>
</ol>

<p>This isn't perfect, because matplotlib's handling of rotated text is all wrong. It aligns by the bounding box and not by the text baseline.</p>

<p>Some font basics if you're interested about text rendering: <a href=""http://docs.oracle.com/javase/tutorial/2d/text/fontconcepts.html"" rel=""noreferrer"">http://docs.oracle.com/javase/tutorial/2d/text/fontconcepts.html</a></p>

<p>This example shows what matplotlib does: <a href=""http://matplotlib.org/examples/pylab_examples/text_rotation.html"" rel=""noreferrer"">http://matplotlib.org/examples/pylab_examples/text_rotation.html</a></p>

<p>The only way I found to have a label properly next to the line is to align by center in both vertical and horizontal. I then offset the label by 10 points to the left to make it not overlap. Good enough for my application.</p>

<p>Here is my code. I draw the line however I want, then draw the annotation, then bind them with a helper function:</p>

<pre><code>line, = fig.plot(xdata, ydata, '--', color=color)

# x,y appear on the midpoint of the line

t = fig.annotate(""text"", xy=(x, y), xytext=(-10, 0), textcoords='offset points', horizontalalignment='left', verticalalignment='bottom', color=color)
text_slope_match_line(t, x, y, line)
</code></pre>

<p>Then call another helper function after layout but before <code>savefig</code> (For interactive images I think you'll have to register for draw events and call <code>update_text_slopes</code> in the handler)</p>

<pre><code>plt.tight_layout()
update_text_slopes()
</code></pre>

<p>The helpers:</p>

<pre><code>rotated_labels = []
def text_slope_match_line(text, x, y, line):
    global rotated_labels

    # find the slope
    xdata, ydata = line.get_data()

    x1 = xdata[0]
    x2 = xdata[-1]
    y1 = ydata[0]
    y2 = ydata[-1]

    rotated_labels.append({""text"":text, ""line"":line, ""p1"":numpy.array((x1, y1)), ""p2"":numpy.array((x2, y2))})

def update_text_slopes():
    global rotated_labels

    for label in rotated_labels:
        # slope_degrees is in data coordinates, the text() and annotate() functions need it in screen coordinates
        text, line = label[""text""], label[""line""]
        p1, p2 = label[""p1""], label[""p2""]

        # get the line's data transform
        ax = line.get_axes()

        sp1 = ax.transData.transform_point(p1)
        sp2 = ax.transData.transform_point(p2)

        rise = (sp2[1] - sp1[1])
        run = (sp2[0] - sp1[0])

        slope_degrees = math.degrees(math.atan(rise/run))

        text.set_rotation(slope_degrees)
</code></pre>
",Adam,,1379150374,1379150374,0
http://stackoverflow.com/a/18804298/300539,Websocket onerror - how to read error description?,80379,Sinisa,,1379176738,1537447129,0,https://stackoverflow.com/questions/18803971/websocket-onerror-how-to-read-error-description,"<p>The error <code>Event</code> the <code>onerror</code> handler receives <a href=""http://www.w3.org/TR/websockets/#concept-websocket-close-fail"">is a simple event not containing such information</a>:</p>

<blockquote>
  <p>If the user agent was required to fail the WebSocket connection or the WebSocket connection is closed with prejudice, fire a simple event named error at the WebSocket object.</p>
</blockquote>

<p>You may have better luck listening for the <code>close</code> event, which is a <a href=""http://www.w3.org/TR/websockets/#closeevent""><code>CloseEvent</code></a> and indeed has a <code>CloseEvent.code</code> property containing a numerical code according to <a href=""http://tools.ietf.org/html/rfc6455#section-11.7"">RFC 6455 11.7</a> and a <code>CloseEvent.reason</code> string property.</p>

<p>Please note however, that <code>CloseEvent.code</code> (and <code>CloseEvent.reason</code>) <a href=""http://www.w3.org/TR/websockets/#concept-websocket-close-fail"">are limited</a> in such a way that network probing and other security issues are avoided. </p>
",nmaier,,1379178880,1379178880,0
http://stackoverflow.com/a/1885766/3581097,Simplest code for array intersection in javascript,293353,Peter,Ricardo,1260500644,1562320651,1386391251,https://stackoverflow.com/questions/1885557/simplest-code-for-array-intersection-in-javascript,"<p>How about just using associative arrays?</p>

<pre><code>function intersect(a, b) {
    var d1 = {};
    var d2 = {};
    var results = [];
    for (var i = 0; i &lt; a.length; i++) {
        d1[a[i]] = true;
    }
    for (var j = 0; j &lt; b.length; j++) {
        d2[b[j]] = true;
    }
    for (var k in d1) {
        if (d2[k]) 
            results.push(k);
    }
    return results;
}
</code></pre>

<p>edit:</p>

<pre><code>// new version
function intersect(a, b) {
    var d = {};
    var results = [];
    for (var i = 0; i &lt; b.length; i++) {
        d[b[i]] = true;
    }
    for (var j = 0; j &lt; a.length; j++) {
        if (d[a[j]]) 
            results.push(a[j]);
    }
    return results;
}
</code></pre>
",Steven Huwig,Steven Huwig,1260505353,1343660414,1343660414
http://stackoverflow.com/a/18888633/2550451,Python standard library to POST multipart/form-data encoded data,14743,hoju,,1250148240,1542978141,0,https://stackoverflow.com/questions/1270518/python-standard-library-to-post-multipart-form-data-encoded-data,"<p>It's an old thread but still a popular one, so here is my contribution using only standard modules.</p>

<p>The idea is the same than <a href=""http://code.activestate.com/recipes/146306/"" rel=""noreferrer"">here</a> but support Python 2.x and Python 3.x.
It also has a body generator to avoid unnecessarily memory usage.</p>

<pre><code>import codecs
import mimetypes
import sys
import uuid
try:
    import io
except ImportError:
    pass # io is requiered in python3 but not available in python2

class MultipartFormdataEncoder(object):
    def __init__(self):
        self.boundary = uuid.uuid4().hex
        self.content_type = 'multipart/form-data; boundary={}'.format(self.boundary)

    @classmethod
    def u(cls, s):
        if sys.hexversion &lt; 0x03000000 and isinstance(s, str):
            s = s.decode('utf-8')
        if sys.hexversion &gt;= 0x03000000 and isinstance(s, bytes):
            s = s.decode('utf-8')
        return s

    def iter(self, fields, files):
        """"""
        fields is a sequence of (name, value) elements for regular form fields.
        files is a sequence of (name, filename, file-type) elements for data to be uploaded as files
        Yield body's chunk as bytes
        """"""
        encoder = codecs.getencoder('utf-8')
        for (key, value) in fields:
            key = self.u(key)
            yield encoder('--{}\r\n'.format(self.boundary))
            yield encoder(self.u('Content-Disposition: form-data; name=""{}""\r\n').format(key))
            yield encoder('\r\n')
            if isinstance(value, int) or isinstance(value, float):
                value = str(value)
            yield encoder(self.u(value))
            yield encoder('\r\n')
        for (key, filename, fd) in files:
            key = self.u(key)
            filename = self.u(filename)
            yield encoder('--{}\r\n'.format(self.boundary))
            yield encoder(self.u('Content-Disposition: form-data; name=""{}""; filename=""{}""\r\n').format(key, filename))
            yield encoder('Content-Type: {}\r\n'.format(mimetypes.guess_type(filename)[0] or 'application/octet-stream'))
            yield encoder('\r\n')
            with fd:
                buff = fd.read()
                yield (buff, len(buff))
            yield encoder('\r\n')
        yield encoder('--{}--\r\n'.format(self.boundary))

    def encode(self, fields, files):
        body = io.BytesIO()
        for chunk, chunk_len in self.iter(fields, files):
            body.write(chunk)
        return self.content_type, body.getvalue()
</code></pre>

<p><strong>Demo</strong></p>

<pre><code># some utf8 key/value pairs
fields = [('', 42), ('bar', b'23'), ('foo', ':')]
files = [('myfile', 'image.jpg', open('image.jpg', 'rb'))]

# iterate and write chunk in a socket
content_type, body = MultipartFormdataEncoder().encode(fields, files)
</code></pre>
",ticapix,Shirkrin,1379575708,1428666194,1428666194
http://stackoverflow.com/a/18894037/50335,How to get current memory usage in android?,175549,Badal,James Z,1278142135,1555486769,1434716117,https://stackoverflow.com/questions/3170691/how-to-get-current-memory-usage-in-android,"<p>I looked at Android Source Tree.</p>

<p>Inside com.android.server.am.<strong>ActivityManagerService.java</strong> (internal service exposed by android.app.<strong>ActivityManager</strong>).</p>

<pre><code>public void getMemoryInfo(ActivityManager.MemoryInfo outInfo) {
    final long homeAppMem = mProcessList.getMemLevel(ProcessList.HOME_APP_ADJ);
    final long hiddenAppMem = mProcessList.getMemLevel(ProcessList.HIDDEN_APP_MIN_ADJ);
    outInfo.availMem = Process.getFreeMemory();
    outInfo.totalMem = Process.getTotalMemory();
    outInfo.threshold = homeAppMem;
    outInfo.lowMemory = outInfo.availMem &lt; (homeAppMem + ((hiddenAppMem-homeAppMem)/2));
    outInfo.hiddenAppThreshold = hiddenAppMem;
    outInfo.secondaryServerThreshold = mProcessList.getMemLevel(
            ProcessList.SERVICE_ADJ);
    outInfo.visibleAppThreshold = mProcessList.getMemLevel(
            ProcessList.VISIBLE_APP_ADJ);
    outInfo.foregroundAppThreshold = mProcessList.getMemLevel(
            ProcessList.FOREGROUND_APP_ADJ);
}
</code></pre>

<p>Inside android.os.<strong>Process.java</strong></p>

<pre><code>/** @hide */
public static final native long getFreeMemory();

/** @hide */
public static final native long getTotalMemory();
</code></pre>

<p>It calls JNI method from <a href=""https://android.googlesource.com/platform/frameworks/base/+/master/core/jni/android_util_Process.cpp"" rel=""nofollow"">android_util_Process.cpp</a></p>

<p><strong>Conclusion</strong></p>

<p>MemoryInfo.availMem = MemFree + Cached in /proc/meminfo.</p>

<p><strong>Notes</strong></p>

<p>Total Memory is added in API level 16.</p>
",ragazenta,ragazenta,1379591963,1379594326,1379594326
http://stackoverflow.com/a/1889686/357338,Deleting directory in Python,23353,kevin cline,Brian Tompsett - ,1260552560,1436016456,1436016456,https://stackoverflow.com/questions/1889597/deleting-directory-in-python,"<p><code>shutil.rmtree</code> can take an error-handling function that will be called when it has problem removing a file.  You can use that to force the removal of the problematic file(s).</p>

<p>Inspired by <a href=""http://mail.python.org/pipermail/tutor/2006-June/047551.html"" rel=""noreferrer"">http://mail.python.org/pipermail/tutor/2006-June/047551.html</a> and <a href=""http://techarttiki.blogspot.com/2008/08/read-only-windows-files-with-python.html"" rel=""noreferrer"">http://techarttiki.blogspot.com/2008/08/read-only-windows-files-with-python.html</a>:</p>

<pre><code>import os
import stat
import shutil

def remove_readonly(func, path, excinfo):
    os.chmod(path, stat.S_IWRITE)
    func(path)

shutil.rmtree(top, onerror=remove_readonly)
</code></pre>

<p>(I haven't tested that snippet out, but it should be enough to get you started)</p>
",Steve Losh,ric Araujo,1260553283,1399659239,1399659239
http://stackoverflow.com/a/18921086/641451,Ruby array of hash. group_by and modify in one line,11571,jtomasrl,Martin Tournoij,1379692114,1533888983,1498412947,https://stackoverflow.com/questions/18920877/ruby-array-of-hash-group-by-and-modify-in-one-line,"<p>In a single iteration over initial array:</p>

<pre><code>arry.inject(Hash.new([])) { |h, a| h[a[:type]] += [a[:name]]; h }
</code></pre>
",Nikita Chernov,,1379692873,1379692873,0
http://stackoverflow.com/a/18925211/786644,Download BLOB content using specified charset,26161,David Rodrigues,,1379708457,1533721415,0,https://stackoverflow.com/questions/18925210/download-blob-content-using-specified-charset,"<p><strong>I found the solution before to post.</strong></p>

<p>The change of charset has not been resolved, in fact. However, I sent the UTF-8 header for the download process and Excel was able to understand the file format correctly. <a href=""https://stackoverflow.com/questions/17879198/adding-utf-8-bom-to-string-blob"">Thanks to this response of Erik Tyr</a>.</p>

<pre><code>blob = new Blob([""\ufeff"", csv_content]);
</code></pre>
",David Rodrigues,Community,1379708457,1379708457,1495540494
http://stackoverflow.com/a/18926541/230468,how to extract a subset of a colormap as a new colormap in matplotlib?,13693,rana,,1379711870,1541972729,0,https://stackoverflow.com/questions/18926031/how-to-extract-a-subset-of-a-colormap-as-a-new-colormap-in-matplotlib,"<p>The staticmethod <a href=""http://matplotlib.org/api/colors_api.html#matplotlib.colors.LinearSegmentedColormap.from_list"" rel=""noreferrer"">colors.LinearSegmentedColormap.from_list</a> can be used to create new LinearSegmentedColormaps. Below, I sample the original colormap at 100 points between 0.2 and 0.8:</p>

<pre><code>cmap(np.linspace(0.2, 0.8, 100))
</code></pre>

<p>and use these colors to generate a new colormap:</p>

<pre><code>import matplotlib.pyplot as plt
import matplotlib.colors as colors
import numpy as np

def truncate_colormap(cmap, minval=0.0, maxval=1.0, n=100):
    new_cmap = colors.LinearSegmentedColormap.from_list(
        'trunc({n},{a:.2f},{b:.2f})'.format(n=cmap.name, a=minval, b=maxval),
        cmap(np.linspace(minval, maxval, n)))
    return new_cmap

arr = np.linspace(0, 50, 100).reshape((10, 10))
fig, ax = plt.subplots(ncols=2)

cmap = plt.get_cmap('jet')
new_cmap = truncate_colormap(cmap, 0.2, 0.8)
ax[0].imshow(arr, interpolation='nearest', cmap=cmap)
ax[1].imshow(arr, interpolation='nearest', cmap=new_cmap)
plt.show()
</code></pre>

<p><img src=""https://i.stack.imgur.com/jZfCW.png"" alt=""enter image description here""></p>

<p>The plot on the left shows the image using the original colormap (in this example, <code>jet</code>). The plot on the right shows the same image using <code>new_cmap</code>.</p>
",unutbu,unutbu,1379714381,1379757527,1379757527
http://stackoverflow.com/a/18938253/11983,Is there a workaround to open URLs containing underscores in Ruby?,23898,Arty,John Bachir,1299388421,1481231287,1348590525,https://stackoverflow.com/questions/5208851/is-there-a-workaround-to-open-urls-containing-underscores-in-ruby,"<p>Here is another ugly hack, no gem needed:</p>

<pre><code>def parse(url = nil)
    begin
        URI.parse(url)
    rescue URI::InvalidURIError
        host = url.match("".+\:\/\/([^\/]+)"")[1]
        uri = URI.parse(url.sub(host, 'dummy-host'))
        uri.instance_variable_set('@host', host)
        uri
    end
end
</code></pre>
",sheerun,paulguy,1379801913,1457035680,1457035680
http://stackoverflow.com/a/18941652/122441,Using real HTTP error code in wicket,1044,Adam Pierzchaa,tetsuo,1326189237,1379836925,1326764089,https://stackoverflow.com/questions/8801306/using-real-http-error-code-in-wicket,"<p>I needed the same <strong>customize HTTP Status Code (e.g. 404 Not Found) in Wicket</strong> functionality too (not with portlet) and <code>configureResponse()</code> works beautifully:</p>

<pre><code>package org.soluvas.web.bootstrap;

import org.apache.wicket.request.http.WebResponse;

/**
 * @author atang
 *
 */
public class PageNotFound extends BootstrapPage {

    private static final long serialVersionUID = 1L;

    public PageNotFound() {
        super();
//      add(new Page404());
    }

    @Override
    protected void configureResponse(WebResponse response) {
        super.configureResponse(response);
        response.setStatus(404);
    }

}
</code></pre>

<p>Taken from <a href=""https://github.com/soluvas/soluvas-web"" rel=""nofollow"">https://github.com/soluvas/soluvas-web</a> project.</p>
",Hendy Irawan,,1379836925,1379836925,0
http://stackoverflow.com/a/18987405/1866775,check variadic templates parameters for uniqueness,1989,Khurshid Normuradov,Khurshid Normuradov,1380038392,1528892877,1380195292,https://stackoverflow.com/questions/18986560/check-variadic-templates-parameters-for-uniqueness,"<p>Passing a pointer to <code>base_all&lt;U...&gt;</code> merely requires the existence of a declaration of <code>base_all&lt;U...&gt;</code>. Without attempting the to access the definition, the compiler won't detect that the type is actually ill-defined. One approach to mitigate that problem would be to use an argument which requires a definition of <code>base_all&lt;U...&gt;</code>, e.g.:</p>

<pre><code>template&lt; class ...T&gt; struct base_all
   : id&lt;T&gt; ...
{
    typedef int type;
};
// ...
template&lt; class ... U&gt;
static constexpr bool test(typename base_all&lt;U...&gt;::type) noexcept
{
    return true;
}
</code></pre>

<p>Although the above answers the question, it fail to compile: the multiple inheritance created isn't in a suitable context to be considered for SFINAE. I don't think you can leverage the rule on not allowing the same base inherited from twice. The relevant test can be implemented differently, though:</p>

<pre><code>#include &lt;type_traits&gt;

template &lt;typename...&gt;
struct is_one_of;

template &lt;typename F&gt;
struct is_one_of&lt;F&gt;
{
    static constexpr bool value = false;
};

template &lt;typename F, typename S, typename... T&gt;
struct is_one_of&lt;F, S, T...&gt;
{
    static constexpr bool value = std::is_same&lt;F, S&gt;::value
        || is_one_of&lt;F, T...&gt;::value;
};

template &lt;typename...&gt;
struct is_unique;

template &lt;&gt;
struct is_unique&lt;&gt; {
    static constexpr bool value = true;
};

template&lt;typename F, typename... T&gt;
struct is_unique&lt;F, T...&gt;
{
    static constexpr bool value = is_unique&lt;T...&gt;::value
        &amp;&amp; !is_one_of&lt;F, T...&gt;::value;
};

int main()
{
    constexpr bool b = is_unique&lt;int, float, double&gt;::value;
    constexpr bool c = is_unique&lt; int, char, int&gt;::value;
    static_assert( b == true &amp;&amp; c == false , ""!"");
}
</code></pre>
",Dietmar Khl,,1380041035,1380041035,0
http://stackoverflow.com/a/18992691/1106908,PHP Regex: How to match \r and \n without using [\r\n]?,13572,Jason OOO,brian d foy,1380044812,1439331037,1413806125,https://stackoverflow.com/questions/18988536/php-regex-how-to-match-r-and-n-without-using-r-n,"<h2>PCRE and newlines</h2>

<p><a href=""http://www.pcre.org/pcre.txt"" rel=""noreferrer"">PCRE</a> has a superfluity of newline related escape sequences and alternatives. </p>

<p>Well, a nifty escape sequence that you can use here is <code>\R</code>. By default <code>\R</code> will match Unicode newlines sequences, but it can be configured using different alternatives.</p>

<p>To match any Unicode newline sequence that is in the <code>ASCII</code> range.</p>

<pre><code>preg_match('~\R~', $string);
</code></pre>

<p>This is equivalent to the following group:</p>

<pre><code>(?&gt;\r\n|\n|\r|\f|\x0b|\x85)
</code></pre>

<hr>

<p>To match any Unicode newline sequence; including newline characters outside the <code>ASCII</code> range and both the line separator (<code>U+2028</code>) and paragraph separator (<code>U+2029</code>), you want to turn on the <code>u</code> (<em>unicode</em>) flag.</p>

<pre><code>preg_match('~\R~u', $string);
</code></pre>

<p>The <code>u</code> (<em>unicode</em>) modifier turns on additional functionality of PCRE and Pattern strings are treated as (<strong>UTF-8</strong>).</p>

<p>The is equivalent to the following group:</p>

<pre><code>(?&gt;\r\n|\n|\r|\f|\x0b|\x85|\x{2028}|\x{2029})
</code></pre>

<hr>

<p>It is possible to restrict <code>\R</code> to match <code>CR</code>, <code>LF</code>, or <code>CRLF</code> only:</p>

<pre><code>preg_match('~(*BSR_ANYCRLF)\R~', $string);
</code></pre>

<p>The is equivalent to the following group:</p>

<pre><code>(?&gt;\r\n|\n|\r)
</code></pre>

<h2>Additional</h2>

<p>Five different conventions for indicating line breaks in strings are supported:</p>

<pre><code>(*CR)        carriage return
(*LF)        linefeed
(*CRLF)      carriage return, followed by linefeed
(*ANYCRLF)   any of the three above
(*ANY)       all Unicode newline sequences
</code></pre>

<hr>

<p><strong>Note</strong>: <code>\R</code> does not have special meaning inside of a character class. Like other unrecognized escape sequences, it is treated as the literal character ""R"" by default.</p>
",hwnd,hwnd,1380059428,1439331037,1439331037
http://stackoverflow.com/a/18992807/504611,How to check visibility of software keyboard in Android?,255451,fhucho,Ironman,1264624770,1551954663,1467529383,https://stackoverflow.com/questions/2150078/how-to-check-visibility-of-software-keyboard-in-android,"<p>It has been forever in terms of computer but this question is still unbelievably relevant!</p>

<p>So I've taken the above answers and have combined and refined them a bit...</p>

<pre><code>public interface OnKeyboardVisibilityListener {


    void onVisibilityChanged(boolean visible);
}

public final void setKeyboardListener(final OnKeyboardVisibilityListener listener) {
    final View activityRootView = ((ViewGroup) getActivity().findViewById(android.R.id.content)).getChildAt(0);

    activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

        private boolean wasOpened;

        private final int DefaultKeyboardDP = 100;

        // From @nathanielwolf answer...  Lollipop includes button bar in the root. Add height of button bar (48dp) to maxDiff
        private final int EstimatedKeyboardDP = DefaultKeyboardDP + (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP ? 48 : 0);

        private final Rect r = new Rect();

        @Override
        public void onGlobalLayout() {
            // Convert the dp to pixels.
            int estimatedKeyboardHeight = (int) TypedValue
                    .applyDimension(TypedValue.COMPLEX_UNIT_DIP, EstimatedKeyboardDP, activityRootView.getResources().getDisplayMetrics());

            // Conclude whether the keyboard is shown or not.
            activityRootView.getWindowVisibleDisplayFrame(r);
            int heightDiff = activityRootView.getRootView().getHeight() - (r.bottom - r.top);
            boolean isShown = heightDiff &gt;= estimatedKeyboardHeight;

            if (isShown == wasOpened) {
                Log.d(""Keyboard state"", ""Ignoring global layout change..."");
                return;
            }

            wasOpened = isShown;
            listener.onVisibilityChanged(isShown);
        }
    });
}
</code></pre>

<p>Works for me :)</p>

<p><strong>NOTE:</strong> 
If you notice that the <strong>DefaultKeyboardDP</strong> does not fit your device play with the value and post a comment for everyone to know what should be the value... eventually we will get the correct value to fit all devices!</p>

<p>For more details, check out the implementation on <a href=""https://github.com/nu-art/cyborg-core/blob/master/src/main/java/com/nu/art/cyborg/core/KeyboardChangeListener.java"" rel=""nofollow noreferrer"">Cyborg</a></p>
",TacB0sS,TacB0sS,1380059924,1545156332,1545156332
http://stackoverflow.com/a/19022416/355753,Finding supported GLSL version,7740,Dolda2000,Community,1380179184,1556843028,1495541364,https://stackoverflow.com/questions/19021567/finding-supported-glsl-version,"<p>There's a specific mapping between OpenGL version and supported GLSL version:</p>

<pre><code>GLSL Version      OpenGL Version
1.10              2.0
1.20              2.1
1.30              3.0
1.40              3.1
1.50              3.2
3.30              3.3
4.00              4.0
4.10              4.1
4.20              4.2
4.30              4.3
4.40              4.4
4.50              4.5
</code></pre>

<p>There's a well defined API for querying the OpenGL version. Use the table above for mapping to GLSL versions (after OpenGL-3.3 it's very logical).</p>

<p>Furthermore the specification defines the format of the GL_VERSION and GL_SHADING_LANGUAGE_VERSION to </p>

<blockquote>
  <p>begin with a version number. The version number uses one of these forms:</p>

<pre><code>major_number.minor_number | major_number.minor_number.release_number
</code></pre>
</blockquote>
",datenwolf,SilverTiger,1380182008,1454848620,1454848620
http://stackoverflow.com/a/19053800/1072990,Converting Snake Case to Lower Camel Case (lowerCamelCase),24724,luca,josliber,1380293286,1551374753,1450077662,https://stackoverflow.com/questions/19053707/converting-snake-case-to-lower-camel-case-lowercamelcase,"<pre><code>def to_camel_case(snake_str):
    components = snake_str.split('_')
    # We capitalize the first letter of each component except the first one
    # with the 'title' method and join them together.
    return components[0] + ''.join(x.title() for x in components[1:])
</code></pre>

<p>Example:</p>

<pre><code>In [11]: to_camel_case('snake_case')
Out[11]: 'snakeCase'
</code></pre>
",jbaiter,duan,1380293561,1519649718,1519649718
http://stackoverflow.com/a/19060157/298171,How do I expand a tuple into variadic template function&#39;s arguments?,42435,Gustaf,Xeo,1238100214,1525970566,1328366468,https://stackoverflow.com/questions/687490/how-do-i-expand-a-tuple-into-variadic-template-functions-arguments,"<pre><code>template&lt;typename F, typename Tuple, std::size_t ... I&gt;
auto apply_impl(F&amp;&amp; f, Tuple&amp;&amp; t, std::index_sequence&lt;I...&gt;) {
    return std::forward&lt;F&gt;(f)(std::get&lt;I&gt;(std::forward&lt;Tuple&gt;(t))...);
}
template&lt;typename F, typename Tuple&gt;
auto apply(F&amp;&amp; f, Tuple&amp;&amp; t) {
    using Indices = std::make_index_sequence&lt;std::tuple_size&lt;std::decay_t&lt;Tuple&gt;&gt;::value&gt;;
    return apply_impl(std::forward&lt;F&gt;(f), std::forward&lt;Tuple&gt;(t), Indices());
}
</code></pre>

<p>This is adapted from the C++14 draft using index_sequence. I might propose to have apply in a future standard (TS).</p>
",PeterSom,PeterSom,1380316404,1380318893,1380318893
http://stackoverflow.com/a/19089045/1265472,connect to bucket having uppercase letter,3919,shantanuo,,1380525814,1487139814,0,https://stackoverflow.com/questions/19088584/connect-to-bucket-having-uppercase-letter,"<p>S3 recommend that you only use DNS-compliant bucket names. </p>

<p>Take a look at the restrictions page: <a href=""http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html"" rel=""noreferrer"">http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html</a></p>

<p>However you do it, in boto you can use a different calling format for buckets with a mixed-case name:</p>

<pre><code>from boto.s3.connection import OrdinaryCallingFormat

conn = boto.connect_s3(calling_format=OrdinaryCallingFormat())
mybucket = conn.get_bucket('Vig_import')
</code></pre>
",shry,,1380527506,1380527506,0
http://stackoverflow.com/a/19092511/944936,Get multiple style attributes with obtainStyledAttributes,9534,Boris Strandjev,Kara,1380216009,1395735828,1380220466,https://stackoverflow.com/questions/19034597/get-multiple-style-attributes-with-obtainstyledattributes,"<p>It seems this is a bug in the API. I did tests for 4 attributes: <code>gravity</code>, <code>text</code>, <code>textSize</code> and <code>textColor</code>. Here is the code I used:</p>

<pre><code>private void processAndroidAttributes(final Context context, final AttributeSet attrs) {
    ATTRS = new Integer[] {
               android.R.attr.textSize, android.R.attr.text,
               android.R.attr.textColor, android.R.attr.gravity };
    Arrays.sort(ATTRS);
    do {
        printPermutation(ATTRS);
        tryApplyingStyles(context, attrs, ATTRS);
        ATTRS = nextPermutation(ATTRS);
    } while ((ATTRS = nextPermutation(ATTRS)) != null);
}
</code></pre>

<p>The method <code>processAndroidAttributes</code> tries applying all the listed attributes and checks if they were applied or defaults were used. For each iteration I print the array <code>ATTRS</code> contents and whether the real value was used (flagged with <code>1</code>) or default was used (flagged with <code>0</code>). Here is what I get after I run the above code (every iteration prints couple of lines):</p>

<pre><code>[16842901,16842904,16842927,16843087]
1111
[16842901,16842904,16843087,16842927]
1110
[16842901,16842927,16842904,16843087]
1101
[16842901,16842927,16843087,16842904]
1101
[16842901,16843087,16842904,16842927]
1100
[16842901,16843087,16842927,16842904]
1100
[16842904,16842901,16842927,16843087]
1011
[16842904,16842901,16843087,16842927]
1010
[16842904,16842927,16842901,16843087]
1011
[16842904,16842927,16843087,16842901]
1011
[16842904,16843087,16842901,16842927]
1010
[16842904,16843087,16842927,16842901]
1010
[16842927,16842901,16842904,16843087]
1001
[16842927,16842901,16843087,16842904]
1001
[16842927,16842904,16842901,16843087]
1001
[16842927,16842904,16843087,16842901]
1001
[16842927,16843087,16842901,16842904]
1001
[16842927,16843087,16842904,16842901]
1001
[16843087,16842901,16842904,16842927]
1000
[16843087,16842901,16842927,16842904]
1000
[16843087,16842904,16842901,16842927]
1000
[16843087,16842904,16842927,16842901]
1000
[16843087,16842927,16842901,16842904]
1000
[16843087,16842927,16842904,16842901]
1000
</code></pre>

<p>As you see this is almost as if expecting the array to be sorted, with only several outliers. I think it is a bug in the Android API as the documentation of <a href=""http://developer.android.com/reference/android/content/res/Resources.Theme.html#obtainStyledAttributes%28int,%20int%5B%5D%29""><code>obtainStyledAttributes</code></a>, does not specify to expect any ordering of the attribute ids.</p>
",Boris Strandjev,,1380538704,1380538704,0
http://stackoverflow.com/a/19114706/201318,string.translate() with unicode data in python,25873,adohertyd,adohertyd,1343407749,1450280842,1343408910,https://stackoverflow.com/questions/11692199/string-translate-with-unicode-data-in-python,"<p>In this version you can relatively make one's letters to other  </p>

<pre><code>def trans(to_translate):
    tabin = u''
    tabout = u''
    tabin = [ord(char) for char in tabin]
    translate_table = dict(zip(tabin, tabout))
    return to_translate.translate(translate_table)
</code></pre>
",madjardi,,1380625977,1380625977,0
http://stackoverflow.com/a/1911863/382458,How to determine CPU and memory consumption from inside a process?,278419,Lanzelot,Ronin,1221487483,1544638983,1323846897,https://stackoverflow.com/questions/63166/how-to-determine-cpu-and-memory-consumption-from-inside-a-process,"<h1>Mac OS X</h1>

<p>I was hoping to find similar information for Mac OS X as well. Since it wasn't here, I went out and dug it up myself. Here are some of the things I found. If anyone has any other suggestions, I'd love to hear them.</p>

<h2>Total Virtual Memory</h2>

<p>This one is tricky on Mac OS X because it doesn't use a preset swap partition or file like Linux. Here's an entry from Apple's documentation:</p>

<blockquote>
  <p><strong>Note:</strong> Unlike most Unix-based operating systems, Mac OS X does not use a preallocated swap partition for virtual memory. Instead, it uses all of the available space on the machines boot partition.</p>
</blockquote>

<p>So, if you want to know how much virtual memory is still available, you need to get the size of the root partition. You can do that like this:</p>

<pre><code>struct statfs stats;
if (0 == statfs(""/"", &amp;stats))
{
    myFreeSwap = (uint64_t)stats.f_bsize * stats.f_bfree;
}
</code></pre>

<h2>Total Virtual Currently Used</h2>

<p>Calling systcl with the ""vm.swapusage"" key provides interesting information about swap usage:</p>

<pre><code>sysctl -n vm.swapusage
vm.swapusage: total = 3072.00M  used = 2511.78M  free = 560.22M  (encrypted)
</code></pre>

<p>Not that the total swap usage displayed here can change if more swap is needed as explained in the section above. So the total is actually the <em>current</em> swap total. In C++, this data can be queried this way:</p>

<pre><code>xsw_usage vmusage = {0};
size_t size = sizeof(vmusage);
if( sysctlbyname(""vm.swapusage"", &amp;vmusage, &amp;size, NULL, 0)!=0 )
{
   perror( ""unable to get swap usage by calling sysctlbyname(\""vm.swapusage\"",...)"" );
}
</code></pre>

<p>Note that the ""xsw_usage"", declared in sysctl.h, seems not documented and I suspect there there is a more portable way of accessing these values.</p>

<h2>Virtual Memory Currently Used by my Process</h2>

<p>You can get statistics about your current process using the <code>task_info</code> function. That includes the current resident size of your process and the current virtual size.</p>

<pre><code>#include&lt;mach/mach.h&gt;

struct task_basic_info t_info;
mach_msg_type_number_t t_info_count = TASK_BASIC_INFO_COUNT;

if (KERN_SUCCESS != task_info(mach_task_self(),
                              TASK_BASIC_INFO, (task_info_t)&amp;t_info, 
                              &amp;t_info_count))
{
    return -1;
}
// resident size is in t_info.resident_size;
// virtual size is in t_info.virtual_size;
</code></pre>

<h2>Total RAM available</h2>

<p>The amount of physical RAM available in your system is available using the <code>sysctl</code> system function like this:</p>

<pre><code>#include &lt;sys/types.h&gt;
#include &lt;sys/sysctl.h&gt;
...
int mib[2];
int64_t physical_memory;
mib[0] = CTL_HW;
mib[1] = HW_MEMSIZE;
length = sizeof(int64_t);
sysctl(mib, 2, &amp;physical_memory, &amp;length, NULL, 0);
</code></pre>

<h2>RAM Currently Used</h2>

<p>You can get general memory statistics from the <code>host_statistics</code> system function.</p>

<pre><code>#include &lt;mach/vm_statistics.h&gt;
#include &lt;mach/mach_types.h&gt;
#include &lt;mach/mach_init.h&gt;
#include &lt;mach/mach_host.h&gt;

int main(int argc, const char * argv[]) {
    vm_size_t page_size;
    mach_port_t mach_port;
    mach_msg_type_number_t count;
    vm_statistics64_data_t vm_stats;

    mach_port = mach_host_self();
    count = sizeof(vm_stats) / sizeof(natural_t);
    if (KERN_SUCCESS == host_page_size(mach_port, &amp;page_size) &amp;&amp;
        KERN_SUCCESS == host_statistics64(mach_port, HOST_VM_INFO,
                                        (host_info64_t)&amp;vm_stats, &amp;count))
    {
        long long free_memory = (int64_t)vm_stats.free_count * (int64_t)page_size;

        long long used_memory = ((int64_t)vm_stats.active_count +
                                 (int64_t)vm_stats.inactive_count +
                                 (int64_t)vm_stats.wire_count) *  (int64_t)page_size;
        printf(""free memory: %lld\nused memory: %lld\n"", free_memory, used_memory);
    }

    return 0;
}
</code></pre>

<p>One thing to note here are that there are five types of memory pages in Mac OS X. They are as follows:</p>

<ol>
<li><strong>Wired</strong> pages that are locked in place and cannot be swapped out</li>
<li><strong>Active</strong> pages that are loading into physical memory and would be relatively difficult to swap out</li>
<li><strong>Inactive</strong> pages that are loaded into memory, but haven't been used recently and may not even be needed at all. These are potential candidates for swapping. This memory would probably need to be flushed.</li>
<li><strong>Cached</strong> pages that have been some how cached that are likely to be easily reused. Cached memory probably would not require flushing. It is still possible for cached pages to be reactivated</li>
<li><strong>Free</strong> pages that are completely free and ready to be used.</li>
</ol>

<p>It is good to note that just because Mac OS X may show very little actual free memory at times that it may not be a good indication of how much is ready to be used on short notice.</p>

<h2>RAM Currently Used by my Process</h2>

<p>See the ""Virtual Memory Currently Used by my Process"" above. The same code applies.</p>
",Michael Taylor,Michael Taylor,1260930117,1419913733,1419913733
http://stackoverflow.com/a/19177754/473672,Converting int to Unicode char in a backwards compatible way,1964,Basel Shishani,,1380878388,1380878828,0,https://stackoverflow.com/questions/19177588/converting-int-to-unicode-char-in-a-backwards-compatible-way,"<p>How about:</p>

<pre><code>try:
    chr = unichr  # Python 2
except NameError:
    pass          # Python 3

i = 404
c = chr(i) # c is now '' regardless of Python version
</code></pre>

<p>You could also create your own function name if you didn't want to overwrite Python 2's <code>chr</code>.</p>
",Blckknght,,1380878828,1380878828,0
http://stackoverflow.com/a/19192151/1532974,template declaration of `typedef typename Foo&lt;T&gt;::Bar Bar&#39;,17030,geraldCelente,Dan Nissenbaum,1380928236,1477426317,1420778468,https://stackoverflow.com/questions/19192122/template-declaration-of-typedef-typename-footbar-bar,"<p>The <code>typedef</code> declaration in C++ cannot be a template. However, C++11 added an alternative syntax using the <code>using</code> declaration to allow parametrized type aliases:</p>

<pre><code>template &lt;typename T&gt;
using Bar = typename Foo&lt;T&gt;::Bar;
</code></pre>

<p>Now you can use:</p>

<pre><code>Bar&lt;int&gt; x;   // is a Foo&lt;int&gt;::Bar
</code></pre>
",Kerrek SB,,1380928443,1380928443,0
http://stackoverflow.com/a/1919221/324122,Mass string replace in python?,18434,Mike Trpcic,JDong,1261016258,1427878837,1374519215,https://stackoverflow.com/questions/1919096/mass-string-replace-in-python,"<p>Here is a version using split/join</p>

<pre><code>mydict = {""y"":""\033[0;30m"",
          ""c"":""\033[0;31m"",
          ""b"":""\033[0;32m"",
          ""Y"":""\033[0;33m"",
          ""u"":""\033[0;34m""}
mystr = ""The &amp;yquick &amp;cbrown &amp;bfox &amp;Yjumps over the &amp;ulazy dog""

myparts = mystr.split(""&amp;"")
myparts[1:]=[mydict[x[0]]+x[1:] for x in myparts[1:]]
print """".join(myparts)
</code></pre>

<p>In case there are ampersands with invalid codes you can use this to preserve them</p>

<pre><code>myparts[1:]=[mydict.get(x[0],""&amp;""+x[0])+x[1:] for x in myparts[1:]]
</code></pre>

<p>Peter Hansen pointed out that this fails when there is double ampersand. In that case use this version</p>

<pre><code>mystr = ""The &amp;yquick &amp;cbrown &amp;bfox &amp;Yjumps over the &amp;&amp;ulazy dog""
myparts = mystr.split(""&amp;"")
myparts[1:]=[mydict.get(x[:1],""&amp;""+x[:1])+x[1:] for x in myparts[1:]]
print """".join(myparts)
</code></pre>
",John La Rooy,John La Rooy,1261019270,1261282683,1261282683
http://stackoverflow.com/a/19210067/702643,How do I get box plot key numbers from an array in PHP?,1111,Lilleman,,1381070550,1479865576,0,https://stackoverflow.com/questions/19210066/how-do-i-get-box-plot-key-numbers-from-an-array-in-php,"<pre><code>function box_plot_values($array)
{
    $return = array(
        'lower_outlier'  =&gt; 0,
        'min'            =&gt; 0,
        'q1'             =&gt; 0,
        'median'         =&gt; 0,
        'q3'             =&gt; 0,
        'max'            =&gt; 0,
        'higher_outlier' =&gt; 0,
    );

    $array_count = count($array);
    sort($array, SORT_NUMERIC);

    $return['min']            = $array[0];
    $return['lower_outlier']  = $return['min'];
    $return['max']            = $array[$array_count - 1];
    $return['higher_outlier'] = $return['max'];
    $middle_index             = floor($array_count / 2);
    $return['median']         = $array[$middle_index]; // Assume an odd # of items
    $lower_values             = array();
    $higher_values            = array();

    // If we have an even number of values, we need some special rules
    if ($array_count % 2 == 0)
    {
        // Handle the even case by averaging the middle 2 items
        $return['median'] = round(($return['median'] + $array[$middle_index - 1]) / 2);

        foreach ($array as $idx =&gt; $value)
        {
            if ($idx &lt; ($middle_index - 1)) $lower_values[]  = $value; // We need to remove both of the values we used for the median from the lower values
            elseif ($idx &gt; $middle_index)   $higher_values[] = $value;
        }
    }
    else
    {
        foreach ($array as $idx =&gt; $value)
        {
            if ($idx &lt; $middle_index)     $lower_values[]  = $value;
            elseif ($idx &gt; $middle_index) $higher_values[] = $value;
        }
    }

    $lower_values_count = count($lower_values);
    $lower_middle_index = floor($lower_values_count / 2);
    $return['q1']       = $lower_values[$lower_middle_index];
    if ($lower_values_count % 2 == 0)
        $return['q1'] = round(($return['q1'] + $lower_values[$lower_middle_index - 1]) / 2);

    $higher_values_count = count($higher_values);
    $higher_middle_index = floor($higher_values_count / 2);
    $return['q3']        = $higher_values[$higher_middle_index];
    if ($higher_values_count % 2 == 0)
        $return['q3'] = round(($return['q3'] + $higher_values[$higher_middle_index - 1]) / 2);

    // Check if min and max should be capped
    $iqr = $return['q3'] - $return['q1']; // Calculate the Inner Quartile Range (iqr)
    if ($return['q1'] &gt; $iqr)                  $return['min'] = $return['q1'] - $iqr;
    if ($return['max'] - $return['q3'] &gt; $iqr) $return['max'] = $return['q3'] + $iqr;

    return $return;
}
</code></pre>
",Lilleman,,1381070550,1381070550,0
http://stackoverflow.com/a/19228302/1458162,Add directives from directive in AngularJS,103772,frapontillo,frapontillo,1381146282,1531925855,1381153132,https://stackoverflow.com/questions/19224028/add-directives-from-directive-in-angularjs,"<p>In cases where you have multiple directives on a single DOM element and where the
order in which theyre applied matters, you can use the <code>priority</code> property to order their
application. Higher numbers run first. The default priority is 0 if you dont specify one.</p>

<p><strong>EDIT</strong>: after the discussion, here's the complete working solution. The key was to <strong>remove the attribute</strong>: <code>element.removeAttr(""common-things"");</code>, and also <code>element.removeAttr(""data-common-things"");</code> (in case users specify <code>data-common-things</code> in the html)</p>



<pre class=""lang-js prettyprint-override""><code>angular.module('app')
  .directive('commonThings', function ($compile) {
    return {
      restrict: 'A',
      replace: false, 
      terminal: true, //this setting is important, see explanation below
      priority: 1000, //this setting is important, see explanation below
      compile: function compile(element, attrs) {
        element.attr('tooltip', '{{dt()}}');
        element.attr('tooltip-placement', 'bottom');
        element.removeAttr(""common-things""); //remove the attribute to avoid indefinite loop
        element.removeAttr(""data-common-things""); //also remove the same attribute with data- prefix in case users specify data-common-things in the html

        return {
          pre: function preLink(scope, iElement, iAttrs, controller) {  },
          post: function postLink(scope, iElement, iAttrs, controller) {  
            $compile(iElement)(scope);
          }
        };
      }
    };
  });
</code></pre>

<p>Working plunker is available at: <a href=""http://plnkr.co/edit/Q13bUt?p=preview"" rel=""noreferrer"">http://plnkr.co/edit/Q13bUt?p=preview</a></p>

<p>Or:</p>

<pre class=""lang-js prettyprint-override""><code>angular.module('app')
  .directive('commonThings', function ($compile) {
    return {
      restrict: 'A',
      replace: false,
      terminal: true,
      priority: 1000,
      link: function link(scope,element, attrs) {
        element.attr('tooltip', '{{dt()}}');
        element.attr('tooltip-placement', 'bottom');
        element.removeAttr(""common-things""); //remove the attribute to avoid indefinite loop
        element.removeAttr(""data-common-things""); //also remove the same attribute with data- prefix in case users specify data-common-things in the html

        $compile(element)(scope);
      }
    };
  });
</code></pre>

<p><a href=""http://plnkr.co/edit/Tw1Pbt?p=preview"" rel=""noreferrer"">DEMO</a></p>

<p><strong>Explanation why we have to set <code>terminal: true</code> and <code>priority: 1000</code> (a high number):</strong></p>

<p>When the DOM is ready, angular walks the DOM to identify all registered directives and compile the directives one by one based on <code>priority</code> <strong>if these directives are on the same element</strong>. We set our custom directive's priority to a high number to ensure that it will be compiled <strong>first</strong> and with <code>terminal: true</code>, the other directives will be <strong>skipped</strong> after this directive is compiled. </p>

<p>When our custom directive is compiled, it will modify the element by adding directives and removing itself and use $compile service to <strong>compile all the directives (including those that were skipped)</strong>.</p>

<p>If we don't set <code>terminal:true</code> and <code>priority: 1000</code>, there is a chance that some directives are compiled <strong>before</strong> our custom directive. And when our custom directive uses $compile to compile the element => compile again the already compiled directives. This will cause unpredictable behavior especially if the directives compiled before our custom directive have already transformed the DOM.</p>

<p>For more information about priority and terminal, check out <a href=""https://stackoverflow.com/questions/15266840/how-to-understand-the-terminal-of-directive"">How to understand the `terminal` of directive?</a></p>

<p>An example of a directive that also modifies the template is <code>ng-repeat</code> (priority = 1000), when <code>ng-repeat</code> is compiled, <code>ng-repeat</code> <em>make copies of the template element before other directives get applied</em>. </p>

<p>Thanks to @Izhaki's comment, here is the reference to <code>ngRepeat</code> source code: <a href=""https://github.com/angular/angular.js/blob/master/src/ng/directive/ngRepeat.js"" rel=""noreferrer"">https://github.com/angular/angular.js/blob/master/src/ng/directive/ngRepeat.js</a></p>
",Khanh TO,Community,1381158392,1404792890,1495535476
http://stackoverflow.com/a/19271434/480856,Correctly determine if date string is a valid date in that format,222995,Marty Wallace,Amal Murali,1381319883,1560253634,1403291447,https://stackoverflow.com/questions/19271381/correctly-determine-if-date-string-is-a-valid-date-in-that-format,"<p>You can use <a href=""http://php.net/datetime"" rel=""noreferrer""><code>DateTime</code></a> class for this purpose:</p>

<pre class=""lang-php prettyprint-override""><code>function validateDate($date, $format = 'Y-m-d')
{
    $d = DateTime::createFromFormat($format, $date);
    // The Y ( 4 digits year ) returns TRUE for any integer with any number of digits so changing the comparison from == to === fixes the issue.
    return $d &amp;&amp; $d-&gt;format($format) === $date;
}
</code></pre>

<p><sup>[<em>Function taken from <a href=""https://stackoverflow.com/a/12323025/67332"">this answer</a>. Also on <a href=""http://www.php.net/manual/en/function.checkdate.php#113205"" rel=""noreferrer"">php.net</a>. Originally written by <a href=""https://stackoverflow.com/users/67332"">Glavi</a>.</em>]</sup></p>

<hr>

<p>Test cases:</p>

<pre><code>var_dump(validateDate('2013-13-01'));  // false
var_dump(validateDate('20132-13-01')); // false
var_dump(validateDate('2013-11-32'));  // false
var_dump(validateDate('2012-2-25'));   // false
var_dump(validateDate('2013-12-01'));  // true
var_dump(validateDate('1970-12-01'));  // true
var_dump(validateDate('2012-02-29'));  // true
var_dump(validateDate('2012', 'Y'));   // true
var_dump(validateDate('12012', 'Y'));  // false
</code></pre>

<p><a href=""https://eval.in/53309"" rel=""noreferrer""><strong>Demo!</strong></a></p>
",Amal Murali,Francisco Luz,1381319994,1526723127,1526723127
http://stackoverflow.com/a/19299884/1595060,tempfile.TemporaryDirectory context manager in Python 2.7,13420,guettli,Daniel Watkins,1381409192,1474529891,1431008457,https://stackoverflow.com/questions/19296146/tempfile-temporarydirectory-context-manager-in-python-2-7,"<p><a href=""https://docs.python.org/3/library/tempfile.html#tempfile.TemporaryDirectory"" rel=""noreferrer""><code>tempfile.TemporaryDirectory()</code></a> was added to the tempfile standard library in Python 3.2</p>

<p>It's a simple wrapper for <code>tempfile.mkdtemp</code>. It is coded in pure Python and can be easily ported to Python 2.7. </p>

<p>For example:</p>

<pre><code>from __future__ import print_function

import warnings as _warnings
import os as _os

from tempfile import mkdtemp

class TemporaryDirectory(object):
    """"""Create and return a temporary directory.  This has the same
    behavior as mkdtemp but can be used as a context manager.  For
    example:

        with TemporaryDirectory() as tmpdir:
            ...

    Upon exiting the context, the directory and everything contained
    in it are removed.
    """"""

    def __init__(self, suffix="""", prefix=""tmp"", dir=None):
        self._closed = False
        self.name = None # Handle mkdtemp raising an exception
        self.name = mkdtemp(suffix, prefix, dir)

    def __repr__(self):
        return ""&lt;{} {!r}&gt;"".format(self.__class__.__name__, self.name)

    def __enter__(self):
        return self.name

    def cleanup(self, _warn=False):
        if self.name and not self._closed:
            try:
                self._rmtree(self.name)
            except (TypeError, AttributeError) as ex:
                # Issue #10188: Emit a warning on stderr
                # if the directory could not be cleaned
                # up due to missing globals
                if ""None"" not in str(ex):
                    raise
                print(""ERROR: {!r} while cleaning up {!r}"".format(ex, self,),
                      file=_sys.stderr)
                return
            self._closed = True
            if _warn:
                self._warn(""Implicitly cleaning up {!r}"".format(self),
                           ResourceWarning)

    def __exit__(self, exc, value, tb):
        self.cleanup()

    def __del__(self):
        # Issue a ResourceWarning if implicit cleanup needed
        self.cleanup(_warn=True)

    # XXX (ncoghlan): The following code attempts to make
    # this class tolerant of the module nulling out process
    # that happens during CPython interpreter shutdown
    # Alas, it doesn't actually manage it. See issue #10188
    _listdir = staticmethod(_os.listdir)
    _path_join = staticmethod(_os.path.join)
    _isdir = staticmethod(_os.path.isdir)
    _islink = staticmethod(_os.path.islink)
    _remove = staticmethod(_os.remove)
    _rmdir = staticmethod(_os.rmdir)
    _warn = _warnings.warn

    def _rmtree(self, path):
        # Essentially a stripped down version of shutil.rmtree.  We can't
        # use globals because they may be None'ed out at shutdown.
        for name in self._listdir(path):
            fullname = self._path_join(path, name)
            try:
                isdir = self._isdir(fullname) and not self._islink(fullname)
            except OSError:
                isdir = False
            if isdir:
                self._rmtree(fullname)
            else:
                try:
                    self._remove(fullname)
                except OSError:
                    pass
        try:
            self._rmdir(path)
        except OSError:
            pass

import os
with TemporaryDirectory() as tmp_dir:
    print(""Temporary directory path: %s"" % tmp_dir)
    print(os.path.isdir(tmp_dir))

# here the temporary diretory does not exist any more.
print(os.path.isdir(tmp_dir))
</code></pre>
",Leonardo.Z,Antti Haapala,1381418545,1471110311,1471110311
http://stackoverflow.com/a/19311197/2088273,Android list view inside a scroll view,263427,Zapnologica,Er Mayank,1377118539,1561570744,1501170593,https://stackoverflow.com/questions/18367522/android-list-view-inside-a-scroll-view,"<p>The <em>shortest &amp; easiest solution</em> for any <strong>ChildView to scroll inside a ScrollView</strong>. <em>Anything like ListView, RecyclerView, etc.</em> <strong><em>You do not have to do anything special in code.</em></strong></p>

<p>Just replace <strong><em>ScrollView</em></strong> with <strong><em><a href=""https://developer.android.com/reference/android/support/v4/widget/NestedScrollView"" rel=""nofollow noreferrer"">android.support.v4.widget.NestedScrollView</a></em></strong> in your current xml and then magic happens.</p>

<p>Below is a sample xml code :</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;android.support.v4.widget.NestedScrollView
    xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;android.support.v7.widget.LinearLayoutCompat
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:orientation=""vertical""
        android:padding=""16dp""
        android:paddingBottom=""20dp""&gt;

        &lt;TextView
            android:layout_width=""match_parent""
            android:layout_height=""wrap_content""
            android:text=""Recycler View inside a Scroll View""
            android:textColor=""@color/black""
            android:textSize=""@dimen/_20sp""
            android:textStyle=""bold"" /&gt;

        &lt;TextView
            android:layout_width=""match_parent""
            android:layout_height=""wrap_content""
            android:layout_marginTop=""8dp""
            android:text=""Below is a Recycler View as an example.""
            android:textSize=""16sp"" /&gt;

        &lt;android.support.v7.widget.RecyclerView
            android:id=""@+id/recycler_view""
            android:layout_width=""match_parent""
            android:layout_height=""wrap_content""
            android:layout_marginTop=""8dp""
            app:layout_constraintTop_toBottomOf=""@id/et_damaged_qty"" /&gt;

        &lt;TextView
            android:layout_width=""match_parent""
            android:layout_height=""wrap_content""
            android:layout_marginTop=""8dp""
            android:text=""This text automatically goes below the Recycler View.""
            android:textSize=""16sp"" /&gt;
    &lt;/android.support.v7.widget.LinearLayoutCompat&gt;
&lt;/android.support.v4.widget.NestedScrollView&gt;
</code></pre>

<p><em>Now you can get rid of all the ugly hacks we did to get around this nested scrolling.</em></p>

<p><strong><em>It's time to play. Hell Yeeeeeeeeeeeeeeeeeah!</em></strong></p>

<p><a href=""https://i.stack.imgur.com/DzTXk.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/DzTXk.gif"" alt=""enter image description here""></a></p>
",arshu,arshu,1381471006,1561570744,1561570744
http://stackoverflow.com/a/19339162/122629,Adding a slide effect to bootstrap dropdown,148422,Ben Beri,j08691,1345838213,1555702730,1544822134,https://stackoverflow.com/questions/12115833/adding-a-slide-effect-to-bootstrap-dropdown,"<p>If you update to Bootstrap 3 (BS3), they've exposed a lot of Javascript events that are nice to tie your desired functionality into.  In BS3, this code will give all of your dropdown menus the animation effect you are looking for:</p>

<pre><code>  // Add slideDown animation to Bootstrap dropdown when expanding.
  $('.dropdown').on('show.bs.dropdown', function() {
    $(this).find('.dropdown-menu').first().stop(true, true).slideDown();
  });

  // Add slideUp animation to Bootstrap dropdown when collapsing.
  $('.dropdown').on('hide.bs.dropdown', function() {
    $(this).find('.dropdown-menu').first().stop(true, true).slideUp();
  });
</code></pre>

<p>You can read about BS3 events <a href=""http://getbootstrap.com/javascript/#js-events"" rel=""noreferrer"">here</a> and specifically about the dropdown events <a href=""http://getbootstrap.com/javascript/#dropdowns"" rel=""noreferrer"">here</a>.</p>
",cogell,Daniel Dewhurst,1381611694,1481805456,1481805456
http://stackoverflow.com/a/19379636/613428,What is the canonical way to find out if a Django model is saved to db?,19038,agiliq,John Meagher,1263134636,1557188859,1263137189,https://stackoverflow.com/questions/2037320/what-is-the-canonical-way-to-find-out-if-a-django-model-is-saved-to-db,"<p>Nowadays you can check for:</p>

<pre><code>self._state.adding
</code></pre>

<p>This value is set by the <code>QuerySet.iterator()</code> for objects which are not added yet in the database. You can't use this value in the <code>__init__()</code> method yet, as it's set after the object is constructed.</p>
",vdboor,vdboor,1381835095,1381842811,1381842811
http://stackoverflow.com/a/19390915/402891,How to parse a FASTA file using kseq.h,1020,N1ght,N1ght,1381868231,1516938795,1491494989,https://stackoverflow.com/questions/19390245/how-to-parse-a-fasta-file-using-kseq-h,"<p>First you should check the return value of fopen():</p>

<pre><code>FILE* fp = fopen(argv[1], ""r""); // STEP 2: open the file handler
if(fp == 0) {
    perror(""fopen"");
    exit(1);
}
</code></pre>

<p>Second, I looked at the header file and I think kseg_init takes an fd not a FILE *.
You can get an fd from a FILE * with fileno().</p>

<pre><code>kseq_t *seq = kseq_init(fp); // STEP 3: initialize seq 
</code></pre>

<p>Should be:</p>

<pre><code>kseq_t *seq = kseq_init(fileno(fp)); // STEP 3: initialize seq 
</code></pre>
",Charlie Burns,,1381870618,1381870618,0
http://stackoverflow.com/a/19447758/1336833,How to unmap a file from memory mapped using FileChannel in java?,23978,learner135,learner135,1275644820,1546852337,1275648774,https://stackoverflow.com/questions/2972986/how-to-unmap-a-file-from-memory-mapped-using-filechannel-in-java,"<p>[WinXP,SunJDK1.6] I had a mapped ByteBuffer taken from filechannel. After reading SO posts finally managed to call a cleaner through reflection without any sun.* package imports. No longer file lock is lingering.</p>

<p><strong>edit</strong> Added JDK9+ code(Luke Hutchison).</p>

<pre><code>private static void closeDirectBuffer(ByteBuffer cb) {
    if (cb==null || !cb.isDirect()) return;
    // we could use this type cast and call functions without reflection code,
    // but static import from sun.* package is risky for non-SUN virtual machine.
    //try { ((sun.nio.ch.DirectBuffer)cb).cleaner().clean(); } catch (Exception ex) { }

    // JavaSpecVer: 1.6, 1.7, 1.8, 9, 10
    boolean isOldJDK = System.getProperty(""java.specification.version"",""99"").startsWith(""1."");  
    try {
        if (isOldJDK) {
            Method cleaner = cb.getClass().getMethod(""cleaner"");
            cleaner.setAccessible(true);
            Method clean = Class.forName(""sun.misc.Cleaner"").getMethod(""clean"");
            clean.setAccessible(true);
            clean.invoke(cleaner.invoke(cb));
        } else {
            Class unsafeClass;
            try {
                unsafeClass = Class.forName(""sun.misc.Unsafe"");
            } catch(Exception ex) {
                // jdk.internal.misc.Unsafe doesn't yet have an invokeCleaner() method,
                // but that method should be added if sun.misc.Unsafe is removed.
                unsafeClass = Class.forName(""jdk.internal.misc.Unsafe"");
            }
            Method clean = unsafeClass.getMethod(""invokeCleaner"", ByteBuffer.class);
            clean.setAccessible(true);
            Field theUnsafeField = unsafeClass.getDeclaredField(""theUnsafe"");
            theUnsafeField.setAccessible(true);
            Object theUnsafe = theUnsafeField.get(null);
            clean.invoke(theUnsafe, cb);
        }
    } catch(Exception ex) { }
    cb = null;
}
</code></pre>

<p>Ideas were taken from these posts.<br/>
* <a href=""https://stackoverflow.com/questions/2972986/how-to-unmap-a-file-from-memory-mapped-using-filechannel-in-java"">How to unmap a file from memory mapped using FileChannel in java?</a> <br/>
* <a href=""https://stackoverflow.com/questions/8462200/examples-of-forcing-freeing-of-native-memory-direct-bytebuffer-has-allocated-us"">Examples of forcing freeing of native memory direct ByteBuffer has allocated, using sun.misc.Unsafe?</a> <br/>
* <a href=""https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferAllocator.java#L40"" rel=""nofollow noreferrer"">https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferAllocator.java#L40</a> <br/></p>
",Whome,Whome,1382093176,1546682199,1546682199
http://stackoverflow.com/a/19460632/122441,"Google Analytics, calculating an average for a custom metric",3306,user2470693,,1370869583,1474612207,0,https://stackoverflow.com/questions/17024617/google-analytics-calculating-an-average-for-a-custom-metric,"<p>You didn't miss anything. Calculated metrics are not available.
There's now a <a href=""https://code.google.com/p/analytics-issues/issues/detail?can=2&amp;start=0&amp;num=100&amp;q=average&amp;colspec=ID%20Component%20Type%20Status%20Priority%20Stars%20Summary&amp;groupby=&amp;sort=&amp;id=130"" rel=""nofollow"">Google Analytics feature request</a> for this, please star it or add your comment (hopefully Google Analytics team will notice).</p>

<p>The other option is to export the data and do the calculations outside of Google Analytics. You could do a normal CSV/Excel export, use the <a href=""https://developers.google.com/analytics/devguides/reporting/core/v3/"" rel=""nofollow"">Core Reporting API</a>, or try the <a href=""https://developers.google.com/analytics/solutions/report-automation-magic"" rel=""nofollow"">Magic Script</a>.</p>
",Pete,Hendy Irawan,1382139643,1402549262,1402549262
http://stackoverflow.com/a/19465187/1081396,Case insensitive jQuery attribute selector,27781,gshaffer,MackieeE,1382179461,1512130587,1382181025,https://stackoverflow.com/questions/19465157/case-insensitive-jquery-attribute-selector,"<p>You can always use <code>.filter()</code>:</p>

<pre><code>var mans = $('input').filter(function() {
    return $(this).attr('name').toLowerCase().indexOf('man') &gt; -1;
});

mans.css('background-color', 'black');
</code></pre>

<p>The key part here is <code>toLowerCase()</code> which lowercases the <code>name</code> attribute, allowing you to test it for containing <code>man</code>.</p>
",Bojangles,,1382179659,1382179659,0
http://stackoverflow.com/a/19494116/4105897,Find where java class is loaded from,164303,luke,Naman,1224708281,1508528765,1505916307,https://stackoverflow.com/questions/227486/find-where-java-class-is-loaded-from,"<p>Jon's version fails when the object's <code>ClassLoader</code> is registered as <code>null</code> which seems to imply that it was loaded by the Boot <code>ClassLoader</code>.</p>

<p>This method deals with that issue:</p>

<pre><code>public static String whereFrom(Object o) {
  if ( o == null ) {
    return null;
  }
  Class&lt;?&gt; c = o.getClass();
  ClassLoader loader = c.getClassLoader();
  if ( loader == null ) {
    // Try the bootstrap classloader - obtained from the ultimate parent of the System Class Loader.
    loader = ClassLoader.getSystemClassLoader();
    while ( loader != null &amp;&amp; loader.getParent() != null ) {
      loader = loader.getParent();
    }
  }
  if (loader != null) {
    String name = c.getCanonicalName();
    URL resource = loader.getResource(name.replace(""."", ""/"") + "".class"");
    if ( resource != null ) {
      return resource.toString();
    }
  }
  return ""Unknown"";
}
</code></pre>
",OldCurmudgeon,OldCurmudgeon,1382357420,1401187750,1401187750
http://stackoverflow.com/a/1952655/64911,"In Python, how do I determine if an object is iterable?",378130,willem,John Kugelman,1261570435,1558728425,1384220303,https://stackoverflow.com/questions/1952464/in-python-how-do-i-determine-if-an-object-is-iterable,"<h2>Duck typing</h2>

<pre><code>try:
    iterator = iter(theElement)
except TypeError:
    # not iterable
else:
    # iterable

# for obj in iterator:
#     pass
</code></pre>

<h2>Type checking</h2>

<p>Use the <a href=""https://docs.python.org/library/abc.html"" rel=""noreferrer"">Abstract Base Classes</a>. They need at least Python 2.6 and work only for new-style classes.</p>

<pre><code>from collections.abc import Iterable   # import directly from collections for Python &lt; 3.3

if isinstance(theElement, Iterable):
    # iterable
else:
    # not iterable
</code></pre>

<p>However, <code>iter()</code> is a bit more reliable as described <a href=""https://docs.python.org/library/collections.abc.html#collections.abc.Iterable"" rel=""noreferrer"">by the documentation</a>:</p>

<blockquote>
  <p>Checking <code>isinstance(obj, Iterable)</code> detects classes that are
  registered as Iterable or that have an <code>__iter__()</code> method, but
  it does not detect classes that iterate with the <code>__getitem__()</code>
  method. The only reliable way to determine whether an object
  is iterable is to call <code>iter(obj)</code>.</p>
</blockquote>
",Georg Schlly,Georg Schlly,1261572818,1538654885,1538654885
http://stackoverflow.com/a/19532415/4699324,Shifting SSE/AVX registers 32 bits left and right while shifting in zeros,4911,Z boson,Z boson,1382441228,1469610049,1382620598,https://stackoverflow.com/questions/19516585/shifting-sse-avx-registers-32-bits-left-and-right-while-shifting-in-zeros,"<p>You can do a shift right with <code>_mm256_permute_ps</code>, <code>_mm256_permute2f128_ps</code>, and <code>_mm256_blend_ps</code> as follows:</p>

<pre><code>__m256 t0 = _mm256_permute_ps(x, 0x39);            // [x4  x7  x6  x5  x0  x3  x2  x1]
__m256 t1 = _mm256_permute2f128_ps(t0, t0, 0x81);  // [ 0   0   0   0  x4  x7  x6  x5] 
__m256 y  = _mm256_blend_ps(t0, t1, 0x88);         // [ 0  x7  x6  x5  x4  x3  x2  x1]
</code></pre>

<p>The result is in <code>y</code>.  In order to do a rotate right, set the permute mask to <code>0x01</code> instead of <code>0x81</code>.   Shift/rotate left and larger shifts/rotates can be done similarly by changing the permute and blend control bytes.  </p>
",Felix Wyss,Felix Wyss,1382499983,1382659688,1382659688
http://stackoverflow.com/a/19533226/2119117,How to convert PascalCase to pascal_case?,75670,openfrog,mickmackusa,1262485251,1560337294,1557317124,https://stackoverflow.com/questions/1993721/how-to-convert-pascalcase-to-pascal-case,"<p>A shorter solution: Similar to the <em>editor's</em> one with a simplified regular expression and fixing the ""trailing-underscore"" problem:</p>

<pre><code>$output = strtolower(preg_replace('/(?&lt;!^)[A-Z]/', '_$0', $input));
</code></pre>

<p><a href=""https://3v4l.org/J1eMO"">PHP Demo</a> |
<a href=""https://regex101.com/r/Ft57oO/1"">Regex Demo</a></p>

<hr>

<p>Note that cases like <code>SimpleXML</code> will be converted to <code>simple_x_m_l</code> using the above solution. That can also be considered a wrong usage of camel case notation (correct would be <code>SimpleXml</code>) rather than a bug of the algorithm since such cases are always ambiguous - even by grouping uppercase characters to one string (<code>simple_xml</code>) such algorithm will always fail in other edge cases like <code>XMLHTMLConverter</code> or one-letter words near abbreviations, etc. If you don't mind about the (rather rare) edge cases and want to handle <code>SimpleXML</code> correctly, you can use a little more complex solution:</p>

<pre><code>$output = ltrim(strtolower(preg_replace('/[A-Z]([A-Z](?![a-z]))*/', '_$0', $input)), '_');
</code></pre>

<p><a href=""https://3v4l.org/dIo6c"">PHP Demo</a> |
<a href=""https://regex101.com/r/vRuLSr/1"">Regex Demo</a></p>
",Jan Jake,Jan Jake,1382504885,1480068786,1480068786
http://stackoverflow.com/a/19552359/229031,What happens if System.exit is called from a shutdown hook?,3759,djechlin,,1382562673,1382562673,0,https://stackoverflow.com/questions/19552358/what-happens-if-system-exit-is-called-from-a-shutdown-hook,"<p>Firstly, the easy answer:  your process deadlocks.</p>

<p>System.exit winds up calling <code>Shutdown.exit</code>, which ends with <a href=""http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Shutdown.java#Shutdown.exit%28int%29"" rel=""noreferrer"">this code block</a>:</p>

<pre><code>synchronized (Shutdown.class) {
     /* Synchronize on the class object, causing any other thread
      * that attempts to initiate shutdown to stall indefinitely
      */
     sequence();
     halt(status);
}
</code></pre>

<p>The comment is completely accurate.  But to understand this we need to see exactly what the the shutdown hook does.</p>

<p>Shutdown hooks are added via <code>ApplicationShutdownHooks.add</code>, as explained in <a href=""https://stackoverflow.com/a/19550623/1339987"">this answer here</a>.  Note that the <code>sequence</code> method above eventually winds up on <a href=""http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Shutdown.java#Shutdown.runHooks%28%29"" rel=""noreferrer"">this line of code</a> in <code>Shutdown.runHooks</code>:</p>

<pre><code>if (hook != null) hook.run();
</code></pre>

<p>Firstly, note these hooks are <em>not</em> your application shutdown hooks.  They are system shutdown hooks, which are different, and one of them is responsible for ensuring your application shutdown hooks run.  Notice that is <em>run</em>, not <em>start</em>. In other words, it <em>blocks</em>.  One of these shutdown hooks will be a system hook that concurrently starts all the application shutdown hooks (you can trace this code for yourself or in linked answer), then blocks until they all complete using a <code>Thread.join</code> call.  One of these will be your application shutdown hook - which, if it calls <code>System.exit</code>, will be waiting to get the lock on <code>Shutdown.class</code> forever.</p>

<p>Next, the dumb answer:  call <code>Runtime.getRuntime().halt()</code> instead.  I say ""the dumb answer"" because this is probably the slightly lower level thing you were looking to do instead of exit.  If <code>System.exit</code> represents a clean shutdown that failed, then <code>halt</code> is a hard shutdown that will always succeed immediately.</p>

<p>Next, the smarter answer:  probably nothing.  Just let your shutdown hook finish, for the following reasons. Your shutdown hook does not own the shutdown - in particular, there may be other shutdown hooks that need to do their work.  Conversely, I suspect one of the responsibilities of this hook is to force a hard shutdown eventually.  I would recommend creating that as a delayed task right away then letter this hook complete normally.</p>
",djechlin,Community,1382562673,1382562673,1495541400
http://stackoverflow.com/a/1959073/1092725,How to add anchor tag to a URL from text input,11220,Douglas,,1261674557,1552965025,0,https://stackoverflow.com/questions/1959062/how-to-add-anchor-tag-to-a-url-from-text-input,"<p>First, a request. Don't do this before writing the data to the database. Instead, do it before displaying the data to the end-user. This will cut down on all confusion, and will allow you more flexibility in the future.</p>

<p>One example <a href=""http://snipplr.com/view/2371/regex-regular-expression-to-match-a-url/"" rel=""noreferrer"">found online</a> follows:</p>

<pre><code>$text = preg_replace('@(https?://([-\w\.]+)+(:\d+)?(/([-\w/_\.]*(\?\S+)?)?)?)@', '&lt;a href=""$1""&gt;$1&lt;/a&gt;', $text);
</code></pre>

<p>And a much more thorough one from <a href=""http://daringfireball.net/2009/11/liberal_regex_for_matching_urls"" rel=""noreferrer"">daringfireball.net</a>:</p>

<pre><code>/**
 * Replace links in text with html links
 *
 * @param  string $text
 * @return string
 */
function auto_link_text($text)
{
   $pattern  = '#\b(([\w-]+://?|www[.])[^\s()&lt;&gt;]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#';
   $callback = create_function('$matches', '
       $url       = array_shift($matches);
       $url_parts = parse_url($url);

       $text = parse_url($url, PHP_URL_HOST) . parse_url($url, PHP_URL_PATH);
       $text = preg_replace(""/^www./"", """", $text);

       $last = -(strlen(strrchr($text, ""/""))) + 1;
       if ($last &lt; 0) {
           $text = substr($text, 0, $last) . ""&amp;hellip;"";
       }

       return sprintf(\'&lt;a rel=""nowfollow"" href=""%s""&gt;%s&lt;/a&gt;\', $url, $text);
   ');

   return preg_replace_callback($pattern, $callback, $text);
}
</code></pre>
",Sampson,Sampson,1261674853,1389031140,1389031140
http://stackoverflow.com/a/19627954/40956,Rails 3: Get list of routes in namespace programmatically,6047,Richard Jones,,1382816726,1382939500,0,https://stackoverflow.com/questions/19611104/rails-3-get-list-of-routes-in-namespace-programmatically,"<p>In case anybody else wants to test that all routes in a namespace require a logged in user, here's how I accomplished it:</p>

<pre><code>ROUTES = Rails.application.routes.routes.map do |route|
  # Turn route path spec into string; use ""1"" for all params
  path = route.path.spec.to_s.gsub(/\(\.:format\)/, """").gsub(/:[a-zA-Z_]+/, ""1"")
  verb = %W{ GET POST PUT PATCH DELETE }.grep(route.verb).first.downcase.to_sym
  { path: path, verb: verb }
end

test ""admin routes should redirect to admin login page when no admin user is logged in"" do
  admin_routes = ROUTES.select { |route| route[:path].starts_with? ""/admin"" }
  unprotected_routes = []

  admin_routes.each do |route|
    begin
      reset!
      request_via_redirect(route[:verb], route[:path])
      unprotected_routes &lt;&lt; ""#{route[:verb]} #{route[:path]}"" unless path == admin_login_path
    rescue ActiveRecord::RecordNotFound
      unprotected_routes &lt;&lt; ""#{route[:verb]} #{route[:path]}"" unless path == admin_login_path
    rescue AbstractController::ActionNotFound
    end
  end

  assert unprotected_routes.empty?,
    ""The following routes are not secure: \n\t#{unprotected_routes.uniq.join(""\n\t"")}""
  end
end
</code></pre>

<p>I welcome improvements.</p>
",Richard Jones,,1382939500,1382939500,0
http://stackoverflow.com/a/19636328/990120,Simple JSON string escape for C++?,25782,ddinchev,Lightness Races in Orbit,1318328180,1562292288,1318330100,https://stackoverflow.com/questions/7724448/simple-json-string-escape-for-c,"<p>I have written a simple JSON escape and unescaped functions.
The code is public available in <a href=""https://github.com/ATNoG/JSONObject/blob/nativeCpp/StringUtils.cpp"">GitHub</a>.
For anyone interested here is the code:</p>

<pre><code>enum State {ESCAPED, UNESCAPED};

std::string escapeJSON(const std::string&amp; input)
{
    std::string output;
    output.reserve(input.length());

    for (std::string::size_type i = 0; i &lt; input.length(); ++i)
    {
        switch (input[i]) {
            case '""':
                output += ""\\\"""";
                break;
            case '/':
                output += ""\\/"";
                break;
            case '\b':
                output += ""\\b"";
                break;
            case '\f':
                output += ""\\f"";
                break;
            case '\n':
                output += ""\\n"";
                break;
            case '\r':
                output += ""\\r"";
                break;
            case '\t':
                output += ""\\t"";
                break;
            case '\\':
                output += ""\\\\"";
                break;
            default:
                output += input[i];
                break;
        }

    }

    return output;
}

std::string unescapeJSON(const std::string&amp; input)
{
    State s = UNESCAPED;
    std::string output;
    output.reserve(input.length());

    for (std::string::size_type i = 0; i &lt; input.length(); ++i)
    {
        switch(s)
        {
            case ESCAPED:
                {
                    switch(input[i])
                    {
                        case '""':
                            output += '\""';
                            break;
                        case '/':
                            output += '/';
                            break;
                        case 'b':
                            output += '\b';
                            break;
                        case 'f':
                            output += '\f';
                            break;
                        case 'n':
                            output += '\n';
                            break;
                        case 'r':
                            output += '\r';
                            break;
                        case 't':
                            output += '\t';
                            break;
                        case '\\':
                            output += '\\';
                            break;
                        default:
                            output += input[i];
                            break;
                    }

                    s = UNESCAPED;
                    break;
                }
            case UNESCAPED:
                {
                    switch(input[i])
                    {
                        case '\\':
                            s = ESCAPED;
                            break;
                        default:
                            output += input[i];
                            break;
                    }
                }
        }
    }
    return output;
}
</code></pre>
",mariolpantunes,,1382967563,1382967563,0
http://stackoverflow.com/a/19653226/201354,oAuth exception #200 while trying to post to groups after recent Facebook maintenance,5726,Oleg Belousov,,1382514721,1429703399,0,https://stackoverflow.com/questions/19535885/oauth-exception-200-while-trying-to-post-to-groups-after-recent-facebook-mainte,"<p>When the application request the permission, you need choose Public, not Only Me.</p>
",bmate,,1383035624,1383035624,0
http://stackoverflow.com/a/19668740/104380,HTML Double Click Selection Oddity,2637,Aren,,1274377683,1383079550,0,https://stackoverflow.com/questions/2876424/html-double-click-selection-oddity,"<p>I had the same problem. If you put a space before the closing tag of your li that should fix it.</p>

<pre><code>&lt;ul style=""overflow: hidden;""&gt;
    &lt;li style=""float: left;""&gt;&lt;strong&gt;SKU:&lt;/strong&gt;123123 &lt;/li&gt;
    &lt;li style=""float: left;""&gt;&lt;strong&gt;ILC:&lt;/strong&gt;asdasdasdasd &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
",FoosFodder,,1383079550,1383079550,0
http://stackoverflow.com/a/1968345/1440403,How do you detect where two line segments intersect?,395647,KingNestor,Yvette Colomb,1234997238,1552842337,1552842337,https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect,"<p>FWIW, the following function (in C) both detects line intersections and determines the intersection point. It is based on an algorithm in Andre LeMothe's ""<a href=""https://rads.stackoverflow.com/amzn/click/com/0672323699"" rel=""noreferrer"" rel=""nofollow noreferrer"">Tricks of the Windows Game Programming Gurus</a>"". It's not dissimilar to some of the algorithm's in other answers (e.g. Gareth's). LeMothe then uses Cramer's Rule (don't ask me) to solve the equations themselves.</p>

<p>I can attest that it works in my feeble asteroids clone, and seems to deal correctly with the edge cases described in other answers by Elemental, Dan and Wodzu. It's also probably faster than the code posted by KingNestor because it's all multiplication and division, no square roots!</p>

<p>I guess there's some potential for divide by zero in there, though it hasn't been an issue in my case. Easy enough to modify to avoid the crash anyway.</p>

<pre class=""lang-c prettyprint-override""><code>// Returns 1 if the lines intersect, otherwise 0. In addition, if the lines 
// intersect the intersection point may be stored in the floats i_x and i_y.
char get_line_intersection(float p0_x, float p0_y, float p1_x, float p1_y, 
    float p2_x, float p2_y, float p3_x, float p3_y, float *i_x, float *i_y)
{
    float s1_x, s1_y, s2_x, s2_y;
    s1_x = p1_x - p0_x;     s1_y = p1_y - p0_y;
    s2_x = p3_x - p2_x;     s2_y = p3_y - p2_y;

    float s, t;
    s = (-s1_y * (p0_x - p2_x) + s1_x * (p0_y - p2_y)) / (-s2_x * s1_y + s1_x * s2_y);
    t = ( s2_x * (p0_y - p2_y) - s2_y * (p0_x - p2_x)) / (-s2_x * s1_y + s1_x * s2_y);

    if (s &gt;= 0 &amp;&amp; s &lt;= 1 &amp;&amp; t &gt;= 0 &amp;&amp; t &lt;= 1)
    {
        // Collision detected
        if (i_x != NULL)
            *i_x = p0_x + (t * s1_x);
        if (i_y != NULL)
            *i_y = p0_y + (t * s1_y);
        return 1;
    }

    return 0; // No collision
}
</code></pre>

<p>BTW, I must say that in LeMothe's book, though he apparently gets the algorithm right, the concrete example he shows plugs in the wrong numbers and does calculations wrong. For example:</p>

<blockquote>
  <p>(4 * (4 - 1) + 12 * (7 - 1)) / (17 * 4 + 12 * 10) </p>
  
  <p>= 844/0.88 </p>
  
  <p>= 0.44</p>
</blockquote>

<p>That confused me for <em>hours</em>. :(</p>
",Gavin,smac89,1261984605,1394664349,1394664349
http://stackoverflow.com/a/196991/24946,Convert string to title case with JavaScript,323146,MDCore,Michael,1223885102,1561105825,1533164128,https://stackoverflow.com/questions/196972/convert-string-to-title-case-with-javascript,"<p>Try  this:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>    function toTitleCase(str) {
        return str.replace(
            /\w\S*/g,
            function(txt) {
                return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
            }
        );
    }</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;form&gt;
Input:
&lt;br /&gt;&lt;textarea name=""input"" onchange=""form.output.value=toTitleCase(this.value)""  onkeyup=""form.output.value=toTitleCase(this.value)""&gt;&lt;/textarea&gt;
&lt;br /&gt;Output:
&lt;br /&gt;&lt;textarea name=""output"" readonly onclick=""select(this)""&gt;&lt;/textarea&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
</p>
",Greg Dean,LWC,1223885906,1538695870,1538695870
http://stackoverflow.com/a/1971451/731166,How to mimic Stack Overflow Auto-Link Behavior,12968,Alix Axel,STLDev,1261094681,1519360159,1519360159,https://stackoverflow.com/questions/1925455/how-to-mimic-stack-overflow-auto-link-behavior,"<p>This is based on the same <a href=""http://daringfireball.net/2009/11/liberal_regex_for_matching_urls"" rel=""noreferrer"">daringfireball.net regular expression</a>, but adds a bit more logic than Eric Coleman's example, as well as configuration for maximum URL depth (SO seems to be 50), maximum path depth when URL is truncated (SO seems to be 2), and ellipsis character (<code>&amp;hellip;</code>).</p>

<p>As far as I know this replicates all of the SO URL rewriting functionality, at least as far as what was discussed so far in the comments and responses here.</p>

<pre><code>function auto_link_text($text) {
    $pattern  = '#\b(([\w-]+://?|www[.])[^\s()&lt;&gt;]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#';
    return preg_replace_callback($pattern, 'auto_link_text_callback', $text);
}

function auto_link_text_callback($matches) {
    $max_url_length = 50;
    $max_depth_if_over_length = 2;
    $ellipsis = '&amp;hellip;';

    $url_full = $matches[0];
    $url_short = '';

    if (strlen($url_full) &gt; $max_url_length) {
        $parts = parse_url($url_full);
        $url_short = $parts['scheme'] . '://' . preg_replace('/^www\./', '', $parts['host']) . '/';

        $path_components = explode('/', trim($parts['path'], '/'));
        foreach ($path_components as $dir) {
            $url_string_components[] = $dir . '/';
        }

        if (!empty($parts['query'])) {
            $url_string_components[] = '?' . $parts['query'];
        }

        if (!empty($parts['fragment'])) {
            $url_string_components[] = '#' . $parts['fragment'];
        }

        for ($k = 0; $k &lt; count($url_string_components); $k++) {
            $curr_component = $url_string_components[$k];
            if ($k &gt;= $max_depth_if_over_length || strlen($url_short) + strlen($curr_component) &gt; $max_url_length) {
                if ($k == 0 &amp;&amp; strlen($url_short) &lt; $max_url_length) {
                    // Always show a portion of first directory
                    $url_short .= substr($curr_component, 0, $max_url_length - strlen($url_short));
                }
                $url_short .= $ellipsis;
                break;
            }
            $url_short .= $curr_component;
        }

    } else {
        $url_short = $url_full;
    }

    return ""&lt;a rel=\""nofollow\"" href=\""$url_full\""&gt;$url_short&lt;/a&gt;"";
}
</code></pre>

<p>Sample Input:</p>

<pre><code>This is my text.  I wonder if you know about asking questions on StackOverflow:
Check This out http://www.stackoverflow.com/questions/1925455/how-to-mimic-stackoverflow-auto-link-behavior

Also, base_convert php function?
http://pt.php.net/manual/en/function.base-convert.php#52450

http://pt.php.net/manual/en/function.base-convert.php?wtf=hehe#52450

http://a.b/c/d/e/f/test

and http://a.b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/z/y/w/z/test
</code></pre>

<p>Sample Output:</p>

<pre><code>This is my text.  I wonder if you know about asking questions on StackOverflow:
Check This out &lt;a rel=""nofollow"" href=""http://www.stackoverflow.com/questions/1925455/how-to-mimic-stackoverflow-auto-link-behavior""&gt;http://stackoverflow.com/questions/1925455/&amp;hellip;&lt;/a&gt; 

Also, base_convert php function?
&lt;a rel=""nofollow"" href=""http://pt.php.net/manual/en/function.base-convert.php#52450""&gt;http://pt.php.net/manual/en/&amp;hellip;&lt;/a&gt; 

&lt;a rel=""nofollow"" href=""http://pt.php.net/manual/en/function.base-convert.php?wtf=hehe#52450""&gt;http://pt.php.net/manual/en/&amp;hellip;&lt;/a&gt; 

&lt;a rel=""nofollow"" href=""http://a.b/c/d/e/f/test""&gt;http://a.b/c/d/e/f/test&lt;/a&gt; 

and &lt;a rel=""nofollow"" href=""http://a.b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/z/y/w/z/test""&gt;http://a.b/c/d/&amp;hellip;&lt;/a&gt;
</code></pre>
",pix0r,pix0r,1262032949,1262033630,1262033630
http://stackoverflow.com/a/19739855/1659732,Handling &quot;clicked&quot; accelerator on a Gtk::ToggleToolButton (gtkmm),595,Kazade,,1383046167,1383377267,0,https://stackoverflow.com/questions/19657017/handling-clicked-accelerator-on-a-gtktoggletoolbutton-gtkmm,"<p>Mystery solved!</p>

<p>Thanks to @conscioususer on Twitter: <a href=""https://twitter.com/conscioususer/statuses/396397287288889344"" rel=""nofollow"">https://twitter.com/conscioususer/statuses/396397287288889344</a></p>

<p>It turns out that Gtk::ToggleToolButton is in fact a ToolButton with a child ToggleButton. The way to make it work is to connect the accelerator to the child widget (e.g. <code>toggletoolbutton-&gt;get_child()-&gt;add_accelerator(""clicked"", ...)</code>) and then everything works as expected!</p>
",Kazade,,1383377267,1383377267,0
http://stackoverflow.com/a/19749730/72448,Getting &quot;Indirect modification of overloaded property has no effect&quot; notice,45947,Nikolay Dutchuk,,1353087519,1433777237,0,https://stackoverflow.com/questions/13421661/getting-indirect-modification-of-overloaded-property-has-no-effect-notice,"<p>I know that this is now quite an old topic, but it is something that I encountered myself for the first time today, and I thought it might be helpful to others if I expanded upon what was said above with my own findings.</p>

<p>As far as I can tell, this is not a bug in PHP. In fact, I suspect the PHP interpreter has to make a special effort to detect and report this issue so specifically. It relates to the way in which you are accessing the ""foo"" variable.</p>

<pre><code>Registry::getInstance()-&gt;foo
</code></pre>

<p>When PHP sees this part of your statements, the first thing that it does is check to see if the object instance has a publicly accessible variable called ""foo"". In this case, it doesn't, so the next step is to call one of the magic methods, either __set() (if you are attempting to replace the current value of ""foo""), or __get() (if you are trying to access that value).</p>

<pre><code>Registry::getInstance()-&gt;foo   = array(1, 2, 3);
</code></pre>

<p>In this statement, you are attempting to <em>replace</em> the value of ""foo"" with array(1, 2, 3), so PHP calls your __set() method with $key = ""foo"" and $value = array(1, 2, 3), and everything works fine.</p>

<pre><code>Registry::getInstance()-&gt;foo[] = 4;
</code></pre>

<p>However, in this statement, you are <em>retrieving</em> the value of ""foo"" so that you can modify it (in this case by treating it as an array and appending a new element). The code implies that you want to modify the value of ""foo"" held by the instance, but in reality you are <em>actually</em> modifying a <em>temporary copy</em> of foo returned by __get(), and so PHP issues the warning (a similar situation arises if you pass Registry::getInstance()->foo to a function by reference instead of by value).</p>

<p>You have a few options for working around this issue.</p>

<p><strong>Method 1</strong></p>

<p>You could write the value of ""foo"" into a variable, modify that variable, and then write it back, i.e.</p>

<pre><code>$var = Registry::getInstance()-&gt;foo;
$var[] = 4;
Registry::getInstance()-&gt;foo = $var;
</code></pre>

<p>Functional, but horribly verbose and so not recommended.</p>

<p><strong>Method 2</strong></p>

<p>Have your __get() function return by reference, as suggested by cillosis (there is no need to have your __set() function return by reference, since it is not supposed to return a value at all). In this case you need to be aware that PHP can only return references to variables that already exist, and may issue notices or behave strangely if this constraint is violated. If we look at cillosis' __get() function adapted for your class (if you do choose to go down this route then, for reasons that are explained below, stick with this implementation of __get() and religiously do an existence check before any read from your registry):</p>

<pre><code>function &amp;__get( $index )
{
    if( array_key_exists( $index, $this-&gt;_registry ) )
    {
        return $this-&gt;_registry[ $index ];
    }

    return;
}
</code></pre>

<p>This is fine provided your application never tries to get a value that doesn't yet exist in your registry, but the moment you do, you will hit the ""return;"" statement and get an ""Only variable references should be returned by reference"" warning, and you can't fix this by creating a fallback variable and returning that instead, since that will give you the ""Indirect modification of overloaded property has no effect"" warning again for the same reasons as before. If your program can't have any warnings (and warnings are a Bad Thing because they can pollute your error log and affect the portability of your code to other versions/configurations of PHP), then your __get() method would have to create entries that do not exist before returning them, i.e.</p>

<pre><code>function &amp;__get( $index )
{
    if (!array_key_exists( $index, $this-&gt;_registry ))
    {
        // Use whatever default value is appropriate here
        $this-&gt;_registry[ $index ] = null;
    }

    return $this-&gt;_registry[ $index ];
}
</code></pre>

<p>Incidentally, PHP itself seems to do something very similar to this with its arrays, that is:</p>

<pre><code>$var1 = array();
$var2 =&amp; $var1['foo'];
var_dump($var1);
</code></pre>

<p>The above code will (on at least some versions of PHP) output something like ""array(1) { [""foo""]=> &amp;NULL }"", meaning the ""$var2 =&amp; $var1['foo'];"" statement might affect <em>both sides</em> of the expression. However, I think that it is fundamentally bad to allow the contents of a variable to be changed by a <em>read</em> operation, because it can lead to some seriously nasty bugs (and hence I feel that the above array behaviour <em>is</em> a PHP bug).</p>

<p>For example, let us suppose that you're only ever going to store objects in your registry, and you modify your __set() function to raise an exception if $value is not an object. Any object stored in the registry must also conform to a special ""RegistryEntry"" interface, which declares that the ""someMethod()"" method must be defined. The documentation for your registry class thus states that a caller can attempt to access any value within the registry, and the result will either be retrieval of a valid ""RegistryEntry"" object, or null if that object does not exist. Let's also suppose that you further modify your registry to implement the <a href=""http://us2.php.net/manual/en/class.iterator.php"" rel=""noreferrer"">Iterator</a> interface so that people can loop through all registry entries using a foreach construct. Now imagine the following code:</p>

<pre><code>function doSomethingToRegistryEntry($entryName)
{
    $entry = Registry::getInstance()-&gt;$entryName;
    if ($entry !== null)
    {
        // Do something
    }
}

...

foreach (Registry::getInstance() as $key =&gt; $entry)
{
    $entry-&gt;someMethod();
}
</code></pre>

<p>The rational here is that the doSomethingToRegistryEntry() function knows that it's not safe to read arbitrary entries from the registry, since they may or may not exist, so it does a check for the ""null"" case and behaves accordingly. All well and good. By contrast, the loop ""knows"" that any <em>write</em> operation to the registry would have failed unless the value written was an object that conforms to the ""RegistryEntry"" interface, so it doesn't bother to check to make sure that $entry is indeed such an object to save unnecessary overhead. Now let's suppose that there's a very rare circumstance under which this loop is reached sometime after an attempt is made to read any registry entry that does not yet exist. Bang!</p>

<p>In the scenario described above, the loop would generate a <em>fatal error</em> ""Call to a member function someMethod() on a non-object"" (and if warnings are Bad Things, fatal errors are Catastrophes). Finding out that this is actually being caused by a seemingly-innocuous <em>read</em> operation somewhere else in the program that was added by last month's update is not going to be straightforward.</p>

<p>Personally, I would avoid this method as well because whilst it can appear to behave well most of the time, it can really bite you hard if provoked. Happily, there is a <em>much</em> simpler solution available.</p>

<p><strong>Method 3</strong></p>

<p>Just don't define __get(), __set(), or __isset()! Then, PHP will create properties for you at runtime and make them publicly accessible, so that you can simply access them directly whenever you need to. No need to worry about references at all, and if you want your registry to be iterable, you can still do this by implementing the <a href=""http://us2.php.net/manual/en/class.iteratoraggregate.php"" rel=""noreferrer"">IteratorAggregate</a> interface. Given the example you gave in your original question, I believe that this is by far your best option.</p>

<pre><code>final class Registry implements IteratorAggregate
{
    private static $_instance;

    private function __construct() { }

    public static function getInstance()
    {
        if (self::$_instance == null) self::$_instance = new self();
        return self::$_instance;
    }

    public function getIterator()
    {
        // The ArrayIterator() class is provided by PHP
        return new ArrayIterator($this);
    }
}
</code></pre>

<p>The time to implement __get() and __isset() are when you want to give callers read-only access to certain private/protected properties, in which case you don't want to be returning anything by reference.</p>

<p>I hope that this helps. :)</p>
",indigo866,indigo866,1383451692,1383454142,1383454142
http://stackoverflow.com/a/19778845/1489738,Use Python to find out if a timezone currently in daylight savings time,21963,Joey Mason,Joey Mason,1383590381,1414438455,1383602834,https://stackoverflow.com/questions/19774709/use-python-to-find-out-if-a-timezone-currently-in-daylight-savings-time,"<pre><code>import pytz
from datetime import datetime, timedelta

def is_dst(zonename):
    tz = pytz.timezone(zonename)
    now = pytz.utc.localize(datetime.utcnow())
    return now.astimezone(tz).dst() != timedelta(0)
</code></pre>

<p>Usage:</p>

<pre><code>&gt;&gt;&gt; is_dst(""America/Los_Angeles"")
False

&gt;&gt;&gt; is_dst(""America/Sao_Paulo"")
True
</code></pre>
",Matt Johnson,Matt Johnson,1383605663,1383605983,1383605983
http://stackoverflow.com/a/1980156/3162383,BOOST_STATIC_ASSERT without boost,8771,Konstantin,Gregory Pakosz,1262176857,1385305807,1262181916,https://stackoverflow.com/questions/1980012/boost-static-assert-without-boost,"<p>Here is my own implementation of static assertions extracted from my code base: <a href=""http://pempek.net/articles/2013/11/23/boost-static-assert-without-boost/"" rel=""noreferrer""><code>Pre-C++11 Static Assertions Without Boost</code></a>.</p>

<p>Usage:</p>

<p><code>STATIC_ASSERT(expression, message);</code></p>

<p>When the static assertion test fails, a compiler error message that somehow contains the <code>STATIC_ASSERTION_FAILED_AT_LINE_xxx_message</code> is generated.</p>

<p><code>message</code> has to be a valid C++ identifier, like <code>no_you_cant_have_a_pony</code> which will produce a compiler error containing:</p>

<p><code>STATIC_ASSERTION_FAILED_AT_LINE_1337_no_you_cant_have_a_pony</code> :)</p>

<pre><code>#define CONCATENATE(arg1, arg2)   CONCATENATE1(arg1, arg2)
#define CONCATENATE1(arg1, arg2)  CONCATENATE2(arg1, arg2)
#define CONCATENATE2(arg1, arg2)  arg1##arg2

/**
 * Usage:
 *
 * &lt;code&gt;STATIC_ASSERT(expression, message)&lt;/code&gt;
 *
 * When the static assertion test fails, a compiler error message that somehow
 * contains the ""STATIC_ASSERTION_FAILED_AT_LINE_xxx_message"" is generated.
 *
 * /!\ message has to be a valid C++ identifier, that is to say it must not
 * contain space characters, cannot start with a digit, etc.
 *
 * STATIC_ASSERT(true, this_message_will_never_be_displayed);
 */

#define STATIC_ASSERT(expression, message)\
  struct CONCATENATE(__static_assertion_at_line_, __LINE__)\
  {\
    implementation::StaticAssertion&lt;static_cast&lt;bool&gt;((expression))&gt; CONCATENATE(CONCATENATE(CONCATENATE(STATIC_ASSERTION_FAILED_AT_LINE_, __LINE__), _), message);\
  };\
  typedef implementation::StaticAssertionTest&lt;sizeof(CONCATENATE(__static_assertion_at_line_, __LINE__))&gt; CONCATENATE(__static_assertion_test_at_line_, __LINE__)

  // note that we wrap the non existing type inside a struct to avoid warning
  // messages about unused variables when static assertions are used at function
  // scope
  // the use of sizeof makes sure the assertion error is not ignored by SFINAE

namespace implementation {

  template &lt;bool&gt;
  struct StaticAssertion;

  template &lt;&gt;
  struct StaticAssertion&lt;true&gt;
  {
  }; // StaticAssertion&lt;true&gt;

  template&lt;int i&gt;
  struct StaticAssertionTest
  {
  }; // StaticAssertionTest&lt;int&gt;

} // namespace implementation


STATIC_ASSERT(true, ok);
STATIC_ASSERT(false, ko);

int main()
{
  return 0;
}
</code></pre>
",Gregory Pakosz,Gregory Pakosz,1262179021,1385305807,1385305807
http://stackoverflow.com/a/19828753/2020363,Matplotlib - Drawing a smooth circle in a polar plot,6067,limbonic,,1383797006,1383803378,0,https://stackoverflow.com/questions/19827792/matplotlib-drawing-a-smooth-circle-in-a-polar-plot,"<p>You can set <code>transform</code> argument of the <code>Circle</code>:</p>

<pre><code>%matplotlib inline
import pylab as pl
import numpy as np

N = 100
theta = np.random.rand(N)*np.pi*2
r = np.cos(theta*2) + np.random.randn(N)*0.1

ax = pl.subplot(111, polar=True)
ax.scatter(theta, r)
circle = pl.Circle((0.5, 0.3), 0.2, transform=ax.transData._b, color=""red"", alpha=0.4)
ax.add_artist(circle)
</code></pre>

<p>output:</p>

<p><img src=""https://i.stack.imgur.com/3UoP7.png"" alt=""enter image description here""></p>

<p>or <code>transform=ax.transProjectionAffine + ax.transAxes</code> if you don't like using the private attribute. </p>
",HYRY,HYRY,1383802813,1383803378,1383803378
http://stackoverflow.com/a/19865396/1139841,Is there a portable way to get the current username in Python?,314718,Jacob Gabrielson,Jacob Gabrielson,1241821220,1557766035,1292524831,https://stackoverflow.com/questions/842059/is-there-a-portable-way-to-get-the-current-username-in-python,"<p>Combined <code>pwd</code> and <code>getpass</code> approach, based on other answers:</p>

<pre><code>try:
  import pwd
except ImportError:
  import getpass
  pwd = None

def current_user():
  if pwd:
    return pwd.getpwuid(os.geteuid()).pw_name
  else:
    return getpass.getuser()
</code></pre>
",anatoly techtonik,,1383932849,1383932849,0
http://stackoverflow.com/a/19868919/312944,Apache Avro: map uses CharSequence as key,6910,Mellon,Andrew,1383316398,1462571538,1412285218,https://stackoverflow.com/questions/19728853/apache-avro-map-uses-charsequence-as-key,"<p><a href=""https://issues.apache.org/jira/i#browse/AVRO-803"" rel=""noreferrer"">This JIRA discussion</a> is relevant. The main point of CharSequence still being used is <strong>backwards-compatability</strong>. </p>

<p>And like Charles Forsythe pointed out, there has been added a workaround for when String is necessary, by setting the string property in the schema.</p>

<pre><code> { ""type"": ""string"", ""avro.java.string"": ""String"" }
</code></pre>

<p>The default type here is their own Utf8 class. In addition to manual specification and <a href=""http://apache-avro.679487.n3.nabble.com/ANNOUNCE-Avro-Release-1-6-0-td3472313.html"" rel=""noreferrer"">the pom.xml setting</a>, there is even an avro-tools compile option for it, the <code>-string</code> option:</p>

<pre><code>java -jar avro-tools.1.7.5.jar compile -string schema /path/to/schema .
</code></pre>
",Alex A.,Alex A.,1383946573,1383948367,1383948367
http://stackoverflow.com/a/19883965/1014689,What is the list of possible values for navigator.platform as of today?,45810,thomasstephn,Stijn,1384012538,1432041423,1399509192,https://stackoverflow.com/questions/19877924/what-is-the-list-of-possible-values-for-navigator-platform-as-of-today,"<p><strong>Disclaimer:</strong> please note this property is sent by the browser and can thus be faked, just like user agent strings. Never rely on the <code>navigator</code> object to be completely accurate.</p>

<p><br /></p>

<h2>The definition</h2>

<p>As far as I know there isn't a single public list of all possible <code>navigator.platform</code> values, even though the property has been around for quite a bit. To make things worse, the property's definition changed throughout the years. It used to be:</p>

<blockquote>
  <p><code>navigator.platform</code> indicates the machine type for which the browser was compiled.</p>
</blockquote>

<p>This basically means the property can return <code>Win16</code> when the user is running a browser compiled for 16-bit, even though the user is on a 32-bit or 64-bit Windows machine.</p>

<p>Of course W3Schools lists the old definition (I'm not even gonna link to them). <a href=""http://www.w3.org/TR/html5/webappapis.html#dom-navigator-platform"">W3</a> and <a href=""http://mdn.beonex.com/en/DOM/window.navigator.platform.html"">MDN</a> have agreed on a different definition though:</p>

<blockquote>
  <p><code>navigator.platform</code> represents the platform on which the browser is executing.</p>
</blockquote>

<p>Still, this definition is a bit vague. A decade ago a 'platform' would either be a CPU architecture or an operating system. In recent years handheld and media devices can be platforms too.</p>

<p><br /></p>

<h2>The interpretation</h2>

<p>As with everything on the web, our fate is in the hands of the mighty browser vendors. In this case, all the major browsers (IE, Safari, Firefox and Chrome) agree that my 64-bit Windows machine is a <code>Win32</code> platform. This means they're sticking to the old definition as far as Windows goes, because none of them are compiled for 64-bit thus far. Look on the bright side though: at least they all agree on something for once.</p>

<p>It seems like we're a bit luckier when it comes to handheld and media devices. As you've already stated in your question, the iPhone, iPod and iPad each got a unique value, even though they're all running the same operating system. All of Nintendo's and Sony's devices are returning unique values too. So only now <code>navigator.platform</code> is starting to look interesting.</p>

<p>But then Opera Mini for iPhone comes along, messing things up again. Opera Mini actually returns a code engine version number, which is a completely different interpretation of <code>platform</code> than anything we've come across so far. So now we're back where we started and we start to understand why there's so little information on this subject out there.</p>

<p>Even though the interpretations vary and I don't have a complete answer for you, I did feel like I should add my 2 cents for anyone else out there researching the <code>navigator.platform</code> property.</p>

<p><br /></p>

<h2>The list</h2>

<p>Below is a (definitely non-definite) list of the values I know of that I could verify with multiple sources. Because of the vague definition, I'm not too sure what the best way to order these is. For now I divided them into a few categories based on operating system or device brand and listed additional information and release dates where applicable.</p>

<p><strong>Android</strong></p>

<p>It's really hard to test for Android devices. Android devices will return <code>Android</code> just as often as some version of Linux. For example on a Nexus 5 phone, both the Android browser and Chrome return <code>Linux armv7l</code>. In rare cases Android devices can even return <code>null</code> (instead of <code>undefined</code>).</p>

<ul>
<li><code>Android</code> (2008)</li>
<li><code>Linux</code>: see notes above</li>
<li><code>null</code></li>
</ul>

<p><strong>Apple</strong></p>

<p>As far as iOS goes: Safari, Chrome and Mercury agree, but Opera messes things up.</p>

<ul>
<li><code>iPhone</code> (2007)</li>
<li><code>iPod</code> (2007)</li>
<li><code>iPad</code> (2010)</li>
<li><code>iPhone Simulator</code>: simulator shipped with Xcode</li>
<li><code>iPod Simulator</code>: simulator shipped with Xcode</li>
<li><code>iPad Simulator</code>: simulator shipped with Xcode</li>
<li><code>Macintosh</code></li>
<li><code>MacIntel</code>: Intel processor (2005)</li>
<li><code>MacPPC</code>: PowerPC processor</li>
<li><code>Mac68K</code>: 68000 processor</li>
<li><code>Pike v7.6 release 92</code>: Opera Mini 5 on any iPhone (2009)</li>
<li><code>Pike v7.8 release 517</code>: Opera Mini 7 on any iPhone (2012)</li>
</ul>

<p><strong>BlackBerry</strong></p>

<ul>
<li><code>BlackBerry</code> (2003)</li>
</ul>

<p><strong>FreeBSD</strong></p>

<ul>
<li><code>FreeBSD</code></li>
<li><code>FreeBSD i386</code>: x86 (IA-32) processor</li>
<li><code>FreeBSD amd64</code>: AMD x86-64 processor</li>
</ul>

<p><strong>Linux</strong></p>

<p>Seriously unreliable because so many platforms are built on this. For example, Chrome on ChromeOS or Linux x86-64 both return <code>Linux i686</code> as that's what they were compiled for.</p>

<p>Note Linux ARM lists architecture flags, e.g. <code>armv5tej</code> would denote a v5 ARM architecture with Thumb support ('T'), a DSP instruction set ('E'), and Jazelle support ('J').</p>

<ul>
<li><code>Linux</code></li>
<li><code>Linux aarch64</code></li>
<li><code>Linux armv5tejl</code></li>
<li><code>Linux armv6l</code></li>
<li><code>Linux armv7l</code></li>
<li><code>Linux i686</code></li>
<li><code>Linux i686 on x86_64</code></li>
<li><code>Linux i686 X11</code>: based on X11 Window System</li>
<li><code>Linux MSM8960_v3.2.1.1_N_R069_Rev:18</code>: Sony Xperia V</li>
<li><code>Linux ppc64</code></li>
<li><code>Linux x86_64</code></li>
<li><code>Linux x86_64 X11</code>: based on X11 Window System</li>
</ul>

<p><strong>Microsoft</strong></p>

<p>Even on a 64-bit Windows 8 they all stick to <code>Win32</code>.</p>

<ul>
<li><code>OS/2</code> (1994)</li>
<li><code>Pocket PC</code></li>
<li><code>Windows</code></li>
<li><code>Win16</code>: Windows 3.1x (1992)</li>
<li><code>Win32</code>: Windows 95 and up</li>
<li><code>WinCE</code></li>
</ul>

<p><strong>Mozilla</strong></p>

<p>An empty string is returned on Firefox OS. See <a href=""https://bugzilla.mozilla.org/show_bug.cgi?id=801614"">this bug report</a>.</p>

<p><strong>Nintendo</strong></p>

<ul>
<li><code>New Nintendo 3DS</code> (2014)</li>
<li><code>Nintendo DSi</code> (2008)</li>
<li><code>Nintendo 3DS</code> (2011)</li>
<li><code>Nintendo Wii</code> (2006)</li>
<li><code>Nintendo WiiU</code> (2012)</li>
</ul>

<p><strong>OpenBSD</strong></p>

<ul>
<li><code>OpenBSD amd64</code></li>
</ul>

<p><strong>Symbian / S40</strong></p>

<ul>
<li><code>Nokia_Series_40</code> (1999)</li>
<li><code>S60</code> (2002)</li>
<li><code>Symbian</code>: Opera on Symbian</li>
<li><code>Symbian OS</code></li>
</ul>

<p><strong>Palm</strong></p>

<ul>
<li><code>PalmOS</code> (1996)</li>
<li><code>webOS</code> (2009)</li>
</ul>

<p><strong>Solaris</strong></p>

<ul>
<li><code>SunOS</code></li>
<li><code>SunOS i86pc</code></li>
<li><code>SunOS sun4u</code>: SPARC processor</li>
</ul>

<p><strong>Sony</strong></p>

<ul>
<li><code>PLAYSTATION 3</code> (2006)</li>
<li><code>PlayStation 4</code> (2013)</li>
<li><code>PSP</code>: PlayStation Portable (2004)</li>
</ul>

<p><strong>Various</strong></p>

<ul>
<li><code>HP-UX</code>: Hewlett-Packard UniX</li>
<li><code>masking-agent</code>: value changes to this when using Masking Agent for Firefox</li>
<li><code>WebTV OS</code></li>
<li><code>X11</code>: X11 Window System</li>
</ul>

<p><em>Have a device that's not on this list? Please leave a comment listing your device's properties and its <code>navigator.platform</code> value (feel free to use <a href=""http://jsfiddle.net/f6eNr/"">this JSFiddle</a> to find the value).</em></p>

<p>Hope this helps.</p>
",Robbert,Robbert,1384036632,1426624975,1426624975
http://stackoverflow.com/a/19883965/292185,What is the list of possible values for navigator.platform as of today?,45810,thomasstephn,Stijn,1384012538,1432041423,1399509192,https://stackoverflow.com/questions/19877924/what-is-the-list-of-possible-values-for-navigator-platform-as-of-today,"<p><strong>Disclaimer:</strong> please note this property is sent by the browser and can thus be faked, just like user agent strings. Never rely on the <code>navigator</code> object to be completely accurate.</p>

<p><br /></p>

<h2>The definition</h2>

<p>As far as I know there isn't a single public list of all possible <code>navigator.platform</code> values, even though the property has been around for quite a bit. To make things worse, the property's definition changed throughout the years. It used to be:</p>

<blockquote>
  <p><code>navigator.platform</code> indicates the machine type for which the browser was compiled.</p>
</blockquote>

<p>This basically means the property can return <code>Win16</code> when the user is running a browser compiled for 16-bit, even though the user is on a 32-bit or 64-bit Windows machine.</p>

<p>Of course W3Schools lists the old definition (I'm not even gonna link to them). <a href=""http://www.w3.org/TR/html5/webappapis.html#dom-navigator-platform"">W3</a> and <a href=""http://mdn.beonex.com/en/DOM/window.navigator.platform.html"">MDN</a> have agreed on a different definition though:</p>

<blockquote>
  <p><code>navigator.platform</code> represents the platform on which the browser is executing.</p>
</blockquote>

<p>Still, this definition is a bit vague. A decade ago a 'platform' would either be a CPU architecture or an operating system. In recent years handheld and media devices can be platforms too.</p>

<p><br /></p>

<h2>The interpretation</h2>

<p>As with everything on the web, our fate is in the hands of the mighty browser vendors. In this case, all the major browsers (IE, Safari, Firefox and Chrome) agree that my 64-bit Windows machine is a <code>Win32</code> platform. This means they're sticking to the old definition as far as Windows goes, because none of them are compiled for 64-bit thus far. Look on the bright side though: at least they all agree on something for once.</p>

<p>It seems like we're a bit luckier when it comes to handheld and media devices. As you've already stated in your question, the iPhone, iPod and iPad each got a unique value, even though they're all running the same operating system. All of Nintendo's and Sony's devices are returning unique values too. So only now <code>navigator.platform</code> is starting to look interesting.</p>

<p>But then Opera Mini for iPhone comes along, messing things up again. Opera Mini actually returns a code engine version number, which is a completely different interpretation of <code>platform</code> than anything we've come across so far. So now we're back where we started and we start to understand why there's so little information on this subject out there.</p>

<p>Even though the interpretations vary and I don't have a complete answer for you, I did feel like I should add my 2 cents for anyone else out there researching the <code>navigator.platform</code> property.</p>

<p><br /></p>

<h2>The list</h2>

<p>Below is a (definitely non-definite) list of the values I know of that I could verify with multiple sources. Because of the vague definition, I'm not too sure what the best way to order these is. For now I divided them into a few categories based on operating system or device brand and listed additional information and release dates where applicable.</p>

<p><strong>Android</strong></p>

<p>It's really hard to test for Android devices. Android devices will return <code>Android</code> just as often as some version of Linux. For example on a Nexus 5 phone, both the Android browser and Chrome return <code>Linux armv7l</code>. In rare cases Android devices can even return <code>null</code> (instead of <code>undefined</code>).</p>

<ul>
<li><code>Android</code> (2008)</li>
<li><code>Linux</code>: see notes above</li>
<li><code>null</code></li>
</ul>

<p><strong>Apple</strong></p>

<p>As far as iOS goes: Safari, Chrome and Mercury agree, but Opera messes things up.</p>

<ul>
<li><code>iPhone</code> (2007)</li>
<li><code>iPod</code> (2007)</li>
<li><code>iPad</code> (2010)</li>
<li><code>iPhone Simulator</code>: simulator shipped with Xcode</li>
<li><code>iPod Simulator</code>: simulator shipped with Xcode</li>
<li><code>iPad Simulator</code>: simulator shipped with Xcode</li>
<li><code>Macintosh</code></li>
<li><code>MacIntel</code>: Intel processor (2005)</li>
<li><code>MacPPC</code>: PowerPC processor</li>
<li><code>Mac68K</code>: 68000 processor</li>
<li><code>Pike v7.6 release 92</code>: Opera Mini 5 on any iPhone (2009)</li>
<li><code>Pike v7.8 release 517</code>: Opera Mini 7 on any iPhone (2012)</li>
</ul>

<p><strong>BlackBerry</strong></p>

<ul>
<li><code>BlackBerry</code> (2003)</li>
</ul>

<p><strong>FreeBSD</strong></p>

<ul>
<li><code>FreeBSD</code></li>
<li><code>FreeBSD i386</code>: x86 (IA-32) processor</li>
<li><code>FreeBSD amd64</code>: AMD x86-64 processor</li>
</ul>

<p><strong>Linux</strong></p>

<p>Seriously unreliable because so many platforms are built on this. For example, Chrome on ChromeOS or Linux x86-64 both return <code>Linux i686</code> as that's what they were compiled for.</p>

<p>Note Linux ARM lists architecture flags, e.g. <code>armv5tej</code> would denote a v5 ARM architecture with Thumb support ('T'), a DSP instruction set ('E'), and Jazelle support ('J').</p>

<ul>
<li><code>Linux</code></li>
<li><code>Linux aarch64</code></li>
<li><code>Linux armv5tejl</code></li>
<li><code>Linux armv6l</code></li>
<li><code>Linux armv7l</code></li>
<li><code>Linux i686</code></li>
<li><code>Linux i686 on x86_64</code></li>
<li><code>Linux i686 X11</code>: based on X11 Window System</li>
<li><code>Linux MSM8960_v3.2.1.1_N_R069_Rev:18</code>: Sony Xperia V</li>
<li><code>Linux ppc64</code></li>
<li><code>Linux x86_64</code></li>
<li><code>Linux x86_64 X11</code>: based on X11 Window System</li>
</ul>

<p><strong>Microsoft</strong></p>

<p>Even on a 64-bit Windows 8 they all stick to <code>Win32</code>.</p>

<ul>
<li><code>OS/2</code> (1994)</li>
<li><code>Pocket PC</code></li>
<li><code>Windows</code></li>
<li><code>Win16</code>: Windows 3.1x (1992)</li>
<li><code>Win32</code>: Windows 95 and up</li>
<li><code>WinCE</code></li>
</ul>

<p><strong>Mozilla</strong></p>

<p>An empty string is returned on Firefox OS. See <a href=""https://bugzilla.mozilla.org/show_bug.cgi?id=801614"">this bug report</a>.</p>

<p><strong>Nintendo</strong></p>

<ul>
<li><code>New Nintendo 3DS</code> (2014)</li>
<li><code>Nintendo DSi</code> (2008)</li>
<li><code>Nintendo 3DS</code> (2011)</li>
<li><code>Nintendo Wii</code> (2006)</li>
<li><code>Nintendo WiiU</code> (2012)</li>
</ul>

<p><strong>OpenBSD</strong></p>

<ul>
<li><code>OpenBSD amd64</code></li>
</ul>

<p><strong>Symbian / S40</strong></p>

<ul>
<li><code>Nokia_Series_40</code> (1999)</li>
<li><code>S60</code> (2002)</li>
<li><code>Symbian</code>: Opera on Symbian</li>
<li><code>Symbian OS</code></li>
</ul>

<p><strong>Palm</strong></p>

<ul>
<li><code>PalmOS</code> (1996)</li>
<li><code>webOS</code> (2009)</li>
</ul>

<p><strong>Solaris</strong></p>

<ul>
<li><code>SunOS</code></li>
<li><code>SunOS i86pc</code></li>
<li><code>SunOS sun4u</code>: SPARC processor</li>
</ul>

<p><strong>Sony</strong></p>

<ul>
<li><code>PLAYSTATION 3</code> (2006)</li>
<li><code>PlayStation 4</code> (2013)</li>
<li><code>PSP</code>: PlayStation Portable (2004)</li>
</ul>

<p><strong>Various</strong></p>

<ul>
<li><code>HP-UX</code>: Hewlett-Packard UniX</li>
<li><code>masking-agent</code>: value changes to this when using Masking Agent for Firefox</li>
<li><code>WebTV OS</code></li>
<li><code>X11</code>: X11 Window System</li>
</ul>

<p><em>Have a device that's not on this list? Please leave a comment listing your device's properties and its <code>navigator.platform</code> value (feel free to use <a href=""http://jsfiddle.net/f6eNr/"">this JSFiddle</a> to find the value).</em></p>

<p>Hope this helps.</p>
",Robbert,Robbert,1384036632,1426624975,1426624975
http://stackoverflow.com/a/19888749/209184,Remove empty strings from array while keeping record Without Loop?,81400,Universal Grasp,Community,1384079647,1547177226,1495542395,https://stackoverflow.com/questions/19888689/remove-empty-strings-from-array-while-keeping-record-without-loop,"<pre><code>var arr = [""I"", ""am"", """", ""still"", ""here"", """", ""man""]
// arr = [""I"", ""am"", """", ""still"", ""here"", """", ""man""]
arr = arr.filter(Boolean)
// arr = [""I"", ""am"", ""still"", ""here"", ""man""]
</code></pre>

<p><a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter""><code>filter</code> documentation</a></p>

<hr>

<pre><code>// arr = [""I"", ""am"", """", ""still"", ""here"", """", ""man""]
arr = arr.filter(v=&gt;v!='');
// arr = [""I"", ""am"", ""still"", ""here"", ""man""]
</code></pre>

<p><a href=""https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/Arrow_functions"">Arrow functions documentation</a></p>
",Isaac,Isaac,1384080096,1461383808,1461383808
http://stackoverflow.com/a/19907903/132034,efficient thread-safe singleton in C++,66478,user168715,,1270418013,1553178319,0,https://stackoverflow.com/questions/2576022/efficient-thread-safe-singleton-in-c,"<p>If you are using C++11, here is a right way to do this:</p>

<pre><code>Foo&amp; getInst()
{
    static Foo inst(...);
    return inst;
}
</code></pre>

<p>According to new standard there is no need to care about this problem any more. Object initialization will be made only by one thread, other threads will wait till it complete.
Or you can use std::call_once. (more info <a href=""http://en.cppreference.com/w/cpp/thread/call_once"">here</a>)</p>
",Sat,Sat,1384177493,1384270175,1384270175
http://stackoverflow.com/a/199120/108197,A pythonic way to insert a space before capital letters,14109,Electrons_Ahoy,Cur,1223932600,1524378205,1524378205,https://stackoverflow.com/questions/199059/a-pythonic-way-to-insert-a-space-before-capital-letters,"<p>If there are consecutive capitals, then Gregs result could
not be what you look for, since the \w consumes the caracter
in front of the captial letter to be replaced.</p>

<pre><code>&gt;&gt;&gt; re.sub(r""(\w)([A-Z])"", r""\1 \2"", ""WordWordWWWWWWWord"")
'Word Word WW WW WW Word'
</code></pre>

<p>A look-behind would solve this:</p>

<pre><code>&gt;&gt;&gt; re.sub(r""(?&lt;=\w)([A-Z])"", r"" \1"", ""WordWordWWWWWWWord"")
'Word Word W W W W W W Word'
</code></pre>
",Leonhard,,1223933859,1223933859,0
http://stackoverflow.com/a/19921030/725009,Why is std::is_assignable counter-intuitive?,1187,ThreeBit,Community,1384226083,1533894150,1495535381,https://stackoverflow.com/questions/19920213/why-is-stdis-assignable-counter-intuitive,"<p>In these traits, and with <code>T</code> not being an lvalue reference type, <code>T</code> implies an rvalue.</p>

<p>With many user-defined types <code>T</code>, it is perfectly reasonable to assign to rvalue types.  And it is even very useful in some contexts:</p>

<pre><code>std::vector&lt;bool&gt; v(5);
v[0] = true;
</code></pre>

<p>In the above expression, <code>v[0]</code> is an rvalue which is getting assigned to.  And if <code>vector&lt;bool&gt;</code> is a poor example, then the following new C++11 code does the same:</p>

<pre><code>#include &lt;tuple&gt;

std::tuple&lt;int, int&gt;
do_something();

int
main()
{
    int i, j;
    std::tie(i, j) = do_something();
}
</code></pre>

<p>Above, the result of <code>do_something()</code> is being assigned to an rvalue <code>std::tuple</code>.  Assigning to rvalues is useful, and even common, though not done in the great majority of uses of assignment.</p>

<p>So <code>std::is_assignable</code> allows for the determining the distinction between being able to assign to an rvalue and to an lvalue.  If you need to know the difference, <code>std::is_assignable</code> can do the work for you.</p>

<p>If you are dealing with a more common case, such as just trying to figure out if a type <code>T</code> is copy assignable or not, then use <code>is_copy_assignable&lt;T&gt;</code>.  This trait is literally defined in terms of <code>is_assignable</code> and forces the lhs to an lvalue:</p>

<pre><code>is_copy_assignable&lt;T&gt; == is_assignable&lt;T&amp;, const T&amp;&gt;
</code></pre>

<p>So <code>std::is_copy_assignable&lt;int&gt;::value</code> will be true as expected.</p>

<p>Use <code>is_copy_assignable</code> as your first choice, or <code>is_move_assignable</code> if you need that too.  Only when those traits don't work for you (perhaps because you need to look at a heterogeneous assignment), should you revert to using <code>is_assignable</code> directly.  And then you need to deal with the question of whether or not you want to allow rvalues on the lhs so as to account for cases that might involve a <code>vector&lt;bool&gt;::reference</code>, or a <code>tuple</code> of references.  You will have to explicitly choose whether or not you want to allow such cases in your is_assignable query.</p>

<p>For example:</p>

<pre><code>#include &lt;type_traits&gt;
#include &lt;vector&gt;

int
main()
{
    static_assert(std::is_assignable&lt;std::vector&lt;bool&gt;::reference&amp;, bool&gt;(),
        ""Should be able to assign a bool to an lvalue vector&lt;bool&gt;::reference"");

    static_assert(std::is_assignable&lt;std::vector&lt;bool&gt;::reference, bool&gt;(),
        ""Should be able to assign a bool to an rvalue vector&lt;bool&gt;::reference"");

    static_assert(std::is_assignable&lt;bool&amp;, std::vector&lt;bool&gt;::reference&gt;(),
        ""Should be able to assign a vector&lt;bool&gt;::reference to an lvalue bool"");

    static_assert(!std::is_assignable&lt;bool, std::vector&lt;bool&gt;::reference&gt;(),
        ""Should not be able to assign a vector&lt;bool&gt;::reference to an rvalue bool"");
}
</code></pre>
",Howard Hinnant,Howard Hinnant,1384231460,1384359958,1384359958
http://stackoverflow.com/a/1993772/5103614,How to convert PascalCase to pascal_case?,75670,openfrog,mickmackusa,1262485251,1560337294,1557317124,https://stackoverflow.com/questions/1993721/how-to-convert-pascalcase-to-pascal-case,"<p>Try this on for size:</p>

<pre><code>$tests = array(
  'simpleTest' =&gt; 'simple_test',
  'easy' =&gt; 'easy',
  'HTML' =&gt; 'html',
  'simpleXML' =&gt; 'simple_xml',
  'PDFLoad' =&gt; 'pdf_load',
  'startMIDDLELast' =&gt; 'start_middle_last',
  'AString' =&gt; 'a_string',
  'Some4Numbers234' =&gt; 'some4_numbers234',
  'TEST123String' =&gt; 'test123_string',
);

foreach ($tests as $test =&gt; $result) {
  $output = from_camel_case($test);
  if ($output === $result) {
    echo ""Pass: $test =&gt; $result\n"";
  } else {
    echo ""Fail: $test =&gt; $result [$output]\n"";
  }
}

function from_camel_case($input) {
  preg_match_all('!([A-Z][A-Z0-9]*(?=$|[A-Z][a-z0-9])|[A-Za-z][a-z0-9]+)!', $input, $matches);
  $ret = $matches[0];
  foreach ($ret as &amp;$match) {
    $match = $match == strtoupper($match) ? strtolower($match) : lcfirst($match);
  }
  return implode('_', $ret);
}
</code></pre>

<p>Output:</p>

<pre><code>Pass: simpleTest =&gt; simple_test
Pass: easy =&gt; easy
Pass: HTML =&gt; html
Pass: simpleXML =&gt; simple_xml
Pass: PDFLoad =&gt; pdf_load
Pass: startMIDDLELast =&gt; start_middle_last
Pass: AString =&gt; a_string
Pass: Some4Numbers234 =&gt; some4_numbers234
Pass: TEST123String =&gt; test123_string
</code></pre>

<p>This implements the following rules:</p>

<ol>
<li>A sequence beginning with a lowercase letter must be followed by lowercase letters and digits;</li>
<li>A sequence beginning with an uppercase letter can be followed by either:

<ul>
<li>one or more uppercase letters and digits (followed by either the end of the string or an uppercase letter followed by a lowercase letter or digit ie the start of the next sequence); or</li>
<li>one or more lowercase letters or digits.</li>
</ul></li>
</ol>
",cletus,cletus,1262486758,1262487312,1262487312
http://stackoverflow.com/a/19954545/567126,I need two instances of AngularJS $http service or what?,7711,gsi-frank,,1359960572,1460655541,0,https://stackoverflow.com/questions/14681654/i-need-two-instances-of-angularjs-http-service-or-what,"<h1>1. Circular dependency problem.</h1>

<p>So, why does the error appear? Here is a quick overview of the process:</p>

<ol>
<li>$http service is requested.</li>
<li>$httpProvider is asked to construct it.</li>
<li>During construction you register interceptor, that requests $http service not existing yet.</li>
<li>You get ""Circular dependency"" error.</li>
</ol>

<p><br /></p>

<h2>First solution.</h2>

<p>Create your dependency using angular.injector(). Notice, that you will create another $http service, independent from your app.</p>

<pre><code>$httpProvider.interceptors.push(function($q) {
    $injector = angular.injector();
    return {
        response: function(response) {
            $injector.invoke(function($http) {
                // This is the exterior $http service!
                // This interceptor will not affect it.
            });
        }
    };
});
</code></pre>

<p><br /></p>

<h2>Second solution (better).</h2>

<p>Inject $injector in your interceptor and use it to retrieve dependencies after $http initialization, right at the time you need them. These dependencies are registered services of your app and will not be created anew!</p>

<pre><code>$httpProvider.interceptors.push(function($q, $injector) {
    return {
        response: function(response) {
            $injector.invoke(function($http, someService) {
                // $http is already constructed at the time and you may
                // use it, just as any other service registered in your
                // app module and modules on which app depends on.
            });
        }
    };
});
</code></pre>

<p><br /></p>

<h1>2. Interception prevention problem.</h1>

<p>If you use the second solution, there are actually two problems:</p>

<ol>
<li>If you utilize $http service inside your
interceptor, you may end up with infinite interceptions: you send
request, interceptor catches it, sends another, catches another,
send again, and so on.</li>
<li>Sometimes you want just prevent request from being intercepted.</li>
</ol>

<p>The 'config' parameter of $http service is just an object. You may create a convention, providing custom parameters and recognizing them in your interceptors.</p>

<p>For example, let's add ""nointercept"" property to config and try duplicate every user request. This is a silly application, but useful example to understand the behavior:</p>

<pre><code>$httpProvider.interceptors.push(function($q, $injector) {
    return {
        response: function(response) {
            if (response.config.nointercept) {
                return $q.when(response); // let it pass
            } else {
                var defer = $q.defer();
                $injector.invoke(function($http) {
                    // This modification prevents interception:
                    response.config.nointercept = true;
                    // Reuse modified config and send the same request again:
                    $http(response.config)
                        .then(function(resp) { defer.resolve(resp); },
                              function(resp) { defer.reject(resp); });
                });
                return defer.promise;
            }
        }
    };
});
</code></pre>

<p>Having the testing for property in interceptor, you may prevent the interception in controllers and services:</p>

<pre><code>app.controller('myController', function($http) {
    // The second parameter is actually 'config', see API docs.
    // This query will not be duplicated by the interceptor.
    $http.get('/foo/bar', {nointercept: true})
        .success(function(data) {
            // ...
        });

});
</code></pre>
",Thaumant,Thaumant,1384347778,1460655541,1460655541
http://stackoverflow.com/a/19968992/2358662,Unsigned integer as UTF-8 value,5661,user2485710,Yu Hao,1384398076,1384400303,1384399638,https://stackoverflow.com/questions/19968705/unsigned-integer-as-utf-8-value,"<p>Here's some C++ code that wouldn't be hard to convert to C. Adapted from an <a href=""https://stackoverflow.com/a/148766/5987"">older answer</a>.</p>

<pre><code>std::string UnicodeToUTF8(unsigned int codepoint)
{
    std::string out;

    if (codepoint &lt;= 0x7f)
        out.append(1, static_cast&lt;char&gt;(codepoint));
    else if (codepoint &lt;= 0x7ff)
    {
        out.append(1, static_cast&lt;char&gt;(0xc0 | ((codepoint &gt;&gt; 6) &amp; 0x1f)));
        out.append(1, static_cast&lt;char&gt;(0x80 | (codepoint &amp; 0x3f)));
    }
    else if (codepoint &lt;= 0xffff)
    {
        out.append(1, static_cast&lt;char&gt;(0xe0 | ((codepoint &gt;&gt; 12) &amp; 0x0f)));
        out.append(1, static_cast&lt;char&gt;(0x80 | ((codepoint &gt;&gt; 6) &amp; 0x3f)));
        out.append(1, static_cast&lt;char&gt;(0x80 | (codepoint &amp; 0x3f)));
    }
    else
    {
        out.append(1, static_cast&lt;char&gt;(0xf0 | ((codepoint &gt;&gt; 18) &amp; 0x07)));
        out.append(1, static_cast&lt;char&gt;(0x80 | ((codepoint &gt;&gt; 12) &amp; 0x3f)));
        out.append(1, static_cast&lt;char&gt;(0x80 | ((codepoint &gt;&gt; 6) &amp; 0x3f)));
        out.append(1, static_cast&lt;char&gt;(0x80 | (codepoint &amp; 0x3f)));
    }
    return out;
}
</code></pre>
",Mark Ransom,Community,1384399829,1384399829,1495540393
http://stackoverflow.com/a/20003981/51600,how to submit a form to another page in wordpress plugin,23700,Mushfiqul Tuhin,Damodaran,1384508401,1461593620,1384508609,https://stackoverflow.com/questions/19997913/how-to-submit-a-form-to-another-page-in-wordpress-plugin,"<p>Wordpress has a generic handler to deal with all forms - <code>admin-post.php</code>.</p>

<p>If you include a hidden field in your form called <code>action</code>, you can then hook in to a function of your choice with all the goodness of wordpress included.</p>

<pre><code>echo ""&lt;form action='"".get_admin_url().""admin-post.php' method='post'&gt;"";

    echo ""&lt;input type='hidden' name='action' value='submit-form' /&gt;"";
    echo ""&lt;input type='hidden' name='hide' value='$ques' /&gt;"";

    { Enter the rest of your first block of code from above here }

echo ""&lt;/form&gt;"";
</code></pre>

<p>And then in your <code>functions.php</code> file (or any other <code>php</code> file that you have included via <code>functions.php</code>), you can use this method.</p>

<pre><code>add_action('admin_post_submit-form', '_handle_form_action'); // If the user is logged in
add_action('admin_post_nopriv_submit-form', '_handle_form_action'); // If the user in not logged in
function _handle_form_action(){

    { Enter your second block of code from above here }

}
</code></pre>

<p>I'm not sure if you require a redirect once you reach your desired destination, but that can be easily accounted for if you do.</p>

<p>And one final question - is this form on the front end, or in the admin area? Not that it should make a difference that this answer, I'm just curious...</p>
",David Gard,David Gard,1384527552,1461593620,1461593620
http://stackoverflow.com/a/20007730/226013,Ordinal numbers replacement,30629,skornos,,1331389669,1554945786,0,https://stackoverflow.com/questions/9647202/ordinal-numbers-replacement,"<p>Here's a terse solution taken from <a href=""https://codegolf.stackexchange.com/questions/4707/outputting-ordinal-numbers-1st-2nd-3rd#answer-4712"">Gareth on codegolf</a>:</p>

<pre><code>ordinal = lambda n: ""%d%s"" % (n,""tsnrhtdd""[(n/10%10!=1)*(n%10&lt;4)*n%10::4])
</code></pre>

<p>Works on any number:</p>

<pre><code>print([ordinal(n) for n in range(1,32)])

['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th', '9th', '10th',
 '11th', '12th', '13th', '14th', '15th', '16th', '17th', '18th', '19th',
 '20th', '21st', '22nd', '23rd', '24th', '25th', '26th', '27th', '28th',
 '29th', '30th', '31st']
</code></pre>

<p>For python 3.4+, <code>math.floor</code> is needed:</p>

<pre><code>import math
ordinal = lambda n: ""%d%s"" % (n,""tsnrhtdd""[(math.floor(n/10)%10!=1)*(n%10&lt;4)*n%10::4])
</code></pre>
",Ben Davis,Max Ghenis,1384538852,1554945786,1554945786
http://stackoverflow.com/a/20007730/3776794,Ordinal numbers replacement,30629,skornos,,1331389669,1554945786,0,https://stackoverflow.com/questions/9647202/ordinal-numbers-replacement,"<p>Here's a terse solution taken from <a href=""https://codegolf.stackexchange.com/questions/4707/outputting-ordinal-numbers-1st-2nd-3rd#answer-4712"">Gareth on codegolf</a>:</p>

<pre><code>ordinal = lambda n: ""%d%s"" % (n,""tsnrhtdd""[(n/10%10!=1)*(n%10&lt;4)*n%10::4])
</code></pre>

<p>Works on any number:</p>

<pre><code>print([ordinal(n) for n in range(1,32)])

['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th', '9th', '10th',
 '11th', '12th', '13th', '14th', '15th', '16th', '17th', '18th', '19th',
 '20th', '21st', '22nd', '23rd', '24th', '25th', '26th', '27th', '28th',
 '29th', '30th', '31st']
</code></pre>

<p>For python 3.4+, <code>math.floor</code> is needed:</p>

<pre><code>import math
ordinal = lambda n: ""%d%s"" % (n,""tsnrhtdd""[(math.floor(n/10)%10!=1)*(n%10&lt;4)*n%10::4])
</code></pre>
",Ben Davis,Max Ghenis,1384538852,1554945786,1554945786
http://stackoverflow.com/a/20010923/2187922,How to Test a Concern in Rails,29325,Kyle Decot,yas4891,1368457280,1550776642,1416503129,https://stackoverflow.com/questions/16525222/how-to-test-a-concern-in-rails,"<p>The method you found will certainly work to test a little bit of functionality but seems pretty fragileyour dummy class (actually just a <code>Struct</code> in your solution) may or may not behave like a real class that <code>include</code>s your concern. Additionally if you're trying to test model concerns, you won't be able to do things like test the validity of objects or invoke ActiveRecord callbacks unless you set up the database accordingly (because your dummy class won't have a database table backing it). Moreover, you'll want to not only test the concern but also test the concern's behavior inside your model specs.</p>

<p>So why not kill two birds with one stone? By using RSpec's <a href=""https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/example-groups/shared-example-group"" rel=""noreferrer"">shared example groups</a>, you can test your concerns against the actual classes that use them (e.g., models) <em>and</em> you'll be able to test them everywhere they're used. And you only have to write the tests once and then just include them in any model spec that uses your concern. In your case, this might look something like this:</p>

<pre><code># app/models/concerns/personable.rb

module Personable
  extend ActiveSupport::Concern

  def full_name
    ""#{first_name} #{last_name}""
  end
end

# spec/concerns/personable_spec.rb

require 'spec_helper'

shared_examples_for ""personable"" do
  let(:model) { described_class } # the class that includes the concern

  it ""has a full name"" do
    person = FactoryBot.build(model.to_s.underscore.to_sym, first_name: ""Stewart"", last_name: ""Home"")
    expect(person.full_name).to eq(""Stewart Home"")
  end
end

# spec/models/master_spec.rb

require 'spec_helper'
require Rails.root.join ""spec/concerns/personable_spec.rb""

describe Master do
  it_behaves_like ""personable""
end

# spec/models/apprentice_spec.rb

require 'spec_helper'

describe Apprentice do
  it_behaves_like ""personable""
end
</code></pre>

<p>The advantages of this approach become even more obvious when you start doing things in your concern like invoking AR callbacks, where anything less than an AR object just won't do.</p>
",Josh Leitzel,David Hempy,1384550946,1550776642,1550776642
http://stackoverflow.com/a/2001767/141395,"python, and unicode stderr",2320,fancyzero,Community,1262499681,1439133293,1495540009,https://stackoverflow.com/questions/1994157/python-and-unicode-stderr,"<p>First, please remember that on Windows console may not fully support Unicode.</p>

<p>The example below does make python output to <code>stderr</code> and <code>stdout</code> using <strong>UTF-8</strong>. If you want you could change it to other encodings.</p>

<pre><code>#!/usr/bin/python
# -*- coding: UTF-8 -*-

import codecs, sys

reload(sys)
sys.setdefaultencoding('utf-8')

print sys.getdefaultencoding()

sys.stdout = codecs.getwriter('utf8')(sys.stdout)
sys.stderr = codecs.getwriter('utf8')(sys.stderr)

print ""This is an mp testing Unicode support using Arabic, Latin, Cyrillic, Greek, Hebrew and CJK code points.""
</code></pre>
",sorin,,1262634877,1262634877,0
http://stackoverflow.com/a/2007782/535646,How do you draw filled and unfilled circles with PDF primitives?,1987,brian d foy,brian d foy,1261729888,1508789961,1264094320,https://stackoverflow.com/questions/1960786/how-do-you-draw-filled-and-unfilled-circles-with-pdf-primitives,"<p>That's always going to be the case.  PDF doesn't have circles in the primitives, only beziers.  The PDF imaging model was built from the PostScript imaging model, which itself only provides circles using the arc/arcto primitives, which themselves are implemented in terms of beziers.</p>

<p>Oddly enough, I had call to do this exact task in some test code I'm working on that generates PDF's.  Here's how I did it:</p>

<pre><code>    private void DrawEllipse(PdfGraphics g, double xrad, double yrad)
    {
        const double magic = 0.551784;
        double xmagic = xrad * magic;
        double ymagic = yrad * magic;
        g.MoveTo(-xrad, 0);
        g.CurveTo(-xrad, ymagic, -xmagic, yrad, 0, yrad);
        g.CurveTo(xmagic, yrad, xrad, ymagic, xrad, 0);
        g.CurveTo(xrad, -ymagic, xmagic, -yrad, 0, -yrad);
        g.CurveTo(-xmagic, -yrad, -xrad, -ymagic, -xrad, 0);
    }

    private void DrawCircle(PdfGraphics g, double radius)
    {
        DrawEllipse(g, radius, radius);
    }
</code></pre>

<p>Assume that <code>PdfGraphics</code> is a class that spews out PDF commands, so <code>g.MoveTo(x, y)</code> will turn into ""x y m"" in the content stream.  I took my math and my magic number from Don <a href=""http://www.tinaja.com/glib/ellipse4.pdf"" rel=""nofollow noreferrer"">Lancaster's fabulous explanation</a> (PDF, naturally).  This assumes that the circle or ellipse will be drawn at the origin.  To move it somewhere else, do a translation transform first or modify the code to subtract add in the desired origin.  This code gives a worst case error of roughly 1/1250 (about .08 %) and average of 1/2500 (about .04%).</p>
",plinth,brian d foy,1262711913,1264533452,1264533452
http://stackoverflow.com/a/2008353/2422398,Validate a JavaScript function name,24164,Zoom Pat,Alan Moore,1262716965,1429958319,1262767086,https://stackoverflow.com/questions/2008279/validate-a-javascript-function-name,"<p><strong>[EDIT]</strong> See <a href=""https://stackoverflow.com/a/2008444/244128"">@bobince's post below</a> for a more correct and thorough answer.  This answer has been retained for reference and edited to be less wrong.</p>

<p>A valid name in JavaScript must start with a Unicode letter (<code>\p{L}</code>), dollar sign, or underscore then can contain any of those characters as well as numbers, combining diacritical (accent) characters, and various joiner punctuation and zero-width spaces.  Additionally, it cannot be a word reserved by the JavaScript language (e.g. <code>abstract</code>, <code>as</code>, <code>boolean</code>, <code>break</code>, <code>byte</code>, <code>case</code>, etc).</p>

<p>A full regular expression solution would be quite complicated in plain JavaScript but the <a href=""http://xregexp.com/plugins/#unicode"" rel=""nofollow noreferrer"">XRegExp Unicode plugin</a> could greatly simplify the task.  <a href=""http://mothereff.in/js-variables"" rel=""nofollow noreferrer"">This online function name tester</a> might also be useful.</p>

<p><strong>[ORIGINAL]</strong> Here is an <em>incomplete</em> regular expression, using <em>only the US ASCII letters</em>:</p>

<pre class=""lang-javascript prettyprint-override""><code>var fnNameRegex = /^[$A-Z_][0-9A-Z_$]*$/i;
</code></pre>

<p>You also must check that it doesn't match any reserved words (e.g. abstract, boolean, break, byte, ..., while, with, etc).  Here's <a href=""http://javascript.about.com/library/blreserved.htm"" rel=""nofollow noreferrer"">a start for that list</a>, and an example function:</p>

<pre class=""lang-javascript prettyprint-override""><code>var isValidFunctionName = function() {
  var validName = /^[$A-Z_][0-9A-Z_$]*$/i;
  var reserved = {
    'abstract':true,
    'boolean':true,
    // ...
    'with':true
  };
  return function(s) {
    // Ensure a valid name and not reserved.
    return validName.test(s) &amp;&amp; !reserved[s];
  };
}();
</code></pre>
",maerics,Community,1262717830,1330446359,1495542366
http://stackoverflow.com/a/20095486/2608804,How to compare software version number using js? (only number),62315,Tattat,Danubian Sailor,1311694309,1554120706,1395310852,https://stackoverflow.com/questions/6832596/how-to-compare-software-version-number-using-js-only-number,"<p>Couldn't find a function doing what I wanted here. So I wrote my own. This is my contribution. I hope someone find it useful.</p>

<p><strong>Pros:</strong></p>

<ul>
<li><p>Handles version strings of arbitrary length. '1' or '1.1.1.1.1'.</p></li>
<li><p>Defaults each value to 0 if not specified. Just because a string is longer doesn't mean it's a bigger version. ('1' should be the same as '1.0' and '1.0.0.0'.)</p></li>
<li><p>Compare numbers not strings. ('3'&lt;'21' should be true. Not false.)</p></li>
<li><p>Don't waste time on useless compares in the loop. (Comparing for ==)</p></li>
<li><p>You can choose your own comparator.</p></li>
</ul>

<p><strong>Cons:</strong></p>

<ul>
<li>It does not handle letters in the version string. (I don't know how that would even work?)</li>
</ul>

<p><strong>My code, similar to the accepted answer by <em>Jon</em>:</strong></p>

<pre><code>function compareVersions(v1, comparator, v2) {
    ""use strict"";
    var comparator = comparator == '=' ? '==' : comparator;
    if(['==','===','&lt;','&lt;=','&gt;','&gt;=','!=','!=='].indexOf(comparator) == -1) {
        throw new Error('Invalid comparator. ' + comparator);
    }
    var v1parts = v1.split('.'), v2parts = v2.split('.');
    var maxLen = Math.max(v1parts.length, v2parts.length);
    var part1, part2;
    var cmp = 0;
    for(var i = 0; i &lt; maxLen &amp;&amp; !cmp; i++) {
        part1 = parseInt(v1parts[i], 10) || 0;
        part2 = parseInt(v2parts[i], 10) || 0;
        if(part1 &lt; part2)
            cmp = 1;
        if(part1 &gt; part2)
            cmp = -1;
    }
    return eval('0' + comparator + cmp);
}
</code></pre>

<p><strong>Examples</strong>:</p>

<pre><code>compareVersions('1.2.0', '==', '1.2'); // true
compareVersions('00001', '==', '1.0.0'); // true
compareVersions('1.2.0', '&lt;=', '1.2'); // true
compareVersions('2.2.0', '&lt;=', '1.2'); // false
</code></pre>
",Viktor,Viktor,1384949063,1455785420,1455785420
http://stackoverflow.com/a/20129229/3243497,Django Query That Get Most Recent Objects From Different Categories,13993,Zach,Todor,1263586861,1546818617,1470352117,https://stackoverflow.com/questions/2074514/django-query-that-get-most-recent-objects-from-different-categories,"<p>If you happen to be using PostGreSQL, you can use <a href=""https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.distinct"" rel=""noreferrer"">Django's interface to DISTINCT ON</a>:</p>

<pre><code>recent_cakes = Cake.objects.order_by('bakery__id', '-baked_at').distinct('bakery__id')
</code></pre>

<p>As <a href=""https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.distinct"" rel=""noreferrer"">the docs</a> say, you must <code>order by</code> the same fields that you <code>distinct on</code>. As Simon pointed out below, if you want to do additional sorting, you'll have to do it in Python-space.</p>
",dbn,dbn,1385058942,1422621133,1422621133
http://stackoverflow.com/a/20134451/2066546,How to select option in drop down using Capybara,86161,Farooq,carols10cents,1385076509,1556229422,1385078084,https://stackoverflow.com/questions/20134085/how-to-select-option-in-drop-down-using-capybara,"<p>If you take a look at <a href=""https://github.com/jnicklas/capybara/blob/6a4676a62e09a569c58edd6c630764c8e3624276/lib/capybara/node/actions.rb#L208"" rel=""noreferrer"">the source of the <code>select</code> method</a>, you can see that what it does when you pass a <code>from</code> key is essentially:</p>

<pre><code>find(:select, from, options).find(:option, value, options).select_option
</code></pre>

<p>In other words, it finds the <code>&lt;select&gt;</code> you're interested in, then finds the <code>&lt;option&gt;</code> within that, then calls <code>select_option</code> on the <code>&lt;option&gt;</code> node.</p>

<p>You've already pretty much done the first two things, I'd just rearrange them. Then you can tack the <code>select_option</code> method on the end:</p>

<pre><code>find('#organizationSelect').find(:xpath, 'option[2]').select_option
</code></pre>
",carols10cents,quinnjn,1385078628,1472079857,1472079857
http://stackoverflow.com/a/20151856/1361529,Creating a Blob from a base64 string in JavaScript,350689,Jeremy,Jeremy,1367013080,1555313294,1554169107,https://stackoverflow.com/questions/16245767/creating-a-blob-from-a-base64-string-in-javascript,"<p>Optimized (but less readable) implementation:</p>

<pre class=""lang-js prettyprint-override""><code>function base64toBlob(base64Data, contentType) {
    contentType = contentType || '';
    var sliceSize = 1024;
    var byteCharacters = atob(base64Data);
    var bytesLength = byteCharacters.length;
    var slicesCount = Math.ceil(bytesLength / sliceSize);
    var byteArrays = new Array(slicesCount);

    for (var sliceIndex = 0; sliceIndex &lt; slicesCount; ++sliceIndex) {
        var begin = sliceIndex * sliceSize;
        var end = Math.min(begin + sliceSize, bytesLength);

        var bytes = new Array(end - begin);
        for (var offset = begin, i = 0; offset &lt; end; ++i, ++offset) {
            bytes[i] = byteCharacters[offset].charCodeAt(0);
        }
        byteArrays[sliceIndex] = new Uint8Array(bytes);
    }
    return new Blob(byteArrays, { type: contentType });
}
</code></pre>
",Bacher,Bacher,1385144594,1529441019,1529441019
http://stackoverflow.com/a/201729/402891,Concatenating two std::vectors,302759,yigal,emlai,1223999161,1561587335,1454972687,https://stackoverflow.com/questions/201718/concatenating-two-stdvectors,"<pre><code>vector1.insert( vector1.end(), vector2.begin(), vector2.end() );
</code></pre>
",Robert Gamble,,1223999308,1223999308,0
http://stackoverflow.com/a/20177611/3569421,Android Gallery on Android 4.4 (KitKat) returns different URI for Intent.ACTION_GET_CONTENT,173649,Michael Greifeneder,Peter Mortensen,1383823996,1533012710,1502397482,https://stackoverflow.com/questions/19834842/android-gallery-on-android-4-4-kitkat-returns-different-uri-for-intent-action,"<p>Had the same problem, tried the solution above but though it worked generally, for some reason I was getting permission denial on Uri content provider for some images although I had the <code>android.permission.MANAGE_DOCUMENTS</code> permission added properly.</p>

<p>Anyway found other solution which is to force opening image gallery instead of KITKAT documents view with :</p>

<pre><code>// KITKAT

i = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    startActivityForResult(i, CHOOSE_IMAGE_REQUEST);
</code></pre>

<p>and then load the image:</p>

<pre><code>Uri selectedImageURI = data.getData();
input = c.getContentResolver().openInputStream(selectedImageURI);
                BitmapFactory.decodeStream(input , null, opts);
</code></pre>

<p><strong>EDIT</strong></p>

<p><code>ACTION_OPEN_DOCUMENT</code> might require you to persist permissions flags etc and generally often results in Security Exceptions...</p>

<p>Other solution is to use the <code>ACTION_GET_CONTENT</code> combined with <code>c.getContentResolver().openInputStream(selectedImageURI)</code> which will work both on pre-KK and KK. Kitkat will use new documents view then and this solution will work with all apps like Photos, Gallery, File Explorer, Dropbox, Google Drive etc...) but remember that when using this solution you have to create image in your <code>onActivityResult()</code> and store it on SD Card for example. Recreating this image from saved uri on next app launch would throw Security Exception on content resolver even when you add permission flags as described in Google API docs (that's what happened when I did some testing)</p>

<p>Additionally the Android Developer API Guidelines suggest:</p>

<blockquote>
  <p>ACTION_OPEN_DOCUMENT is not intended to be a replacement for ACTION_GET_CONTENT. The one you should use depends on the needs of
  your app:</p>
  
  <p>Use ACTION_GET_CONTENT if you want your app to simply read/import
  data. With this approach, the app imports a copy of the data, such as
  an image file.</p>
  
  <p>Use ACTION_OPEN_DOCUMENT if you want your app to have
  long term, persistent access to documents owned by a document
  provider. An example would be a photo-editing app that lets users edit
  images stored in a document provider.</p>
</blockquote>
",voytez,Marcin Orlowski,1385314482,1432549506,1432549506
http://stackoverflow.com/a/20244839/2258915,PyQt4 center window on active screen,11973,Applejohn,,1385558424,1552601267,0,https://stackoverflow.com/questions/20243637/pyqt4-center-window-on-active-screen,"<p>Modify your <code>center</code> method to be as follows:</p>

<pre><code>def center(self):
    frameGm = self.frameGeometry()
    screen = QtGui.QApplication.desktop().screenNumber(QtGui.QApplication.desktop().cursor().pos())
    centerPoint = QtGui.QApplication.desktop().screenGeometry(screen).center()
    frameGm.moveCenter(centerPoint)
    self.move(frameGm.topLeft())
</code></pre>

<p>This function is based on where the mouse point is located. It uses the <a href=""http://pyqt.sourceforge.net/Docs/PyQt4/qdesktopwidget.html#screenNumber-2"">screenNumber</a> function to determine which screen the mouse is current active on. It then finds the <a href=""http://pyqt.sourceforge.net/Docs/PyQt4/qdesktopwidget.html#screenGeometry"">screenGeometry</a> of that monitor and the center point of that screen. Using this method, you should be able to place the window in the center of a screen even if monitor resolutions are different.</p>
",Andy,,1385561852,1385561852,0
http://stackoverflow.com/a/20261974/1322817,Efficient way to insert a number into a sorted array of numbers?,71206,Elliot Kroo,,1251420932,1553058794,1513940719,https://stackoverflow.com/questions/1344500/efficient-way-to-insert-a-number-into-a-sorted-array-of-numbers,"<p>Very good and remarkable question with a very interesting discussion! I also was using the <code>Array.sort()</code> function after pushing a single element in an array with some thousands of objects.</p>

<p>I had to extend your <code>locationOf</code> function for my purpose because of having complex objects and therefore the need for a compare function like in <code>Array.sort()</code>:</p>

<pre><code>function locationOf(element, array, comparer, start, end) {
    if (array.length === 0)
        return -1;

    start = start || 0;
    end = end || array.length;
    var pivot = (start + end) &gt;&gt; 1;  // should be faster than dividing by 2

    var c = comparer(element, array[pivot]);
    if (end - start &lt;= 1) return c == -1 ? pivot - 1 : pivot;

    switch (c) {
        case -1: return locationOf(element, array, comparer, start, pivot);
        case 0: return pivot;
        case 1: return locationOf(element, array, comparer, pivot, end);
    };
};

// sample for objects like {lastName: 'Miller', ...}
var patientCompare = function (a, b) {
    if (a.lastName &lt; b.lastName) return -1;
    if (a.lastName &gt; b.lastName) return 1;
    return 0;
};
</code></pre>
",kwrl,The Red Pea,1385630232,1492451612,1492451612
http://stackoverflow.com/a/20298116/562769,How to generate n different colors for any natural number n?,22451,deostroll,Charles Stewart,1267034970,1427444908,1267051008,https://stackoverflow.com/questions/2328339/how-to-generate-n-different-colors-for-any-natural-number-n,"<p>Yeah. Defining distinct is a product of deferring to a color space then when we say maximally distinct colors what we mean to say is colors which are as far from all the other colors as possible. But since the color space doesn't change the answer isn't going to change. And implementing something that better fits with human eyes and how human eyes see color like CIE-lab de2000 color distance makes redoing all the calculations hard, but makes a static list easy. Here's 128 entries.</p>

<pre><code>private static final String[] indexcolors = new String[]{
        ""#000000"", ""#FFFF00"", ""#1CE6FF"", ""#FF34FF"", ""#FF4A46"", ""#008941"", ""#006FA6"", ""#A30059"",
        ""#FFDBE5"", ""#7A4900"", ""#0000A6"", ""#63FFAC"", ""#B79762"", ""#004D43"", ""#8FB0FF"", ""#997D87"",
        ""#5A0007"", ""#809693"", ""#FEFFE6"", ""#1B4400"", ""#4FC601"", ""#3B5DFF"", ""#4A3B53"", ""#FF2F80"",
        ""#61615A"", ""#BA0900"", ""#6B7900"", ""#00C2A0"", ""#FFAA92"", ""#FF90C9"", ""#B903AA"", ""#D16100"",
        ""#DDEFFF"", ""#000035"", ""#7B4F4B"", ""#A1C299"", ""#300018"", ""#0AA6D8"", ""#013349"", ""#00846F"",
        ""#372101"", ""#FFB500"", ""#C2FFED"", ""#A079BF"", ""#CC0744"", ""#C0B9B2"", ""#C2FF99"", ""#001E09"",
        ""#00489C"", ""#6F0062"", ""#0CBD66"", ""#EEC3FF"", ""#456D75"", ""#B77B68"", ""#7A87A1"", ""#788D66"",
        ""#885578"", ""#FAD09F"", ""#FF8A9A"", ""#D157A0"", ""#BEC459"", ""#456648"", ""#0086ED"", ""#886F4C"",

        ""#34362D"", ""#B4A8BD"", ""#00A6AA"", ""#452C2C"", ""#636375"", ""#A3C8C9"", ""#FF913F"", ""#938A81"",
        ""#575329"", ""#00FECF"", ""#B05B6F"", ""#8CD0FF"", ""#3B9700"", ""#04F757"", ""#C8A1A1"", ""#1E6E00"",
        ""#7900D7"", ""#A77500"", ""#6367A9"", ""#A05837"", ""#6B002C"", ""#772600"", ""#D790FF"", ""#9B9700"",
        ""#549E79"", ""#FFF69F"", ""#201625"", ""#72418F"", ""#BC23FF"", ""#99ADC0"", ""#3A2465"", ""#922329"",
        ""#5B4534"", ""#FDE8DC"", ""#404E55"", ""#0089A3"", ""#CB7E98"", ""#A4E804"", ""#324E72"", ""#6A3A4C"",
        ""#83AB58"", ""#001C1E"", ""#D1F7CE"", ""#004B28"", ""#C8D0F6"", ""#A3A489"", ""#806C66"", ""#222800"",
        ""#BF5650"", ""#E83000"", ""#66796D"", ""#DA007C"", ""#FF1A59"", ""#8ADBB4"", ""#1E0200"", ""#5B4E51"",
        ""#C895C5"", ""#320033"", ""#FF6832"", ""#66E1D3"", ""#CFCDAC"", ""#D0AC94"", ""#7ED379"", ""#012C58""
};
</code></pre>

<p>Here's the first 256 as an image.</p>

<p><img src=""https://i.stack.imgur.com/6W8H7.png"" alt=""max distance""></p>

<p>(left-to-right) (top-to-bottom). You might be able to get a few more distinct colors if you made sure each color was as equidistant as possible within the colorspace. That lookup table picks each additional color as maximally distinct from all previous colors rather than designating the N at the start and then mapping out the colorspace. So yeah, brute force and a high level color dsitance algorithm and you're set to make this same set of colors yourself. Over the course of a day or so.</p>
",Tatarize,Tatarize,1385799492,1427444908,1427444908
http://stackoverflow.com/a/20317763/2866660,Separate date and time form fields in Rails,23657,pgericson,,1284042514,1402115503,0,https://stackoverflow.com/questions/3677531/separate-date-and-time-form-fields-in-rails,"<p>Elegant solution may provide <a href=""https://github.com/einzige/date_time_attribute"" rel=""nofollow""><strong>date_time_attribute</strong> gem</a>:</p>

<pre><code>class MyModel &lt; ActiveRecord::Base
  include DateTimeAttribute

  date_time_attribute :starts_at
end
</code></pre>

<p>It will allow you to set <code>starts_at_date</code> and <code>starts_at_time</code> separately:</p>

<pre><code>form_for @event do |f|
  f.text_field :starts_at_date
  f.text_field :starts_at_time
  f.submit
end

# this will work too:
form_for @event do |f|
  f.date_select :starts_at_date
  f.time_select :starts_at_time, :ignore_date =&gt; true
  f.text_field  :starts_at_time_zone
  f.submit
end

# or
form_for @event do |f|
  f.date_select :starts_at_date
  f.text_field  :starts_at_time
  f.submit
end
</code></pre>

<p>It will also allow you to play with time zones, use Chronic etc.</p>
",Sergei Zinin,,1385935039,1385935039,0
http://stackoverflow.com/a/2031935/1475279,What is the most accurate way to retrieve a user&#39;s correct IP address in PHP?,76415,Corey Ballou,Peter Mortensen,1256695406,1512657087,1397634783,https://stackoverflow.com/questions/1634782/what-is-the-most-accurate-way-to-retrieve-a-users-correct-ip-address-in-php,"<p><strong>Here is a shorter, cleaner way to get the IP address:</strong></p>

<pre><code>function get_ip_address(){
    foreach (array('HTTP_CLIENT_IP', 'HTTP_X_FORWARDED_FOR', 'HTTP_X_FORWARDED', 'HTTP_X_CLUSTER_CLIENT_IP', 'HTTP_FORWARDED_FOR', 'HTTP_FORWARDED', 'REMOTE_ADDR') as $key){
        if (array_key_exists($key, $_SERVER) === true){
            foreach (explode(',', $_SERVER[$key]) as $ip){
                $ip = trim($ip); // just to be safe

                if (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE) !== false){
                    return $ip;
                }
            }
        }
    }
}
</code></pre>

<p>I hope it helps!</p>

<hr>

<p>Your code seems to be pretty complete already, I cannot see any possible bugs in it (aside from the usual IP caveats), I would change the <code>validate_ip()</code> function to rely on the filter extension though:</p>

<pre><code>public function validate_ip($ip)
{
    if (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE) === false)
    {
        return false;
    }

    self::$ip = sprintf('%u', ip2long($ip)); // you seem to want this

    return true;
}
</code></pre>

<p>Also your <code>HTTP_X_FORWARDED_FOR</code> snippet can be simplified from this:</p>

<pre><code>// check for IPs passing through proxies
if (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))
{
    // check if multiple ips exist in var
    if (strpos($_SERVER['HTTP_X_FORWARDED_FOR'], ',') !== false)
    {
        $iplist = explode(',', $_SERVER['HTTP_X_FORWARDED_FOR']);

        foreach ($iplist as $ip)
        {
            if ($this-&gt;validate_ip($ip))
                return $ip;
        }
    }

    else
    {
        if ($this-&gt;validate_ip($_SERVER['HTTP_X_FORWARDED_FOR']))
            return $_SERVER['HTTP_X_FORWARDED_FOR'];
    }
}
</code></pre>

<p>To this:</p>

<pre><code>// check for IPs passing through proxies
if (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))
{
    $iplist = explode(',', $_SERVER['HTTP_X_FORWARDED_FOR']);

    foreach ($iplist as $ip)
    {
        if ($this-&gt;validate_ip($ip))
            return $ip;
    }
}
</code></pre>

<p>You may also want to validate IPv6 addresses.</p>
",Alix Axel,Alix Axel,1263000227,1357433262,1357433262
http://stackoverflow.com/a/2031935/450127,What is the most accurate way to retrieve a user&#39;s correct IP address in PHP?,76415,Corey Ballou,Peter Mortensen,1256695406,1512657087,1397634783,https://stackoverflow.com/questions/1634782/what-is-the-most-accurate-way-to-retrieve-a-users-correct-ip-address-in-php,"<p><strong>Here is a shorter, cleaner way to get the IP address:</strong></p>

<pre><code>function get_ip_address(){
    foreach (array('HTTP_CLIENT_IP', 'HTTP_X_FORWARDED_FOR', 'HTTP_X_FORWARDED', 'HTTP_X_CLUSTER_CLIENT_IP', 'HTTP_FORWARDED_FOR', 'HTTP_FORWARDED', 'REMOTE_ADDR') as $key){
        if (array_key_exists($key, $_SERVER) === true){
            foreach (explode(',', $_SERVER[$key]) as $ip){
                $ip = trim($ip); // just to be safe

                if (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE) !== false){
                    return $ip;
                }
            }
        }
    }
}
</code></pre>

<p>I hope it helps!</p>

<hr>

<p>Your code seems to be pretty complete already, I cannot see any possible bugs in it (aside from the usual IP caveats), I would change the <code>validate_ip()</code> function to rely on the filter extension though:</p>

<pre><code>public function validate_ip($ip)
{
    if (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE) === false)
    {
        return false;
    }

    self::$ip = sprintf('%u', ip2long($ip)); // you seem to want this

    return true;
}
</code></pre>

<p>Also your <code>HTTP_X_FORWARDED_FOR</code> snippet can be simplified from this:</p>

<pre><code>// check for IPs passing through proxies
if (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))
{
    // check if multiple ips exist in var
    if (strpos($_SERVER['HTTP_X_FORWARDED_FOR'], ',') !== false)
    {
        $iplist = explode(',', $_SERVER['HTTP_X_FORWARDED_FOR']);

        foreach ($iplist as $ip)
        {
            if ($this-&gt;validate_ip($ip))
                return $ip;
        }
    }

    else
    {
        if ($this-&gt;validate_ip($_SERVER['HTTP_X_FORWARDED_FOR']))
            return $_SERVER['HTTP_X_FORWARDED_FOR'];
    }
}
</code></pre>

<p>To this:</p>

<pre><code>// check for IPs passing through proxies
if (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))
{
    $iplist = explode(',', $_SERVER['HTTP_X_FORWARDED_FOR']);

    foreach ($iplist as $ip)
    {
        if ($this-&gt;validate_ip($ip))
            return $ip;
    }
}
</code></pre>

<p>You may also want to validate IPv6 addresses.</p>
",Alix Axel,Alix Axel,1263000227,1357433262,1357433262
http://stackoverflow.com/a/20380514/5963435,How to obtain image size using standard Python class (without using external library)?,106115,eros,SuperBiasedMan,1320639060,1541763940,1443609239,https://stackoverflow.com/questions/8032642/how-to-obtain-image-size-using-standard-python-class-without-using-external-lib,"<p>Here's a python 3 script that returns a tuple containing an image height and width for .png, .gif and .jpeg without using any external libraries (ie what Kurt McKee referenced above). Should be relatively easy to transfer it to Python 2.</p>

<pre><code>import struct
import imghdr

def get_image_size(fname):
    '''Determine the image type of fhandle and return its size.
    from draco'''
    with open(fname, 'rb') as fhandle:
        head = fhandle.read(24)
        if len(head) != 24:
            return
        if imghdr.what(fname) == 'png':
            check = struct.unpack('&gt;i', head[4:8])[0]
            if check != 0x0d0a1a0a:
                return
            width, height = struct.unpack('&gt;ii', head[16:24])
        elif imghdr.what(fname) == 'gif':
            width, height = struct.unpack('&lt;HH', head[6:10])
        elif imghdr.what(fname) == 'jpeg':
            try:
                fhandle.seek(0) # Read 0xff next
                size = 2
                ftype = 0
                while not 0xc0 &lt;= ftype &lt;= 0xcf:
                    fhandle.seek(size, 1)
                    byte = fhandle.read(1)
                    while ord(byte) == 0xff:
                        byte = fhandle.read(1)
                    ftype = ord(byte)
                    size = struct.unpack('&gt;H', fhandle.read(2))[0] - 2
                # We are at a SOFn block
                fhandle.seek(1, 1)  # Skip `precision' byte.
                height, width = struct.unpack('&gt;HH', fhandle.read(4))
            except Exception: #IGNORE:W0703
                return
        else:
            return
        return width, height
</code></pre>
",Fred the Fantastic,Fred the Fantastic,1386174082,1433173545,1433173545
http://stackoverflow.com/a/20384135/4411433,Google chart redraw/scale on window resize,62181,thecodeparadox,Nathan Arthur,1327121519,1559028868,1503340648,https://stackoverflow.com/questions/8950761/google-chart-redraw-scale-on-window-resize,"<p>To redraw only when the window resize is completed and avoid multiple triggers, I think is better create an event:</p>

<pre class=""lang-js prettyprint-override""><code>//create trigger to resizeEnd event     
$(window).resize(function() {
    if(this.resizeTO) clearTimeout(this.resizeTO);
    this.resizeTO = setTimeout(function() {
        $(this).trigger('resizeEnd');
    }, 500);
});

//redraw graph when window resize is completed  
$(window).on('resizeEnd', function() {
    drawChart(data);
});
</code></pre>
",Hemerson Varela,Hemerson Varela,1386185166,1386252523,1386252523
http://stackoverflow.com/a/20392392/1984644,How to check if a string is a valid JSON string in JavaScript without using Try/Catch,470473,Chi Chan,Chris Martin,1284476870,1548327761,1458333388,https://stackoverflow.com/questions/3710204/how-to-check-if-a-string-is-a-valid-json-string-in-javascript-without-using-try,"<p><em>I know i'm 3 years late to this question, but I felt like chiming in.</em></p>

<p>While Gumbo's solution works great, it doesn't handle a few cases where no exception is raised for <code>JSON.parse({something that isn't JSON})</code></p>

<p>I also prefer to return the parsed JSON at the same time, so the calling code doesn't have to call <code>JSON.parse(jsonString)</code> a second time.</p>

<p>This seems to work well for my needs:</p>

<pre><code>function tryParseJSON (jsonString){
    try {
        var o = JSON.parse(jsonString);

        // Handle non-exception-throwing cases:
        // Neither JSON.parse(false) or JSON.parse(1234) throw errors, hence the type-checking,
        // but... JSON.parse(null) returns null, and typeof null === ""object"", 
        // so we must check for that, too. Thankfully, null is falsey, so this suffices:
        if (o &amp;&amp; typeof o === ""object"") {
            return o;
        }
    }
    catch (e) { }

    return false;
};
</code></pre>
",Matt H.,Lynn,1386222395,1468573287,1468573287
http://stackoverflow.com/a/20392392/4015333,How to check if a string is a valid JSON string in JavaScript without using Try/Catch,470473,Chi Chan,Chris Martin,1284476870,1548327761,1458333388,https://stackoverflow.com/questions/3710204/how-to-check-if-a-string-is-a-valid-json-string-in-javascript-without-using-try,"<p><em>I know i'm 3 years late to this question, but I felt like chiming in.</em></p>

<p>While Gumbo's solution works great, it doesn't handle a few cases where no exception is raised for <code>JSON.parse({something that isn't JSON})</code></p>

<p>I also prefer to return the parsed JSON at the same time, so the calling code doesn't have to call <code>JSON.parse(jsonString)</code> a second time.</p>

<p>This seems to work well for my needs:</p>

<pre><code>function tryParseJSON (jsonString){
    try {
        var o = JSON.parse(jsonString);

        // Handle non-exception-throwing cases:
        // Neither JSON.parse(false) or JSON.parse(1234) throw errors, hence the type-checking,
        // but... JSON.parse(null) returns null, and typeof null === ""object"", 
        // so we must check for that, too. Thankfully, null is falsey, so this suffices:
        if (o &amp;&amp; typeof o === ""object"") {
            return o;
        }
    }
    catch (e) { }

    return false;
};
</code></pre>
",Matt H.,Lynn,1386222395,1468573287,1468573287
http://stackoverflow.com/a/20398191/104380,Prevent contenteditable adding &lt;div&gt; on ENTER - Chrome,73653,iConnor,iConnor,1377979747,1562337612,1425658462,https://stackoverflow.com/questions/18552336/prevent-contenteditable-adding-div-on-enter-chrome,"<p>add a prevent default to the div</p>

<pre><code>document.body.div.onkeydown = function(e) {
    if ( e.keycode == 13 ){
        e.preventDefault();
            //add a &lt;br&gt;
        div = document.getElementById(""myDiv"");
        div.innerHTML += ""&lt;br&gt;"";
    }
}
</code></pre>
",Math chiller,Math chiller,1386241207,1386241777,1386241777
http://stackoverflow.com/a/20420424/738675,How to replace url parameter with javascript/jquery?,96931,Javier Villanueva,,1314165705,1557916346,0,https://stackoverflow.com/questions/7171099/how-to-replace-url-parameter-with-javascript-jquery,"<p>The following solution combines other answers and handles some special cases:</p>

<ul>
<li>The parameter does not exist in the original url</li>
<li>The parameter is the only parameter</li>
<li>The parameter is first or last</li>
<li>The new parameter value is the same as the old</li>
<li>The url ends with a <code>?</code> character</li>
<li><code>\b</code> ensures another parameter ending with paramName won't be matched</li>
</ul>

<p>Solution:</p>

<pre><code>function replaceUrlParam(url, paramName, paramValue)
{
    if (paramValue == null) {
        paramValue = '';
    }
    var pattern = new RegExp('\\b('+paramName+'=).*?(&amp;|#|$)');
    if (url.search(pattern)&gt;=0) {
        return url.replace(pattern,'$1' + paramValue + '$2');
    }
    url = url.replace(/[?#]$/,'');
    return url + (url.indexOf('?')&gt;0 ? '&amp;' : '?') + paramName + '=' + paramValue;
}
</code></pre>

<p><strong>Known limitations:</strong></p>

<ul>
<li>Does not clear a parameter by setting paramValue to null, instead it sets it to empty string. See <a href=""https://stackoverflow.com/a/25214672"">https://stackoverflow.com/a/25214672</a> if you want to remove the parameter.</li>
</ul>
",stenix,stenix,1386322351,1532331152,1532331152
http://stackoverflow.com/a/20446239/661150,How to check if string ends with .txt,28944,Chronicle,,1386447941,1456959648,0,https://stackoverflow.com/questions/20446201/how-to-check-if-string-ends-with-txt,"<p>Unfortunately this useful function is not in the standard library.  It is easy to write.</p>

<pre><code>bool has_suffix(const std::string &amp;str, const std::string &amp;suffix)
{
    return str.size() &gt;= suffix.size() &amp;&amp;
           str.compare(str.size() - suffix.size(), suffix.size(), suffix) == 0;
}
</code></pre>
",Dietrich Epp,,1386448182,1386448182,0
http://stackoverflow.com/a/20460461/1470961,How to get sign of a number?,20438,hakre,,1317046955,1550851057,0,https://stackoverflow.com/questions/7556574/how-to-get-sign-of-a-number,"<p>Here's a cool one-liner that will do it for you efficiently and reliably:</p>

<pre><code>function sign($n) {
    return ($n &gt; 0) - ($n &lt; 0);
}
</code></pre>
",Milosz,,1386544356,1386544356,0
http://stackoverflow.com/a/20463021/1435042,Converting file size in bytes to human-readable string,85249,Hristo,Hristo,1335986829,1561722323,1514065914,https://stackoverflow.com/questions/10420352/converting-file-size-in-bytes-to-human-readable-string,"<p><strong>Here is a prototype to convert a number to a readable string respecting the new international standards.</strong></p>

<blockquote>
  <p>There are two ways to represent big numbers: You could either display
  them in multiples of 1000 = 10 3 (base 10) or 1024 = 2 10 (base 2). If
  you divide by 1000, you probably use the SI prefix names, if you
  divide by 1024, you probably use the IEC prefix names. The problem
  starts with dividing by 1024. Many applications use the SI prefix
  names for it and some use the IEC prefix names. The current situation
  is a mess. If you see SI prefix names you do not know whether the
  number is divided by 1000 or 1024</p>
</blockquote>

<p><a href=""https://wiki.ubuntu.com/UnitsPolicy"">https://wiki.ubuntu.com/UnitsPolicy</a></p>

<p><a href=""http://en.wikipedia.org/wiki/Template:Quantities_of_bytes"">http://en.wikipedia.org/wiki/Template:Quantities_of_bytes</a></p>

<pre><code>Object.defineProperty(Number.prototype,'fileSize',{value:function(a,b,c,d){
 return (a=a?[1e3,'k','B']:[1024,'K','iB'],b=Math,c=b.log,
 d=c(this)/c(a[0])|0,this/b.pow(a[0],d)).toFixed(2)
 +' '+(d?(a[1]+'MGTPEZY')[--d]+a[2]:'Bytes');
},writable:false,enumerable:false});
</code></pre>

<p>This function contains no <code>loop</code>, and so it's probably faster than some other functions.</p>

<p><strong>Usage:</strong></p>

<p><em>IEC prefix</em></p>

<pre><code>console.log((186457865).fileSize()); // default IEC (power 1024)
//177.82 MiB
//KiB,MiB,GiB,TiB,PiB,EiB,ZiB,YiB
</code></pre>

<p><em>SI prefix</em></p>

<pre><code>console.log((186457865).fileSize(1)); //1,true for SI (power 1000)
//186.46 MB 
//kB,MB,GB,TB,PB,EB,ZB,YB
</code></pre>

<p>i set the IEC as default because i always used binary mode to calculate the size of a file... using the power of 1024</p>

<hr>

<p>If you just want one of them in a short oneliner function:</p>

<p><strong>SI</strong></p>

<pre><code>function fileSizeSI(a,b,c,d,e){
 return (b=Math,c=b.log,d=1e3,e=c(a)/c(d)|0,a/b.pow(d,e)).toFixed(2)
 +' '+(e?'kMGTPEZY'[--e]+'B':'Bytes')
}
//kB,MB,GB,TB,PB,EB,ZB,YB
</code></pre>

<p><strong>IEC</strong></p>

<pre><code>function fileSizeIEC(a,b,c,d,e){
 return (b=Math,c=b.log,d=1024,e=c(a)/c(d)|0,a/b.pow(d,e)).toFixed(2)
 +' '+(e?'KMGTPEZY'[--e]+'iB':'Bytes')
}
//KiB,MiB,GiB,TiB,PiB,EiB,ZiB,YiB
</code></pre>

<p><strong>Usage:</strong></p>

<pre><code>console.log(fileSizeIEC(7412834521));
</code></pre>

<p>if you have some questions about the functions just ask</p>
",cocco,cocco,1386562276,1431769567,1431769567
http://stackoverflow.com/a/20506281/2115462,PHP convert XML to JSON,226038,Bryan Hadlock,Bryan Hadlock,1326346585,1562245551,1326348262,https://stackoverflow.com/questions/8830599/php-convert-xml-to-json,"<p>A common pitfall is to forget that <code>json_encode()</code> does not respect elements with a textvalue <strong>and</strong> attribute(s). It will choose one of those, meaning dataloss.
The function below solves that problem. If one decides to go for the <code>json_encode</code>/<code>decode</code> way, the following function is advised.</p>

<pre><code>function json_prepare_xml($domNode) {
  foreach($domNode-&gt;childNodes as $node) {
    if($node-&gt;hasChildNodes()) {
      json_prepare_xml($node);
    } else {
      if($domNode-&gt;hasAttributes() &amp;&amp; strlen($domNode-&gt;nodeValue)){
         $domNode-&gt;setAttribute(""nodeValue"", $node-&gt;textContent);
         $node-&gt;nodeValue = """";
      }
    }
  }
}

$dom = new DOMDocument();
$dom-&gt;loadXML( file_get_contents($xmlfile) );
json_prepare_xml($dom);
$sxml = simplexml_load_string( $dom-&gt;saveXML() );
$json = json_decode( json_encode( $sxml ) );
</code></pre>

<p>by doing so, <code>&lt;foo bar=""3""&gt;Lorem&lt;/foo&gt;</code> will not end up as <code>{""foo"":""Lorem""}</code> in your JSON.</p>
",Coder Of Salvation,mkaatman,1386713014,1496897033,1496897033
http://stackoverflow.com/a/2050721/2188572,Appending the same string to a list of strings in Python,133187,Kevin,Peter Hansen,1263315017,1556167924,1263315411,https://stackoverflow.com/questions/2050637/appending-the-same-string-to-a-list-of-strings-in-python,"<pre><code>my_list = ['foo', 'fob', 'faz', 'funk']
string = 'bar'
my_new_list = [x + string for x in my_list]
print my_new_list
</code></pre>

<p>This will print:</p>

<pre><code>['foobar', 'fobbar', 'fazbar', 'funkbar']
</code></pre>
",Tendayi Mawushe,,1263315546,1263315546,0
http://stackoverflow.com/a/20602159/5756577,error for hash function of pair of ints,26979,Shambo,Rakholiya Jenish,1387075323,1552243229,1459882060,https://stackoverflow.com/questions/20590656/error-for-hash-function-of-pair-of-ints,"<p>Unfortunately, this program has undefined behavior. C++11 17.6.4.2.1:</p>

<blockquote>
  <p>A program may add a template specialization for any standard library template to namespace std only if the declaration depends on a user-defined type and the specialization meets the standard library requirements for the original template and is not explicitly prohibited.</p>
</blockquote>

<p><code>hash&lt;pair&lt;int,int&gt;&gt;</code> depends on primitive and standard library types only. This is easily worked around by defining your hash class outside of namespace <code>std</code>, and using that hash explicitly in your map declaration:</p>

<pre><code>struct pairhash {
public:
  template &lt;typename T, typename U&gt;
  std::size_t operator()(const std::pair&lt;T, U&gt; &amp;x) const
  {
    return std::hash&lt;T&gt;()(x.first) ^ std::hash&lt;U&gt;()(x.second);
  }
};

class abc {
  std::unordered_map&lt;std::pair&lt;int,int&gt;, int, pairhash&gt; rules;
};
</code></pre>

<p>EDIT: I've used xor to combine the hashes of the pair members here because I'm lazy, but for serious use <a href=""https://stackoverflow.com/questions/5889238/why-is-xor-the-default-way-to-combine-hashes"">xor is a fairly crappy hash combining function</a>.</p>
",Casey,Community,1387157729,1395848819,1495540457
http://stackoverflow.com/a/20643984/1199911,NavUtils.navigateUpTo() does not start any Activity,11015,flx,flx,1384513493,1533906385,1389178509,https://stackoverflow.com/questions/19999619/navutils-navigateupto-does-not-start-any-activity,"<p>I think that method is bugged. I've read support library source code, and that method check for intent's action. It only works when your App was previously created..as you've described, if you kill it from Apps preview, shouldUp method stops working.</p>

<p>I've fixed this using my own ""shouldUpRecreateTask"". When I receive a Notification that creates directly an Activity (Like your behaviour), I send from my BroadCastReceiver a custom Action inside the intent. Then, in my Method I do the next thing:</p>

<pre><code>private final boolean shouldUpRecreateTask(Activity from){
    String action = from.getIntent().getAction();
    return action != null &amp;&amp; action.equals(com.xxxxxx.activities.Intent.FROM_NOTIFICATION);
}
</code></pre>

<p>..........................</p>

<pre><code> if (shouldUpRecreateTask(this)) {
      TaskStackBuilder.create(this)
       .addNextIntentWithParentStack(upIntent)
       .startActivities();
 } else {
       fillUpIntentWithExtras(upIntent);
       NavUtils.navigateUpTo(this, upIntent);
 }
</code></pre>
",noni,,1387312024,1387312024,0
http://stackoverflow.com/a/2068407/862877,"How do we control web page caching, across all browsers?",834974,Edward Wilde,Peter Mortensen,1220875729,1561499877,1561499877,https://stackoverflow.com/questions/49547/how-do-we-control-web-page-caching-across-all-browsers,"<h1>Introduction</h1>

<p>The correct minimum set of headers that works across all mentioned clients (and proxies):</p>

<pre><code>Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: 0
</code></pre>

<p>The <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9"" rel=""noreferrer""><code>Cache-Control</code></a> is per the HTTP 1.1 spec for clients and proxies (and implicitly required by some clients next to <code>Expires</code>). The <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.32"" rel=""noreferrer""><code>Pragma</code></a> is per the HTTP 1.0 spec for prehistoric clients. The <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21"" rel=""noreferrer""><code>Expires</code></a> is per the HTTP 1.0 and 1.1 spec for clients and proxies. In HTTP 1.1, the <code>Cache-Control</code> takes precedence over <code>Expires</code>, so it's after all for HTTP 1.0 proxies only.</p>

<p>If you don't care about IE6 and its broken caching when serving pages over HTTPS with only <code>no-store</code>, then you could omit <code>Cache-Control: no-cache</code>.</p>

<pre><code>Cache-Control: no-store, must-revalidate
Pragma: no-cache
Expires: 0
</code></pre>

<p>If you don't care about IE6 nor HTTP 1.0 clients (HTTP 1.1 was introduced 1997), then you could omit <code>Pragma</code>.</p>

<pre><code>Cache-Control: no-store, must-revalidate
Expires: 0
</code></pre>

<p>If you don't care about HTTP 1.0 proxies either, then you could omit <code>Expires</code>.</p>

<pre><code>Cache-Control: no-store, must-revalidate
</code></pre>

<p>On the other hand, if the server auto-includes a valid <code>Date</code> header, then you could theoretically omit <code>Cache-Control</code> too and rely on <code>Expires</code> only.</p>

<pre><code>Date: Wed, 24 Aug 2016 18:32:02 GMT
Expires: 0
</code></pre>

<p>But that may fail if e.g. the enduser manipulates the operating system date and the client software is relying on it.</p>

<p>Other <code>Cache-Control</code> parameters such as <code>max-age</code> are irrelevant if the abovementioned <code>Cache-Control</code> parameters are specified. The <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29"" rel=""noreferrer""><code>Last-Modified</code></a> header as included in most other answers here is <em>only</em> interesting if you <strong>actually want</strong> to cache the request, so you don't need to specify it at all.</p>

<h1>How to set it?</h1>

<p>Using PHP:</p>

<pre class=""lang-php prettyprint-override""><code>header(""Cache-Control: no-cache, no-store, must-revalidate""); // HTTP 1.1.
header(""Pragma: no-cache""); // HTTP 1.0.
header(""Expires: 0""); // Proxies.
</code></pre>

<p>Using Java Servlet, or Node.js:</p>

<pre class=""lang-java prettyprint-override""><code>response.setHeader(""Cache-Control"", ""no-cache, no-store, must-revalidate""); // HTTP 1.1.
response.setHeader(""Pragma"", ""no-cache""); // HTTP 1.0.
response.setHeader(""Expires"", ""0""); // Proxies.
</code></pre>

<p>Using ASP.NET-MVC</p>

<pre class=""lang-cs prettyprint-override""><code>Response.Cache.SetCacheability(HttpCacheability.NoCache);  // HTTP 1.1.
Response.Cache.AppendCacheExtension(""no-store, must-revalidate"");
Response.AppendHeader(""Pragma"", ""no-cache""); // HTTP 1.0.
Response.AppendHeader(""Expires"", ""0""); // Proxies.
</code></pre>

<p>Using ASP.NET Web API:</p>

<pre class=""lang-cs prettyprint-override""><code>// `response` is an instance of System.Net.Http.HttpResponseMessage
response.Headers.CacheControl = new CacheControlHeaderValue
{
    NoCache = true,
    NoStore = true,
    MustRevalidate = true
};
response.Headers.Pragma.ParseAdd(""no-cache"");
// We can't use `response.Content.Headers.Expires` directly
// since it allows only `DateTimeOffset?` values.
response.Content?.Headers.TryAddWithoutValidation(""Expires"", 0.ToString()); 
</code></pre>

<p>Using ASP.NET:</p>

<pre class=""lang-cs prettyprint-override""><code>Response.AppendHeader(""Cache-Control"", ""no-cache, no-store, must-revalidate""); // HTTP 1.1.
Response.AppendHeader(""Pragma"", ""no-cache""); // HTTP 1.0.
Response.AppendHeader(""Expires"", ""0""); // Proxies.
</code></pre>

<p>Using ASP:</p>

<pre class=""lang-vb prettyprint-override""><code>Response.addHeader ""Cache-Control"", ""no-cache, no-store, must-revalidate"" ' HTTP 1.1.
Response.addHeader ""Pragma"", ""no-cache"" ' HTTP 1.0.
Response.addHeader ""Expires"", ""0"" ' Proxies.
</code></pre>

<p>Using Ruby on Rails, or Python/Flask:</p>

<pre class=""lang-rb prettyprint-override""><code>headers[""Cache-Control""] = ""no-cache, no-store, must-revalidate"" # HTTP 1.1.
headers[""Pragma""] = ""no-cache"" # HTTP 1.0.
headers[""Expires""] = ""0"" # Proxies.
</code></pre>

<p>Using Python/Django:</p>

<pre class=""lang-py prettyprint-override""><code>response[""Cache-Control""] = ""no-cache, no-store, must-revalidate"" # HTTP 1.1.
response[""Pragma""] = ""no-cache"" # HTTP 1.0.
response[""Expires""] = ""0"" # Proxies.
</code></pre>

<p>Using Python/Pyramid:</p>

<pre class=""lang-py prettyprint-override""><code>request.response.headerlist.extend(
    (
        ('Cache-Control', 'no-cache, no-store, must-revalidate'),
        ('Pragma', 'no-cache'),
        ('Expires', '0')
    )
)
</code></pre>

<p>Using Go:</p>

<pre class=""lang-default prettyprint-override""><code>responseWriter.Header().Set(""Cache-Control"", ""no-cache, no-store, must-revalidate"") // HTTP 1.1.
responseWriter.Header().Set(""Pragma"", ""no-cache"") // HTTP 1.0.
responseWriter.Header().Set(""Expires"", ""0"") // Proxies.
</code></pre>

<p>Using Apache <code>.htaccess</code> file:</p>

<pre class=""lang-xml prettyprint-override""><code>&lt;IfModule mod_headers.c&gt;
    Header set Cache-Control ""no-cache, no-store, must-revalidate""
    Header set Pragma ""no-cache""
    Header set Expires 0
&lt;/IfModule&gt;
</code></pre>

<p>Using HTML4:</p>

<pre class=""lang-html prettyprint-override""><code>&lt;meta http-equiv=""Cache-Control"" content=""no-cache, no-store, must-revalidate"" /&gt;
&lt;meta http-equiv=""Pragma"" content=""no-cache"" /&gt;
&lt;meta http-equiv=""Expires"" content=""0"" /&gt;
</code></pre>

<h1>HTML meta tags vs HTTP response headers</h1>

<p>Important to know is that when a HTML page is served over a HTTP connection, and a header is present in <strong>both</strong> the HTTP response headers and the HTML <code>&lt;meta http-equiv&gt;</code> tags, then the one specified in the HTTP response header will get precedence over the HTML meta tag. The HTML meta tag will only be used when the page is viewed from local disk file system via a <code>file://</code> URL. See also <a href=""http://www.w3.org/TR/html4/charset.html#h-5.2.2"" rel=""noreferrer"">W3 HTML spec chapter 5.2.2</a>. Take care with this when you don't specify them programmatically, because the webserver can namely include some default values. </p>

<p>Generally, you'd better just <strong>not</strong> specify the HTML meta tags to avoid confusion by starters, and rely on hard HTTP response headers. Moreover, specifically those <code>&lt;meta http-equiv&gt;</code> tags are <a href=""http://validator.w3.org"" rel=""noreferrer""><strong>invalid</strong></a> in HTML5. Only the <code>http-equiv</code> values listed in <a href=""http://w3c.github.io/html/document-metadata.html#pragma-directives"" rel=""noreferrer"">HTML5 specification</a> are allowed.</p>

<h1>Verifying the actual HTTP response headers</h1>

<p>To verify the one and other, you can see/debug them in HTTP traffic monitor of webbrowser's developer toolset. You can get there by pressing F12 in Chrome/Firefox23+/IE9+, and then opening the ""Network"" or ""Net"" tab panel, and then clicking the HTTP request of interest to uncover all detail about the HTTP request and response. The <a href=""https://i.stack.imgur.com/fSnXH.png"" rel=""noreferrer"">below screenshot</a> is from Chrome:</p>

<p><img src=""https://i.stack.imgur.com/fSnXH.png"" alt=""Chrome developer toolset HTTP traffic monitor showing HTTP response headers on stackoverflow.com""></p>

<h1>I want to set those headers on file downloads too</h1>

<p>First of all, this question and answer is targeted on ""web pages"" (HTML pages), not ""file downloads"" (PDF, zip, Excel, etc). You'd better have them cached and make use of some file version identifier somewhere in URI path or querystring to force a redownload on a changed file. When applying those no-cache headers on file downloads anyway, then beware of the IE7/8 bug when serving a file download over HTTPS instead of HTTP. For detail, see <a href=""https://stackoverflow.com/q/5034454"">IE cannot download foo.jsf. IE was not able to open this internet site. The requested site is either unavailable or cannot be found</a>.</p>
",BalusC,Franklin Yu,1263513018,1545839487,1545839487
http://stackoverflow.com/a/20689873/1407497,How to get coverage data from a django app when running in gunicorn,1686,Kimvais,Games Brainiac,1380190174,1409932533,1381158661,https://stackoverflow.com/questions/19025336/how-to-get-coverage-data-from-a-django-app-when-running-in-gunicorn,"<p><code>coverage gunicorn &lt;params&gt;</code> does not work, because gunicorn creates worker processes, and the <code>coverage</code> module can't work across forks (basically, creation of new processes). You can use <a href=""http://nedbatchelder.com/code/coverage/api.html"" rel=""noreferrer"">the coverage API</a>, though, for example in the python module that contains your WSGI application:</p>

<pre><code># wsgi_with_coverage.py
import atexit
import sys
import coverage
cov = coverage.coverage()
cov.start()

from wsgi import application  # adjust to python module containing your wsgi application


def save_coverage():
    print &gt;&gt; sys.stderr, ""saving coverage""
    cov.stop()
    cov.save()

atexit.register(save_coverage)
</code></pre>

<p>Then run <code>gunicorn -w 1 wsgi_with_coverage:application &lt;other params&gt;</code>.</p>

<p>The problem is, the <code>atexit</code> functions are not called if you kill the gunicorn process, for example via CTRL+C. But they <em>are</em> called on <code>SIGHUP</code>, so if you do <code>kill -HUP $(cat &lt;gunicorn_pidfile_here&gt;)</code>, the coverage data should be saved (by default to "".coverage"" in the current directory).</p>

<p>A possible caveat is that this won't work with more than one gunicorn worker, because they would all overwrite the "".coverage"" file. If you absolutely need more than one worker, you could write to <code>"".coverage-%d"" % os.getpid()</code> (set the file name <a href=""http://nedbatchelder.com/code/coverage/api.html#the-coverage-module"" rel=""noreferrer"">via the <code>data_file</code> parameter to the <code>coverage</code> constructor</a>) and use <a href=""http://nedbatchelder.com/code/coverage/api.html#coverage.coverage.combine"" rel=""noreferrer"">the <code>combine()</code> method</a> to merge the individual measurements.</p>

<p>This should work on other WSGI servers, too, depending on whether they allow their worker processes to clean up via the <code>atexit</code> method.</p>
",sk1p,,1387480482,1387480482,0
http://stackoverflow.com/a/20691431/315168,"Is it possible in python to kill process that is listening on specific port, for example 8080?",5364,Damir,Technext,1387485625,1559730274,1535208373,https://stackoverflow.com/questions/20691258/is-it-possible-in-python-to-kill-process-that-is-listening-on-specific-port-for,"<p>You could use the <a href=""https://pypi.python.org/pypi/psutil"" rel=""nofollow noreferrer"">psutil python module</a>. Some untested code that should point you in the right direction:</p>

<pre><code>from psutil import process_iter
from signal import SIGTERM # or SIGKILL

for proc in process_iter():
    for conns in proc.connections(kind='inet'):
        if conns.laddr.port == 8080:
            proc.send_signal(SIGTERM) # or SIGKILL
</code></pre>
",Toote,Toote,1387486267,1550941248,1550941248
http://stackoverflow.com/a/20727515/3962551,Alternatives to PreferenceFragment with android-support-v4,51466,CodePrimate,CodePrimate,1332231421,1492228413,1332238111,https://stackoverflow.com/questions/9783368/alternatives-to-preferencefragment-with-android-support-v4,"<h2>UPDATE - 6/11/2015</h2>

<p>Support-v7 library now includes <code>PreferenceFragmentCompat</code>. So it will be a better idea to use it.</p>

<hr>

<p>Add the following project as a library project to your application.</p>

<p><a href=""https://github.com/kolavar/android-support-v4-preferencefragment"" rel=""nofollow noreferrer"">https://github.com/kolavar/android-support-v4-preferencefragment</a></p>

<p>You can keep everything including your fragment transaction as it is. When importing the <code>PreferenceFragment</code> class, make sure the correct import header is user.</p>

<pre><code>import android.support.v4.preference.PreferenceFragment;
</code></pre>

<p>instead of</p>

<pre><code>import android.preference.PreferenceFragment;
</code></pre>
",Subin Sebastian,cricket_007,1387700140,1492228413,1492228413
http://stackoverflow.com/a/2072890/1578318,Find out if string ends with another string in C++,148747,sofr,Community,1242548368,1553178279,1553178279,https://stackoverflow.com/questions/874134/find-out-if-string-ends-with-another-string-in-c,"<p>Use this function:</p>

<pre><code>inline bool ends_with(std::string const &amp; value, std::string const &amp; ending)
{
    if (ending.size() &gt; value.size()) return false;
    return std::equal(ending.rbegin(), ending.rend(), value.rbegin());
}
</code></pre>
",Joseph,Tshepang,1263571174,1415715705,1415715705
http://stackoverflow.com/a/20732091/796999,Converting file size in bytes to human-readable string,85249,Hristo,Hristo,1335986829,1561722323,1514065914,https://stackoverflow.com/questions/10420352/converting-file-size-in-bytes-to-human-readable-string,"<p>Another embodiment of the calculation</p>

<pre><code>function humanFileSize(size) {
    var i = Math.floor( Math.log(size) / Math.log(1024) );
    return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];
};
</code></pre>
",Andrew V.,,1387733530,1387733530,0
http://stackoverflow.com/a/20740693/763010,angular js unknown provider,264684,Stefan Ernst,Mel,1347195568,1537790420,1503909143,https://stackoverflow.com/questions/12339272/angular-js-unknown-provider,"<p>For me, this error was caused by running the minified version of my angular app. Angular docs suggest a way to work around this. Here is the relevant quote describing the issue, and you can find the suggested solution in the docs themselves <a href=""http://docs.angularjs.org/tutorial/step_05"" rel=""nofollow"" title=""Angular Docs"">here</a>:</p>

<blockquote>
  <p>A Note on Minification
  Since Angular infers the controller's dependencies from the names of arguments to the controller's constructor function, if you were to minify the JavaScript code for PhoneListCtrl controller, all of its function arguments would be minified as well, and the dependency injector would not be able to identify services correctly.</p>
</blockquote>
",Sasha,,1387791462,1387791462,0
http://stackoverflow.com/a/20767836/84283,Fast stable sorting algorithm implementation in javascript,46850,William Casarin,,1253025632,1535989171,0,https://stackoverflow.com/questions/1427608/fast-stable-sorting-algorithm-implementation-in-javascript,"<p>Here's a stable implementation. It works by using the native sort, but in cases where elements compare as equal, you break ties using the original index position.</p>

<pre><code>function stableSort(arr, cmpFunc) {
    //wrap the arr elements in wrapper objects, so we can associate them with their origional starting index position
    var arrOfWrapper = arr.map(function(elem, idx){
        return {elem: elem, idx: idx};
    });

    //sort the wrappers, breaking sorting ties by using their elements orig index position
    arrOfWrapper.sort(function(wrapperA, wrapperB){
        var cmpDiff = cmpFunc(wrapperA.elem, wrapperB.elem);
        return cmpDiff === 0 
             ? wrapperA.idx - wrapperB.idx
             : cmpDiff;
    });

    //unwrap and return the elements
    return arrOfWrapper.map(function(wrapper){
        return wrapper.elem;
    });
}
</code></pre>

<p>a non-thorough test</p>

<pre><code>var res = stableSort([{a:1, b:4}, {a:1, b:5}], function(a, b){
    return a.a - b.a;
});
console.log(res);
</code></pre>

<p><a href=""https://stackoverflow.com/a/2085225/249538"">another answer</a> alluded to this, but didn't post teh codez.</p>

<p>but, its not fast according to my <a href=""http://jsperf.com/stable-sort-comparison"" rel=""nofollow noreferrer"">benchmark</a>. I modified a <a href=""http://en.literateprograms.org/Merge_sort_(JavaScript)"" rel=""nofollow noreferrer"">merge sort impl</a> to accept a custom comparator function, and it was much faster.</p>
",goat,Community,1387928471,1387991146,1495541427
http://stackoverflow.com/a/20786262/69362,What is the Angular ui-router lifecycle? (for debugging silent errors),23735,Adam,Community,1387809763,1522058484,1495540962,https://stackoverflow.com/questions/20745761/what-is-the-angular-ui-router-lifecycle-for-debugging-silent-errors,"<p>After some experimenting, I figured out how to see into the lifecycle well enough to debug my app and get a feel for what was happening.  Using all the events, including onEnter, onExit, stateChangeSuccess, viewContentLoaded from <a href=""https://github.com/angular-ui/ui-router/wiki#onenter-and-onexit-callbacks"">here</a>, gave me a decent picture of when things are happening in a way that's more both more flexible and specific to my code than a written out lifecycle.  In the app module's ""run"" function, I placed:</p>

<p>This code would have saved me days of time and confusion if I started using it when I first started with Angular and UI-router.  UI-router needs a ""debug"" mode that enables this by default.</p>

<pre><code>$rootScope.$on('$stateChangeStart',function(event, toState, toParams, fromState, fromParams){
  console.log('$stateChangeStart to '+toState.name+'- fired when the transition begins. toState,toParams : \n',toState, toParams);
});
$rootScope.$on('$stateChangeError',function(event, toState, toParams, fromState, fromParams, error){
  console.log('$stateChangeError - fired when an error occurs during transition.');
  console.log(arguments);
});
$rootScope.$on('$stateChangeSuccess',function(event, toState, toParams, fromState, fromParams){
  console.log('$stateChangeSuccess to '+toState.name+'- fired once the state transition is complete.');
});
$rootScope.$on('$viewContentLoading',function(event, viewConfig){
   console.log('$viewContentLoading - view begins loading - dom not rendered',viewConfig);
});

/* $rootScope.$on('$viewContentLoaded',function(event){
     // runs on individual scopes, so putting it in ""run"" doesn't work.
     console.log('$viewContentLoaded - fired after dom rendered',event);
   }); */

$rootScope.$on('$stateNotFound',function(event, unfoundState, fromState, fromParams){
  console.log('$stateNotFound '+unfoundState.to+'  - fired when a state cannot be found by its name.');
  console.log(unfoundState, fromState, fromParams);
});
</code></pre>
",Adam,Der Hochstapler,1388066968,1480081292,1480081292
http://stackoverflow.com/a/20788246/320057,Can I reclaim control of the URL hash-fragment from AngularJS?,4129,mhelvens,mhelvens,1385647579,1388076846,1387895084,https://stackoverflow.com/questions/20268213/can-i-reclaim-control-of-the-url-hash-fragment-from-angularjs,"<p><code>#</code> seems to work well enough on the angular api docs page. So with a little snooping and testing I found that</p>

<pre><code>app.config(function($locationProvider) {
    $locationProvider.html5Mode(true).hashPrefix('!');
});
</code></pre>

<p>makes the difference.</p>
",towr,,1388076846,1388076846,0
http://stackoverflow.com/a/20791806/414642,shoulda matchers should validate_uniqueness_of failing with scope,4378,bdwain,Adrian Mann,1367184770,1526487974,1434101087,https://stackoverflow.com/questions/16268146/shoulda-matchers-should-validate-uniqueness-of-failing-with-scope,"<p>While this is a known issue, there is a way around it.</p>

<p>If you first create a record and then test the uniqueness validation, it will work. </p>

<p>So, instead of simply writing </p>

<pre><code>it { should validate_uniqueness_of(:user_id) }
</code></pre>

<p>You can write </p>

<pre><code>it do
  FactoryGirl.create(:player)
  should validate_uniqueness_of(:user_id)
end
</code></pre>

<p>And the uniqueness validation spec will work.</p>

<p>Reference: <a href=""http://rubydoc.info/github/thoughtbot/shoulda-matchers/master/frames"" rel=""noreferrer"">http://rubydoc.info/github/thoughtbot/shoulda-matchers/master/frames</a></p>
",Jessie A. Young,,1388095039,1388095039,0
http://stackoverflow.com/a/20813109/1064917,Ruby model output id as object oid,3587,azz0r,mu is too short,1378416327,1428412306,1378423030,https://stackoverflow.com/questions/18646223/ruby-model-output-id-as-object-oid,"<p>Iterating on Kirk's answer:</p>

<p>In Mongoid 4 the Mopeds BSON implementation has been removed in favor of the MongoDB bson gem, so the correct version for Mongoid 4 users is:</p>

<pre><code>module BSON
  class ObjectId
    def to_json(*args)
      to_s.to_json
    end

    def as_json(*args)
      to_s.as_json
    end
  end
end
</code></pre>
",Greg Funtusov,,1388223980,1388223980,0
http://stackoverflow.com/a/20818752/1477165,Rails  Convert time duration to integer,1092,cmw,cmw,1388259485,1388297432,1388260188,https://stackoverflow.com/questions/20818551/rails-convert-time-duration-to-integer,"<p>Is <code>duration</code> a string?</p>

<p>If so, you can go with:</p>

<pre><code>seconds = duration.split(':').reverse.map.with_index.sum do |m, i| 
  m.to_f * 60 ** i
end
</code></pre>

<p>:))</p>
",Bart,Bart,1388260662,1388260978,1388260978
http://stackoverflow.com/a/2086118/1116230,Finding the smallest circle that encompasses other circles?,6502,Corey Ogburn,user1118321,1263803412,1427069989,1427069989,https://stackoverflow.com/questions/2084695/finding-the-smallest-circle-that-encompasses-other-circles,"<p>Given two circles, with centers [x1,y1], [x2,y2], and radii R1 and R2. What is the center of the enclosing circle?</p>

<p>Assume that R1 is no larger than R2. If the second circle is the smaller, then just swap them.</p>

<ol>
<li><p>Compute the distance between centers of the circles.</p>

<p>D = sqrt((x1-x2)^2 + (y1-y2)^2)</p></li>
<li><p>Does the first circle lie entirely inside the second circle? Thus if (D + R1) &lt;= R2, then we are done. Return the larger circle as the enclosing circle, with a center of [x1,x2], with radius R2.</p></li>
<li><p>If (D+R1) > R2, then the enclosing circle has a radius of (D+R1+R2)/2</p></li>
</ol>

<p>In this latter case, the center of the enclosing circle must lie along the line connecting the two centers. So we can write the new center as</p>

<pre><code>center = (1-theta)*[x1,y1] + theta*[x2,y2]
</code></pre>

<p>where theta is given by</p>

<pre><code>theta = 1/2 + (R2 - R1)/(2*D)
</code></pre>

<p>Note that theta will always be a positive number, since we have assured that (D+R1) > R2. Likewise, we should be able to ensure that theta is never larger than 1. These two conditions ensure that the enclosing center lies strictly between the two original circle centers.</p>
",user85109,,1263819568,1263819568,0
http://stackoverflow.com/a/20892048/145346,Detecting width: auto in jQuery,12162,Derek H,Derek H,1282661185,1430210513,1282750715,https://stackoverflow.com/questions/3557718/detecting-width-auto-in-jquery,"<p>As far as I know, there is no native jQuery function to detect auto widths or heights.  So I wrote a plugin to do it.</p>

<pre><code>$.fn.isAuto = function(dimension){
    if (dimension == 'width'){
        var originalWidth = this.innerWidth();
        var marginLeft = parseInt(this.css('margin-left'));
        var testMarginWidth = marginLeft+50;
        this.css('margin-left', testMarginWidth);
        var newWidth = this.innerWidth();
        this.css('margin-left', marginLeft);
        if(newWidth&lt;originalWidth){
            return true;    
        }
        else{
            return false;
        }
    }
    else if(dimension == 'height'){
        var originalHeight = this.height();
        this.append('&lt;div id=""test""&gt;&lt;/div&gt;');
        var testHeight = originalHeight+500;
        $('#test').css({height: testHeight});
        var newHeight = this.height();
        $('#test').remove();
        if(newHeight&gt;originalHeight){
            return true;    
        }
        else{
            return false;
        }
    }
};
</code></pre>

<p>Originally, I had written it to do height, so I just expanded it to include width.  You just call it like this:</p>

<pre><code>$('#element').isAuto('width');
</code></pre>

<p>or</p>

<pre><code>$('#element').isAuto('height');
</code></pre>

<p>Here is a <a href=""http://jsfiddle.net/kAnKa/34/"" rel=""nofollow"">fiddle</a> demonstrating the plugin's functionality.</p>
",zsaat14,zsaat14,1388697415,1388704558,1388704558
http://stackoverflow.com/a/20905954/2075875,Android NullPointerException in Instrumentation.execStartActivity,4076,Adrian,,1373375430,1560890208,0,https://stackoverflow.com/questions/17549030/android-nullpointerexception-in-instrumentation-execstartactivity,"<p>I have the same error, I also use Google Maps API. It seems to happen on all Android versions and phones. Just to mention few:</p>

<p>AN10DG3, GT-I8190, F815, GT-I9300, GOOPHONE, HTC One, KFTT, MID8127, KFAPWI, AN10DG3 </p>

<pre><code>java.lang.NullPointerException
at android.app.Instrumentation.execStartActivity(Instrumentation.java:1409)
at android.app.Activity.startActivityForResult(Activity.java:3351)
at android.app.Activity.startActivityForResult(Activity.java:3312)
at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:839)
at android.app.Activity.startActivity(Activity.java:3522)
at android.app.Activity.startActivity(Activity.java:3490)
at com.google.android.gms.dynamic.a$5.onClick(Unknown Source)
at android.view.View.performClick(View.java:4084)
at android.view.View$PerformClick.run(View.java:16966)
at android.os.Handler.handleCallback(Handler.java:615)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method) 
</code></pre>

<p>as I read somewhere, solution is:</p>

<blockquote>
  <p>Above mentioned problem can occur if you have emulator or device in which google play services are not installed. I don't have perfect solution but I figured out some work around to save your app from crashing. In this case you have to follow simple steps</p>
  
  <ol>
  <li>Override startActivityForResult(intent, requestcode)</li>
  <li>In startActivityForResult add super call super.startActivityForResult in try catch and catch the NullPointerException</li>
  </ol>
  
  <p>Easy its done Now you can trap the nullpointerexception here and add your error handling in catch</p>
</blockquote>

<pre><code>@Override
public void startActivityForResult(Intent intent, int requestCode) {
    try {
        super.startActivityForResult(intent, requestCode);
    } catch (Exception e) {
        // fixes Google Maps bug: http://stackoverflow.com/a/20905954/2075875
    }
}
</code></pre>
",Malachiasz,JJD,1388759633,1456769790,1456769790
http://stackoverflow.com/a/20912826/40956,Rails: How can I use Squeel with hstore?,784,Railsana,number5,1346857006,1388783775,1348451321,https://stackoverflow.com/questions/12284273/rails-how-can-i-use-squeel-with-hstore,"<p>I just dug into this.  The answer seemed to be in <a href=""https://github.com/activerecord-hackery/squeel/blob/master/lib/squeel/nodes/operators.rb"" rel=""nofollow"">this file</a>, essentially you can add your own operations in here.</p>

<p>This example uses <code>@&gt;</code> to hunt through PostgreSQL arrays (<a href=""http://slid.es/danmcclain/supercharging-activerecord-with-postgresql"" rel=""nofollow"">demonstrated in this presentation</a>).</p>

<pre><code>module Squeel
  module Nodes
    module Operators
      def within *list
        list = ""{#{list.map(&amp;:to_s).join(',')}}""
        Operation.new self, :'@&gt;', list
      end
    end
  end
end
</code></pre>

<p>After putting this monkey-patch in, the following Squeel statement becomes possible, assuming there is a <code>Note</code> model which has a <code>tags</code> array field.</p>

<pre><code>Note.where { tags.within 'first tag', 'second tag' }
</code></pre>

<p>Which should generate SQL that looks like this:</p>

<pre><code>""SELECT \""notes\"".* FROM \""notes\""  WHERE \""notes\"".\""tags\"" @&gt; '{first tag,second tag}'""
</code></pre>
",ironchamber,,1388783775,1388783775,0
http://stackoverflow.com/a/2091331/1361529,Parse query string in JavaScript,379636,sinaw,Community,1263865776,1508338660,1495541895,https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript,"<p>Here is a fast and easy way of parsing query strings in JavaScript:</p>

<pre><code>function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split('&amp;');
    for (var i = 0; i &lt; vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
    console.log('Query variable %s not found', variable);
}
</code></pre>

<p>Now make a request to <strong>page.html?x=Hello</strong>:</p>

<pre><code>console.log(getQueryVariable('x'));
</code></pre>
",Tarik,DanBrianWhite,1263879291,1497639773,1497639773
http://stackoverflow.com/a/21014439/1457934,How is Ruby TCPSocket timeout defined?,7604,ohho,Brian Tompsett - ,1389253155,1497498574,1497389910,https://stackoverflow.com/questions/21014272/how-is-ruby-tcpsocket-timeout-defined,"<p>Use <code>begin .. rescue Errno::ETIMEDOUT</code> to catch the timeout:</p>

<pre><code>require 'socket'

begin
  TCPSocket.new('www.example.com', 111)
rescue Errno::ETIMEDOUT
  p 'timeout'
end
</code></pre>

<p>To catch any socket exceptions, use <code>SystemCallError</code> instead.</p>

<p>According to the <a href=""http://www.ruby-doc.org/core-2.0/SystemCallError.html"" rel=""nofollow noreferrer"">SystemCallError documentation</a>:</p>

<p>SystemCallError is the base class for all low-level platform-dependent errors.</p>

<blockquote>
  <p>The errors available on the current platform are subclasses of
  SystemCallError and are defined in the Errno module.</p>
</blockquote>

<hr>

<p><code>TCPSocket.new</code> does not support timeout directly.</p>

<p>Use <a href=""http://www.ruby-doc.org/stdlib-2.0/libdoc/socket/rdoc/Socket.html#method-i-connect_nonblock"" rel=""nofollow noreferrer""><code>Socket::connect_non_blocking</code></a> and <a href=""http://www.ruby-doc.org/core-2.0/IO.html#method-c-select"" rel=""nofollow noreferrer""><code>IO::select</code></a> to set timeout.</p>

<pre><code>require 'socket'

def connect(host, port, timeout = 5)

  # Convert the passed host into structures the non-blocking calls
  # can deal with
  addr = Socket.getaddrinfo(host, nil)
  sockaddr = Socket.pack_sockaddr_in(port, addr[0][4])

  Socket.new(Socket.const_get(addr[0][0]), Socket::SOCK_STREAM, 0).tap do |socket|
    socket.setsockopt(Socket::IPPROTO_TCP, Socket::TCP_NODELAY, 1)

    begin
      # Initiate the socket connection in the background. If it doesn't fail 
      # immediatelyit will raise an IO::WaitWritable (Errno::EINPROGRESS) 
      # indicating the connection is in progress.
      socket.connect_nonblock(sockaddr)

    rescue IO::WaitWritable
      # IO.select will block until the socket is writable or the timeout
      # is exceeded - whichever comes first.
      if IO.select(nil, [socket], nil, timeout)
        begin
          # Verify there is now a good connection
          socket.connect_nonblock(sockaddr)
        rescue Errno::EISCONN
          # Good news everybody, the socket is connected!
        rescue
          # An unexpected exception was raised - the connection is no good.
          socket.close
          raise
        end
      else
        # IO.select returns nil when the socket is not ready before timeout 
        # seconds have elapsed
        socket.close
        raise ""Connection timeout""
      end
    end
  end
end

connect('www.example.com', 111, 2)
</code></pre>

<p>The above code comes from ""<a href=""http://spin.atomicobject.com/2013/09/30/socket-connection-timeout-ruby/"" rel=""nofollow noreferrer"">Setting a Socket Connection Timeout in Ruby</a>"".</p>
",falsetru,the Tin Man,1389253767,1497374677,1497374677
http://stackoverflow.com/a/21015031/654755,How much of a git sha is *generally* considered necessary to uniquely identify a change in a given codebase?,46240,Jun-Dai Bates-Kobashigawa,,1375990641,1501086449,0,https://stackoverflow.com/questions/18134627/how-much-of-a-git-sha-is-generally-considered-necessary-to-uniquely-identify-a,"<p>Note: you can ask <a href=""http://git-scm.com/docs/git-rev-parse"" rel=""noreferrer""><code>git rev-parse --short</code></a> for the shortest and yet unique SHA1.<br>
See ""<a href=""https://stackoverflow.com/a/16413382/6309"">git get short hash from regular hash</a>""</p>

<pre><code>git rev-parse --short=4 921103db8259eb9de72f42db8b939895f5651489
92110
</code></pre>

<blockquote>
  <p>As you can see in my example the SHA1 has a length of 5 even if I specified a length of 4.</p>
</blockquote>

<hr>

<p>For big repos, 7 isn't enough since 2010, and <a href=""https://github.com/git/git/commit/dce96489162b05ae3463741f7f0365ff56f0de36"" rel=""noreferrer"">commit dce9648</a> by Linus Torvalds himself (git 1.7.4.4, Oct 2010):</p>

<blockquote>
  <p>The default of 7 comes from fairly early in git development, when seven hex digits was a lot (it covers about 250+ million hash values).<br>
  Back then I thought that 65k revisions was a lot (it was what we were about to hit in BK), and each revision tends to be about 5-10 new objects or so, so a million objects was a big number.</p>
</blockquote>

<p>(BK = BitKeeper)</p>

<blockquote>
  <p>These days, the kernel isn't even the largest git project, and even the kernel has about 220k revisions (<em>much</em> bigger than the BK tree ever was) and we are approaching two million objects.<br>
  At that point, seven hex digits is still unique for a lot of them, but when we're talking about just two orders of magnitude difference between number of objects and the hash size, there <em>will</em> be collisions in truncated hash values.<br>
  It's no longer even close to unrealistic - it happens all the time.</p>
  
  <p><strong>We should both increase the default abbrev that was unrealistically small, <em>and</em> add a way for people to set their own default per-project in the git config file</strong>.</p>
</blockquote>

<pre><code>core.abbrev
</code></pre>

<blockquote>
  <p>Set the length object names are abbreviated to.<br>
  If unspecified, many commands abbreviate to 7 hexdigits, which may not be enough for abbreviated object names to stay unique for sufficiently long time.</p>
</blockquote>

<p><a href=""https://github.com/git/git/blob/dce96489162b05ae3463741f7f0365ff56f0de36/environment.c#L18"" rel=""noreferrer""><code>environment.c</code></a>:</p>

<pre><code>int minimum_abbrev = 4, default_abbrev = 7;
</code></pre>

<p>Note: As <a href=""https://stackoverflow.com/questions/18134627/how-much-of-a-git-sha-is-generally-considered-necessary-to-uniquely-identify-a/21015031#comment65460928_21015031"">commented below</a> by <a href=""https://stackoverflow.com/users/561422/marco-m"">marco.m</a>, <code>core.abbrevLenght</code> was renamed in <code>core.abbrev</code> in that same Git 1.7.4.4 in <a href=""https://github.com/git/git/commit/a71f09fe3e8b047d88b5f439c6d552e8fc7e8293"" rel=""noreferrer"">commit a71f09f</a> </p>

<blockquote>
  <h2>Rename <code>core.abbrevlength</code> back to <code>core.abbrev</code></h2>
  
  <p>It corresponds to <code>--abbrev=$n</code> command line option after all.</p>
</blockquote>

<hr>

<p>More recently, Linus added in <a href=""https://github.com/git/git/commit/e6c587c733b4634030b353f4024794b08bc86892"" rel=""noreferrer"">commit e6c587c</a> (for Git 2.11, Q4 2016):<br>
(as mentioned in <a href=""https://stackoverflow.com/users/4830165/matthieu-moy"">Matthieu Moy</a>'s <a href=""https://stackoverflow.com/a/40220556/6309"">answer</a>)</p>

<blockquote>
  <p>In fairly early days we somehow decided to abbreviate object names down to 7-hexdigits, but as projects grow, it is becoming more and more likely to see such a short object names made in earlier days and recorded in the log messages no longer unique.</p>
  
  <p>Currently the Linux kernel project needs 11 to 12 hexdigits, while Git itself needs 10 hexdigits to uniquely identify the objects they have, while many smaller projects may still be fine with the original 7-hexdigit default.  One-size does not fit all projects.</p>
  
  <p>Introduce a mechanism, where we estimate the number of objects in the repository upon the first request to abbreviate an object name with the default setting and come up with a sane default for the repository.  Based on the expectation that we would see collision in a repository with <code>2^(2N)</code> objects when using object names shortened to first N bits, use sufficient number of hexdigits to cover the number of objects in the repository.<br>
  Each hexdigit (4-bits) we add to the shortened name allows us to have four times (2-bits) as many objects in the repository.</p>
</blockquote>

<p>See <a href=""https://github.com/git/git/commit/e6c587c733b4634030b353f4024794b08bc86892"" rel=""noreferrer"">commit e6c587c</a> (01 Oct 2016) by <a href=""https://github.com/torvalds"" rel=""noreferrer"">Linus Torvalds (<code>torvalds</code>)</a>.<br>
See <a href=""https://github.com/git/git/commit/7b5b7721affae7040cac77d647a5ec8628f0f845"" rel=""noreferrer"">commit 7b5b772</a>, <a href=""https://github.com/git/git/commit/65acfeacaa6e50c92a6ac18dc08356026a99b3f3"" rel=""noreferrer"">commit 65acfea</a> (01 Oct 2016) by <a href=""https://github.com/gitster"" rel=""noreferrer"">Junio C Hamano (<code>gitster</code>)</a>.<br>
<sup>(Merged by <a href=""https://github.com/gitster"" rel=""noreferrer"">Junio C Hamano -- <code>gitster</code> --</a> in <a href=""https://github.com/git/git/commit/bb188d00f7996639e65159f1467758e66fcd084b"" rel=""noreferrer"">commit bb188d0</a>, 03 Oct 2016)</sup>  </p>

<p>That new property (guessing a reasonnable default for SHA1 abbrev value) has a direct effect on how <a href=""https://stackoverflow.com/a/41308073/6309"">Git compute its own version number for release</a>.</p>
",VonC,Community,1389255901,1482528937,1495542397
http://stackoverflow.com/a/2103095/1648140,C Macro definition to determine big endian or little endian machine?,91216,manav m-n,Ryan Haining,1263980620,1547398887,1525302048,https://stackoverflow.com/questions/2100331/c-macro-definition-to-determine-big-endian-or-little-endian-machine,"<p>Code supporting arbitrary byte orders, ready to be put into a file called <code>order32.h</code>:</p>

<pre><code>#ifndef ORDER32_H
#define ORDER32_H

#include &lt;limits.h&gt;
#include &lt;stdint.h&gt;

#if CHAR_BIT != 8
#error ""unsupported char size""
#endif

enum
{
    O32_LITTLE_ENDIAN = 0x03020100ul,
    O32_BIG_ENDIAN = 0x00010203ul,
    O32_PDP_ENDIAN = 0x01000302ul,      /* DEC PDP-11 (aka ENDIAN_LITTLE_WORD) */
    O32_HONEYWELL_ENDIAN = 0x02030001ul /* Honeywell 316 (aka ENDIAN_BIG_WORD) */
};

static const union { unsigned char bytes[4]; uint32_t value; } o32_host_order =
    { { 0, 1, 2, 3 } };

#define O32_HOST_ORDER (o32_host_order.value)

#endif
</code></pre>

<p>You would check for little endian systems via</p>

<pre><code>O32_HOST_ORDER == O32_LITTLE_ENDIAN
</code></pre>
",Christoph,Alexander Stohr,1264005541,1522360950,1522360950
http://stackoverflow.com/a/2103608/701439,Color Logic Algorithm,11696,Steve,BlueRaja - Danny Pflughoeft,1264007798,1396956902,1264009865,https://stackoverflow.com/questions/2103368/color-logic-algorithm,"<p>Here is pgras' algorithm in Java:</p>

<pre><code>public double ColourDistance(Color c1, Color c2)
{
    double rmean = ( c1.getRed() + c2.getRed() )/2;
    int r = c1.getRed() - c2.getRed();
    int g = c1.getGreen() - c2.getGreen();
    int b = c1.getBlue() - c2.getBlue();
    double weightR = 2 + rmean/256;
    double weightG = 4.0;
    double weightB = 2 + (255-rmean)/256;
    return Math.sqrt(weightR*r*r + weightG*g*g + weightB*b*b);
} 
</code></pre>
",BlueRaja - Danny Pflughoeft,Alp,1264009719,1331644422,1331644422
http://stackoverflow.com/a/21048064/713980,"In Python, how can you load YAML mappings as OrderedDicts?",44666,Eric Naeseth,dreftymac,1298663532,1549964208,1510184083,https://stackoverflow.com/questions/5121931/in-python-how-can-you-load-yaml-mappings-as-ordereddicts,"<p>The yaml module allow you to specify custom 'representers' to convert Python objects to text and 'constructors' to reverse the process.</p>

<pre><code>_mapping_tag = yaml.resolver.BaseResolver.DEFAULT_MAPPING_TAG

def dict_representer(dumper, data):
    return dumper.represent_dict(data.iteritems())

def dict_constructor(loader, node):
    return collections.OrderedDict(loader.construct_pairs(node))

yaml.add_representer(collections.OrderedDict, dict_representer)
yaml.add_constructor(_mapping_tag, dict_constructor)
</code></pre>
",Brice M. Dempsey,Brice M. Dempsey,1389367563,1456816864,1456816864
http://stackoverflow.com/a/2106590/4184258,C++ Disabling warnings on a specific include,2816,huff,Whitewall,1264042050,1335949887,1335949887,https://stackoverflow.com/questions/2106576/c-disabling-warnings-on-a-specific-include,"<p>You can do it using <code>#pragma</code> in Microsoft compiler:</p>

<p><a href=""http://msdn.microsoft.com/en-us/library/2c8f766e%28VS.80%29.aspx"" rel=""nofollow noreferrer"">http://msdn.microsoft.com/en-us/library/2c8f766e%28VS.80%29.aspx</a></p>

<p>Something like this:</p>

<pre><code>#pragma warning (push, 0)

//....header file

#pragma warning (pop)
</code></pre>

<p>Can't help you with gcc compiler, some info here: <a href=""https://stackoverflow.com/questions/965093/selectively-disable-gcc-warnings-for-only-part-of-a-translation-unit"">Selectively disable GCC warnings for only part of a translation unit?</a></p>

<p><strong>EDIT EDIT</strong> Try <code>push, 0</code>.</p>
",Igor Zevaka,Community,1264042407,1264057723,1495541225
http://stackoverflow.com/a/21106596/654755,Celery stop execution of a chain,6344,Salami,,1372908435,1431071763,0,https://stackoverflow.com/questions/17461374/celery-stop-execution-of-a-chain,"<p>In my opinion this is a common use-case that doesn't get enough love in the documentation.</p>

<p>Assuming you want to abort a chain mid-way while still reporting SUCCESS as status of the completed tasks, and not sending any error log or whatnot (else you can just raise an exception) then a way to accomplish this is:</p>

<pre><code>@app.task(bind=True)  # Note that we need bind=True for self to work
def task1(self, other_args):
    #do_stuff
    if end_chain:
        self.request.callbacks = None
        return
    #Other stuff to do if end_chain is False
</code></pre>

<p>So in your example:</p>

<pre><code>@app.task(ignore_result=True, bind=True)
def is_room_open(self, args_sub_1):
    #something time consuming
    if http_req_and_parse(args_sub_1):
        # go on and do the notify task
        return True
    else:
        self.request.callbacks = None
</code></pre>

<p>Will work. Note that instead of <code>ignore_result=True</code> and <code>subtask()</code> you can use the shortcut <code>.si()</code> as stated by @abbasov-alexander</p>

<p>Edited to work with EAGER mode, as suggested by @PhilipGarnero in the comments.</p>
",AntonioMO,AntonioMO,1389677030,1431071763,1431071763
http://stackoverflow.com/a/2111327/13564,Sphinx - generate automatic references to Trac tickets and changesets,839,Sridhar Ratnakumar,Tshepang,1263929225,1360620350,1360620350,https://stackoverflow.com/questions/2096401/sphinx-generate-automatic-references-to-trac-tickets-and-changesets,"<p>If you put this in your config.py</p>

<pre><code>
trac_url = 'http://mytratsite/'

from docutils import nodes, utils
from docutils.parsers.rst import roles
import urllib

def trac_role(role, rawtext, text, lineno, inliner, options={}, content=[]):
  ref = trac_url + '/intertrac/' + urllib.quote(text, safe='')
  node = nodes.reference(rawtext, utils.unescape(text), refuri=ref, **options)
  return [node],[]

roles.register_canonical_role('trac', trac_role)
</code></pre>

<p>Then you can use <code>:trac:`#123`</code> and <code>:trac:`r1023`</code> in your documents.</p>

<p>This is probably the easiest way to make quick links to a trac site. It automatically works for all kinds of TracLinks because it uses the intertrac mechanism for the links.</p>
",Geoff Reedy,,1264094634,1264094634,0
http://stackoverflow.com/a/21114992/204023,3D Ray-Quad intersection test in java,5495,Smalesy,ideasman42,1389706223,1445576452,1445576452,https://stackoverflow.com/questions/21114796/3d-ray-quad-intersection-test-in-java,"<p>Here is an overview of the solution:</p>

<ol>
<li><p>Compute the plane equation of the square (assuming the four points are coplanar),</p></li>
<li><p>Do a ray / plane intersection, this gives you either nothing (ray parallel to the square and I ignore the case where the ray is embedded in the plane) or a point,</p></li>
<li><p>Once you have the intersection point, project it on a local 2D basis in the plane of the square, this will give the 2D coordinates (u, v) of the point on the plane,</p></li>
<li><p>Check whether the 2D coordinates (u, v) are within the square (assuming the four points form a parallelogram and you chose two adjacent edges for the local 2D basis), if yes then there is intersection (and you have the u/v coordinates).</p></li>
</ol>

<p>Now with actual equations, assuming the four square vertices are placed as follows:</p>

<pre><code>   S1 +------+ S2
      |      |
      |      |
   S3 +------+ S4
</code></pre>

<ol>
<li><p>The normal to the plane is: n = (S2 - S1) x (S3 - S1)</p>

<p>A point M belongs to this plane iff it satisfies this equation: n . ( M - S1 ) = 0</p></li>
<li><p>A point M belongs to the ray iff it can be written: M = R1 + t * dR with dR = R2 - R1</p>

<p>Compute the ray / plane intersection (equate the two previous equations):</p>

<p>n . ( M - S1 ) = 0 = n . ( R1 + t * dR - S1 ) = n . (R1 - S1) + t * n . dR</p>

<p>If n . dR is 0 then the plane is parallel to the ray, and there is no intersection (again, ignoring the case where the ray is embedded in the plane).</p>

<p>Else t = -n . (R1 - S1) / n . dR and plugging this result into the previous equation M = R1 + t * dR gives the 3D coordinates of the point of intersection M.</p></li>
<li><p>Project the vector M - S1 onto the two vectors S2 - S1 and S3 - S1 (the square edges starting from S1), this gives two numbers (u, v):</p>

<p>u = (M - S1) . (S2 - S1)</p>

<p>v = (M - S1) . (S3 - S1)</p></li>
<li><p>If 0 &lt;= u &lt;= |S2 - S1|^2 and 0 &lt;= v &lt;= |S3 - S1|^2, then the point of intersection M lies inside the square, else it's outside.</p></li>
</ol>

<p>And finally a sample Java implementation of the previous equations (optimized for reading ease...):</p>

<pre><code>public class Test {
    static class Vector3 {
        public float x, y, z;

        public Vector3(float x, float y, float z) {
            this.x = x;
            this.y = y;
            this.z = z;
        }

        public Vector3 add(Vector3 other) {
            return new Vector3(x + other.x, y + other.y, z + other.z);
        }

        public Vector3 sub(Vector3 other) {
            return new Vector3(x - other.x, y - other.y, z - other.z);
        }

        public Vector3 scale(float f) {
            return new Vector3(x * f, y * f, z * f);
        }

        public Vector3 cross(Vector3 other) {
            return new Vector3(y * other.z - z * other.y,
                               z - other.x - x * other.z,
                               x - other.y - y * other.x);
        }

        public float dot(Vector3 other) {
            return x * other.x + y * other.y + z * other.z;
        }
    }

    public static boolean intersectRayWithSquare(Vector3 R1, Vector3 R2,
                                                 Vector3 S1, Vector3 S2, Vector3 S3) {
        // 1.
        Vector3 dS21 = S2.sub(S1);
        Vector3 dS31 = S3.sub(S1);
        Vector3 n = dS21.cross(dS31);

        // 2.
        Vector3 dR = R1.sub(R2);

        float ndotdR = n.dot(dR);

        if (Math.abs(ndotdR) &lt; 1e-6f) { // Choose your tolerance
            return false;
        }

        float t = -n.dot(R1.sub(S1)) / ndotdR;
        Vector3 M = R1.add(dR.scale(t));

        // 3.
        Vector3 dMS1 = M.sub(S1);
        float u = dMS1.dot(dS21);
        float v = dMS1.dot(dS31);

        // 4.
        return (u &gt;= 0.0f &amp;&amp; u &lt;= dS21.dot(dS21)
             &amp;&amp; v &gt;= 0.0f &amp;&amp; v &lt;= dS31.dot(dS31));
    }

    public static void main(String... args) {
        Vector3 R1 = new Vector3(0.0f, 0.0f, -1.0f);
        Vector3 R2 = new Vector3(0.0f, 0.0f,  1.0f);

        Vector3 S1 = new Vector3(-1.0f, 1.0f, 0.0f);
        Vector3 S2 = new Vector3( 1.0f, 1.0f, 0.0f);
        Vector3 S3 = new Vector3(-1.0f,-1.0f, 0.0f);

        boolean b = intersectRayWithSquare(R1, R2, S1, S2, S3);
        assert b;

        R1 = new Vector3(1.5f, 1.5f, -1.0f);
        R2 = new Vector3(1.5f, 1.5f,  1.0f);

        b = intersectRayWithSquare(R1, R2, S1, S2, S3);
        assert !b;
    }
}
</code></pre>
",user3146587,user3146587,1389706827,1389710582,1389710582
http://stackoverflow.com/a/21151625/3682288,Not sure how to hide a div when clicking OUTSIDE of the div,41686,Thad Peiffer,Community,1374083677,1454500734,1495540946,https://stackoverflow.com/questions/17706847/not-sure-how-to-hide-a-div-when-clicking-outside-of-the-div,"<p>I suggest to add $event.stopPropagation(); on the view right after on the ng-click. You don't need to use jQuery.</p>

<pre><code>&lt;button ng-click=""toggleSearch();$event.stopPropagation();""&gt;toggle&lt;/button&gt;
</code></pre>

<p>Then, you can use this simplified js.</p>

<pre><code>$scope.toggleSearch = function () {
    $window.onclick = null;
    $scope.menuOpen = !$scope.menuOpen;

    if ($scope.model.menuOpen) {
        $window.onclick = function (event) {
            $scope.menuOpen = false;
            $scope.$apply();
        };
    }
};
</code></pre>
",jaimead,,1389834717,1389834717,0
http://stackoverflow.com/a/21169179/6763239,Devise - Skipping user confirmation in Development,1090,JamesJY,,1389894067,1399237627,0,https://stackoverflow.com/questions/21168996/devise-skipping-user-confirmation-in-development,"<p>create User in console:</p>

<pre><code>user = User.create( 
  :first_name            =&gt; 'admin', 
  :last_name             =&gt; 'admin', 
  :email                 =&gt; 'foo...@email.com', 
  :password              =&gt; 'password1', 
  :password_confirmation =&gt; 'password1' 
).skip_confirmation! 
 # Devise :doc:
 # If you don't want confirmation to be sent on create, neither a code
 # to be generated, call skip_confirmation!
</code></pre>

<p>or in model:</p>

<pre><code> after_create :skip_conf!

  def skip_conf!
    self.confirm! if Rails.env.development?
  end
</code></pre>
",,,1389894573,1389894924,1389894924
http://stackoverflow.com/a/2117523/1091949,Create GUID / UUID in JavaScript?,1529565,Jason Cohen,Boann,1221854460,1560966079,1419636988,https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript,"<p>For an <a href=""https://www.ietf.org/rfc/rfc4122.txt"" rel=""noreferrer"">RFC4122</a> version 4 compliant solution, this one-liner(ish) solution is the most compact I could come up with.:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r &amp; 0x3 | 0x8);
    return v.toString(16);
  });
}

console.log(uuidv4())</code></pre>
</div>
</div>
</p>

<p><strong>Update, 2015-06-02</strong>:  Be aware that UUID uniqueness relies heavily on the underlying random number generator (RNG).  The solution above uses <code>Math.random()</code> for brevity, however <code>Math.random()</code> is <em>not</em> guaranteed to be a high-quality RNG.  See Adam Hyland's <a href=""http://bocoup.com/weblog/random-numbers/"" rel=""noreferrer"">excellent writeup on Math.random()</a> for details.  For a more robust solution, consider something like <a href=""https://github.com/kelektiv/node-uuid"" rel=""noreferrer"">the uuid module</a>[Disclaimer: I'm the author], which uses higher quality RNG APIs where available.</p>

<p><strong>Update, 2015-08-26</strong>: As a side-note, this <a href=""https://gist.githubusercontent.com/aristus/f0c311df98d92e367df0"" rel=""noreferrer"">gist</a> describes how to determine how many IDs can be generated before reaching a certain probability of collision.  For example, with 3.26x10<sup>15</sup> version 4 RFC4122 UUIDs you have a 1-in-a-million chance of collision.</p>

<p><strong>Update, 2017-06-28</strong>: A <a href=""https://v8project.blogspot.com/2015/12/theres-mathrandom-and-then-theres.html"" rel=""noreferrer"">good article from Chrome developers</a> discussing the state of Math.random PRNG quality in Chrome, Firefox, and Safari.  tl;dr - As of late-2015 it's ""pretty good"", but not cryptographic quality.  To address that issue, here's an updated version of the above solution that uses ES6, the <code>crypto</code> API, and <a href=""https://gist.github.com/jed/982883"" rel=""noreferrer"">a bit of JS wizardy I can't take credit for</a>:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =&gt;
    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] &amp; 15 &gt;&gt; c / 4).toString(16)
  )
}

console.log(uuidv4());</code></pre>
</div>
</div>
</p>
",broofa,broofa,1264167620,1558788639,1558788639
http://stackoverflow.com/a/2117523/152809,Create GUID / UUID in JavaScript?,1529565,Jason Cohen,Boann,1221854460,1560966079,1419636988,https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript,"<p>For an <a href=""https://www.ietf.org/rfc/rfc4122.txt"" rel=""noreferrer"">RFC4122</a> version 4 compliant solution, this one-liner(ish) solution is the most compact I could come up with.:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r &amp; 0x3 | 0x8);
    return v.toString(16);
  });
}

console.log(uuidv4())</code></pre>
</div>
</div>
</p>

<p><strong>Update, 2015-06-02</strong>:  Be aware that UUID uniqueness relies heavily on the underlying random number generator (RNG).  The solution above uses <code>Math.random()</code> for brevity, however <code>Math.random()</code> is <em>not</em> guaranteed to be a high-quality RNG.  See Adam Hyland's <a href=""http://bocoup.com/weblog/random-numbers/"" rel=""noreferrer"">excellent writeup on Math.random()</a> for details.  For a more robust solution, consider something like <a href=""https://github.com/kelektiv/node-uuid"" rel=""noreferrer"">the uuid module</a>[Disclaimer: I'm the author], which uses higher quality RNG APIs where available.</p>

<p><strong>Update, 2015-08-26</strong>: As a side-note, this <a href=""https://gist.githubusercontent.com/aristus/f0c311df98d92e367df0"" rel=""noreferrer"">gist</a> describes how to determine how many IDs can be generated before reaching a certain probability of collision.  For example, with 3.26x10<sup>15</sup> version 4 RFC4122 UUIDs you have a 1-in-a-million chance of collision.</p>

<p><strong>Update, 2017-06-28</strong>: A <a href=""https://v8project.blogspot.com/2015/12/theres-mathrandom-and-then-theres.html"" rel=""noreferrer"">good article from Chrome developers</a> discussing the state of Math.random PRNG quality in Chrome, Firefox, and Safari.  tl;dr - As of late-2015 it's ""pretty good"", but not cryptographic quality.  To address that issue, here's an updated version of the above solution that uses ES6, the <code>crypto</code> API, and <a href=""https://gist.github.com/jed/982883"" rel=""noreferrer"">a bit of JS wizardy I can't take credit for</a>:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =&gt;
    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] &amp; 15 &gt;&gt; c / 4).toString(16)
  )
}

console.log(uuidv4());</code></pre>
</div>
</div>
</p>
",broofa,broofa,1264167620,1558788639,1558788639
http://stackoverflow.com/a/2117523/2187510,Create GUID / UUID in JavaScript?,1529565,Jason Cohen,Boann,1221854460,1560966079,1419636988,https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript,"<p>For an <a href=""https://www.ietf.org/rfc/rfc4122.txt"" rel=""noreferrer"">RFC4122</a> version 4 compliant solution, this one-liner(ish) solution is the most compact I could come up with.:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r &amp; 0x3 | 0x8);
    return v.toString(16);
  });
}

console.log(uuidv4())</code></pre>
</div>
</div>
</p>

<p><strong>Update, 2015-06-02</strong>:  Be aware that UUID uniqueness relies heavily on the underlying random number generator (RNG).  The solution above uses <code>Math.random()</code> for brevity, however <code>Math.random()</code> is <em>not</em> guaranteed to be a high-quality RNG.  See Adam Hyland's <a href=""http://bocoup.com/weblog/random-numbers/"" rel=""noreferrer"">excellent writeup on Math.random()</a> for details.  For a more robust solution, consider something like <a href=""https://github.com/kelektiv/node-uuid"" rel=""noreferrer"">the uuid module</a>[Disclaimer: I'm the author], which uses higher quality RNG APIs where available.</p>

<p><strong>Update, 2015-08-26</strong>: As a side-note, this <a href=""https://gist.githubusercontent.com/aristus/f0c311df98d92e367df0"" rel=""noreferrer"">gist</a> describes how to determine how many IDs can be generated before reaching a certain probability of collision.  For example, with 3.26x10<sup>15</sup> version 4 RFC4122 UUIDs you have a 1-in-a-million chance of collision.</p>

<p><strong>Update, 2017-06-28</strong>: A <a href=""https://v8project.blogspot.com/2015/12/theres-mathrandom-and-then-theres.html"" rel=""noreferrer"">good article from Chrome developers</a> discussing the state of Math.random PRNG quality in Chrome, Firefox, and Safari.  tl;dr - As of late-2015 it's ""pretty good"", but not cryptographic quality.  To address that issue, here's an updated version of the above solution that uses ES6, the <code>crypto</code> API, and <a href=""https://gist.github.com/jed/982883"" rel=""noreferrer"">a bit of JS wizardy I can't take credit for</a>:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =&gt;
    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] &amp; 15 &gt;&gt; c / 4).toString(16)
  )
}

console.log(uuidv4());</code></pre>
</div>
</div>
</p>
",broofa,broofa,1264167620,1558788639,1558788639
http://stackoverflow.com/a/2117523/526860,Create GUID / UUID in JavaScript?,1529565,Jason Cohen,Boann,1221854460,1560966079,1419636988,https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript,"<p>For an <a href=""https://www.ietf.org/rfc/rfc4122.txt"" rel=""noreferrer"">RFC4122</a> version 4 compliant solution, this one-liner(ish) solution is the most compact I could come up with.:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r &amp; 0x3 | 0x8);
    return v.toString(16);
  });
}

console.log(uuidv4())</code></pre>
</div>
</div>
</p>

<p><strong>Update, 2015-06-02</strong>:  Be aware that UUID uniqueness relies heavily on the underlying random number generator (RNG).  The solution above uses <code>Math.random()</code> for brevity, however <code>Math.random()</code> is <em>not</em> guaranteed to be a high-quality RNG.  See Adam Hyland's <a href=""http://bocoup.com/weblog/random-numbers/"" rel=""noreferrer"">excellent writeup on Math.random()</a> for details.  For a more robust solution, consider something like <a href=""https://github.com/kelektiv/node-uuid"" rel=""noreferrer"">the uuid module</a>[Disclaimer: I'm the author], which uses higher quality RNG APIs where available.</p>

<p><strong>Update, 2015-08-26</strong>: As a side-note, this <a href=""https://gist.githubusercontent.com/aristus/f0c311df98d92e367df0"" rel=""noreferrer"">gist</a> describes how to determine how many IDs can be generated before reaching a certain probability of collision.  For example, with 3.26x10<sup>15</sup> version 4 RFC4122 UUIDs you have a 1-in-a-million chance of collision.</p>

<p><strong>Update, 2017-06-28</strong>: A <a href=""https://v8project.blogspot.com/2015/12/theres-mathrandom-and-then-theres.html"" rel=""noreferrer"">good article from Chrome developers</a> discussing the state of Math.random PRNG quality in Chrome, Firefox, and Safari.  tl;dr - As of late-2015 it's ""pretty good"", but not cryptographic quality.  To address that issue, here's an updated version of the above solution that uses ES6, the <code>crypto</code> API, and <a href=""https://gist.github.com/jed/982883"" rel=""noreferrer"">a bit of JS wizardy I can't take credit for</a>:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =&gt;
    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] &amp; 15 &gt;&gt; c / 4).toString(16)
  )
}

console.log(uuidv4());</code></pre>
</div>
</div>
</p>
",broofa,broofa,1264167620,1558788639,1558788639
http://stackoverflow.com/a/2117523/564191,Create GUID / UUID in JavaScript?,1529565,Jason Cohen,Boann,1221854460,1560966079,1419636988,https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript,"<p>For an <a href=""https://www.ietf.org/rfc/rfc4122.txt"" rel=""noreferrer"">RFC4122</a> version 4 compliant solution, this one-liner(ish) solution is the most compact I could come up with.:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r &amp; 0x3 | 0x8);
    return v.toString(16);
  });
}

console.log(uuidv4())</code></pre>
</div>
</div>
</p>

<p><strong>Update, 2015-06-02</strong>:  Be aware that UUID uniqueness relies heavily on the underlying random number generator (RNG).  The solution above uses <code>Math.random()</code> for brevity, however <code>Math.random()</code> is <em>not</em> guaranteed to be a high-quality RNG.  See Adam Hyland's <a href=""http://bocoup.com/weblog/random-numbers/"" rel=""noreferrer"">excellent writeup on Math.random()</a> for details.  For a more robust solution, consider something like <a href=""https://github.com/kelektiv/node-uuid"" rel=""noreferrer"">the uuid module</a>[Disclaimer: I'm the author], which uses higher quality RNG APIs where available.</p>

<p><strong>Update, 2015-08-26</strong>: As a side-note, this <a href=""https://gist.githubusercontent.com/aristus/f0c311df98d92e367df0"" rel=""noreferrer"">gist</a> describes how to determine how many IDs can be generated before reaching a certain probability of collision.  For example, with 3.26x10<sup>15</sup> version 4 RFC4122 UUIDs you have a 1-in-a-million chance of collision.</p>

<p><strong>Update, 2017-06-28</strong>: A <a href=""https://v8project.blogspot.com/2015/12/theres-mathrandom-and-then-theres.html"" rel=""noreferrer"">good article from Chrome developers</a> discussing the state of Math.random PRNG quality in Chrome, Firefox, and Safari.  tl;dr - As of late-2015 it's ""pretty good"", but not cryptographic quality.  To address that issue, here's an updated version of the above solution that uses ES6, the <code>crypto</code> API, and <a href=""https://gist.github.com/jed/982883"" rel=""noreferrer"">a bit of JS wizardy I can't take credit for</a>:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =&gt;
    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] &amp; 15 &gt;&gt; c / 4).toString(16)
  )
}

console.log(uuidv4());</code></pre>
</div>
</div>
</p>
",broofa,broofa,1264167620,1558788639,1558788639
http://stackoverflow.com/a/2117523/84732,Create GUID / UUID in JavaScript?,1529565,Jason Cohen,Boann,1221854460,1560966079,1419636988,https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript,"<p>For an <a href=""https://www.ietf.org/rfc/rfc4122.txt"" rel=""noreferrer"">RFC4122</a> version 4 compliant solution, this one-liner(ish) solution is the most compact I could come up with.:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r &amp; 0x3 | 0x8);
    return v.toString(16);
  });
}

console.log(uuidv4())</code></pre>
</div>
</div>
</p>

<p><strong>Update, 2015-06-02</strong>:  Be aware that UUID uniqueness relies heavily on the underlying random number generator (RNG).  The solution above uses <code>Math.random()</code> for brevity, however <code>Math.random()</code> is <em>not</em> guaranteed to be a high-quality RNG.  See Adam Hyland's <a href=""http://bocoup.com/weblog/random-numbers/"" rel=""noreferrer"">excellent writeup on Math.random()</a> for details.  For a more robust solution, consider something like <a href=""https://github.com/kelektiv/node-uuid"" rel=""noreferrer"">the uuid module</a>[Disclaimer: I'm the author], which uses higher quality RNG APIs where available.</p>

<p><strong>Update, 2015-08-26</strong>: As a side-note, this <a href=""https://gist.githubusercontent.com/aristus/f0c311df98d92e367df0"" rel=""noreferrer"">gist</a> describes how to determine how many IDs can be generated before reaching a certain probability of collision.  For example, with 3.26x10<sup>15</sup> version 4 RFC4122 UUIDs you have a 1-in-a-million chance of collision.</p>

<p><strong>Update, 2017-06-28</strong>: A <a href=""https://v8project.blogspot.com/2015/12/theres-mathrandom-and-then-theres.html"" rel=""noreferrer"">good article from Chrome developers</a> discussing the state of Math.random PRNG quality in Chrome, Firefox, and Safari.  tl;dr - As of late-2015 it's ""pretty good"", but not cryptographic quality.  To address that issue, here's an updated version of the above solution that uses ES6, the <code>crypto</code> API, and <a href=""https://gist.github.com/jed/982883"" rel=""noreferrer"">a bit of JS wizardy I can't take credit for</a>:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function uuidv4() {
  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =&gt;
    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] &amp; 15 &gt;&gt; c / 4).toString(16)
  )
}

console.log(uuidv4());</code></pre>
</div>
</div>
</p>
",broofa,broofa,1264167620,1558788639,1558788639
http://stackoverflow.com/a/21181943/535646,how can I convert an image to grayscale without losing transparency?,2389,user3204892,haraldK,1389925554,1521051790,1389947085,https://stackoverflow.com/questions/21176754/how-can-i-convert-an-image-to-grayscale-without-losing-transparency,"<p><strong>Important</strong>: You should probably use @MadProgrammers solution (<code>ColorConvertOp</code>) if proper gray scale conversion is what you want. I voted for that. :-)</p>

<p>This answer is more for completeness:</p>

<p>If you really want a <code>BufferedImage</code> that has <code>CS_GRAY</code> color space and transparency, it's possible to create a custom (will result in <code>TYPE_CUSTOM</code>) <code>BufferedImage</code>. The code below will make something like a ""TYPE_2BYTE_GRAY_ALPHA"" type (8 bits per sample, 2 samples per pixel). It will use half the memory of a <code>TYPE_INT_ARGB</code> or <code>TYPE_4BYTE_ABGR</code> image, but it will most likely lose hardware acceleration, and possibly miss some optimized loops in the Java2D drawing pipelines (that said, my testing shows fully acceptable performance on OS X). </p>

<pre><code>/** Color Model usesd for raw GRAY + ALPHA */
private static final ColorModel CM_GRAY_ALPHA =
        new ComponentColorModel(
                ColorSpace.getInstance(ColorSpace.CS_GRAY),
                true, false, Transparency.TRANSLUCENT, DataBuffer.TYPE_BYTE
        );

public static BufferedImage create2ByteGrayAlphaImage(int width, int height) {
    int[] bandOffsets = new int[] {1, 0}; // gray + alpha
    int bands = bandOffsets.length; // 2, that is

    // Init data buffer of type byte
    DataBuffer buffer = new DataBufferByte(width * height * bands);

    // Wrap the data buffer in a raster
    WritableRaster raster =
            Raster.createInterleavedRaster(buffer, width, height,
                    width * bands, bands, bandOffsets, new Point(0, 0));

    // Create a custom BufferedImage with the raster and a suitable color model
    return new BufferedImage(CM_GRAY_ALPHA, raster, false, null);
}
</code></pre>
",haraldK,Justin,1389950095,1506975071,1506975071
http://stackoverflow.com/a/2118537/1694896,"GCC error with variadic templates:  &quot;Sorry, unimplemented: cannot expand &#39;Identifier...&#39; into a fixed-length argument list&quot;",5982,Dennis,R. Martinho Fernandes,1262378010,1383451162,1332448852,https://stackoverflow.com/questions/1989552/gcc-error-with-variadic-templates-sorry-unimplemented-cannot-expand-identi,"<p>There is a trick to get this to work with gcc.  The feature isn't fully implemented yet, but you can structure the code to avoid the unimplemented sections.  Manually expanding a variadic template into a parameter list won't work.  But template specialization can do that for you.</p>

<pre><code>template&lt; char head, char ... rest &gt;
struct head_broken
{
   static const char value = head;
};

template&lt; char ... all &gt;
struct head_works; // make the compiler hapy

template&lt; char head, char ... rest &gt;
struct head_works&lt;head,rest...&gt; // specialization
{
   static const char value = head;
};

template&lt;char ... all &gt;
struct do_head
{
   static const char head = head_works&lt;all...&gt;::value;
   //Sorry, unimplemented: cannot expand 'all...' into a fixed-length arugment list
   //static const char head = head_broken&lt;all...&gt;::value;
};

int main
{
   std::cout &lt;&lt; head_works&lt;'a','b','c','d'&gt;::value &lt;&lt; std::endl;
   std::cout &lt;&lt; head_broken&lt;'a','b','c','d'&gt;::value &lt;&lt; std::endl;
   std::cout &lt;&lt; do_head&lt;'a','b','c','d'&gt;::head &lt;&lt; std::endl;
}
</code></pre>

<p>I tested this with gcc 4.4.1</p>
",deft_code,Konstantin Weitz,1264176208,1316609047,1316609047
http://stackoverflow.com/a/21214524/3000919,Picasso loads PHOTO_THUMBNAIL_URI but not PHOTO_URI,2341,courtlandj,courtlandj,1389863718,1390471669,1390468091,https://stackoverflow.com/questions/21157630/picasso-loads-photo-thumbnail-uri-but-not-photo-uri,"<p>Have you tried using a <code>contact uri</code>? </p>

<p>That last boolean parameter in <code>openContactPhotoInputStream</code> promises to get you the high res photo if one is available.</p>

<p>Instead of using a <code>photo uri</code> use a <code>contact uri</code> or a <code>contact lookup uri</code>.</p>

<p><strong>UPDATE</strong>
Since the question has been answered, I though I'd post the relevant details here:
A small test app is posted here (You need Android Studio): <a href=""https://github.com/copolii/PicassoContactsTest"" rel=""nofollow"">https://github.com/copolii/PicassoContactsTest</a></p>

<p>If you set both a <code>placeholder</code> and an <code>error</code> icon, the <code>error</code> icon is displayed for contacts who do not have a picture. I'd recommend setting the <em>social face guy</em> as your place-holder and no error icon. That way, your place-holder stays on if the contact has no picture. </p>

<p>If you <strong>do</strong> want to differentiate between the two, choose your error icon with the above in mind (i.e. don't use a <em>big red OMFG</em> error indicator).</p>

<p><strong>--- Previous Content ---</strong></p>

<p>Let me know if that helps.</p>

<p>I did the work for the contacts photo loading and unless I'm missing something, you should get the high resolution picture (API 14+) automatically:</p>

<pre><code>if (SDK_INT &lt; ICE_CREAM_SANDWICH) {
  return openContactPhotoInputStream(contentResolver, uri);
} else {
  return openContactPhotoInputStream(contentResolver, uri, true);
}
</code></pre>

<p>It seems that the openContactPhotoInputStream doesn't like the PHOTO_URI.</p>

<p><a href=""http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html#openContactPhotoInputStream%28android.content.ContentResolver,%20android.net.Uri,%20boolean%29"" rel=""nofollow"" title=""openContactPhotoInputStream"">Android Docs: openContactPhotoInputStream</a></p>

<p>If the URIs are distinguishable I can easily add support for PHOTO_URI as well (I have to find out how to load it first though). I'm already determining if the given uri is a <em>contact photo uri</em> or a <em>contact lookup uri</em> (older android versions do not like lookup uris being fed into <code>openContactPhotoInputStream</code> so I have to dereference the <em>lookup uri</em> into a <em>contact uri</em> before passing it to <code>openContactPhotoInputStream</code>).</p>

<p>I hope this helps.</p>
",copolii,copolii,1390119015,1390471669,1390471669
http://stackoverflow.com/a/2124385/354393,C++ preprocessor __VA_ARGS__ number of arguments,96451,Anycorn,Jeffrey Bosboom,1264273868,1545323274,1527726962,https://stackoverflow.com/questions/2124339/c-preprocessor-va-args-number-of-arguments,"<p>This is actually compiler dependent, and not supported by any standard.</p>

<p>Here however you have a <a href=""http://groups.google.com/group/comp.std.c/browse_thread/thread/77ee8c8f92e4a3fb/346fc464319b1ee5?pli=1"" rel=""noreferrer"">macro implementation</a> that does the count:</p>

<pre><code>#define PP_NARG(...) \
         PP_NARG_(__VA_ARGS__,PP_RSEQ_N())
#define PP_NARG_(...) \
         PP_ARG_N(__VA_ARGS__)
#define PP_ARG_N( \
          _1, _2, _3, _4, _5, _6, _7, _8, _9,_10, \
         _11,_12,_13,_14,_15,_16,_17,_18,_19,_20, \
         _21,_22,_23,_24,_25,_26,_27,_28,_29,_30, \
         _31,_32,_33,_34,_35,_36,_37,_38,_39,_40, \
         _41,_42,_43,_44,_45,_46,_47,_48,_49,_50, \
         _51,_52,_53,_54,_55,_56,_57,_58,_59,_60, \
         _61,_62,_63,N,...) N
#define PP_RSEQ_N() \
         63,62,61,60,                   \
         59,58,57,56,55,54,53,52,51,50, \
         49,48,47,46,45,44,43,42,41,40, \
         39,38,37,36,35,34,33,32,31,30, \
         29,28,27,26,25,24,23,22,21,20, \
         19,18,17,16,15,14,13,12,11,10, \
         9,8,7,6,5,4,3,2,1,0

/* Some test cases */


PP_NARG(A) -&gt; 1
PP_NARG(A,B) -&gt; 2
PP_NARG(A,B,C) -&gt; 3
PP_NARG(A,B,C,D) -&gt; 4
PP_NARG(A,B,C,D,E) -&gt; 5
PP_NARG(1,2,3,4,5,6,7,8,9,0,
         1,2,3,4,5,6,7,8,9,0,
         1,2,3,4,5,6,7,8,9,0,
         1,2,3,4,5,6,7,8,9,0,
         1,2,3,4,5,6,7,8,9,0,
         1,2,3,4,5,6,7,8,9,0,
         1,2,3) -&gt; 63
</code></pre>
",Kornel Kisielewicz,HolyBlackCat,1264274570,1426873451,1426873451
http://stackoverflow.com/a/21263493/228539,shutil.rmtree to remove readonly files,10953,Paul Moore,BartoszKP,1390315108,1469711977,1469711977,https://stackoverflow.com/questions/21261132/shutil-rmtree-to-remove-readonly-files,"<p>After more investigation, the following appears to work:</p>

<pre><code>def del_rw(action, name, exc):
    os.chmod(name, stat.S_IWRITE)
    os.remove(name)
shutil.rmtree(path, onerror=del_rw)
</code></pre>

<p>In other words, actually remove the file in the onerror function. (You might need to check for a directory in the onerror handler and use rmdir in that case - I didn't need that but it may just be something specific about my problem.</p>
",Paul Moore,,1390321033,1390321033,0
http://stackoverflow.com/a/21323330/775265,Formatting a number with exactly two decimals in JavaScript,628935,Abs,Peter Mortensen,1258076778,1542375888,1457174529,https://stackoverflow.com/questions/1726630/formatting-a-number-with-exactly-two-decimals-in-javascript,"<p>This is an old topic but still top-ranked Google results and the solutions offered share the same floating point decimals issue. Here is the (very generic) function I use, <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round#Example:_Decimal_rounding"" rel=""noreferrer"">thanks to MDN</a>:</p>

<pre><code>function round(value, exp) {
  if (typeof exp === 'undefined' || +exp === 0)
    return Math.round(value);

  value = +value;
  exp = +exp;

  if (isNaN(value) || !(typeof exp === 'number' &amp;&amp; exp % 1 === 0))
    return NaN;

  // Shift
  value = value.toString().split('e');
  value = Math.round(+(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp)));

  // Shift back
  value = value.toString().split('e');
  return +(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp));
}
</code></pre>

<p>As we can see, we don't get these issues:</p>

<pre><code>round(1.275, 2);   // Returns 1.28
round(1.27499, 2); // Returns 1.27
</code></pre>

<p>This genericity also provides some cool stuff:</p>

<pre><code>round(1234.5678, -2);   // Returns 1200
round(1.2345678e+2, 2); // Returns 123.46
round(""123.45"");        // Returns 123
</code></pre>

<hr>

<p>Now, to answer the OP's question, one has to type:</p>

<pre><code>round(10.8034, 2).toFixed(2); // Returns ""10.80""
round(10.8, 2).toFixed(2);    // Returns ""10.80""
</code></pre>

<hr>

<p>Or, for a more concise, less generic function:</p>

<pre><code>function round2Fixed(value) {
  value = +value;

  if (isNaN(value))
    return NaN;

  // Shift
  value = value.toString().split('e');
  value = Math.round(+(value[0] + 'e' + (value[1] ? (+value[1] + 2) : 2)));

  // Shift back
  value = value.toString().split('e');
  return (+(value[0] + 'e' + (value[1] ? (+value[1] - 2) : -2))).toFixed(2);
}
</code></pre>

<p>You can call it with:</p>

<pre><code>round2Fixed(10.8034); // Returns ""10.80""
round2Fixed(10.8);    // Returns ""10.80""
</code></pre>

<hr>

<p>Various examples and tests (thanks to <a href=""https://stackoverflow.com/users/157247/t-j-crowder""><strong>@t-j-crowder</strong></a>!):</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""true"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code snippet-currently-hidden"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function round(value, exp) {
  if (typeof exp === 'undefined' || +exp === 0)
    return Math.round(value);

  value = +value;
  exp = +exp;

  if (isNaN(value) || !(typeof exp === 'number' &amp;&amp; exp % 1 === 0))
    return NaN;

  // Shift
  value = value.toString().split('e');
  value = Math.round(+(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp)));

  // Shift back
  value = value.toString().split('e');
  return +(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp));
}
function naive(value, exp) {
  if (!exp) {
    return Math.round(value);
  }
  var pow = Math.pow(10, exp);
  return Math.round(value * pow) / pow;
}
function test(val, places) {
  subtest(val, places);
  val = typeof val === ""string"" ? ""-"" + val : -val;
  subtest(val, places);
}
function subtest(val, places) {
  var placesOrZero = places || 0;
  var naiveResult = naive(val, places);
  var roundResult = round(val, places);
  if (placesOrZero &gt;= 0) {
    naiveResult = naiveResult.toFixed(placesOrZero);
    roundResult = roundResult.toFixed(placesOrZero);
  } else {
    naiveResult = naiveResult.toString();
    roundResult = roundResult.toString();
  }
  $(""&lt;tr&gt;"")
    .append($(""&lt;td&gt;"").text(JSON.stringify(val)))
    .append($(""&lt;td&gt;"").text(placesOrZero))
    .append($(""&lt;td&gt;"").text(naiveResult))
    .append($(""&lt;td&gt;"").text(roundResult))
    .appendTo(""#results"");
}
test(0.565, 2);
test(0.575, 2);
test(0.585, 2);
test(1.275, 2);
test(1.27499, 2);
test(1234.5678, -2);
test(1.2345678e+2, 2);
test(""123.45"");
test(10.8034, 2);
test(10.8, 2);
test(1.005, 2);
test(1.0005, 2);</code></pre>
<pre class=""snippet-code-css lang-css prettyprint-override""><code>table {
  border-collapse: collapse;
}
table, td, th {
  border: 1px solid #ddd;
}
td, th {
  padding: 4px;
}
th {
  font-weight: normal;
  font-family: sans-serif;
}
td {
  font-family: monospace;
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Input&lt;/th&gt;
      &lt;th&gt;Places&lt;/th&gt;
      &lt;th&gt;Naive&lt;/th&gt;
      &lt;th&gt;Thorough&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody id=""results""&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;script src=""https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js""&gt;&lt;/script&gt;</code></pre>
</div>
</div>
</p>
",astorije,astorije,1390530668,1477590465,1477590465
http://stackoverflow.com/a/21336448/937891,Printing a (part of) webpage with Javascript,6881,Rast,,1390401597,1544313779,0,https://stackoverflow.com/questions/21285902/printing-a-part-of-webpage-with-javascript,"<p>I've tested different ways of printing part of webpage across browsers:
Chrome, Firefox, Opera (12 and new), IE11, 10, 9 and 8. I've tried to create new <code>window</code>, new <code>iframe</code>, or use <code>existing iframe</code> on the page. And then tried <code>.print()</code> and <code>.execCommand('print')</code>. </p>

<p><em>Note: Keep in mind that .print() is called on <strong>window</strong>, and .execCommand() is called on <strong>document</strong></em>.</p>

<p>Code used for testing can be found <a href=""https://gist.github.com/Rast1234/8598949"">here</a></p>

<p>Correct me if my testing code is wrong, I just wanted to find the clearest way to do the job. My conclusions:</p>

<ul>
<li>Opera 12 can not print part of a webpage (?)</li>
<li>IEs don't <code>print()</code> iframes and windows, except current window.</li>
<li>Calling <code>print()</code> on <code>documents</code> inside iframes or created windows in IEs breaks the <code>print()</code> on current <code>document</code>. Be careful!</li>
<li>jQuery plugin <a href=""https://github.com/jasonday/printThis/"">printThis</a> uses tricks for IE to do the job, and it just works. The only exception is Opera 12. By the way, this plugin uses <code>print()</code>.</li>
<li><code>execCommand('print')</code> works almost everywhere and with any approach (iframes, window). It's not supported by Firefox though.</li>
<li><code>execCommand()</code> returns <code>false</code> if call was unsuccessful, so if you don't want to use plugins and magic tricks, create window or iframe, call <code>execCommand('print')</code> and if it returns <code>false</code>, call <code>print()</code>.</li>
</ul>

<p>One more thing:</p>

<p>Creating an <code>iframe</code> is tricky: you can't access its <strong>window</strong> or <strong>document</strong> directly (yes, you have ContentDocument property, which behaves differently across browsers). You should <strong>name</strong> it and then call <code>window.frames[name]</code> to get <strong>window</strong> object from that iframe. Do not try to call <code>window.frames(id)</code> - it will return the <strong>iframe</strong>.</p>
",Rast,Stefan Born,1390577548,1418917805,1418917805
http://stackoverflow.com/a/2135920/3818777,Splitting a list into N parts of approximately equal length,117340,user248237,wim,1264389568,1553480921,1505437327,https://stackoverflow.com/questions/2130016/splitting-a-list-into-n-parts-of-approximately-equal-length,"<p>You can write it fairly simply as a list generator:</p>

<pre><code>def split(a, n):
    k, m = divmod(len(a), n)
    return (a[i * k + min(i, m):(i + 1) * k + min(i + 1, m)] for i in xrange(n))
</code></pre>

<p>Example:</p>

<pre><code>&gt;&gt;&gt; list(split(range(11), 3))
[[0, 1, 2, 3], [4, 5, 6, 7], [8, 9, 10]]
</code></pre>
",tixxit,Vanni Totaro,1264456122,1480952366,1480952366
http://stackoverflow.com/a/21368622/621449,Searching for equivalent of FileNotFoundError in Python 2,17140,Walle Cyril,Mike T,1390760238,1562014049,1534497249,https://stackoverflow.com/questions/21367320/searching-for-equivalent-of-filenotfounderror-in-python-2,"<p>If <code>FileNotFoundError</code> isn't there, define it:</p>

<pre><code>try:
    FileNotFoundError
except NameError:
    FileNotFoundError = IOError
</code></pre>

<p>Now you can catch <code>FileNotFoundError</code> in Python 2 since it's really <code>IOError</code>.</p>

<p>Be careful though, <code>IOError</code> has other meanings. In particular, any message should probably say ""file could not be read"" rather than ""file not found.""</p>
",kindall,kindall,1390767267,1431405174,1431405174
http://stackoverflow.com/a/21370058/2506078,Merge pandas DataFrames based on irregular time intervals,2253,pedmiston,pedmiston,1390760990,1390821606,1390765647,https://stackoverflow.com/questions/21367485/merge-pandas-dataframes-based-on-irregular-time-intervals,"<p>You could use <a href=""http://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html"" rel=""noreferrer"">np.searchsorted</a> to find the indices representing where each value in <code>data['time']</code> would fit between <code>intervals['start_time']</code>. Then you could call <code>np.searchsorted</code> again to find the indices representing where each value in <code>data['time']</code> would fit between <code>intervals['end_time']</code>. Note that using <code>np.searchsorted</code> relies on <code>interval['start_time']</code> and <code>interval['end_time']</code> being in sorted order.</p>

<p>For each corresponding location in the arrays, where these two indices are equal, <code>data['time']</code> fits in between <code>interval['start_time']</code> and <code>interval['end_time']</code>. Note that this relies on the intervals being disjoint.</p>

<p>Using <code>searchsorted</code> in this way is about 5 times faster than using the <code>for-loop</code>:</p>

<pre><code>import pandas as pd
import numpy as np

np.random.seed(1)
data = pd.DataFrame({'time':np.sort(np.random.uniform(0,100,size=50)),
                     'value':np.random.uniform(-1,1,size=50)})

intervals = pd.DataFrame(
    {'interval_id':np.arange(9),
     'start_time':np.random.uniform(0,5,size=9) + np.arange(0,90,10),    
     'end_time':np.random.uniform(5,10,size=9) + np.arange(0,90,10)})

def using_loop():
    data['interval_id'] = np.nan
    for index, ser in intervals.iterrows():
        in_interval = (data['time'] &gt;= ser['start_time']) &amp; \
                      (data['time'] &lt;= ser['end_time'])
        data['interval_id'][in_interval] = ser['interval_id']

    result = data.merge(intervals, how='outer').sort('time').reset_index(drop=True)
    return result

def using_searchsorted():
    start_idx = np.searchsorted(intervals['start_time'].values, data['time'].values)-1
    end_idx = np.searchsorted(intervals['end_time'].values, data['time'].values)
    mask = (start_idx == end_idx)
    result = data.copy()
    result['interval_id'] = result['start_time'] = result['end_time'] = np.nan
    result['interval_id'][mask] = start_idx
    result.ix[mask, 'start_time'] = intervals['start_time'][start_idx[mask]].values
    result.ix[mask, 'end_time'] = intervals['end_time'][end_idx[mask]].values
    return result
</code></pre>

<hr>

<pre><code>In [254]: %timeit using_loop()
100 loops, best of 3: 7.74 ms per loop

In [255]: %timeit using_searchsorted()
1000 loops, best of 3: 1.56 ms per loop

In [256]: 7.74/1.56
Out[256]: 4.961538461538462
</code></pre>
",unutbu,unutbu,1390774878,1390821606,1390821606
http://stackoverflow.com/a/21385939/814206,Java scoping construct cannot be annotated with type-use,512,Kasper van den Berg,,1390839591,1390839591,0,https://stackoverflow.com/questions/21385938/java-scoping-construct-cannot-be-annotated-with-type-use,"<p>The <a href=""http://cr.openjdk.java.net/~mr/se/8/java-se-8-pfd-spec/java-se-8-jls-pfd-diffs.pdf"">Java language specification (draft for version 8)</a> 8.3 specifies a ""UnannClassType"" as</p>

<blockquote>
  <p>UnannClassType: <br />
  Identifier [TypeArguments] <br />
  UnannClassOrInterfaceType . {Annotation} Identifier [TypeArguments]</p>
</blockquote>

<p>Thus, you need the declaration:</p>

<pre><code>private transient org.apache.lucene.search.@Nullable Query cached_results;
</code></pre>

<p>Or in the augmented java 7 compiler of the checker framework:</p>

<pre><code>private transient org.apache.lucene.search./*@Nullable*/ Query cached_results;
</code></pre>

<p><em>NOTE: normal Java compilers ignore <code>/*@Nullable*/</code>.</em></p>
",Kasper van den Berg,,1390839591,1390839591,0
http://stackoverflow.com/a/21429909/466862,How to convert a byte array to a hex string in Java?,630278,Andre,Ciro Santilli 996ICU,1331471184,1562190446,1430596539,https://stackoverflow.com/questions/9655181/how-to-convert-a-byte-array-to-a-hex-string-in-java,"<p>At the minor cost of storing the lookup table this implementation is simple and very fast.</p>

<pre><code> private static final char[] BYTE2HEX=(
    ""000102030405060708090A0B0C0D0E0F""+
    ""101112131415161718191A1B1C1D1E1F""+
    ""202122232425262728292A2B2C2D2E2F""+
    ""303132333435363738393A3B3C3D3E3F""+
    ""404142434445464748494A4B4C4D4E4F""+
    ""505152535455565758595A5B5C5D5E5F""+
    ""606162636465666768696A6B6C6D6E6F""+
    ""707172737475767778797A7B7C7D7E7F""+
    ""808182838485868788898A8B8C8D8E8F""+
    ""909192939495969798999A9B9C9D9E9F""+
    ""A0A1A2A3A4A5A6A7A8A9AAABACADAEAF""+
    ""B0B1B2B3B4B5B6B7B8B9BABBBCBDBEBF""+
    ""C0C1C2C3C4C5C6C7C8C9CACBCCCDCECF""+
    ""D0D1D2D3D4D5D6D7D8D9DADBDCDDDEDF""+
    ""E0E1E2E3E4E5E6E7E8E9EAEBECEDEEEF""+
    ""F0F1F2F3F4F5F6F7F8F9FAFBFCFDFEFF"").toCharArray();
   ; 

  public static String getHexString(byte[] bytes) {
    final int len=bytes.length;
    final char[] chars=new char[len&lt;&lt;1];
    int hexIndex;
    int idx=0;
    int ofs=0;
    while (ofs&lt;len) {
      hexIndex=(bytes[ofs++] &amp; 0xFF)&lt;&lt;1;
      chars[idx++]=BYTE2HEX[hexIndex++];
      chars[idx++]=BYTE2HEX[hexIndex];
    }
    return new String(chars);
  }
</code></pre>
",higginse,,1390995350,1390995350,0
http://stackoverflow.com/a/21449475/884770,Connect Sphinx autodoc-skip-member to my function,4512,bstpierre,Acumenus,1285046528,1431725373,1431725373,https://stackoverflow.com/questions/3757500/connect-sphinx-autodoc-skip-member-to-my-function,"<p>This answer expands upon the <a href=""https://stackoverflow.com/a/3757526/832230"">answer by bstpierre</a>. Below is the relevant portion from my <code>conf.py</code>:</p>

<pre><code>autodoc_default_flags = ['members', 'private-members', 'special-members',
                         #'undoc-members',
                         'show-inheritance']

def autodoc_skip_member(app, what, name, obj, skip, options):
    exclusions = ('__weakref__',  # special-members
                  '__doc__', '__module__', '__dict__',  # undoc-members
                  )
    exclude = name in exclusions
    return skip or exclude

def setup(app):
    app.connect('autodoc-skip-member', autodoc_skip_member)
</code></pre>
",Acumenus,Community,1391063811,1391063811,1495542752
http://stackoverflow.com/a/2146171/1251219,How do I catch a PHP Fatal Error,339912,too much php,TRiG,1226299347,1538741906,1490870653,https://stackoverflow.com/questions/277224/how-do-i-catch-a-php-fatal-error,"<p>Log fatal errors using <code>register_shutdown_function</code>, which requires PHP 5.2+:</p>

<pre><code>register_shutdown_function( ""fatal_handler"" );

function fatal_handler() {
    $errfile = ""unknown file"";
    $errstr  = ""shutdown"";
    $errno   = E_CORE_ERROR;
    $errline = 0;

    $error = error_get_last();

    if( $error !== NULL) {
        $errno   = $error[""type""];
        $errfile = $error[""file""];
        $errline = $error[""line""];
        $errstr  = $error[""message""];

        error_mail(format_error( $errno, $errstr, $errfile, $errline));
    }
}
</code></pre>

<p>You will have to define the <code>error_mail</code> and <code>format_error</code> functions. For example:</p>

<pre class=""lang-php prettyprint-override""><code>function format_error( $errno, $errstr, $errfile, $errline ) {
    $trace = print_r( debug_backtrace( false ), true );

    $content = ""
    &lt;table&gt;
        &lt;thead&gt;&lt;th&gt;Item&lt;/th&gt;&lt;th&gt;Description&lt;/th&gt;&lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;th&gt;Error&lt;/th&gt;
                &lt;td&gt;&lt;pre&gt;$errstr&lt;/pre&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;th&gt;Errno&lt;/th&gt;
                &lt;td&gt;&lt;pre&gt;$errno&lt;/pre&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;th&gt;File&lt;/th&gt;
                &lt;td&gt;$errfile&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;th&gt;Line&lt;/th&gt;
                &lt;td&gt;$errline&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;th&gt;Trace&lt;/th&gt;
                &lt;td&gt;&lt;pre&gt;$trace&lt;/pre&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;"";
    return $content;
}
</code></pre>

<p>Use <a href=""http://swiftmailer.org/"" rel=""noreferrer"">Swift Mailer</a> to write the <code>error_mail</code> function.</p>

<p>See also:</p>

<ul>
<li><a href=""http://php.net/manual/en/reserved.variables.phperrormsg.php"" rel=""noreferrer"">http://php.net/manual/en/reserved.variables.phperrormsg.php</a></li>
<li><a href=""http://php.net/manual/en/errorfunc.constants.php"" rel=""noreferrer"">http://php.net/manual/en/errorfunc.constants.php</a></li>
</ul>
",user259973,Manoj Sharma,1264589330,1502344682,1502344682
http://stackoverflow.com/a/2146905/388951,Detect if a page has a vertical scrollbar?,95500,Woody,,1264596396,1546991130,0,https://stackoverflow.com/questions/2146874/detect-if-a-page-has-a-vertical-scrollbar,"<p>try this:</p>

<pre><code>var hasVScroll = document.body.scrollHeight &gt; document.body.clientHeight;
</code></pre>

<p>This will only tell you if the vertical scrollHeight is bigger than the height of the viewable content, however.  The <code>hasVScroll</code> variable will contain true or false.</p>

<p>If you need to do a more thorough check, add the following to the code above:</p>

<pre><code>// Get the computed style of the body element
var cStyle = document.body.currentStyle||window.getComputedStyle(document.body, """");

// Check the overflow and overflowY properties for ""auto"" and ""visible"" values
hasVScroll = cStyle.overflow == ""visible"" 
             || cStyle.overflowY == ""visible""
             || (hasVScroll &amp;&amp; cStyle.overflow == ""auto"")
             || (hasVScroll &amp;&amp; cStyle.overflowY == ""auto"");
</code></pre>
",Andy E,Andy E,1264596770,1275040396,1275040396
http://stackoverflow.com/a/21480139/1570972,Adding a ManyToManyWidget to the reverse of a ManyToManyField in the Django Admin,5537,Rory,,1332795228,1547214772,0,https://stackoverflow.com/questions/9879687/adding-a-manytomanywidget-to-the-reverse-of-a-manytomanyfield-in-the-django-admi,"<p>This is possible to do with a custom form.</p>

<pre><code>from django.contrib import admin
from django import forms

from models import Post, Tag

class PostAdminForm(forms.ModelForm):
    tags = forms.ModelMultipleChoiceField(
        Tag.objects.all(),
        widget=admin.widgets.FilteredSelectMultiple('Tags', False),
        required=False,
    )

    def __init__(self, *args, **kwargs):
        super(PostAdminForm, self).__init__(*args, **kwargs)
        if self.instance.pk:
            self.initial['tags'] = self.instance.tags.values_list('pk', flat=True)

    def save(self, *args, **kwargs):
        instance = super(PostAdminForm, self).save(*args, **kwargs)
        if instance.pk:
            instance.tags.clear()
            instance.tags.add(*self.cleaned_data['tags'])
        return instance

class PostAdmin(admin.ModelAdmin):
    form = PostAdminForm

admin.site.register(Post, PostAdmin)
</code></pre>

<p>That <code>False</code> in there can be replaced with a <code>True</code> if you want vertically stacked widget.</p>
",Matthew Schinckel,Matthew Schinckel,1391171419,1391173992,1391173992
http://stackoverflow.com/a/21486468/237188,Accept any kind of callable and also know argument type,2651,Arjan,Arjan,1391108953,1391273194,1391113419,https://stackoverflow.com/questions/21465394/accept-any-kind-of-callable-and-also-know-argument-type,"<p>Here's an example that will work for most callables including functors and lambdas (although not for <em>generic functors</em> as @Yakk demonstrated in a comment on the question).</p>

<p>The code can also be useful when determining return type and multiple arguments.</p>

<pre><code>template &lt;typename T&gt;
struct func_traits : public func_traits&lt;decltype(&amp;T::operator())&gt; {};

template &lt;typename C, typename Ret, typename... Args&gt;
struct func_traits&lt;Ret(C::*)(Args...) const&gt; {
    using result_type =  Ret;

    template &lt;std::size_t i&gt;
    struct arg {
        using type = typename std::tuple_element&lt;i, std::tuple&lt;Args...&gt;&gt;::type;
    };
};

template &lt;typename T&gt;
void option(T&amp;&amp; t) {
    using traits = func_traits&lt;typename std::decay&lt;T&gt;::type&gt;;

    using return_t = typename traits::result_type;         // Return type.
    using arg0_t = typename traits::template arg&lt;0&gt;::type; // First arg type.

    // Output types.
    std::cout &lt;&lt; ""Return type: "" &lt;&lt; typeid(return_t).name() &lt;&lt; std::endl;
    std::cout &lt;&lt; ""Argument type: "" &lt;&lt; typeid(arg0_t).name() &lt;&lt; std::endl;
}
</code></pre>

<p>To add support for regular functions add a specialization e.g.</p>

<pre><code>template &lt;typename Ret, typename... Args&gt;
struct func_traits&lt;Ret(*)(Args...)&gt; { /* ... */ }
</code></pre>

<p><strong>More useful info:</strong> <a href=""https://stackoverflow.com/questions/7943525/is-it-possible-to-figure-out-the-parameter-type-and-return-type-of-a-lambda"">Is it possible to figure out the parameter type and return type of a lambda?</a></p>
",Snps,Community,1391189730,1391273194,1495541392
http://stackoverflow.com/a/21491305/5351316,Convert all types of smart quotes with PHP,19807,Xeoncross,Community,1384642956,1527261568,1495542878,https://stackoverflow.com/questions/20025030/convert-all-types-of-smart-quotes-with-php,"<p>You need something like this (assuming UTF-8 input, and ignoring CJK (Chinese, Japanese, Korean)):</p>

<pre><code>$chr_map = array(
   // Windows codepage 1252
   ""\xC2\x82"" =&gt; ""'"", // U+0082U+201A single low-9 quotation mark
   ""\xC2\x84"" =&gt; '""', // U+0084U+201E double low-9 quotation mark
   ""\xC2\x8B"" =&gt; ""'"", // U+008BU+2039 single left-pointing angle quotation mark
   ""\xC2\x91"" =&gt; ""'"", // U+0091U+2018 left single quotation mark
   ""\xC2\x92"" =&gt; ""'"", // U+0092U+2019 right single quotation mark
   ""\xC2\x93"" =&gt; '""', // U+0093U+201C left double quotation mark
   ""\xC2\x94"" =&gt; '""', // U+0094U+201D right double quotation mark
   ""\xC2\x9B"" =&gt; ""'"", // U+009BU+203A single right-pointing angle quotation mark

   // Regular Unicode     // U+0022 quotation mark ("")
                          // U+0027 apostrophe     (')
   ""\xC2\xAB""     =&gt; '""', // U+00AB left-pointing double angle quotation mark
   ""\xC2\xBB""     =&gt; '""', // U+00BB right-pointing double angle quotation mark
   ""\xE2\x80\x98"" =&gt; ""'"", // U+2018 left single quotation mark
   ""\xE2\x80\x99"" =&gt; ""'"", // U+2019 right single quotation mark
   ""\xE2\x80\x9A"" =&gt; ""'"", // U+201A single low-9 quotation mark
   ""\xE2\x80\x9B"" =&gt; ""'"", // U+201B single high-reversed-9 quotation mark
   ""\xE2\x80\x9C"" =&gt; '""', // U+201C left double quotation mark
   ""\xE2\x80\x9D"" =&gt; '""', // U+201D right double quotation mark
   ""\xE2\x80\x9E"" =&gt; '""', // U+201E double low-9 quotation mark
   ""\xE2\x80\x9F"" =&gt; '""', // U+201F double high-reversed-9 quotation mark
   ""\xE2\x80\xB9"" =&gt; ""'"", // U+2039 single left-pointing angle quotation mark
   ""\xE2\x80\xBA"" =&gt; ""'"", // U+203A single right-pointing angle quotation mark
);
$chr = array_keys  ($chr_map); // but: for efficiency you should
$rpl = array_values($chr_map); // pre-calculate these two arrays
$str = str_replace($chr, $rpl, html_entity_decode($str, ENT_QUOTES, ""UTF-8""));
</code></pre>

<p>Here comes the background:</p>

<p>Every Unicode character belongs to exactly one <a href=""http://www.unicode.org/reports/tr44/#General_Category_Values"">""General Category""</a>, of which the ones that can contain quote characters are the following:</p>

<ul>
<li><code>Ps</code> <a href=""http://www.fileformat.info/info/unicode/category/Ps/list.htm"">""Punctuation, Open""</a></li>
<li><code>Pe</code> <a href=""http://www.fileformat.info/info/unicode/category/Pe/list.htm"">""Punctuation, Close""</a></li>
<li><code>Pi</code> <a href=""http://www.fileformat.info/info/unicode/category/Pi/list.htm"">""Punctuation, Initial quote (may behave like Ps or Pe depending on usage)""</a></li>
<li><code>Pf</code> <a href=""http://www.fileformat.info/info/unicode/category/Pf/list.htm"">""Punctuation, Final quote (may behave like Ps or Pe depending on usage)""</a></li>
<li><code>Po</code> <a href=""http://www.fileformat.info/info/unicode/category/Po/list.htm"">""Punctuation, Other""</a></li>
</ul>

<p>(these pages are handy for checking that you didn't miss anything - there is also an <a href=""http://www.fileformat.info/info/unicode/category/index.htm"">index of categories</a>)</p>

<p>It is sometimes useful to <a href=""http://www.regular-expressions.info/unicode.html#category"">match these categories</a> in a Unicode-enabled regex.</p>

<p>Furthermore, Unicode characters have <a href=""http://www.unicode.org/reports/tr44/#Property_List_Table"">""properties""</a>, of which the one you are interested in is <a href=""http://www.unicode.org/reports/tr44/#Quotation_Mark""><code>Quotation_Mark</code></a>. Unfortunately, these are not accessible in a regex.</p>

<p>In Wikipedia you can find the <a href=""http://en.wikipedia.org/wiki/Quotation_mark_glyphs#Quotation_marks_in_Unicode"">group of characters with the <code>Quotation_Mark</code> property</a>. The final reference is <a href=""http://www.unicode.org/Public/UNIDATA/PropList.txt"">PropList.txt</a> on unicode.org, but this is an ASCII textfile.</p>

<p>In case you need to translate CJK characters too, you only have to get their code points, decide their translation, and find their UTF-8 encoding, e.g., by looking it up in fileformat.info (e.g., for U+301E: <a href=""http://www.fileformat.info/info/unicode/char/301e/index.htm"">http://www.fileformat.info/info/unicode/char/301e/index.htm</a>).</p>

<p>Regarding Windows codepage 1252: <a href=""http://en.wikipedia.org/wiki/Unicode"">Unicode</a> defines the first 256 code points to represent exactly the same characters as <a href=""http://en.wikipedia.org/wiki/ISO-8859-1"">ISO-8859-1</a>, but ISO-8859-1 is often confused with <a href=""http://en.wikipedia.org/wiki/Windows-1252"">Windows codepage 1252</a>, so that all browsers render the range 0x80-0x9F, which is ""empty"" in ISO-8859-1 (more exactly: it contains control characters), as if it were Windows codepage 1252. <a href=""http://en.wikipedia.org/wiki/Windows-1252#Code_page_layout"">The table in the Wikipedia page</a> lists the Unicode equivalents.</p>

<p>Note: <a href=""http://php.net/manual/en/function.strtr.php""><code>strtr()</code></a> is often slower than <a href=""http://php.net/manual/en/function.str-replace.php""><code>str_replace()</code></a>. Time it with your input and your PHP version. If it's fast enough, you can directly use a map like my <code>$chr_map</code>.</p>

<hr>

<p>If you are not sure that your input is UTF-8 encoded, AND are willing to assume that if it's not, then it's ISO-8859-1 or Windows codepage 1252, then you can do this before anything else:</p>

<pre><code>if ( !preg_match('/^\\X*$/u', $str)) {
   $str = utf8_encode($str);
}
</code></pre>

<p>Warning: this regex can in very rare cases fail to detect a non-UTF-8 encoding, though. E.g.: <code>""Gru""/*CP-1252*/==""Gru\xDF\x85""</code> looks like UTF-8 to this regex (U+07C5 is the N'ko digit 5). This regex can be slightly enhanced, but unfortunately it can be shown that there exists NO completely foolproof solution to the problem of encoding detection.</p>

<hr>

<p>If you want to normalize the range 0x80-0x9F that stems from Windows codepage 1252 to regular Unicode codepoints, you can do this (and remove the first part of the <code>$chr_map</code> above):</p>

<pre><code>$normalization_map = array(
   ""\xC2\x80"" =&gt; ""\xE2\x82\xAC"", // U+20AC Euro sign
   ""\xC2\x82"" =&gt; ""\xE2\x80\x9A"", // U+201A single low-9 quotation mark
   ""\xC2\x83"" =&gt; ""\xC6\x92"",     // U+0192 latin small letter f with hook
   ""\xC2\x84"" =&gt; ""\xE2\x80\x9E"", // U+201E double low-9 quotation mark
   ""\xC2\x85"" =&gt; ""\xE2\x80\xA6"", // U+2026 horizontal ellipsis
   ""\xC2\x86"" =&gt; ""\xE2\x80\xA0"", // U+2020 dagger
   ""\xC2\x87"" =&gt; ""\xE2\x80\xA1"", // U+2021 double dagger
   ""\xC2\x88"" =&gt; ""\xCB\x86"",     // U+02C6 modifier letter circumflex accent
   ""\xC2\x89"" =&gt; ""\xE2\x80\xB0"", // U+2030 per mille sign
   ""\xC2\x8A"" =&gt; ""\xC5\xA0"",     // U+0160 latin capital letter s with caron
   ""\xC2\x8B"" =&gt; ""\xE2\x80\xB9"", // U+2039 single left-pointing angle quotation mark
   ""\xC2\x8C"" =&gt; ""\xC5\x92"",     // U+0152 latin capital ligature oe
   ""\xC2\x8E"" =&gt; ""\xC5\xBD"",     // U+017D latin capital letter z with caron
   ""\xC2\x91"" =&gt; ""\xE2\x80\x98"", // U+2018 left single quotation mark
   ""\xC2\x92"" =&gt; ""\xE2\x80\x99"", // U+2019 right single quotation mark
   ""\xC2\x93"" =&gt; ""\xE2\x80\x9C"", // U+201C left double quotation mark
   ""\xC2\x94"" =&gt; ""\xE2\x80\x9D"", // U+201D right double quotation mark
   ""\xC2\x95"" =&gt; ""\xE2\x80\xA2"", // U+2022 bullet
   ""\xC2\x96"" =&gt; ""\xE2\x80\x93"", // U+2013 en dash
   ""\xC2\x97"" =&gt; ""\xE2\x80\x94"", // U+2014 em dash
   ""\xC2\x98"" =&gt; ""\xCB\x9C"",     // U+02DC small tilde
   ""\xC2\x99"" =&gt; ""\xE2\x84\xA2"", // U+2122 trade mark sign
   ""\xC2\x9A"" =&gt; ""\xC5\xA1"",     // U+0161 latin small letter s with caron
   ""\xC2\x9B"" =&gt; ""\xE2\x80\xBA"", // U+203A single right-pointing angle quotation mark
   ""\xC2\x9C"" =&gt; ""\xC5\x93"",     // U+0153 latin small ligature oe
   ""\xC2\x9E"" =&gt; ""\xC5\xBE"",     // U+017E latin small letter z with caron
   ""\xC2\x9F"" =&gt; ""\xC5\xB8"",     // U+0178 latin capital letter y with diaeresis
);
$chr = array_keys  ($normalization_map); // but: for efficiency you should
$rpl = array_values($normalization_map); // pre-calculate these two arrays
$str = str_replace($chr, $rpl, $str);
</code></pre>
",Walter Tross,Walter Tross,1391207517,1391503313,1391503313
http://stackoverflow.com/a/2149533/87990,Select k random elements from a list whose elements have weights,34477,nimcap,Community,1264523205,1555207934,1495542327,https://stackoverflow.com/questions/2140787/select-k-random-elements-from-a-list-whose-elements-have-weights,"<p><strong>If the sampling is with replacement,</strong> you can use this algorithm (implemented here in Python):</p>

<pre><code>import random

items = [(10, ""low""),
         (100, ""mid""),
         (890, ""large"")]

def weighted_sample(items, n):
    total = float(sum(w for w, v in items))
    i = 0
    w, v = items[0]
    while n:
        x = total * (1 - random.random() ** (1.0 / n))
        total -= x
        while x &gt; w:
            x -= w
            i += 1
            w, v = items[i]
        w -= x
        yield v
        n -= 1
</code></pre>

<p>This is O(<em>n</em> + <em>m</em>) where <em>m</em> is the number of items.</p>

<p><strong>Why does this work?</strong> It is based on the following algorithm:</p>

<pre><code>def n_random_numbers_decreasing(v, n):
    """"""Like reversed(sorted(v * random() for i in range(n))),
    but faster because we avoid sorting.""""""
    while n:
        v *= random.random() ** (1.0 / n)
        yield v
        n -= 1
</code></pre>

<p>The function <code>weighted_sample</code> is just this algorithm fused with a walk of the <code>items</code> list to pick out the items selected by those random numbers.</p>

<p>This in turn works because the probability that <em>n</em> random numbers 0..<em>v</em> will all happen to be less than <em>z</em> is <em>P</em> = (<em>z/v</em>)<sup><em>n</em></sup>. Solve for <em>z</em>, and you get <em>z</em> = <em>vP</em><sup>1/<em>n</em></sup>. Substituting a random number for <em>P</em> picks the largest number with the correct distribution; and we can just repeat the process to select all the other numbers.</p>

<p><strong>If the sampling is without replacement,</strong> you can put all the items into a binary heap, where each node caches the total of the weights of all items in that subheap. Building the heap is O(<em>m</em>). Selecting a random item from the heap, respecting the weights, is O(log <em>m</em>). Removing that item and updating the cached totals is also O(log <em>m</em>).  So you can pick <em>n</em> items in O(<em>m</em> + <em>n</em> log <em>m</em>) time.</p>

<p>(Note: ""weight"" here means that every time an element is selected, the remaining possibilities are chosen with probability proportional to their weights.  It does not mean that elements appear in the output with a likelihood proportional to their weights.)</p>

<p>Here's an implementation of that, plentifully commented:</p>

<pre><code>import random

class Node:
    # Each node in the heap has a weight, value, and total weight.
    # The total weight, self.tw, is self.w plus the weight of any children.
    __slots__ = ['w', 'v', 'tw']
    def __init__(self, w, v, tw):
        self.w, self.v, self.tw = w, v, tw

def rws_heap(items):
    # h is the heap. It's like a binary tree that lives in an array.
    # It has a Node for each pair in `items`. h[1] is the root. Each
    # other Node h[i] has a parent at h[i&gt;&gt;1]. Each node has up to 2
    # children, h[i&lt;&lt;1] and h[(i&lt;&lt;1)+1].  To get this nice simple
    # arithmetic, we have to leave h[0] vacant.
    h = [None]                          # leave h[0] vacant
    for w, v in items:
        h.append(Node(w, v, w))
    for i in range(len(h) - 1, 1, -1):  # total up the tws
        h[i&gt;&gt;1].tw += h[i].tw           # add h[i]'s total to its parent
    return h

def rws_heap_pop(h):
    gas = h[1].tw * random.random()     # start with a random amount of gas

    i = 1                     # start driving at the root
    while gas &gt;= h[i].w:      # while we have enough gas to get past node i:
        gas -= h[i].w         #   drive past node i
        i &lt;&lt;= 1               #   move to first child
        if gas &gt;= h[i].tw:    #   if we have enough gas:
            gas -= h[i].tw    #     drive past first child and descendants
            i += 1            #     move to second child
    w = h[i].w                # out of gas! h[i] is the selected node.
    v = h[i].v

    h[i].w = 0                # make sure this node isn't chosen again
    while i:                  # fix up total weights
        h[i].tw -= w
        i &gt;&gt;= 1
    return v

def random_weighted_sample_no_replacement(items, n):
    heap = rws_heap(items)              # just make a heap...
    for i in range(n):
        yield rws_heap_pop(heap)        # and pop n items off it.
</code></pre>
",Jason Orendorff,ech,1264618681,1457549304,1457549304
http://stackoverflow.com/a/21505193/1315110,How can I detect when an Android application is running in the emulator?,95136,Joe Ludwig,Nikhil,1273437629,1553944017,1341834765,https://stackoverflow.com/questions/2799097/how-can-i-detect-when-an-android-application-is-running-in-the-emulator,"<p>How about this solution:</p>

<pre><code>public static boolean isEmulator() {
    return Build.FINGERPRINT.startsWith(""generic"")
            || Build.FINGERPRINT.startsWith(""unknown"")
            || Build.MODEL.contains(""google_sdk"")
            || Build.MODEL.contains(""Emulator"")
            || Build.MODEL.contains(""Android SDK built for x86"")
            || Build.MANUFACTURER.contains(""Genymotion"")
            || (Build.BRAND.startsWith(""generic"") &amp;&amp; Build.DEVICE.startsWith(""generic""))
            || ""google_sdk"".equals(Build.PRODUCT);
}
</code></pre>
",android developer,wvdz,1391298308,1456322065,1456322065
http://stackoverflow.com/a/21553982/175551,How do I parse a URL into hostname and path in javascript?,321948,freddiefujiwara,hakre,1239329862,1547200685,1358766144,https://stackoverflow.com/questions/736513/how-do-i-parse-a-url-into-hostname-and-path-in-javascript,"<p>Here's a simple function using a regexp that imitates the <code>a</code> tag behavior.</p>

<p>Pros</p>

<ul>
<li>predictable behaviour (no cross browser issues)</li>
<li>doesn't need the DOM</li>
<li>it's really short.</li>
</ul>

<p>Cons</p>

<ul>
<li>The regexp is a bit difficult to read</li>
</ul>

<p>-</p>

<pre><code>function getLocation(href) {
    var match = href.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);
    return match &amp;&amp; {
        href: href,
        protocol: match[1],
        host: match[2],
        hostname: match[3],
        port: match[4],
        pathname: match[5],
        search: match[6],
        hash: match[7]
    }
}
</code></pre>

<p>-</p>

<pre><code>getLocation(""http://example.com/"");
/*
{
    ""protocol"": ""http:"",
    ""host"": ""example.com"",
    ""hostname"": ""example.com"",
    ""port"": undefined,
    ""pathname"": ""/""
    ""search"": """",
    ""hash"": """",
}
*/

getLocation(""http://example.com:3000/pathname/?search=test#hash"");
/*
{
    ""protocol"": ""http:"",
    ""host"": ""example.com:3000"",
    ""hostname"": ""example.com"",
    ""port"": ""3000"",
    ""pathname"": ""/pathname/"",
    ""search"": ""?search=test"",
    ""hash"": ""#hash""
}
*/
</code></pre>

<p>EDIT:</p>

<p>Here's a breakdown of the regular expression</p>

<pre><code>var reURLInformation = new RegExp([
    '^(https?:)//', // protocol
    '(([^:/?#]*)(?::([0-9]+))?)', // host (hostname and port)
    '(/{0,1}[^?#]*)', // pathname
    '(\\?[^#]*|)', // search
    '(#.*|)$' // hash
].join(''));
var match = href.match(reURLInformation);
</code></pre>
",Rems,mattdlockyer,1391520844,1491921039,1491921039
http://stackoverflow.com/a/21559407/1967571,Loop unrolling to achieve maximum throughput with Ivy Bridge and Haswell,2957,Z boson,Community,1389614760,1391716036,1495541874,https://stackoverflow.com/questions/21090873/loop-unrolling-to-achieve-maximum-throughput-with-ivy-bridge-and-haswell,"<p>For Sandy/Ivy Bridge you need to unroll by 3:</p>

<ul>
<li>Only FP Add has dependency on the previous iteration of the loop</li>
<li>FP Add can issue every cycle</li>
<li>FP Add takes three cycles to complete</li>
<li>Thus unrolling by 3/1 = 3 completely hides the latency</li>
<li>FP Mul and FP Load do not have a dependency on the previous iteration and you can rely on the OoO core to issue them in the near-optimal order. These instructions could affect the unroll factor only if they lowered the throughput of FP Add (not the case here, FP Load + FP Add + FP Mul can issue every cycle).</li>
</ul>

<p>For Haswell you need to unroll by 10:</p>

<ul>
<li>Only FMA has dependency on the previous iteration of the loop</li>
<li>FMA can double-issue every cycle (i.e. on average independent instructions take 0.5 cycles)</li>
<li>FMA has latency of 5</li>
<li>Thus unrolling by 5/0.5 = 10 completely hides FMA latency</li>
<li>The two FP Load microoperations do not have a dependency on the previous iteration, and can co-issue with 2x FMA, so they don't affect the unroll factor.</li>
</ul>
",Marat Dukhan,,1391535158,1391535158,0
http://stackoverflow.com/a/2158532/783019,Flatten an irregular list of lists,111748,telliott99,codeforester,1264716942,1558618990,1524599418,https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists,"<p>Using generator functions can make your example a little easier to read and probably boost the performance.</p>

<h2>Python 2</h2>

<pre><code>def flatten(l):
    for el in l:
        if isinstance(el, collections.Iterable) and not isinstance(el, basestring):
            for sub in flatten(el):
                yield sub
        else:
            yield el
</code></pre>

<p>I used the <a href=""http://docs.python.org/library/collections.html#abcs-abstract-base-classes"" rel=""noreferrer"">Iterable ABC</a> added in 2.6.</p>

<h2>Python 3</h2>

<p>In Python 3, the <code>basestring</code> is no more, but you can use a tuple of <code>str</code> and <code>bytes</code> to get the same effect there.</p>

<p>The <code>yield from</code> operator returns an item from a generator one at a time. This <a href=""https://docs.python.org/3/whatsnew/3.3.html#pep-380"" rel=""noreferrer"">syntax for delegating to a subgenerator</a> was added in 3.3</p>

<pre><code>def flatten(l):
    for el in l:
        if isinstance(el, collections.Iterable) and not isinstance(el, (str, bytes)):
            yield from flatten(el)
        else:
            yield el
</code></pre>
",Cristian,Cristian,1264718151,1473824992,1473824992
http://stackoverflow.com/a/21613700/3529104,How do I reverse a String in Dart?,5953,Seth Ladd,Seth Ladd,1391411915,1560952986,1391526236,https://stackoverflow.com/questions/21521729/how-do-i-reverse-a-string-in-dart,"<p>The question is not well defined. Reversing arbitrary strings does not make sense and will lead to broken output. The first (surmountable) obstacle is Utf-16. Dart strings are encoded as Utf-16 and reversing just the code-units leads to invalid strings:</p>

<pre><code>var input = ""Music \u{1d11e} for the win""; // Music  for the win
print(input.split('').reversed.join()); // niw eht rof
</code></pre>

<p>The <code>split</code> function explicitly warns against this problem (with an example): </p>

<blockquote>
  <p>Splitting with an empty string pattern ('') splits at UTF-16 code unit boundaries and not at rune boundaries[.]</p>
</blockquote>

<p>There is an easy fix for this: instead of reversing the individual code-units one can reverse the runes:</p>

<pre><code>var input = ""Music \u{1d11e} for the win""; // Music  for the win
print(new String.fromCharCodes(input.runes.toList().reversed)); // niw eht rof  cisuM
</code></pre>

<p>But that's not all. Runes, too, can have a specific order. This second obstacle is <em>much</em> harder to solve. A simple example:</p>

<pre><code>var input =  'Ame\u{301}lie'; // Amelie
print(new String.fromCharCodes(input.runes.toList().reversed)); // eilemA
</code></pre>

<p>Note that the accent is on the wrong character.</p>

<p>There are probably other languages that are even more sensitive to the order of individual runes.</p>

<p>If the input has severe restrictions (for example being Ascii, or Iso Latin 1) then reversing strings is technically possible. However, I haven't yet seen a single use-case where this operation made sense.</p>

<p>Using this question as example for showing that strings have List-like operations is not a good idea, either. Except for few use-cases, strings have to be treated with respect to a specific language, and with highly complex methods that have language-specific knowledge.</p>

<p>In particular native English speakers have to pay attention: strings can rarely be handled as if they were lists of single characters. In almost every other language this will lead to buggy programs. (And don't get me started on <code>toLowerCase</code> and <code>toUpperCase</code> ...).</p>
",Florian Loitsch,,1391719597,1391719597,0
http://stackoverflow.com/a/2161748/1262753,Get script path,41630,David Hellsing,,1264759557,1522270945,0,https://stackoverflow.com/questions/2161159/get-script-path,"<p>Searching the DOM for your own <code>&lt;script&gt;</code> tag as above is the usual method, yes.</p>

<p>However, you usually needn't search too hard: when you're in the body of the scriptrun at include-timeyou know very well which <code>&lt;script&gt;</code> element you are: the last one. The rest of them can't have been parsed yet.</p>

<pre><code>var scripts= document.getElementsByTagName('script');
var path= scripts[scripts.length-1].src.split('?')[0];      // remove any ?query
var mydir= path.split('/').slice(0, -1).join('/')+'/';  // remove last filename part of path

function doSomething() {
    img.src= mydir+'../images/myimage.jpeg';
}
</code></pre>

<p>This doesn't hold true if your script has been linked with <code>&lt;script defer&gt;</code> (or, in HTML5, <code>&lt;script async&gt;</code>). However, this is currently rarely used.</p>
",bobince,Community,1264766884,1296029162,1296029162
http://stackoverflow.com/a/21618038/1805713,How to check if value has even parity of bits or odd?,30733,Manuel,nalzok,1391738882,1550865242,1475757525,https://stackoverflow.com/questions/21617970/how-to-check-if-value-has-even-parity-of-bits-or-odd,"<pre><code>x ^= x &gt;&gt; 16;
x ^= x &gt;&gt; 8;
x ^= x &gt;&gt; 4;
x ^= x &gt;&gt; 2;
x ^= x &gt;&gt; 1;
return (~x) &amp; 1;
</code></pre>

<p>Assuming you know ints are 32 bits.</p>

<hr>

<p>Let's see how this works. To keep it simple, let's use an 8 bit integer, for which we can skip the first two shift/XORs. Let's label the bits <em>a</em> through <em>h</em>. If we look at our number we see:</p>

<p>( <i>a</i> <i>b</i> <i>c</i> <i>d</i> <i>e</i> <i>f</i> <i>g</i> <i>h</i> )</p>

<hr>

<p>The first operation is <code>x ^= x &gt;&gt; 4</code> (remember we're skipping the first two operations since we're only dealing with an 8-bit integer in this example). Let's write the new values of each bit by combining the letters that are XOR'd together (for example, <i>ab</i> means the bit has the value <i>a</i> xor <i>b</i>).</p>

<p>( <i>a</i> <i>b</i> <i>c</i> <i>d</i> <i>e</i> <i>f</i> <i>g</i> <i>h</i> )
xor
( <i>0</i> <i>0</i> <i>0</i> <i>0</i> <i>a</i> <i>b</i> <i>c</i> <i>d</i> )</p>

<p>The result is the following bits:</p>

<p>( <i>a</i> <i>b</i> <i>c</i> <i>d</i> <i>ae</i> <i>bf</i> <i>cg</i> <i>dh</i> )</p>

<hr>

<p>The next operation is <code>x ^= x &gt;&gt; 2</code>:</p>

<p>( <i>a</i> <i>b</i> <i>c</i> <i>d</i> <i>ae</i> <i>bf</i> <i>cg</i> <i>dh</i> )
xor
( 0 0 <i>a</i> <i>b</i> <i>c</i> <i>d</i> <i>ae</i> <i>bf</i> )</p>

<p>The result is the following bits:</p>

<p>( <i>a</i> <i>b</i> <i>ac</i> <i>bd</i> <i>ace</i> <i>bdf</i> <i>aceg</i> <i>bdfh</i> )</p>

<p>Notice how we are beginning to accumulate all the bits on the right-hand side.</p>

<hr>

<p>The next operation is <code>x ^= x &gt;&gt; 1</code>:</p>

<p>( <i>a</i> <i>b</i> <i>ac</i> <i>bd</i> <i>ace</i> <i>bdf</i> <i>aceg</i> <i>bdfh</i> )
xor
( 0 <i>a</i> <i>b</i> <i>ac</i> <i>bd</i> <i>ace</i> <i>bdf</i> <i>aceg</i> )</p>

<p>The result is the following bits:</p>

<p>( <i>a</i> <i>ab</i> <i>abc</i> <i>abcd</i> <i>abcde</i> <i>abcdef</i> <i>abcdefgh</i> <i>abcdefgh</i> )</p>

<hr>

<p>We have accumulated all the bits in the original word, XOR'd together, in the least-significant bit. So this bit is now zero if and only if there were an even number of 1 bits in the input word (even parity). The same process works on 32-bit integers (but requires those two additional shifts that we skipped in this demonstration).</p>

<p>The final line of code simply strips off all but the least-significant bit (<code>&amp; 1</code>) and then flips it (<code>~x</code>). The result, then, is 1 if the parity of the input word was even, or zero otherwise.</p>
",TypeIA,Community,1391739321,1439483342,1439483342
http://stackoverflow.com/a/21621689/1085344,How to Bootstrap numpy installation in setup.py,6489,user545424,Siguza,1384224109,1547236964,1436509295,https://stackoverflow.com/questions/19919905/how-to-bootstrap-numpy-installation-in-setup-py,"<p>The following works at least with numpy1.8 and python{2.6,2.7,3.3}:</p>

<pre><code>from setuptools import setup
from setuptools.command.build_ext import build_ext as _build_ext

class build_ext(_build_ext):
    def finalize_options(self):
        _build_ext.finalize_options(self)
        # Prevent numpy from thinking it is still in its setup process:
        __builtins__.__NUMPY_SETUP__ = False
        import numpy
        self.include_dirs.append(numpy.get_include())

setup(
    ...
    cmdclass={'build_ext':build_ext},
    setup_requires=['numpy'],
    ...
)
</code></pre>

<p>For a small explanation, see why it fails without the ""hack"", see <a href=""https://stackoverflow.com/a/21621493/650222"">this answer</a>.</p>

<p>Note, that using <code>setup_requires</code> has a subtle downside: numpy will not only be compiled before building extensions, but also when doing <code>python setup.py --help</code>, for example. To avoid this, you could check for command line options, like suggested in <a href=""https://github.com/scipy/scipy/blob/9ccc68475fc431c4a44c120693cf6878cc4c14a7/setup.py#L205"" rel=""noreferrer"">https://github.com/scipy/scipy/blob/master/setup.py#L205</a>, but on the other hand I don't really think it's worth the effort.</p>
",coldfix,Community,1391757860,1484180077,1495535459
http://stackoverflow.com/a/21642401/4721910,ListPreference&#39;s summary text is not updated automatically whenever there is change in selection,6583,Cheok Yan Cheng,,1334218551,1532030669,0,https://stackoverflow.com/questions/10119852/listpreferences-summary-text-is-not-updated-automatically-whenever-there-is-cha,"<p>This is a bug that existed on platforms prior to KITKAT (i.e. android-4.4_r0.7), and it is fixed by commit <a href=""https://android.googlesource.com/platform/frameworks/base/+/94c02a1a1a6d7e6900e5a459e9cc699b9510e5a2"" rel=""nofollow noreferrer"">94c02a1</a></p>

<p>The solution from @ilomambo works, but may not be the best one. I read through the source of <code>ListPreference</code> and came up with this solution:</p>

<p>File: ListPreferenceCompat.java</p>

<pre><code>package com.example.yourapplication;

import android.content.Context;
import android.os.Build;
import android.preference.ListPreference;
import android.text.TextUtils;
import android.util.AttributeSet;

public class ListPreferenceCompat extends ListPreference {

    @TargetApi(Build.VERSION_CODES.LOLLIPOP)
    public ListPreferenceCompat(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
    }

    @TargetApi(Build.VERSION_CODES.LOLLIPOP)
    public ListPreferenceCompat(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    public ListPreferenceCompat(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ListPreferenceCompat(Context context) {
        super(context);
    }

    // NOTE:
    // The framework forgot to call notifyChanged() in setValue() on previous versions of android.
    // This bug has been fixed in android-4.4_r0.7.
    // Commit: platform/frameworks/base/+/94c02a1a1a6d7e6900e5a459e9cc699b9510e5a2
    // Time: Tue Jul 23 14:43:37 2013 -0700
    //
    // However on previous versions, we have to work around it by ourselves.
    @Override
    public void setValue(String value) {
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {
            super.setValue(value);
        } else {
            String oldValue = getValue();
            super.setValue(value);
            if (!TextUtils.equals(value, oldValue)) {
                notifyChanged();
            }
        }
    }
}
</code></pre>

<p>When you need to use <code>ListPreference</code> in xml, simply replace the tag to <code>com.example.yourapplication.ListPreferenceCompat</code>.</p>

<p>This works neatly on my Samsung S4 device running Android 4.3, and inside one of my production app.</p>
",Dreaming in Code,Dreaming in Code,1391837716,1532030669,1532030669
http://stackoverflow.com/a/21715692/5678759,How to prevent Warning: POST Content-Length and memory size,32885,jave.web,jave.web,1392129753,1479641730,1392162578,https://stackoverflow.com/questions/21704930/how-to-prevent-warning-post-content-length-and-memory-size,"<p>So after searching instead of working today I finally got an idea how to solve this, it worked, and even didnt cause much damage. But please first understand what you are doing, before doing it. :) As I suggested in one of my comments it is really possible to turn off PHP errors in .htacess - just turn off the PHP startup warnings.</p>

<h1>Before you apply the solution:</h1>

<p><strong>Note that:</strong> after you insert this code to your .htaccess you won't be able to see <strong>any</strong>
 startup error</p>

<p><strong>Also note that:</strong> there are more start up errors on line ""0"" than this one.</p>

<p><strong>Do before:</strong> Before you do this you should prepare your script in the way that it should check the uploaded content size and <strong>give user a proper information message</strong>. The fact that the warning doesnt show <strong>DOES NOT</strong> mean that you should do nothing about it. It means the EXACT oposite - you should do all that you can to make something at least near-equal to the warning raise - check, double check if you can, handle error and raise your own error message.</p>

<h1>Add this to your .htaccess:</h1>

<p><strong><code>php_flag display_startup_errors off</code></strong></p>

<h1>It is not that evil as it seems to be:</h1>

<p>Please note that this turns off startup errors <strong>only</strong>. 
<br>So <strong>all the regular PHP errors/warnings/notices stays ON :)</strong></p>

<h1>Even XAMPP's PHP ""itself"" recommends it for production:</h1>

<p>The <code>php.ini</code> file literaly says:</p>

<pre><code>; display_startup_errors
;   Default Value: Off
;   Development Value: On
;   Production Value: Off
</code></pre>

<p><strong>PS:</strong> ""startup error"" seems to be those errors <strong>before</strong> PHP script is executed itself - these errors are usually trying to ""persuade"" you that <strong>they are on the line 0</strong>.</p>

<p>Thanks to my idea and this answer: <a href=""https://stackoverflow.com/questions/8652933/how-to-disable-notice-and-warning-in-php-within-htaccess-file"">How to disable notice and warning in PHP within .htaccess file?</a> </p>

<p><strong>EDIT:</strong> As this is a php_flag setting, you can of course also set it by default in your php.ini if you have custom instalation of PHP :)</p>
",jave.web,Community,1392162480,1392163336,1495540498
http://stackoverflow.com/a/21715870/27641,Python - email header decoding UTF-8,30545,Hans Moser,Hans Moser,1315386603,1518639544,1315391972,https://stackoverflow.com/questions/7331351/python-email-header-decoding-utf-8,"<p>I was just testing with encoded headers in Python 3.3, and I found that this is a very convenient way to deal with them:</p>

<pre><code>&gt;&gt;&gt; from email.header import Header, decode_header, make_header

&gt;&gt;&gt; subject = '[ 201105161048 ] GewSt:=?UTF-8?B?IFdlZ2ZhbGwgZGVyIFZvcmzDpHVmaWdrZWl0?='
&gt;&gt;&gt; h = make_header(decode_header(subject))
&gt;&gt;&gt; str(h)
'[ 201105161048 ] GewSt:  Wegfall der Vorlufigkeit'
</code></pre>

<p>As you can see it automatically adds whitespace around the encoded words.</p>

<p>It internally keeps the encoded and ASCII header parts separate as you can see when it re-encodes the non-ASCII parts:</p>

<pre><code>&gt;&gt;&gt; h.encode()
'[ 201105161048 ] GewSt: =?utf-8?q?_Wegfall_der_Vorl=C3=A4ufigkeit?='
</code></pre>

<p>If you want the whole header re-encoded you could convert the header to a string and then back into a header:</p>

<pre><code>&gt;&gt;&gt; h2 = Header(str(h))
&gt;&gt;&gt; str(h2)
'[ 201105161048 ] GewSt:  Wegfall der Vorlufigkeit'
&gt;&gt;&gt; h2.encode()
'=?utf-8?q?=5B_201105161048_=5D_GewSt=3A__Wegfall_der_Vorl=C3=A4ufigkeit?='
</code></pre>
",Sander Steffann,,1392163341,1392163341,0
http://stackoverflow.com/a/21755207/1728537,How to get around GCC *((void*)&amp; b +4) may be used uninitialized in this function warning while using boost::optional,8049,Paul Omta,,1392296994,1550561986,0,https://stackoverflow.com/questions/21755206/how-to-get-around-gcc-void-b-4-may-be-used-uninitialized-in-this-funct,"<p>I have found that changing the construction of b into the following (effectively equal) code:</p>

<pre><code>auto b = boost::make_optional(false,0);
</code></pre>

<p>eliminates the warning. However, the following code (which is also effectively equal):</p>

<pre><code>boost::optional&lt;int&gt; b(false,0);
</code></pre>

<p>does not eliminate the warning.
It's still a little unsatisfactory...</p>
",Paul Omta,Paul Omta,1392296994,1392794492,1392794492
http://stackoverflow.com/a/21791059/6030888,How can I iterate through the unicode codepoints of a Java String?,26014,rampion,Florian Weimer,1254860025,1540392916,1500396448,https://stackoverflow.com/questions/1527856/how-can-i-iterate-through-the-unicode-codepoints-of-a-java-string,"<p>Thought I'd add a workaround method that works with foreach loops (<a href=""http://bugs.java.com/bugdatabase/view_bug.do?bug_id=5003547"" rel=""nofollow noreferrer"">ref</a>), plus you can convert it to java 8's new <a href=""https://stackoverflow.com/a/27798012/32453"">String#codePoints</a> method easily when you move to java 8:</p>

<p>You can use it with foreach like this:</p>

<pre><code> for(int codePoint : codePoints(myString)) {
   ....
 }
</code></pre>

<p>Here's the helper mthod:</p>

<pre><code>public static Iterable&lt;Integer&gt; codePoints(final String string) {
  return new Iterable&lt;Integer&gt;() {
    public Iterator&lt;Integer&gt; iterator() {
      return new Iterator&lt;Integer&gt;() {
        int nextIndex = 0;
        public boolean hasNext() {
          return nextIndex &lt; string.length();
        }
        public Integer next() {
          int result = string.codePointAt(nextIndex);
          nextIndex += Character.charCount(result);
          return result;
        }
        public void remove() {
          throw new UnsupportedOperationException();
        }
      };
    }
  };
}
</code></pre>

<p>Or alternately if you just want to convert a string to an array of int (which might use more RAM than the above approach):</p>

<pre><code> public static List&lt;Integer&gt; stringToCodePoints(String in) {
    if( in == null)
      throw new NullPointerException(""got null"");
    List&lt;Integer&gt; out = new ArrayList&lt;Integer&gt;();
    final int length = in.length();
    for (int offset = 0; offset &lt; length; ) {
      final int codepoint = in.codePointAt(offset);
      out.add(codepoint);
      offset += Character.charCount(codepoint);
    }
    return out;
  }
</code></pre>

<p>Thankfully uses ""codePoints"" safely handles the surrogate pair-ness of UTF-16 (java's internal string representation).</p>
",rogerdpack,rogerdpack,1392419097,1540392916,1540392916
http://stackoverflow.com/a/21799845/1050818,Check for an instance of ArrayBufferView?,4323,james,james,1392292632,1550296224,1393260481,https://stackoverflow.com/questions/21753581/check-for-an-instance-of-arraybufferview,"<p>I would use either:</p>

<pre><code>function isAbv(value) {
    return value &amp;&amp; value.buffer instanceof ArrayBuffer &amp;&amp; value.byteLength !== undefined;
}
</code></pre>

<p>or:</p>

<pre><code>var ArrayBufferView = Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array)).constructor;
function isAbv(value) {
    return value instanceof ArrayBufferView;
}
</code></pre>
",Joel Richard,,1392479589,1392479589,0
http://stackoverflow.com/a/2180157/298171,How can I copy a file on Unix using C?,110611,Motti,Nikolai Fetissov,1265058318,1537065118,1265058496,https://stackoverflow.com/questions/2180079/how-can-i-copy-a-file-on-unix-using-c,"<p>There is no baked-in equivalent CopyFile function in the APIs. But <a href=""http://docs.oracle.com/cd/E23823_01/html/816-5172/sendfile-3ext.html#scrolltoc"" rel=""nofollow noreferrer"">sendfile</a> can be used to copy a file in kernel mode which is a faster and better solution (for numerous reasons) than opening a file, looping over it to read into a buffer, and writing the output to another file.</p>

<p>Update:</p>

<p>As of Linux kernel version 2.6.33, the limitation requiring the output of <code>sendfile</code> to be a socket was lifted and the original code would work on both Linux and  however, as of OS X 10.9 Mavericks, <code>sendfile</code> on OS X now requires the output to be a socket and the code won't work!</p>

<p>The following code snippet should work on the most OS X (as of 10.5), (Free)BSD, and Linux (as of 2.6.33). The implementation is ""zero-copy"" for all platforms, meaning all of it is done in kernelspace and there is no copying of buffers or data in and out of userspace. Pretty much the best performance you can get.</p>

<pre><code>#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
#if defined(__APPLE__) || defined(__FreeBSD__)
#include &lt;copyfile.h&gt;
#else
#include &lt;sys/sendfile.h&gt;
#endif

int OSCopyFile(const char* source, const char* destination)
{    
    int input, output;    
    if ((input = open(source, O_RDONLY)) == -1)
    {
        return -1;
    }    
    if ((output = creat(destination, 0660)) == -1)
    {
        close(input);
        return -1;
    }

    //Here we use kernel-space copying for performance reasons
#if defined(__APPLE__) || defined(__FreeBSD__)
    //fcopyfile works on FreeBSD and OS X 10.5+ 
    int result = fcopyfile(input, output, 0, COPYFILE_ALL);
#else
    //sendfile will work with non-socket output (i.e. regular file) on Linux 2.6.33+
    off_t bytesCopied = 0;
    struct stat fileinfo = {0};
    fstat(input, &amp;fileinfo);
    int result = sendfile(output, input, &amp;bytesCopied, fileinfo.st_size);
#endif

    close(input);
    close(output);

    return result;
}
</code></pre>

<p><em>EDIT</em>: Replaced the opening of the destination with the call to <code>creat()</code> as we want the flag <code>O_TRUNC</code> to be specified. See comment below.</p>
",Mahmoud Al-Qudsi,Patrick Schlter,1265059047,1499420802,1499420802
http://stackoverflow.com/a/21806609/298171,Concatenating strings (and numbers) in variadic template function,6986,jett,,1392518087,1478731818,0,https://stackoverflow.com/questions/21806561/concatenating-strings-and-numbers-in-variadic-template-function,"<pre><code>inline std::string const&amp; to_string(std::string const&amp; s) { return s; }

template&lt;typename... Args&gt;
std::string stringer(Args const&amp;... args)
{
    std::string result;
    using ::to_string;
    using std::to_string;
    int unpack[]{0, (result += to_string(args), 0)...};
    static_cast&lt;void&gt;(unpack);
    return result;
}
</code></pre>
",Simple,Simple,1392518372,1392640863,1392640863
http://stackoverflow.com/a/218081/1548788,How can I determine whether a 2D Point is within a Polygon?,246891,Scott Evernden,Dragon Energy,1224480049,1555065533,1450136556,https://stackoverflow.com/questions/217578/how-can-i-determine-whether-a-2d-point-is-within-a-polygon,"<p>For graphics, I'd rather not prefer integers. Many systems use integers for UI painting (pixels are ints after all), but macOS for example uses float for everything. macOS only knows points and a point can translate to one pixel, but depending on monitor resolution, it might translate to something else. On retina screens half a point (0.5/0.5) is pixel. Still, I never noticed that macOS UIs are significantly slower than other UIs. After all 3D APIs (OpenGL or Direct3D) also works with floats and modern graphics libraries very often take advantage of GPU acceleration.</p>

<p>Now you said speed is your main concern, okay, let's go for speed. Before you run any sophisticated algorithm, first do a simple test. Create an <em>axis aligned bounding box</em> around your polygon. This is very easy, fast and can already safe you a lot of calculations.  How does that work? Iterate over all points of the polygon and find the min/max values of X and Y. </p>

<p>E.g. you have the points <code>(9/1), (4/3), (2/7), (8/2), (3/6)</code>. This means Xmin is 2, Xmax is 9, Ymin is 1 and Ymax is 7. A point outside of the rectangle with the two edges (2/1) and (9/7) cannot be within the polygon.</p>

<pre class=""lang-c prettyprint-override""><code>// p is your point, p.x is the x coord, p.y is the y coord
if (p.x &lt; Xmin || p.x &gt; Xmax || p.y &lt; Ymin || p.y &gt; Ymax) {
    // Definitely not within the polygon!
}
</code></pre>

<p>This is the first test to run for any point. As you can see, this test is ultra fast but it's also very coarse. To handle points that are within the bounding rectangle, we need a more sophisticated algorithm. There are a couple of ways how this can be calculated. Which method works also depends on the fact if the polygon can have holes or will always be solid. Here are examples of solid ones (one convex, one concave):</p>

<p><img src=""https://i.stack.imgur.com/G76ta.jpg"" alt=""Polygon without hole""></p>

<p>And here's one with a hole:</p>

<p><img src=""https://i.stack.imgur.com/oDCCd.gif"" alt=""Polygon with hole""></p>

<p>The green one has a hole in the middle!</p>

<p>The easiest algorithm, that can handle all three cases above and is still pretty fast is named <strong>ray casting</strong>. The idea of the algorithm is pretty simple: Draw a virtual ray from anywhere outside the polygon to your point and count how often it hits a side of the polygon. If the number of hits is even, it's outside of the polygon, if it's odd, it's inside.</p>

<p><img src=""https://i.stack.imgur.com/2EzSM.png"" alt=""Demonstrating how the ray cuts through a polygon""></p>

<p>The <strong>winding number algorithm</strong> would be an alternative, it is more accurate for points being very close to a polygon line but it's also much slower. Ray casting may fail for points too close to a polygon side because of limited floating point precision and rounding issues, but in reality that is hardly a problem, as if a point lies that close to a side, it's often visually not even possible for a viewer to recognize if it is already inside or still outside.</p>

<p>You still have the bounding box of above, remember? Just pick a point outside the bounding box and use it as starting point for your ray. E.g. the point <code>(Xmin - e/p.y)</code> is outside the polygon for sure. </p>

<p>But what is <code>e</code>? Well, <code>e</code> (actually epsilon) gives the bounding box some <em>padding</em>. As I said, ray tracing fails if we start too close to a polygon line. Since the bounding box might equal the polygon (if the polygon is an axis aligned rectangle, the bounding box is equal to the polygon itself!), we need some padding to make this safe, that's all. How big should you choose <code>e</code>? Not too big. It depends on the coordinate system scale you use for drawing. If your pixel step width is 1.0, then just choose 1.0 (yet 0.1 would have worked as well)</p>

<p>Now that we have the ray with its start and end coordinates, the problem shifts from ""<em>is the point within the polygon</em>"" to ""<em>how often does the ray intersects a polygon side</em>"". Therefore we can't just work with the polygon points as before, now we need the actual sides. A side is always defined by two points.</p>

<pre><code>side 1: (X1/Y1)-(X2/Y2)
side 2: (X2/Y2)-(X3/Y3)
side 3: (X3/Y3)-(X4/Y4)
:
</code></pre>

<p>You need to test the ray against all sides. Consider the ray to be a vector and every side to be a vector. The ray has to hit each side exactly once or never at all. It can't hit the same side twice. Two lines in 2D space will always intersect exactly once, unless they are parallel, in which case they never intersect. However since vectors have a limited length, two vectors might not be parallel and still never intersect because they are too short to ever meet each other.</p>

<pre class=""lang-c prettyprint-override""><code>// Test the ray against all sides
int intersections = 0;
for (side = 0; side &lt; numberOfSides; side++) {
    // Test if current side intersects with ray.
    // If yes, intersections++;
}
if ((intersections &amp; 1) == 1) {
    // Inside of polygon
} else {
    // Outside of polygon
}
</code></pre>

<p>So far so well, but how do you test if two vectors intersect? Here's some C code (not tested), that should do the trick:</p>

<pre class=""lang-c prettyprint-override""><code>#define NO 0
#define YES 1
#define COLLINEAR 2

int areIntersecting(
    float v1x1, float v1y1, float v1x2, float v1y2,
    float v2x1, float v2y1, float v2x2, float v2y2
) {
    float d1, d2;
    float a1, a2, b1, b2, c1, c2;

    // Convert vector 1 to a line (line 1) of infinite length.
    // We want the line in linear equation standard form: A*x + B*y + C = 0
    // See: http://en.wikipedia.org/wiki/Linear_equation
    a1 = v1y2 - v1y1;
    b1 = v1x1 - v1x2;
    c1 = (v1x2 * v1y1) - (v1x1 * v1y2);

    // Every point (x,y), that solves the equation above, is on the line,
    // every point that does not solve it, is not. The equation will have a
    // positive result if it is on one side of the line and a negative one 
    // if is on the other side of it. We insert (x1,y1) and (x2,y2) of vector
    // 2 into the equation above.
    d1 = (a1 * v2x1) + (b1 * v2y1) + c1;
    d2 = (a1 * v2x2) + (b1 * v2y2) + c1;

    // If d1 and d2 both have the same sign, they are both on the same side
    // of our line 1 and in that case no intersection is possible. Careful, 
    // 0 is a special case, that's why we don't test ""&gt;="" and ""&lt;="", 
    // but ""&lt;"" and ""&gt;"".
    if (d1 &gt; 0 &amp;&amp; d2 &gt; 0) return NO;
    if (d1 &lt; 0 &amp;&amp; d2 &lt; 0) return NO;

    // The fact that vector 2 intersected the infinite line 1 above doesn't 
    // mean it also intersects the vector 1. Vector 1 is only a subset of that
    // infinite line 1, so it may have intersected that line before the vector
    // started or after it ended. To know for sure, we have to repeat the
    // the same test the other way round. We start by calculating the 
    // infinite line 2 in linear equation standard form.
    a2 = v2y2 - v2y1;
    b2 = v2x1 - v2x2;
    c2 = (v2x2 * v2y1) - (v2x1 * v2y2);

    // Calculate d1 and d2 again, this time using points of vector 1.
    d1 = (a2 * v1x1) + (b2 * v1y1) + c2;
    d2 = (a2 * v1x2) + (b2 * v1y2) + c2;

    // Again, if both have the same sign (and neither one is 0),
    // no intersection is possible.
    if (d1 &gt; 0 &amp;&amp; d2 &gt; 0) return NO;
    if (d1 &lt; 0 &amp;&amp; d2 &lt; 0) return NO;

    // If we get here, only two possibilities are left. Either the two
    // vectors intersect in exactly one point or they are collinear, which
    // means they intersect in any number of points from zero to infinite.
    if ((a1 * b2) - (a2 * b1) == 0.0f) return COLLINEAR;

    // If they are not collinear, they must intersect in exactly one point.
    return YES;
}
</code></pre>

<p>The input values are the <em>two endpoints</em> of vector 1 (<code>v1x1/v1y1</code> and <code>v1x2/v1y2</code>) and vector 2 (<code>v2x1/v2y1</code> and <code>v2x2/v2y2</code>). So you have 2 vectors, 4 points, 8 coordinates. <code>YES</code> and <code>NO</code> are clear. <code>YES</code> increases intersections, <code>NO</code> does nothing. </p>

<p>What about COLLINEAR? It means both vectors lie on the same infinite line, depending on position and length, they don't intersect at all or they intersect in an endless number of points. I'm not absolutely sure how to handle this case, I would not count it as intersection either way. Well, this case is rather rare in practice anyway because of floating point rounding errors; better code would probably not test for <code>== 0.0f</code> but instead for something like <code>&lt; epsilon</code>, where epsilon is a rather small number.</p>

<p>If you need to test a larger number of points, you can certainly speed up the whole thing a bit by keeping the linear equation standard forms of the polygon sides in memory, so you don't have to recalculate these every time. This will save you two floating point multiplications and three floating point subtractions on every test in exchange for storing three floating point values per polygon side in memory. It's a typical memory vs computation time trade off.</p>

<p>Last but not least: If you may use 3D hardware to solve the problem, there is an interesting alternative. Just let the GPU do all the work for you. Create a painting surface that is off screen. Fill it completely with the color black. Now let OpenGL or Direct3D paint your polygon (or even all of your polygons if you just want to test if the point is within any of them, but you don't care for which one) and fill the polygon(s) with a different color, e.g. white. To check if a point is within the polygon, get the color of this point from the drawing surface. This is just a O(1) memory fetch.</p>

<p>Of course this method is only usable if your drawing surface doesn't have to be huge. If it cannot fit into the GPU memory, this method is slower than doing it on the CPU. If it would have to be huge and your GPU supports modern shaders, you can still use the GPU by implementing the ray casting shown above as a GPU shader, which absolutely is possible. For a larger number of polygons or a large number of points to test, this will pay off, consider some GPUs will be able to test 64 to 256 points in parallel. Note however that transferring data from CPU to GPU and back is always expensive, so for just testing a couple of points against a couple of simple polygons, where either the points or the polygons are dynamic and will change frequently, a GPU approach will rarely pay off.</p>
",Mecki,Mecki,1224501555,1514509551,1514509551
http://stackoverflow.com/a/21860100/1391441,Accurate timing of functions in python,79475,Atilio Jobson,Prashant Kumar,1242849155,1481184565,1384096266,https://stackoverflow.com/questions/889900/accurate-timing-of-functions-in-python,"<p>This is neater</p>

<pre><code>from contextlib import contextmanager

import time
@contextmanager
def timeblock(label):
    start = time.clock()
    try:
        yield
    finally:
        end = time.clock()
        print ('{} : {}'.format(label, end - start))



with timeblock(""just a test""):
            print ""yippee""
</code></pre>
",JasonEdinburgh,JasonEdinburgh,1392741921,1392753637,1392753637
http://stackoverflow.com/a/2186565/339505,How to use glob() to find files recursively?,529735,Ben Gartner,fish2000,1265134790,1561151313,1553042138,https://stackoverflow.com/questions/2186525/how-to-use-glob-to-find-files-recursively,"<p><strong>Python 3.5+</strong></p>

<p>Since you're on a new python, you should use <a href=""https://docs.python.org/3/library/pathlib.html#pathlib.Path.glob"" rel=""noreferrer""><code>pathlib.Path.glob</code></a> from the the <a href=""https://docs.python.org/3/library/pathlib.html"" rel=""noreferrer""><code>pathlib</code></a> module.</p>

<pre><code>from pathlib import Path

for filename in Path('src').glob('**/*.c'):
    print(filename)
</code></pre>

<p>If you don't want to use pathlib, just use <a href=""https://docs.python.org/3/library/glob.html#glob.glob"" rel=""noreferrer""><code>glob.glob</code></a>, but don't forget to pass in the <code>recursive</code> keyword parameter.</p>

<p>For cases where matching files beginning with a dot (.); like files in the current directory or hidden files on Unix based system, use the <a href=""https://docs.python.org/2/library/os.html#os.walk"" rel=""noreferrer""><code>os.walk</code></a> solution below.</p>

<p><strong>Older Python versions</strong></p>

<p>For older Python versions, use <a href=""https://docs.python.org/2/library/os.html#os.walk"" rel=""noreferrer""><code>os.walk</code></a> to recursively walk a directory and <a href=""https://docs.python.org/2/library/fnmatch.html#fnmatch.filter"" rel=""noreferrer""><code>fnmatch.filter</code></a> to match against a simple expression:</p>

<pre><code>import fnmatch
import os

matches = []
for root, dirnames, filenames in os.walk('src'):
    for filename in fnmatch.filter(filenames, '*.c'):
        matches.append(os.path.join(root, filename))
</code></pre>
",Johan Dahlin,Johan Dahlin,1265135214,1557771987,1557771987
http://stackoverflow.com/a/21886594/3132935,Fragments remain after Activity get&#39;s killed and recreated,12986,Towlie288,Towlie288,1368714712,1398892234,1368715013,https://stackoverflow.com/questions/16590255/fragments-remain-after-activity-gets-killed-and-recreated,"<p>This actually could be normal. Instead of instantiating and destroying a lot of Fragments, Android may be keeping them around. This especially happens with ViewPagers. </p>

<p>Are you using a lot of getActivity() calls or calls getting the context? If so, null check the getActivity() call by doing something as simple as</p>

<pre><code>Activity activity = getActivity();
if ( activity == null )
{
   Log.w(""activity null!"", ""This will cause a crash if you access this variable!"");
}
</code></pre>

<p>Another tip would be to watch out for AsyncTasks. If you have any of these running in the background, you would want to track if the Activity is alive or dead. I think there's lifecycle checks put into later versions of Android, but you can also keep a boolean flag on onAttach() and onDetach(). </p>
",Joe Plante,,1392827614,1392827614,0
http://stackoverflow.com/a/21912744/1773758,"In Python, how can you load YAML mappings as OrderedDicts?",44666,Eric Naeseth,dreftymac,1298663532,1549964208,1510184083,https://stackoverflow.com/questions/5121931/in-python-how-can-you-load-yaml-mappings-as-ordereddicts,"<p><strong>Update:</strong> In python 3.6+ you probably don't need <code>OrderedDict</code> at all due to the <a href=""https://docs.python.org/3.6/whatsnew/3.6.html#new-dict-implementation"" rel=""noreferrer"">new dict implementation</a> that has been in use in pypy for some time (although considered CPython implementation detail for now).</p>

<p><strong>Update:</strong> In python 3.7+, <em>the insertion-order preservation nature of dict objects has been declared to be an official part of the Python language spec</em>, see <a href=""https://docs.python.org/3/whatsnew/3.7.html"" rel=""noreferrer"">What's New In Python 3.7</a>.</p>

<p>I like @James' <a href=""https://stackoverflow.com/a/21048064/650222"">solution</a> for its simplicity. However, it changes the default global <code>yaml.Loader</code> class, which can lead to troublesome side effects. Especially, when writing library code this is a bad idea. Also, it doesn't directly work with <code>yaml.safe_load()</code>.</p>

<p>Fortunately, the solution can be improved without much effort:</p>

<pre><code>import yaml
from collections import OrderedDict

def ordered_load(stream, Loader=yaml.Loader, object_pairs_hook=OrderedDict):
    class OrderedLoader(Loader):
        pass
    def construct_mapping(loader, node):
        loader.flatten_mapping(node)
        return object_pairs_hook(loader.construct_pairs(node))
    OrderedLoader.add_constructor(
        yaml.resolver.BaseResolver.DEFAULT_MAPPING_TAG,
        construct_mapping)
    return yaml.load(stream, OrderedLoader)

# usage example:
ordered_load(stream, yaml.SafeLoader)
</code></pre>

<p>For serialization, I don't know an obvious generalization, but at least this shouldn't have any side effects:</p>

<pre><code>def ordered_dump(data, stream=None, Dumper=yaml.Dumper, **kwds):
    class OrderedDumper(Dumper):
        pass
    def _dict_representer(dumper, data):
        return dumper.represent_mapping(
            yaml.resolver.BaseResolver.DEFAULT_MAPPING_TAG,
            data.items())
    OrderedDumper.add_representer(OrderedDict, _dict_representer)
    return yaml.dump(data, stream, OrderedDumper, **kwds)

# usage:
ordered_dump(data, Dumper=yaml.SafeDumper)
</code></pre>
",coldfix,coldfix,1392911251,1538669380,1538669380
http://stackoverflow.com/a/21912744/3609487,"In Python, how can you load YAML mappings as OrderedDicts?",44666,Eric Naeseth,dreftymac,1298663532,1549964208,1510184083,https://stackoverflow.com/questions/5121931/in-python-how-can-you-load-yaml-mappings-as-ordereddicts,"<p><strong>Update:</strong> In python 3.6+ you probably don't need <code>OrderedDict</code> at all due to the <a href=""https://docs.python.org/3.6/whatsnew/3.6.html#new-dict-implementation"" rel=""noreferrer"">new dict implementation</a> that has been in use in pypy for some time (although considered CPython implementation detail for now).</p>

<p><strong>Update:</strong> In python 3.7+, <em>the insertion-order preservation nature of dict objects has been declared to be an official part of the Python language spec</em>, see <a href=""https://docs.python.org/3/whatsnew/3.7.html"" rel=""noreferrer"">What's New In Python 3.7</a>.</p>

<p>I like @James' <a href=""https://stackoverflow.com/a/21048064/650222"">solution</a> for its simplicity. However, it changes the default global <code>yaml.Loader</code> class, which can lead to troublesome side effects. Especially, when writing library code this is a bad idea. Also, it doesn't directly work with <code>yaml.safe_load()</code>.</p>

<p>Fortunately, the solution can be improved without much effort:</p>

<pre><code>import yaml
from collections import OrderedDict

def ordered_load(stream, Loader=yaml.Loader, object_pairs_hook=OrderedDict):
    class OrderedLoader(Loader):
        pass
    def construct_mapping(loader, node):
        loader.flatten_mapping(node)
        return object_pairs_hook(loader.construct_pairs(node))
    OrderedLoader.add_constructor(
        yaml.resolver.BaseResolver.DEFAULT_MAPPING_TAG,
        construct_mapping)
    return yaml.load(stream, OrderedLoader)

# usage example:
ordered_load(stream, yaml.SafeLoader)
</code></pre>

<p>For serialization, I don't know an obvious generalization, but at least this shouldn't have any side effects:</p>

<pre><code>def ordered_dump(data, stream=None, Dumper=yaml.Dumper, **kwds):
    class OrderedDumper(Dumper):
        pass
    def _dict_representer(dumper, data):
        return dumper.represent_mapping(
            yaml.resolver.BaseResolver.DEFAULT_MAPPING_TAG,
            data.items())
    OrderedDumper.add_representer(OrderedDict, _dict_representer)
    return yaml.dump(data, stream, OrderedDumper, **kwds)

# usage:
ordered_dump(data, Dumper=yaml.SafeDumper)
</code></pre>
",coldfix,coldfix,1392911251,1538669380,1538669380
http://stackoverflow.com/a/21912744/545637,"In Python, how can you load YAML mappings as OrderedDicts?",44666,Eric Naeseth,dreftymac,1298663532,1549964208,1510184083,https://stackoverflow.com/questions/5121931/in-python-how-can-you-load-yaml-mappings-as-ordereddicts,"<p><strong>Update:</strong> In python 3.6+ you probably don't need <code>OrderedDict</code> at all due to the <a href=""https://docs.python.org/3.6/whatsnew/3.6.html#new-dict-implementation"" rel=""noreferrer"">new dict implementation</a> that has been in use in pypy for some time (although considered CPython implementation detail for now).</p>

<p><strong>Update:</strong> In python 3.7+, <em>the insertion-order preservation nature of dict objects has been declared to be an official part of the Python language spec</em>, see <a href=""https://docs.python.org/3/whatsnew/3.7.html"" rel=""noreferrer"">What's New In Python 3.7</a>.</p>

<p>I like @James' <a href=""https://stackoverflow.com/a/21048064/650222"">solution</a> for its simplicity. However, it changes the default global <code>yaml.Loader</code> class, which can lead to troublesome side effects. Especially, when writing library code this is a bad idea. Also, it doesn't directly work with <code>yaml.safe_load()</code>.</p>

<p>Fortunately, the solution can be improved without much effort:</p>

<pre><code>import yaml
from collections import OrderedDict

def ordered_load(stream, Loader=yaml.Loader, object_pairs_hook=OrderedDict):
    class OrderedLoader(Loader):
        pass
    def construct_mapping(loader, node):
        loader.flatten_mapping(node)
        return object_pairs_hook(loader.construct_pairs(node))
    OrderedLoader.add_constructor(
        yaml.resolver.BaseResolver.DEFAULT_MAPPING_TAG,
        construct_mapping)
    return yaml.load(stream, OrderedLoader)

# usage example:
ordered_load(stream, yaml.SafeLoader)
</code></pre>

<p>For serialization, I don't know an obvious generalization, but at least this shouldn't have any side effects:</p>

<pre><code>def ordered_dump(data, stream=None, Dumper=yaml.Dumper, **kwds):
    class OrderedDumper(Dumper):
        pass
    def _dict_representer(dumper, data):
        return dumper.represent_mapping(
            yaml.resolver.BaseResolver.DEFAULT_MAPPING_TAG,
            data.items())
    OrderedDumper.add_representer(OrderedDict, _dict_representer)
    return yaml.dump(data, stream, OrderedDumper, **kwds)

# usage:
ordered_dump(data, Dumper=yaml.SafeDumper)
</code></pre>
",coldfix,coldfix,1392911251,1538669380,1538669380
http://stackoverflow.com/a/21974043/1262901,How do I get the file extension of a file in Java?,590494,longda,longda,1282781978,1558696166,1369071072,https://stackoverflow.com/questions/3571223/how-do-i-get-the-file-extension-of-a-file-in-java,"<pre><code>private String getFileExtension(File file) {
    String name = file.getName();
    int lastIndexOf = name.lastIndexOf(""."");
    if (lastIndexOf == -1) {
        return """"; // empty extension
    }
    return name.substring(lastIndexOf);
}
</code></pre>
",spectre,Radiodef,1393187116,1533855929,1533855929
http://stackoverflow.com/a/2200886/1608408,jQuery - Trigger event when an element is removed from the DOM,132779,sa125,,1265294764,1530437796,0,https://stackoverflow.com/questions/2200494/jquery-trigger-event-when-an-element-is-removed-from-the-dom,"<p>There is no built-in event for removing elements, but you can create one by fake-extending jQuery's default remove method. Note that the callback must be called before actually removing it to keep reference.</p>

<pre><code>(function() {
    var ev = new $.Event('remove'),
        orig = $.fn.remove;
    $.fn.remove = function() {
        $(this).trigger(ev);
        return orig.apply(this, arguments);
    }
})();

$('#some-element').bind('remove', function() {
    console.log('removed!');
    // do pre-mortem stuff here
    // 'this' is still a reference to the element, before removing it
});

// some other js code here [...]

$('#some-element').remove();
</code></pre>

<hr>

<p>Note: some problems with this answer have been outlined by other posters.</p>

<ol>
<li>This won't work when the node is removed via <code>html()</code> <code>replace()</code> or other jQuery methods</li>
<li>This event bubbles up</li>
<li>jQuery UI overrides remove as well</li>
</ol>

<p>The most elegant solution to this problem seems to be: <a href=""https://stackoverflow.com/a/10172676/216941"">https://stackoverflow.com/a/10172676/216941</a> </p>
",David Hellsing,Community,1265297539,1337783485,1495540042
http://stackoverflow.com/a/2202489/1325798,"PHP explode the string, but treat words in quotes as a single word",23855,timofey,Drew Hammond,1265310523,1488459739,1420272643,https://stackoverflow.com/questions/2202435/php-explode-the-string-but-treat-words-in-quotes-as-a-single-word,"<p>You could use a <code>preg_match_all(...)</code>:</p>

<pre><code>$text = 'Lorem ipsum ""dolor sit amet"" consectetur ""adipiscing \\""elit"" dolor';
preg_match_all('/""(?:\\\\.|[^\\\\""])*""|\S+/', $text, $matches);
print_r($matches);
</code></pre>

<p>which will produce:</p>

<pre><code>Array
(
    [0] =&gt; Array
        (
            [0] =&gt; Lorem
            [1] =&gt; ipsum
            [2] =&gt; ""dolor sit amet""
            [3] =&gt; consectetur
            [4] =&gt; ""adipiscing \""elit""
            [5] =&gt; dolor
        )

)
</code></pre>

<p>And as you can see, it also accounts for escaped quotes inside quoted strings.</p>

<p><strong>EDIT</strong></p>

<p>A short explanation:</p>

<pre><code>""           # match the character '""'
(?:         # start non-capture group 1 
  \\        #   match the character '\'
  .         #   match any character except line breaks
  |         #   OR
  [^\\""]    #   match any character except '\' and '""'
)*          # end non-capture group 1 and repeat it zero or more times
""           # match the character '""'
|           # OR
\S+         # match a non-whitespace character: [^\s] and repeat it one or more times
</code></pre>

<p>And in case of matching <code>%22</code> instead of double quotes, you'd do:</p>

<pre><code>preg_match_all('/%22(?:\\\\.|(?!%22).)*%22|\S+/', $text, $matches);
</code></pre>
",Bart Kiers,Bart Kiers,1265311091,1265312953,1265312953
http://stackoverflow.com/a/22058263/1717320,Commit without setting user.email and user.name,17777,Paul Draper,Paul Draper,1393469362,1557929197,1399996674,https://stackoverflow.com/questions/22058041/commit-without-setting-user-email-and-user-name,"<p>(This occurred to me after suggesting the long version with the environment variablesgit commit wants to set both an author and a committer, and <code>--author</code> only overrides the former.)</p>

<p>All git commands take <code>-c</code> arguments <strong>before</strong> the action verb to set temporary configuration data, so that's the perfect place for this:</p>

<pre><code>git -c user.name='Paul Draper' -c user.email='my@email.org' commit -m '...'
</code></pre>

<p>So in this case <code>-c</code> is part of the <code>git</code> command, not the <code>commit</code> subcommand.</p>
",torek,Mathias Brodala,1393470632,1557929197,1557929197
http://stackoverflow.com/a/2206545/207604,"How to split a string, but also keep the delimiters?",108571,Daniel Rikowski,,1265364057,1559489554,0,https://stackoverflow.com/questions/2206378/how-to-split-a-string-but-also-keep-the-delimiters,"<p>A very naive solution, that doesn't involve regex would be to perform a string replace on your delimiter along the lines of (assuming comma for delimiter):</p>

<pre><code>string.replace(FullString, "","" , ""~,~"")
</code></pre>

<p>Where you can replace tilda (~) with an appropriate unique delimiter.</p>

<p>Then if you do a split on your new delimiter then i believe you will get the desired result.  </p>
",chillysapien,,1265366202,1265366202,0
http://stackoverflow.com/a/22101290/115145,Android VideoView orientation change with buffered video,54456,Mark G.,Mark G.,1292278587,1543254953,1543254953,https://stackoverflow.com/questions/4434027/android-videoview-orientation-change-with-buffered-video,"<p>VideoView uses what's called an overlay which is an area where the video is rendered. That overlay is behind the window holding the VideoView. VideoView punches a hole in its window so that the overlay is visible. It then keeps it in sync with the layout (eg. if you move or resize VideoView, the overlay has to be moved and resized as well).</p>

<p>There's a bug somewhere during the layout phase which makes the overlay use the previous size set by VideoView.</p>

<p>To fix it, subclass VideoView and override onLayout:</p>

<pre><code>@Override
protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
    super.onLayout(changed, left, top, right, bottom);
    getHolder().setSizeFromLayout();
}
</code></pre>

<p>and the overlay will have the correct size from VideoView's layout dimensions.</p>
",Zapek,,1393606757,1393606757,0
http://stackoverflow.com/a/2212940/2150331,Overload handling of std::endl?,12032,anon,OmarOthman,1265451447,1524705577,1331807420,https://stackoverflow.com/questions/2212776/overload-handling-of-stdendl,"<p>What you need to do is write your own stream buffer:<br>
When the stream buffer is flushed you output you prefix characters and the content of the stream.</p>

<p>The following works because std::endl causes the following.</p>

<p>1) Add '\n' to the stream.<br>
2) Calls flush() on the stream<br>
2a) This calls pubsync() on the stream buffer.<br>
2b) This calls the virtual method sync()<br>
2c) Override this virtual method to do the work you want.</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;sstream&gt;

class MyStream: public std::ostream
{
    // Write a stream buffer that prefixes each line with Plop
    class MyStreamBuf: public std::stringbuf
    {
        std::ostream&amp;   output;
        public:
            MyStreamBuf(std::ostream&amp; str)
                :output(str)
            {}
            ~MyStreamBuf() {
                if (pbase() != pptr()) {
                    putOutput();
                }
            }

        // When we sync the stream with the output. 
        // 1) Output Plop then the buffer
        // 2) Reset the buffer
        // 3) flush the actual output stream we are using.
        virtual int sync() {
            putOutput();
            return 0;
        }
        void putOutput() {
            // Called by destructor.
            // destructor can not call virtual methods.
            output &lt;&lt; ""[blah]"" &lt;&lt; str();
            str("""");
            output.flush();
        }
    };

    // My Stream just uses a version of my special buffer
    MyStreamBuf buffer;
    public:
        MyStream(std::ostream&amp; str)
            :std::ostream(&amp;buffer)
            ,buffer(str)
        {
        }
};


int main()
{
    MyStream myStream(std::cout);
    myStream &lt;&lt; 1 &lt;&lt; 2 &lt;&lt; 3 &lt;&lt; std::endl &lt;&lt; 5 &lt;&lt; 6 &lt;&lt; std::endl &lt;&lt; 7 &lt;&lt; 8 &lt;&lt; std::endl;
}

&gt; ./a.out
[blah]123 
[blah]56 
[blah]78
&gt;
</code></pre>
",Martin York,Martin York,1265456294,1524705577,1524705577
http://stackoverflow.com/a/22129960/1066283,Accessing nested JavaScript objects with string key,163170,Komaruloh,Paul Roub,1309170302,1559313567,1502816262,https://stackoverflow.com/questions/6491463/accessing-nested-javascript-objects-with-string-key,"<p>This is the solution I use:</p>

<pre><code>function resolve(path, obj=self, separator='.') {
    var properties = Array.isArray(path) ? path : path.split(separator)
    return properties.reduce((prev, curr) =&gt; prev &amp;&amp; prev[curr], obj)
}
</code></pre>

<p>Example usage:</p>

<pre><code>// accessing property path on global scope
resolve(""document.body.style.width"")
// or
resolve(""style.width"", document.body)

// accessing array indexes
// (someObject has been defined in the question)
resolve(""part3.0.size"", someObject) // returns '10'

// accessing non-existent properties
// returns undefined when intermediate properties are not defined:
resolve('properties.that.do.not.exist', {hello:'world'})

// accessing properties with unusual keys by changing the separator
var obj = { object: { 'a.property.name.with.periods': 42 } }
resolve('object-&gt;a.property.name.with.periods', obj, '-&gt;') // returns 42

// accessing properties with unusual keys by passing a property name array
resolve(['object', 'a.property.name.with.periods'], obj) // returns 42
</code></pre>

<p>Limitations:</p>

<ul>
<li>Can't use brackets (<code>[]</code>) for array indicesthough specifying array indices between the separator token (e.g., <code>.</code>) works fine as shown above. </li>
</ul>
",speigg,speigg,1393776371,1534294742,1534294742
http://stackoverflow.com/a/22152353/1958200,How do you integrate Universal Analytics in to Chrome Extensions?,4936,StefanHayden,,1366570563,1559647612,0,https://stackoverflow.com/questions/16135000/how-do-you-integrate-universal-analytics-in-to-chrome-extensions,"<p>There's an <a href=""https://code.google.com/p/analytics-issues/issues/detail?id=312"" rel=""noreferrer"">issue</a> for that on Google code: The solution is to pass analytics your <em>own protocol check function</em> or simply <code>null</code> for no checking, in an <a href=""https://developers.google.com/analytics/devguides/collection/analyticsjs/tasks#disabling"" rel=""noreferrer"">official way</a>.</p>

<p>This has to come <em>after</em> <code>ga('create', ...)</code> <strong>:</strong></p>

<pre><code>ga('set', 'checkProtocolTask', null); // Disable file protocol checking.
</code></pre>

<p>So you don't need to modify the original analytics.js script. Just include the standard tracking code snippet (dont' forget to add the ""https:"" prefix) and add ""<a href=""https://www.google-analytics.com"" rel=""noreferrer"">https://www.google-analytics.com</a>"" to your Content Security Policy.</p>

<p>A note to ayal gelles' solution:
It is not necessary to add <code>chrome-extension://...</code> to the Content Security Policy since it's already included in the <code>'self'</code> statement. Also, instead of loading the script via hardcoded URL you should use <code>chrome.runtime.getURL(""path/to/analytics.js"")</code>. This way you don't need to know your extension's ID, Chrome will fill it in for you.</p>
",Sven Ackermann,Sven Ackermann,1393865163,1458024812,1458024812
http://stackoverflow.com/a/22157136/268330,Python argparse: How to insert newline in the help text?,67782,kennytm,Anthon,1286181600,1562142716,1414961550,https://stackoverflow.com/questions/3853722/python-argparse-how-to-insert-newline-in-the-help-text,"<p>If you just want to override the one option, you should not use <code>RawTextHelpFormatter</code>. Instead subclass the <code>HelpFormatter</code> and provide a special intro for the options that should be handled ""raw"" (I use <code>""R|rest of help""</code>):</p>

<pre><code>import argparse

class SmartFormatter(argparse.HelpFormatter):

    def _split_lines(self, text, width):
        if text.startswith('R|'):
            return text[2:].splitlines()  
        # this is the RawTextHelpFormatter._split_lines
        return argparse.HelpFormatter._split_lines(self, text, width)
</code></pre>

<p>And use it:</p>

<pre><code>from argparse import ArgumentParser

parser = ArgumentParser(description='test', formatter_class=SmartFormatter)

parser.add_argument('-g', choices=['a', 'b', 'g', 'd', 'e'], default='a',
    help=""R|Some option, where\n""
         "" a = alpha\n""
         "" b = beta\n""
         "" g = gamma\n""
         "" d = delta\n""
         "" e = epsilon"")

parser.parse_args()
</code></pre>

<p>Any other calls to <code>.add_argument()</code> where the help does not start with <code>R|</code> will be wrapped as normal.</p>

<p>This is part of <a href=""https://bitbucket.org/ruamel/std.argparse"">my improvements on argparse</a>. The full SmartFormatter also supports adding
the defaults to all options, and raw input of the utilities description. The full version
has its own <code>_split_lines</code> method, so that any formatting done to e.g. version strings is preserved:</p>

<pre><code>parser.add_argument('--version', '-v', action=""version"",
                    version=""version...\n   42!"")
</code></pre>
",Anthon,Anthon,1393879796,1459026044,1459026044
http://stackoverflow.com/a/2216603/4353482,How to cnvert a Hibernate proxy to a real entity object,81443,Andrey Minogin,Vlad Mihalcea,1265535103,1560450942,1560450942,https://stackoverflow.com/questions/2216547/how-to-cnvert-a-hibernate-proxy-to-a-real-entity-object,"<p>Here's a method I'm using.    </p>

<pre><code>public static &lt;T&gt; T initializeAndUnproxy(T entity) {
    if (entity == null) {
        throw new 
           NullPointerException(""Entity passed for initialization is null"");
    }

    Hibernate.initialize(entity);
    if (entity instanceof HibernateProxy) {
        entity = (T) ((HibernateProxy) entity).getHibernateLazyInitializer()
                .getImplementation();
    }
    return entity;
}
</code></pre>
",Bozho,Bozho,1265536345,1265639284,1265639284
http://stackoverflow.com/a/2218874/124487,Discrepancy in JSON.stringify of date values in different browsers,8990,Tauren,,1265580291,1362515007,0,https://stackoverflow.com/questions/2218564/discrepancy-in-json-stringify-of-date-values-in-different-browsers,"<p>I got this working adding the following javascript:</p>

<pre><code>// Added to make dates format to ISO8601
Date.prototype.toJSON = function (key) {
    function f(n) {
        // Format integers to have at least two digits.
        return n &lt; 10 ? '0' + n : n;
    }

    return this.getUTCFullYear()   + '-' +
         f(this.getUTCMonth() + 1) + '-' +
         f(this.getUTCDate())      + 'T' +
         f(this.getUTCHours())     + ':' +
         f(this.getUTCMinutes())   + ':' +
         f(this.getUTCSeconds())   + '.' +
         f(this.getUTCMilliseconds())   + 'Z';
};
</code></pre>

<p>I'm sure this probably slows down the serialization, but it seems to make things consistent across browsers.</p>
",Tauren,,1265586804,1265586804,0
http://stackoverflow.com/a/22210077/2601552,Download file from url and upload it to AWS S3 without saving - node.js,14511,Loourr,,1393984536,1556304753,0,https://stackoverflow.com/questions/22186979/download-file-from-url-and-upload-it-to-aws-s3-without-saving-node-js,"<p>Here's some javascript that does this nicely:</p>

<pre><code>    var options = {
        uri: uri,
        encoding: null
    };
    request(options, function(error, response, body) {
        if (error || response.statusCode !== 200) { 
            console.log(""failed to get image"");
            console.log(error);
        } else {
            s3.putObject({
                Body: body,
                Key: path,
                Bucket: 'bucket_name'
            }, function(error, data) { 
                if (error) {
                    console.log(""error downloading image to s3"");
                } else {
                    console.log(""success uploading to s3"");
                }
            }); 
        }   
    });
</code></pre>
",Loourr,Loourr,1394056097,1502485982,1502485982
http://stackoverflow.com/a/22238613/596939,How to overcome &quot;datetime.datetime not JSON serializable&quot;?,390836,Rolando,martineau,1344477771,1554863701,1497876888,https://stackoverflow.com/questions/11875770/how-to-overcome-datetime-datetime-not-json-serializable,"<p>Building on other answers, a simple solution based on a specific serializer that just converts <code>datetime.datetime</code> and <code>datetime.date</code> objects to strings.</p>

<pre><code>from datetime import date, datetime

def json_serial(obj):
    """"""JSON serializer for objects not serializable by default json code""""""

    if isinstance(obj, (datetime, date)):
        return obj.isoformat()
    raise TypeError (""Type %s not serializable"" % type(obj))
</code></pre>

<p>As seen, the code just checks to find out if object is of class <code>datetime.datetime</code> or <code>datetime.date</code>, and then uses <code>.isoformat()</code> to produce a serialized version of it, according to ISO 8601 format, YYYY-MM-DDTHH:MM:SS (which is easily decoded by JavaScript). If more complex serialized representations are sought, other code could be used instead of str() (see other answers to this question for examples). The code ends by raising an exception, to deal with the case it is called with a non-serializable type.</p>

<p>This json_serial function can be used as follows:</p>

<pre><code>from datetime import datetime
from json import dumps

print dumps(datetime.now(), default=json_serial)
</code></pre>

<p>The details about how the default parameter to json.dumps works can be found in <a href=""http://docs.python.org/2/library/json.html#basic-usage"" rel=""noreferrer"">Section Basic Usage of the json module documentation</a>. </p>
",jgbarah,Jay Taylor,1394149577,1520556563,1520556563
http://stackoverflow.com/a/22253656/876937,Can I change the connection pool size for Python&#39;s &quot;requests&quot; module?,17217,Skip Huffman,ks1322,1377608144,1500470966,1492622597,https://stackoverflow.com/questions/18466079/can-i-change-the-connection-pool-size-for-pythons-requests-module,"<p><strong>Note:</strong> Use this solution only if you cannot control the construction of the connection pool (as described in @Jahaja's answer).</p>

<p>The problem is that the <code>urllib3</code> creates the pools on demand. It calls the constructor of the <code>urllib3.connectionpool.HTTPConnectionPool</code> class without parameters. The classes are registered in <code>urllib3 .poolmanager.pool_classes_by_scheme</code>. The trick is to replace the classes with your classes that have different default parameters:</p>

<pre><code>def patch_http_connection_pool(**constructor_kwargs):
    """"""
    This allows to override the default parameters of the 
    HTTPConnectionPool constructor.
    For example, to increase the poolsize to fix problems 
    with ""HttpConnectionPool is full, discarding connection""
    call this function with maxsize=16 (or whatever size 
    you want to give to the connection pool)
    """"""
    from urllib3 import connectionpool, poolmanager

    class MyHTTPConnectionPool(connectionpool.HTTPConnectionPool):
        def __init__(self, *args,**kwargs):
            kwargs.update(constructor_kwargs)
            super(MyHTTPConnectionPool, self).__init__(*args,**kwargs)
    poolmanager.pool_classes_by_scheme['http'] = MyHTTPConnectionPool
</code></pre>

<p>Then you can call to set new default parameters. Make sure this is called before any connection is made.</p>

<pre><code>patch_http_connection_pool(maxsize=16)
</code></pre>

<p>If you use https connections you can create a similar function:</p>

<pre><code>def patch_https_connection_pool(**constructor_kwargs):
    """"""
    This allows to override the default parameters of the
    HTTPConnectionPool constructor.
    For example, to increase the poolsize to fix problems
    with ""HttpSConnectionPool is full, discarding connection""
    call this function with maxsize=16 (or whatever size
    you want to give to the connection pool)
    """"""
    from urllib3 import connectionpool, poolmanager

    class MyHTTPSConnectionPool(connectionpool.HTTPSConnectionPool):
        def __init__(self, *args,**kwargs):
            kwargs.update(constructor_kwargs)
            super(MyHTTPSConnectionPool, self).__init__(*args,**kwargs)
    poolmanager.pool_classes_by_scheme['https'] = MyHTTPSConnectionPool
</code></pre>
",Michael_Scharf,Michael_Scharf,1394204781,1399897717,1399897717
http://stackoverflow.com/a/22318681/535646,PDFBox - Issue with generating PDF from a image,6098,user1879808,,1354727350,1447559129,0,https://stackoverflow.com/questions/13728606/pdfbox-issue-with-generating-pdf-from-a-image,"<p>These code may helpful to you,It works.</p>

<pre><code>    public void createPDFFromImage(String pdfFile, 
        List&lt;String&gt; imgList,int x, int y, float scale) throws IOException, COSVisitorException {
    // the document
    PDDocument doc = null;
    try {
        doc = new PDDocument();
        Iterator iter = imgList.iterator();
        int imgIndex=0;
        while(iter.hasNext()) {
            PDPage page = new PDPage();
            doc.addPage(page);

            BufferedImage tmp_image = ImageIO.read(new File(iter.next().toString()));
            BufferedImage image = new BufferedImage(tmp_image.getWidth(), tmp_image.getHeight(), BufferedImage.TYPE_4BYTE_ABGR);        
            image.createGraphics().drawRenderedImage(tmp_image, null);

            PDXObjectImage ximage = new PDPixelMap(doc, image);

            imgIndex++;


            PDPageContentStream contentStream = new PDPageContentStream(
                    doc, page,true,true);

            contentStream.drawXObject(ximage, x, y, ximage.getWidth()*scale, ximage.getHeight()*scale);

            contentStream.close();
        }
        doc.save(pdfFile);
    } finally {
        if (doc != null) {
            doc.close();
        }
    }
}
</code></pre>
",Michael,,1394521621,1394521621,0
http://stackoverflow.com/a/22331852/1170370,How do I copy an entire directory of files into an existing directory using Python?,181750,Daryl Spitzer,SilentGhost,1260294964,1544088268,1260295573,https://stackoverflow.com/questions/1868714/how-do-i-copy-an-entire-directory-of-files-into-an-existing-directory-using-pyth,"<p>A merge one inspired by atzz and Mital Vora:</p>

<pre><code>#!/usr/bin/python
import os
import shutil
import stat
def copytree(src, dst, symlinks = False, ignore = None):
  if not os.path.exists(dst):
    os.makedirs(dst)
    shutil.copystat(src, dst)
  lst = os.listdir(src)
  if ignore:
    excl = ignore(src, lst)
    lst = [x for x in lst if x not in excl]
  for item in lst:
    s = os.path.join(src, item)
    d = os.path.join(dst, item)
    if symlinks and os.path.islink(s):
      if os.path.lexists(d):
        os.remove(d)
      os.symlink(os.readlink(s), d)
      try:
        st = os.lstat(s)
        mode = stat.S_IMODE(st.st_mode)
        os.lchmod(d, mode)
      except:
        pass # lchmod not available
    elif os.path.isdir(s):
      copytree(s, d, symlinks, ignore)
    else:
      shutil.copy2(s, d)
</code></pre>

<ul>
<li>Same behavior as <em>shutil.copytree</em>, with <strong>symlinks</strong> and <strong>ignore</strong> parameters</li>
<li>Create directory destination structure if non existant</li>
<li>Will not fail if <strong>dst</strong> already exists</li>
</ul>
",Cyrille Pontvieux,,1394558056,1394558056,0
http://stackoverflow.com/a/22336061/411514,How to pluralize a name in a template with jinja2?,6100,craftApprentice,,1343613682,1423671811,0,https://stackoverflow.com/questions/11714614/how-to-pluralize-a-name-in-a-template-with-jinja2,"<p>Guy Adini's reply is definitely the way to go, though I think (or maybe I misused it) it is not exactly the same as <em>pluralize</em> filter in Django.</p>

<p>Hence this was my implementation (using decorator to register)</p>

<pre><code>@app.template_filter('pluralize')
def pluralize(number, singular = '', plural = 's'):
    if number == 1:
        return singular
    else:
        return plural
</code></pre>

<p>This way, it is used exactly the same way (well, with parameters being passed in a slightly different way):</p>

<pre><code>countr{{ num_countries|pluralize:(""y"",""ies"") }}
</code></pre>
",Filipe Pina,,1394570110,1394570110,0
http://stackoverflow.com/a/22349223/4228275,C++: Rounding up to the nearest multiple of a number,107785,Robben_Ford_Fan_boy,Josh Lee,1280935163,1561403247,1561403247,https://stackoverflow.com/questions/3407012/c-rounding-up-to-the-nearest-multiple-of-a-number,"<p>This is the modern c++ approach using a template function which is working for float, double, long, int and short (but not for long long, and long double because of the used double values).</p>

<pre><code>#include &lt;cmath&gt;
#include &lt;iostream&gt;

template&lt;typename T&gt;
T roundMultiple( T value, T multiple )
{
    if (multiple == 0) return value;
    return static_cast&lt;T&gt;(std::round(static_cast&lt;double&gt;(value)/static_cast&lt;double&gt;(multiple))*static_cast&lt;double&gt;(multiple));
}

int main()
{
    std::cout &lt;&lt; roundMultiple(39298.0, 100.0) &lt;&lt; std::endl;
    std::cout &lt;&lt; roundMultiple(20930.0f, 1000.0f) &lt;&lt; std::endl;
    std::cout &lt;&lt; roundMultiple(287399, 10) &lt;&lt; std::endl;
}
</code></pre>

<p>But you can easily add support for <code>long long</code> and <code>long double</code> with template specialisation as shown below:</p>

<pre><code>template&lt;&gt;
long double roundMultiple&lt;long double&gt;( long double value, long double multiple)
{
    if (multiple == 0.0l) return value;
    return std::round(value/multiple)*multiple;
}

template&lt;&gt;
long long roundMultiple&lt;long long&gt;( long long value, long long multiple)
{
    if (multiple == 0.0l) return value;
    return static_cast&lt;long long&gt;(std::round(static_cast&lt;long double&gt;(value)/static_cast&lt;long double&gt;(multiple))*static_cast&lt;long double&gt;(multiple));
}
</code></pre>

<p>To create functions to round up, use <code>std::ceil</code> and to always round down use <code>std::floor</code>. My  example from above is rounding using <code>std::round</code>.</p>

<p>Create the ""round up"" or better known as ""round ceiling"" template function as shown below:</p>

<pre><code>template&lt;typename T&gt;
T roundCeilMultiple( T value, T multiple )
{
    if (multiple == 0) return value;
    return static_cast&lt;T&gt;(std::ceil(static_cast&lt;double&gt;(value)/static_cast&lt;double&gt;(multiple))*static_cast&lt;double&gt;(multiple));
}
</code></pre>

<p>Create the ""round down"" or better known as ""round floor"" template function as shown below:</p>

<pre><code>template&lt;typename T&gt;
T roundFloorMultiple( T value, T multiple )
{
    if (multiple == 0) return value;
    return static_cast&lt;T&gt;(std::floor(static_cast&lt;double&gt;(value)/static_cast&lt;double&gt;(multiple))*static_cast&lt;double&gt;(multiple));
}
</code></pre>
",Flovdis,Flovdis,1394621585,1394748271,1394748271
http://stackoverflow.com/a/22357811/1990165,Pythonic way of detecting outliers in one dimensional observation data,62192,user3410943,,1394633271,1541450252,0,https://stackoverflow.com/questions/22354094/pythonic-way-of-detecting-outliers-in-one-dimensional-observation-data,"<p>The problem with using <code>percentile</code> is that the points identified as outliers is a function of your sample size.</p>

<p>There are a huge number of ways to test for outliers, and you should give some thought to how you classify them.  Ideally, you should use a-priori information (e.g. ""anything above/below this value is unrealistic because..."")</p>

<p>However, a common, not-too-unreasonable outlier test is to remove points based on their ""median absolute deviation"".</p>

<p>Here's an implementation for the N-dimensional case (from some code for a paper here: <a href=""https://github.com/joferkington/oost_paper_code/blob/master/utilities.py"" rel=""noreferrer"">https://github.com/joferkington/oost_paper_code/blob/master/utilities.py</a>):</p>

<pre><code>def is_outlier(points, thresh=3.5):
    """"""
    Returns a boolean array with True if points are outliers and False 
    otherwise.

    Parameters:
    -----------
        points : An numobservations by numdimensions array of observations
        thresh : The modified z-score to use as a threshold. Observations with
            a modified z-score (based on the median absolute deviation) greater
            than this value will be classified as outliers.

    Returns:
    --------
        mask : A numobservations-length boolean array.

    References:
    ----------
        Boris Iglewicz and David Hoaglin (1993), ""Volume 16: How to Detect and
        Handle Outliers"", The ASQC Basic References in Quality Control:
        Statistical Techniques, Edward F. Mykytka, Ph.D., Editor. 
    """"""
    if len(points.shape) == 1:
        points = points[:,None]
    median = np.median(points, axis=0)
    diff = np.sum((points - median)**2, axis=-1)
    diff = np.sqrt(diff)
    med_abs_deviation = np.median(diff)

    modified_z_score = 0.6745 * diff / med_abs_deviation

    return modified_z_score &gt; thresh
</code></pre>

<p>This is very similar to <a href=""https://stackoverflow.com/questions/11882393/matplotlib-disregard-outliers-when-plotting/11886564#11886564"">one of my previous answers</a>, but I wanted to illustrate the sample size effect in detail.</p>

<p>Let's compare a percentile-based outlier test (similar to @CTZhu's answer) with a median-absolute-deviation (MAD) test for a variety of different sample sizes:</p>

<pre><code>import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

def main():
    for num in [10, 50, 100, 1000]:
        # Generate some data
        x = np.random.normal(0, 0.5, num-3)

        # Add three outliers...
        x = np.r_[x, -3, -10, 12]
        plot(x)

    plt.show()

def mad_based_outlier(points, thresh=3.5):
    if len(points.shape) == 1:
        points = points[:,None]
    median = np.median(points, axis=0)
    diff = np.sum((points - median)**2, axis=-1)
    diff = np.sqrt(diff)
    med_abs_deviation = np.median(diff)

    modified_z_score = 0.6745 * diff / med_abs_deviation

    return modified_z_score &gt; thresh

def percentile_based_outlier(data, threshold=95):
    diff = (100 - threshold) / 2.0
    minval, maxval = np.percentile(data, [diff, 100 - diff])
    return (data &lt; minval) | (data &gt; maxval)

def plot(x):
    fig, axes = plt.subplots(nrows=2)
    for ax, func in zip(axes, [percentile_based_outlier, mad_based_outlier]):
        sns.distplot(x, ax=ax, rug=True, hist=False)
        outliers = x[func(x)]
        ax.plot(outliers, np.zeros_like(outliers), 'ro', clip_on=False)

    kwargs = dict(y=0.95, x=0.05, ha='left', va='top')
    axes[0].set_title('Percentile-based Outliers', **kwargs)
    axes[1].set_title('MAD-based Outliers', **kwargs)
    fig.suptitle('Comparing Outlier Tests with n={}'.format(len(x)), size=14)

main()
</code></pre>

<hr>

<p><img src=""https://i.stack.imgur.com/G972l.png"" alt=""enter image description here""></p>

<hr>

<p><img src=""https://i.stack.imgur.com/1mp5F.png"" alt=""enter image description here""></p>

<hr>

<p><img src=""https://i.stack.imgur.com/2rDhy.png"" alt=""enter image description here""></p>

<hr>

<p><img src=""https://i.stack.imgur.com/STZaZ.png"" alt=""enter image description here""></p>

<p>Notice that the MAD-based classifier works correctly regardless of sample-size, while the percentile based classifier classifies more points the larger the sample size is, regardless of whether or not they are actually outliers.</p>
",Joe Kington,Community,1394641568,1394641568,1495540510
http://stackoverflow.com/a/22376126/230468,Get Traceback of warnings,9900,embert,Community,1394702170,1485782797,1495535401,https://stackoverflow.com/questions/22373927/get-traceback-of-warnings,"<p>You can get what you want by assigning to <code>warnings.showwarning</code>. The <a href=""http://docs.python.org/2/library/warnings.html#warnings.showwarning"" rel=""noreferrer"">warnings module documentation</a> itself recommends that you do that, so it's not that you're being tempted by the <em>dark side of the source</em>. :)</p>

<blockquote>
  <p>You may replace this function with an alternative implementation by assigning to <code>warnings.showwarning</code>.</p>
</blockquote>

<p>You can define a new function that does what <code>warning.showwarning</code> normaly does and additionally it prints the stack. Then you place it instead of the original:</p>

<pre><code>import traceback
import warnings
import sys

def warn_with_traceback(message, category, filename, lineno, file=None, line=None):

    log = file if hasattr(file,'write') else sys.stderr
    traceback.print_stack(file=log)
    log.write(warnings.formatwarning(message, category, filename, lineno, line))

warnings.showwarning = warn_with_traceback
</code></pre>

<p>After this, every warning will print the stack trace as well as the warning message. Take into account, however, that if the warning is ignored because it is not the first one, nothing will happen, so you still need to execute:</p>

<pre><code>warnings.simplefilter(""always"")
</code></pre>

<hr>

<p>You can get a similar control that the one <code>numpy.seterr</code> gives through the <code>warning</code> module's filters</p>

<p>If what you want is python to report every a warning every time it is triggered and not only the first time, you can include something like:</p>

<pre><code>import warnings
warnings.simplefilter(""always"")
</code></pre>

<p>You can get other behaviours by passing different strings as arguments. Using the same function you can also specify different behaviours for warnings depending on the module that raised them, the message they provide, the warning class, the line of code that is causing it and so on...</p>

<p>You can check the list in the <a href=""http://docs.python.org/2/library/warnings.html#the-warnings-filter"" rel=""noreferrer"">module documentation</a></p>

<p>As an example, you can set all the warnings to raise exceptions, except the <code>DeprecationWarnings</code> that should be ignored completely:</p>

<pre><code>import warnings
warnings.simplefilter(""error"")
warnings.simplefilter(""ignore"", DeprecationWarning)
</code></pre>

<p>This way you get the full traceback for each warning raised as error (only the first one, since execution will stop... but you can address them one by one, and create a filter to ignore the ones you don't want to hear about again...</p>
",mgab,Zero,1394707523,1485782797,1485782797
http://stackoverflow.com/a/22384826/873282,java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/dbname,247829,user3416261,Eric Leschinski,1394727551,1534447120,1406309827,https://stackoverflow.com/questions/22384710/java-sql-sqlexception-no-suitable-driver-found-for-jdbcmysql-localhost3306,"<p>You have to load <code>jdbc driver</code>. Consider below Code.</p>

<pre><code>try {
           Class.forName(""com.mysql.jdbc.Driver"");

            // connect way #1
            String url1 = ""jdbc:mysql://localhost:3306/aavikme"";
            String user = ""root"";
            String password = ""aa"";

            conn1 = DriverManager.getConnection(url1, user, password);
            if (conn1 != null) {
                System.out.println(""Connected to the database test1"");
            }

            // connect way #2
            String url2 = ""jdbc:mysql://localhost:3306/aavikme?user=root&amp;password=aa"";
            conn2 = DriverManager.getConnection(url2);
            if (conn2 != null) {
                System.out.println(""Connected to the database test2"");
            }

            // connect way #3
            String url3 = ""jdbc:mysql://localhost:3306/aavikme"";
            Properties info = new Properties();
            info.put(""user"", ""root"");
            info.put(""password"", ""aa"");

            conn3 = DriverManager.getConnection(url3, info);
            if (conn3 != null) {
                System.out.println(""Connected to the database test3"");
            }
   } catch (SQLException ex) {
            System.out.println(""An error occurred. Maybe user/password is invalid"");
            ex.printStackTrace();
   } catch (ClassNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
   }
</code></pre>
",unknown,unknown,1394727840,1394731987,1394731987
http://stackoverflow.com/a/22402631/152543,Mockito + Dexmaker on Android,15579,stevo.mit,JJD,1346775552,1485356036,1442514728,https://stackoverflow.com/questions/12267572/mockito-dexmaker-on-android,"<p>From @rjath's comment of @MrChaz's answer, this works better for me:</p>

<pre><code>System.setProperty(
    ""dexmaker.dexcache"",
    getInstrumentation().getTargetContext().getCacheDir().getPath());
</code></pre>

<p>I put it in my <code>setUp()</code> method.</p>
",Adil Hussain,Adil Hussain,1394793420,1396355305,1396355305
http://stackoverflow.com/a/2240367/1031689,What is the most memory-efficient way to emit XML from a JAXP SAX ContentHandler?,5144,Steven Huwig,Community,1262128329,1265836194,1495542197,https://stackoverflow.com/questions/1977504/what-is-the-most-memory-efficient-way-to-emit-xml-from-a-jaxp-sax-contenthandler,"<p>I recently had a similar problem.  Here is the class I wrote to get you thingIWant:</p>

<pre><code>import java.io.OutputStream;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.TransformerException;
import javax.xml.transform.sax.SAXSource;
import javax.xml.transform.stream.StreamResult;
import org.xml.sax.*;

public class XMLSerializer implements ContentHandler {
    static final private TransformerFactory tf = TransformerFactory.newInstance();
    private ContentHandler ch;

    public XMLSerializer(OutputStream os) throws SAXException {
        try {
            final Transformer t = tf.newTransformer();

            t.transform(new SAXSource(                
                new XMLReader() {     
                    public ContentHandler getContentHandler() { return ch; }
                    public DTDHandler getDTDHandler() { return null; }      
                    public EntityResolver getEntityResolver() { return null; }
                    public ErrorHandler getErrorHandler() { return null; }    
                    public boolean getFeature(String name) { return false; }
                    public Object getProperty(String name) { return null; } 
                    public void parse(InputSource input) { }               
                    public void parse(String systemId) { }  
                    public void setContentHandler(ContentHandler handler) { ch = handler; }                
                    public void setDTDHandler(DTDHandler handler) { }
                    public void setEntityResolver(EntityResolver resolver) { }
                    public void setErrorHandler(ErrorHandler handler) { }
                    public void setFeature(String name, boolean value) { }
                    public void setProperty(String name, Object value) { }
                }, new InputSource()),                                    
                new StreamResult(os));
        }
        catch (TransformerException e) {
            throw new SAXException(e);  
        }

        if (ch == null)
            throw new SAXException(""Transformer didn't set ContentHandler"");
    }

    public void setDocumentLocator(Locator locator) {
        ch.setDocumentLocator(locator);
    }

    public void startDocument() throws SAXException {
        ch.startDocument();
    }

    public void endDocument() throws SAXException {
        ch.endDocument();
    }

    public void startPrefixMapping(String prefix, String uri) throws SAXException {
        ch.startPrefixMapping(prefix, uri);
    }

    public void endPrefixMapping(String prefix) throws SAXException {
        ch.endPrefixMapping(prefix);
    }

    public void startElement(String uri, String localName, String qName, Attributes atts)
        throws SAXException {
        ch.startElement(uri, localName, qName, atts);
    }

    public void endElement(String uri, String localName, String qName)
        throws SAXException {
        ch.endElement(uri, localName, qName);
    }

    public void characters(char[] ch, int start, int length)
        throws SAXException {
        this.ch.characters(ch, start, length);
    }

    public void ignorableWhitespace(char[] ch, int start, int length)
        throws SAXException {
        this.ch.ignorableWhitespace(ch, start, length);
    }

    public void processingInstruction(String target, String data)
        throws SAXException {
        ch.processingInstruction(target, data);
    }

    public void skippedEntity(String name) throws SAXException {
        ch.skippedEntity(name);
    }
}
</code></pre>

<p>Basically, it intercepts the Transformer's call to parse(), and grabs a reference to its internal ContentHandler.  After that, the class acts as a proxy to the snagged ContentHandler.</p>

<p>Not very clean, but it works.</p>
",Chris Pacejo,,1265836194,1265836194,0
http://stackoverflow.com/a/22444532/837709,Disable hover effects on mobile browsers,99396,Joe White,Joe White,1322454273,1547190514,1322485097,https://stackoverflow.com/questions/8291517/disable-hover-effects-on-mobile-browsers,"<p>I take it from your question that your hover effect changes the content of your page. In that case, my advice is to:</p>

<ul>
<li><strong>Add hover effects on <code>touchstart</code> and <code>mouseenter</code>.</strong></li>
<li><strong>Remove hover effects on <code>mouseleave</code>, <code>touchmove</code> and <code>click</code>.</strong></li>
</ul>

<p>Alternatively, you can edit your page that there is no content change.</p>

<h1>Background</h1>

<p>In order to simulate a mouse, browsers such as Webkit mobile fire the following events if a user touches and releases a finger on touch screen (like iPad) (source: <a href=""https://www.html5rocks.com/en/mobile/touchandmouse/#toc-together"" rel=""noreferrer"">Touch And Mouse</a> on html5rocks.com):</p>

<ol>
<li><code>touchstart</code></li>
<li><code>touchmove</code></li>
<li><code>touchend</code></li>
<li>300ms delay, where the browser makes sure this is a single tap, not a double tap</li>
<li><code>mouseover</code></li>
<li><code>mouseenter</code>

<ul>
<li><strong>Note</strong>: If a <code>mouseover</code>, <code>mouseenter</code> or <code>mousemove</code> event changes the page content, the following events are never fired.</li>
</ul></li>
<li><code>mousemove</code></li>
<li><code>mousedown</code></li>
<li><code>mouseup</code></li>
<li><code>click</code></li>
</ol>

<p><strong><em>It does not seem possible to simply tell the webbrowser to skip the mouse events.</em></strong></p>

<p>What's worse, if a mouseover event changes the page content, the click event is never fired, as explained on <a href=""https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html"" rel=""noreferrer"">Safari Web Content Guide - Handling Events</a>, in particular figure 6.4 in <em>One-Finger Events</em>. What exactly a ""content change"" is, will depend on browser and version. I've found that for iOS 7.0, a change in background color is not (or no longer?) a content change.</p>

<h1>Solution Explained</h1>

<p>To recap:</p>

<ul>
<li>Add hover effects on <code>touchstart</code> and <code>mouseenter</code>.</li>
<li>Remove hover effects on <code>mouseleave</code>, <code>touchmove</code> and <code>click</code>.</li>
</ul>

<p>Note that there is no action on <code>touchend</code>!</p>

<p>This clearly works for mouse events: <code>mouseenter</code> and <code>mouseleave</code> (slightly improved versions of <code>mouseover</code> and <code>mouseout</code>) are fired, and add and remove the hover.</p>

<p>If the user actually <code>click</code>s a link, the hover effect is also removed. This ensure that it is removed if the user presses the back button in the web browser.</p>

<p>This also works for touch events: on touchstart the hover effect is added. It is '''not''' removed on touchend. It is added again on <code>mouseenter</code>, and since this causes no content changes (it was already added), the <code>click</code> event is also fired, and the link is followed without the need for the user to click again!</p>

<p>The 300ms delay that a browser has between a <code>touchstart</code> event and <code>click</code> is actually put in good use because the hover effect will be shown during this short time.</p>

<p>If the user decides to cancel the click, a move of the finger will do so just as normal. Normally, this is a problem since no <code>mouseleave</code> event is fired, and the hover effect remains in place. Thankfully, this can easily be fixed by removing the hover effect on <code>touchmove</code>.</p>

<p>That's it!</p>

<p>Note that it is possible to remove the 300ms delay, for example using the <a href=""https://github.com/ftlabs/fastclick"" rel=""noreferrer"">FastClick library</a>, but this is out of scope for this question.</p>

<h1>Alternative Solutions</h1>

<p>I've found the following problems with the following alternatives:</p>

<ul>
<li><strong>browser detection:</strong> Extremely prone to errors. Assumes that a device has either mouse or touch, while a combination of both will become more and more common when touch displays prolifirate.</li>
<li><strong>CSS media detection:</strong> The only CSS-only solution I'm aware of. Still prone to errors, and still assumes that a device has either mouse or touch, while both are possible.</li>
<li><strong>Emulate the click event in <code>touchend</code>:</strong> This will incorrectly follow the link, even if the user only wanted to scroll or zoom, without the intention of actually clicking the link.</li>
<li><strong>Use a variable to suppress mouse events:</strong> This set a variable in <code>touchend</code> that is used as a if-condition in subsequent mouse events to prevents state changes at that point in time. The variable is reset in the click event. See Walter Roman's answer on this page. This is a decent solution if you really don't want a hover effect on touch interfaces. Unfortunately, this does not work if a <code>touchend</code> is fired for another reason and no click event is fired (e.g. the user scrolled or zoomed), and is subsequently trying to following the link with a mouse (i.e on a device with both mouse and touch interface).</li>
</ul>

<h1>Further Reading</h1>

<ul>
<li><a href=""http://jsfiddle.net/macfreek/24Z5M/"" rel=""noreferrer"">http://jsfiddle.net/macfreek/24Z5M/</a>. Test the above solution for yourself in this sandbox.</li>
<li><a href=""http://www.macfreek.nl/memory/Touch_and_mouse_with_hover_effects_in_a_web_browser"" rel=""noreferrer"">http://www.macfreek.nl/memory/Touch_and_mouse_with_hover_effects_in_a_web_browser</a>. This same answer, with a bit more background.</li>
<li><a href=""https://www.html5rocks.com/en/mobile/touchandmouse/"" rel=""noreferrer"">https://www.html5rocks.com/en/mobile/touchandmouse/</a>. Great background article on html5rocks.com about touch and mouse in general.</li>
<li><a href=""https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html"" rel=""noreferrer"">https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html</a>. Safari Web Content Guide - Handling Events. See in particular figure 6.4, which explains that no further events are fired after a content change during a <code>mouseover</code> or <code>mousemove</code> event.</li>
</ul>
",MacFreek,Cur,1395012527,1498666260,1498666260
http://stackoverflow.com/a/22480938/757587,How to Check if element is visible after scrolling?,594211,yoavf,,1233136855,1560266555,1545241559,https://stackoverflow.com/questions/487073/how-to-check-if-element-is-visible-after-scrolling,"<p><a href=""https://stackoverflow.com/a/488073/643514"">This answer</a> in Vanilla:</p>

<pre><code>function isScrolledIntoView(el) {
    var rect = el.getBoundingClientRect();
    var elemTop = rect.top;
    var elemBottom = rect.bottom;

    // Only completely visible elements return true:
    var isVisible = (elemTop &gt;= 0) &amp;&amp; (elemBottom &lt;= window.innerHeight);
    // Partially visible elements return true:
    //isVisible = elemTop &lt; window.innerHeight &amp;&amp; elemBottom &gt;= 0;
    return isVisible;
}
</code></pre>
",bravedick,jcubic,1395149471,1512307614,1512307614
http://stackoverflow.com/a/2248203/1125055,Handling exceptions from Java ExecutorService tasks,142039,Tom,Andrii Abramov,1265926189,1534397840,1497970907,https://stackoverflow.com/questions/2248131/handling-exceptions-from-java-executorservice-tasks,"<p>From the <a href=""https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html"" rel=""noreferrer"">docs</a>:</p>

<blockquote>
  <p>Note: When actions are enclosed in
  tasks (such as FutureTask) either
  explicitly or via methods such as
  submit, these task objects catch and
  maintain computational exceptions, and
  so they do not cause abrupt
  termination, and the internal
  exceptions are not passed to this
  method.</p>
</blockquote>

<p>When you submit a Runnable, it'll get wrapped in a Future.</p>

<p>Your afterExecute should be something like this:</p>

<pre><code>public final class ExtendedExecutor extends ThreadPoolExecutor {

    // ...

    protected void afterExecute(Runnable r, Throwable t) {
        super.afterExecute(r, t);
        if (t == null &amp;&amp; r instanceof Future&lt;?&gt;) {
            try {
                Future&lt;?&gt; future = (Future&lt;?&gt;) r;
                if (future.isDone()) {
                    future.get();
                }
            } catch (CancellationException ce) {
                t = ce;
            } catch (ExecutionException ee) {
                t = ee.getCause();
            } catch (InterruptedException ie) {
                Thread.currentThread().interrupt();
            }
        }
        if (t != null) {
            System.out.println(t);
        }
    }
}
</code></pre>
",nos,Pavel,1265926865,1534397840,1534397840
http://stackoverflow.com/a/2249173/659433,how do I make a portable isnan/isinf function,37892,monkeyking,Yu Hao,1265938830,1479817975,1376756697,https://stackoverflow.com/questions/2249110/how-do-i-make-a-portable-isnan-isinf-function,"<p>I've not tried this, but I would think</p>

<pre><code>int isnan(double x) { return x != x; }
int isinf(double x) { return !isnan(x) &amp;&amp; isnan(x - x); }
</code></pre>

<p>would work. It feels like there should be a better way for isinf, but that should work.</p>
",Johann Hibschman,,1265939665,1265939665,0
http://stackoverflow.com/a/22521619/922184,How to check if a CPU supports the SSE3 instruction set?,32159,Stiefel,Stiefel,1306313384,1556622141,1365496256,https://stackoverflow.com/questions/6121792/how-to-check-if-a-cpu-supports-the-sse3-instruction-set,"<p>Mysticial's answer is a bit dangerous -- it explains how to detect CPU support but not OS support.  You need to use _xgetbv to check whether the OS has enabled the required CPU extended state.  See <a href=""http://insufficientlycomplicated.wordpress.com/2011/11/07/detecting-intel-advanced-vector-extensions-avx-in-visual-studio/"">here</a> for another source.  <a href=""http://gcc.gnu.org/bugzilla/show_bug.cgi?id=55307"">Even gcc has made the same mistake.</a>  The meat of the code is:</p>

<pre><code>bool avxSupported = false;

int cpuInfo[4];
__cpuid(cpuInfo, 1);

bool osUsesXSAVE_XRSTORE = cpuInfo[2] &amp; (1 &lt;&lt; 27) || false;
bool cpuAVXSuport = cpuInfo[2] &amp; (1 &lt;&lt; 28) || false;

if (osUsesXSAVE_XRSTORE &amp;&amp; cpuAVXSuport)
{
    unsigned long long xcrFeatureMask = _xgetbv(_XCR_XFEATURE_ENABLED_MASK);
    avxSupported = (xcrFeatureMask &amp; 0x6) == 0x6;
}
</code></pre>
",Andy Lutomirski,Mysticial,1395278547,1408855813,1408855813
http://stackoverflow.com/a/22600564/804759,Waterline ORM (sails.js) conditions with NOT Equal in query,9405,Igor,Travis Webb,1386169987,1429488734,1429488734,https://stackoverflow.com/questions/20378997/waterline-orm-sails-js-conditions-with-not-equal-in-query,"<p>Adding this answer for anyone using Postgres. I was trying this and banging my head against a wall as it wasn't working and I couldn't figure out why. I searched all over and kept finding this answer.</p>

<p>If you are on postgres you want to use </p>

<pre><code>id: { not: req.params.id }
</code></pre>

<p>After looking through Sailsjs docs and searching google long and hard I found this answer in the comments of the sails-postgresql module query.js. Hopefully this helps save someone in the same situation some time. Here is the full comment block that saved my sanity.</p>

<pre><code>/**
 * Specifiy a `where` condition
 *
 * `Where` conditions may use key/value model attributes for simple query
 * look ups as well as more complex conditions.
 *
 * The following conditions are supported along with simple criteria:
 *
 *   Conditions:
 *     [And, Or, Like, Not]
 *
 *   Criteria Operators:
 *     [&lt;, &lt;=, &gt;, &gt;=, !]
 *
 *   Criteria Helpers:
 *     [lessThan, lessThanOrEqual, greaterThan, greaterThanOrEqual, not, like, contains, startsWith, endsWith]
 *
 * ####Example
 *
 *   where: {
 *     name: 'foo',
 *     age: {
 *       '&gt;': 25
 *     },
 *     like: {
 *       name: '%foo%'
 *     },
 *     or: [
 *       { like: { foo: '%foo%' } },
 *       { like: { bar: '%bar%' } }
 *     ],
 *     name: [ 'foo', 'bar;, 'baz' ],
 *     age: {
 *       not: 40
 *     }
 *   }
 */
</code></pre>
",Lenny,,1395631606,1395631606,0
http://stackoverflow.com/a/22605281/379593,Create Pandas DataFrame from a string,111622,Emil H,Acumenus,1395650609,1560782625,1538439949,https://stackoverflow.com/questions/22604564/create-pandas-dataframe-from-a-string,"<p>A simple way to do this is to use <a href=""https://docs.python.org/2/library/io.html#io.StringIO"" rel=""noreferrer""><code>StringIO.StringIO</code> (python2)</a> or <a href=""https://docs.python.org/3/library/io.html#io.StringIO"" rel=""noreferrer""><code>io.StringIO</code> (python3)</a> and pass that to the <a href=""http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html#pandas.read_csv"" rel=""noreferrer""><code>pandas.read_csv</code></a> function. E.g:</p>

<pre><code>import sys
if sys.version_info[0] &lt; 3: 
    from StringIO import StringIO
else:
    from io import StringIO

import pandas as pd

TESTDATA = StringIO(""""""col1;col2;col3
    1;4.4;99
    2;4.5;200
    3;4.7;65
    4;3.2;140
    """""")

df = pd.read_csv(TESTDATA, sep="";"")
</code></pre>
",Emil H,Gustavo Lopes,1395652887,1560782625,1560782625
http://stackoverflow.com/a/22618740/362702,Django Broken pipe in Debug mode,35980,San4ez,San4ez,1319699254,1396364143,1319784117,https://stackoverflow.com/questions/7912672/django-broken-pipe-in-debug-mode,"<p>The nginx directive (checked answer) didn't work for me, but combining monkey patches from Igor Katson and Michael_Scharf did:</p>

<pre class=""lang-py prettyprint-override""><code>def patch_broken_pipe_error():
    """"""Monkey Patch BaseServer.handle_error to not write
    a stacktrace to stderr on broken pipe.
    http://stackoverflow.com/a/22618740/362702""""""
    import sys
    from SocketServer import BaseServer
    from wsgiref import handlers

    handle_error = BaseServer.handle_error
    log_exception = handlers.BaseHandler.log_exception

    def is_broken_pipe_error():
        type, err, tb = sys.exc_info()
        return repr(err) == ""error(32, 'Broken pipe')""

    def my_handle_error(self, request, client_address):
        if not is_broken_pipe_error():
            handle_error(self, request, client_address)

    def my_log_exception(self, exc_info):
        if not is_broken_pipe_error():
            log_exception(self, exc_info)

    BaseServer.handle_error = my_handle_error
    handlers.BaseHandler.log_exception = my_log_exception

patch_broken_pipe_error()
</code></pre>
",Rick Mohr,Rick Mohr,1395689083,1396364143,1396364143
http://stackoverflow.com/a/22618740/51397,Django Broken pipe in Debug mode,35980,San4ez,San4ez,1319699254,1396364143,1319784117,https://stackoverflow.com/questions/7912672/django-broken-pipe-in-debug-mode,"<p>The nginx directive (checked answer) didn't work for me, but combining monkey patches from Igor Katson and Michael_Scharf did:</p>

<pre class=""lang-py prettyprint-override""><code>def patch_broken_pipe_error():
    """"""Monkey Patch BaseServer.handle_error to not write
    a stacktrace to stderr on broken pipe.
    http://stackoverflow.com/a/22618740/362702""""""
    import sys
    from SocketServer import BaseServer
    from wsgiref import handlers

    handle_error = BaseServer.handle_error
    log_exception = handlers.BaseHandler.log_exception

    def is_broken_pipe_error():
        type, err, tb = sys.exc_info()
        return repr(err) == ""error(32, 'Broken pipe')""

    def my_handle_error(self, request, client_address):
        if not is_broken_pipe_error():
            handle_error(self, request, client_address)

    def my_log_exception(self, exc_info):
        if not is_broken_pipe_error():
            log_exception(self, exc_info)

    BaseServer.handle_error = my_handle_error
    handlers.BaseHandler.log_exception = my_log_exception

patch_broken_pipe_error()
</code></pre>
",Rick Mohr,Rick Mohr,1395689083,1396364143,1396364143
http://stackoverflow.com/a/22694173/12791,Chrome ignores autocomplete=&quot;off&quot;,286490,Mr Fett,TylerH,1347382471,1557984481,1546546471,https://stackoverflow.com/questions/12374442/chrome-ignores-autocomplete-off,"<p><strong>UPDATE</strong></p>

<p>It seems now Chrome ignores the <code>style=""display: none;""</code> or <code>style=""visibility: hidden;</code> attributes.</p>

<p>You can change it to something like:</p>

<pre><code>&lt;input style=""opacity: 0;position: absolute;""&gt;
&lt;input type=""password"" style=""opacity: 0;position: absolute;""&gt;
</code></pre>

<p>In my experience, Chrome only autocompletes the first <code>&lt;input type=""password""&gt;</code> and the previous <code>&lt;input&gt;</code>. So I've added:</p>

<pre class=""lang-html prettyprint-override""><code>&lt;input style=""display:none""&gt;
&lt;input type=""password"" style=""display:none""&gt;
</code></pre>

<p>To the top of the <code>&lt;form&gt;</code> and the case was resolved.</p>
",Diogo Cid,Diogo Cid,1395939247,1544619691,1544619691
http://stackoverflow.com/a/22744598/552669,Cross-browser (IE8-) getComputedStyle with Javascript?,20199,user1643156,,1364756924,1495127367,0,https://stackoverflow.com/questions/15733365/cross-browser-ie8-getcomputedstyle-with-javascript,"<p>Here's a cross-browser function to get a computed style...</p>

<pre><code>getStyle = function (el, prop) {
    if (typeof getComputedStyle !== 'undefined') {
        return getComputedStyle(el, null).getPropertyValue(prop);
    } else {
        return el.currentStyle[prop];
    }
}
</code></pre>

<p>You may store it as an utility within an object, or just use it as provided. Here's a sample demo!</p>

<pre><code>// Create paragraph element and append some text to it
var p = document.createElement('p');
p.appendChild(document.createTextNode('something for fun'));

// Append element to the body
document.getElementsByTagName('body')[0].appendChild(p);

// Set hex color to this element
p.style.color = '#999';

// alert element's color using getStyle function
alert(getStyle(p, 'color'));
</code></pre>

<p><strong>Check this demo</strong> to see it in action:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""true"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code snippet-currently-hidden"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>getStyle = function(el, prop) {
  if (getComputedStyle !== 'undefined') {
    return getComputedStyle(el, null).getPropertyValue(prop);
  } else {
    return el.currentStyle[prop];
  }
}

// Create paragraph element and append some text to it
var p = document.createElement('p');
p.appendChild(document.createTextNode('something for fun'));

// Append element to the body
document.getElementsByTagName('body')[0].appendChild(p);

// Set hex color to this element
p.style.color = '#999';

// alert element's color using getStyle function
console.log(getStyle(p, 'color'));</code></pre>
<pre class=""snippet-code-css lang-css prettyprint-override""><code>p {
  color: red;
}</code></pre>
</div>
</div>
</p>
",Gabriel kyabu,Emile Bergeron,1396186547,1483640344,1483640344
http://stackoverflow.com/a/22747272/680742,Is there a max number of arguments JavaScript functions can accept?,20120,GladstoneKeep,,1396199545,1534246752,0,https://stackoverflow.com/questions/22747068/is-there-a-max-number-of-arguments-javascript-functions-can-accept,"<p>Although there is nothing specific limiting the <em>theoretical</em> maximum number of arguments in the spec (as <a href=""https://stackoverflow.com/a/22747268/1715579""><em>thefortheye</em>'s answer</a>  points out). There are of course <em>practical</em> limits. These limits are entirely implementation dependent and most likely, will also depend exactly on <em>how</em> you're calling the function. </p>

<hr>

<p>I created <a href=""http://jsfiddle.net/DZn2D/"" rel=""noreferrer"">this fiddle</a> as an experiment. </p>

<pre><code>function testArgs() {
    console.log(arguments.length);
}

var argLen = 0;
for (var i = 1; i &lt; 32; i++) {
    argLen = (argLen &lt;&lt; 1) + 1;
    testArgs.apply(null, new Array(argLen));
}
</code></pre>

<p>Here are my results:</p>

<ul>
<li><p>Chrome 33.0.1750.154 m: The last successful test was <strong>65535</strong> arguments. After that it failed with:</p>

<blockquote>
  <p>Uncaught RangeError: Maximum call stack size exceeded</p>
</blockquote></li>
<li><p>Firefox 27.0.1: The last successful test was <strong>262143</strong> arguments. After that it failed with:</p>

<blockquote>
  <p>RangeError: arguments array passed to Function.prototype.apply is too large</p>
</blockquote></li>
<li><p>Internet Explorer 11: The last successful test was <strong>131071</strong> arguments. After that it failed with:</p>

<blockquote>
  <p>RangeError: SCRIPT28: Out of stack space</p>
</blockquote></li>
<li><p>Opera 12.17: The last successful test was <strong>1048576</strong> arguments. After that it failed with:</p>

<blockquote>
  <p>Error: Function.prototype.apply: argArray is too large</p>
</blockquote></li>
</ul>

<p>Of course, there may be other factors at play here and you may have different results.</p>

<hr>

<p>And here is an <a href=""http://jsfiddle.net/DZn2D/3/"" rel=""noreferrer"">alternate fiddle</a> created using <code>eval</code>. Again, you may get different results.</p>

<ul>
<li><p>Chrome 33.0.1750.154 m: The last successful test was <strong>32767</strong> arguments. After that it failed with:</p>

<blockquote>
  <p>Uncaught SyntaxError: Too many arguments in function call (only 32766 allowed)</p>
</blockquote>

<p><sup>This one is particularly interesting because Chrome itself seems to be confused about how many arguments are actually allowed.</sup></p></li>
<li><p>Firefox 27.0.1: The last successful test was <strong>32767</strong> arguments. After that it failed with:</p>

<blockquote>
  <p>script too large</p>
</blockquote></li>
<li><p>Internet Explorer 11: The last successful test was <strong>32767</strong> arguments. After that it failed with:</p>

<blockquote>
  <p>RangeError: SCRIPT7: Out of memory</p>
</blockquote></li>
<li><p>Opera 12.17: The last successful test was <strong>4194303</strong> arguments. After that it failed with:</p>

<blockquote>
  <p>Out of memory; script terminated.</p>
</blockquote></li>
</ul>
",p.s.w.g,Community,1396200589,1404717062,1495542387
http://stackoverflow.com/a/22753630/5351316,jquery get HTML 5 Data Attributes with hyphens and Case Sensitivity,18491,Unknown,Unknown,1396239886,1396744065,1396744065,https://stackoverflow.com/questions/22753629/jquery-get-html-5-data-attributes-with-hyphens-and-case-sensitivity,"<p>HTML5 allows us to create our own custom attributes to store data. Custom attributes can be called anything we like, like variable names, but they need to be prepended with the word 'data', and words are separated by dashes. You could add ""foo"", ""bar"", and ""foo bar"" data attributes to an input like this:</p>

<pre><code>&lt;input type=""button"" class=""myButton"" value=""click me"" data-foo=""bar"" 
data-bar=""baz"" data-foo-bar=""true""&gt;
</code></pre>

<p>jQuery's <a href=""http://api.jquery.com/data/""><code>.data()</code></a> method will give you access to <code>data-*</code> attributes.</p>

<p>Using jQuery up to and including version 1.4, data attributes were case insensitive, therefore:</p>

<pre><code>&lt;input type=""button"" class=""myButton"" value=""click me"" data-productId=""abc""/&gt;
</code></pre>

<p>would be accessible with</p>

<pre><code>$('.myButton').data('productId');
</code></pre>

<p>jQuery 1.5 and 1.6</p>

<p>However, changes in jQuery 1.5 and 1.6 mean that data attributes are now forced to lowercase, so:</p>

<pre><code>&lt;input type=""button"" class=""myButton"" value=""click me"" data-productId=""abc""/&gt;
</code></pre>

<p>is only accessible with</p>

<pre><code>$('.myButton').data('productid');
</code></pre>

<p>Any <code>data-*</code> attributes become properties of the elements dataset object.  The new property names are derived as follows:</p>

<ul>
<li>The attribute name is converted to all lowercase letters.</li>
<li>The <code>data-</code> prefix is stripped from the attribute name.</li>
<li>Any hyphen characters are also removed from the attribute name.</li>
<li>The remaining characters are converted to CamelCase.  The characters immediately following the hyphens removed in Step 3 become uppercase.</li>
</ul>

<p>Notice that the original attribute name <code>data-product-id</code> has been converted to <code>productId</code> in the dataset object.  The name conversion process must be accounted for when naming <code>data-*</code> attributes.  Since the attribute names are converted to lowercase, it is best to avoid using uppercase letters.  The following example shows how several attribute names translate to dataset properties.</p>

<pre><code>""data-productId""  translates to ""productid""
""data-product-id"" translates to ""productId""
""data-PRODUCT-ID"" translates to ""productId""
""data-ProDUctId""  translates to ""productid""
</code></pre>

<p><strong>NOTE:</strong></p>

<ul>
<li>Custom data attributes are typically used to store metadata that aids/simplifies JavaScript code.</li>
<li>An element can have any number of custom data attributes.</li>
<li>Custom data attributes should only be used if a more appropriate element or attribute does not exist.  For example, you should not create a custom text description attribute on an image.  The existing <code>alt</code> attribute is a better choice.</li>
<li>The HTML5 specification clearly states <code>data-*</code> attributes should not be used by third party applications.  This means that programs such as search engines should not rely on custom data attributes when preparing search results.</li>
</ul>

<p>Implementing custom attributes in HTML5 is not technically complex in itself, however the real difficulty is in choosing whether it is appropriate to use them in your own projects, and if so how to go about it efficiently. Finally, do remember that its still a little early to start using the dataset approach for functions your pages rely on, so be sure to provide an alternative for non-supporting browsers.</p>

<p><strong><a href=""http://jsfiddle.net/kunknown/8XLg6/"">DEMO</a></strong></p>
",Unknown,Unknown,1396239886,1396458355,1396458355
http://stackoverflow.com/a/22756538/756809,How to disable copy/paste from/to EditText,80636,rDroid,Reno,1307516712,1545130081,1323343737,https://stackoverflow.com/questions/6275299/how-to-disable-copy-paste-from-to-edittext,"<p>here is a best way to disable cut copy paste of editText work in all version</p>

<pre><code>if (android.os.Build.VERSION.SDK_INT &lt; 11) {
        editText.setOnCreateContextMenuListener(new OnCreateContextMenuListener() {

            @Override
            public void onCreateContextMenu(ContextMenu menu, View v,
                    ContextMenuInfo menuInfo) {
                // TODO Auto-generated method stub
                menu.clear();
            }
        });
    } else {
        editText.setCustomSelectionActionModeCallback(new ActionMode.Callback() {

            public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
                // TODO Auto-generated method stub
                return false;
            }

            public void onDestroyActionMode(ActionMode mode) {
                // TODO Auto-generated method stub

            }

            public boolean onCreateActionMode(ActionMode mode, Menu menu) {
                // TODO Auto-generated method stub
                return false;
            }

            public boolean onActionItemClicked(ActionMode mode,
                    MenuItem item) {
                // TODO Auto-generated method stub
                return false;
            }
        });
    }
</code></pre>
",Hardik,,1396253377,1396253377,0
http://stackoverflow.com/a/22776/579925,How do I download a file over HTTP using Python?,955578,Owen,kilojoules,1219419253,1556888417,1490937080,https://stackoverflow.com/questions/22676/how-do-i-download-a-file-over-http-using-python,"<p>One more, using <a href=""http://docs.python.org/2/library/urllib.html#urllib.urlretrieve"" rel=""noreferrer""><code>urlretrieve</code></a>:</p>

<pre><code>import urllib
urllib.urlretrieve (""http://www.example.com/songs/mp3.mp3"", ""mp3.mp3"")
</code></pre>

<p>(for Python 3+ use <code>import urllib.request</code> and <code>urllib.request.urlretrieve</code>)</p>

<p>Yet another one, with a ""progressbar""</p>

<pre><code>import urllib2

url = ""http://download.thinkbroadband.com/10MB.zip""

file_name = url.split('/')[-1]
u = urllib2.urlopen(url)
f = open(file_name, 'wb')
meta = u.info()
file_size = int(meta.getheaders(""Content-Length"")[0])
print ""Downloading: %s Bytes: %s"" % (file_name, file_size)

file_size_dl = 0
block_sz = 8192
while True:
    buffer = u.read(block_sz)
    if not buffer:
        break

    file_size_dl += len(buffer)
    f.write(buffer)
    status = r""%10d  [%3.2f%%]"" % (file_size_dl, file_size_dl * 100. / file_size)
    status = status + chr(8)*(len(status)+1)
    print status,

f.close()
</code></pre>
",PabloG,Richard Dunn,1219421949,1555428924,1555428924
http://stackoverflow.com/a/22787457/395857,Specify figure size in centimeter in matplotlib,22358,HyperCube,,1360070997,1442669646,0,https://stackoverflow.com/questions/14708695/specify-figure-size-in-centimeter-in-matplotlib,"<p>This is not an answer to a question ''<strong>Is there a native way?</strong>'', but I think, that there is a more elegant way:</p>

<pre class=""lang-py prettyprint-override""><code>def cm2inch(*tupl):
    inch = 2.54
    if isinstance(tupl[0], tuple):
        return tuple(i/inch for i in tupl[0])
    else:
        return tuple(i/inch for i in tupl)
</code></pre>

<p>Then one can issue <code>plt.figure(figsize=cm2inch(12.8, 9.6))</code>, which I think is a much cleaner way. The implementation also allows us to use <code>cm2inch((12.8, 9.6))</code>, which I personally do not prefer, but some people may do.</p>

<hr>

<p><strong>EDIT:</strong> Even though there is no way of doing this natively at the moment, I found a discussion <a href=""https://github.com/matplotlib/matplotlib/issues/1369"" rel=""noreferrer""><strong>here</strong></a>.</p>
",gns-ank,gns-ank,1396359085,1426447256,1426447256
http://stackoverflow.com/a/22836015/43839,Python unit test with base and sub class,43586,Thierry Lam,Thierry Lam,1251131981,1530726038,1251132510,https://stackoverflow.com/questions/1323455/python-unit-test-with-base-and-sub-class,"<p>You can solve this problem with a single command:</p>

<pre><code>del(BaseTest)
</code></pre>

<p>So the code would look like this:</p>

<pre><code>import unittest

class BaseTest(unittest.TestCase):

    def testCommon(self):
        print 'Calling BaseTest:testCommon'
        value = 5
        self.assertEquals(value, 5)

class SubTest1(BaseTest):

    def testSub1(self):
        print 'Calling SubTest1:testSub1'
        sub = 3
        self.assertEquals(sub, 3)


class SubTest2(BaseTest):

    def testSub2(self):
        print 'Calling SubTest2:testSub2'
        sub = 4
        self.assertEquals(sub, 4)

del(BaseTest)

if __name__ == '__main__':
    unittest.main()
</code></pre>
",Wojciech B.,,1396524031,1396524031,0
http://stackoverflow.com/a/22907134/35070,How to download a file with Node.js (without using third-party libraries)?,356032,greepow,KARTHIKEYAN.A,1344910904,1557154092,1537262500,https://stackoverflow.com/questions/11944932/how-to-download-a-file-with-node-js-without-using-third-party-libraries,"<p>Don't forget to handle errors! The following code is based on Augusto Roman's answer.</p>

<pre><code>var http = require('http');
var fs = require('fs');

var download = function(url, dest, cb) {
  var file = fs.createWriteStream(dest);
  var request = http.get(url, function(response) {
    response.pipe(file);
    file.on('finish', function() {
      file.close(cb);  // close() is async, call cb after close completes.
    });
  }).on('error', function(err) { // Handle errors
    fs.unlink(dest); // Delete the file async. (But we don't check the result)
    if (cb) cb(err.message);
  });
};
</code></pre>
",Vince Yuan,,1396859051,1396859051,0
http://stackoverflow.com/a/22922156/11440,"Django rest framework, use different serializers in the same ModelViewSet",51078,BlackBear,H&#229;ken Lid,1395683675,1553597696,1524307268,https://stackoverflow.com/questions/22616973/django-rest-framework-use-different-serializers-in-the-same-modelviewset,"<p>You may find this mixin useful, it overrides the get_serializer_class method and allows you to declare a dict that maps action and serializer class or fallback to the usual behavior.</p>

<pre><code>class MultiSerializerViewSetMixin(object):
    def get_serializer_class(self):
        """"""
        Look for serializer class in self.serializer_action_classes, which
        should be a dict mapping action name (key) to serializer class (value),
        i.e.:

        class MyViewSet(MultiSerializerViewSetMixin, ViewSet):
            serializer_class = MyDefaultSerializer
            serializer_action_classes = {
               'list': MyListSerializer,
               'my_action': MyActionSerializer,
            }

            @action
            def my_action:
                ...

        If there's no entry for that action then just fallback to the regular
        get_serializer_class lookup: self.serializer_class, DefaultSerializer.

        """"""
        try:
            return self.serializer_action_classes[self.action]
        except (KeyError, AttributeError):
            return super(MultiSerializerViewSetMixin, self).get_serializer_class()
</code></pre>
",gonz,gonz,1396901660,1520348817,1520348817
http://stackoverflow.com/a/22948274/888165,How to detect browser using angularjs?,126204,seUser,Rui Lopes,1396988996,1539341729,1532021280,https://stackoverflow.com/questions/22947535/how-to-detect-browser-using-angularjs,"<p>Like Eliran Malka asked, why do you need to check for IE 9?</p>

<p>Detecting browser make and version is generally a bad smell. This generally means that you there is a bigger problem with the code if you need JavaScript to detect specific versions of browser. </p>

<p>There are genuine cases where a feature won't work, like say WebSockets isn't supported in IE 8 or 9. This should be solved by checking for WebSocket support, and applying a polyfill if there is no native support.</p>

<p>This should be done with a library like Modernizr. </p>

<p>That being said, you can easily create service that would return the browser. There are valid cases where a feature exists in a browser but the implementation is outdated or broken. Modernizr is not appropriate for these cases. </p>

<pre><code>app.service('browser', ['$window', function($window) {

     return function() {

         var userAgent = $window.navigator.userAgent;

        var browsers = {chrome: /chrome/i, safari: /safari/i, firefox: /firefox/i, ie: /internet explorer/i};

        for(var key in browsers) {
            if (browsers[key].test(userAgent)) {
                return key;
            }
       };

       return 'unknown';
    }

}]);
</code></pre>

<p><strong>Fixed typo broswers</strong></p>

<p><strong>Note:</strong> This is just an example of how to create a service in angular that will sniff the userAgent string. This is just a code example that is not expected to work in production and report all browsers in all situations.</p>

<p><strong>UPDATE</strong></p>

<p>It is probably best to use a third party library like <a href=""https://github.com/ded/bowser"" rel=""nofollow noreferrer"">https://github.com/ded/bowser</a> or <a href=""https://github.com/darcyclarke/Detect.js"" rel=""nofollow noreferrer"">https://github.com/darcyclarke/Detect.js</a>. These libs place an object on the <code>window</code> named bowser or detect respectively. </p>

<p>You can then expose this to the <code>Angular IoC Container</code> like this: </p>

<pre><code>angular.module('yourModule').value('bowser', bowser);
</code></pre>

<p>Or </p>

<pre><code>detectFactory.$inject = ['$window'];
function detectFactory($window) {
    return detect.parse($window.navigator.userAgent);
} 
angular.module('yourModule').factory('detect', detectFactory);
</code></pre>

<p>You would then inject one of these the usual way, and use the API provided by the lib. If you choose to use another lib that instead uses a constructor method, you would create a factory that instantiates it:</p>

<pre><code>function someLibFactory() {
    return new SomeLib();
}
angular.module('yourModule').factory('someLib', someLibFactory);
</code></pre>

<p>You would then inject this into your controllers and services the normal way.</p>

<p>If the library you are injecting does not exactly match your requirements, you may want to employ the <code>Adapter Pattern</code> where you create a class/constructor with the exact methods you need.</p>

<p>In this example we just need to test for IE 9, and we are going to use the <code>bowser</code> lib above. </p>

<pre><code>BrowserAdapter.$inject = ['bowser']; // bring in lib
function BrowserAdapter(bowser) {
    this.bowser = bowser;
}

BrowserAdapter.prototype.isIe9 = function() {
    return this.bowser.msie &amp;&amp; this.browser.version == 9;
}

angular.module('yourModule').service('browserAdapter', BrowserAdapter);
</code></pre>

<p>Now in a controller or service you can inject the <code>browserAdapter</code> and just do <code>if (browserAdapter.isIe9) { // do something }</code></p>

<p>If later you wanted to use detect instead of bowser, the changes in your code would be isolated to the BrowserAdapter. </p>

<p><strong>UPDATE</strong></p>

<p>In reality these values never change. IF you load the page in IE 9 it will never become Chrome 44. So instead of registering the BrowserAdapter as a service, just put the result in a <code>value</code> or <code>constant</code>.</p>

<pre><code>angular.module('app').value('isIe9', broswerAdapter.isIe9);
</code></pre>
",Martin,Yvette Colomb,1396991497,1530729806,1530729806
http://stackoverflow.com/a/229606/68898,How to check if a string contains a substring in Bash,1737397,davidsheldon,codeforester,1224765451,1558374095,1533321249,https://stackoverflow.com/questions/229551/how-to-check-if-a-string-contains-a-substring-in-bash,"<p>You can use <a href=""https://stackoverflow.com/a/229585/3755692"">Marcus's answer (* wildcards)</a> outside a case statement, too, if you use double brackets:</p>

<pre><code>string='My long string'
if [[ $string == *""My long""* ]]; then
  echo ""It's there!""
fi
</code></pre>

<p>Note that spaces in the needle string need to be placed between double quotes, and the <code>*</code> wildcards should be outside.</p>
",Adam Bellaire,Teemu Leisti,1224766524,1538748854,1538748854
http://stackoverflow.com/a/22965580/1759745,When and why I should use session_regenerate_id()?,44566,rvandoni,Mattia,1397052244,1490458517,1447460327,https://stackoverflow.com/questions/22965067/when-and-why-i-should-use-session-regenerate-id,"<h2>What is <code>session_regenerate_id()</code>?</h2>

<p>As the function name says, it is a function that will replace the current session ID with a new one, and keep the current session information.</p>

<h2>What does it do?</h2>

<p>It mainly helps prevent session fixation attacks. Session fixation attacks is where a malicious user tries to exploit the vulnerability in a system to fixate (set) the session ID (SID) of another user. By doing so, they will get complete access as the original user and be able to do tasks that would otherwise require authentication.</p>

<p>To prevent such attacks, assign the user a new session ID using <code>session_regenerate_id()</code> when he successfully signs in (or for every X requests). Now only he has the session ID, and your old (fixated) session ID is no longer valid.</p>

<h2>When should I use <code>session_regenerate_id()</code>?</h2>

<p>As symbecean points out in the comments below, the session id must be changed at any transition in authentication state and <strong><em>only</em></strong> at authentication transitions. </p>

<p>Further reading:</p>

<ul>
<li><a href=""http://php.net/session_regenerate_id"">http://php.net/session_regenerate_id</a></li>
<li><a href=""https://www.owasp.org/index.php/Session_fixation"">https://www.owasp.org/index.php/Session_fixation</a></li>
<li><a href=""http://en.wikipedia.org/wiki/Session_fixation"">http://en.wikipedia.org/wiki/Session_fixation</a></li>
<li><a href=""https://wiki.php.net/rfc/precise_session_management"">https://wiki.php.net/rfc/precise_session_management</a></li>
</ul>
",Amal Murali,Amal Murali,1397053443,1453982680,1453982680
http://stackoverflow.com/a/22980843/4248895,How to check if Location Services are enabled?,204202,Meroelyth,Tshepang,1335341689,1551326788,1397167621,https://stackoverflow.com/questions/10311834/how-to-check-if-location-services-are-enabled,"<p>I use this code for checking:</p>

<pre><code>public static boolean isLocationEnabled(Context context) {
    int locationMode = 0;
    String locationProviders;

    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT){
        try {
            locationMode = Settings.Secure.getInt(context.getContentResolver(), Settings.Secure.LOCATION_MODE);

        } catch (SettingNotFoundException e) {
            e.printStackTrace();
            return false;
        }

        return locationMode != Settings.Secure.LOCATION_MODE_OFF;

    }else{
        locationProviders = Settings.Secure.getString(context.getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
        return !TextUtils.isEmpty(locationProviders);
    }


} 
</code></pre>
",Slava  Fir,Oleksandr,1397113253,1479908235,1479908235
http://stackoverflow.com/a/22980843/937715,How to check if Location Services are enabled?,204202,Meroelyth,Tshepang,1335341689,1551326788,1397167621,https://stackoverflow.com/questions/10311834/how-to-check-if-location-services-are-enabled,"<p>I use this code for checking:</p>

<pre><code>public static boolean isLocationEnabled(Context context) {
    int locationMode = 0;
    String locationProviders;

    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT){
        try {
            locationMode = Settings.Secure.getInt(context.getContentResolver(), Settings.Secure.LOCATION_MODE);

        } catch (SettingNotFoundException e) {
            e.printStackTrace();
            return false;
        }

        return locationMode != Settings.Secure.LOCATION_MODE_OFF;

    }else{
        locationProviders = Settings.Secure.getString(context.getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
        return !TextUtils.isEmpty(locationProviders);
    }


} 
</code></pre>
",Slava  Fir,Oleksandr,1397113253,1479908235,1479908235
http://stackoverflow.com/a/23002614/131208,Rails active_model_serializer with pagination,7997,Bruce Xinda Lin,Bruce Xinda Lin,1396989639,1428919894,1397063718,https://stackoverflow.com/questions/22947721/rails-active-model-serializer-with-pagination,"<h1>Single Use Solution</h1>

<p>Regular serializers are only concerned with single items - not paginated lists. The most straight forward way to add pagination is in the controller:</p>

<pre><code>customers = Customer.page(params[:page])
respond_with customers, meta: {
  current_page: customers.current_page,
  next_page: customers.next_page,
  prev_page: customers.prev_page,
  total_pages: customers.total_pages,
  total_count: customers.total_count
}
</code></pre>

<h1>Reusable Solution</h1>

<p>However, this is pretty tedious if you need pagination logic for multiple objects. Looking through the documentation for active_model_serializers you'll come across an <code>ArraySerializer</code> for serializing an array of objects. What I did was create <code>pagination_serializer.rb</code> using <code>ArraySerializer</code> to automatically add the meta tag for paginated arrays:</p>

<pre><code># my_app/app/serializers/pagination_serializer.rb
class PaginationSerializer &lt; ActiveModel::Serializer::ArraySerializer
  def initialize(object, options={})
    meta_key = options[:meta_key] || :meta
    options[meta_key] ||= {}
    options[meta_key][:pagination] = {
      current_page: object.current_page,
      next_page: object.next_page,
      prev_page: object.prev_page,
      total_pages: object.total_pages,
      total_count: object.total_count
    }
    super(object, options)
  end
end
</code></pre>

<p>Once you have <code>PaginationSerializer</code> added to your rails app, you simple need to call it when you need pagination meta tags from your controller:</p>

<pre><code>customers = Customer.page(params[:page])
respond_with customers, serializer: PaginationSerializer
</code></pre>

<p>Note: I wrote this to use <a href=""https://github.com/amatsuda/kaminari"">Kaminari</a> as the paginator. However, it can easily be modified to work with any pagination gem or custom solution.</p>
",lightswitch05,equivalent8,1397184455,1428919894,1428919894
http://stackoverflow.com/a/23036970/1694896,What is the easiest way to initialize a std::vector with hardcoded elements?,755105,Agnel Kurian,Prateek Gupta,1265799333,1560337651,1551708989,https://stackoverflow.com/questions/2236197/what-is-the-easiest-way-to-initialize-a-stdvector-with-hardcoded-elements,"<p>A more recent duplicate question has <a href=""https://stackoverflow.com/a/8907356"">this answer</a> by <a href=""https://stackoverflow.com/users/100724/viktor-sehr"">Viktor Sehr</a>. For me, it is compact, visually appealing (looks like you are 'shoving' the values in), doesn't require c++11 or a third party module, and avoids using an extra (written) variable. Below is how I am using it with a few changes. I may switch to extending the function of vector and/or va_arg in the future intead.</p>

<hr>

<pre><code>// Based on answer by ""Viktor Sehr"" on Stack Overflow
// https://stackoverflow.com/a/8907356
//
template &lt;typename T&gt;
class mkvec {
public:
    typedef mkvec&lt;T&gt; my_type;
    my_type&amp; operator&lt;&lt; (const T&amp; val) {
        data_.push_back(val);
        return *this;
    }
    my_type&amp; operator&lt;&lt; (const std::vector&lt;T&gt;&amp; inVector) {
        this-&gt;data_.reserve(this-&gt;data_.size() + inVector.size());
        this-&gt;data_.insert(this-&gt;data_.end(), inVector.begin(), inVector.end());
        return *this;
    }
    operator std::vector&lt;T&gt;() const {
        return data_;
    }
private:
    std::vector&lt;T&gt; data_;
};

std::vector&lt;int32_t&gt;    vec1;
std::vector&lt;int32_t&gt;    vec2;

vec1 = mkvec&lt;int32_t&gt;() &lt;&lt; 5 &lt;&lt; 8 &lt;&lt; 19 &lt;&lt; 79;  
// vec1 = (5,8,19,79)
vec2 = mkvec&lt;int32_t&gt;() &lt;&lt; 1 &lt;&lt; 2 &lt;&lt; 3 &lt;&lt; vec1 &lt;&lt; 10 &lt;&lt; 11 &lt;&lt; 12;  
// vec2 = (1,2,3,5,8,19,79,10,11,12)
</code></pre>
",Othermusketeer,Community,1397342231,1397342231,1495540968
http://stackoverflow.com/a/2303798/10817,Convert a float to a string,55353,SIVA,MD XF,1266686361,1559374362,1507690047,https://stackoverflow.com/questions/2302969/convert-a-float-to-a-string,"<p>When you're dealing with fp numbers, it can get very compex but the algorithm is simplistic and similar to edgar holleis's answer; kudos!  Its complex because when you're dealing with floating point numbers, the calculations will be a little off depending on the precision you've chosen.  That's why its not good programming practice to compare a float to a zero.</p>

<p>But there is an answer and this is my attempt at implementing it.  Here I've used a tolerance value so you don't end up calculating too many decimal places resulting in an infinite loop.  I'm sure there might be better solutions out there but this should help give you a good understanding of how to do it.</p>

<pre><code>char fstr[80];
float num = 2.55f;
int m = log10(num);
int digit;
float tolerance = .0001f;

while (num &gt; 0 + precision)
{
    float weight = pow(10.0f, m);
    digit = floor(num / weight);
    num -= (digit*weight);
    *(fstr++)= '0' + digit;
    if (m == 0)
        *(fstr++) = '.';
    m--;
}
*(fstr) = '\0';
</code></pre>
",Sophy Pal,,1266701080,1266701080,0
http://stackoverflow.com/a/23046071/1789808,WebM file not seekable in Chrome when loaded through PHP (other browsers work),1982,Zoon,Zoon,1397225149,1397410903,1397386669,https://stackoverflow.com/questions/23014913/webm-file-not-seekable-in-chrome-when-loaded-through-php-other-browsers-work,"<p><strong>For everyone's future reference:</strong></p>

<ol>
<li>Online examples of HTTP_RANGE in PHP are full of faults</li>
<li>Chrome is very bad at explaining network errors</li>
<li>Size matters!</li>
</ol>

<p>In short, my problem was due to my PHP script calculating and returning bad numbers.
Chrome would simply act like it didn't even try to complete the network request, making it hard to debug.</p>

<p>Now I took all my network calls and pulled them through cURL (in my Linux console).
Here I would get a more useful error such as <em>curl: (18) transfer closed with 1 bytes remaining to read</em></p>

<p>This 1-byte error in content length makes Chrome cancel the network request and not show you the response headers it got and why it canceled the request.</p>

<p>Here is my working code, with working calculations of Content-Range and Content-Length.
    $filesize = filesize($file);</p>

<pre><code>$offset = 0;
$length = $filesize;

$partialContent = false;

if(isset($_SERVER['HTTP_RANGE']))
{
    $partialContent = true;

    if(!preg_match('/bytes=(\d+)-(\d+)?/', $_SERVER['HTTP_RANGE'], $matches))
    {
        header('HTTP/1.1 416 Requested Range Not Satisfiable');
        header('Content-Range: bytes */' . $filesize);
        exit;
    }

    $offset = intval($matches[1]);

    if(isset($matches[2]))
    {
        $end = $intval($matches[2]);
        if($offset &gt; $end)
        {
            header('HTTP/1.1 416 Requested Range Not Satisfiable');
            header('Content-Range: bytes */' . $filesize);
            exit;
        }

        $length = $end - $offset;
    }
    else
        $length = $filesize - $offset;
}

header('Content-Length: ' . $length);

if($partialContent)
{
     header('HTTP/1.1 206 Partial Content');
     header('Content-Range: bytes ' . $offset . '-' . ($offset + $length - 1) . '/' . $filesize);
     // A full-length file will indeed be ""bytes 0-x/x+1"", think of 0-indexed array counts
}
</code></pre>

<p><em>please note the above snippet only contains code related to the Partial Content, you will still need other headers, etc. to actually do something with it.</em></p>

<p>In case anyone is interested, below is my code for reading out the file. I saw many bad and faulty suggestions to this on the web, but I think mine is pretty clean.</p>

<pre><code>$f = fopen($file, 'r');
fseek($f, $offset);

$pos = 0;

while($pos &lt; $length)
{
    $chunk = min($length-$pos, 1024*8);

    echo fread($f, $chunk);
    flush();
    ob_flush();

    $pos += $chunk;
}
</code></pre>

<p>Case closed,
Good luck to all :-)</p>
",Zoon,,1397410903,1397410903,0
http://stackoverflow.com/a/23131823/4726598,python requests - POST Multipart/form-data without filename in HTTP request,25224,sornars,sornars,1397685781,1467281931,1398001824,https://stackoverflow.com/questions/23120974/python-requests-post-multipart-form-data-without-filename-in-http-request,"<p>The solution is to use tuples when passing parameters to the files argument:</p>

<pre><code>import requests
requests.post('http://example.com/example/asdfas', files={'value_1': (None, '12345'), 'value_2': (None, '67890')})
</code></pre>

<p>Works as expected:</p>

<pre><code>'Accept': '*/*', 
'Accept-Encoding': 'gzip, deflate, compress', 
'Content-Length': '228', 
'User-Agent': 'python-requests/2.2.1 CPython/3.3.2 Windows/7', 
'Content-Type': 'multipart/form-data; boundary=85e90a4bbb05474ca1e23dbebdd68ed9'

--85e90a4bbb05474ca1e23dbebdd68ed9
Content-Disposition: form-data; name=""value_1""

12345
--85e90a4bbb05474ca1e23dbebdd68ed9
Content-Disposition: form-data; name=""value_2""

67890
--85e90a4bbb05474ca1e23dbebdd68ed9--
</code></pre>
",sornars,sornars,1397733823,1397812851,1397812851
http://stackoverflow.com/a/23141483/1064917,delayed_job: &#39;undefined method&#39; error when using handle_asynchronously,2049,settheline,,1397759986,1429654389,0,https://stackoverflow.com/questions/23140914/delayed-job-undefined-method-error-when-using-handle-asynchronously,"<p>Your import is a class method, you should call handle_asynchronously on your model class name's singleton class:</p>

<p>You can use the metaclass trick to alias class methods:</p>

<pre><code>class &lt;&lt; self
   def import(file, store_id)
     CSV.foreach(file.path, headers: true) do |row|
      inventory_item = InventoryItem.find_or_initialize_by_upc_and_store_id(row[0], store_id)
      inventory_item.update_attributes(:price =&gt; row.to_hash[""price""], :updated_at =&gt; ""#{Time.now}"")
     end
   end
  handle_asynchronously :import
end
</code></pre>

<p>Hope this helps!</p>
",LHH,,1397761683,1397761683,0
http://stackoverflow.com/a/23161886/622276,Average Document Length in Okapi BM25,1434,Nusrat,marc_s,1397852434,1497367898,1397852643,https://stackoverflow.com/questions/23161677/average-document-length-in-okapi-bm25,"<p>According the Joaqun Prez-Iglesias in <a href=""https://arxiv.org/abs/0911.5046"" rel=""nofollow noreferrer"">Integrating the Probabilistic Model BM25/BM25F into Lucene</a>, the score function R should be defined as followed :</p>

<p><img src=""https://i.stack.imgur.com/sgOGC.png"" alt=""enter image description here""></p>

<p>such as</p>

<ul>
<li><code>occurs_t^d</code> is the term frequency of <code>t</code> in <code>d</code>,</li>
<li><code>l_d</code> is the document <code>d</code> length.</li>
<li><code>avl_d</code> is the document average length along the collection</li>
<li><code>k_1</code> is a free parameter usually 2 and <code>b</code> in [0,1] (usually 0.75). </li>
</ul>

<p>Assigning 0 to <code>b</code> is equivalent to avoid the process of normalisation and therefore the document length will not affect the final score. </p>

<p>If <code>b</code> takes 1, we will be carrying out a full length normalisation.</p>

<p><img src=""https://i.stack.imgur.com/XEBhE.png"" alt=""enter image description here""></p>

<p>where <code>N</code> is the number of document in the collection and <code>df</code> is the number of documents where appears the term <code>t</code>.</p>
",eliasah,eliasah,1397853315,1497367898,1497367898
http://stackoverflow.com/a/23177629/3549890,Converting a sentence to piglatin in Python,40402,user3534918,Argalatyr,1397955013,1397961636,1397961636,https://stackoverflow.com/questions/23177250/converting-a-sentence-to-piglatin-in-python,"<p><strong>Here is the code:</strong></p>

<pre><code>def main():
        lst = ['sh', 'gl', 'ch', 'ph', 'tr', 'br', 'fr', 'bl', 'gr', 'st', 'sl', 'cl', 'pl', 'fl']
        sentence = input('Type what you would like translated into pig-latin and press ENTER: ')
        sentence = sentence.split()
        for k in range(len(sentence)):
                i = sentence[k]
                if i[0] in ['a', 'e', 'i', 'o', 'u']:
                        sentence[k] = i+'ay'
                elif t(i) in lst:
                        sentence[k] = i[2:]+i[:2]+'ay'
                elif i.isalpha() == False:
                        sentence[k] = i
                else:
                        sentence[k] = i[1:]+i[0]+'ay'
        return ' '.join(sentence)

def t(str):
        return str[0]+str[1]

if __name__ == ""__main__"":
        x = main()
        print(x)
</code></pre>

<p><strong>Runs as:</strong></p>

<pre><code>bash-3.2$ python3 pig.py
Type what you would like translated into pig-latin and press ENTER: my gloves are warm
ymay ovesglay areay armway
bash-3.2$ 
</code></pre>

<p>This code uses the logic found <a href=""http://en.wikipedia.org/wiki/Pig_Latin"" rel=""nofollow"">here</a>.</p>
",A.J. Uppal,,1397959262,1397959262,0
http://stackoverflow.com/a/23256722/1088814,enableAutoActivityTracking not automatically tracking activities?,4900,loeschg,,1398201371,1398293812,0,https://stackoverflow.com/questions/23230358/enableautoactivitytracking-not-automatically-tracking-activities,"<p>Can you also make sure you call <a href=""https://developer.android.com/reference/com/google/android/gms/analytics/GoogleAnalytics.html#enableAutoActivityReports%28android.app.Application%29""><code>enableAutoActivityReports</code></a> on <code>GoogleAnalytics</code> class? I know that the calls are duplicated but unfortunately, we have not been able to fix this yet. In one of the upcoming versions, we'll remove the need to call this method in two places.</p>

<p>If this answer doesn't work, Can you also make sure that there is some screen name associated with the screens you are using. </p>

<p>If none of the above work, please edit the question and add logs with tag starting with <code>""GAV""</code></p>
",Avi,,1398293812,1398293812,0
http://stackoverflow.com/a/23283955/5961578,FactoryGirl build_stubbed strategy with a has_many association,13689,Jared,Jared,1374265051,1399382357,1374271460,https://stackoverflow.com/questions/17754770/factorygirl-build-stubbed-strategy-with-a-has-many-association,"<h2>TL;DR</h2>

<p>FactoryGirl tries to be helpful by making a very large assumption when it
creates it's ""stub"" objects. Namely, that:
<a href=""https://github.com/thoughtbot/factory_girl/blob/master/lib/factory_girl/strategy/stub.rb#L24-L33"">you have an <code>id</code>, which means you are not a new record, and thus are already persisted!</a></p>

<p>Unfortunately, ActiveRecord uses this to decide if it should
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/collection_association.rb#L355-L364"">keep persistence up to date</a>.
So the stubbed model attempts to persist the records to the database.</p>

<blockquote>
  <p>Please do <strong>not</strong> try to shim RSpec stubs / mocks into FactoryGirl factories.
  Doing so mixes two different stubbing philosophies on the same object. Pick
  one or the other.</p>
  
  <p>RSpec mocks are only supposed to be used during certain parts of the spec
  life cycle. Moving them into the factory sets up an environment which will
  hide the violation of the design. Errors which result from this will be
  confusing and difficult to track down.</p>
  
  <p>If you look at the documentation for including RSpec into say
  <a href=""https://www.relishapp.com/rspec/rspec-mocks/v/3-0/docs/test-frameworks/test-unit-integration"">test/unit</a>,
  you can see that it provides methods for ensuring that the mocks are properly
  setup and torn down between the tests. Putting the mocks into the factories
  provides no such guarantee that this will take place.</p>
</blockquote>

<p>There are several options here:</p>

<ul>
<li><p>Don't use FactoryGirl for creating your stubs; use a stubbing library
(rspec-mocks, minitest/mocks, mocha, flexmock, rr, or etc)</p>

<p>If you want to keep your model attribute logic in FactoryGirl that's fine.
Use it for that purpose and create the stub elsewhere:</p>

<pre><code>stub_data = attributes_for(:order)
stub_data[:line_items] = Array.new(5){
  double(LineItem, attributes_for(:line_item))
}
order_stub = double(Order, stub_data)
</code></pre>

<p>Yes, you do have to manually create the associations. This is not a bad thing,
see below for further discussion.</p></li>
<li><p>Clear the <code>id</code> field</p>

<pre><code>after(:stub) do |order, evaluator|
  order.id = nil
  order.line_items = build_stubbed_list(
    :line_item,
    evaluator.line_items_count,
    order: order
  )
end
</code></pre></li>
<li><p>Create your own definition of <code>new_record?</code></p>

<pre><code>factory :order do
  ignore do
    line_items_count 1
    new_record true
  end

  after(:stub) do |order, evaluator|
    order.define_singleton_method(:new_record?) do
      evaluator.new_record
    end
    order.line_items = build_stubbed_list(
      :line_item,
      evaluator.line_items_count,
      order: order
    )
  end
end
</code></pre></li>
</ul>

<h2>What's Going On Here?</h2>

<p>IMO, it's generally not a good idea to attempt to create a ""stubbed"" <code>has_many</code>
association with <code>FactoryGirl</code>. This tends to lead to more tightly coupled code
and potentially many nested objects being needlessly created.</p>

<p>To understand this position, and what is going on with FactoryGirl, we need to
take a look at a few things:</p>

<ul>
<li>The database persistence layer / gem (i.e. <code>ActiveRecord</code>, <code>Mongoid</code>,
<code>DataMapper</code>, <code>ROM</code>, etc)</li>
<li>Any stubbing / mocking libraries (mintest/mocks, rspec, mocha, etc)</li>
<li>The purpose mocks / stubs serve</li>
</ul>

<h2>The Database Persistence Layer</h2>

<p>Each database persistence layer behaves differently. In fact, many behave
differently between major versions. FactoryGirl <em>tries</em> to not make assumptions
about how that layer is setup. This gives them the most flexibility over the
long haul.</p>

<p><strong>Assumption:</strong> I'm guessing you are using <code>ActiveRecord</code> for the remainder of
this discussion.</p>

<p>As of my writing this, the current GA version of <code>ActiveRecord</code> is 4.1.0. When
you setup a <code>has_many</code> association on it,
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations.rb"">there's</a>
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/builder/has_many.rb"">a</a>
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/builder/collection_association.rb"">lot</a>
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/builder/association.rb"">that</a>
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/has_many_association.rb"">goes</a>
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/association.rb"">on</a>.</p>

<p>This is also slightly different in older AR versions. It's very different in
Mongoid, etc. It's not reasonable to expect FactoryGirl to understand the
intricacies of all of these gems, nor differences between versions. It just so
happens that the <a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/builder/association.rb#L115-L121""><code>has_many</code> association's writer</a>
attempts to <a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/collection_association.rb#L355-L364"">keep persistence up to date</a>.</p>

<p>You may be thinking: ""but I can set the inverse with a stub""</p>

<pre><code>FactoryGirl.define do
  factory :line_item do
    association :order, factory: :order, strategy: :stub
  end
end

li = build_stubbed(:line_item)
</code></pre>

<p>Yep, that's true. Though it's simply because AR decided <a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/belongs_to_association.rb#L10-L23"">not to</a>
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/association.rb#L106-L113"">persist</a>.
It turns out this behavior is a good thing. Otherwise, it would be very
difficult to setup temp objects without hitting the database frequently.
Additionally, it allows for multiple objects to be saved in a single
transaction, rolling back the whole transaction if there was a problem.</p>

<p>Now, you may be thinking: ""I totally can add objects to a <code>has_many</code> without
hitting the database""</p>

<pre><code>order = Order.new
li = order.line_items.build(name: 'test')
puts LineItem.count                   # =&gt; 0
puts Order.count                      # =&gt; 0
puts order.line_items.size            # =&gt; 1

li = LineItem.new(name: 'bar')
order.line_items &lt;&lt; li
puts LineItem.count                   # =&gt; 0
puts Order.count                      # =&gt; 0
puts order.line_items.size            # =&gt; 2

li = LineItem.new(name: 'foo')
order.line_items.concat(li)
puts LineItem.count                   # =&gt; 0
puts Order.count                      # =&gt; 0
puts order.line_items.size            # =&gt; 3

order = Order.new
order.line_items = Array.new(5){ |n| LineItem.new(name: ""test#{n}"") }
puts LineItem.count                   # =&gt; 0
puts Order.count                      # =&gt; 0
puts order.line_items.size            # =&gt; 5
</code></pre>

<p>Yep, but here <code>order.line_items</code> is really an
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/collection_proxy.rb""><code>ActiveRecord::Associations::CollectionProxy</code></a>.
It defines it's own <a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/collection_proxy.rb#L253-L255""><code>build</code></a>,
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/collection_proxy.rb#L967-L969""><code>#&lt;&lt;</code></a>,
and <a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/collection_proxy.rb#L328-L330""><code>#concat</code></a>
methods. Of, course these really all delegate back to the association defined,
which for <code>has_many</code> are the equivalent methods:
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/collection_association.rb#L126-L134""><code>ActiveRecord::Associations::CollectionAssocation#build</code></a>
and <a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/collection_association.rb#L147-L155""><code>ActiveRecord::Associations::CollectionAssocation#concat</code></a>.
These take into account the current state of the base model instance in order
to decide whether to persist now or later.</p>

<p>All FactoryGirl can really do here is let the behavior of the underlying class
define what should happen. In fact, this lets you use FactoryGirl to
<a href=""http://robots.thoughtbot.com/mind-bending-factories"">generate any class</a>, not
just database models.</p>

<p>FactoryGirl does attempt to help a little with saving objects. This is mostly
on the <code>create</code> side of the factories. Per their wiki page on
<a href=""https://github.com/thoughtbot/factory_girl/wiki/How-factory_girl-interacts-with-ActiveRecord"">interaction with ActiveRecord</a>:</p>

<blockquote>
  <p>...[a factory] saves associations first so that foreign keys will be properly
  set on dependent models. To create an instance, it calls new without any
  arguments, assigns each attribute (including associations), and then calls
  save!.  factory_girl doesnt do anything special to create ActiveRecord
  instances. It doesnt interact with the database or extend ActiveRecord or
  your models in any way.</p>
</blockquote>

<p>Wait! You may have noticed, in the example above I slipped the following:</p>

<pre><code>order = Order.new
order.line_items = Array.new(5){ |n| LineItem.new(name: ""test#{n}"") }
puts LineItem.count                   # =&gt; 0
puts Order.count                      # =&gt; 0
puts order.line_items.size            # =&gt; 5
</code></pre>

<p>Yep, that's right. We can set <code>order.line_items=</code> to an array and it isn't
persisted! So what gives?</p>

<h2>The Stubbing / Mocking Libraries</h2>

<p>There are many different types and FactoryGirl works with them all. Why?
Because FactoryGirl doesn't do anything with any of them. It's completely
unaware of which library you have.</p>

<p>Remember, you add the FactoryGirl syntax to your <a href=""https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#configure-your-test-suite"">test library of choice</a>.
You don't add your library to FactoryGirl.</p>

<p>So if FactoryGirl isn't using your preferred library, what is it doing?</p>

<h2>The Purpose Mocks / Stubs Serve</h2>

<p>Before we get to the under the hood details, we need to define <a href=""http://c2.com/cgi/wiki?StubObject"">what</a>
<a href=""https://en.wikipedia.org/wiki/Method_stub"">a</a>
<a href=""https://en.wikipedia.org/wiki/Test_stub"">""stub""</a>
<a href=""https://en.wikipedia.org/wiki/Mock_object"">is</a>
and its <a href=""http://martinfowler.com/articles/mocksArentStubs.html"">intended purpose</a>:</p>

<blockquote>
  <p><strong>Stubs</strong> provide canned answers to calls made during the test, usually not
  responding at all to anything outside what's programmed in for the test.
  Stubs may also record information about calls, such as an email gateway stub
  that remembers the messages it 'sent', or maybe only how many messages it
  'sent'.</p>
</blockquote>

<p>this is subtly different from a ""mock"":</p>

<blockquote>
  <p><strong>Mocks</strong>...: objects pre-programmed with expectations which form a
  specification of the calls they are expected to receive.</p>
</blockquote>

<p>Stubs serve as a way to setup collaborators with canned responses. Sticking to
only the collaborators public API which you touch for the specific test keeps
stubs lightweight and small.</p>

<p>Without any ""stubbing"" library, you can easily create your own stubs:</p>

<pre><code>stubbed_object = Object.new
stubbed_object.define_singleton_method(:name) { 'Stubbly' }
stubbed_object.define_singleton_method(:quantity) { 123 }

stubbed_object.name       # =&gt; 'Stubbly'
stubbed_object.quantity   # =&gt; 123
</code></pre>

<p>Since FactoryGirl is completely library agnostic when it comes to their
""stubs"", this is <a href=""https://github.com/thoughtbot/factory_girl/blob/v4.4.0/lib/factory_girl/strategy/stub.rb"">the approach they take</a>.</p>

<p>Looking at the FactoryGirl v.4.4.0 implementation, we can see that the
following methods are all stubbed when you <code>build_stubbed</code>:</p>

<ul>
<li><code>persisted?</code></li>
<li><code>new_record?</code></li>
<li><code>save</code></li>
<li><code>destroy</code></li>
<li><code>connection</code></li>
<li><code>reload</code></li>
<li><code>update_attribute</code></li>
<li><code>update_column</code></li>
<li><code>craeted_at</code></li>
</ul>

<p>These are all very ActiveRecord-y. However, as you have seen with <code>has_many</code>,
it is a fairly leaky abstraction. The ActiveRecord public API surface area is
very large. It's not exactly reasonable to expect a library to fully cover it.</p>

<p><strong>Why does the <code>has_many</code> association not work with the FactoryGirl stub?</strong></p>

<p>As noted above, ActiveRecord checks it's state to decide if it should
<a href=""https://github.com/rails/rails/blob/v4.1.0/activerecord/lib/active_record/associations/collection_association.rb#L355-L364"">keep persistence up to date</a>.
Due to the <a href=""https://github.com/thoughtbot/factory_girl/blob/v4.4.0/lib/factory_girl/strategy/stub.rb#L31-L33"">stubbed definition of <code>new_record?</code></a>
setting any <code>has_many</code> will trigger a database action.</p>

<pre><code>def new_record?
  id.nil?
end
</code></pre>

<p>Before I throw out some fixes, I want to go back to the definition of a <code>stub</code>:</p>

<blockquote>
  <p>Stubs provide canned answers to calls made during the test, usually <strong>not
  responding at all to anything outside what's programmed in for the test</strong>.
  Stubs may also record information about calls, such as an email gateway stub
  that remembers the messages it 'sent', or maybe only how many messages it
  'sent'.</p>
</blockquote>

<p>The FactoryGirl implementation of a stub violates this tenet. Since it has no
idea what you are going to be doing in your test/spec, it simply tries to
prevent database access.</p>

<h2>Fix #1: Do Not Use FactoryGirl to Create Stubs</h2>

<p>If you wish to create / use stubs, use a library dedicated to that task. Since
it seems you are already using RSpec, use it's <code>double</code> feature (and the new verifying
<a href=""https://www.relishapp.com/rspec/rspec-mocks/v/3-0/docs/verifying-doubles/using-an-instance-double""><code>instance_double</code></a>,
<a href=""https://www.relishapp.com/rspec/rspec-mocks/v/3-0/docs/verifying-doubles/using-a-class-double""><code>class_double</code></a>,
as well as <a href=""https://www.relishapp.com/rspec/rspec-mocks/v/3-0/docs/verifying-doubles/using-an-object-double""><code>object_double</code></a>
in RSpec 3). Or
use Mocha, Flexmock, RR, or anything else.</p>

<p>You can even roll your own super simple stub factory (yes there are issues with
this, it's simply an example of an easy way to make an object with canned
responses):</p>

<pre><code>require 'ostruct'
def create_stub(stubbed_attributes)
  OpenStruct.new(stubbed_attributes)
end
</code></pre>

<p>FactoryGirl makes it very easy to create 100 model objects when really you
needed 1. Sure, this is a responsible usage issue; as always great power comes
create responsibility. It's just very easy to overlook deeply nested
associations, which don't really belong in a stub.</p>

<p>Additionally, as you have noticed, FactoryGirl's ""stub"" abstraction is a bit
leaky forcing you to understand both its implementation and your database
persistence layer's internals. Using a stubbing lib should completely free you
from having this dependency.</p>

<p>If you want to keep your model attribute logic in FactoryGirl that's fine.
Use it for that purpose and create the stub elsewhere:</p>

<pre><code>stub_data = attributes_for(:order)
stub_data[:line_items] = Array.new(5){
  double(LineItem, attributes_for(:line_item))
}
order_stub = double(Order, stub_data)
</code></pre>

<p>Yes, you do have to manually setup the associations. Though you only setup
those associations which you need for the test/spec. You don't get the 5 other
ones that you do not need.</p>

<p>This is one thing that having a real stubbing lib helps make explicitly clear.
This is your tests/specs giving you feedback on your design choices. With a
setup like this, a reader of the spec can ask the question: <em>""Why do we need 5
line items?""</em> If it's important to the spec, great it's right there up front
and obvious. Otherwise, it shouldn't be there.</p>

<p>The same thing goes for those a long chain of methods called a single object,
or a chain of methods on subsequent objects, it's probably time to stop. The
<a href=""https://en.wikipedia.org/wiki/Law_of_Demeter"">law of demeter</a> is there to help
you, not hinder you.</p>

<h2>Fix #2: Clear the <code>id</code> field</h2>

<p>This is more of a hack. We know that the default stub sets an <code>id</code>. Thus, we
simply remove it.</p>

<pre><code>after(:stub) do |order, evaluator|
  order.id = nil
  order.line_items = build_stubbed_list(
    :line_item,
    evaluator.line_items_count,
    order: order
  )
end
</code></pre>

<p>We can never have a stub which returns an <code>id</code> AND sets up a <code>has_many</code>
association. The definition of <code>new_record?</code> that FactoryGirl setup completely
prevents this.</p>

<h2>Fix #3: Create your own definition of <code>new_record?</code></h2>

<p>Here, we separate the concept of an <code>id</code> from where the stub is a
<code>new_record?</code>. We push this into a module so we can re-use it in other places.</p>

<pre><code>module SettableNewRecord
  def new_record?
    @new_record
  end

  def new_record=(state)
    @new_record = !!state
  end
end

factory :order do
  ignore do
    line_items_count 1
    new_record true
  end

  after(:stub) do |order, evaluator|
    order.singleton_class.prepend(SettableNewRecord)
    order.new_record = evaluator.new_record
    order.line_items = build_stubbed_list(
      :line_item,
      evaluator.line_items_count,
      order: order
    )
  end
end
</code></pre>

<p>We still have to manually add it for each model.</p>
",Aaron K,Aaron K,1398398634,1398452110,1398452110
http://stackoverflow.com/a/2329425/859858,How do I run tests for all my Django apps only?,3416,Thierry Lam,,1267041257,1397609892,0,https://stackoverflow.com/questions/2329011/how-do-i-run-tests-for-all-my-django-apps-only,"<p>Sadly there is no such command. Django has no way of telling which apps are ""yours"" versus which are someone else's.</p>

<p>What I would suggest is writing a new management command, call it mytest. Then create a new setting MY_INSTALLED_APPS. The mytest command will just run the test for every app in MY_INSTALLED_APPS. You'll want the mytest command to subclass django.core.management.base.AppCommand. django.core.management.call_command will also be helpful.</p>

<p>The only problem with this method is that you will have to constantly maintain the MY_INSTALLED_APPS setting to make sure it is correct. </p>
",Apreche,,1267044727,1267044727,0
http://stackoverflow.com/a/2330297/1093000,Python | change text color in shell,115910,johannix,,1267051597,1368919747,0,https://stackoverflow.com/questions/2330245/python-change-text-color-in-shell,"<p>Use Curses or ANSI escape sequences.  Before you start spouting escape sequences, you should check that stdout is a tty.  You can do this with <code>sys.stdout.isatty()</code>.  Here's a function pulled from a project of mine that prints output in red or green, depending on the status, using ANSI escape sequences:</p>

<pre><code>def hilite(string, status, bold):
    attr = []
    if status:
        # green
        attr.append('32')
    else:
        # red
        attr.append('31')
    if bold:
        attr.append('1')
    return '\x1b[%sm%s\x1b[0m' % (';'.join(attr), string)
</code></pre>
",Dietrich Epp,,1267052121,1267052121,0
http://stackoverflow.com/a/23322820/1031804,OpenCV and Unsharp Masking Like Adobe Photoshop,4195,Maecky,Royi,1352404239,1552925682,1552925682,https://stackoverflow.com/questions/13296645/opencv-and-unsharp-masking-like-adobe-photoshop,"<p>I'm trying to replicate Photoshop's Unsharp Mask as well.
Let's ignore the Threshold for a second.</p>

<p>I will show you how to replicate Photoshop's Unsharp Mask using its Gaussian Blur.</p>

<p>Assuming O is the original image layer.</p>

<p>Create a new layer GB which is a Gaussian Blur applied on O.<br>
Create a new layer which is O - GB (Using Apply Image).<br>
Create a new layer by inverting GB - invGB.<br>
Create a new layer which is O + invGB using Image Apply.<br>
Create a new layer which is inversion of the previous layer, namely inv(O + invGB).<br>
Create a new layer which is O + (O - GB) - inv(O + invGB).  </p>

<p>When you do that in Photoshop you'll get a perfect reproduction of the Unsharp Mask.</p>

<p>If you do the math recalling that inv(L) = 1 - L you will get that the Unsharp Mask is
USM(O) = 3O - 2B.</p>

<p>Yet when I do that directly in MATLAB I don't get Photoshop's results.</p>

<p>Hopefully someone will know the exact math.</p>

<h2>Update</h2>

<p>OK,<br>
I figured it out.<br>
In Photoshop USM(O) = O + (2 * (Amount / 100) * (O - GB))<br>
Where GB is a Gaussian Blurred version of O.</p>

<p>Yet, in order to replicate Photoshop's results you must do the steps above and clip the result of each step into [0, 1] as done in Photoshop.</p>
",Royi,Royi,1398598116,1399490142,1399490142
http://stackoverflow.com/a/2335693/265522,Problem creating a circular buffer in shared memory using Boost,2538,recipriversexclusion,,1267071703,1267115720,0,https://stackoverflow.com/questions/2331613/problem-creating-a-circular-buffer-in-shared-memory-using-boost,"<p>I asked the same question on the boost user forum and the solution that was suggested was to use -DBOOST_CB_DISABLE_DEBUG or -DNDEBUG flags, since <code>circular_buffer</code> relies on raw pointers for debug support.</p>

<p>Any other suggestions?</p>
",recipriversexclusion,,1267115720,1267115720,0
http://stackoverflow.com/a/2336245/119527,Recursive mkdir() system call on Unix,87848,Alex Marshall,Carl Norum,1267119707,1491844287,1267120114,https://stackoverflow.com/questions/2336242/recursive-mkdir-system-call-on-unix,"<p>There is not a system call to do it for you, unfortunately.  I'm guessing that's because there isn't a way to have really well-defined semantics for what should happen in error cases.  Should it leave the directories that have already been created?  Delete them?  What if the deletions fail? And so on...</p>

<p>It is pretty easy to roll your own, however, and a quick google for '<a href=""http://www.google.com/search?hl=en&amp;safe=off&amp;client=safari&amp;rls=en&amp;q=recursive+mkdir&amp;aq=f&amp;aqi=&amp;aql=&amp;oq="" rel=""noreferrer"">recursive mkdir</a>' turned up a number of solutions.  Here's one that was near the top:</p>

<p><a href=""http://nion.modprobe.de/blog/archives/357-Recursive-directory-creation.html"" rel=""noreferrer"">http://nion.modprobe.de/blog/archives/357-Recursive-directory-creation.html</a></p>

<pre><code>static void _mkdir(const char *dir) {
        char tmp[256];
        char *p = NULL;
        size_t len;

        snprintf(tmp, sizeof(tmp),""%s"",dir);
        len = strlen(tmp);
        if(tmp[len - 1] == '/')
                tmp[len - 1] = 0;
        for(p = tmp + 1; *p; p++)
                if(*p == '/') {
                        *p = 0;
                        mkdir(tmp, S_IRWXU);
                        *p = '/';
                }
        mkdir(tmp, S_IRWXU);
}
</code></pre>
",Carl Norum,Basic,1267119733,1385515412,1385515412
http://stackoverflow.com/a/23428433/2459703,Bootstrap and jQueryUI Conflict,35183,lbrahim,creimers,1399033936,1492684179,1400410803,https://stackoverflow.com/questions/23428285/bootstrap-and-jqueryui-conflict,"<p>Ideal solution will be to take QueryUI without tooltip. This will work. In case you don't want to do that please include Bootstrap after JQueryUI. Ensure you have unique components from each (you can custom build both libraries with required components)</p>

<p>Bootstrap has a way to to reset any component like:</p>

<pre><code>var bootstrapButton = $.fn.button.noConflict() // return $.fn.button to previously assigned value
$.fn.bootstrapBtn = bootstrapButton            // give $().bootstrapBtn the Bootstrap functionality
</code></pre>

<p>The above code will work when bootstrap is loaded after JQueryUI</p>

<p>Ref: <a href=""http://getbootstrap.com/javascript/"">http://getbootstrap.com/javascript/</a></p>

<p>Here is relevant code from Bootstrap:</p>

<pre><code>  var old = $.fn.tooltip

  $.fn.tooltip = function (option) {
    ....
  }


  $.fn.tooltip.noConflict = function () {
    $.fn.tooltip = old
    return this
  }
</code></pre>
",closure,closure,1399034418,1399037739,1399037739
http://stackoverflow.com/a/2356420/166700,Tell if Python is in interactive mode,10655,Chinmay Kanchi,Community,1267453257,1477759797,1495542392,https://stackoverflow.com/questions/2356399/tell-if-python-is-in-interactive-mode,"<p><code>__main__.__file__</code> doesn't exist in the interactive interpreter:</p>

<pre><code>import __main__ as main
print hasattr(main, '__file__')
</code></pre>

<p>This also goes for code run via <code>python -c</code>, but not <code>python -m</code>.</p>
",Ignacio Vazquez-Abrams,,1267453526,1267453526,0
http://stackoverflow.com/a/23566951/745557,Confused by python file mode &quot;w+&quot;,236148,holys,,1366872694,1562672201,0,https://stackoverflow.com/questions/16208206/confused-by-python-file-mode-w,"<h2><strong><em>Here is a list of the different modes of opening a file:</em></strong></h2>

<ul>
<li><h1>r</h1>

<blockquote>
  <p>Opens a file for reading only. The file pointer is placed at the beginning of the file. This is the default mode.</p>
</blockquote></li>
<li><h1>rb</h1>

<blockquote>
  <p>Opens a file for reading only in binary format. The file pointer is placed at the beginning of the file. This is the default mode.</p>
</blockquote></li>
<li><h1>r+</h1>

<blockquote>
  <p>Opens a file for both reading and writing. The file pointer will be at the beginning of the file.</p>
</blockquote></li>
<li><h1>rb+</h1>

<blockquote>
  <p>Opens a file for both reading and writing in binary format. The file pointer will be at the beginning of the file.</p>
</blockquote></li>
<li><h1>w</h1>

<blockquote>
  <p>Opens a file for writing only. Overwrites the file if the file exists. If the file does not exist, creates a new file for writing.</p>
</blockquote></li>
<li><h1>wb</h1>

<blockquote>
  <p>Opens a file for writing only in binary format. Overwrites the file if the file exists. If the file does not exist, creates a new file for writing.</p>
</blockquote></li>
<li><h1>w+</h1>

<blockquote>
  <p>Opens a file for both writing and reading. Overwrites the existing file if the file exists. If the file does not exist, creates a new file for reading and writing.</p>
</blockquote></li>
<li><h1>wb+</h1>

<blockquote>
  <p>Opens a file for both writing and reading in binary format. Overwrites the existing file if the file exists. If the file does not exist, creates a new file for reading and writing.</p>
</blockquote></li>
<li><h1>a</h1>

<blockquote>
  <p>Opens a file for appending. The file pointer is at the end of the file if the file exists. That is, the file is in the append mode. If the file does not exist, it creates a new file for writing.</p>
</blockquote></li>
<li><h1>ab</h1>

<blockquote>
  <p>Opens a file for appending in binary format. The file pointer is at the end of the file if the file exists. That is, the file is in the append mode. If the file does not exist, it creates a new file for writing.</p>
</blockquote></li>
<li><h1>a+</h1>

<blockquote>
  <p>Opens a file for both appending and reading. The file pointer is at the end of the file if the file exists. The file opens in the append mode. If the file does not exist, it creates a new file for reading and writing.</p>
</blockquote></li>
<li><h1>ab+</h1>

<blockquote>
  <p>Opens a file for both appending and reading in binary format. The file pointer is at the end of the file if the file exists. The file opens in the append mode. If the file does not exist, it creates a new file for reading and writing.</p>
</blockquote></li>
</ul>
",Nullify,,1399645157,1399645157,0
http://stackoverflow.com/a/23574899/3569421,Does MediaCodec always give 16-bit audio output?,1059,ams,ams,1399502018,1431635232,1399628203,https://stackoverflow.com/questions/23529654/does-mediacodec-always-give-16-bit-audio-output,"<p>Currently the output is always 16 bit in stock Android. If that changes in the future we'll add an additional format key that specifies the format. Note that <code>KEY_CHANNEL_MASK</code> would only tell you which channels are included (e.g. left, right, center, etc), not the sample format.</p>
",marcone,,1399674469,1399674469,0
http://stackoverflow.com/a/23643848/6124862,localization of a package with gettext/intltool?,663,BaRud,Freak,1371467043,1400028077,1371467173,https://stackoverflow.com/questions/17145976/localization-of-a-package-with-gettext-intltool,"<p>You need to use <code>intltool-extract</code> before <code>xgettext</code>, like so:</p>

<pre><code># prepare the *.desktop file to be used with intltool-extract
sed -r -e '/^(Name|Comment)\[/d' \
       -e 's/^(Name|Comment)/_\1/' \
       package.desktop &gt; package.desktop.in

# you are missing this step; it creates a *.h file xgettext can parse
intltool-extract --type=gettext/ini package.desktop.in

# then you do
xgettext --keyword=N_:1 --join-existing --output messages.pot package.desktop.in.h

# combine new strings with existing translations
for POFILE in *.po; do msgmerge --update $POFILE messages.pot ; done

# and finally merge back into the desktop file
intltool-merge --desktop-style . package.desktop.in package.desktop
</code></pre>

<p>Adapted from <a href=""https://github.com/gottcode/xfce4-whiskermenu-plugin/blob/master/po/update-po.sh"" rel=""nofollow"">https://github.com/gottcode/xfce4-whiskermenu-plugin/blob/master/po/update-po.sh</a></p>
",K3---rnc,,1400028077,1400028077,0
http://stackoverflow.com/a/23646049/801870,Read a file in reverse order using python,113574,Nimmy,Nick Volynkin,1266660566,1557582918,1460613348,https://stackoverflow.com/questions/2301789/read-a-file-in-reverse-order-using-python,"<p>A correct, efficient answer written as a generator.</p>

<pre><code>import os

def reverse_readline(filename, buf_size=8192):
    """"""A generator that returns the lines of a file in reverse order""""""
    with open(filename) as fh:
        segment = None
        offset = 0
        fh.seek(0, os.SEEK_END)
        file_size = remaining_size = fh.tell()
        while remaining_size &gt; 0:
            offset = min(file_size, offset + buf_size)
            fh.seek(file_size - offset)
            buffer = fh.read(min(remaining_size, buf_size))
            remaining_size -= buf_size
            lines = buffer.split('\n')
            # The first line of the buffer is probably not a complete line so
            # we'll save it and append it to the last line of the next buffer
            # we read
            if segment is not None:
                # If the previous chunk starts right from the beginning of line
                # do not concat the segment to the last line of new chunk.
                # Instead, yield the segment first 
                if buffer[-1] != '\n':
                    lines[-1] += segment
                else:
                    yield segment
            segment = lines[0]
            for index in range(len(lines) - 1, 0, -1):
                if lines[index]:
                    yield lines[index]
        # Don't yield None if the file was empty
        if segment is not None:
            yield segment
</code></pre>
",srohde,Mark Amery,1400044191,1547829953,1547829953
http://stackoverflow.com/a/236803/661150,How do I iterate over the words of a string?,2112553,Ashwin Nanjappa,Dukeling,1224925101,1558298877,1539459296,https://stackoverflow.com/questions/236129/how-do-i-iterate-over-the-words-of-a-string,"<p>I use this to split string by a delimiter. The first puts the results in a pre-constructed vector, the second returns a new vector.</p>



<pre class=""lang-c++ prettyprint-override""><code>#include &lt;string&gt;
#include &lt;sstream&gt;
#include &lt;vector&gt;
#include &lt;iterator&gt;

template&lt;typename Out&gt;
void split(const std::string &amp;s, char delim, Out result) {
    std::stringstream ss(s);
    std::string item;
    while (std::getline(ss, item, delim)) {
        *(result++) = item;
    }
}

std::vector&lt;std::string&gt; split(const std::string &amp;s, char delim) {
    std::vector&lt;std::string&gt; elems;
    split(s, delim, std::back_inserter(elems));
    return elems;
}
</code></pre>

<hr>

<p>Note that this solution does not skip empty tokens, so the following will find 4 items, one of which is empty:</p>

<pre class=""lang-c++ prettyprint-override""><code>std::vector&lt;std::string&gt; x = split(""one:two::three"", ':');
</code></pre>
",Evan Teran,Robert Harvey,1224958887,1519860774,1519860774
http://stackoverflow.com/a/23705687/1106202,Python UTC datetime object&#39;s ISO format doesn&#39;t include Z (Zulu or Zero offset),63627,Murali Mopuru,Cur,1383039726,1561616494,1492276046,https://stackoverflow.com/questions/19654578/python-utc-datetime-objects-iso-format-doesnt-include-z-zulu-or-zero-offset,"<p>Python <code>datetime</code> objects don't have time zone info by default, and without it, Python actually violates the ISO 8601 specification (<a href=""http://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators"" rel=""noreferrer"">if no time zone info is given, assumed to be local time</a>). You can use the <a href=""https://pypi.python.org/pypi/pytz/"" rel=""noreferrer"">pytz package</a> to get some default time zones, or directly subclass <code>tzinfo</code> yourself:</p>

<pre><code>from datetime import datetime, tzinfo, timedelta
class simple_utc(tzinfo):
    def tzname(self,**kwargs):
        return ""UTC""
    def utcoffset(self, dt):
        return timedelta(0)
</code></pre>

<p>Then you can manually add the time zone info to <code>utcnow()</code>:</p>

<pre><code>&gt;&gt;&gt; datetime.utcnow().replace(tzinfo=simple_utc()).isoformat()
'2014-05-16T22:51:53.015001+00:00'
</code></pre>

<p>Note that this DOES conform to the ISO 8601 format, which allows for either <code>Z</code> or <code>+00:00</code> as the suffix for UTC. Note that the latter actually conforms to the standard better, with how time zones are represented in general (UTC is a special case.)</p>
",stiv,All  Vy,1400280878,1502302114,1502302114
http://stackoverflow.com/a/23711638/3235496,How to chain multiple fma operations together for performance?,588,user2485710,user2485710,1400323427,1458126439,1400323797,https://stackoverflow.com/questions/23710356/how-to-chain-multiple-fma-operations-together-for-performance,"<p>Recently, in Build 2014 Eric Brumer gave a very nice talk on the topic (<a href=""http://channel9.msdn.com/Events/Build/2014/4-587"" rel=""noreferrer"">see here</a>).
The bottom line of talk was that </p>

<blockquote>
  <p><strong>Using Fused Multiply Accumulate (aka FMA) everywhere hurts performance.</strong></p>
</blockquote>

<p>In Intel CPUs a FMA instruction costs 5 cycles. Instead doing a multiplication (5 cycles) and an addition (3 cycles) costs 8 cycles. Using FMA your are getting two operations in the prize of one (see picture below).</p>

<p><img src=""https://i.stack.imgur.com/B47x5.png"" alt=""enter image description here""></p>

<p>However, FMA seems not to be the holly grail of instructions. As you can see in the picture below FMA can in certain citations hurt the performance.</p>

<p><img src=""https://i.stack.imgur.com/LVzzn.png"" alt=""enter image description here""></p>

<p>In the same fashion, your case <code>fma(triplet1) + fma(triplet2) + fma(triplet 3)</code> costs 21 cycles whereas if you were to do the same operations with out FMA would cost 30 cycles. That's a 30% gain in performance. </p>

<p>Using FMA in your code would demand using <a href=""http://msdn.microsoft.com/en-us/library/26td21ds.aspx"" rel=""noreferrer"">compiler intrinsics</a>. In my humble opinion though, FMA etc. is not something you should be worried about, unless you are a C++ compiler programmer. If your are not, let the compiler optimization take care of these technicalities. Generally, under such kind of concerns lies the root of all evil (i.e., premature optimization), to paraphrase one of the great ones (i.e., Donald Knuth).</p>
",101010,,1400331518,1400331518,0
http://stackoverflow.com/a/23728630/233437,Random string generation with upper case letters and digits,772988,Hellnar,martineau,1266063838,1561553168,1553796636,https://stackoverflow.com/questions/2257441/random-string-generation-with-upper-case-letters-and-digits,"<p>This Stack Overflow quesion is the current top Google result for ""random string Python"". The current top answer is:</p>

<pre><code>''.join(random.choice(string.ascii_uppercase + string.digits) for _ in range(N))
</code></pre>

<p>This is an excellent method, but the <a href=""http://en.wikipedia.org/wiki/Pseudorandom_number_generator"" rel=""nofollow noreferrer"">PRNG</a> in random is not cryptographically secure. I assume many people researching this question will want to generate random strings for encryption or passwords. You can do this securely by making a small change in the above code:</p>

<pre><code>''.join(random.SystemRandom().choice(string.ascii_uppercase + string.digits) for _ in range(N))
</code></pre>

<p>Using <code>random.SystemRandom()</code> instead of just random uses /dev/urandom on *nix machines and <code>CryptGenRandom()</code> in Windows.  These are cryptographically secure PRNGs. Using <code>random.choice</code> instead of <code>random.SystemRandom().choice</code> in an application that requires a secure PRNG could be potentially devastating, and given the popularity of this question, I bet that mistake has been made many times already.</p>

<p>If you're using python3.6 or above, you can use the new <a href=""https://docs.python.org/3/library/secrets.html"" rel=""nofollow noreferrer"">secrets</a> module as mentioned in <a href=""https://stackoverflow.com/a/41464693/7851470"">MSeifert's answer</a>:</p>

<pre><code>''.join(secrets.choice(string.ascii_uppercase + string.digits) for _ in range(N))
</code></pre>

<p>The module docs also discuss convenient ways to <a href=""https://docs.python.org/3/library/secrets.html#generating-tokens"" rel=""nofollow noreferrer"">generate secure tokens</a> and <a href=""https://docs.python.org/3/library/secrets.html#recipes-and-best-practices"" rel=""nofollow noreferrer"">best practices</a>.</p>
",Randy Marsh,Georgy,1400463716,1561553168,1561553168
http://stackoverflow.com/a/23742555/2843583,C++: How to pass parameters to custom exceptions?,5993,thedarkside ofthemoon,thedarkside ofthemoon,1400515761,1400517781,1400516367,https://stackoverflow.com/questions/23742448/c-how-to-pass-parameters-to-custom-exceptions,"<p>You have correctly passed the parameters to the constructor of your exception class.</p>

<p><strong>But</strong>, the function <code>MyEmptyImageException::what()</code> is incorrect because it returns <code>msg.c_str()</code>, where <code>msg</code> is allocated on the stack. When the function <code>what()</code> returns, them <code>msg</code> object is destroyed, and the <code>char*</code> pointer points to the buffer managed by a deallocated object. To fix that, you can construct the message in the constructor of <code>MyEmptyImageException</code> itself:</p>

<pre><code>class MyEmptyImageException : public MyIOException
{
  std::string m_msg;
public:

  MyEmptyImageException(const std::string&amp; bn, const std::string&amp; on)
    : m_msg(std::string(""Empty Image : "") + bn + on)
  {}

  virtual const char* what() const throw()
  {
    return m_msg.c_str();
  }
};
</code></pre>
",lrineau,lrineau,1400516073,1400517781,1400517781
http://stackoverflow.com/a/23768545/654755,Admin Models do not recognize inherited fields,5080,Antoine Liz&#233;e,Antoine Liz&#233;e,1395910539,1400614949,1398448763,https://stackoverflow.com/questions/22682516/admin-models-do-not-recognize-inherited-fields,"<p>Your problem is related to the answer:
<a href=""https://stackoverflow.com/a/3594927/3006165"">https://stackoverflow.com/a/3594927/3006165</a></p>

<blockquote>
  <p>The error is due to date having auto_now_add=True (or auto_now=True).
  As the value is automatic, it's not editable, so it's not in the form</p>
</blockquote>

<p>According to the documentantion:</p>

<blockquote>
  <p>The fields option ... may contain callables only if they are listed in
  readonly_fields.</p>
</blockquote>
",RMotitsuki,Community,1400614949,1400614949,1495541806
http://stackoverflow.com/a/23785326/2942522,Sampling uniformly distributed random points inside a spherical volume,34742,Tim McJilton,Peter O.,1300896711,1545554292,1545554292,https://stackoverflow.com/questions/5408276/sampling-uniformly-distributed-random-points-inside-a-spherical-volume,"<p>There is a brilliant way to generate uniformly points on sphere in n-dimensional space, and you have pointed this in your question (I mean MATLAB code). </p>

<p>Why does it work? The answer is: let us look at the probability density of n-dimensional normal distribution. It is equal (up to constant)</p>

<p>exp(-x_1*x_1/2) *exp(-x_2*x_2/2)... = exp(-r*r/2),
so it doesn't depend on the direction, only on the distance! This means, after you normalize vector, the resulting distribution's density will be constant across the sphere.</p>

<p>This method should be definitely preferred due to it's simplicity, generality and efficiency (and beauty).
The code, which generates 1000 events <strong>on</strong> the sphere in three dimensions:</p>

<pre><code>size = 1000
n = 3 # or any positive integer
x = numpy.random.normal(size=(size, n)) 
x /= numpy.linalg.norm(x, axis=1)[:, numpy.newaxis]
</code></pre>

<p>BTW, the good link to look at: <a href=""http://www-alg.ist.hokudai.ac.jp/~jan/randsphere.pdf"">http://www-alg.ist.hokudai.ac.jp/~jan/randsphere.pdf</a></p>

<p>As for having uniform distribution <strong>within</strong> a sphere, instead of normalizing a vector, you should multiply vercor by some f(r): f(r)*r is distributed with density proportional to r^n on [0,1], which was done in the code you posted</p>
",Alleo,Alleo,1400680462,1400762812,1400762812
http://stackoverflow.com/a/2381862/236331,How can I trigger a JavaScript event click,455348,user171523,DVK,1267725778,1530366669,1267726642,https://stackoverflow.com/questions/2381572/how-can-i-trigger-a-javascript-event-click,"<p>Here is what I use: <a href=""http://jsfiddle.net/mendesjuan/rHMCy/4/"" rel=""noreferrer"">http://jsfiddle.net/mendesjuan/rHMCy/4/</a></p>

<p>Updated to work with IE9+</p>

<pre><code>/**
 * Fire an event handler to the specified node. Event handlers can detect that the event was fired programatically
 * by testing for a 'synthetic=true' property on the event object
 * @param {HTMLNode} node The node to fire the event handler on.
 * @param {String} eventName The name of the event without the ""on"" (e.g., ""focus"")
 */
function fireEvent(node, eventName) {
    // Make sure we use the ownerDocument from the provided node to avoid cross-window problems
    var doc;
    if (node.ownerDocument) {
        doc = node.ownerDocument;
    } else if (node.nodeType == 9){
        // the node may be the document itself, nodeType 9 = DOCUMENT_NODE
        doc = node;
    } else {
        throw new Error(""Invalid node passed to fireEvent: "" + node.id);
    }

     if (node.dispatchEvent) {
        // Gecko-style approach (now the standard) takes more work
        var eventClass = """";

        // Different events have different event classes.
        // If this switch statement can't map an eventName to an eventClass,
        // the event firing is going to fail.
        switch (eventName) {
            case ""click"": // Dispatching of 'click' appears to not work correctly in Safari. Use 'mousedown' or 'mouseup' instead.
            case ""mousedown"":
            case ""mouseup"":
                eventClass = ""MouseEvents"";
                break;

            case ""focus"":
            case ""change"":
            case ""blur"":
            case ""select"":
                eventClass = ""HTMLEvents"";
                break;

            default:
                throw ""fireEvent: Couldn't find an event class for event '"" + eventName + ""'."";
                break;
        }
        var event = doc.createEvent(eventClass);
        event.initEvent(eventName, true, true); // All events created as bubbling and cancelable.

        event.synthetic = true; // allow detection of synthetic events
        // The second parameter says go ahead with the default action
        node.dispatchEvent(event, true);
    } else  if (node.fireEvent) {
        // IE-old school style, you can drop this if you don't need to support IE8 and lower
        var event = doc.createEventObject();
        event.synthetic = true; // allow detection of synthetic events
        node.fireEvent(""on"" + eventName, event);
    }
};
</code></pre>

<p>Note that calling <code>fireEvent(inputField, 'change');</code> does not mean it will actually change the input field. The typical use case for firing a change event is when you set a field programmatically and you want event handlers to be called since calling <code>input.value=""Something""</code> won't trigger a change event.</p>
",Juan Mendes,Juan Mendes,1267728395,1495628922,1495628922
http://stackoverflow.com/a/23860042/298171,"hash function for a vector of pair&lt;int, int&gt;",1827,suizokukan,Community,1401051063,1438065099,1495535194,https://stackoverflow.com/questions/23859844/hash-function-for-a-vector-of-pairint-int,"<p>All you need is a function to ""hash in"" an integer. You can steal such a function from boost:</p>

<pre><code>template &lt;class T&gt;
inline void hash_combine(std::size_t&amp; seed, const T&amp; v)
{
    std::hash&lt;T&gt; hasher;
    seed ^= std::hash&lt;T&gt;(v) + 0x9e3779b9 + (seed&lt;&lt;6) + (seed&gt;&gt;2);
}
</code></pre>

<p>Now your function is trivial:</p>

<pre><code>struct ObjectHasher
{
  std::size_t operator()(const Object&amp; k) const
  {
    std::size_t hash = 0;
    for (auto i = k.vec.begin(); i != k.vec.end(); ++i)
    {
      hash_combine(hash, i-&gt;first);
      hash_combine(hash, i-&gt;second);
    }
    return hash;
  }
};
</code></pre>
",David Schwartz,,1401052683,1401052683,0
http://stackoverflow.com/a/23860613/569101,How to setup table prefix in symfony2,14690,canni,Benjamin,1316626397,1536930714,1346232103,https://stackoverflow.com/questions/7504073/how-to-setup-table-prefix-in-symfony2,"<h1>Alternate answer</h1>

<p>This is an update taking into account the newer features available in Doctrine2.</p>

<h2><a href=""http://doctrine-orm.readthedocs.org/en/latest/reference/namingstrategy.html"" rel=""nofollow noreferrer"">Doctrine2 naming strategy</a></h2>

<p>Doctrine2 uses <code>NamingStrategy</code> classes which implement the conversion from a class name to a table name or from a property name to a column name.</p>

<p>The <code>DefaultNamingStrategy</code> just finds the ""short class name"" (without its namespace) in order to deduce the table name.</p>

<p>The <code>UnderscoreNamingStrategy</code> does the same thing but it also lowercases and ""underscorifies"" the ""short class name"".</p>

<p>Your <code>CustomNamingStrategy</code> class could extend either one of the above (as you see fit) and override the <code>classToTableName</code> and <code>joinTableName</code> methods to allow you to specify how the table name should be constructed (with the use of a prefix).</p>

<p>For example my <code>CustomNamingStrategy</code> class extends the <code>UnderscoreNamingStrategy</code> and finds the bundle name based on the namespacing conventions and uses that as a prefix for all tables.</p>

<hr>

<h2><a href=""https://stackoverflow.com/questions/12702657/how-to-configure-naming-strategy-in-doctrine-2"">Symfony2 naming strategy</a></h2>

<p>Using the above in Symfony2 requires declaring your <code>CustomNamingStragery</code> class as a service and then referencing it in your config:</p>

<pre><code>doctrine:
    # ...

    orm:
        # ...
        #naming_strategy: doctrine.orm.naming_strategy.underscore
        naming_strategy: my_bundle.naming_strategy.prefixed_naming_strategy
</code></pre>

<hr>

<h2>Pros and cons</h2>

<p>Pros:</p>

<ul>
<li>running one piece of code to do one single task -- your naming strategy class is called directly and its output is used;</li>
<li>clarity of structure -- you're not using events to run code which alter things that have already been built by other code;</li>
<li>better access to all aspects of the naming conventions;</li>
</ul>

<p>Cons:</p>

<ul>
<li>zero access to mapping metadata -- you only have the context that was given to you as parameters (this can also be a good thing because it forces convention rather than exception);</li>
<li>needs doctrine 2.3 (not that much of a con now, it might have been in 2011 when this question was asked :-));</li>
</ul>
",Mihai Stancu,Community,1401057366,1401117408,1495540403
http://stackoverflow.com/a/2390626/1392778,__attribute__((constructor)) equivalent in VC?,11854,not so long,Cur,1247307578,1554698715,1554698715,https://stackoverflow.com/questions/1113409/attribute-constructor-equivalent-in-vc,"<p>Below C code demonstrates how to define a void(void) function to be called at program/library load time, before main executes.</p>

<p>For MSVC, this places a pointer to the function in the user initializer section (.CRT$XCU), basically the same thing the compiler does for the constructor calls for static C++ objects. For GCC, uses a constructor attribute.</p>

<pre><code>    // Initializer/finalizer sample for MSVC and GCC/Clang.
    // 2010-2016 Joe Lowe. Released into the public domain.
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#ifdef __cplusplus
    #define INITIALIZER(f) \
        static void f(void); \
        struct f##_t_ { f##_t_(void) { f(); } }; static f##_t_ f##_; \
        static void f(void)
#elif defined(_MSC_VER)
    #pragma section("".CRT$XCU"",read)
    #define INITIALIZER2_(f,p) \
        static void f(void); \
        __declspec(allocate("".CRT$XCU"")) void (*f##_)(void) = f; \
        __pragma(comment(linker,""/include:"" p #f ""_"")) \
        static void f(void)
    #ifdef _WIN64
        #define INITIALIZER(f) INITIALIZER2_(f,"""")
    #else
        #define INITIALIZER(f) INITIALIZER2_(f,""_"")
    #endif
#else
    #define INITIALIZER(f) \
        static void f(void) __attribute__((constructor)); \
        static void f(void)
#endif

static void finalize(void)
{
    printf( ""finalize\n"");
}

INITIALIZER( initialize)
{
    printf( ""initialize\n"");
    atexit( finalize);
}

int main( int argc, char** argv)
{
    printf( ""main\n"");
    return 0;
}
</code></pre>
",Joe,Joe,1267831227,1454198054,1454198054
http://stackoverflow.com/a/2390626/671658,__attribute__((constructor)) equivalent in VC?,11854,not so long,Cur,1247307578,1554698715,1554698715,https://stackoverflow.com/questions/1113409/attribute-constructor-equivalent-in-vc,"<p>Below C code demonstrates how to define a void(void) function to be called at program/library load time, before main executes.</p>

<p>For MSVC, this places a pointer to the function in the user initializer section (.CRT$XCU), basically the same thing the compiler does for the constructor calls for static C++ objects. For GCC, uses a constructor attribute.</p>

<pre><code>    // Initializer/finalizer sample for MSVC and GCC/Clang.
    // 2010-2016 Joe Lowe. Released into the public domain.
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#ifdef __cplusplus
    #define INITIALIZER(f) \
        static void f(void); \
        struct f##_t_ { f##_t_(void) { f(); } }; static f##_t_ f##_; \
        static void f(void)
#elif defined(_MSC_VER)
    #pragma section("".CRT$XCU"",read)
    #define INITIALIZER2_(f,p) \
        static void f(void); \
        __declspec(allocate("".CRT$XCU"")) void (*f##_)(void) = f; \
        __pragma(comment(linker,""/include:"" p #f ""_"")) \
        static void f(void)
    #ifdef _WIN64
        #define INITIALIZER(f) INITIALIZER2_(f,"""")
    #else
        #define INITIALIZER(f) INITIALIZER2_(f,""_"")
    #endif
#else
    #define INITIALIZER(f) \
        static void f(void) __attribute__((constructor)); \
        static void f(void)
#endif

static void finalize(void)
{
    printf( ""finalize\n"");
}

INITIALIZER( initialize)
{
    printf( ""initialize\n"");
    atexit( finalize);
}

int main( int argc, char** argv)
{
    printf( ""main\n"");
    return 0;
}
</code></pre>
",Joe,Joe,1267831227,1454198054,1454198054
http://stackoverflow.com/a/23931217/1361529,"AngularJS: in a input how to show &#39;$50,000.00&#39; when no focused but show &#39;50000&#39; when focused",3860,Zach,,1401356223,1510056580,0,https://stackoverflow.com/questions/23930210/angularjs-in-a-input-how-to-show-50-000-00-when-no-focused-but-show-50000,"<p>You're looking for the ngModel.$parsers and ngModel.$formatters.</p>

<p>I've put together a simple demo:</p>

<p><a href=""http://jsfiddle.net/BuriB/nD2tk/"" rel=""nofollow noreferrer"">http://jsfiddle.net/BuriB/nD2tk/</a></p>

<pre><code>  angular.module('app', [])
      .controller('TestCntrl', function TestCntrl ($scope) {
        $scope.value = 50000;
      })
      .directive('numberFormatter', ['$filter', function ($filter) {
        var decimalCases = 2,
            whatToSet = function (str) {
              /**
               * TODO:
               * don't allow any non digits character, except decimal seperator character
               */
              return str ? Number(str) : '';
            },
            whatToShow = function (num) {
              return '$' + $filter('number')(num, decimalCases);
            };

        return {
          restrict: 'A',
          require: 'ngModel',
          link: function (scope, element, attr, ngModel) {
            ngModel.$parsers.push(whatToSet);
            ngModel.$formatters.push(whatToShow);

            element.bind('blur', function() {
              element.val(whatToShow(ngModel.$modelValue))
            });
            element.bind('focus', function () {
              element.val(ngModel.$modelValue);
            });
          }
        };
      }]);
</code></pre>

<p>See, also, this <strong><a href=""http://jsfiddle.net/nD2tk/48/"" rel=""nofollow noreferrer"">Working Demo by @Eric Hannum</a></strong>.</p>
",BuriB,vijay,1401359353,1484489111,1484489111
http://stackoverflow.com/a/23966581/240995,How do I filter sensitive Django POST parameters out of Sentry error reports?,1505,Steven D.,,1400773998,1401512877,0,https://stackoverflow.com/questions/23811717/how-do-i-filter-sensitive-django-post-parameters-out-of-sentry-error-reports,"<p>Turns out that this stemmed from a bug in Django itself!</p>

<p>If you haven't changed <a href=""https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-DEFAULT_EXCEPTION_REPORTER_FILTER"" rel=""nofollow""><code>DEFAULT_EXCEPTION_REPORTER_FILTER</code></a> in your <code>settings</code> file, you get the default filter of <a href=""https://github.com/django/django/blob/813ded775d2491bc12b55b8dbbb4a2e591e9dd15/django/views/debug.py#L119"" rel=""nofollow""><code>SafeExceptionReporterFilter</code></a>.</p>

<p>If you've used the <a href=""https://docs.djangoproject.com/en/dev/howto/error-reporting/#django.views.decorators.debug.sensitive_post_parameters"" rel=""nofollow""><code>sensitive_post_parameters</code></a> decorator, this will result in your calling <code>SafeExceptionReporterFilter</code>'s <a href=""https://github.com/django/django/blob/813ded775d2491bc12b55b8dbbb4a2e591e9dd15/django/views/debug.py#L148"" rel=""nofollow""><code>get_post_parameters</code></a> method:</p>

<pre><code> def get_post_parameters(self, request):
        """"""
        Replaces the values of POST parameters marked as sensitive with
        stars (*********).
        """"""
        if request is None:
            return {}
        else:
            sensitive_post_parameters = getattr(request, 'sensitive_post_parameters', [])
            if self.is_active(request) and sensitive_post_parameters:
                cleansed = request.POST.copy()
                if sensitive_post_parameters == '__ALL__':
                    # Cleanse all parameters.
                    for k, v in cleansed.items():
                        cleansed[k] = CLEANSED_SUBSTITUTE
                    return cleansed
                else:
                    # Cleanse only the specified parameters.
                    for param in sensitive_post_parameters:
                        if param in cleansed:
                            cleansed[param] = CLEANSED_SUBSTITUTE
                    return cleansed
            else:
                return request.POST
</code></pre>

<p>The problem with the above is that while it <em>will</em> correctly return a <code>QuerySet</code> with the sensitive <code>POST</code> parameters set to <code>CLEANSED_SUBSTITUTE</code> (<code>'********************'</code>)...<strong>it won't in any way alter <code>request.body</code>.</strong></p>

<p>This is a problem when working with Raven/Sentry for Django, because it turns out that the <a href=""https://github.com/getsentry/raven-python/blob/4dbe43be6d0a37645b2b9f64f86d4bdc67692e81/raven/contrib/django/client.py#L52"" rel=""nofollow""><code>get_data_from_request</code></a> method of Raven's <code>DjangoClient</code> first attempts to get the request's <code>POST</code> parameters from <code>request.body</code>:</p>

<pre><code>def get_data_from_request(self, request):

  [snip]

    if request.method != 'GET':
        try:
            data = request.body
        except Exception:
            try:
                data = request.raw_post_data
            except Exception:
                # assume we had a partial read.
                try:
                    data = request.POST or '&lt;unavailable&gt;'
                except Exception:
                    data = '&lt;unavailable&gt;'
    else:
        data = None

 [snip]
</code></pre>

<p>The fastest fix turned out to just involve subclassing <code>DjangoClient</code> and manually replacing its output with the cleansed <code>QuerySet</code> produced by <code>SafeExceptionReporterFilter</code>:</p>

<pre><code>from django.views.debug import SafeExceptionReporterFilter
from raven.contrib.django.client import DjangoClient


class SafeDjangoClient(DjangoClient):

  def get_data_from_request(self, request):
    request.POST = SafeExceptionReporterFilter().get_post_parameters(request)
    result = super(SafeDjangoClient, self).get_data_from_request(request)
    result['sentry.interfaces.Http']['data'] = request.POST
    return result
</code></pre>
",Steven D.,,1401512877,1401512877,0
http://stackoverflow.com/a/23973965/915811,Close one div when the other opens - Bootstrap,12422,150GritSandpaper,150GritSandpaper,1401550792,1441712473,1401563502,https://stackoverflow.com/questions/23971819/close-one-div-when-the-other-opens-bootstrap,"<p><br>
As I know you can't achieve what you want with Bootstrap data attributes.</p>

<p>So you can just add custom data attribute and add some custom javascript that will handle it:</p>

<p>I used the following data-attribute: <code>data-collapse-group</code>
and the following javascript:</p>

<pre><code>$(""[data-collapse-group='myDivs']"").click(function () {
    var $this = $(this);
    $(""[data-collapse-group='myDivs']:not([data-target='"" + $this.data(""target"") + ""'])"").each(function () {
        $($(this).data(""target"")).removeClass(""in"").addClass('collapse');
    });
});
</code></pre>

<p><a href=""http://jsfiddle.net/Nicolai8/PX3h9/1/"" rel=""noreferrer""><strong>Working example in jsFiddle based on your page.</strong></a></p>
",Nicolai,,1401564403,1401564403,0
http://stackoverflow.com/a/2398759/2107024,Using PHP substr() and strip_tags() while retaining formatting and without breaking HTML,26935,Peter Craig,Community,1268010103,1554909357,1495542891,https://stackoverflow.com/questions/2398725/using-php-substr-and-strip-tags-while-retaining-formatting-and-without-break,"<p>I'm not claiming to have invented this, but there is a very complete <a href=""http://api.cakephp.org/view_source/text-helper/#line-163"" rel=""noreferrer""><code>Text::truncate()</code> method in CakePHP</a> which does what you want:</p>

<pre><code>function truncate($text, $length = 100, $ending = '...', $exact = true, $considerHtml = false) {
    if (is_array($ending)) {
        extract($ending);
    }
    if ($considerHtml) {
        if (mb_strlen(preg_replace('/&lt;.*?&gt;/', '', $text)) &lt;= $length) {
            return $text;
        }
        $totalLength = mb_strlen($ending);
        $openTags = array();
        $truncate = '';
        preg_match_all('/(&lt;\/?([\w+]+)[^&gt;]*&gt;)?([^&lt;&gt;]*)/', $text, $tags, PREG_SET_ORDER);
        foreach ($tags as $tag) {
            if (!preg_match('/img|br|input|hr|area|base|basefont|col|frame|isindex|link|meta|param/s', $tag[2])) {
                if (preg_match('/&lt;[\w]+[^&gt;]*&gt;/s', $tag[0])) {
                    array_unshift($openTags, $tag[2]);
                } else if (preg_match('/&lt;\/([\w]+)[^&gt;]*&gt;/s', $tag[0], $closeTag)) {
                    $pos = array_search($closeTag[1], $openTags);
                    if ($pos !== false) {
                        array_splice($openTags, $pos, 1);
                    }
                }
            }
            $truncate .= $tag[1];

            $contentLength = mb_strlen(preg_replace('/&amp;[0-9a-z]{2,8};|&amp;#[0-9]{1,7};|&amp;#x[0-9a-f]{1,6};/i', ' ', $tag[3]));
            if ($contentLength + $totalLength &gt; $length) {
                $left = $length - $totalLength;
                $entitiesLength = 0;
                if (preg_match_all('/&amp;[0-9a-z]{2,8};|&amp;#[0-9]{1,7};|&amp;#x[0-9a-f]{1,6};/i', $tag[3], $entities, PREG_OFFSET_CAPTURE)) {
                    foreach ($entities[0] as $entity) {
                        if ($entity[1] + 1 - $entitiesLength &lt;= $left) {
                            $left--;
                            $entitiesLength += mb_strlen($entity[0]);
                        } else {
                            break;
                        }
                    }
                }

                $truncate .= mb_substr($tag[3], 0 , $left + $entitiesLength);
                break;
            } else {
                $truncate .= $tag[3];
                $totalLength += $contentLength;
            }
            if ($totalLength &gt;= $length) {
                break;
            }
        }

    } else {
        if (mb_strlen($text) &lt;= $length) {
            return $text;
        } else {
            $truncate = mb_substr($text, 0, $length - strlen($ending));
        }
    }
    if (!$exact) {
        $spacepos = mb_strrpos($truncate, ' ');
        if (isset($spacepos)) {
            if ($considerHtml) {
                $bits = mb_substr($truncate, $spacepos);
                preg_match_all('/&lt;\/([a-z]+)&gt;/', $bits, $droppedTags, PREG_SET_ORDER);
                if (!empty($droppedTags)) {
                    foreach ($droppedTags as $closingTag) {
                        if (!in_array($closingTag[1], $openTags)) {
                            array_unshift($openTags, $closingTag[1]);
                        }
                    }
                }
            }
            $truncate = mb_substr($truncate, 0, $spacepos);
        }
    }

    $truncate .= $ending;

    if ($considerHtml) {
        foreach ($openTags as $tag) {
            $truncate .= '&lt;/'.$tag.'&gt;';
        }
    }

    return $truncate;
}
</code></pre>
",deceze,Dunhamzzz,1268010844,1320660874,1320660874
http://stackoverflow.com/a/24000056/149111,Implementing strnstr,12959,Jimmay,,1401728826,1522672775,0,https://stackoverflow.com/questions/23999797/implementing-strnstr,"<p>How about:</p>

<pre><code>char *strnstr(char *haystack, char *needle, size_t len) {
    if (len == 0) return haystack; /* degenerate edge case */
    while (haystack = strchr(haystack, needle[0])) {
        if (!strncmp(haystack, needle, len)) return haystack;
        haystack++; }
    return 0;
}
</code></pre>

<p>If you want <code>haystack</code> to not be null terminated, you'll need two length args:</p>

<pre><code>char *memmem(char *haystack, size_t hlen, char *needle, size_t nlen) {
    if (nlen == 0) return haystack; /* degenerate edge case */
    if (hlen &lt; nlen) return 0; /* another degenerate edge case */
    char *hlimit = haystack + hlen - nlen + 1;
    while (haystack = memchr(haystack, needle[0], hlimit-haystack)) {
        if (!memcmp(haystack, needle, nlen)) return haystack;
        haystack++; }
    return 0;
}
</code></pre>

<p>which is available in GNU libc, though older versions are broken.</p>
",Chris Dodd,Chris Dodd,1401729881,1413870901,1413870901
http://stackoverflow.com/a/24012023/194609,Convert a JSON String to a HashMap,260965,Vikas Gupta,Dayan,1392188102,1546204384,1530534981,https://stackoverflow.com/questions/21720759/convert-a-json-string-to-a-hashmap,"<p>I wrote this code some days back by recursion.</p>

<pre><code>public static Map&lt;String, Object&gt; jsonToMap(JSONObject json) throws JSONException {
    Map&lt;String, Object&gt; retMap = new HashMap&lt;String, Object&gt;();

    if(json != JSONObject.NULL) {
        retMap = toMap(json);
    }
    return retMap;
}

public static Map&lt;String, Object&gt; toMap(JSONObject object) throws JSONException {
    Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();

    Iterator&lt;String&gt; keysItr = object.keys();
    while(keysItr.hasNext()) {
        String key = keysItr.next();
        Object value = object.get(key);

        if(value instanceof JSONArray) {
            value = toList((JSONArray) value);
        }

        else if(value instanceof JSONObject) {
            value = toMap((JSONObject) value);
        }
        map.put(key, value);
    }
    return map;
}

public static List&lt;Object&gt; toList(JSONArray array) throws JSONException {
    List&lt;Object&gt; list = new ArrayList&lt;Object&gt;();
    for(int i = 0; i &lt; array.length(); i++) {
        Object value = array.get(i);
        if(value instanceof JSONArray) {
            value = toList((JSONArray) value);
        }

        else if(value instanceof JSONObject) {
            value = toMap((JSONObject) value);
        }
        list.add(value);
    }
    return list;
}
</code></pre>
",Vikas Gupta,Vikas Gupta,1401788948,1428206903,1428206903
http://stackoverflow.com/a/24019586/403742,Can&#39;t perform TCP-handshake through a NAT between two NICs with SO_BINDTODEVICE,545,CaptainCap,CaptainCap,1401786561,1401810735,1401805724,https://stackoverflow.com/questions/24011205/cant-perform-tcp-handshake-through-a-nat-between-two-nics-with-so-bindtodevice,"<p>After browsing the kernel sources and adding a lot of KERNEL_WARNING we found where it came from: the linux kernel is configured on certain mainstream distributions (Ubuntu...) to act as a router and drop packets where the source address is suspect in order to prevent spoofing (search ""rp_filter"" on <a href=""https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt"" rel=""nofollow"">https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt</a> and <a href=""http://www.ietf.org/rfc/rfc3704.txt"" rel=""nofollow"">RFC3704</a>).</p>

<p>To allow such traffic you have to set some variables on your machine (as root):</p>

<pre><code>sysctl -w net.ipv4.conf.all.accept_local=1
sysctl -w net.ipv4.conf.all.rp_filter=0
sysctl -w net.ipv4.conf.your_nic.rp_filter=0
</code></pre>

<p>where <code>your_nic</code> is the network interface receiving the packet. Beware to change both <code>net.ipv4.conf.all.rp_filter</code> and <code>net.ipv4.conf.your_nic.rp_filter</code>, it will not work otherwise (the kernel defaults to the most restrictive setting).</p>
",CaptainCap,,1401810735,1401810735,0
http://stackoverflow.com/a/24023466/459349,Basic arithmetic on two byte arrays in Java without BigInteger,1505,mahler,,1401817105,1401823995,0,https://stackoverflow.com/questions/24021582/basic-arithmetic-on-two-byte-arrays-in-java-without-biginteger,"<p>I dont think that there is much benefit from working on <code>byte[]</code> directly rather than using <code>BigInteger</code> but for satisfying your curiosity here is an example of how to add two byte arrays of size <code>32</code>:</p>

<pre><code>public static byte[] add(byte[] data1, byte[] data2) {
  if(data1.length!=32 || data2.length!=32)
    throw new IllegalArgumentException();
  byte[] result=new byte[32];
  for(int i=31, overflow=0; i&gt;=0; i--) {
    int v = (data1[i]&amp;0xff)+(data2[i]&amp;0xff)+overflow;
    result[i]=(byte)v;
    overflow=v&gt;&gt;&gt;8;
  }
  return result;
}
</code></pre>

<p>Note that it is possible to use one of the input arrays as target for the result. However, dont be surprised if such a reusing has even a negative impact on performance. On todays systems there are no simple answers to how to speedup anymore</p>
",Holger,,1401823995,1401823995,0
http://stackoverflow.com/a/24068396/1119818,How to convert a lambda to an std::function using templates,27264,retep998,retep998,1352800769,1549351253,1352802164,https://stackoverflow.com/questions/13358672/how-to-convert-a-lambda-to-an-stdfunction-using-templates,"<p>You can use a <strong>dedicated/retrospective cast</strong>. Once you have a tool like this</p>

<pre><code>#include &lt;functional&gt;

using namespace std;

template&lt;typename T&gt;
struct memfun_type
{
    using type = void;
};

template&lt;typename Ret, typename Class, typename... Args&gt;
struct memfun_type&lt;Ret(Class::*)(Args...) const&gt;
{
    using type = std::function&lt;Ret(Args...)&gt;;
};

template&lt;typename F&gt;
typename memfun_type&lt;decltype(&amp;F::operator())&gt;::type
FFL(F const &amp;func)
{ // Function from lambda !
    return func;
}
</code></pre>

<p>you can say <code>FFL()</code> to all lambda types to <strong>have them converted to what would be the correct version of <code>std::function</code></strong></p>

<pre><code>template &lt;typename... Args&gt; void Callback(std::function&lt;void(Args...)&gt; f){
    // store f and call later
}

int main()
{
    Callback(FFL([](int a, float b){
        // do something
    }));

    return 0;
}
</code></pre>

<p><a href=""http://ideone.com/omrRr9"">Display</a></p>
",Nikos Athanasiou,,1401995614,1401995614,0
http://stackoverflow.com/a/24107550/888165,Finding closest element without jQuery,72753,hunterc,Benjamin,1378490810,1547948076,1532772281,https://stackoverflow.com/questions/18663941/finding-closest-element-without-jquery,"<p>Little (very) late to the party, but nonetheless. This should do the <a href=""https://developer.mozilla.org/en-US/docs/Web/API/Element.matches"" rel=""noreferrer"">trick</a>:</p>

<pre><code>function closest(el, selector) {
    var matchesFn;

    // find vendor prefix
    ['matches','webkitMatchesSelector','mozMatchesSelector','msMatchesSelector','oMatchesSelector'].some(function(fn) {
        if (typeof document.body[fn] == 'function') {
            matchesFn = fn;
            return true;
        }
        return false;
    })

    var parent;

    // traverse parents
    while (el) {
        parent = el.parentElement;
        if (parent &amp;&amp; parent[matchesFn](selector)) {
            return parent;
        }
        el = parent;
    }

    return null;
}
</code></pre>
",Ales,Shashank Agrawal,1402240434,1465991950,1465991950
http://stackoverflow.com/a/24110019/4135310,jQM Back Button with notext howto?,49,MarkZ,,1402255504,1402266154,0,https://stackoverflow.com/questions/24109969/jqm-back-button-with-notext-howto,"<p>I get it done using Omar's suggestion:</p>

<pre><code>$(document).on('pagebeforeshow', function () {
 $(this).find('a[data-rel=back]').buttonMarkup({iconpos: 'notext'});
});
</code></pre>

<p>Thanks.</p>
",MarkZ,,1402255840,1402255840,0
http://stackoverflow.com/a/24145381/486547,Socket.IO - how do I get a list of connected sockets/clients?,195346,Andy Hin,franzlorenzon,1309708685,1542891904,1369311253,https://stackoverflow.com/questions/6563885/socket-io-how-do-i-get-a-list-of-connected-sockets-clients,"<p><strong>Socket.io 1.4</strong></p>

<p><code>Object.keys(io.sockets.sockets);</code> gives you all the connected sockets.</p>

<p><strong>Socket.io 1.0</strong>
As of socket.io 1.0, the actual accepted answer isn't valid anymore.
So I made a small function that I use as a temporary fix :</p>

<pre><code>function findClientsSocket(roomId, namespace) {
    var res = []
    // the default namespace is ""/""
    , ns = io.of(namespace ||""/"");

    if (ns) {
        for (var id in ns.connected) {
            if(roomId) {
                var index = ns.connected[id].rooms.indexOf(roomId);
                if(index !== -1) {
                    res.push(ns.connected[id]);
                }
            } else {
                res.push(ns.connected[id]);
            }
        }
    }
    return res;
}
</code></pre>

<p>Api for <em>No namespace</em> becomes </p>

<pre><code>// var clients = io.sockets.clients();
// becomes : 
var clients = findClientsSocket();

// var clients = io.sockets.clients('room');
// all users from room `room`
// becomes
var clients = findClientsSocket('room');
</code></pre>

<p>Api for <em>a namespace</em> becomes :</p>

<pre><code>// var clients = io.of('/chat').clients();
// becomes
var clients = findClientsSocket(null, '/chat');

// var clients = io.of('/chat').clients('room');
// all users from room `room`
// becomes
var clients = findClientsSocket('room', '/chat');
</code></pre>

<p>Also see this <a href=""https://stackoverflow.com/questions/23858604/how-to-get-rooms-clients-list-in-socket-io-1-0/24034949#24034949"">related question</a>, in which I give a function that returns the sockets for a given room.</p>

<pre><code>function findClientsSocketByRoomId(roomId) {
var res = []
, room = io.sockets.adapter.rooms[roomId];
if (room) {
    for (var id in room) {
    res.push(io.sockets.adapter.nsp.connected[id]);
    }
}
return res;
}
</code></pre>

<p><strong>Socket.io 0.7</strong></p>

<p>API for <em>no namespace</em>:</p>

<pre><code>var clients = io.sockets.clients();
var clients = io.sockets.clients('room'); // all users from room `room`
</code></pre>

<p>For <em>a namespace</em></p>

<pre><code>var clients = io.of('/chat').clients();
var clients = io.of('/chat').clients('room'); // all users from room `room`
</code></pre>

<p><strong>Note:</strong> Since it seems the socket.io API is prone to breaking, and some solution rely on implementation details, it could be a matter of tracking the clients yourself:</p>

<pre><code>var clients = [];

io.sockets.on('connect', function(client) {
    clients.push(client); 

    client.on('disconnect', function() {
        clients.splice(clients.indexOf(client), 1);
    });
});
</code></pre>
",nha,Community,1402415262,1489841524,1495542894
http://stackoverflow.com/a/24163343/830737,AngularJS ng-src inside of iframe,41916,Tindtrelle,losaliens,1402490283,1512562079,1482234169,https://stackoverflow.com/questions/24163152/angularjs-ng-src-inside-of-iframe,"<p>You can use a filter instead:</p>

<p>HTML:</p>

<pre><code>&lt;iframe src=""{{yourURL | trustAsResourceUrl}}""&gt;&lt;/iframe&gt;
</code></pre>

<p>where 'yourURL' is the URL of the iframe and 'trustAsResourceUrl' is the filter and is defined as in some module(like eg. filters-module) as:</p>

<p>JS:</p>

<pre><code>angular.module('filters-module', [])
.filter('trustAsResourceUrl', ['$sce', function($sce) {
    return function(val) {
        return $sce.trustAsResourceUrl(val);
    };
}])
</code></pre>

<p>And you can use this filter in all the iframes and other embedded items in your application.
This filter will take care of all the urls that you need to trust just by adding the filter.</p>
",Kop4lyf,,1402490840,1402490840,0
http://stackoverflow.com/a/24176022/5228524,How do I change directory (cd) in Python?,915820,too much php,kvmahesh,1231619296,1541608815,1526462223,https://stackoverflow.com/questions/431684/how-do-i-change-directory-cd-in-python,"<p><code>cd()</code> is easy to write using a generator and a decorator.</p>

<pre><code>from contextlib import contextmanager
import os

@contextmanager
def cd(newdir):
    prevdir = os.getcwd()
    os.chdir(os.path.expanduser(newdir))
    try:
        yield
    finally:
        os.chdir(prevdir)
</code></pre>

<p>Then, the directory is reverted even after an exception is thrown:</p>

<pre><code>os.chdir('/home')

with cd('/tmp'):
    # ...
    raise Exception(""There's no place like home."")
# Directory is now back to '/home'.
</code></pre>
",cdunn2001,cdunn2001,1402543846,1426443617,1426443617
http://stackoverflow.com/a/24184379/1520211,Spyne: How to decode POST into JSON using HttpRpc,421,Javier,Burak Arslan,1402525893,1403079351,1403079351,https://stackoverflow.com/questions/24173705/spyne-how-to-decode-post-into-json-using-httprpc,"<p>Spyne doesn't have that functionality ouf the box, you need to implement your own protocol for that.</p>

<p>It's pretty easy though. Off the top of my head:</p>

<pre><code>class HybridHttpJsonDocument(JsonDocument):
    def create_in_document(self, ctx):
        super(HybridHttpJsonDocument, self).create_in_document(ctx)

        # get url fragment from ctx.transport.req_env

        ctx.in_document = {url_fragment: ctx.in_document}
</code></pre>

<p>That's all I can think of that you need to do. Please report back with your results!</p>

<p>Best regards,</p>
",Burak Arslan,,1402575936,1402575936,0
http://stackoverflow.com/a/2419664/61435,How to decode HTML entities using jQuery?,305259,EddyR,Mark Amery,1247918328,1553603768,1436558170,https://stackoverflow.com/questions/1147359/how-to-decode-html-entities-using-jquery,"<blockquote>
  <p><strong>Security note:</strong> using this answer (preserved in its original form below) may introduce an <a href=""https://www.owasp.org/index.php/Cross-site_Scripting_(XSS)"" rel=""noreferrer"">XSS vulnerability</a> into your application. <strong>You should not use this answer.</strong> Read <a href=""https://stackoverflow.com/a/1395954/1709587"">lucascaro's answer</a> for an explanation of the vulnerabilities in this answer, and use the approach from either that answer or <a href=""https://stackoverflow.com/a/23596964/1709587"">Mark Amery's answer</a> instead.</p>
</blockquote>

<p>Actually, try </p>

<pre><code>var decoded = $(""&lt;div/&gt;"").html(encodedStr).text();
</code></pre>
",tom,Community,1268247273,1482941560,1495540959
http://stackoverflow.com/a/2428192/654755,Creating a JSON response using Django and Python,444027,Switch,Peter Mortensen,1268336435,1545285357,1340532973,https://stackoverflow.com/questions/2428092/creating-a-json-response-using-django-and-python,"<p>I use this, it works fine.</p>

<pre><code>from django.utils import simplejson
from django.http import HttpResponse

def some_view(request):
    to_json = {
        ""key1"": ""value1"",
        ""key2"": ""value2""
    }
    return HttpResponse(simplejson.dumps(to_json), mimetype='application/json')
</code></pre>

<p>Alternative:</p>

<pre><code>from django.utils import simplejson

class JsonResponse(HttpResponse):
    """"""
        JSON response
    """"""
    def __init__(self, content, mimetype='application/json', status=None, content_type=None):
        super(JsonResponse, self).__init__(
            content=simplejson.dumps(content),
            mimetype=mimetype,
            status=status,
            content_type=content_type,
        )
</code></pre>

<p>In Django 1.7 <a href=""https://docs.djangoproject.com/en/dev/ref/request-response/#jsonresponse-objects"" rel=""noreferrer"">JsonResponse</a> objects have been added to the Django framework itself which makes this task even easier:</p>

<pre><code>from django.http import JsonResponse
def some_view(request):
    return JsonResponse({""key"": ""value""})
</code></pre>
",Dingo,User,1268337329,1462926968,1462926968
http://stackoverflow.com/a/2430144/480856,PHP: get number of decimal digits,53504,Erwin,Machavity,1268360230,1539762950,1529793248,https://stackoverflow.com/questions/2430084/php-get-number-of-decimal-digits,"<pre><code>$str = ""1.23444"";
print strlen(substr(strrchr($str, "".""), 1));
</code></pre>
",ghostdog74,,1268361310,1268361310,0
http://stackoverflow.com/a/24322465/280182,Programmatically generate requirements.txt file,3198,K Engle,,1403248710,1403251399,0,https://stackoverflow.com/questions/24321933/programmatically-generate-requirements-txt-file,"<h1>Ask pip to directly provide the list of distributions</h1>

<h1>Script <code>myfreeze.py</code></h1>

<pre><code>import pip
with open(""requirements.txt"", ""w"") as f:
    for dist in pip.get_installed_distributions():
        req = dist.as_requirement()
        f.write(str(req) + ""\n"")
</code></pre>

<p>Then you get expected content in your <code>requirements.txt</code> file.</p>
",Jan Vlcinsky,Jan Vlcinsky,1403250705,1403251399,1403251399
http://stackoverflow.com/a/2433143/148668,Turning temporary stringstream to c_str() in single statement,9695,AshleysBrain,,1268401454,1509755331,0,https://stackoverflow.com/questions/2433071/turning-temporary-stringstream-to-c-str-in-single-statement,"<p>You cannot cast the temporary stream to <code>std::ostringstream&amp;</code>. It is ill-formed (the compiler must tell you that it is wrong). The following can do it, though:</p>

<pre><code>f(static_cast&lt;std::ostringstream&amp;&gt;(
  std::ostringstream().seekp(0) &lt;&lt; ""Value: "" &lt;&lt; 5).str().c_str());
</code></pre>

<p>That of course is ugly. But it shows how it can work. <code>seekp</code> is a member function returning a <code>std::ostream&amp;</code>. Would probably better to write this generally</p>

<pre><code>template&lt;typename T&gt;
struct lval { T t; T &amp;getlval() { return t; } };

f(static_cast&lt;std::ostringstream&amp;&gt;(
  lval&lt;std::ostringstream&gt;().getlval() &lt;&lt; ""Value: "" &lt;&lt; 5).str().c_str());
</code></pre>

<p>The reason that without anything it takes the <code>void*</code>, is because that <code>operator&lt;&lt;</code> is a member-function. The <code>operator&lt;&lt;</code> that takes a <code>char const*</code> is not.</p>
",Johannes Schaub - litb,Johannes Schaub - litb,1268402113,1268402698,1268402698
http://stackoverflow.com/a/24344154/645768,Page variables in content script,23900,esqew,Nakilon,1287358551,1559149634,1365420108,https://stackoverflow.com/questions/3955803/page-variables-in-content-script,"<p>I created a little helper method, have fun :)</p>

<p>to retrieve the window's variables <em>""lannister"", ""always"", ""pays"", ""his"", ""debts""</em>,
you execute the following:</p>

<pre><code>var windowVariables = retrieveWindowVariables([""lannister"", ""always"", ""pays"", ""his"", ""debts""]);
console.log(windowVariables.lannister);
console.log(windowVariables.always);
</code></pre>

<p>my code:</p>

<pre><code>function retrieveWindowVariables(variables) {
    var ret = {};

    var scriptContent = """";
    for (var i = 0; i &lt; variables.length; i++) {
        var currVariable = variables[i];
        scriptContent += ""if (typeof "" + currVariable + "" !== 'undefined') $('body').attr('tmp_"" + currVariable + ""', "" + currVariable + "");\n""
    }

    var script = document.createElement('script');
    script.id = 'tmpScript';
    script.appendChild(document.createTextNode(scriptContent));
    (document.body || document.head || document.documentElement).appendChild(script);

    for (var i = 0; i &lt; variables.length; i++) {
        var currVariable = variables[i];
        ret[currVariable] = $(""body"").attr(""tmp_"" + currVariable);
        $(""body"").removeAttr(""tmp_"" + currVariable);
    }

    $(""#tmpScript"").remove();

    return ret;
}
</code></pre>

<p>please note that i used jQuery.. you can easily use the native js <em>""removeAttribute""</em> and <em>""removeChild""</em> instead.</p>
",Liran Brimer,,1403372137,1403372137,0
http://stackoverflow.com/a/24375113/723090,SimpleJSON and NumPy array,34305,epoch,,1281901371,1552593243,0,https://stackoverflow.com/questions/3488934/simplejson-and-numpy-array,"<p>In order to keep dtype and dimension try this:</p>

<pre><code>import base64
import json
import numpy as np

class NumpyEncoder(json.JSONEncoder):

    def default(self, obj):
        """"""If input object is an ndarray it will be converted into a dict 
        holding dtype, shape and the data, base64 encoded.
        """"""
        if isinstance(obj, np.ndarray):
            if obj.flags['C_CONTIGUOUS']:
                obj_data = obj.data
            else:
                cont_obj = np.ascontiguousarray(obj)
                assert(cont_obj.flags['C_CONTIGUOUS'])
                obj_data = cont_obj.data
            data_b64 = base64.b64encode(obj_data)
            return dict(__ndarray__=data_b64,
                        dtype=str(obj.dtype),
                        shape=obj.shape)
        # Let the base class default method raise the TypeError
        super(NumpyEncoder, self).default(obj)


def json_numpy_obj_hook(dct):
    """"""Decodes a previously encoded numpy ndarray with proper shape and dtype.

    :param dct: (dict) json encoded ndarray
    :return: (ndarray) if input was an encoded ndarray
    """"""
    if isinstance(dct, dict) and '__ndarray__' in dct:
        data = base64.b64decode(dct['__ndarray__'])
        return np.frombuffer(data, dct['dtype']).reshape(dct['shape'])
    return dct

expected = np.arange(100, dtype=np.float)
dumped = json.dumps(expected, cls=NumpyEncoder)
result = json.loads(dumped, object_hook=json_numpy_obj_hook)


# None of the following assertions will be broken.
assert result.dtype == expected.dtype, ""Wrong Type""
assert result.shape == expected.shape, ""Wrong Shape""
assert np.allclose(expected, result), ""Wrong Values""
</code></pre>
",tlausch,Community,1403559990,1552593243,1552593243
http://stackoverflow.com/a/2437645/1265472,How to limit the size of a dictionary?,23494,anthony,martineau,1268464789,1545949273,1544546665,https://stackoverflow.com/questions/2437617/how-to-limit-the-size-of-a-dictionary,"<p>Python 2.7 and 3.1 have <a href=""https://docs.python.org/3/library/collections.html#collections.OrderedDict"" rel=""nofollow noreferrer"">OrderedDict</a> and there are pure-Python implementations for earlier Pythons.</p>

<pre><code>from collections import OrderedDict

class LimitedSizeDict(OrderedDict):
    def __init__(self, *args, **kwds):
        self.size_limit = kwds.pop(""size_limit"", None)
        OrderedDict.__init__(self, *args, **kwds)
        self._check_size_limit()

    def __setitem__(self, key, value):
        OrderedDict.__setitem__(self, key, value)
        self._check_size_limit()

    def _check_size_limit(self):
        if self.size_limit is not None:
            while len(self) &gt; self.size_limit:
                self.popitem(last=False)
</code></pre>

<p>You would also have to override other methods that can insert items, such as <code>update</code>.  The primary use of <code>OrderedDict</code> is so you can control what gets popped easily, otherwise a normal <code>dict</code> would work.</p>
",Roger Pate,martineau,1268465555,1545949273,1545949273
http://stackoverflow.com/a/2437645/1657047,How to limit the size of a dictionary?,23494,anthony,martineau,1268464789,1545949273,1544546665,https://stackoverflow.com/questions/2437617/how-to-limit-the-size-of-a-dictionary,"<p>Python 2.7 and 3.1 have <a href=""https://docs.python.org/3/library/collections.html#collections.OrderedDict"" rel=""nofollow noreferrer"">OrderedDict</a> and there are pure-Python implementations for earlier Pythons.</p>

<pre><code>from collections import OrderedDict

class LimitedSizeDict(OrderedDict):
    def __init__(self, *args, **kwds):
        self.size_limit = kwds.pop(""size_limit"", None)
        OrderedDict.__init__(self, *args, **kwds)
        self._check_size_limit()

    def __setitem__(self, key, value):
        OrderedDict.__setitem__(self, key, value)
        self._check_size_limit()

    def _check_size_limit(self):
        if self.size_limit is not None:
            while len(self) &gt; self.size_limit:
                self.popitem(last=False)
</code></pre>

<p>You would also have to override other methods that can insert items, such as <code>update</code>.  The primary use of <code>OrderedDict</code> is so you can control what gets popped easily, otherwise a normal <code>dict</code> would work.</p>
",Roger Pate,martineau,1268465555,1545949273,1545949273
http://stackoverflow.com/a/24386991/1441789,Get a file name from a path,163842,nidhal,Prashant Kumar,1323954302,1550654281,1382055602,https://stackoverflow.com/questions/8520560/get-a-file-name-from-a-path,"<p>The task is fairly simple as the base filename is just the part of the string starting at the last delimeter for folders:</p>

<pre><code>std::string base_filename = path.substr(path.find_last_of(""/\\"") + 1)
</code></pre>

<p>If the extension is to be removed as well the only thing to do is find the last <code>.</code> and take a <code>substr</code> to this point</p>

<pre><code>std::string::size_type const p(base_filename.find_last_of('.'));
std::string file_without_extension = base_filename.substr(0, p);
</code></pre>

<p>Perhaps there should be a check to cope with files solely consisting of extensions (ie <code>.bashrc</code>...)</p>

<p>If you split this up into seperate functions you're flexible to reuse the single tasks:</p>

<pre><code>template&lt;class T&gt;
T base_name(T const &amp; path, T const &amp; delims = ""/\\"")
{
  return path.substr(path.find_last_of(delims) + 1);
}
template&lt;class T&gt;
T remove_extension(T const &amp; filename)
{
  typename T::size_type const p(filename.find_last_of('.'));
  return p &gt; 0 &amp;&amp; p != T::npos ? filename.substr(0, p) : filename;
}
</code></pre>

<p>The code is templated to be able to use it with different <code>std::basic_string</code> instances (i.e. <code>std::string</code> &amp; <code>std::wstring</code>...)</p>

<p>The downside of the templation is the requirement to specify the template parameter if a <code>const char *</code> is passed to the functions.</p>

<p>So you could either:</p>

<h3>A) Use only <code>std::string</code> instead of templating the code</h3>

<pre><code>std::string base_name(std::string const &amp; path)
{
  return path.substr(path.find_last_of(""/\\"") + 1);
}
</code></pre>

<h3>B)  Provide wrapping function using <code>std::string</code> (as intermediates which will likely be inlined / optimized away)</h3>

<pre><code>inline std::string string_base_name(std::string const &amp; path)
{
  return base_name(path);
}
</code></pre>

<h3>C) Specify the template parameter when calling with <code>const char *</code>.</h3>

<pre><code>std::string base = base_name&lt;std::string&gt;(""some/path/file.ext"");
</code></pre>

<h2>Result</h2>

<pre><code>std::string filepath = ""C:\\MyDirectory\\MyFile.bat"";
std::cout &lt;&lt; remove_extension(base_name(filepath)) &lt;&lt; std::endl;
</code></pre>

<p>Prints</p>

<pre><code>MyFile
</code></pre>
",Pixelchemist,,1403613841,1403613841,0
http://stackoverflow.com/a/24408672/145346,Detect IE version (prior to v9) in JavaScript,371227,Chad Decker,Alex.K.,1339280003,1538371249,1469007681,https://stackoverflow.com/questions/10964966/detect-ie-version-prior-to-v9-in-javascript,"<p>To reliably filter IE8 and older, <a href=""http://tanalin.com/en/articles/ie-version-js/"" rel=""nofollow"">checking global objects</a> can be used:</p>

<pre><code>if (document.all &amp;&amp; !document.addEventListener) {
    alert('IE8 or lower');
}
</code></pre>
",Beaudinn Greve,Marat Tanalin,1403699265,1444067762,1444067762
http://stackoverflow.com/a/24425221/3235496,Explaining a string trimming function,742,Smithy,Niall,1403769041,1408895337,1408455996,https://stackoverflow.com/questions/24425127/explaining-a-string-trimming-function,"<p>The braces are the new C++11 initialisation.</p>

<p><strong><code>.base()</code> and reverse iterators</strong></p>

<p>The <code>.base()</code> is to get back the the underlying iterator (<code>back</code> is a <code>reverse_iterator</code>), to properly construct the new string from a valid range.</p>

<p>A picture. Normal iterator positions of a string (it is a little more complex than this regarding how <code>rend()</code> works, but conceptually anyway...)</p>

<pre><code>        begin                                 end
          v                                    v
        -------------------------------------
        | sp | sp | A | B | C | D | sp | sp |
        -------------------------------------
      ^                                   ^
    rend                                rbegin
</code></pre>

<p>Once your two find loops finish, the result of those iterators in this sequence will be positioned at:</p>

<pre><code>                  front
                    v
        -------------------------------------
        | sp | sp | A | B | C | D | sp | sp |
        -------------------------------------
                                ^
                              back
</code></pre>

<p>Were we to take just those iterators and construct a sequence from them (which we can't, as they're not matching types, but regardless, supposed we could), the result would be ""copy starting at A, stopping at D"" <strong>but it would not include D in the resulting data</strong>.</p>

<p>Enter the <code>back()</code> member of a reverse iterator. It returns a non-reverse iterator of the forward iterator class, that is positioned at the element ""next to"" the back iterator; i.e.</p>

<pre><code>                  front
                    v
        -------------------------------------
        | sp | sp | A | B | C | D | sp | sp |
        -------------------------------------
                                    ^
                               back.base()
</code></pre>

<p><em>Now</em> when we copy our range <code>{ front, back.base() }</code> we copy starting at <code>A</code> and stopping at the first space (but not including it), thereby including the D we would have missed.</p>

<p>Its actually a slick little piece of code, btw.</p>

<p><strong>Some additional checking</strong></p>

<p>Added some basic checks to the original code.</p>

<p>In trying to keeping with the spirit of the original code (C++1y/C++14 usage), adding some basic checks for empty and white space only strings;</p>

<pre><code>string trim_check(string const&amp; s)
{
  auto is_space = [](char c) { return isspace(c, locale()); };
  auto front = find_if_not(begin(s), end(s), is_space);
  auto back = find_if_not(rbegin(s), make_reverse_iterator(front), is_space);
  return string { front, back.base() };
}
</code></pre>
",Niall,Niall,1403769316,1408895337,1408895337
http://stackoverflow.com/a/2443434/2066546,Rails: MIME type issues with .m4v files,7222,Shpigford,,1268194668,1315825057,0,https://stackoverflow.com/questions/2414474/rails-mime-type-issues-with-m4v-files,"<p>You need to add the following lines to your <code>config/initializers/mime_types.rb</code> file:</p>

<pre><code># register MIME type with Rails 
Mime::Type.register ""video/mp4"", :m4v

# register MIME type with MIME::Type gem 
MIME::Types.add(MIME::Type.from_array(""video/mp4"", %(m4v)))
</code></pre>

<p>Now in the console you can test the results</p>

<pre><code>MIME::Types.type_for(""abc.m4v"").to_s
#=&gt; ""video/mp4""
</code></pre>
",Harish Shetty,,1268594850,1268594850,0
http://stackoverflow.com/a/2449017/172068,php regex word boundary matching in utf-8,6827,tomsv,Alan Moore,1268399312,1481365933,1268673191,https://stackoverflow.com/questions/2432868/php-regex-word-boundary-matching-in-utf-8,"<p>Even in UTF-8 mode, standard class shorthands like <code>\w</code> and <code>\b</code> are not Unicode-aware.  You just have to use the Unicode shorthands, as you worked out, but you can make it a little less ugly by using lookarounds instead of alternations:</p>

<pre><code>/(?&lt;!\pL)wei(?!\pL)/u
</code></pre>

<p>Notice also how I left the curly braces out of the Unicode class shorthands; you can do that when the class name consists of a single letter.</p>
",Alan Moore,Alan Moore,1268673177,1443609951,1443609951
http://stackoverflow.com/a/2450689/562978,Validating alphabetic only string in javascript,42474,Click Upvote,,1268688654,1268689176,0,https://stackoverflow.com/questions/2450641/validating-alphabetic-only-string-in-javascript,"<p>Here you go:</p>

<pre><code>function isLetter(s)
{
  return s.match(""^[a-zA-Z\(\)]+$"");    
}
</code></pre>
",Vlad,,1268689176,1268689176,0
http://stackoverflow.com/a/2450976/1310468,How to randomize (shuffle) a JavaScript array?,615594,Click Upvote,Nit,1268692631,1562763190,1505951568,https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array,"<p>The de-facto unbiased shuffle algorithm is the Fisher-Yates (aka Knuth) Shuffle.</p>

<p>See <a href=""https://github.com/coolaj86/knuth-shuffle"" rel=""noreferrer"">https://github.com/coolaj86/knuth-shuffle</a></p>

<p>You can see a <a href=""http://bost.ocks.org/mike/shuffle/"" rel=""noreferrer"">great visualization here</a> (and the original post <a href=""http://sedition.com/perl/javascript-fy.html"" rel=""noreferrer"">linked to this</a>)</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

// Used like so
var arr = [2, 11, 37, 42];
arr = shuffle(arr);
console.log(arr);</code></pre>
</div>
</div>
</p>

<p>Some more info <a href=""http://en.wikipedia.org/wiki/Fisher-Yates_shuffle"" rel=""noreferrer"">about the algorithm</a> used.</p>
",ChristopheD,deekshith,1268692870,1489205918,1489205918
http://stackoverflow.com/a/24510799/194609,What are the design decisions behind Google Maps encoded polyline algorithm format?,729,Bryce Thomas,,1395150489,1404220066,0,https://stackoverflow.com/questions/22481348/what-are-the-design-decisions-behind-google-maps-encoded-polyline-algorithm-form,"<p><strong>Update</strong>: <a href=""http://www.twistedape.me.uk/blog/blog/2014/04/20/google-polyline-encoding/"" rel=""nofollow"">This blog post</a> from James Snook also has the 'valid ascii' range argument and reads logically for other steps I wondered. E.g. the left shifting before storing which makes place for the negative bit as the first bit.</p>

<p>Some explanations I found, not sure if everything is 100% correct.</p>

<ul>
<li>One double value is stored in multiple 5 bits chunks and 0x20 (binary '0010 0000') is used as indication that the next 5 bit entry belongs to the current double. </li>
<li>0x1f (binary '0001 1111') is used as bit mask to throw away other bits</li>
<li>I expect that 5 bits are used because the delta of lat or lons are in this range. So that every double value takes only 5 bits on average when done for a lot of examples (but not verified yet).</li>
<li>Now, compression is done by assuming nearby double values are very close and creating the difference is nearly 0, so that the results fits in a few bytes. Then this result is stored in a dynamic fashion: store 5 bits and if the value is longer mark with 0x20 and store the next 5 bits and so on. So I guess you can tweak the compression if you try 6 or 4 bits but I guess 5 is a practically reasonable choice.</li>
<li>Now regarding the magic 63, this is 0x3f and binary 0011 1111. I'm not sure why they add it. I thought that adding 63 will give some 'better' asci characters (e.g. allowed in XML or in URL) as we skip e.g. 62 which is <code>&gt;</code> but 63 which is <code>?</code> is really better? At least the first ascii chars are not displayable and have to be avoided. Note that if one would use 64 then one would hit the ascii char 127 for the maximum value of 31 (31+64+32) and this char is not defined in html4. Or is because of a signed char is going from -128 to 127 and we need to store the negative numbers as positive, thus adding the maximum possible negative number?</li>
<li>Just for me: <a href=""https://github.com/googlemaps/android-maps-utils/blob/master/library/src/com/google/maps/android/PolyUtil.java#L328"" rel=""nofollow"">here</a> is a link to an official Java implementation with Apache License</li>
</ul>
",Karussell,Karussell,1404219131,1404220066,1404220066
http://stackoverflow.com/a/24519069/1361529,External resource not being loaded by AngularJs,117846,mhartington,Community,1390418753,1516231371,1495541901,https://stackoverflow.com/questions/21292114/external-resource-not-being-loaded-by-angularjs,"<p>Another simple solution is to create a filter:</p>

<pre><code>app.filter('trusted', ['$sce', function ($sce) {
    return function(url) {
        return $sce.trustAsResourceUrl(url);
    };
}]);
</code></pre>

<p>Then specify the filter in <code>ng-src</code>:</p>

<pre><code>&lt;video controls poster=""img/poster.png""&gt;
       &lt;source ng-src=""{{object.src | trusted}}"" type=""video/mp4""/&gt;
&lt;/video&gt;
</code></pre>
",David Boyd,,1404247874,1404247874,0
http://stackoverflow.com/a/24545330/1657047,How to find multiplicity of prime factors in order to get number of divisors,1570,Stumbleine75,Martijn Pieters,1404361080,1421916405,1421916405,https://stackoverflow.com/questions/24544857/how-to-find-multiplicity-of-prime-factors-in-order-to-get-number-of-divisors,"<p>Borrowing from the other answer:</p>

<p>The number a1^k1*a2^k2*...an^kn has number of factor = (k1+1)*(k2+1)...(kn+1)</p>

<p>You can get the prime numbers below a certain number using the following code:
Courtesy of <a href=""https://stackoverflow.com/questions/2068372/fastest-way-to-list-all-primes-below-n-in-python"">Fastest way to list all primes below N</a></p>

<pre><code>n = number

def primesfrom2to(n):
    """""" Input n&gt;=6, Returns a array of primes, 2 &lt;= p &lt; n """"""
    sieve = numpy.ones(n/3 + (n%6==2), dtype=numpy.bool)
    for i in xrange(1,int(n**0.5)/3+1):
        if sieve[i]:
            k=3*i+1|1
            sieve[       k*k/3     ::2*k] = False
            sieve[k*(k-2*(i&amp;1)+4)/3::2*k] = False
    return numpy.r_[2,3,((3*numpy.nonzero(sieve)[0][1:]+1)|1)]

primes = primesfrom2to(n).tolist()  # list of primes.
primes = map(int, primes)
factors = {}
for prime in primes:
    n = number
    factor = 0
    while True:
        if n%prime == 0:
            factor += 1
            n /= prime
            factors[prime] = factor
        else: break
</code></pre>

<p>factors will give you the multiplicity of the prime factors.</p>
",user2963623,Community,1404363982,1404365978,1495535542
http://stackoverflow.com/a/24571681/2257172,Java JTextField with input hint,90039,Wienczny,Yugerten,1258321691,1551980509,1536605786,https://stackoverflow.com/questions/1738966/java-jtextfield-with-input-hint,"<p>Here is a simple way that looks good in any L&amp;F:</p>

<pre><code>public class HintTextField extends JTextField {
    public HintTextField(String hint) {
        _hint = hint;
    }
    @Override
    public void paint(Graphics g) {
        super.paint(g);
        if (getText().length() == 0) {
            int h = getHeight();
            ((Graphics2D)g).setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
            Insets ins = getInsets();
            FontMetrics fm = g.getFontMetrics();
            int c0 = getBackground().getRGB();
            int c1 = getForeground().getRGB();
            int m = 0xfefefefe;
            int c2 = ((c0 &amp; m) &gt;&gt;&gt; 1) + ((c1 &amp; m) &gt;&gt;&gt; 1);
            g.setColor(new Color(c2, true));
            g.drawString(_hint, ins.left, h / 2 + fm.getAscent() / 2 - 2);
        }
    }
    private final String _hint;
}
</code></pre>
",Adam Gawne-Cain,,1404468067,1404468067,0
http://stackoverflow.com/a/24586896/4026792,How do you usually Tag log entries? (android),48567,andrii,Dominik Schmidt,1322825263,1560246617,1465492518,https://stackoverflow.com/questions/8355632/how-do-you-usually-tag-log-entries-android,"<p>I usually create an <code>App</code> class that sits in a different package and contains useful static methods. One of the method is a <code>getTag()</code> method, this way I can get the TAG everywhere.
<br><code>App</code> class looks like this:</p>

<p><strong>EDIT</strong>: Improved per br mob comment ( Thanks :) )</p>

<pre><code>public class App {

    public static String getTag() {
        String tag = """";
        final StackTraceElement[] ste = Thread.currentThread().getStackTrace();
        for (int i = 0; i &lt; ste.length; i++) {
            if (ste[i].getMethodName().equals(""getTag"")) {
                tag = ""(""+ste[i + 1].getFileName() + "":"" + ste[i + 1].getLineNumber()+"")"";
            }
        }
        return tag;
    }

}
</code></pre>

<p>And when I want to use it:</p>

<pre><code>Log.i(App.getTag(), ""Your message here"");
</code></pre>

<p>The output of the <code>getTag</code> method is the name of the caller class (with the package name), and the line number where the <code>getTag</code> is called from, for easy debuging.</p>
",Yaniv,Yaniv,1404566871,1447927488,1447927488
http://stackoverflow.com/a/24594123/1191579,Get all directories within directory nodejs,122352,Grofit,,1375903969,1562020970,0,https://stackoverflow.com/questions/18112204/get-all-directories-within-directory-nodejs,"<p>Here's a shorter, syncronous version of <a href=""https://stackoverflow.com/a/18112359/406249"">this answer</a> that can list all directories (hidden or not) in the current directory:</p>

<pre><code>const { lstatSync, readdirSync } = require('fs')
const { join } = require('path')

const isDirectory = source =&gt; lstatSync(source).isDirectory()
const getDirectories = source =&gt;
  readdirSync(source).map(name =&gt; join(source, name)).filter(isDirectory)
</code></pre>

<p><strong>Update for Node 10.10.0+</strong></p>

<p>We can use the new <code>withFileTypes</code> option of <code>readdirSync</code> to skip the extra <code>lstatSync</code> call:</p>

<pre><code>const { readdirSync } = require('fs')

const getDirectories = source =&gt;
  readdirSync(source, { withFileTypes: true })
    .filter(dirent =&gt; dirent.isDirectory())
    .map(dirent =&gt; dirent.name)
</code></pre>
",Nick McCurdy,Nick McCurdy,1404636069,1562013013,1562013013
http://stackoverflow.com/a/24624838/654755,Django post_save signal on parent class with multi-table inheritance,2149,Lorin Hochstein,Community,1360261363,1558814571,1495540944,https://stackoverflow.com/questions/14758250/django-post-save-signal-on-parent-class-with-multi-table-inheritance,"<pre><code>post_save.connect(my_handler, ParentClass)
# connect all subclasses of base content item too
for subclass in ParentClass.__subclasses__():
    post_save.connect(my_handler, subclass)
</code></pre>

<p>have a nice day!</p>
",scythargon,,1404800005,1404800005,0
http://stackoverflow.com/a/246813/253974,How can you encode a string to Base64 in JavaScript?,953579,username,DarkAjax,1225287258,1550691618,1542142226,https://stackoverflow.com/questions/246801/how-can-you-encode-a-string-to-base64-in-javascript,"<p><a href=""http://www.webtoolkit.info/javascript-base64.html"" rel=""noreferrer"">From here</a>:</p>

<pre><code>/**
*
*  Base64 encode / decode
*  http://www.webtoolkit.info/
*
**/
var Base64 = {

// private property
_keyStr : ""ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="",

// public method for encoding
encode : function (input) {
    var output = """";
    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
    var i = 0;

    input = Base64._utf8_encode(input);

    while (i &lt; input.length) {

        chr1 = input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);

        enc1 = chr1 &gt;&gt; 2;
        enc2 = ((chr1 &amp; 3) &lt;&lt; 4) | (chr2 &gt;&gt; 4);
        enc3 = ((chr2 &amp; 15) &lt;&lt; 2) | (chr3 &gt;&gt; 6);
        enc4 = chr3 &amp; 63;

        if (isNaN(chr2)) {
            enc3 = enc4 = 64;
        } else if (isNaN(chr3)) {
            enc4 = 64;
        }

        output = output +
        this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
        this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);

    }

    return output;
},

// public method for decoding
decode : function (input) {
    var output = """";
    var chr1, chr2, chr3;
    var enc1, enc2, enc3, enc4;
    var i = 0;

    input = input.replace(/[^A-Za-z0-9\+\/\=]/g, """");

    while (i &lt; input.length) {

        enc1 = this._keyStr.indexOf(input.charAt(i++));
        enc2 = this._keyStr.indexOf(input.charAt(i++));
        enc3 = this._keyStr.indexOf(input.charAt(i++));
        enc4 = this._keyStr.indexOf(input.charAt(i++));

        chr1 = (enc1 &lt;&lt; 2) | (enc2 &gt;&gt; 4);
        chr2 = ((enc2 &amp; 15) &lt;&lt; 4) | (enc3 &gt;&gt; 2);
        chr3 = ((enc3 &amp; 3) &lt;&lt; 6) | enc4;

        output = output + String.fromCharCode(chr1);

        if (enc3 != 64) {
            output = output + String.fromCharCode(chr2);
        }
        if (enc4 != 64) {
            output = output + String.fromCharCode(chr3);
        }

    }

    output = Base64._utf8_decode(output);

    return output;

},

// private method for UTF-8 encoding
_utf8_encode : function (string) {
    string = string.replace(/\r\n/g,""\n"");
    var utftext = """";

    for (var n = 0; n &lt; string.length; n++) {

        var c = string.charCodeAt(n);

        if (c &lt; 128) {
            utftext += String.fromCharCode(c);
        }
        else if((c &gt; 127) &amp;&amp; (c &lt; 2048)) {
            utftext += String.fromCharCode((c &gt;&gt; 6) | 192);
            utftext += String.fromCharCode((c &amp; 63) | 128);
        }
        else {
            utftext += String.fromCharCode((c &gt;&gt; 12) | 224);
            utftext += String.fromCharCode(((c &gt;&gt; 6) &amp; 63) | 128);
            utftext += String.fromCharCode((c &amp; 63) | 128);
        }

    }

    return utftext;
},

// private method for UTF-8 decoding
_utf8_decode : function (utftext) {
    var string = """";
    var i = 0;
    var c = c1 = c2 = 0;

    while ( i &lt; utftext.length ) {

        c = utftext.charCodeAt(i);

        if (c &lt; 128) {
            string += String.fromCharCode(c);
            i++;
        }
        else if((c &gt; 191) &amp;&amp; (c &lt; 224)) {
            c2 = utftext.charCodeAt(i+1);
            string += String.fromCharCode(((c &amp; 31) &lt;&lt; 6) | (c2 &amp; 63));
            i += 2;
        }
        else {
            c2 = utftext.charCodeAt(i+1);
            c3 = utftext.charCodeAt(i+2);
            string += String.fromCharCode(((c &amp; 15) &lt;&lt; 12) | ((c2 &amp; 63) &lt;&lt; 6) | (c3 &amp; 63));
            i += 3;
        }

    }

    return string;
}

}
</code></pre>

<p>Also, search on <a href=""http://www.google.com/search?q=javascript+base64+encode"" rel=""noreferrer"">""javascript base64 encoding""</a> turns a lot of other options, the above was the first one.</p>
",Sunny Milenov,Sunny Milenov,1225287557,1355407353,1355407353
http://stackoverflow.com/a/24727310/731300,Ruby on Rails &quot;invalid byte sequence in UTF-8&quot; due to bot,10698,CupraR_On_Rails,CupraR_On_Rails,1404892499,1416939826,1404898597,https://stackoverflow.com/questions/24648206/ruby-on-rails-invalid-byte-sequence-in-utf-8-due-to-bot,"<p>So you don't have to piece together the comments in my other reply, this is what I'm doing now  I've seen no errors for 24 hours, so it looks very promising:</p>

<p>Add <a href=""https://github.com/whitequark/rack-utf8_sanitizer/"">rack-utf8_sanitizer</a> to your Gemfile:</p>

<pre><code>gem 'rack-utf8_sanitizer'
</code></pre>

<p>and run</p>

<pre><code>bundle
</code></pre>

<p>Put <a href=""https://gist.github.com/bf4/d26259acfa29f3b9882b#file-exception_app-rb"">this middleware</a> in <code>app/middleware/handle_invalid_percent_encoding.rb</code> and rename the class <code>HandleInvalidPercentEncoding</code> (because <code>ExceptionApp</code> is a bit too general).</p>

<p>In the <code>config</code> block of <code>config/application.rb</code> do:</p>

<pre><code>require ""#{Rails.root}/app/middleware/handle_invalid_percent_encoding.rb""


# NOTE: These must be in this order relative to each other.
# HandleInvalidPercentEncoding just raises for encoding errors it doesn't cover,
# so it must run after (= be inserted before) Rack::UTF8Sanitizer.
config.middleware.insert 0, HandleInvalidPercentEncoding
config.middleware.insert 0, Rack::UTF8Sanitizer  # from a gem
</code></pre>

<p>Deploy. Done.</p>

<p>(<code>app</code> happens to be the location for middleware in the project I'm working on, but I'd probably prefer <code>lib</code>. Whatever. Either should work.)</p>
",Henrik N,Henrik N,1405288859,1405631189,1405631189
http://stackoverflow.com/a/24743279/743730,Pyparsing setParseAction function is getting no arguments,2444,deontologician,deontologician,1334590827,1413622309,1334594868,https://stackoverflow.com/questions/10177276/pyparsing-setparseaction-function-is-getting-no-arguments,"<p>Paul has already explained what the root problem is: The <code>TypeError</code> raised by your parse action confuses pyparsing's automagic way of figuring out the number of argument your parse action expects.</p>

<p>Here's what I use to avoid this kind of confusion: A decorator that re-raises any <code>TypeError</code> thrown by the decorated function if the function is called again with fewer arguments:</p>

<pre><code>import functools
import inspect
import sys

def parse_action(f):
    """"""
    Decorator for pyparsing parse actions to ease debugging.

    pyparsing uses trial &amp; error to deduce the number of arguments a parse
    action accepts. Unfortunately any ``TypeError`` raised by a parse action
    confuses that mechanism.

    This decorator replaces the trial &amp; error mechanism with one based on
    reflection. If the decorated function itself raises a ``TypeError`` then
    that exception is re-raised if the wrapper is called with less arguments
    than required. This makes sure that the actual ``TypeError`` bubbles up
    from the call to the parse action (instead of the one caused by pyparsing's
    trial &amp; error).
    """"""
    num_args = len(inspect.getargspec(f).args)
    if num_args &gt; 3:
        raise ValueError('Input function must take at most 3 parameters.')

    @functools.wraps(f)
    def action(*args):
        if len(args) &lt; num_args:
            if action.exc_info:
                raise action.exc_info[0], action.exc_info[1], action.exc_info[2]
        action.exc_info = None
        try:
            return f(*args[:-(num_args + 1):-1])
        except TypeError as e:
            action.exc_info = sys.exc_info()
            raise

    action.exc_info = None
    return action
</code></pre>

<p>Here's how to use it:</p>

<pre><code>from pyparsing import Literal

@parse_action
def my_parse_action(tokens):
    raise TypeError('Ooops')

x = Literal('x').setParseAction(my_parse_action)
x.parseString('x')
</code></pre>

<p>This gives you:</p>

<pre><code>Traceback (most recent call last):
  File ""test.py"", line 49, in &lt;module&gt;
    x.parseString('x')
  File ""/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py"", line 1101, in parseString
    loc, tokens = self._parse( instring, 0 )
  File ""/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py"", line 1001, in _parseNoCache
    tokens = fn( instring, tokensStart, retTokens )
  File ""/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py"", line 765, in wrapper
    ret = func(*args[limit[0]:])
  File ""test.py"", line 33, in action
    return f(*args[:num_args])
  File ""test.py"", line 46, in my_parse_action
    raise TypeError('Ooops')
TypeError: Ooops
</code></pre>

<p>Compare this with the traceback that you get without the <code>@parse_action</code> decoration:</p>

<pre><code>Traceback (most recent call last):
  File ""test.py"", line 49, in &lt;module&gt;
    x.parseString('x')
  File ""/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py"", line 1101, in parseString
    loc, tokens = self._parse( instring, 0 )
  File ""/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py"", line 1001, in _parseNoCache
    tokens = fn( instring, tokensStart, retTokens )
  File ""/usr/local/lib/python2.7/dist-packages/pyparsing-2.0.2-py2.7.egg/pyparsing.py"", line 765, in wrapper
    ret = func(*args[limit[0]:])
TypeError: my_parse_action() takes exactly 1 argument (0 given)
</code></pre>
",Florian Brucker,Florian Brucker,1405362475,1413622309,1413622309
http://stackoverflow.com/a/24744599/406458,How can I convert a string to boolean in JavaScript?,1662127,Kevin,,1225843988,1561735625,0,https://stackoverflow.com/questions/263965/how-can-i-convert-a-string-to-boolean-in-javascript,"<pre><code>var falsy = /^(?:f(?:alse)?|no?|0+)$/i;
Boolean.parse = function(val) { 
    return !falsy.test(val) &amp;&amp; !!val;
};
</code></pre>

<p>This returns <code>false</code> for every falsy value and <code>true</code> for every truthy value except for <code>'false'</code>, <code>'f'</code>, <code>'no'</code>, <code>'n'</code>, and <code>'0'</code> (case-insensitive).</p>

<pre><code>// False
Boolean.parse(false);
Boolean.parse('false');
Boolean.parse('False');
Boolean.parse('FALSE');
Boolean.parse('f');
Boolean.parse('F');
Boolean.parse('no');
Boolean.parse('No');
Boolean.parse('NO');
Boolean.parse('n');
Boolean.parse('N');
Boolean.parse('0');
Boolean.parse('');
Boolean.parse(0);
Boolean.parse(null);
Boolean.parse(undefined);
Boolean.parse(NaN);
Boolean.parse();

//True
Boolean.parse(true);
Boolean.parse('true');
Boolean.parse('True');
Boolean.parse('t');
Boolean.parse('yes');
Boolean.parse('YES');
Boolean.parse('y');
Boolean.parse('1');
Boolean.parse('foo');
Boolean.parse({});
Boolean.parse(1);
Boolean.parse(-1);
Boolean.parse(new Date());
</code></pre>
",Prestaul,,1405367022,1405367022,0
http://stackoverflow.com/a/24752108/83743,Rails hashes with unknown keys and strong parameters,2157,the_,,1380858615,1498061902,0,https://stackoverflow.com/questions/19172893/rails-hashes-with-unknown-keys-and-strong-parameters,"<p>I recently had this same issue and I solved it using @fxn's method from <a href=""https://github.com/rails/rails/issues/9454"">https://github.com/rails/rails/issues/9454</a> </p>

<p>For product with <code>properties</code> as hash, solved it as</p>

<pre><code>def product_params
  params.require(:product).permit(:title, :description).tap do |whitelisted|
    whitelisted[:properties] = params[:product][:properties]
  end
end
</code></pre>

<p>If you use <code>:raise</code> instead of <code>:log</code> for <code>config.action_controller.action_on_unpermitted_parameters</code> in your <code>environment</code> then remember to remove <code>properties</code> from <code>params</code> before calling <code>permit</code>. Then the method will be</p>

<pre><code>def product_params
  properties = params[:product].delete(:properties)
  params.require(:product).permit(:title, :description).tap do |whitelisted|
    whitelisted[:properties] = properties
  end
end
</code></pre>
",teknuk,,1405408566,1405408566,0
http://stackoverflow.com/a/24765528/4383938,How do I traverse up out of shadow dom?,941,Mark Kahn,,1405447817,1405448881,0,https://stackoverflow.com/questions/24765227/how-do-i-traverse-up-out-of-shadow-dom,"<p>You can use <code>shadowRoot.host</code> to give you the <code>&lt;div&gt;</code>. Likewise, <code>div.shadowRoot</code> would get you the div's shadow root. </p>
",ebidel,,1405448881,1405448881,0
https://stackoverflow.com/questions/153724/how-to-round-a-number-to-n-decimal-places-in-java/24780468#24780468,How to round a number to n decimal places in Java,1491278,Alex Spurling,Taryn,1222790494,1532616068,1490199748,,,,,,,
http://stackoverflow.com/a/24795559/2333354,std::map emplace/insert moving value being inserted,1913,PaperBirdMaster,Praetorian,1402469387,1408430288,1408430288,https://stackoverflow.com/questions/24156369/stdmap-emplace-insert-moving-value-being-inserted,"<p>Contrary to what the linked article says, I would say the language of the standard almost guarantees that this code does the wrong thing: it moves the pointer from <code>p</code>, and then destroys the object originally pointed to by <code>p</code> because in the end nothing gets inserted into the map <code>m</code> (since the key constructed from <code>""foo""</code> is already present). [I say ""almost"" only because the language of the Standard is less clear than one should wish; obviously the question at hand simply wasn't on the mind of whoever wrote this.]</p>

<p>Citing from table 102 in 23.2.4, entry <code>a_uniq.emplace(args)</code>, the effect is </p>

<blockquote>
  <p>Inserts a <code>value_type</code> object <code>t</code> constructed with <code>std::forward&lt;Args&gt;(args)...</code>if and only if there is no element in the container with key equivalent to the key of <code>t</code>.</p>
</blockquote>

<p>Here <code>value_type</code> for the case of a <code>std::map</code> is <code>std::pair&lt;const Key, T&gt;</code>, in the example with <code>Key</code> equal to <code>std::string</code> and <code>T</code> equal to <code>std::unique_ptr&lt;Foo&gt;</code>. So the object <code>t</code> referred to is (or would be) constructed as</p>

<pre><code>std::pair&lt;const std::string, std::unique_ptr&lt;Foo&gt;&gt; t(""foo"", std::move(p));
</code></pre>

<p>and the ""key of <code>t</code>"" is the first component of that pair. As the linked article indicates, the language is imprecise due to the conflation of construct and insert: one might construe that ""if and only if"" refers to both of them, and that therefore <code>t</code> is <em>neither constructed nor inserted</em> in case there is an element in the container with key equivalent to the key of <code>t</code>; then in this scenario nothing would be moved from <code>p</code> (because of the lack of construction) and <code>p</code> would not become null. However, there is a logical inconsistency in this reading of the cited phrase: if <code>t</code> should never be constructed, what on earth could the ""key of <code>t</code>"" refer to? Therefore I think the only reasonable reading of this text is: the object <code>t</code> is (unconditionally) constructed as indicated, and then <code>t</code> is inserted into the container if and only if there is no element in the container with key equivalent to the key of <code>t</code>. In the case <code>t</code> is not inserted (as in the example), the temporary will disappear on returning from the call to <code>emplace</code>, destroying the resource moved into it as it goes.</p>

<p>Of course this does not mean it is impossible for an implementation to do the right thing: <em>separately</em> construct the first (key) component of <code>t</code>, look up that key in the container, and <em>only if it is not found</em> construct the complete pair <code>t</code> (at this time moving the mapped-to object form <code>p</code> to the second component of <code>t</code>) and inserting that. (This does require that the key type is copy or move constructible, since what will become the first component of <code>t</code> is initially constructed in a different place.) It is exactly because such implementation is possible that the article proposes to provide a means to reliably ask for such behaviour. But the current language of the standard does not seem to give licence to such an implementation, and even less an obligation to behave like that.</p>

<hr>

<p>Let me add that I ran into this problem in practice, because I naively thought that having a nice new method <code>emplace</code> it would certainly be defined to work well with move semantics. So I wrote something along the lines of:</p>

<pre><code>auto p = m.emplace(key,std::move(mapped_to_value));
if (not p.second) // no insertion took place
{ /* some action with value p.first-&gt;second about to be overwritten here */
  p.first-&gt;second = std::move(mapped_to_value) // replace mapped-to value
}
</code></pre>

<p>It turned out to be not so, and in my ""mapped to"" type, which happened to contain both a shared pointer and a unique pointer, the shared pointer component behaved fine, but the unique pointer component would become null in case a previous entry in the map was overwritten. Given that this idiom does not work, I rewrote it to</p>

<pre><code>auto range = m.equal_range(key);
if (range.first==range.second) // the key was previously absent; insert a pair
  m.emplace_hint(range.first,key,std::move(mapped_to_value));
else // the key was present, replace the associated value
{ /* some action with value range.first-&gt;second about to be overwritten here */
  range.first-&gt;second = std::move(mapped_to_value) // replace mapped-to value
}
</code></pre>

<p>This is a reasonable work-around that works without much assumptions about the mapped-to type (notably it need not be default-constructible or copy-constructible, just move-constructible and move-assignable).</p>

<p>It looks like this idiom should even work for <code>unordered_map</code>, though I did not try it for that case. In fact looking closer, it works, but the use of <code>emplace_hint</code> is pointless, since unlike for the case of <code>std::map</code>, the method <code>std::unordered_map::equal_range</code> is <strong>obliged</strong> in case of an absent key to return a pair of iterators both equal to the (uninformative) value returned by <code>std::unordered_map::end</code>, rather than some other pair of equal iterators. Indeed it seems that <code>std::unordered_map::emplace_hint</code>, which is allowed to ignore the hint, is almost forced to do so, since either the key is already present and <code>emplace_hint</code> should do nothing (except gobble up the resources possibly moved into its temporary pair <code>t</code>), or else (no such key is present) there is no way to obtain a useful hint, since neither the methods <code>m.find</code> nor <code>m.equal_range</code> are allowed to return anything else than <code>m.end()</code> when invoked with a key that turns out to be absent.</p>
",Marc van Leeuwen,Marc van Leeuwen,1405575115,1405597790,1405597790
http://stackoverflow.com/a/24796162/231026,"ActionView::Template::Error: Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true",18490,Chuanpin Zhu,Community,1394403518,1507679695,1495540473,https://stackoverflow.com/questions/22288951/actionviewtemplateerror-missing-host-to-link-to-please-provide-the-host-p,"<p>In the end I added the following with the correct value to each environment file: </p>

<p><em>test.rb</em> / <em>development.rb</em> / <em>production.rb</em></p>

<p><strong>Devise 3.2.x - 4.x.x</strong> </p>

<p><strong>Rails 4.1.x</strong>  &amp;&amp;  <strong>Rails 4.2.x</strong> &amp;&amp;  <strong>Rails 5.x.x</strong></p>

<p>Thanks to <a href=""https://stackoverflow.com/a/23208572/737275"">maudulus</a></p>

<pre><code># Default Mailer Host
  Rails.application.routes.default_url_options[:host] = 'domain.com'
</code></pre>
",blnc,blnc,1405577907,1507679695,1507679695
http://stackoverflow.com/a/24802198/2726725,node.js mongodb select document by _id node-mongodb-native,75105,Mark,Mark,1296851164,1542388202,1296853699,https://stackoverflow.com/questions/4902569/node-js-mongodb-select-document-by-id-node-mongodb-native,"<p>now you can just use this:</p>

<pre><code>var ObjectID = require('mongodb').ObjectID;
var o_id = new ObjectID(""yourObjectIdString"");
....
collection.update({'_id': o_id});
</code></pre>

<p>You can see documentation <a href=""http://mongodb.github.io/node-mongodb-native/api-bson-generated/objectid.html#objectid"" rel=""noreferrer"">here</a></p>
",nktssh,,1405596231,1405596231,0
http://stackoverflow.com/a/2481126/378298,How can I read and parse CSV files in C++?,300147,User1,Shog9,1247498750,1545255413,1396881570,https://stackoverflow.com/questions/1120140/how-can-i-read-and-parse-csv-files-in-c,"<p>If you <strong>DO</strong> care about parsing CSV correctly, this will do it...relatively slowly as it works one char at a time.</p>

<pre><code> void ParseCSV(const string&amp; csvSource, vector&lt;vector&lt;string&gt; &gt;&amp; lines)
    {
       bool inQuote(false);
       bool newLine(false);
       string field;
       lines.clear();
       vector&lt;string&gt; line;

       string::const_iterator aChar = csvSource.begin();
       while (aChar != csvSource.end())
       {
          switch (*aChar)
          {
          case '""':
             newLine = false;
             inQuote = !inQuote;
             break;

          case ',':
             newLine = false;
             if (inQuote == true)
             {
                field += *aChar;
             }
             else
             {
                line.push_back(field);
                field.clear();
             }
             break;

          case '\n':
          case '\r':
             if (inQuote == true)
             {
                field += *aChar;
             }
             else
             {
                if (newLine == false)
                {
                   line.push_back(field);
                   lines.push_back(line);
                   field.clear();
                   line.clear();
                   newLine = true;
                }
             }
             break;

          default:
             newLine = false;
             field.push_back(*aChar);
             break;
          }

          aChar++;
       }

       if (field.size())
          line.push_back(field);

       if (line.size())
          lines.push_back(line);
    }
</code></pre>
",Michael,unixman83,1269040687,1322967291,1322967291
http://stackoverflow.com/a/2483859/1460422,"highlight the word in the string, if it contains the keyword",24555,Simon,Simon,1269103376,1442479194,1269104307,https://stackoverflow.com/questions/2483844/highlight-the-word-in-the-string-if-it-contains-the-keyword,"<p>Try this:</p>

<pre><code>preg_replace(""/\w*?$keyword\w*/i"", ""&lt;b&gt;$0&lt;/b&gt;"", $str)
</code></pre>

<p><code>\w*?</code> matches any word characters before the keyword (as least as possible) and <code>\w*</code> any word characters after the keyword.</p>

<p>And I recommend you to use <a href=""http://php.net/preg_quote"" rel=""noreferrer""><code>preg_quote</code></a> to escape the keyword:</p>

<pre><code>preg_replace(""/\w*?"".preg_quote($keyword).""\w*/i"", ""&lt;b&gt;$0&lt;/b&gt;"", $str)
</code></pre>

<p>For Unicode support, use the <em>u</em> flag and <code>\p{L}</code> instead of <code>\w</code>:</p>

<pre><code>preg_replace(""/\p{L}*?"".preg_quote($keyword).""\p{L}*/ui"", ""&lt;b&gt;$0&lt;/b&gt;"", $str)
</code></pre>
",Gumbo,Gumbo,1269103597,1350758065,1350758065
http://stackoverflow.com/a/24844574/1084488,Is it safe to cast with getActivity()?,2450,crocboy,,1405799195,1545379267,0,https://stackoverflow.com/questions/24844314/is-it-safe-to-cast-with-getactivity,"<p>You can use this -</p>

<pre><code>private ParentActivity callback;

@Override
public void onAttach(Activity activity)
{
    //callback = (ParentActivity ) activity;
    // make sure there is no cast exception
    callback = (ParentActivty.class.isAssignableFrom(activity
            .getClass())) ? (ParentActivity) activity : null;

    super.onAttach(activity);
}

@Override
public void onDetach()
{
    callback = null;
    super.onDetach();
}
</code></pre>

<p>now when you do any method call , call it like this -</p>

<pre><code>if(callback!=null)
{
callback.someMethod();
}
</code></pre>

<p>this method is safe .</p>
",Ratul Ghosh,danny117,1405801012,1405804123,1405804123
http://stackoverflow.com/a/24847480/417018,Can&#39;t use enum class as unordered_map key,34897,Appleshell,Appleshell,1379367991,1519525125,1379368553,https://stackoverflow.com/questions/18837857/cant-use-enum-class-as-unordered-map-key,"<p>I use a functor object to calculate hash of <code>enum class</code>:</p>

<pre class=""lang-cpp prettyprint-override""><code>struct EnumClassHash
{
    template &lt;typename T&gt;
    std::size_t operator()(T t) const
    {
        return static_cast&lt;std::size_t&gt;(t);
    }
};
</code></pre>

<p>Now you can use it as 3rd template-parameter of <code>std::unordered_map</code>:</p>

<pre><code>enum class MyEnum {};

std::unordered_map&lt;MyEnum, int, EnumClassHash&gt; myMap;
</code></pre>

<p>So you don't need to provide a specialization of <code>std::hash</code>, the template argument deduction does the job. Furthermore, you can use the word <code>using</code> and make your own <code>unordered_map</code> that use <code>std::hash</code> or <code>EnumClassHash</code> depending on the <code>Key</code> type:</p>

<pre><code>template &lt;typename Key&gt;
using HashType = typename std::conditional&lt;std::is_enum&lt;Key&gt;::value, EnumClassHash, std::hash&lt;Key&gt;&gt;::type;

template &lt;typename Key, typename T&gt;
using MyUnorderedMap = std::unordered_map&lt;Key, T, HashType&lt;Key&gt;&gt;;
</code></pre>

<p>Now you can use <code>MyUnorderedMap</code> with <code>enum class</code> or another type:</p>

<pre><code>MyUnorderedMap&lt;int, int&gt; myMap2;
MyUnorderedMap&lt;MyEnum, int&gt; myMap3;
</code></pre>

<p>Theoretically, <code>HashType</code> could use <code>std::underlying_type</code> and then the <code>EnumClassHash</code> will not be necessary. That could be something like this, <strong>but I haven't tried yet</strong>:</p>

<pre><code>template &lt;typename Key&gt;
using HashType = typename std::conditional&lt;std::is_enum&lt;Key&gt;::value, std::hash&lt;std::underlying_type&lt;Key&gt;::type&gt;, std::hash&lt;Key&gt;&gt;::type;
</code></pre>

<p>If using <code>std::underlying_type</code> works, could be a very good proposal for the standard.</p>
",Daniel,Daniel,1405831852,1519525125,1519525125
http://stackoverflow.com/a/24861313/63991,Line number in a C++ istream?,661,Nicolas Louis Guillemot,,1405927868,1405933613,0,https://stackoverflow.com/questions/24859739/line-number-in-a-c-istream,"<p>You can use a filtering streambuf, and keep count there: </p>

<pre><code>class LineNumberStreambuf : public std::streambuf
{
    std::streambuf* mySource;
    std::istream* myOwner;
    bool myIsAtStartOfLine;
    int myLineNumber;

    char myBuffer;
protected:
    int underflow()
    {
        int ch = mySource-&gt;sbumpc();
        if ( ch != EOF ) {
            myBuffer = ch;
            setg( &amp;myBuffer, &amp;myBuffer, &amp;myBuffer + 1 );
            if ( myIsAtStartOfLine ) {
                ++ myLineNumber;
            }
            myIsAtStartOfLine = myBuffer == '\n';
        }
        return ch;
    }
public:
    LineNumberStreambuf( std::streambuf* source )
        : mySource( source )
        , myOwner( nullptr )
        , myIsAtStartOfLine( true )
        , myLineNumber( 0 )
    {
    }
    LineNumberStreambuf( std::istream&amp; owner )
        : mySource( owner.rdbuf() )
        , myOwner( &amp;owner )
        , myIsAtStartOfLine( true )
        , myLineNumber( 0 )
    {
        myOwner-&gt;rdbuf( this );
    }
    ~LineNumberStreambuf()
    {
        if ( myOwner != nullptr ) {
            myOwner.rdbuf( mySource );
        }
    }
    int lineNumber() const
    {
        return myLineNumber;
    }
};
</code></pre>

<p>Just insert this into your input:</p>

<pre><code>LineNumberStreambuf ln( std::cin );
//  ...
std::cerr &lt;&lt; ""Error ("" &lt;&lt; ln.lineNumber &lt;&lt; ""): ..."" &lt;&lt; std::endl;
</code></pre>

<p>Note that line numbers will only reflect the input which takes
place through the streambuf.</p>
",James Kanze,,1405933613,1405933613,0
http://stackoverflow.com/a/24876996/562978,How do I create multiple bundles with gulp-browserify?,580,thebjorn,,1405876649,1438602989,0,https://stackoverflow.com/questions/24852963/how-do-i-create-multiple-bundles-with-gulp-browserify,"<p>After a lot of trial-and-error, and after abandoning the <code>gulp-browserify</code> plugin (it's black-listed, but examples of using <code>browserify</code> directly in gulp are hard to come by), I managed to get this working. The salient parts of my <code>gulpfile.js</code> are (I'm not sure at all what the <code>source</code> calls do):</p>

<pre class=""lang-js prettyprint-override""><code>var gulp = require('gulp'),
    gutil = require('gulp-util'),
    clean = require('gulp-rimraf'),
    rename = require('gulp-rename'),
    source = require('vinyl-source-stream'),
    browserify = require('browserify');

gulp.task('browserify:externals', function () {
    var vendor = browserify(['jquery', 'es5-shim', 'lodash']);
    vendor.require('jquery');
    vendor.require('lodash', {expose: '_'});
    vendor.require('es5-shim');
    return vendor.bundle()
        .pipe(source(""not-used-but-needed-string.js""))
        .pipe(rename('external.js'))
        .pipe(gulp.dest('./dist'))
        .on('error', gutil.log);
});

gulp.task('browserify', ['browserify:externals'], function () {
    var app = browserify('./index.js');
    app.external('jquery');
    app.external('es5-shim');
    app.require('./index.js', {expose: 'maxby'});
    return app.bundle()
        .pipe(source(""not-used-but-needed-string.js""))
        .pipe(rename('maxby.js'))
        .pipe(gulp.dest('./dist'))
        .on('error', gutil.log);
});
</code></pre>

<p>I've also created a <a href=""https://github.com/thebjorn/browserify-vendor-example"" rel=""nofollow"">repository</a> with a complete, but minimal example (I'm quite new at this so any corrections are much appreciated).</p>
",thebjorn,Konstantin Grushetsky,1405988797,1438602989,1438602989
http://stackoverflow.com/a/249008/148668,Correctly over-loading a stringbuf to replace cout in a MATLAB mex file,3228,user27315,OmG,1225207038,1558822322,1558822176,https://stackoverflow.com/questions/243696/correctly-over-loading-a-stringbuf-to-replace-cout-in-a-matlab-mex-file,"<p>Shane, thanks very much for your help.  Here's my final working implementation.</p>

<pre><code>class mstream : public std::streambuf {
public:
protected:
  virtual std::streamsize xsputn(const char *s, std::streamsize n); 
  virtual int overflow(int c = EOF);
}; 
</code></pre>

<p>...</p>

<pre><code>std::streamsize 
mstream::xsputn(const char *s, std::streamsize n) 
{
  mexPrintf(""%.*s"",n,s);
  return n;
}

int 
mstream::overflow(int c) 
{
    if (c != EOF) {
      mexPrintf(""%.1s"",&amp;c);
    }
    return 1;
}
</code></pre>

<p>...</p>

<pre><code>// Replace the std stream with the 'matlab' stream
// Put this in the beginning of the mex function
mstream mout;
std::streambuf *outbuf = std::cout.rdbuf(&amp;mout); 
</code></pre>

<p>...</p>

<pre><code>// Restore the std stream buffer 
std::cout.rdbuf(outbuf); 
</code></pre>
",user27315,Community,1225330093,1319142267,1319142267
http://stackoverflow.com/a/2495650/133514,Define a method that is a closure in Ruby,2822,pupeno,,1269290302,1419028091,0,https://stackoverflow.com/questions/2495550/define-a-method-that-is-a-closure-in-ruby,"<p>This works (tested in irb):</p>

<p><strong>NOTE: This changes only <code>str</code> - not all instances of String. Read below for details as to why this works</strong></p>

<pre><code>another_str = ""please don't change me!""
str =         ""ha, try to change my to_s! hahaha!""
proc = Proc.new { ""take that, Mr. str!"" }

singleton_class = class &lt;&lt; str; self; end

singleton_class.send(:define_method, :to_s) do
  proc.call
end

puts str.to_s         #=&gt; ""take that, Mr. str!""
puts another_str.to_s #=&gt; ""please don't change me!""

# What! We called String#define_method, right?

puts String           #=&gt;  String
puts singleton_class  #=&gt;  #&lt;Class:#&lt;String:0x3c788a0&gt;&gt;

# ... nope! singleton_class is *not* String
# Keep reading if you're curious :)
</code></pre>

<p>This works because you are opening str's <a href=""http://www.contextualdevelopment.com/articles/2008/ruby-singleton"" rel=""noreferrer"">singleton class</a> and defining a method there. Because this, as well as the call to <a href=""http://ruby-doc.org/core/classes/Module.html#M001654"" rel=""noreferrer"">Module#define_method</a>, have what some call a ""flat scope"", you're able to access variables that would be out of scope if you used <code>def to_s; 'whatever'; end</code>.</p>

<p>You may want to check out some of these other ""metaprogramming spells"" here:</p>

<p><a href=""http://media.pragprog.com/titles/ppmetr/spells.pdf"" rel=""noreferrer"">media.pragprog.com/titles/ppmetr/spells.pdf</a></p>

<p><br/>
<strong>Why does it only change <code>str</code>?</strong></p>

<p>Because Ruby has a couple interesting tricks up it's sleeves. In the Ruby object model, a method invocation results in the reciever searching not only it's class (and <em>it's</em> ancestors), but also it's singleton class (or as Matz would call it, it's eigenclass). This singleton class is what allows you to [re]define a method for a single object. These methods are called ""singleton methods"". In the example above, we are doing just that - defining a singleton method name <code>to_s</code>. It's functionaly identical to this:</p>

<pre><code>def str.to_s
  ...
end
</code></pre>

<p>The only difference is that we get to use a closure when calling <code>Module#define_method</code>, whereas <code>def</code> is a keyword, which results in a change of scope.</p>

<p><strong>Why can't it be simpler?</strong></p>

<p>Well, the good news is that you're programming in Ruby, so feel free to go crazy:</p>

<pre><code>class Object
  def define_method(name, &amp;block)
    singleton = class &lt;&lt; self; self; end
    singleton.send(:define_method, name) { |*args| block.call(*args) }
  end
end


str = 'test'
str.define_method(:to_s) { ""hello"" }
str.define_method(:bark) { ""woof!"" }
str.define_method(:yell) { ""AAAH!"" }

puts str.to_s #=&gt; hello
puts str.bark #=&gt; woof!
puts str.yell #=&gt; AAAH!
</code></pre>

<p><strong>And, if you're curious...</strong></p>

<p>You know class methods? Or, in some languages, we'd call them static methods? Well, those don't <em>really</em> exist in Ruby. In Ruby, class methods are really just methods defined in the Class object's singleton class.</p>

<p>If that all sounds crazy, take a look at the links I provided above. A lot of Ruby's power can only be tapped into if you know how to metaprogram - in which case you'll really want to know about singleton classes/methods, and more generally, the Ruby object model.</p>

<p>HTH</p>

<p>-Charles</p>
",Charles,Charles,1269291128,1269296272,1269296272
http://stackoverflow.com/a/249695/115478,Constant Amortized Time,77554,VarunGupta,Hank Gay,1223973167,1519102648,1223977975,https://stackoverflow.com/questions/200384/constant-amortized-time,"<p>Amortised time explained in simple terms:</p>

<p>If you do an operation say a million times, you don't really care about the worst-case or the best-case of that operation - what you care about is how much time is taken in total when you repeat the operation a million times.</p>

<p>So it doesn't matter if the operation is very slow once in a while, as long as ""once in a while"" is rare enough for the slowness to be diluted away. Essentially amortised time means ""average time taken per operation, if you do many operations"". Amortised time doesn't have to be constant; you can have linear and logarithmic amortised time or whatever else.</p>

<p>Let's take mats' example of a dynamic array, to which you repeatedly add new items. Normally adding an item takes constant time (that is, <code>O(1)</code>). But each time the array is full, you allocate twice as much space, copy your data into the new region, and free the old space. Assuming allocates and frees run in constant time, this enlargement process takes <code>O(n)</code> time where n is the current size of the array.</p>

<p>So each time you enlarge, you take about twice as much time as the last enlarge. But you've also waited twice as long before doing it! The cost of each enlargement can thus be ""spread out"" among the insertions. This means that in the long term, the total time taken for adding <em>m</em> items to the array is <code>O(m)</code>, and so the amortised time (i.e. time per insertion) is <code>O(1)</code>.</p>
",Artelius,Motti,1225360114,1241546992,1241546992
http://stackoverflow.com/a/24980290/978369,Why does google.load cause my page to go blank?,25804,Enrico Carlesso,brenjt,1330618156,1436902235,1330618564,https://stackoverflow.com/questions/9519673/why-does-google-load-cause-my-page-to-go-blank,"<p>You just have to define a callback, and it will not clear the page (maybe the older versions of google.load() did, but apparently the new ones do not if used with callback). Here a simplified example when I'm loading the ""google.charts"" lib:</p>

<pre><code>if(google) {
    google.load('visualization', '1.0', {
        packages: ['corechart'],
        callback: function() {
            // do stuff, if you wan't - it doesn't matter, because the page isn't blank!
        }
    } )
}
</code></pre>

<p>When doing it whitout callback(), I still get the blank page too - but with callback, it's fixed for me.</p>
",Katai,Trott,1406459088,1420475663,1420475663
http://stackoverflow.com/a/25103444/180674,label empty or too long - python urllib2,8795,doniyor,doniyor,1407056294,1407059081,1407057880,https://stackoverflow.com/questions/25103126/label-empty-or-too-long-python-urllib2,"<p>The problem is your URL cannot properly be encoded as per the <a href=""http://en.wikipedia.org/wiki/Internationalized_domain_name"" rel=""noreferrer""><code>IDNA</code> rules</a>, which govern how internationalized domain names are converted:</p>

<blockquote>
  <p>The conversions between ASCII and non-ASCII forms of a domain name are
  accomplished by algorithms called ToASCII and ToUnicode. These
  algorithms are not applied to the domain name as a whole, but rather
  to individual labels. For example, <strong>if the domain name is
  www.example.com, then the labels are www, example, and com. ToASCII or
  ToUnicode <em>are applied to each of these three separately</em>.</strong></p>
  
  <p>The details of these two algorithms are complex, and are specified in
  RFC 3490. The following gives an overview of their function.</p>
  
  <p>ToASCII leaves unchanged any ASCII label, <strong>but will fail if the label
  is unsuitable for the Domain Name System.</strong> If given a label containing
  at least one non-ASCII character, ToASCII will apply the Nameprep
  algorithm, which converts the label to lowercase and performs other
  normalization, and will then translate the result to ASCII using
  Punycode[16] before prepending the four-character string ""xn--"".[17]
  This four-character string is called the ASCII Compatible Encoding
  (ACE) prefix, and is used to distinguish Punycode encoded labels from
  ordinary ASCII labels. The ToASCII algorithm can fail in several ways;
  for example, the final string could exceed the 63-character limit of a
  DNS name. A label for which ToASCII fails cannot be used in an
  internationalized domain name.</p>
</blockquote>

<p>In your case a '' (blank) is not a valid domain name character, and you end up with this:</p>

<pre><code>&gt;&gt;&gt; '.f.de'.encode('idna')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""/usr/lib/python2.6/encodings/idna.py"", line 164, in encode
    result.append(ToASCII(label))
  File ""/usr/lib/python2.6/encodings/idna.py"", line 73, in ToASCII
    raise UnicodeError(""label empty or too long"")
UnicodeError: label empty or too long
</code></pre>

<p>If you change the domain name to 'a.f.de' it should not raise this exception.</p>
",Burhan Khalid,,1407059081,1407059081,0
http://stackoverflow.com/a/2511075/2422398,Persistent Hashing of Strings in Python,12941,Cerin,Jason Sundram,1269461656,1372668547,1372668547,https://stackoverflow.com/questions/2511058/persistent-hashing-of-strings-in-python,"<p>Use a hash algorithm such as MD5 or SHA1, then convert the <code>hexdigest</code> via <code>int()</code>:</p>

<pre><code>&gt;&gt;&gt; import hashlib
&gt;&gt;&gt; int(hashlib.md5('Hello, world!').hexdigest(), 16)
144653930895353261282233826065192032313L
</code></pre>
",Ignacio Vazquez-Abrams,Community,1269461849,1336570025,1336570025
http://stackoverflow.com/a/25155518/1090455,python numpy machine epsilon,78665,Bob,,1380729781,1420646382,0,https://stackoverflow.com/questions/19141432/python-numpy-machine-epsilon,"<p>Another easy way to get epsilon is:</p>

<pre><code>In [1]: 7./3 - 4./3 -1
Out[1]: 2.220446049250313e-16
</code></pre>
",Ullen,ali_m,1407313494,1420564081,1420564081
http://stackoverflow.com/a/25167332/2726725,express serves index.html even when my routing is to a different file,4663,Kaya Toast,davnicwil,1407346807,1443463577,1443463577,https://stackoverflow.com/questions/25166726/express-serves-index-html-even-when-my-routing-is-to-a-different-file,"<p>This is because you declared <code>app.use(express.static)</code> <em>before</em> <code>app.get('/')</code>. Express checks routes in the order they are declared, and since <code>index.html</code> is a default filename which is used by <code>static</code> middleware, it shows <code>index.html</code> content.</p>

<p>To fix this you may either put <code>app.use(express.static)</code> after <code>app.get('/')</code>, or set <code>index</code> property of <code>static</code> second argument to non-existing file (<code>false</code> doesn't seem to work):</p>

<pre><code>app.use(express.static(path.join(__dirname, 'public'), {index: '_'}));
</code></pre>
",Oleg,Oleg,1407349024,1407350805,1407350805
http://stackoverflow.com/a/2518021/1292905,ucfirst() function for multibyte character encodings,41526,Simon,Community,1269538424,1561008519,1495539206,https://stackoverflow.com/questions/2517947/ucfirst-function-for-multibyte-character-encodings,"<p>There is no <code>mb_ucfirst</code> function, as you've already noticed. You can fake a <code>mb_ucfirst</code> with two <code>mb_substr</code>:</p>

<pre><code>function mb_ucfirst($string, $encoding)
{
    $strlen = mb_strlen($string, $encoding);
    $firstChar = mb_substr($string, 0, 1, $encoding);
    $then = mb_substr($string, 1, $strlen - 1, $encoding);
    return mb_strtoupper($firstChar, $encoding) . $then;
}
</code></pre>
",zneak,zneak,1269539009,1392657739,1392657739
http://stackoverflow.com/a/25206079/1060738,Decorator to print function call details - parameters names and effective values,13358,warvariuc,,1306926975,1533630581,0,https://stackoverflow.com/questions/6200270/decorator-to-print-function-call-details-parameters-names-and-effective-values,"<p>@warvariuc's answer, upgraded to Python 3:</p>

<pre><code>def dumpArgs(func):
    '''Decorator to print function call details - parameters names and effective values'''
    def wrapper(*func_args, **func_kwargs):
        arg_names = func.__code__.co_varnames[:func.__code__.co_argcount]
        args = func_args[:len(arg_names)]
        defaults = func.__defaults__ or ()
        args = args + defaults[len(defaults) - (func.__code__.co_argcount - len(args)):]
        params = list(zip(arg_names, args))
        args = func_args[len(arg_names):]
        if args: params.append(('args', args))
        if func_kwargs: params.append(('kwargs', func_kwargs))
        print(func.__name__ + ' (' + ', '.join('%s = %r' % p for p in params) + ' )')
        return func(*func_args, **func_kwargs)
    return wrapper  

@dumpArgs
def test(a, b = 4, c = 'blah-blah', *args, **kwargs):
    pass

test(1)
test(1, 3)
test(1, d = 5)
test(1, 2, 3, 4, 5, d = 6, g = 12.9)
</code></pre>
",aliteralmind,aliteralmind,1407508900,1407509321,1407509321
http://stackoverflow.com/a/2524761/664095,Check whether the string is a unix timestamp,69604,RHPT,hakre,1269619235,1458042699,1341568290,https://stackoverflow.com/questions/2524680/check-whether-the-string-is-a-unix-timestamp,"<p>Ok, after fiddling with this for some time, I withdraw the solution with <code>date('U')</code> and suggest to use this one instead:</p>

<pre><code>function isValidTimeStamp($timestamp)
{
    return ((string) (int) $timestamp === $timestamp) 
        &amp;&amp; ($timestamp &lt;= PHP_INT_MAX)
        &amp;&amp; ($timestamp &gt;= ~PHP_INT_MAX);
}
</code></pre>

<p>This check will only return true if the given <code>$timestamp</code> is a <strong>string</strong> and consists solely of digits and an optional minus character. The number also has to be within the bit range of an integer (<strong>EDIT</strong>: <a href=""https://stackoverflow.com/questions/3377537/check-if-a-string-holds-an-integer-in-php/3377560#3377560"">actually unneeded as shown here</a>).</p>

<pre><code>var_dump( isValidTimeStamp(1)             ); // false
var_dump( isValidTimeStamp('1')           ); // TRUE
var_dump( isValidTimeStamp('1.0')         ); // false
var_dump( isValidTimeStamp('1.1')         ); // false
var_dump( isValidTimeStamp('0xFF')        ); // false
var_dump( isValidTimeStamp('0123')        ); // false
var_dump( isValidTimeStamp('01090')       ); // false
var_dump( isValidTimeStamp('-1000000')    ); // TRUE
var_dump( isValidTimeStamp('+1000000')    ); // false
var_dump( isValidTimeStamp('2147483648')  ); // false
var_dump( isValidTimeStamp('-2147483649') ); // false
</code></pre>

<p>The check for PHP_INT_MAX is to ensure that your string can be used correctly by <code>date</code> and the likes, e.g. it ensures this doesn't happen*:</p>

<pre><code>echo date('Y-m-d', '2147483648');  // 1901-12-13
echo date('Y-m-d', '-2147483649'); // 2038-01-19
</code></pre>

<p>On 64bit systems the integer is of course larger than that and the function will no longer return false for ""2147483648"" and ""-2147483649"" but for the corresponding larger numbers.</p>

<hr>

<p><sup>(*) <em>Note: I'm not 100% sure, the bit range corresponds with what date can use though</em></sup></p>
",Gordon,Community,1269619815,1410360258,1495539205
http://stackoverflow.com/a/2528453/315168,Can SQLAlchemy DateTime Objects Only Be Naive?,7919,Brighid McDonnell,,1269666060,1349623670,0,https://stackoverflow.com/questions/2528189/can-sqlalchemy-datetime-objects-only-be-naive,"<p>There is a <code>timezone</code> parameter to <a href=""http://docs.sqlalchemy.org/en/latest/core/types.html#sqlalchemy.types.DateTime"" rel=""noreferrer""><code>DateTime</code></a> column time, so there is no problem with storing timezone-aware <code>datetime</code> objects. However I found convenient to convert stored <code>datetime</code> to UTC automatically with simple type decorator:</p>

<pre><code>from sqlalchemy import types
from dateutil.tz import tzutc
from datetime import datetime

class UTCDateTime(types.TypeDecorator):

    impl = types.DateTime

    def process_bind_param(self, value, engine):
        if value is not None:
            return value.astimezone(tzutc())

    def process_result_value(self, value, engine):
        if value is not None:
            return datetime(value.year, value.month, value.day,
                            value.hour, value.minute, value.second,
                            value.microsecond, tzinfo=tzutc())
</code></pre>

<p>Note, that is behaves nicely when you use naive <code>datetime</code> by accident (meaning it will raise a ValueError).</p>
",Denis Otkidach,Tobu,1269673287,1349623670,1349623670
http://stackoverflow.com/a/2532344/3170835,Validate a hostname string,34906,kostmo,Community,1269755932,1557130578,1495542738,https://stackoverflow.com/questions/2532053/validate-a-hostname-string,"<pre><code>import re
def is_valid_hostname(hostname):
    if len(hostname) &gt; 255:
        return False
    if hostname[-1] == ""."":
        hostname = hostname[:-1] # strip exactly one dot from the right, if present
    allowed = re.compile(""(?!-)[A-Z\d-]{1,63}(?&lt;!-)$"", re.IGNORECASE)
    return all(allowed.match(x) for x in hostname.split("".""))
</code></pre>

<p>ensures that each segment</p>

<ul>
<li>contains at least one character and a maximum of 63 characters</li>
<li>consists only of allowed characters</li>
<li>doesn't begin or end with a hyphen.</li>
</ul>

<p>It also avoids double negatives (<code>not disallowed</code>), and if <code>hostname</code> ends in a <code>.</code>, that's OK, too. It will (and should) fail if <code>hostname</code> ends in more than one dot.</p>
",Tim Pietzcker,Olli,1269766371,1382964175,1382964175
http://stackoverflow.com/a/25335783/166700,wrapped output for python logging.StreamHandler(),956,brammator,brammator,1400352865,1408147627,1400357722,https://stackoverflow.com/questions/23714981/wrapped-output-for-python-logging-streamhandler,"<p>With the caveat that this indeed is bad for any logs you're going to be saving (because it breaks <code>grep</code> or similar line-by-line searching), the easy way you could do this is with the <code>textwrap</code> module and a custom <code>logging.Formatter</code> subclass.</p>

<p><code>textwrap</code> is a standard library module that word-wraps paragraphs and can also apply indentation and some other formatting. All that's really needed is to hook it up by making a custom formatter class that overrides the <code>format()</code> method (which handles putting together the entire log message, as opposed to some of the other methods that handle parts):</p>

<pre><code>import logging
import textwrap

class WrappedFixedIndentingLog(logging.Formatter):
    def __init__(self, fmt=None, datefmt=None, style='%', width=70, indent=4):
        super().__init__(fmt=fmt, datefmt=datefmt, style=style)
        self.wrapper = textwrap.TextWrapper(width=width, subsequent_indent=' '*indent)

    def format(self, record):
        return self.wrapper.fill(super().format(record))

# standard stuff
rootLogger = logging.getLogger()
rootLogger.setLevel(logging.DEBUG)
consLogger = logging.StreamHandler()
rootLogger.addHandler(consLogger)

# indent=18 matches fixed width of asctime + levelname + spaces
consLogger.setFormatter(WrappedFixedIndentingLog(
    '%(asctime)-8s %(levelname)-8s %(message)s', '%H:%M:%S', indent=18))

message = ""Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.""
rootLogger.log(logging.DEBUG, message)
</code></pre>

<p>Outputs:</p>

<pre class=""lang-none prettyprint-override""><code>18:48:56 DEBUG    Lorem ipsum dolor sit amet, consectetur adipisicing
                  elit, sed do eiusmod tempor incididunt ut labore et
                  dolore magna aliqua. Ut enim ad minim veniam, quis
                  nostrud exercitation ullamco laboris nisi ut aliquip
                  ex ea commodo consequat. Duis aute irure dolor in
                  reprehenderit in voluptate velit esse cillum dolore
                  eu fugiat nulla pariatur. Excepteur sint occaecat
                  cupidatat non proident, sunt in culpa qui officia
                  deserunt mollit anim id est laborum.
</code></pre>
",Jason S,,1408147627,1408147627,0
http://stackoverflow.com/a/25370978/1460422,PHP get actual maximum upload size,76883,Zulakis,SeldomNeedy,1351195886,1516114823,1445029062,https://stackoverflow.com/questions/13076480/php-get-actual-maximum-upload-size,"<p>Drupal has this implemented fairly elegantly:</p>

<pre><code>// Returns a file size limit in bytes based on the PHP upload_max_filesize
// and post_max_size
function file_upload_max_size() {
  static $max_size = -1;

  if ($max_size &lt; 0) {
    // Start with post_max_size.
    $post_max_size = parse_size(ini_get('post_max_size'));
    if ($post_max_size &gt; 0) {
      $max_size = $post_max_size;
    }

    // If upload_max_size is less, then reduce. Except if upload_max_size is
    // zero, which indicates no limit.
    $upload_max = parse_size(ini_get('upload_max_filesize'));
    if ($upload_max &gt; 0 &amp;&amp; $upload_max &lt; $max_size) {
      $max_size = $upload_max;
    }
  }
  return $max_size;
}

function parse_size($size) {
  $unit = preg_replace('/[^bkmgtpezy]/i', '', $size); // Remove the non-unit characters from the size.
  $size = preg_replace('/[^0-9\.]/', '', $size); // Remove the non-numeric characters from the size.
  if ($unit) {
    // Find the position of the unit in the ordered string which is the power of magnitude to multiply a kilobyte by.
    return round($size * pow(1024, stripos('bkmgtpezy', $unit[0])));
  }
  else {
    return round($size);
  }
}
</code></pre>

<p>The above functions are available anywhere in Drupal, or you can copy it and use it in your own project subject to the terms of the GPL license version 2 or later.</p>

<p>As for parts 2 and 3 of your question, you will need to parse the <code>php.ini</code> file directly. These are essentially configuration errors, and PHP is resorting to fallback behaviors. It appears you can actually get the location of the loaded <code>php.ini</code> file in PHP, although trying to read from it may not work with basedir or safe-mode enabled:</p>

<pre><code>$max_size = -1;
$files = array_merge(array(php_ini_loaded_file()), explode("",\n"", php_ini_scanned_files()));
foreach (array_filter($files) as $file) {
  $ini = parse_ini_file($file);
  $regex = '/^([0-9]+)([bkmgtpezy])$/i';
  if (!empty($ini['post_max_size']) &amp;&amp; preg_match($regex, $ini['post_max_size'], $match)) {
    $post_max_size = round($match[1] * pow(1024, stripos('bkmgtpezy', strtolower($match[2])));
    if ($post_max_size &gt; 0) {
      $max_size = $post_max_size;
    }
  }
  if (!empty($ini['upload_max_filesize']) &amp;&amp; preg_match($regex, $ini['upload_max_filesize'], $match)) {
    $upload_max_filesize = round($match[1] * pow(1024, stripos('bkmgtpezy', strtolower($match[2])));
    if ($upload_max_filesize &gt; 0 &amp;&amp; ($max_size &lt;= 0 || $max_size &gt; $upload_max_filesize) {
      $max_size = $upload_max_filesize;
    }
  }
}

echo $max_size;
</code></pre>
",meustrus,meustrus,1408391439,1504106146,1504106146
http://stackoverflow.com/a/25370978/5678759,PHP get actual maximum upload size,76883,Zulakis,SeldomNeedy,1351195886,1516114823,1445029062,https://stackoverflow.com/questions/13076480/php-get-actual-maximum-upload-size,"<p>Drupal has this implemented fairly elegantly:</p>

<pre><code>// Returns a file size limit in bytes based on the PHP upload_max_filesize
// and post_max_size
function file_upload_max_size() {
  static $max_size = -1;

  if ($max_size &lt; 0) {
    // Start with post_max_size.
    $post_max_size = parse_size(ini_get('post_max_size'));
    if ($post_max_size &gt; 0) {
      $max_size = $post_max_size;
    }

    // If upload_max_size is less, then reduce. Except if upload_max_size is
    // zero, which indicates no limit.
    $upload_max = parse_size(ini_get('upload_max_filesize'));
    if ($upload_max &gt; 0 &amp;&amp; $upload_max &lt; $max_size) {
      $max_size = $upload_max;
    }
  }
  return $max_size;
}

function parse_size($size) {
  $unit = preg_replace('/[^bkmgtpezy]/i', '', $size); // Remove the non-unit characters from the size.
  $size = preg_replace('/[^0-9\.]/', '', $size); // Remove the non-numeric characters from the size.
  if ($unit) {
    // Find the position of the unit in the ordered string which is the power of magnitude to multiply a kilobyte by.
    return round($size * pow(1024, stripos('bkmgtpezy', $unit[0])));
  }
  else {
    return round($size);
  }
}
</code></pre>

<p>The above functions are available anywhere in Drupal, or you can copy it and use it in your own project subject to the terms of the GPL license version 2 or later.</p>

<p>As for parts 2 and 3 of your question, you will need to parse the <code>php.ini</code> file directly. These are essentially configuration errors, and PHP is resorting to fallback behaviors. It appears you can actually get the location of the loaded <code>php.ini</code> file in PHP, although trying to read from it may not work with basedir or safe-mode enabled:</p>

<pre><code>$max_size = -1;
$files = array_merge(array(php_ini_loaded_file()), explode("",\n"", php_ini_scanned_files()));
foreach (array_filter($files) as $file) {
  $ini = parse_ini_file($file);
  $regex = '/^([0-9]+)([bkmgtpezy])$/i';
  if (!empty($ini['post_max_size']) &amp;&amp; preg_match($regex, $ini['post_max_size'], $match)) {
    $post_max_size = round($match[1] * pow(1024, stripos('bkmgtpezy', strtolower($match[2])));
    if ($post_max_size &gt; 0) {
      $max_size = $post_max_size;
    }
  }
  if (!empty($ini['upload_max_filesize']) &amp;&amp; preg_match($regex, $ini['upload_max_filesize'], $match)) {
    $upload_max_filesize = round($match[1] * pow(1024, stripos('bkmgtpezy', strtolower($match[2])));
    if ($upload_max_filesize &gt; 0 &amp;&amp; ($max_size &lt;= 0 || $max_size &gt; $upload_max_filesize) {
      $max_size = $upload_max_filesize;
    }
  }
}

echo $max_size;
</code></pre>
",meustrus,meustrus,1408391439,1504106146,1504106146
http://stackoverflow.com/a/253874/50335,What is the most effective way for float and double comparison?,368325,Alex,Kirill Kobelev,1219198173,1554713757,1482290261,https://stackoverflow.com/questions/17333/what-is-the-most-effective-way-for-float-and-double-comparison,"<p>Comparing floating point numbers for depends on the context.  Since even changing the order of operations can produce different results, it is important to know how ""equal"" you want the numbers to be.</p>

<p><a href=""https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition"" rel=""noreferrer"">Comparing floating point numbers</a> by Bruce Dawson is a good place to start when looking at floating point comparison.  </p>

<p>The following definitions are from <a href=""http://books.google.ca/books?ei=KRkLSYLZEJ7ktQOX3-ChBQ&amp;id=T89QAAAAMAAJ&amp;dq=%22essentially+equal%22+%22approximately+equal%22+knuth&amp;q=%22essentially+equal%22+%22approximately+equal%22+%22definitely+less+than%22&amp;pgis=1#search"" rel=""noreferrer"">The art of computer programming by Knuth</a>: </p>

<pre><code>bool approximatelyEqual(float a, float b, float epsilon)
{
    return fabs(a - b) &lt;= ( (fabs(a) &lt; fabs(b) ? fabs(b) : fabs(a)) * epsilon);
}

bool essentiallyEqual(float a, float b, float epsilon)
{
    return fabs(a - b) &lt;= ( (fabs(a) &gt; fabs(b) ? fabs(b) : fabs(a)) * epsilon);
}

bool definitelyGreaterThan(float a, float b, float epsilon)
{
    return (a - b) &gt; ( (fabs(a) &lt; fabs(b) ? fabs(b) : fabs(a)) * epsilon);
}

bool definitelyLessThan(float a, float b, float epsilon)
{
    return (b - a) &gt; ( (fabs(a) &lt; fabs(b) ? fabs(b) : fabs(a)) * epsilon);
}
</code></pre>

<p>Of course, choosing epsilon depends on the context, and determines how equal you want the numbers to be.  </p>

<p>Another method of comparing floating point numbers is to look at the ULP (units in last place) of the numbers.  While not dealing specifically with comparisons, the paper <a href=""http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.22.6768"" rel=""noreferrer"">What every computer scientist should know about floating point numbers</a> is a good resource for understanding how floating point works and what the pitfalls are, including what ULP is. </p>
",mch,Damian,1225466022,1481818421,1481818421
http://stackoverflow.com/a/25395068/13932,Permutations in JavaScript?,101742,pepperdreamteam,Nayuki,1333240053,1562051448,1479802902,https://stackoverflow.com/questions/9960908/permutations-in-javascript,"<p>Answer without the need for a exterior array or additional function</p>

<pre><code>function permutator (arr) {
  var permutations = [];
  if (arr.length === 1) {
    return [ arr ];
  }

  for (var i = 0; i &lt;  arr.length; i++) { 
    var subPerms = permutator(arr.slice(0, i).concat(arr.slice(i + 1)));
    for (var j = 0; j &lt; subPerms.length; j++) {
      subPerms[j].unshift(arr[i]);
      permutations.push(subPerms[j]);
    }
  }
  return permutations;
}
</code></pre>
",Taylor Hakes,,1408494875,1408494875,0
http://stackoverflow.com/a/25426019/1745661,How to prevent moment.js from loading locales with webpack?,50678,epelc,epelc,1408454015,1494934787,1408468164,https://stackoverflow.com/questions/25384360/how-to-prevent-moment-js-from-loading-locales-with-webpack,"<p>The code <code>require('./locale/' + name)</code> can use every file in the <code>locale</code> dir. So webpack includes every file as module in your bundle. It cannot know which language you are using.</p>

<p>There are <a href=""http://webpack.github.io/docs/list-of-plugins.html#contextreplacementplugin"">two plugins</a> that are useful to give webpack more information about which module should be included in your bundle: <code>ContextReplacementPlugin</code> and <code>IgnorePlugin</code>.</p>

<p><code>require('./locale/' + name)</code> is called a <a href=""http://webpack.github.io/docs/context.html"">context</a> (a require which contains an expression). webpack infers some information from this code fragment: A directory and a regular expression. Here: <code>directory = "".../moment/locale""</code> <code>regular expression = /^.*$/</code>. So by default every file in the <code>locale</code> directory is included.</p>

<p>The <code>ContextReplacementPlugin</code> allows to override the inferred information i.e. provide a new regular expression (to choose the languages you want to include).</p>

<p>Another approach is to ignore the require with the <code>IgnorePlugin</code>.</p>

<p>Here is an example:</p>

<pre><code>var webpack = require(""webpack"");
module.exports = {
  // ...
  plugins: [
    new webpack.ContextReplacementPlugin(/moment[\/\\]locale$/, /de|fr|hu/)
    // new webpack.IgnorePlugin(/^\.\/locale$/, /moment$/)
  ]
};
</code></pre>
",Tobias K.,Zeeshan Hassan Memon,1408622957,1478420249,1478420249
http://stackoverflow.com/a/25428800/154392,Rails converts empty arrays into nils in params of the request,17877,Karolis,Karolis,1359726533,1535855241,1359728154,https://stackoverflow.com/questions/14647731/rails-converts-empty-arrays-into-nils-in-params-of-the-request,"<p>After much searching, I discovered that you starting in Rails 4.1 you can skip the deep_munge ""feature"" completely using</p>

<pre><code>config.action_dispatch.perform_deep_munge = false
</code></pre>

<p>I could not find any documentation, but you can view the introduction of this option here:
<a href=""https://github.com/rails/rails/commit/e8572cf2f94872d81e7145da31d55c6e1b074247"">https://github.com/rails/rails/commit/e8572cf2f94872d81e7145da31d55c6e1b074247</a></p>

<p>There is a possible security risk in doing so, documented here: <a href=""https://groups.google.com/forum/#!topic/rubyonrails-security/t1WFuuQyavI"">https://groups.google.com/forum/#!topic/rubyonrails-security/t1WFuuQyavI</a></p>
",a10s,,1408630828,1408630828,0
http://stackoverflow.com/a/25435722/358804,Force emails not to be grouped into conversations,1811,Louis W,,1399053164,1556683097,0,https://stackoverflow.com/questions/23434110/force-emails-not-to-be-grouped-into-conversations,"<p>On the top of my head, there are two methods to avoid threading:</p>

<ul>
<li>set the SMTP header <code>X-Entity-Ref-ID</code> with any value. This is what Google+ notifications do.</li>
<li>change the sender email (you can use <code>From: info+randomstring@example.com</code>). This is what Facebook notifications do.</li>
</ul>

<p>The threading will be made if you force it with <code>Reference</code> or <code>Reply-To</code>.</p>
",rds,rds,1408654293,1493321593,1493321593
http://stackoverflow.com/a/25462286/980387,Persistent Cookie store using okhttp 2 on Android,18977,janoliver,Community,1408795866,1463990675,1495539968,https://stackoverflow.com/questions/25461792/persistent-cookie-store-using-okhttp-2-on-android,"<p>Putting the code into a custom <code>Application</code>'s <code>onCreate</code> function solves the issue. It works now.</p>

<pre><code>public class MyApplication extends Application {
    public void onCreate() {
        super.onCreate();

        // enable cookies
        java.net.CookieManager cookieManager = new java.net.CookieManager();
        cookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);
        CookieHandler.setDefault(cookieManager);
    }
}
</code></pre>

<hr>

<p>I managed to get persistent cookies with <code>okhttp</code> with the following <code>CookieStore</code>, which is partly copied from the one of <code>android-async-http</code>. It works with API lvl 9 and maybe fewer.</p>

<pre><code>import android.content.Context;
import android.content.SharedPreferences;
import android.text.TextUtils;
import android.util.Log;

import java.io.*;
import java.net.CookieStore;
import java.net.HttpCookie;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.*;
import java.util.concurrent.ConcurrentHashMap;

/**
 * A persistent cookie store which implements the Apache HttpClient CookieStore interface.
 * Cookies are stored and will persist on the user's device between application sessions since they
 * are serialized and stored in SharedPreferences. Instances of this class are
 * designed to be used with AsyncHttpClient#setCookieStore, but can also be used with a
 * regular old apache HttpClient/HttpContext if you prefer.
 */
public class PersistentCookieStore implements CookieStore {

    private static final String LOG_TAG = ""PersistentCookieStore"";
    private static final String COOKIE_PREFS = ""CookiePrefsFile"";
    private static final String COOKIE_NAME_PREFIX = ""cookie_"";

    private final HashMap&lt;String, ConcurrentHashMap&lt;String, HttpCookie&gt;&gt; cookies;
    private final SharedPreferences cookiePrefs;

    /**
     * Construct a persistent cookie store.
     *
     * @param context Context to attach cookie store to
     */
    public PersistentCookieStore(Context context) {
        cookiePrefs = context.getSharedPreferences(COOKIE_PREFS, 0);
        cookies = new HashMap&lt;String, ConcurrentHashMap&lt;String, HttpCookie&gt;&gt;();

        // Load any previously stored cookies into the store
        Map&lt;String, ?&gt; prefsMap = cookiePrefs.getAll();
        for(Map.Entry&lt;String, ?&gt; entry : prefsMap.entrySet()) {
            if (((String)entry.getValue()) != null &amp;&amp; !((String)entry.getValue()).startsWith(COOKIE_NAME_PREFIX)) {
                String[] cookieNames = TextUtils.split((String)entry.getValue(), "","");
                for (String name : cookieNames) {
                    String encodedCookie = cookiePrefs.getString(COOKIE_NAME_PREFIX + name, null);
                    if (encodedCookie != null) {
                        HttpCookie decodedCookie = decodeCookie(encodedCookie);
                        if (decodedCookie != null) {
                            if(!cookies.containsKey(entry.getKey()))
                                cookies.put(entry.getKey(), new ConcurrentHashMap&lt;String, HttpCookie&gt;());
                            cookies.get(entry.getKey()).put(name, decodedCookie);
                        }
                    }
                }

            }
        }
    }

    @Override
    public void add(URI uri, HttpCookie cookie) {
        String name = getCookieToken(uri, cookie);

        // Save cookie into local store, or remove if expired
        if (!cookie.hasExpired()) {
            if(!cookies.containsKey(uri.getHost()))
                cookies.put(uri.getHost(), new ConcurrentHashMap&lt;String, HttpCookie&gt;());
            cookies.get(uri.getHost()).put(name, cookie);
        } else {
            if(cookies.containsKey(uri.toString()))
                cookies.get(uri.getHost()).remove(name);
        }

        // Save cookie into persistent store
        SharedPreferences.Editor prefsWriter = cookiePrefs.edit();
        prefsWriter.putString(uri.getHost(), TextUtils.join("","", cookies.get(uri.getHost()).keySet()));
        prefsWriter.putString(COOKIE_NAME_PREFIX + name, encodeCookie(new SerializableHttpCookie(cookie)));
        prefsWriter.commit();
    }

    protected String getCookieToken(URI uri, HttpCookie cookie) {
        return cookie.getName() + cookie.getDomain();
    }

    @Override
    public List&lt;HttpCookie&gt; get(URI uri) {
        ArrayList&lt;HttpCookie&gt; ret = new ArrayList&lt;HttpCookie&gt;();
        if(cookies.containsKey(uri.getHost()))
            ret.addAll(cookies.get(uri.getHost()).values());
        return ret;
    }

    @Override
    public boolean removeAll() {
        SharedPreferences.Editor prefsWriter = cookiePrefs.edit();
        prefsWriter.clear();
        prefsWriter.commit();
        cookies.clear();
        return true;
    }


    @Override
    public boolean remove(URI uri, HttpCookie cookie) {
        String name = getCookieToken(uri, cookie);

        if(cookies.containsKey(uri.getHost()) &amp;&amp; cookies.get(uri.getHost()).containsKey(name)) {
            cookies.get(uri.getHost()).remove(name);

            SharedPreferences.Editor prefsWriter = cookiePrefs.edit();
            if(cookiePrefs.contains(COOKIE_NAME_PREFIX + name)) {
                prefsWriter.remove(COOKIE_NAME_PREFIX + name);
            }
            prefsWriter.putString(uri.getHost(), TextUtils.join("","", cookies.get(uri.getHost()).keySet()));
            prefsWriter.commit();

            return true;
        } else {
            return false;
        }
    }

    @Override
    public List&lt;HttpCookie&gt; getCookies() {
        ArrayList&lt;HttpCookie&gt; ret = new ArrayList&lt;HttpCookie&gt;();
        for (String key : cookies.keySet())
            ret.addAll(cookies.get(key).values());

        return ret;
    }

    @Override
    public List&lt;URI&gt; getURIs() {
        ArrayList&lt;URI&gt; ret = new ArrayList&lt;URI&gt;();
        for (String key : cookies.keySet())
            try {
                ret.add(new URI(key));
            } catch (URISyntaxException e) {
                e.printStackTrace();
            }

        return ret;
    }

    /**
     * Serializes Cookie object into String
     *
     * @param cookie cookie to be encoded, can be null
     * @return cookie encoded as String
     */
    protected String encodeCookie(SerializableHttpCookie cookie) {
        if (cookie == null)
            return null;
        ByteArrayOutputStream os = new ByteArrayOutputStream();
        try {
            ObjectOutputStream outputStream = new ObjectOutputStream(os);
            outputStream.writeObject(cookie);
        } catch (IOException e) {
            Log.d(LOG_TAG, ""IOException in encodeCookie"", e);
            return null;
        }

        return byteArrayToHexString(os.toByteArray());
    }

    /**
     * Returns cookie decoded from cookie string
     *
     * @param cookieString string of cookie as returned from http request
     * @return decoded cookie or null if exception occured
     */
    protected HttpCookie decodeCookie(String cookieString) {
        byte[] bytes = hexStringToByteArray(cookieString);
        ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(bytes);
        HttpCookie cookie = null;
        try {
            ObjectInputStream objectInputStream = new ObjectInputStream(byteArrayInputStream);
            cookie = ((SerializableHttpCookie) objectInputStream.readObject()).getCookie();
        } catch (IOException e) {
            Log.d(LOG_TAG, ""IOException in decodeCookie"", e);
        } catch (ClassNotFoundException e) {
            Log.d(LOG_TAG, ""ClassNotFoundException in decodeCookie"", e);
        }

        return cookie;
    }

    /**
     * Using some super basic byte array &amp;lt;-&amp;gt; hex conversions so we don't have to rely on any
     * large Base64 libraries. Can be overridden if you like!
     *
     * @param bytes byte array to be converted
     * @return string containing hex values
     */
    protected String byteArrayToHexString(byte[] bytes) {
        StringBuilder sb = new StringBuilder(bytes.length * 2);
        for (byte element : bytes) {
            int v = element &amp; 0xff;
            if (v &lt; 16) {
                sb.append('0');
            }
            sb.append(Integer.toHexString(v));
        }
        return sb.toString().toUpperCase(Locale.US);
    }

    /**
     * Converts hex values from strings to byte arra
     *
     * @param hexString string of hex-encoded values
     * @return decoded byte array
     */
    protected byte[] hexStringToByteArray(String hexString) {
        int len = hexString.length();
        byte[] data = new byte[len / 2];
        for (int i = 0; i &lt; len; i += 2) {
            data[i / 2] = (byte) ((Character.digit(hexString.charAt(i), 16) &lt;&lt; 4) + Character.digit(hexString.charAt(i + 1), 16));
        }
        return data;
    }
}
</code></pre>

<p>The <code>SerializableHttpCookie.java</code>:</p>

<pre><code>import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.net.HttpCookie;

public class SerializableHttpCookie implements Serializable {
    private static final long serialVersionUID = 6374381323722046732L;

    private transient final HttpCookie cookie;
    private transient HttpCookie clientCookie;

    public SerializableHttpCookie(HttpCookie cookie) {
        this.cookie = cookie;
    }

    public HttpCookie getCookie() {
        HttpCookie bestCookie = cookie;
        if (clientCookie != null) {
            bestCookie = clientCookie;
        }
        return bestCookie;
    }

    private void writeObject(ObjectOutputStream out) throws IOException {
        out.writeObject(cookie.getName());
        out.writeObject(cookie.getValue());
        out.writeObject(cookie.getComment());
        out.writeObject(cookie.getCommentURL());
        out.writeObject(cookie.getDomain());
        out.writeLong(cookie.getMaxAge());
        out.writeObject(cookie.getPath());
        out.writeObject(cookie.getPortlist());
        out.writeInt(cookie.getVersion());
        out.writeBoolean(cookie.getSecure());
        out.writeBoolean(cookie.getDiscard());
    }

    private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {
        String name = (String) in.readObject();
        String value = (String) in.readObject();
        clientCookie = new HttpCookie(name, value);
        clientCookie.setComment((String) in.readObject());
        clientCookie.setCommentURL((String) in.readObject());
        clientCookie.setDomain((String) in.readObject());
        clientCookie.setMaxAge(in.readLong());
        clientCookie.setPath((String) in.readObject());
        clientCookie.setPortlist((String) in.readObject());
        clientCookie.setVersion(in.readInt());
        clientCookie.setSecure(in.readBoolean());
        clientCookie.setDiscard(in.readBoolean());
    }
}
</code></pre>
",janoliver,janoliver,1408799544,1408885717,1408885717
http://stackoverflow.com/a/25463098/535646,How to convert an image to a 0-255 grey scale image,3197,user3347358,,1408804317,1408806560,0,https://stackoverflow.com/questions/25463005/how-to-convert-an-image-to-a-0-255-grey-scale-image,"<p><a href=""http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html#getRGB()"" rel=""nofollow""><code>color.getRGB()</code></a> does not return a value from 0..255, it returns an integer composited of your red, green and blue values, including the Alpha value. Presumably, this alpha value is <code>0xFF</code>, which makes <em>any</em> combined color end up as <code>0xFFrrggbb</code>, or, as you got, a huge negative number when written in decimals.</p>

<p>To see the ""gray"" level assigned, just check <code>ColAvgVal</code>.</p>

<p>Note that a better formula to convert between RGB and grayscale is to use the <a href=""http://en.m.wikipedia.org/wiki/Grayscale"" rel=""nofollow"">PAL/NTSC conversion</a>:</p>

<pre><code>gray = 0.299 * red + 0.587 * green + 0.114 * blue
</code></pre>

<p>because ""full blue"" should be darker in grayscale than ""full red"" and ""full green"".</p>

<hr>

<p>Note: if you use this formula directly, watch out for <em>floating point rounding errors</em>. In theory, it should not return a value outside of <code>0..255</code> for <code>gray</code>; in practice, <em>it will</em>. So test and clamp the result.</p>

<p>Another option which does not require testing-and-clamping per pixel, is to use an integer-only version:</p>

<pre><code>gray = (299 * red + 587 * green + 114 * blue)/1000;
</code></pre>

<p>which should work with only a very small rounding error.</p>
",usr2564301,usr2564301,1408805031,1408806560,1408806560
http://stackoverflow.com/a/25469248/654755,How can I make a fixture out of QuerySet in django?,4029,pielgrzym,,1342789613,1412310986,0,https://stackoverflow.com/questions/11580018/how-can-i-make-a-fixture-out-of-queryset-in-django,"<p>The following steps will help in making the solution complete providing support to <strong>create a fixture of various querysets</strong>.</p>

<pre><code>from django.core import serializers
from django.core.management.commands.dumpdata import sort_dependencies

app_list = {}

# Add all your querysets here. The key for the dictionary can be just a 
# unique dummy string (A safe hack after reading django code)
app_list['app1_name'] = FirstModel.objects.all()
app_list['app2_name'] = SecondModel.objects.all()

# The sort_dependencies will ensure that the models are sorted so that
# those with foreign keys are taken care. If SecondModel has a fk to FirstModel,
# then sort_dependencies will take care of the ordering in the json file so that
# FirstModel comes first in the fixture thus preventing ambiguity when reloading
data = serializers.serialize(""json"", sort_dependencies(app_list.items()))
f = open('output.json', 'w')
f.write(data)
f.close()
</code></pre>

<p>Now the output will be available in <code>output.json</code> file. To rebuild the models from the json file:</p>

<pre><code>from django.core import serializers

for obj in serializers.deserialize('json', open('output.json').read()):
    obj.save()
</code></pre>

<p><strong>EDIT</strong>: Strangely, the sort_dependencies didn't work as expected. So I ended up using python ordereddict and decided the order myself.</p>

<pre><code>import collections

app_list = collections.OrderedDict()
</code></pre>
",Bharathwaaj,Bharathwaaj,1408863260,1412310986,1412310986
http://stackoverflow.com/a/2548133/1541408,endsWith in JavaScript,438164,Bobby Kumar,Micha Perakowski,1226402132,1529469787,1453664043,https://stackoverflow.com/questions/280634/endswith-in-javascript,"<p><strong>UPDATE (Nov 24th, 2015):</strong></p>

<p>This answer is originally posted in the year 2010 (SIX years back.) so please take note of these insightful comments:</p>

<ul>
<li><p><a href=""https://stackoverflow.com/users/570040/shauna"">Shauna</a> - Update for Googlers - Looks like ECMA6 adds this function. The MDN article also shows a polyfill. <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith"" rel=""noreferrer"">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith</a></p></li>
<li><p><a href=""https://stackoverflow.com/users/157247/t-j-crowder"">T.J. Crowder</a> - Creating substrings isn't expensive on modern browsers; it may well have been in 2010 when this answer was posted. These days, the simple <code>this.substr(-suffix.length) === suffix</code> approach is fastest on Chrome, the same on IE11 as indexOf, and only 4% slower (fergetaboutit territory) on Firefox: <a href=""http://jsperf.com/endswith-stackoverflow/14"" rel=""noreferrer"">jsperf.com/endswith-stackoverflow/14</a> And faster across the board when the result is false: <a href=""http://jsperf.com/endswith-stackoverflow-when-false"" rel=""noreferrer"">jsperf.com/endswith-stackoverflow-when-false</a> <strong>Of course, with ES6 adding endsWith, the point is moot. :-)</strong></p></li>
</ul>

<hr>

<p><strong>ORIGINAL ANSWER:</strong></p>

<p>I know this is a year old question... but I need this too and I need it to work cross-browser so... <strong>combining everyone's answer and comments</strong> and simplifying it a bit:</p>

<pre><code>String.prototype.endsWith = function(suffix) {
    return this.indexOf(suffix, this.length - suffix.length) !== -1;
};
</code></pre>

<ul>
<li>Doesn't create a substring</li>
<li>Uses native <code>indexOf</code> function for fastest results</li>
<li>Skip unnecessary comparisons using the second parameter of <code>indexOf</code> to skip ahead</li>
<li>Works in Internet Explorer</li>
<li>NO Regex complications</li>
</ul>

<hr>

<p>Also, if you don't like stuffing things in native data structure's prototypes, here's a standalone version:</p>

<pre><code>function endsWith(str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
}
</code></pre>

<hr>

<p><strong>EDIT:</strong> As noted by @hamish in the comments, if you want to err on the safe side and check if an implementation has already been provided, you can just adds a <code>typeof</code> check like so:</p>

<pre><code>if (typeof String.prototype.endsWith !== 'function') {
    String.prototype.endsWith = function(suffix) {
        return this.indexOf(suffix, this.length - suffix.length) !== -1;
    };
}
</code></pre>
",chakrit,Community,1269978046,1474479041,1495540051
http://stackoverflow.com/a/2548133/639505,endsWith in JavaScript,438164,Bobby Kumar,Micha Perakowski,1226402132,1529469787,1453664043,https://stackoverflow.com/questions/280634/endswith-in-javascript,"<p><strong>UPDATE (Nov 24th, 2015):</strong></p>

<p>This answer is originally posted in the year 2010 (SIX years back.) so please take note of these insightful comments:</p>

<ul>
<li><p><a href=""https://stackoverflow.com/users/570040/shauna"">Shauna</a> - Update for Googlers - Looks like ECMA6 adds this function. The MDN article also shows a polyfill. <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith"" rel=""noreferrer"">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith</a></p></li>
<li><p><a href=""https://stackoverflow.com/users/157247/t-j-crowder"">T.J. Crowder</a> - Creating substrings isn't expensive on modern browsers; it may well have been in 2010 when this answer was posted. These days, the simple <code>this.substr(-suffix.length) === suffix</code> approach is fastest on Chrome, the same on IE11 as indexOf, and only 4% slower (fergetaboutit territory) on Firefox: <a href=""http://jsperf.com/endswith-stackoverflow/14"" rel=""noreferrer"">jsperf.com/endswith-stackoverflow/14</a> And faster across the board when the result is false: <a href=""http://jsperf.com/endswith-stackoverflow-when-false"" rel=""noreferrer"">jsperf.com/endswith-stackoverflow-when-false</a> <strong>Of course, with ES6 adding endsWith, the point is moot. :-)</strong></p></li>
</ul>

<hr>

<p><strong>ORIGINAL ANSWER:</strong></p>

<p>I know this is a year old question... but I need this too and I need it to work cross-browser so... <strong>combining everyone's answer and comments</strong> and simplifying it a bit:</p>

<pre><code>String.prototype.endsWith = function(suffix) {
    return this.indexOf(suffix, this.length - suffix.length) !== -1;
};
</code></pre>

<ul>
<li>Doesn't create a substring</li>
<li>Uses native <code>indexOf</code> function for fastest results</li>
<li>Skip unnecessary comparisons using the second parameter of <code>indexOf</code> to skip ahead</li>
<li>Works in Internet Explorer</li>
<li>NO Regex complications</li>
</ul>

<hr>

<p>Also, if you don't like stuffing things in native data structure's prototypes, here's a standalone version:</p>

<pre><code>function endsWith(str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
}
</code></pre>

<hr>

<p><strong>EDIT:</strong> As noted by @hamish in the comments, if you want to err on the safe side and check if an implementation has already been provided, you can just adds a <code>typeof</code> check like so:</p>

<pre><code>if (typeof String.prototype.endsWith !== 'function') {
    String.prototype.endsWith = function(suffix) {
        return this.indexOf(suffix, this.length - suffix.length) !== -1;
    };
}
</code></pre>
",chakrit,Community,1269978046,1474479041,1495540051
http://stackoverflow.com/a/25510879/1694896,Does C++ support &#39;finally&#39; blocks? (And what&#39;s this &#39;RAII&#39; I keep hearing about?),191116,Kevin,Motti,1222931640,1553012288,1316007201,https://stackoverflow.com/questions/161177/does-c-support-finally-blocks-and-whats-this-raii-i-keep-hearing-about,"<p>RAII is usually better, but you can have easily the <strong>finally</strong> semantics in C++. Using a tiny amount of code.</p>

<p>Besides, the C++ <a href=""http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#SS-utilities"" rel=""nofollow noreferrer"">Core Guidelines give finally.</a></p>

<p>Here is a link to the <a href=""https://github.com/Microsoft/GSL"" rel=""nofollow noreferrer"">GSL Microsoft implementation</a> and a link to the <a href=""https://github.com/martinmoene/gsl-lite"" rel=""nofollow noreferrer"">Martin Moene implementation</a></p>

<p>Bjarne Stroustrup multiple times said that everything that is in the GSL it meant to go in the standard eventually. So it should be a future-proof way to use <strong>finally</strong>.</p>

<p>You can easily implement yourself if you want though, continue reading.</p>

<p>In C++11 RAII and lambdas allows to make a general finally:</p>

<pre><code>namespace detail { //adapt to your ""private"" namespace
template &lt;typename F&gt;
struct FinalAction {
    FinalAction(F f) : clean_{f} {}
   ~FinalAction() { if(enabled_) clean_(); }
    void disable() { enabled_ = false; };
  private:
    F clean_;
    bool enabled_{true}; }; }

template &lt;typename F&gt;
detail::FinalAction&lt;F&gt; finally(F f) {
    return detail::FinalAction&lt;F&gt;(f); }
</code></pre>

<p>example of use:</p>

<pre><code>#include &lt;iostream&gt;
int main() {
    int* a = new int;
    auto delete_a = finally([a] { delete a; std::cout &lt;&lt; ""leaving the block, deleting a!\n""; });
    std::cout &lt;&lt; ""doing something ...\n""; }
</code></pre>

<p>the output will be:</p>

<pre><code>doing something...
leaving the block, deleting a!
</code></pre>

<p>Personally I used this few times to ensure to close POSIX file descriptor in a C++ program.</p>

<p>Having a real class that manage resources and so avoids any kind of leaks is usually better, but this <strong>finally</strong> is useful in the cases where making a class sounds like an overkill.</p>

<p>Besides, I like it better than other languages <strong>finally</strong> because if used naturally you write the closing code nearby the opening code (in my example the <strong>new</strong> and <strong>delete</strong>) and destruction follows construction in LIFO order as usual in C++. The only downside is that you get an auto variable you don't really use and the lambda syntax make it a little noisy (in my example in the fourth line only the word <strong>finally</strong> and the {}-block on the right are meaningful, the rest is essentially noise).</p>

<p>Another example:</p>

<pre><code> [...]
 auto precision = std::cout.precision();
 auto set_precision_back = finally( [precision, &amp;std::cout]() { std::cout &lt;&lt; std::setprecision(precision); } );
 std::cout &lt;&lt; std::setprecision(3);
</code></pre>

<p>The <strong>disable</strong> member is useful if the <strong>finally</strong> has to be called only in case of failure. For example, you have to copy an object in three different containers, you can setup the <strong>finally</strong> to undo each copy and disable after all copies are successful. Doing so, if the destruction cannot throw, you ensure the strong guarantee.</p>

<p><strong>disable</strong> example:</p>

<pre><code>//strong guarantee
void copy_to_all(BIGobj const&amp; a) {
    first_.push_back(a);
    auto undo_first_push = finally([first_&amp;] { first_.pop_back(); });

    second_.push_back(a);
    auto undo_second_push = finally([second_&amp;] { second_.pop_back(); });

    third_.push_back(a);
    //no necessary, put just to make easier to add containers in the future
    auto undo_third_push = finally([third_&amp;] { third_.pop_back(); });

    undo_first_push.disable();
    undo_second_push.disable();
    undo_third_push.disable(); }
</code></pre>

<p>If you cannot use C++11 you can still have <em>finally</em>, but the code becomes a bit more long winded. Just define a struct with only a constructor and destructor, the constructor take references to anything needed and the destructor does the actions you need. This is basically what the lambda does, done manually.</p>

<pre><code>#include &lt;iostream&gt;
int main() {
    int* a = new int;

    struct Delete_a_t {
        Delete_a_t(int* p) : p_(p) {}
       ~Delete_a_t() { delete p_; std::cout &lt;&lt; ""leaving the block, deleting a!\n""; }
        int* p_;
    } delete_a(a);

    std::cout &lt;&lt; ""doing something ...\n""; }
</code></pre>
",Paolo.Bolzoni,Paolo.Bolzoni,1409070986,1553012288,1553012288
http://stackoverflow.com/a/25514935/1214183,Can I fake a storage event in my jasmine unit tests?,1329,Grokodile,,1409066532,1409092178,0,https://stackoverflow.com/questions/25509545/can-i-fake-a-storage-event-in-my-jasmine-unit-tests,"<p>This did the trick:</p>

<pre><code>window.dispatchEvent(new StorageEvent('storage', {
    key: 'test_key', 
    newValue: 'test_value' 
});
</code></pre>

<p>For bonus points in IE too:</p>

<pre><code>var se = document.createEvent('StorageEvent');
se.initStorageEvent('storage', false, false, 'test_key', null, 'test_value', '/', null);
window.dispatchEvent(se);
</code></pre>
",Grokodile,Grokodile,1409086304,1409092178,1409092178
http://stackoverflow.com/a/25585480/654755,"Django: When saving, how can you check if a field has changed?",130773,Paul Tarjan,Paul Tarjan,1251672987,1549288187,1251675809,https://stackoverflow.com/questions/1355150/django-when-saving-how-can-you-check-if-a-field-has-changed,"<p>The mixin from @ivanlivski is great. </p>

<p>I've extended it to</p>

<ul>
<li>Ensure it works with Decimal fields.</li>
<li>Expose properties to simplify usage</li>
</ul>

<p>The updated code is available here:
<a href=""https://github.com/sknutsonsf/python-contrib/blob/master/src/django/utils/ModelDiffMixin.py"" rel=""nofollow"">https://github.com/sknutsonsf/python-contrib/blob/master/src/django/utils/ModelDiffMixin.py</a></p>

<p>To help people new to Python or Django, I'll give a more complete example.
This particular usage is to take a file from a data provider and ensure the records in the database reflect the file.  </p>

<p>My model object:</p>

<pre><code>class Station(ModelDiffMixin.ModelDiffMixin, models.Model):
    station_name = models.CharField(max_length=200)
    nearby_city = models.CharField(max_length=200)

    precipitation = models.DecimalField(max_digits=5, decimal_places=2)
    # &lt;list of many other fields&gt;

   def is_float_changed (self,v1, v2):
        ''' Compare two floating values to just two digit precision
        Override Default precision is 5 digits
        '''
        return abs (round (v1 - v2, 2)) &gt; 0.01
</code></pre>

<p>The class that loads the file has these methods:</p>

<pre><code>class UpdateWeather (object)
    # other methods omitted

    def update_stations (self, filename):
        # read all existing data 
        all_stations = models.Station.objects.all()
        self._existing_stations = {}

        # insert into a collection for referencing while we check if data exists
        for stn in all_stations.iterator():
            self._existing_stations[stn.id] = stn

        # read the file. result is array of objects in known column order
        data = read_tabbed_file(filename)

        # iterate rows from file and insert or update where needed
        for rownum in range(sh.nrows):
            self._update_row(sh.row(rownum));

        # now anything remaining in the collection is no longer active
        # since it was not found in the newest file
        # for now, delete that record
        # there should never be any of these if the file was created properly
        for stn in self._existing_stations.values():
            stn.delete()
            self._num_deleted = self._num_deleted+1


    def _update_row (self, rowdata):
        stnid = int(rowdata[0].value) 
        name = rowdata[1].value.strip()

        # skip the blank names where data source has ids with no data today
        if len(name) &lt; 1:
            return

        # fetch rest of fields and do sanity test
        nearby_city = rowdata[2].value.strip()
        precip = rowdata[3].value

        if stnid in self._existing_stations:
            stn = self._existing_stations[stnid]
            del self._existing_stations[stnid]
            is_update = True;
        else:
            stn = models.Station()
            is_update = False;

        # object is new or old, don't care here            
        stn.id = stnid
        stn.station_name = name;
        stn.nearby_city = nearby_city
        stn.precipitation = precip

        # many other fields updated from the file 

        if is_update == True:

            # we use a model mixin to simplify detection of changes
            # at the cost of extra memory to store the objects            
            if stn.has_changed == True:
                self._num_updated = self._num_updated + 1;
                stn.save();
        else:
            self._num_created = self._num_created + 1;
            stn.save()
</code></pre>
",sknutsonsf,,1409422807,1409422807,0
http://stackoverflow.com/a/2561377/470581,Illegal token on right side of ::,33469,Adam Haile,Adam Haile,1270134375,1270428716,1270135287,https://stackoverflow.com/questions/2561368/illegal-token-on-right-side-of,"<p>My guess is that <code>max</code> has been made a macro. This happens at some point inside <code>windows.h</code>. </p>

<p>Define <code>NOMINMAX</code> prior to including to stop <code>windows.h</code> from doing that.</p>

<h3>EDIT:</h3>

<p>I'm still confident this is your problem. (Not including <code>&lt;limits&gt;</code> would result in a different error). Place <code>#undef max</code> and <code>#undef min</code> just before the function and try again. If that fixes it, I was correct, and your <code>NOMINMAX</code> isn't being defined properly. (Add it as a project setting.)</p>

<p>You can also prevent macro expansion by: <code>(std::numeric_limits&lt;T&gt;::max)()</code>.</p>

<hr>

<p>On a side note, why not do <code>std::numeric_limits&lt;T&gt;::min()</code> instead of negating the max?</p>
",GManNickG,GManNickG,1270134466,1270148963,1270148963
http://stackoverflow.com/a/25618636/4856479,How to share sessions with Socket.IO 1.x and Express 4.x?,40847,Mustafa,Epeli,1409157833,1489127326,1409657527,https://stackoverflow.com/questions/25532692/how-to-share-sessions-with-socket-io-1-x-and-express-4-x,"<p>The solution is surprisingly simple. It's just not very well documented. It is possible to use the express session middleware as a Socket.IO middleware too with a small adapter like this:</p>

<pre><code>sio.use(function(socket, next) {
    sessionMiddleware(socket.request, socket.request.res, next);
});
</code></pre>

<p>Here's a full example with express 4.x, Socket.IO 1.x and Redis:</p>

<pre><code>var express = require(""express"");
var Server = require(""http"").Server;
var session = require(""express-session"");
var RedisStore = require(""connect-redis"")(session);

var app = express();
var server = Server(app);
var sio = require(""socket.io"")(server);

var sessionMiddleware = session({
    store: new RedisStore({}), // XXX redis server config
    secret: ""keyboard cat"",
});

sio.use(function(socket, next) {
    sessionMiddleware(socket.request, socket.request.res, next);
});

app.use(sessionMiddleware);

app.get(""/"", function(req, res){
    req.session // Session object in a normal request
});

sio.sockets.on(""connection"", function(socket) {
  socket.request.session // Now it's available from Socket.IO sockets too! Win!
});


server.listen(8080);
</code></pre>
",Epeli,Epeli,1409645073,1409780055,1409780055
http://stackoverflow.com/a/2563382/152938,Java equivalent to PHP&#39;s preg_replace_callback,7086,Mike,Mike,1229536443,1515599890,1291570648,https://stackoverflow.com/questions/375420/java-equivalent-to-phps-preg-replace-callback,"<p>I wasn't quite satisfied with any of the solutions here. I wanted a stateless solution. And I didn't want to end up in an infinite loop if my replacement string happened to match the pattern. While I was at it I added support for a <code>limit</code> parameter and a returned <code>count</code> parameter. (I used an <code>AtomicInteger</code> to simulate passing an integer by reference.) I moved the <code>callback</code> parameter to the end of the parameter list, to make it easier to define an anonymous class.</p>

<p>Here is an example of usage:</p>

<pre><code>final Map&lt;String,String&gt; props = new HashMap&lt;String,String&gt;();
props.put(""MY_NAME"", ""Kip"");
props.put(""DEPT"", ""R&amp;D"");
props.put(""BOSS"", ""Dave"");

String subjectString = ""Hi my name is ${MY_NAME} and I work in ${DEPT} for ${BOSS}"";
String sRegex = ""\\$\\{([A-Za-z0-9_]+)\\}"";

String replacement = ReplaceCallback.replace(sRegex, subjectString, new ReplaceCallback.Callback() {
  public String matchFound(MatchResult match) {
    String group1 = match.group(1);
    if(group1 != null &amp;&amp; props.containsKey(group1))
      return props.get(group1);
    return match.group();
  }
});

System.out.println(""replacement: "" + replacement);
</code></pre>

<p>And here is my version of ReplaceCallback class:</p>

<pre><code>import java.util.concurrent.atomic.AtomicInteger;
import java.util.regex.*;

public class ReplaceCallback
{
  public static interface Callback {
    /**
     * This function is called when a match is made. The string which was matched
     * can be obtained via match.group(), and the individual groupings via
     * match.group(n).
     */
    public String matchFound(MatchResult match);
  }

  /**
   * Replaces with callback, with no limit to the number of replacements.
   * Probably what you want most of the time.
   */
  public static String replace(String pattern, String subject, Callback callback)
  {
    return replace(pattern, subject, -1, null, callback);
  }

  public static String replace(String pattern, String subject, int limit, Callback callback)
  {
    return replace(pattern, subject, limit, null, callback);
  }

  /**
   * @param regex    The regular expression pattern to search on.
   * @param subject  The string to be replaced.
   * @param limit    The maximum number of replacements to make. A negative value
   *                 indicates replace all.
   * @param count    If this is not null, it will be set to the number of
   *                 replacements made.
   * @param callback Callback function
   */
  public static String replace(String regex, String subject, int limit,
          AtomicInteger count, Callback callback)
  {
    StringBuffer sb = new StringBuffer();
    Matcher matcher = Pattern.compile(regex).matcher(subject);
    int i;
    for(i = 0; (limit &lt; 0 || i &lt; limit) &amp;&amp; matcher.find(); i++)
    {
      String replacement = callback.matchFound(matcher.toMatchResult());
      replacement = Matcher.quoteReplacement(replacement); //probably what you want...
      matcher.appendReplacement(sb, replacement);
    }
    matcher.appendTail(sb);

    if(count != null)
      count.set(i);
    return sb.toString();
  }
}
</code></pre>
",Kip,,1270153146,1270153146,0
http://stackoverflow.com/a/25661431/21584,Expand parameter packs with different lengths,653,Alexandre Hamez,Lightness Races in Orbit,1409802452,1444644762,1444644762,https://stackoverflow.com/questions/25656992/expand-parameter-packs-with-different-lengths,"<p>Your sample code is wrong, even in case that it compiles (i.e. when sizeof...(Xs) == sizeof...(Ys)).
Say, you have N-ary tuples, then jump_table has N*N elements, but only first N elements are initialized with the function ptrs.</p>

<p>First, you need to inner join the 2 lists of types:</p>

<pre><code>template&lt;class A, class B&gt;
struct P;

template&lt;class... Ts&gt;
struct L {};

template&lt;class T, class... Ts&gt;
using mul = L&lt;P&lt;T, Ts&gt;...&gt;;

template&lt;class...&gt;
struct cat;

template&lt;class T&gt;
struct cat&lt;T&gt;
{
    using type = T;
};

template&lt;class... As, class... Bs&gt;
struct cat&lt;L&lt;As...&gt;, L&lt;Bs...&gt;&gt;
{
    using type = L&lt;As..., Bs...&gt;;
};

template&lt;class A, class B, class... Ts&gt;
struct cat&lt;A, B, Ts...&gt;
{
    using type = typename cat&lt;typename cat&lt;A, B&gt;::type, Ts...&gt;::type;
};

template&lt;class A, class B&gt;
struct join;

template&lt;class... As, class... Bs&gt;
struct join&lt;L&lt;As...&gt;, L&lt;Bs...&gt;&gt;
{
    using type = typename cat&lt;mul&lt;As, Bs...&gt;...&gt;::type;
};
</code></pre>

<p>for example,</p>

<pre><code>join&lt;L&lt;int[1], int[2]&gt;, L&lt;float[1], float[2], float[3]&gt;&gt;::type
</code></pre>

<p>gives you</p>

<pre><code>L&lt;P&lt;int[1], float[1]&gt;, P&lt;int[1], float[2]&gt;, P&lt;int[1], float[3]&gt;, P&lt;int[2], float[1]&gt;, P&lt;int[2], float[2]&gt;, P&lt;int[2], float[3]&gt;
</code></pre>

<p>Back to your example:</p>

<pre><code>template &lt;typename X, typename Y&gt;
void foo()
{}

template&lt;class T, std::size_t N&gt;
struct jump_table
{
    template&lt;class... As, class... Bs&gt;
    constexpr jump_table(L&lt;P&lt;As, Bs&gt;...&gt;)
      : table{&amp;foo&lt;As, Bs&gt;...}
    {}

    T table[N];
};

template &lt;typename... Xs, typename... Ys&gt;
void bar(const std::tuple&lt;Xs...&gt;&amp;, const std::tuple&lt;Ys...&gt;&amp;)
{
  using fun_ptr_type = void (*) (void);
  static constexpr jump_table&lt;fun_ptr_type, sizeof...(Xs) * sizeof...(Ys)&gt; table
    = {typename join&lt;L&lt;Xs...&gt;, L&lt;Ys...&gt;&gt;::type()};
}

int main ()
{
  using tuple0 = std::tuple&lt;int, char, double&gt;;
  using tuple1 = std::tuple&lt;float, unsigned long&gt;;

  bar(tuple0{}, tuple1{});
}
</code></pre>

<p>This should do what you expected.</p>
",Jamboree,Jamboree,1409821670,1409834679,1409834679
http://stackoverflow.com/a/25683817/61574,Variadic template pack expansion,33299,Viacheslav  Dronov,0x22fe,1409901235,1552677401,1491037725,https://stackoverflow.com/questions/25680461/variadic-template-pack-expansion,"<p>One of the places where a pack expansion can occur is inside a <em>braced-init-list</em>. You can take advantage of this by putting the expansion inside the initializer list of a dummy array:</p>

<pre><code>template&lt;typename... Args&gt;
static void foo2(Args &amp;&amp;... args)
{
    int dummy[] = { 0, ( (void) bar(std::forward&lt;Args&gt;(args)), 0) ... };
}
</code></pre>

<p>To explain the content of the initializer in more detail:</p>

<pre><code>{ 0, ( (void) bar(std::forward&lt;Args&gt;(args)), 0) ... };
  |       |       |                        |     |
  |       |       |                        |     --- pack expand the whole thing 
  |       |       |                        |   
  |       |       --perfect forwarding     --- comma operator
  |       |
  |       -- cast to void to ensure that regardless of bar()'s return type
  |          the built-in comma operator is used rather than an overloaded one
  |
  ---ensure that the array has at least one element so that we don't try to make an
     illegal 0-length array when args is empty
</code></pre>

<p><a href=""http://coliru.stacked-crooked.com/a/0c0950c1c2225b6f"" rel=""noreferrer"">Demo</a>.</p>

<p>An important advantage of expanding in <code>{}</code> is that it guarantees left-to-right evaluation.</p>

<hr>

<p>With C++17 <a href=""http://en.cppreference.com/w/cpp/language/fold"" rel=""noreferrer"">fold expressions</a>, you can just write</p>

<pre><code>((void) bar(std::forward&lt;Args&gt;(args)), ...);
</code></pre>
",T.C.,Barry,1409912951,1552677401,1552677401
http://stackoverflow.com/a/2569696/781723,Showing the stack trace from a running Python application,115998,Seb,Community,1222329966,1547671677,1495535474,https://stackoverflow.com/questions/132058/showing-the-stack-trace-from-a-running-python-application,"<p>I am almost always dealing with multiple threads and main thread is generally not doing much, so what is most interesting is to dump all the stacks (which is more like the Java's dump). Here is an implementation based on <a href=""http://bzimmer.ziclix.com/2008/12/17/python-thread-dumps/"" rel=""noreferrer"">this blog</a>:</p>

<pre><code>import threading, sys, traceback

def dumpstacks(signal, frame):
    id2name = dict([(th.ident, th.name) for th in threading.enumerate()])
    code = []
    for threadId, stack in sys._current_frames().items():
        code.append(""\n# Thread: %s(%d)"" % (id2name.get(threadId,""""), threadId))
        for filename, lineno, name, line in traceback.extract_stack(stack):
            code.append('File: ""%s"", line %d, in %s' % (filename, lineno, name))
            if line:
                code.append(""  %s"" % (line.strip()))
    print ""\n"".join(code)

import signal
signal.signal(signal.SIGQUIT, dumpstacks)
</code></pre>
",haridsv,haridsv,1270250627,1375856949,1375856949
http://stackoverflow.com/a/2573986/2508518,Force page reload with html anchors (#) - HTML &amp; JS,47312,Yuval Karmi,Taz,1270371822,1561842851,1339335762,https://stackoverflow.com/questions/2573979/force-page-reload-with-html-anchors-html-js,"<p>I would suggest monitoring the anchor in the URL to avoid a reload, that's pretty much the point of using anchors for control-flow. But still here goes. I'd say the easiest way to force a reload using a simple anchor-link would be to use</p>

<pre><code>&lt;a href=""?dummy=$random#myanchor2""&gt;&lt;/a&gt;
</code></pre>

<p>where in place of <code>$random</code> insert a random number (assuming ""dummy"" is not interpreted server side). I'm sure there's a way to reload the page after setting the anchor, but it's probably more difficult then simply reacting to the anchor being set and do the stuff you need at that point.</p>

<p>Then again, if you reload the page this way, you can just put <code>myanchor2</code> as a query parameter instead, and render your stuff server side.</p>

<p><b>Edit</b><br>
Note that the link above will reload in all circumstances, if you only need to reload if you're not already on the page, you need to have the dummy variable be more predictable, like so</p>

<pre><code>&lt;a href=""?dummy=myanchor2#myanchor2""&gt;&lt;/a&gt;
</code></pre>

<p>I would still recommend just monitoring the hash though.</p>
",falstro,falstro,1270372179,1270373222,1270373222
http://stackoverflow.com/a/25751871/1821055,LZ4 library decompressed data upper bound size estimation,2914,bobeff,bobeff,1410253039,1410311046,1410259320,https://stackoverflow.com/questions/25740471/lz4-library-decompressed-data-upper-bound-size-estimation,"<p>The maximum compression ratio of LZ4 is 255, so a guaranteed over-estimation of decompressed data size is 255 times input size.</p>

<p>That's obviously too much to be really useful, hence the reason why there is no ""reverse LZ4_compressBound()"" function available.</p>

<p>I'm afraid there is no other way than to save, or know, the uncompressed size. The LZ4 ""raw"" compression format doesn't define a way to save such information, because optimal choice is application specific. For example, some application know in advance that no block can be > 16KB, so they can use maxDecompressedSize = 16 KB when calling LZ4_decompress_safe().</p>

<p>Now, if you are looking for an envelope format that will take in charge such responsibility, you could either create your own custom one, or use the LZ4 Framing format : <a href=""http://fastcompression.blogspot.fr/2013/04/lz4-streaming-format-final.html"" rel=""noreferrer"">http://fastcompression.blogspot.fr/2013/04/lz4-streaming-format-final.html</a> (also present as LZ4_Framing_Format.html within source package). Alas, the library able to generate and read this format is currently in beta stage (<a href=""https://github.com/Cyan4973/lz4/tree/frame"" rel=""noreferrer"">https://github.com/Cyan4973/lz4/tree/frame</a>)</p>
",Cyan,Cyan,1410289474,1410289803,1410289803
http://stackoverflow.com/a/25806229/409481,How to round an image with Glide library?,122579,mr.boyfox,Charu,1407908610,1558083322,1483529466,https://stackoverflow.com/questions/25278821/how-to-round-an-image-with-glide-library,"<p>Check this <a href=""http://vardhan-justlikethat.blogspot.in/2014/09/android-image-loading-libraries-picasso.html"">post, glide vs picasso</a>...<br>
<strong>Edit</strong>: the linked post doesn't call out an important difference in the libraries. Glide does the recycling automatically. See <a href=""http://vardhan-justlikethat.blogspot.hu/2014/09/android-image-loading-libraries-picasso.html?showComment=1429294826669#c5507604261259603599"">TWiStErRob's comment</a> for more.</p>

<pre><code>Glide.with(this).load(URL).transform(new CircleTransform(context)).into(imageView);

public static class CircleTransform extends BitmapTransformation {
    public CircleTransform(Context context) {
        super(context);
    }

    @Override protected Bitmap transform(BitmapPool pool, Bitmap toTransform, int outWidth, int outHeight) {
        return circleCrop(pool, toTransform);
    }

    private static Bitmap circleCrop(BitmapPool pool, Bitmap source) {
        if (source == null) return null;

        int size = Math.min(source.getWidth(), source.getHeight());
        int x = (source.getWidth() - size) / 2;
        int y = (source.getHeight() - size) / 2;

        // TODO this could be acquired from the pool too
        Bitmap squared = Bitmap.createBitmap(source, x, y, size, size);

        Bitmap result = pool.get(size, size, Bitmap.Config.ARGB_8888);
        if (result == null) {
            result = Bitmap.createBitmap(size, size, Bitmap.Config.ARGB_8888);
        }

        Canvas canvas = new Canvas(result);
        Paint paint = new Paint();
        paint.setShader(new BitmapShader(squared, BitmapShader.TileMode.CLAMP, BitmapShader.TileMode.CLAMP));
        paint.setAntiAlias(true);
        float r = size / 2f;
        canvas.drawCircle(r, r, r, paint);
        return result;
    }

    @Override public String getId() {
        return getClass().getName();
    }
} 
</code></pre>
",Harsha Vardhan,TWiStErRob,1410517840,1458644329,1458644329
http://stackoverflow.com/a/25813184/2422398,In Django Admin how do I disable the Delete link,27628,Peter Bengtsson,,1288276025,1551280685,0,https://stackoverflow.com/questions/4043843/in-django-admin-how-do-i-disable-the-delete-link,"<p>If you want to disable an specific one that isn't custom do this. In django 1.6.6 I had to extend <code>get_actions</code> plus define <code>has_delete_permission</code>. The <code>has_delete_permission</code> solution does not get rid of the action from the dropdown for me:</p>

<pre><code>class MyModelAdmin(admin.ModelAdmin):

    ....

    def get_actions(self, request):
        #Disable delete
        actions = super(MyModelAdmin, self).get_actions(request)
        del actions['delete_selected']
        return actions

    def has_delete_permission(self, request, obj=None):
        #Disable delete
        return False
</code></pre>

<p>Not including it in <code>actions = ['your_custom_action']</code>, only works for the custom actions (defs) you have defined for that model. The solution <code>AdminSite.disable_action('delete_selected')</code>, disables it for all models, so you would have to explicitly include them later per each modelAdmin</p>
",radtek,meshy,1410540915,1508409852,1508409852
http://stackoverflow.com/a/25829178/266378,Trim whitespace from a String,92629,kf.,Joulukuusi,1410656086,1546392713,1508791249,https://stackoverflow.com/questions/25829143/trim-whitespace-from-a-string,"<p>Your code is fine. What you are seeing is a linker issue.</p>

<p>If you put your code in a single file like this:</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;string&gt;

using namespace std;

string trim(const string&amp; str)
{
    size_t first = str.find_first_not_of(' ');
    if (string::npos == first)
    {
        return str;
    }
    size_t last = str.find_last_not_of(' ');
    return str.substr(first, (last - first + 1));
}

int main() {
    string s = ""abc "";
    cout &lt;&lt; trim(s);

}
</code></pre>

<p>then do <code>g++ test.cc</code> and run a.out, you will see it works.</p>

<p>You should check if the file that contains the <code>trim</code> function is included in the link stage of your compilation process. </p>
",Anthony Kong,Martin,1410656536,1479681202,1479681202
http://stackoverflow.com/a/25839145/720268,Disable cache digests in Rails 4,1449,AlexC,AlexC,1410734332,1410738711,1410734913,https://stackoverflow.com/questions/25838709/disable-cache-digests-in-rails-4,"<p>Easiest way to do this is to monkey patch the <code>cache_fragment_name</code> method so that <code>skip_digest</code> is <code>true</code> by default.  In order to use the md5 digest when you need it, you'd just need to set <code>skip_digest</code> to <code>false</code></p>

<pre><code>module ActionView
  module Helpers
    module CacheHelper
      def cache_fragment_name(name = {}, options = nil)
        skip_digest = options &amp;&amp; !options[:skip_digest].nil? ? options[:skip_digest] : true

        if skip_digest
          name
        else
          fragment_name_with_digest(name)
        end
      end
    end
  end
end
</code></pre>
",jvnill,,1410738711,1410738711,0
http://stackoverflow.com/a/25872852/4925354,AngularJS - UI Router - programmatically add states,37477,khorvat,CodeMonkey,1410863316,1533716090,1533716090,https://stackoverflow.com/questions/25866387/angularjs-ui-router-programmatically-add-states,"<h1>See -edit- for updated information</h1>

<p>Normally states are added to the <code>$stateProvider</code> during the config phase.  If you want to add states at runtime, you'll need to keep a reference to the <code>$stateProvider</code> around. </p>

<p>This code is untested, but should do what you want.  It creates a service called <code>runtimeStates</code>.  You can inject it into runtime code and then add states.</p>

<pre><code>// config-time dependencies can be injected here at .provider() declaration
myapp.provider('runtimeStates', function runtimeStates($stateProvider) {
  // runtime dependencies for the service can be injected here, at the provider.$get() function.
  this.$get = function($q, $timeout, $state) { // for example
    return { 
      addState: function(name, state) { 
        $stateProvider.state(name, state);
      }
    }
  }
});
</code></pre>

<p>I've implemented some stuff called <strong>Future States</strong> in <a href=""http://christopherthielen.github.io/ui-router-extras"" rel=""noreferrer"">UI-Router Extras</a> that take care of some of the corner cases for you like mapping urls to states that don't exist yet.  Future States also shows how you can lazy load the source code for runtime-states.  Take a look at the <a href=""https://github.com/christopherthielen/ui-router-extras/blob/master/src/futureState.js#L165"" rel=""noreferrer"">source code</a> to get a feel for what is involved.</p>

<h1>-edit- for UI-Router 1.0+</h1>

<p>In UI-Router 1.0, states can be registered and deregistered at runtime using <a href=""https://ui-router.github.io/ng1/docs/latest/classes/state.stateregistry.html#register"" rel=""noreferrer""><code>StateRegistry.register</code></a> and <a href=""https://ui-router.github.io/ng1/docs/latest/classes/state.stateregistry.html#deregister"" rel=""noreferrer""><code>StateRegistry.deregister</code></a>.</p>

<p>To get access to the StateRegistry, inject it as <a href=""https://ui-router.github.io/ng1/docs/latest/modules/injectables.html#_stateregistry"" rel=""noreferrer""><code>$stateRegistry</code></a>, or inject <a href=""https://ui-router.github.io/ng1/docs/latest/modules/injectables.html#_uirouter"" rel=""noreferrer""><code>$uiRouter</code></a> and access it via <a href=""https://ui-router.github.io/ng1/docs/latest/classes/core.uirouter.html#stateregistry"" rel=""noreferrer""><code>UIRouter.stateRegistry</code></a>.</p>

<p>UI-Router 1.0 also includes Future States out of the box which handles lazy loading of state definitions, even synchronizing by URL.</p>
",Chris T,Chris T,1410881483,1484852070,1484852070
http://stackoverflow.com/a/25875504/75715,How can I escape LaTeX special characters inside django templates?,4887,user196264097,Martin Thoma,1367126843,1527408143,1505823441,https://stackoverflow.com/questions/16259923/how-can-i-escape-latex-special-characters-inside-django-templates,"<p>Alex's answer including suggestions in code, if you want to copy-paste:</p>

<pre><code>import re

def tex_escape(text):
    """"""
        :param text: a plain text message
        :return: the message escaped to appear correctly in LaTeX
    """"""
    conv = {
        '&amp;': r'\&amp;',
        '%': r'\%',
        '$': r'\$',
        '#': r'\#',
        '_': r'\_',
        '{': r'\{',
        '}': r'\}',
        '~': r'\textasciitilde{}',
        '^': r'\^{}',
        '\\': r'\textbackslash{}',
        '&lt;': r'\textless{}',
        '&gt;': r'\textgreater{}',
    }
    regex = re.compile('|'.join(re.escape(unicode(key)) for key in sorted(conv.keys(), key = lambda item: - len(item))))
    return regex.sub(lambda match: conv[match.group()], text)
</code></pre>

<p>See <a href=""https://stackoverflow.com/questions/2400504/easiest-way-to-replace-a-string-using-a-dictionary-of-replacements"">Easiest way to replace a string using a dictionary of replacements?</a> for replacement approach.</p>
",Mark,Mark,1410890230,1527408143,1527408143
http://stackoverflow.com/a/25900210/2097055,how to get used traits in php-class?,8985,Teson,hakre,1354217837,1476784720,1367008020,https://stackoverflow.com/questions/13633346/how-to-get-used-traits-in-php-class,"<p>I wish that will be useful (thanks to Maurice for interface usage):
        

<pre><code>    interface IHaveHasTrait
    {
        public function has_trait($name);
    };

    trait THaveHasTrait
    {
        public function has_trait($name)
        {
            $classes = class_parents( $this );
            $classes[] = get_class( $this );
            foreach( $classes as $class ) {
                foreach( class_uses( $class ) as $t ) {
                    if( $t === $name ) {
                        return true;
                    }
                }
            }
            return false;
        }
    };

    trait TLinkedListItem
    {
        use THaveHasTrait;
        public $next;
        public $prev;
    };

    class A implements IHaveHasTrait
    {
        use TLinkedListItem;
        public $text;

        public function __construct( $_text )
        {
            $this-&gt;text = $_text;
        }
    };

    class B extends A{};

    class C extends B{};

    class LinkedList
    {
        public function insertItem( &amp;$item, $position=0, $relative=false )
        {
            if( is_a( $item, 'IHaveHasTrait' ) ) {
                echo $item-&gt;has_trait( 'TLinkedListItem' ) ? 'has' : 'not';
            }
        }
    };

    $a = new C('a');
    $l = new LinkedList;
    $l-&gt;insertItem($a);
    ?&gt;
</code></pre>
",not_jagg_at_adecosystems_com,,1410987397,1410987397,0
http://stackoverflow.com/a/25920392/64911,Filtering out certain bytes in python,10443,y3di,Community,1325707421,1513147443,1495540462,https://stackoverflow.com/questions/8733233/filtering-out-certain-bytes-in-python,"<p>Another approach that's much faster than the answer above is to use regular expressions, like so:</p>

<pre><code>re.sub(u'[^\u0020-\uD7FF\u0009\u000A\u000D\uE000-\uFFFD\U00010000-\U0010FFFF]+', '', text)
</code></pre>

<p>Comparing to the answer above, it comes out to be more than 10X faster in my testing:</p>

<pre><code>import timeit

func_test = """"""
def valid_xml_char_ordinal(c):
    codepoint = ord(c)
    # conditions ordered by presumed frequency
    return (
        0x20 &lt;= codepoint &lt;= 0xD7FF or
        codepoint in (0x9, 0xA, 0xD) or
        0xE000 &lt;= codepoint &lt;= 0xFFFD or
        0x10000 &lt;= codepoint &lt;= 0x10FFFF
    );
''.join(c for c in r.content if valid_xml_char_ordinal(c))
""""""

func_setup = """"""
import requests; 
r = requests.get(""https://stackoverflow.com/questions/8733233/"")
""""""

regex_test = """"""re.sub(u'[^\u0020-\uD7FF\u0009\u000A\u000D\uE000-\uFFFD\U00010000-\U0010FFFF]+', '', r.content)""""""
regex_setup = """"""
import requests, re; 
r = requests.get(""https://stackoverflow.com/questions/8733233/"")
""""""

func_test = timeit.Timer(func_test, setup=func_setup)
regex_test = timeit.Timer(regex_test, setup=regex_setup)

print func_test.timeit(100)
print regex_test.timeit(100)
</code></pre>

<p>Output: </p>

<pre><code>&gt; 2.63773989677
&gt; 0.221401929855
</code></pre>

<p>So, making sense of that, what we're doing is downloading this webpage once (the page you're currently reading), then running the functional technique and the regex technique over its contents 100X each.</p>

<p>Using the functional method takes about <strong>2.6</strong> seconds.<br>
Using the regex method takes about <strong>0.2</strong> seconds.</p>

<hr>

<p><strong>Update</strong>: As identified in the comments, the regex in this answer previously deleted some characters, which should have been allowed in XML. These characters include anything in the <a href=""https://en.wikipedia.org/wiki/Plane_(Unicode)#Supplementary_Multilingual_Plane"" rel=""nofollow noreferrer"">Supplementary Multilingual Plane</a>, which is includes ancient scripts like cuneiform, hieroglyphics, and (weirdly) emojis.</p>

<p>The correct regex is now above. A quick test for this in the future is using <code>re.DEBUG</code>, which prints:</p>

<pre><code>In [52]: re.compile(u'[^\u0020-\uD7FF\u0009\u000A\u000D\uE000-\uFFFD\U00010000-\U0010FFFF]+', re.DEBUG)
max_repeat 1 4294967295
  in
    negate None
    range (32, 55295)
    literal 9
    literal 10
    literal 13
    range (57344, 65533)
    range (65536, 1114111)
Out[52]: re.compile(ur'[^ -\ud7ff\t\n\r\ue000-\ufffd\U00010000-\U0010ffff]+', re.DEBUG)
</code></pre>

<p>My apologies for the error. I can only offer that I found this answer elsewhere and put it in here. It was somebody else's error, but I propagated it. My sincere apologies to anybody this affected.</p>

<p><strong>Update 2, 2017-12-12</strong>: I've learned from some OSX users that this code won't work on so-called narrow builds of Python, which apparently OSX sometimes has. You can check this by running <code>import sys; sys.maxunicode</code>. If it prints 65535, the code here won't work until you install a ""wide build"". <a href=""https://stackoverflow.com/a/31605097/64911"">See more about this here.</a></p>
",mlissner,mlissner,1411066767,1513147443,1513147443
http://stackoverflow.com/a/2593661/130442,,,,,,,,,,,,,,
http://stackoverflow.com/a/25943620/654755,Celery flower&#39;s Broker tab is blank,4505,Alex Bain,,1377208942,1446368010,1411920575,https://stackoverflow.com/questions/18391563/celery-flowers-broker-tab-is-blank,"<p>For AMQP this is an example.</p>

<p><code>/usr/bin/celery -A app_name --broker=amqp://user:pw@host//vhost --broker_api=http://user:pw@host:host_port/api flower</code></p>

<p>The broker_api is the rabbitmq web ui endpoint with /api</p>
",f01,,1411168441,1411168441,0
http://stackoverflow.com/a/26009085/355753,net::ERR_INCOMPLETE_CHUNKED_ENCODING in Chrome only,57324,StefanDorresteijn,Kiquenet,1395661697,1556699377,1464170458,https://stackoverflow.com/questions/22608564/neterr-incomplete-chunked-encoding-in-chrome-only,"<p>In my case, the problem was cache-related and was happening when doing a CORS request.</p>

<p>As stated in comments above:</p>

<blockquote>
  <p>the error seemed to appear randomly</p>
</blockquote>

<p>This is because of the Http cache system.</p>

<p>Forcing the response header <code>Cache-Control</code> to <code>no-cache</code> resolved my issue:</p>

<p><em>[ using Symfony <a href=""http://symfony.com/doc/current/components/http_foundation/index.html"">HttpFoundation</a> component ]</em></p>

<pre><code>&lt;?php
$response-&gt;headers-&gt;add(array(
   'Cache-Control' =&gt; 'no-cache'
));
</code></pre>
",eightyfive,,1411535847,1411535847,0
http://stackoverflow.com/a/26087606/1060973,win32 GUI app that writes usage text to stdout when invoked as &quot;app.exe --help&quot;,9714,JeffJ,,1221062878,1411925425,0,https://stackoverflow.com/questions/54536/win32-gui-app-that-writes-usage-text-to-stdout-when-invoked-as-app-exe-help,"<p>You can use <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944(v=vs.85).aspx"" rel=""noreferrer""><code>AllocConsole()</code></a> WinApi function to allocate a console for GUI application. You can also try attaching to a console of a parent process with <a href=""http://msdn.microsoft.com/en-us/library/windows/desktop/ms681952(v=vs.85).aspx"" rel=""noreferrer""><code>AttachConsole()</code></a>, this makes sense if it already has one. The complete code with redirecting <code>stdout</code> and <code>stderr</code> to this console will be like this:</p>

<pre><code>if(AttachConsole(ATTACH_PARENT_PROCESS) || AllocConsole()){
    freopen(""CONOUT$"", ""w"", stdout);
    freopen(""CONOUT$"", ""w"", stderr);
}
</code></pre>

<p>I found this approach in the <a href=""https://www.pidgin.im/"" rel=""noreferrer"">Pidgin</a> sources (see <code>WinMain()</code> in pidgin/win32/winpidgin.c)</p>
",Dmitry Markin,,1411925425,1411925425,0
http://stackoverflow.com/a/2609244/1047560,How to test a confirm dialog with Cucumber?,34087,Yuval Karmi,Mohsin Awan,1268778686,1485205210,1480726184,https://stackoverflow.com/questions/2458632/how-to-test-a-confirm-dialog-with-cucumber,"<p>Seems like there's no way to do it in Capybara, unfortunately. But if you're running your tests with the Selenium driver (and probably other drivers that support JavaScript), you can hack it. Just before performing the action that would bring up the confirm dialog, override the <code>confirm</code> method to always return true. That way the dialog will never be displayed, and your tests can continue as if the user had pressed the OK button. If you want to simulate the reverse, simply change it to return false.</p>

<pre><code>page.evaluate_script('window.confirm = function() { return true; }')
page.click('Remove')
</code></pre>
",Theo,,1270831488,1270831488,0
http://stackoverflow.com/a/26103160/1589989,Wordpress: wp_enqueue_media causes javascript error from /wp-admin/upload.php?mode=list page,4720,matteo.cajani,Anoop Asok,1410937887,1412614643,1410939318,https://stackoverflow.com/questions/25884434/wordpress-wp-enqueue-media-causes-javascript-error-from-wp-admin-upload-phpmo,"<p>I was having the same issue... what I did to fix it was to make sure I didn't include wp_enqueue_media() on the upload.php page!  Wrap your function in this if statement</p>

<pre><code>if( is_admin() &amp;&amp; ! empty ( $_SERVER['PHP_SELF'] ) &amp;&amp; 'upload.php' !== basename( $_SERVER['PHP_SELF'] ) ) {
    function my_admin_load_styles_and_scripts() {
        wp_enqueue_media();
    }
    add_action( 'admin_enqueue_scripts', 'my_admin_load_styles_and_scripts' );
}
</code></pre>

<p>The ""is_admin()"" part also assures that this is only run in the admin area, and not the front end.  Makes things just a bit cleaner in my opinion.</p>

<p><strong>UPDATE: 1</strong></p>

<p>Here's what I found out through some research.  When you check out wp-admin/upload.php, there is a new section for the grid layout.  Inside that section, you get the following called (lines 24-26):</p>

<pre><code>wp_enqueue_media();
wp_enqueue_script( 'media-grid' );
wp_enqueue_script( 'media' );
</code></pre>

<p>You probably don't get any error here because <code>wp_enqueue_media()</code> has a built-in check to make sure it only gets called once per page (line 2785 in wp-includes/media.php).</p>

<p>Further down the upload.php page, after the grid code you only see the following call (line 192):</p>

<pre><code>wp_enqueue_script( 'media' );
</code></pre>

<p>There is no call for <code>wp_enqueue_media()</code> (bug in WordPress?  I don't know), but it's this line that is causing the issue.  You can update your code to this:</p>

<pre><code>if( is_admin() ) {
    function my_admin_load_styles_and_scripts() {
        $mode = get_user_option( 'media_library_mode', get_current_user_id() ) ? get_user_option( 'media_library_mode', get_current_user_id() ) : 'grid';
        $modes = array( 'grid', 'list' );
        if ( isset( $_GET['mode'] ) &amp;&amp; in_array( $_GET['mode'], $modes ) ) {
            $mode = $_GET['mode'];
            update_user_option( get_current_user_id(), 'media_library_mode', $mode );
        }
        if( ! empty ( $_SERVER['PHP_SELF'] ) &amp;&amp; 'upload.php' === basename( $_SERVER['PHP_SELF'] ) &amp;&amp; 'grid' !== $mode ) {
            wp_dequeue_script( 'media' );
        }
        wp_enqueue_media();
    }
    add_action( 'admin_enqueue_scripts', 'my_admin_load_styles_and_scripts' );
}
</code></pre>

<p>And it stops the error...</p>

<p><strong>Explanation:</strong> Lines 3-8 are taken directly from wp-admin/upload.php (lines 15-21).  They simply will tell you if you are viewing the grid mode, or list mode when you show up on upload.php.  This is important because whichever mode you choose, it is saved in the database as an option.  The next time you return to the upload page, the query string in the URL is not used, but the option is.  So targeting just the query string in the URL is not reliable.  On line 9, we have moved the check, since we only want this extenuating code to happen on the upload.php page, and only removing the script when we are in list mode.  Line 10 de-registers the script for the page.</p>

<p>However I don't know what else ""breaks"" on the upload.php list view by removing the media script.  And I don't know if it's added back somewhere down the road by using wp_enqueue_media() as I haven't had time to fully look through the function.  I did try to add it back after my call to wp_enqueue_media(), but the same error appears.  But hopefully this gets you in the right direction.</p>
",Daniel C,Daniel C,1412003557,1412614643,1412614643
http://stackoverflow.com/a/26126935/654755,Django: Get model from string?,62243,mpen,,1296693686,1561637515,1561637515,https://stackoverflow.com/questions/4881607/django-get-model-from-string,"<p><code>django.db.models.loading</code> was <a href=""https://github.com/django/django/blob/1.7/django/db/models/loading.py"" rel=""noreferrer"">deprecated in Django 1.7</a> (<a href=""https://docs.djangoproject.com/en/1.9/releases/1.9/#features-removed-in-1-9"" rel=""noreferrer"">removed in 1.9</a>) in favor of the the new <a href=""https://docs.djangoproject.com/en/2.2/ref/applications/#initialization-process"" rel=""noreferrer"">application loading system</a>.</p>

<p>Django <a href=""https://docs.djangoproject.com/en/1.7/ref/applications/#django.apps.apps.get_model"" rel=""noreferrer"">1.7 docs</a> give us the following instead:</p>

<pre><code>&gt;&gt;&gt; from django.apps import apps
&gt;&gt;&gt; User = apps.get_model(app_label='auth', model_name='User')
&gt;&gt;&gt; print(User)
&lt;class 'django.contrib.auth.models.User'&gt;
</code></pre>
",Scott Woodall,shad0w_wa1k3r,1412099253,1556142902,1556142902
http://stackoverflow.com/a/26127012/1243487,Evenly distributing n points on a sphere,71142,Befall,Amir,1331120346,1556747302,1518113483,https://stackoverflow.com/questions/9600801/evenly-distributing-n-points-on-a-sphere,"<p>The Fibonacci sphere algorithm is great for this. It's fast and gives results that at a glance will easily fool the human eye. <a href=""http://www.openprocessing.org/sketch/41142"" rel=""noreferrer"">You can see an example done with processing</a> which will show the result over time as points are added. <a href=""https://www.vertexshaderart.com/art/79HqSrQH4meL63aAo/revision/9c9YN5LwBQKLDa4Aa"" rel=""noreferrer"">Here's another great interactive example</a> made by @gman. And here's a quick python version with a simple randomization option:</p>

<pre><code>import math, random

def fibonacci_sphere(samples=1,randomize=True):
    rnd = 1.
    if randomize:
        rnd = random.random() * samples

    points = []
    offset = 2./samples
    increment = math.pi * (3. - math.sqrt(5.));

    for i in range(samples):
        y = ((i * offset) - 1) + (offset / 2);
        r = math.sqrt(1 - pow(y,2))

        phi = ((i + rnd) % samples) * increment

        x = math.cos(phi) * r
        z = math.sin(phi) * r

        points.append([x,y,z])

    return points
</code></pre>

<p>1000 samples gives you this:</p>

<p><img src=""https://i.stack.imgur.com/NsCif.png"" alt=""enter image description here""></p>
",Fnord,Fnord,1412099484,1507930394,1507930394
http://stackoverflow.com/a/26165175/1020667,"Chrome not handling chunked responses like Firefox, Safari",1509,kimura,,1412265352,1412267120,0,https://stackoverflow.com/questions/26164705/chrome-not-handling-chunked-responses-like-firefox-safari,"<p>Both Chrome and IE ""sniff"" the data (the first 256 bytes I believe) in order to detect the mime type. Use this to disable that behavior:</p>

<pre><code>response.setHeader('X-Content-Type-Options', 'nosniff');
</code></pre>
",mscdex,,1412267120,1412267120,0
http://stackoverflow.com/a/2616912/2104361,How do I output coloured text to a Linux terminal?,229248,Macha,Rakete1111,1270987086,1540377895,1536570500,https://stackoverflow.com/questions/2616906/how-do-i-output-coloured-text-to-a-linux-terminal,"<p>You need to output <a href=""http://en.wikipedia.org/wiki/ANSI_escape_code"" rel=""noreferrer"">ANSI colour codes</a>. Note that not all terminals support this; if colour sequences are not supported, garbage will show up.</p>

<p>Example:</p>

<pre><code> cout &lt;&lt; ""\033[1;31mbold red text\033[0m\n"";
</code></pre>

<p>Here, <code>\033</code> is the ESC character, ASCII 27. It is followed by <code>[</code>, then zero or more numbers separated by <code>;</code>, and finally the letter <code>m</code>. The numbers describe the colour and format to switch to from that point onwards.</p>

<p>The codes for foreground and background colours are:</p>

<pre><code>         foreground background
black        30         40
red          31         41
green        32         42
yellow       33         43
blue         34         44
magenta      35         45
cyan         36         46
white        37         47
</code></pre>

<p>Additionally, you can use these:</p>

<pre><code>reset             0  (everything back to normal)
bold/bright       1  (often a brighter shade of the same colour)
underline         4
inverse           7  (swap foreground and background colours)
bold/bright off  21
underline off    24
inverse off      27
</code></pre>

<p>See the <a href=""http://en.wikipedia.org/wiki/ANSI_escape_code#graphics"" rel=""noreferrer"">table on Wikipedia</a> for other, less widely supported codes.</p>

<hr>

<p>To determine whether your terminal supports colour sequences, read the value of the <code>TERM</code> environment variable. It should specify the particular terminal type used (e.g. <code>vt100</code>, <code>gnome-terminal</code>, <code>xterm</code>, <code>screen</code>, ...). Then look that up in the <a href=""http://linux.die.net/man/5/terminfo"" rel=""noreferrer"">terminfo database</a>; check the <code>colors</code> capability.</p>
",Thomas,Rakete1111,1270987250,1536570702,1536570702
http://stackoverflow.com/a/26169603/2600812,Detect Browser Language in PHP,224225,GibboK,GibboK,1285167256,1537466907,1458141041,https://stackoverflow.com/questions/3770513/detect-browser-language-in-php,"<p>The following script is a modified version of Xeoncross's code (thank you for that Xeoncross) that falls-back to a default language setting if no languages match the supported ones, or if a match is found it replaces the default language setting with a new one according to the language priority.</p>

<p>In this scenario the user's browser is set in order of priority to Spanish, Dutch, US English and English and the application supports English and Dutch only with no regional variations and English is the default language. The order of the values in the ""HTTP_ACCEPT_LANGUAGE"" string is not important if for some reason the browser does not order the values correctly.</p>

<pre><code>$supported_languages = array(""en"",""nl"");
$supported_languages = array_flip($supported_languages);
var_dump($supported_languages); // array(2) { [""en""]=&gt; int(0) [""nl""]=&gt; int(1) }

$http_accept_language = $_SERVER[""HTTP_ACCEPT_LANGUAGE""]; // es,nl;q=0.8,en-us;q=0.5,en;q=0.3

preg_match_all('~([\w-]+)(?:[^,\d]+([\d.]+))?~', strtolower($http_accept_language), $matches, PREG_SET_ORDER);

$available_languages = array();

foreach ($matches as $match)
{
    list($language_code,$language_region) = explode('-', $match[1]) + array('', '');

    $priority = isset($match[2]) ? (float) $match[2] : 1.0;

    $available_languages[][$language_code] = $priority;
}

var_dump($available_languages);

/*
array(4) {
    [0]=&gt;
    array(1) {
        [""es""]=&gt;
        float(1)
    }
    [1]=&gt;
    array(1) {
        [""nl""]=&gt;
        float(0.8)
    }
    [2]=&gt;
    array(1) {
        [""en""]=&gt;
        float(0.5)
    }
    [3]=&gt;
    array(1) {
        [""en""]=&gt;
        float(0.3)
    }
}
*/

$default_priority = (float) 0;
$default_language_code = 'en';

foreach ($available_languages as $key =&gt; $value)
{
    $language_code = key($value);
    $priority = $value[$language_code];

    if ($priority &gt; $default_priority &amp;&amp; array_key_exists($language_code,$supported_languages))
    {
        $default_priority = $priority;
        $default_language_code = $language_code;

        var_dump($default_priority); // float(0.8)
        var_dump($default_language_code); // string(2) ""nl""
    }
}

var_dump($default_language_code); // string(2) ""nl"" 
</code></pre>
",Noel Whitemore,Noel Whitemore,1412283684,1412284298,1412284298
http://stackoverflow.com/a/26172556/633234,How do I test (TDD) a singleton class?,558,JSBach,,1412291270,1412305738,0,https://stackoverflow.com/questions/26171007/how-do-i-test-tdd-a-singleton-class,"<p>Ordering your tests won't matter. To properly test a singleton class you need to treat it like an instance object. To do that, wrap your singleton in an anonymous Class during setup. Every time setup is called you'll get an untouched copy of the ParticipantRepository:</p>

<pre><code>def setup
  @repository = Class.new(ParticipantRepository).instance
end
</code></pre>
",Micah Jaffe,Micah Jaffe,1412304112,1412305738,1412305738
http://stackoverflow.com/a/26196831/3000919,RecyclerView onClick,498784,CurtJRees,Harish Gyanani,1403990863,1562601063,1479983986,https://stackoverflow.com/questions/24471109/recyclerview-onclick,"<p>Here is a better and less tightly coupled way to implement an <code>OnClickListener</code> for a <code>RecyclerView</code>.  </p>

<p>Snippet of usage:</p>

<pre><code>RecyclerView recyclerView = findViewById(R.id.recycler);
recyclerView.addOnItemTouchListener(
    new RecyclerItemClickListener(context, recyclerView ,new RecyclerItemClickListener.OnItemClickListener() {
      @Override public void onItemClick(View view, int position) {
        // do whatever
      }

      @Override public void onLongItemClick(View view, int position) {
        // do whatever
      }
    })
);
</code></pre>

<p><code>RecyclerItemClickListener</code> implementation:</p>

<pre><code>import android.content.Context;
import android.support.v7.widget.RecyclerView;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.View;


public class RecyclerItemClickListener implements RecyclerView.OnItemTouchListener {
  private OnItemClickListener mListener;

  public interface OnItemClickListener {
    public void onItemClick(View view, int position);

    public void onLongItemClick(View view, int position);
  }

  GestureDetector mGestureDetector;

  public RecyclerItemClickListener(Context context, final RecyclerView recyclerView, OnItemClickListener listener) {
    mListener = listener;
    mGestureDetector = new GestureDetector(context, new GestureDetector.SimpleOnGestureListener() {
        @Override
        public boolean onSingleTapUp(MotionEvent e) {
            return true;
        }

        @Override
        public void onLongPress(MotionEvent e) {
            View child = recyclerView.findChildViewUnder(e.getX(), e.getY());
            if (child != null &amp;&amp; mListener != null) {
                mListener.onLongItemClick(child, recyclerView.getChildAdapterPosition(child));
            }
        }
    });
}

  @Override public boolean onInterceptTouchEvent(RecyclerView view, MotionEvent e) {
    View childView = view.findChildViewUnder(e.getX(), e.getY());
    if (childView != null &amp;&amp; mListener != null &amp;&amp; mGestureDetector.onTouchEvent(e)) {
      mListener.onItemClick(childView, view.getChildAdapterPosition(childView));
      return true;
    }
    return false;
  }

  @Override public void onTouchEvent(RecyclerView view, MotionEvent motionEvent) { }

  @Override
  public void onRequestDisallowInterceptTouchEvent (boolean disallowIntercept){}
}
</code></pre>
",Jacob Tabak,Tom11,1412454127,1473834948,1473834948
http://stackoverflow.com/a/26197300/298171,std::string formatting like sprintf,721962,Max Frai,thecoshman,1267193754,1562275400,1431193559,https://stackoverflow.com/questions/2342162/stdstring-formatting-like-sprintf,"<p>My two cents on this very popular question.</p>

<p>To quote the <a href=""http://linux.die.net/man/3/snprintf"" rel=""nofollow noreferrer"">manpage of <code>printf</code>-like functions</a>:</p>

<blockquote>
  <p>Upon successful return, these functions return the number of characters printed (excluding the null byte used to end output to strings).</p>
  
  <p>The  functions  snprintf()  and vsnprintf() do not write more than size bytes (including the terminating null byte ('\0')).  If the output  was truncated  due  to  this  limit  then the return value is the number of characters (excluding the terminating null byte) which would have  been written  to the final string if enough space had been available.  Thus, a return value of size or more means that  the  output  was  truncated.</p>
</blockquote>

<p>In other words, a sane C++11 implementation should be the following:</p>

<pre><code>#include &lt;string&gt;
#include &lt;cstdio&gt;

template &lt;typename... Ts&gt;
std::string fmt (const std::string &amp;fmt, Ts... vs)
{
    char b;
    size_t required = std::snprintf(&amp;b, 0, fmt.c_str(), vs...) + 1;
        // See comments: the +1 is necessary, while the first parameter
        //               can also be set to nullptr

    char bytes[required];
    std::snprintf(bytes, required, fmt.c_str(), vs...);

    return std::string(bytes);
}
</code></pre>

<p>It works quite well :)</p>

<p>Variadic templates are supported only in C++11. The answer from pixelpoint show a similar technique using older programming styles.</p>

<p>It's weird that C++ does not have such a thing out of the box. They recently added <a href=""http://www.cplusplus.com/articles/D9j2Nwbp/#cpp11"" rel=""nofollow noreferrer""><code>to_string()</code></a>, which in my opinion is a great step forward. I'm wondering if they will add a <code>.format</code> operator to the <code>std::string</code> eventually...</p>

<h2>Edit</h2>

<p>As alexk7 pointed out, A <code>+1</code> is needed on the return value of <code>std::snprintf</code>, since we need to have space for the <code>\0</code> byte. Intuitively, on most architectures missing the <code>+1</code> will cause the <code>required</code> integer to be partially overwritten with a <code>0</code>. This will happen <em>after</em> the evaluation of <code>required</code> as actual parameter for <code>std::snprintf</code>, so the effect should not be visible.</p>

<p>This problem could however change, for instance with compiler optimization: what if the compiler decides to use a register for the <code>required</code> variable? This is the kind of errors which sometimes result in security issues.</p>
",Dacav,Dacav,1412457606,1523541788,1523541788
http://stackoverflow.com/a/26235831/1945875,Checking if a string is valid json before trying to parse it?,31515,Sam,Simone Carletti,1412674472,1553894887,1449050332,https://stackoverflow.com/questions/26232909/checking-if-a-string-is-valid-json-before-trying-to-parse-it,"<p>You can create a method to do the checking:</p>

<pre><code>def valid_json?(json)
    JSON.parse(json)
    return true
  rescue JSON::ParserError =&gt; e
    return false
end
</code></pre>
",Richa Sinha,Richa Sinha,1412684347,1491296013,1491296013
http://stackoverflow.com/a/26244910/2066546,Overriding devise SessionsController destroy,6424,DemianArdus,sameers,1412701380,1480870874,1480060033,https://stackoverflow.com/questions/26241357/overriding-devise-sessionscontroller-destroy,"<p>You probably need to <code>skip_before_action :verify_signed_out_user</code>.
Take a look at <a href=""https://github.com/plataformatec/devise/blob/master/app/controllers/devise/sessions_controller.rb"" rel=""noreferrer"">https://github.com/plataformatec/devise/blob/master/app/controllers/devise/sessions_controller.rb</a> line 4.</p>
",pragma,Pawe Gocicki,1412714475,1480870874,1480870874
http://stackoverflow.com/a/26286472/5764181,Rails 4: How do I create a custom 404 page that uses the asset pipeline?,26634,Avery,Community,1402884102,1509621026,1495542387,https://stackoverflow.com/questions/24235805/rails-4-how-do-i-create-a-custom-404-page-that-uses-the-asset-pipeline,"<p>For Rails 4.1 I like <a href=""https://stackoverflow.com/a/25303705/608359"">this answer, add an asset type</a> better; however I have not tried it.  On Rails 4.0.8, these three references helped me:</p>

<ol>
<li><p><a href=""http://wearestac.com/blog/dynamic-error-pages-in-rails"" rel=""noreferrer"">Dynamic error pages</a> is the second reference in the question.  This worked just fine for me.</p></li>
<li><p><a href=""http://agileleague.com/blog/rails-3-2-custom-error-pages-the-exceptions_app-and-testing-with-capybara/"" rel=""noreferrer"">Custom error pages</a> may have cribbed from the first reference, or the other way around, but goes the extra mile by adding some information about testing with Capybara.</p></li>
<li><p>I did not do the Capybara testing because I didn't want to change the test configuration; however, <a href=""https://github.com/rspec/rspec-rails#request-specs"" rel=""noreferrer"">RSpec-Rails Request Specs</a> clued me in to test these requests independently and see that they complete and return the correct content.</p></li>
</ol>

<p>What follows is a nutshell description of what is taught by the three references:</p>

<ol>
<li><p>Add the following setting to <code>config/environments/production.rb</code></p>

<pre><code># Route exceptions to the application router vs. default
config.exceptions_app = self.routes
</code></pre></li>
<li><p>Edit the routing configuration, <code>config/routes.rb</code> to direct the error pages to an errors controller</p>

<pre><code>  # error pages
  %w( 404 422 500 503 ).each do |code|
    get code, :to =&gt; ""errors#show"", :code =&gt; code
  end
</code></pre>

<p>will route the 404, 422, 500, and 503 page requests to the <code>show</code> action of the <code>errors</code> controller with a parameter <code>code</code> that has the value of the status code.</p></li>
<li><p>Create the controller, <code>app/controllers/errors_controller.rb</code>.  Here is the entire content:</p>

<pre><code>class ErrorsController &lt; ApplicationController

  def show
    status_code = params[:code] || 500
    flash.alert = ""Status #{status_code}""
    render status_code.to_s, status: status_code
  end

end
</code></pre>

<p>My preference was to set a status message on <code>flash.alert</code></p></li>
<li><p>Create the pages themselves.  I use <code>.erb</code>  Here is <code>app/views/errors/500.html.erb</code></p>

<pre><code>&lt;p&gt;Our apology.  Your request caused an error.&lt;/p&gt;
&lt;%= render 'product_description' %&gt;
</code></pre>

<p>So you see that you can render a partial.  The page renders with all of the layout boilerplate from <code>app/views/layouts/application.html.erb</code> or any other layout boilerplate that you have configured.  That includes the <code>&lt;div id='alert'&gt;&lt;%= alert %&gt;&lt;/div&gt;</code> that displays the status message from the flash.</p></li>
<li><p>Tested with RSpec by adding a test file, <code>spec/requests/errors_request_spec.rb</code>.  Here is abbreviated content of that file that shows a test of the 500 status page:</p>

<pre><code>require 'rails_helper'

RSpec.describe ""errors"", :type =&gt; :request do

  it ""displays the 500 page"" do
    get ""/500""
    assert_select 'div#alert', 'Status 500'
    assert_select 'div[itemtype]'
  end

end
</code></pre>

<p>The first assertion checks for the flash alert.  The second assertion checks for the partial.</p></li>
</ol>
",Douglas Lovell,Community,1412883005,1412883589,1495540499
http://stackoverflow.com/a/26303918/552182,WebRTC issue when using RecordRTC,412,Brayan,Brayan,1412951321,1412963413,1412963413,https://stackoverflow.com/questions/26301771/webrtc-issue-when-using-recordrtc,"<p>I expect the user is using an audio card with a sample rate higher than 96000.  I just had a bug report yesterday from a user using a 192k sound card.</p>
",cwilso,,1412958389,1412958389,0
http://stackoverflow.com/a/2634715/1931663,Good hash function for a 2d index,9885,rlbond,,1271215530,1529210112,0,https://stackoverflow.com/questions/2634690/good-hash-function-for-a-2d-index,"<p>Following the technique is given in <em>Effective Java</em> (2nd edition), and quoted from there in <em>Programming in Scala</em>. Have a prime constant (we'll say 53 but you may find something larger will give more even distribution here), and perform multiplication and addition as follows:</p>

<pre><code>(53 + int_hash(row)) * 53 + int_hash(col)
</code></pre>

<p>For more values (say you add a z coordinate), just keep nesting, like</p>

<pre><code>((53 + int_hash(row)) * 53 + int_hash(col)) * 53 + int_hash(z)
</code></pre>

<p>Where <code>int_hash</code> is a function for hashing a single integer. You can visit this page to find <a href=""http://web.archive.org/web/20071223173210/http://www.concentric.net/~Ttwang/tech/inthash.htm"" rel=""nofollow noreferrer"">a bunch of good hash functions</a> for single integers. </p>
",Ken Bloom,Peter Krauss,1271215949,1529210112,1529210112
http://stackoverflow.com/a/26353788/841108,Attaching keypress and focusout event to elements inside contenteditable div,2816,Coder,Regent,1413265801,1526654759,1413267780,https://stackoverflow.com/questions/26353478/attaching-keypress-and-focusout-event-to-elements-inside-contenteditable-div,"<p>Basically the <code>contenteditable</code> is the one that will respond to events dispatched from the inner Nodes. If we get the caret position and than target it's range's parentNode - than we can retrieve the desired ID</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>$('[contenteditable]').on('keypress focusout', function(ev) {
  var node = window.getSelection().getRangeAt(0).commonAncestorContainer;
  var nodeParent = node.parentNode;
  
  // Do something if parent node ID is ""p1""
  if( nodeParent.id === ""p1"") {
    console.log( nodeParent.id +' '+ ev.type ); // or whatever you need to do here
  }
});</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;div contenteditable=""true""&gt;
   &lt;p id=""p1""&gt;TestP1 do someting on keypress&lt;/p&gt;
   &lt;p id=""p2""&gt;TestP2 is Not Interesting&lt;/p&gt;
&lt;/div&gt;

&lt;script src=""//code.jquery.com/jquery-3.1.0.js""&gt;&lt;/script&gt;</code></pre>
</div>
</div>
</p>
",Roko C. Buljan,Roko C. Buljan,1413267101,1526654759,1526654759
http://stackoverflow.com/a/263796/467582,"How to get the caret column (not pixels) position in a textarea, in characters, from the start?",158851,Restless Wanderer,John,1225838212,1527584112,1527584112,https://stackoverflow.com/questions/263743/how-to-get-the-caret-column-not-pixels-position-in-a-textarea-in-characters,"<p>With Firefox, Safari (and other Gecko based browsers) you can easily use textarea.selectionStart, but for IE that doesn't work, so you will have to do something like this:</p>

<pre><code>function getCaret(node) {
  if (node.selectionStart) {
    return node.selectionStart;
  } else if (!document.selection) {
    return 0;
  }

  var c = ""\001"",
      sel = document.selection.createRange(),
      dul = sel.duplicate(),
      len = 0;

  dul.moveToElementText(node);
  sel.text = c;
  len = dul.text.indexOf(c);
  sel.moveStart('character',-1);
  sel.text = """";
  return len;
}
</code></pre>

<p>(<a href=""http://web.archive.org/web/20080214051356/http://www.csie.ntu.edu.tw/~b88039/html/jslib/caret.html"" rel=""noreferrer"">complete code here</a>)</p>

<p>I also recommend you to check the jQuery <a href=""https://github.com/localhost/jquery-fieldselection"" rel=""noreferrer"">FieldSelection</a> Plugin, it allows you to do that and much more...</p>

<p><strong>Edit:</strong> I actually re-implemented the above code: </p>

<pre><code>function getCaret(el) { 
  if (el.selectionStart) { 
    return el.selectionStart; 
  } else if (document.selection) { 
    el.focus(); 

    var r = document.selection.createRange(); 
    if (r == null) { 
      return 0; 
    } 

    var re = el.createTextRange(), 
        rc = re.duplicate(); 
    re.moveToBookmark(r.getBookmark()); 
    rc.setEndPoint('EndToStart', re); 

    return rc.text.length; 
  }  
  return 0; 
}
</code></pre>

<p>Check an example <a href=""http://jsbin.com/iwopa"" rel=""noreferrer"">here</a>.</p>
",CMS,Bakudan,1225839499,1325037351,1325037351
http://stackoverflow.com/a/2638272/789224,Getting relative path from absolute path in PHP,28049,Young,Amy,1271253538,1448345190,1377624632,https://stackoverflow.com/questions/2637945/getting-relative-path-from-absolute-path-in-php,"<p>Try this one:</p>

<pre><code>function getRelativePath($from, $to)
{
    // some compatibility fixes for Windows paths
    $from = is_dir($from) ? rtrim($from, '\/') . '/' : $from;
    $to   = is_dir($to)   ? rtrim($to, '\/') . '/'   : $to;
    $from = str_replace('\\', '/', $from);
    $to   = str_replace('\\', '/', $to);

    $from     = explode('/', $from);
    $to       = explode('/', $to);
    $relPath  = $to;

    foreach($from as $depth =&gt; $dir) {
        // find first non-matching dir
        if($dir === $to[$depth]) {
            // ignore this directory
            array_shift($relPath);
        } else {
            // get number of remaining dirs to $from
            $remaining = count($from) - $depth;
            if($remaining &gt; 1) {
                // add traversals up to first matching dir
                $padLength = (count($relPath) + $remaining - 1) * -1;
                $relPath = array_pad($relPath, $padLength, '..');
                break;
            } else {
                $relPath[0] = './' . $relPath[0];
            }
        }
    }
    return implode('/', $relPath);
}
</code></pre>

<p>This will give</p>

<pre><code>$a=""/home/a.php"";
$b=""/home/root/b/b.php"";
echo getRelativePath($a,$b), PHP_EOL;  // ./root/b/b.php
</code></pre>

<p>and</p>

<pre><code>$a=""/home/apache/a/a.php"";
$b=""/home/root/b/b.php"";
echo getRelativePath($a,$b), PHP_EOL; // ../../root/b/b.php
</code></pre>

<p>and</p>

<pre><code>$a=""/home/root/a/a.php"";
$b=""/home/apache/htdocs/b/en/b.php"";
echo getRelativePath($a,$b), PHP_EOL; // ../../apache/htdocs/b/en/b.php
</code></pre>

<p>and</p>

<pre><code>$a=""/home/apache/htdocs/b/en/b.php"";
$b=""/home/root/a/a.php"";
echo getRelativePath($a,$b), PHP_EOL; // ../../../../root/a/a.php
</code></pre>
",Gordon,Gordon,1271255998,1377623762,1377623762
http://stackoverflow.com/a/26382720/3356840,Detect charset and convert to utf-8 in Python?,62387,robos85,jww,1310736254,1562562407,1562562407,https://stackoverflow.com/questions/6707657/detect-charset-and-convert-to-utf-8-in-python,"<p>If you want to do it with cchardet, you can use this function.</p>

<pre><code>import cchardet
def convert_encoding(data, new_coding = 'UTF-8'):
  encoding = cchardet.detect(data)['encoding']

  if new_coding.upper() != encoding.upper():
    data = data.decode(encoding, data).encode(new_coding)

  return data
</code></pre>
",teawithfruit,,1413376379,1413376379,0
http://stackoverflow.com/a/263958/990120,What happens if you call erase() on a map element while iterating from begin to end?,77382,MattSmith,Community,1225843376,1473752396,1495542357,https://stackoverflow.com/questions/263945/what-happens-if-you-call-erase-on-a-map-element-while-iterating-from-begin-to,"<h2>C++11</h2>

<p>This has been fixed in C++11 (or erase has been improved/made consistent across all container types).<br>
The erase method now returns the next iterator.</p>

<pre><code>auto pm_it = port_map.begin();
while(pm_it != port_map.end())
{
    if (pm_it-&gt;second == delete_this_id)
    {
        pm_it = port_map.erase(pm_it);
    }
    else
    {
        ++pm_it;
    }
}
</code></pre>

<h2>C++03</h2>

<p>Erasing elements in a map does not invalidate any iterators.<br>
(apart from iterators on the element that was deleted)</p>

<p>Actually inserting or deleting does not invalidate any of the iterators:</p>

<p>Also see this answer:<br>
<a href=""https://stackoverflow.com/a/180616/14065"">Mark Ransom Technique</a>  </p>

<p>But you do need to update your code:<br>
In your code you increment pm_it after calling erase. At this point it is too late and is already invalidated.</p>

<pre><code>map&lt;string, SerialdMsg::SerialFunction_t&gt;::iterator pm_it = port_map.begin();
while(pm_it != port_map.end())
{
    if (pm_it-&gt;second == delete_this_id)
    {
        port_map.erase(pm_it++);  // Use iterator.
                                  // Note the post increment.
                                  // Increments the iterator but returns the
                                  // original value for use by erase 
    }
    else
    {
        ++pm_it;           // Can use pre-increment in this case
                           // To make sure you have the efficient version
    }
}
</code></pre>
",Martin York,Community,1225843769,1473752396,1495540468
http://stackoverflow.com/a/264088/391618,Is it possible to write a template to check for a function&#39;s existence?,126899,andy,Justin,1225656647,1558954590,1493832937,https://stackoverflow.com/questions/257288/is-it-possible-to-write-a-template-to-check-for-a-functions-existence,"<p>C++ allows <a href=""http://en.wikipedia.org/wiki/SFINAE"" rel=""noreferrer"">SFINAE</a> to be used for this (notice that with C++11 features this is simplier because it supports extended SFINAE on nearly arbitrary expressions - the below was crafted to work with common C++03 compilers):</p>

<pre><code>#define HAS_MEM_FUNC(func, name)                                        \
    template&lt;typename T, typename Sign&gt;                                 \
    struct name {                                                       \
        typedef char yes[1];                                            \
        typedef char no [2];                                            \
        template &lt;typename U, U&gt; struct type_check;                     \
        template &lt;typename _1&gt; static yes &amp;chk(type_check&lt;Sign, &amp;_1::func &gt; *); \
        template &lt;typename   &gt; static no  &amp;chk(...);                    \
        static bool const value = sizeof(chk&lt;T&gt;(0)) == sizeof(yes);     \
    }
</code></pre>

<p>the above template and macro tries to instantiate a template, giving it a member function pointer type, and the actual member function pointer. If the types to not fit, SFINAE causes the template to be ignored. Usage like this:</p>

<pre><code>HAS_MEM_FUNC(toString, has_to_string);

template&lt;typename T&gt; void
doSomething() {
   if(has_to_string&lt;T, std::string(T::*)()&gt;::value) {
      ...
   } else {
      ...
   }
}
</code></pre>

<p>But note that you cannot just call that <code>toString</code> function in that if branch. since the compiler will check for validity in both branches, that would fail for cases the function doesnt exist. One way is to use SFINAE once again (enable_if can be gotten from boost too):</p>

<pre><code>template&lt;bool C, typename T = void&gt;
struct enable_if {
  typedef T type;
};

template&lt;typename T&gt;
struct enable_if&lt;false, T&gt; { };

HAS_MEM_FUNC(toString, has_to_string);

template&lt;typename T&gt; 
typename enable_if&lt;has_to_string&lt;T, 
                   std::string(T::*)()&gt;::value, std::string&gt;::type
doSomething(T * t) {
   /* something when T has toString ... */
   return t-&gt;toString();
}

template&lt;typename T&gt; 
typename enable_if&lt;!has_to_string&lt;T, 
                   std::string(T::*)()&gt;::value, std::string&gt;::type
doSomething(T * t) {
   /* something when T doesnt have toString ... */
   return ""T::toString() does not exist."";
}
</code></pre>

<p>Have fun using it. The advantage of it is that it also works for overloaded member functions, and also for const member functions (remember using  <code>std::string(T::*)() const</code> as the member function pointer type then!). </p>
",Johannes Schaub - litb,Johannes Schaub - litb,1225847319,1397237243,1397237243
http://stackoverflow.com/a/2641047/1967542,jQuery event handlers always execute in order they were bound - any way around this?,96212,asgeo1,F&#225;bio Santos,1267499214,1410891142,1353933107,https://stackoverflow.com/questions/2360655/jquery-event-handlers-always-execute-in-order-they-were-bound-any-way-around-t,"<p><strong>Updated Answer</strong></p>

<p>jQuery changed the location of where events are stored in 1.8. Now you know why it is such a bad idea to mess around with internal APIs :)</p>

<p>The new <strong><em>internal</em></strong> API to access to events for a DOM object is available through the global jQuery object, and not tied to each instance, and it takes a DOM element as the first parameter, and a key (""events"" for us) as the second parameter.</p>

<pre><code>jQuery._data(&lt;DOM element&gt;, ""events"");
</code></pre>

<p>So here's the modified code for jQuery 1.8.</p>

<pre><code>// [name] is the name of the event ""click"", ""mouseover"", .. 
// same as you'd pass it to bind()
// [fn] is the handler function
$.fn.bindFirst = function(name, fn) {
    // bind as you normally would
    // don't want to miss out on any jQuery magic
    this.on(name, fn);

    // Thanks to a comment by @Martin, adding support for
    // namespaced events too.
    this.each(function() {
        var handlers = $._data(this, 'events')[name.split('.')[0]];
        // take out the handler we just inserted from the end
        var handler = handlers.pop();
        // move it at the beginning
        handlers.splice(0, 0, handler);
    });
};
</code></pre>

<p>And here's a <a href=""http://jsfiddle.net/x8Na8/2/"" rel=""noreferrer"">playground</a>.</p>

<hr />

<p><strong>Original Answer</strong></p>

<p>As @Sean has discovered, jQuery exposes all event handlers through an  element's <code>data</code> interface. Specifically <code>element.data('events')</code>. Using this you could always write a simple plugin whereby you could insert any event handler at a specific position.</p>

<p>Here's a simple plugin that does just that to insert a handler at the beginning of the list. You can easily extend this to insert an item at any given position. It's just array manipulation. But since I haven't seen jQuery's source and don't want to miss out on any jQuery magic from happening, I normally add the handler using <code>bind</code> first, and then reshuffle the array.</p>

<pre><code>// [name] is the name of the event ""click"", ""mouseover"", .. 
// same as you'd pass it to bind()
// [fn] is the handler function
$.fn.bindFirst = function(name, fn) {
    // bind as you normally would
    // don't want to miss out on any jQuery magic
    this.bind(name, fn);

    // Thanks to a comment by @Martin, adding support for
    // namespaced events too.
    var handlers = this.data('events')[name.split('.')[0]];
    // take out the handler we just inserted from the end
    var handler = handlers.pop();
    // move it at the beginning
    handlers.splice(0, 0, handler);
};
</code></pre>

<p>So for example, for this markup it would work as (<a href=""http://jsfiddle.net/j6HP5/2/"" rel=""noreferrer"">example here</a>):</p>

<pre><code>&lt;div id=""me""&gt;..&lt;/div&gt;

$(""#me"").click(function() { alert(""1""); });
$(""#me"").click(function() { alert(""2""); });    
$(""#me"").bindFirst('click', function() { alert(""3""); });

$(""#me"").click(); // alerts - 3, then 1, then 2
</code></pre>

<p><strong><em>However</em></strong>, since <code>.data('events')</code> is not part of their public API as far as I know, an update to jQuery could break your code if the underlying representation of attached events changes from an array to something else, for example.</p>

<p><em>Disclaimer: Since anything is possible :), here's your solution, but I would still err on the side of refactoring your existing code, as just trying to remember the order in which these items were attached can soon get out of hand as you keep adding more and more of these ordered events.</em></p>
",Anurag,Anurag,1271279207,1354768592,1354768592
http://stackoverflow.com/a/2652425/1085344,How to detect a sign change for elements in a numpy array,15752,Robert Christie,,1271415880,1537988487,0,https://stackoverflow.com/questions/2652368/how-to-detect-a-sign-change-for-elements-in-a-numpy-array,"<p>Something like</p>

<pre><code>a = array([1,1,-1,-2,-3,4,5])
asign = np.sign(a)
signchange = ((np.roll(asign, 1) - asign) != 0).astype(int)
print signchange
array([0, 0, 1, 0, 0, 1, 0])
</code></pre>

<p>Now, numpy.roll does a circular shift, so if the last element has different sign than the first, the first element in the signchange array will be 1. If this is not desired, one can of course do a simple</p>

<pre><code>signchange[0] = 0
</code></pre>

<p>Also, np.sign considers 0 to have it's own sign, different from either positive or negative values. E.g. the ""signchange"" array for [-1,0,1] would be [0,1,1] even though the zero line was ""crossed"" only once. If this is undesired, one could insert the lines</p>

<pre><code>sz = asign == 0
while sz.any():
    asign[sz] = np.roll(asign, 1)[sz]
    sz = asign == 0
</code></pre>

<p>between lines 2 and 3 in the first example.</p>
",janneb,janneb,1271416571,1271440351,1271440351
http://stackoverflow.com/a/26543290/3569421,How to Change programmatically Edittext Cursor Color in android?,22301,Amit Prajapati,Cur,1411477877,1562657135,1505022617,https://stackoverflow.com/questions/25996032/how-to-change-programmatically-edittext-cursor-color-in-android,"<p>Using some reflection did the trick for me</p>

<p>Java:</p>

<pre><code>// https://github.com/android/platform_frameworks_base/blob/kitkat-release/core/java/android/widget/TextView.java#L562-564
Field f = TextView.class.getDeclaredField(""mCursorDrawableRes"");
f.setAccessible(true);
f.set(yourEditText, R.drawable.cursor);
</code></pre>

<p>XML:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;shape xmlns:android=""http://schemas.android.com/apk/res/android""
    android:shape=""rectangle"" &gt;

    &lt;solid android:color=""#ff000000"" /&gt;

    &lt;size android:width=""1dp"" /&gt;

&lt;/shape&gt;
</code></pre>

<hr>

<p>Here is a method that you can use that doesn't need an XML:</p>

<pre><code>public static void setCursorColor(EditText view, @ColorInt int color) {
  try {
    // Get the cursor resource id
    Field field = TextView.class.getDeclaredField(""mCursorDrawableRes"");
    field.setAccessible(true);
    int drawableResId = field.getInt(view);

    // Get the editor
    field = TextView.class.getDeclaredField(""mEditor"");
    field.setAccessible(true);
    Object editor = field.get(view);

    // Get the drawable and set a color filter
    Drawable drawable = ContextCompat.getDrawable(view.getContext(), drawableResId);
    drawable.setColorFilter(color, PorterDuff.Mode.SRC_IN);
    Drawable[] drawables = {drawable, drawable};

    // Set the drawables
    field = editor.getClass().getDeclaredField(""mCursorDrawable"");
    field.setAccessible(true);
    field.set(editor, drawables);
  } catch (Exception ignored) {
  }
}
</code></pre>
",Jared Rummler,Jared Rummler,1414135507,1483705963,1483705963
http://stackoverflow.com/a/2659324/160256,Add maven-build-classpath to plugin execution classpath,14497,Roman,Jasper de Vries,1271520673,1522573723,1522573723,https://stackoverflow.com/questions/2659048/add-maven-build-classpath-to-plugin-execution-classpath,"<p>Found the <a href=""http://old.nabble.com/Adding-project-dependencies-and-generated-classes-to-classpath-of-my-plugin-td18624435.html"" rel=""noreferrer"">answer</a>!</p>

<p>OK , Pascal is right , here it is for the foundation!!</p>

<p>So here is the cleanest way ( as far as i know ) to add the compile classpath to the execution of you plugin.</p>

<p>Here are some code samples from my code-gen plugin, that is actually generating some template code based on the code compiled. So I needed first the code compiled, then analyzed, generate some code, and then compiled again.</p>

<ol>
<li><p>Use <code>@configurator</code> in the Mojo class:</p>

<pre><code>/**
 * @goal generate
 * @phase process-classes
 * @configurator include-project-dependencies
 * @requiresDependencyResolution compile+runtime
 */
public class CodeGenMojo
        extends AbstractMojo
{
    public void execute()
            throws MojoExecutionException
    {
         // do work....   
    }
}
</code></pre>

<p>Please pay attention to the <code>@configurator</code> line in the javadoc header, it is essetial for the plexus IOC container and is not just another comment line.</p></li>
<li><p>The implementation of the <code>include-project-dependencies</code> configurator. There is this very nice class that I took from some Brian Jackson, add it to the source of your plugin.</p>

<pre><code>/**
 * A custom ComponentConfigurator which adds the project's runtime classpath elements
 * to the
 *
 * @author Brian Jackson
 * @since Aug 1, 2008 3:04:17 PM
 *
 * @plexus.component role=""org.codehaus.plexus.component.configurator.ComponentConfigurator""
 *                   role-hint=""include-project-dependencies""
 * @plexus.requirement role=""org.codehaus.plexus.component.configurator.converters.lookup.ConverterLookup""
 *                   role-hint=""default""
 */
public class IncludeProjectDependenciesComponentConfigurator extends AbstractComponentConfigurator { 

    private static final Logger LOGGER = Logger.getLogger(IncludeProjectDependenciesComponentConfigurator.class);

    public void configureComponent( Object component, PlexusConfiguration configuration,
                                    ExpressionEvaluator expressionEvaluator, ClassRealm containerRealm,
                                    ConfigurationListener listener )
        throws ComponentConfigurationException {

        addProjectDependenciesToClassRealm(expressionEvaluator, containerRealm);

        converterLookup.registerConverter( new ClassRealmConverter( containerRealm ) );

        ObjectWithFieldsConverter converter = new ObjectWithFieldsConverter();

        converter.processConfiguration( converterLookup, component, containerRealm.getClassLoader(), configuration,
                                        expressionEvaluator, listener );
    }

    private void addProjectDependenciesToClassRealm(ExpressionEvaluator expressionEvaluator, ClassRealm containerRealm) throws ComponentConfigurationException {
        List&lt;String&gt; runtimeClasspathElements;
        try {
            //noinspection unchecked
            runtimeClasspathElements = (List&lt;String&gt;) expressionEvaluator.evaluate(""${project.runtimeClasspathElements}"");
        } catch (ExpressionEvaluationException e) {
            throw new ComponentConfigurationException(""There was a problem evaluating: ${project.runtimeClasspathElements}"", e);
        }

        // Add the project dependencies to the ClassRealm
        final URL[] urls = buildURLs(runtimeClasspathElements);
        for (URL url : urls) {
            containerRealm.addConstituent(url);
        }
    }

    private URL[] buildURLs(List&lt;String&gt; runtimeClasspathElements) throws ComponentConfigurationException {
        // Add the projects classes and dependencies
        List&lt;URL&gt; urls = new ArrayList&lt;URL&gt;(runtimeClasspathElements.size());
        for (String element : runtimeClasspathElements) {
            try {
                final URL url = new File(element).toURI().toURL();
                urls.add(url);
                if (LOGGER.isDebugEnabled()) {
                    LOGGER.debug(""Added to project class loader: "" + url);
                }
            } catch (MalformedURLException e) {
                throw new ComponentConfigurationException(""Unable to access project dependency: "" + element, e);
            }
        }

        // Add the plugin's dependencies (so Trove stuff works if Trove isn't on
        return urls.toArray(new URL[urls.size()]);
    }

}
</code></pre></li>
<li><p>Here is the build part of my plugin that you will have to add. </p>

<p></p>

<pre><code>&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&lt;groupId&gt;com.delver&lt;/groupId&gt;
&lt;artifactId&gt;reference-gen-plugin&lt;/artifactId&gt;
&lt;name&gt;Reference Code Genration Maven Plugin&lt;/name&gt;

&lt;packaging&gt;maven-plugin&lt;/packaging&gt;
&lt;version&gt;1.2&lt;/version&gt;

&lt;url&gt;http://maven.apache.org&lt;/url&gt;

&lt;properties&gt;
    &lt;maven.version&gt;2.2.1&lt;/maven.version&gt;
&lt;/properties&gt;

&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;
            &lt;artifactId&gt;plexus-maven-plugin&lt;/artifactId&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;descriptor&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
&lt;dependencies&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;
        &lt;artifactId&gt;maven-artifact&lt;/artifactId&gt;
        &lt;version&gt;${maven.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;
        &lt;artifactId&gt;maven-plugin-api&lt;/artifactId&gt;
        &lt;version&gt;${maven.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;
        &lt;artifactId&gt;maven-project&lt;/artifactId&gt;
        &lt;version&gt;${maven.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;
        &lt;artifactId&gt;maven-model&lt;/artifactId&gt;
        &lt;version&gt;${maven.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;
        &lt;artifactId&gt;maven-core&lt;/artifactId&gt;
        &lt;version&gt;2.0.9&lt;/version&gt;
    &lt;/dependency&gt;

&lt;/dependencies&gt;
</code></pre>

<p></p>

<p>Here is the pom.xml of the plugin for these who need it. Should compile wihtout a problem now. ( something wrong with the header, so ignore it )</p></li>
</ol>
",Roman,Xi Jli,1271525471,1342129805,1342129805
http://stackoverflow.com/a/265978/2832475,Get the IP address of the machine,168831,BlaM,Community,1224255645,1507208797,1495542861,https://stackoverflow.com/questions/212528/get-the-ip-address-of-the-machine,"<p>I found the ioctl solution problematic on os x (which is POSIX compliant so should be similiar to linux). However getifaddress() will let you do the same thing easily, it works fine for me on os x 10.5 and should be the same below.</p>

<p>I've done a quick example below which will print all of the machine's IPv4 address, (you should also check the getifaddrs was successful ie returns 0).</p>

<p>I've updated it show IPv6 addresses too.</p>

<pre><code>#include &lt;stdio.h&gt;      
#include &lt;sys/types.h&gt;
#include &lt;ifaddrs.h&gt;
#include &lt;netinet/in.h&gt; 
#include &lt;string.h&gt; 
#include &lt;arpa/inet.h&gt;

int main (int argc, const char * argv[]) {
    struct ifaddrs * ifAddrStruct=NULL;
    struct ifaddrs * ifa=NULL;
    void * tmpAddrPtr=NULL;

    getifaddrs(&amp;ifAddrStruct);

    for (ifa = ifAddrStruct; ifa != NULL; ifa = ifa-&gt;ifa_next) {
        if (!ifa-&gt;ifa_addr) {
            continue;
        }
        if (ifa-&gt;ifa_addr-&gt;sa_family == AF_INET) { // check it is IP4
            // is a valid IP4 Address
            tmpAddrPtr=&amp;((struct sockaddr_in *)ifa-&gt;ifa_addr)-&gt;sin_addr;
            char addressBuffer[INET_ADDRSTRLEN];
            inet_ntop(AF_INET, tmpAddrPtr, addressBuffer, INET_ADDRSTRLEN);
            printf(""%s IP Address %s\n"", ifa-&gt;ifa_name, addressBuffer); 
        } else if (ifa-&gt;ifa_addr-&gt;sa_family == AF_INET6) { // check it is IP6
            // is a valid IP6 Address
            tmpAddrPtr=&amp;((struct sockaddr_in6 *)ifa-&gt;ifa_addr)-&gt;sin6_addr;
            char addressBuffer[INET6_ADDRSTRLEN];
            inet_ntop(AF_INET6, tmpAddrPtr, addressBuffer, INET6_ADDRSTRLEN);
            printf(""%s IP Address %s\n"", ifa-&gt;ifa_name, addressBuffer); 
        } 
    }
    if (ifAddrStruct!=NULL) freeifaddrs(ifAddrStruct);
    return 0;
}
</code></pre>
",Twelve47,Josh Kelley,1225906483,1409675734,1409675734
http://stackoverflow.com/a/2660610/4717805,C linux equivalent of windows QueryPerformanceCounter,10150,myforwik,myforwik,1271487858,1467568225,1271550216,https://stackoverflow.com/questions/2657579/c-linux-equivalent-of-windows-queryperformancecounter,"<p><a href=""http://linux.die.net/man/2/clock_gettime"" rel=""noreferrer""><code>clock_gettime(2)</code></a>, with an argument of <code>CLOCK_REALTIME_HR</code>.</p>
",Ignacio Vazquez-Abrams,,1271550318,1271550318,0
http://stackoverflow.com/a/26613169/1984644,"UI-router interfers with $httpbackend unit test, angular js",19647,Joe,Joe,1400071936,1460617364,1400103528,https://stackoverflow.com/questions/23655307/ui-router-interfers-with-httpbackend-unit-test-angular-js,"<p>This Github issue about <a href=""https://github.com/angular-ui/ui-router/issues/212"" rel=""nofollow noreferrer"">Unit Testing UI Router</a> explains more fully what's happening.</p>

<p>The problem is that <code>$httpBackend.flush()</code> triggers a broadcast which then triggers the otherwise case of the <code>stateProvider</code>.</p>

<p>A simple solution can be to do the following setup, as mentionned by @darinclark in Github thread mentionned above. This is valid if you do not need to test state transitions. Otherwise have a look to <a href=""https://stackoverflow.com/a/23670198/16587"">@rosswil's answer</a> that is inspired by <a href=""https://github.com/angular-ui/ui-router/issues/212"" rel=""nofollow noreferrer"">@Vratislav answer on Github</a>.</p>

<pre><code>beforeEach(module(function ($urlRouterProvider) {
    $urlRouterProvider.otherwise(function(){return false;});
}));
</code></pre>

<p><strong>EDITED</strong></p>

<p>Thanks to Chris T to report this in the comments, seems after v0.2.14? the best way to do this is to use</p>

<pre><code>beforeEach(module(function($urlRouterProvider) {
  $urlRouterProvider.deferIntercept();
}));
</code></pre>
",Ronan Quillevere,Community,1414512687,1452633377,1495542747
http://stackoverflow.com/a/266162/3083983,Best way to strip punctuation from a string,577705,Lawrence Johnston,Georgy,1225906232,1561556216,1561556216,https://stackoverflow.com/questions/265960/best-way-to-strip-punctuation-from-a-string,"<p>From an efficiency perspective, you're not going to beat </p>

<pre><code>s.translate(None, string.punctuation)
</code></pre>

<p>For higher versions of Python use the following code:</p>

<pre><code>s.translate(str.maketrans('', '', string.punctuation))
</code></pre>

<p>It's performing raw string operations in C with a lookup table - there's not much that will beat that but writing your own C code.</p>

<p>If speed isn't a worry, another option though is:</p>

<pre><code>exclude = set(string.punctuation)
s = ''.join(ch for ch in s if ch not in exclude)
</code></pre>

<p>This is faster than s.replace with each char, but won't perform as well as non-pure python approaches such as regexes or string.translate, as you can see from the below timings.  For this type of problem, doing it at as low a level as possible pays off.</p>

<p>Timing code:</p>

<pre><code>import re, string, timeit

s = ""string. With. Punctuation""
exclude = set(string.punctuation)
table = string.maketrans("""","""")
regex = re.compile('[%s]' % re.escape(string.punctuation))

def test_set(s):
    return ''.join(ch for ch in s if ch not in exclude)

def test_re(s):  # From Vinko's solution, with fix.
    return regex.sub('', s)

def test_trans(s):
    return s.translate(table, string.punctuation)

def test_repl(s):  # From S.Lott's solution
    for c in string.punctuation:
        s=s.replace(c,"""")
    return s

print ""sets      :"",timeit.Timer('f(s)', 'from __main__ import s,test_set as f').timeit(1000000)
print ""regex     :"",timeit.Timer('f(s)', 'from __main__ import s,test_re as f').timeit(1000000)
print ""translate :"",timeit.Timer('f(s)', 'from __main__ import s,test_trans as f').timeit(1000000)
print ""replace   :"",timeit.Timer('f(s)', 'from __main__ import s,test_repl as f').timeit(1000000)
</code></pre>

<p>This gives the following results:</p>

<pre><code>sets      : 19.8566138744
regex     : 6.86155414581
translate : 2.12455511093
replace   : 28.4436721802
</code></pre>
",Brian,Ashish Cherian,1225910171,1551820057,1551820057
http://stackoverflow.com/a/26702631/535646,Correct way to sign and verify signature using bouncycastle,64691,Oscar,Luke Girvin,1369112279,1505818188,1490109764,https://stackoverflow.com/questions/16662408/correct-way-to-sign-and-verify-signature-using-bouncycastle,"<p>Got it working for detached signature :D</p>

<pre><code>package signature;

import java.security.Provider;
import java.security.Security;
import java.security.cert.X509Certificate;
import java.util.Collection;
import java.util.Iterator;
import org.bouncycastle.cert.X509CertificateHolder;
import org.bouncycastle.cert.jcajce.JcaX509CertificateConverter;
import org.bouncycastle.cms.CMSProcessable;
import org.bouncycastle.cms.CMSProcessableByteArray;
import org.bouncycastle.cms.CMSSignedData;
import org.bouncycastle.cms.SignerInformation;
import org.bouncycastle.cms.SignerInformationStore;
import org.bouncycastle.cms.jcajce.JcaSimpleSignerInfoVerifierBuilder;
import org.bouncycastle.jce.provider.BouncyCastleProvider;
import org.bouncycastle.util.Store;
import org.bouncycastle.util.encoders.Base64;


public class VerifySignature {

    static final String DIGEST_SHA1 = ""SHA1withRSA"";
    static final String BC_PROVIDER = ""BC"";

    public static void main(String[] args) throws Exception {

        String envelopedData = ""MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIAwggLQMIIC"" + 
                               ""OQIEQ479uzANBgkqhkiG9w0BAQUFADCBrjEmMCQGCSqGSIb3DQEJARYXcm9zZXR0YW5ldEBtZW5k"" + 
                               ""ZWxzb24uZGUxCzAJBgNVBAYTAkRFMQ8wDQYDVQQIEwZCZXJsaW4xDzANBgNVBAcTBkJlcmxpbjEi"" +
                               ""MCAGA1UEChMZbWVuZGVsc29uLWUtY29tbWVyY2UgR21iSDEiMCAGA1UECxMZbWVuZGVsc29uLWUt"" + 
                               ""Y29tbWVyY2UgR21iSDENMAsGA1UEAxMEbWVuZDAeFw0wNTEyMDExMzQyMTlaFw0xOTA4MTAxMzQy"" + 
                               ""MTlaMIGuMSYwJAYJKoZIhvcNAQkBFhdyb3NldHRhbmV0QG1lbmRlbHNvbi5kZTELMAkGA1UEBhMC"" + 
                               ""REUxDzANBgNVBAgTBkJlcmxpbjEPMA0GA1UEBxMGQmVybGluMSIwIAYDVQQKExltZW5kZWxzb24t"" + 
                               ""ZS1jb21tZXJjZSBHbWJIMSIwIAYDVQQLExltZW5kZWxzb24tZS1jb21tZXJjZSBHbWJIMQ0wCwYD"" + 
                               ""VQQDEwRtZW5kMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC+X1g6JvbdwJI6mQMNT41GcycH"" + 
                               ""UbwCFWKJ4qHDaHffz3n4h+uQJJoQvc8yLTCfnl109GB0yL2Y5YQtTohOS9IwyyMWBhh77WJtCN8r"" + 
                               ""dOfD2DW17877te+NlpugRvg6eOH6np9Vn3RZODVxxTyyJ8pI8VMnn13YeyMMw7VVaEO5hQIDAQAB"" + 
                               ""MA0GCSqGSIb3DQEBBQUAA4GBALwOIc/rWMAANdEh/GgO/DSkVMwxM5UBr3TkYbLU/5jg0Lwj3Y++"" + 
                               ""KhumYSrxnYewSLqK+JXA4Os9NJ+b3eZRZnnYQ9eKeUZgdE/QP9XE04y8WL6ZHLB4sDnmsgVaTU+p"" + 
                               ""0lFyH0Te9NyPBG0J88109CXKdXCTSN5gq0S1CfYn0staAAAxggG9MIIBuQIBATCBtzCBrjEmMCQG"" + 
                               ""CSqGSIb3DQEJARYXcm9zZXR0YW5ldEBtZW5kZWxzb24uZGUxCzAJBgNVBAYTAkRFMQ8wDQYDVQQI"" + 
                               ""EwZCZXJsaW4xDzANBgNVBAcTBkJlcmxpbjEiMCAGA1UEChMZbWVuZGVsc29uLWUtY29tbWVyY2Ug"" + 
                               ""R21iSDEiMCAGA1UECxMZbWVuZGVsc29uLWUtY29tbWVyY2UgR21iSDENMAsGA1UEAxMEbWVuZAIE"" + 
                               ""Q479uzAJBgUrDgMCGgUAoF0wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUx"" + 
                               ""DxcNMTMwNTIxMDE1MDUzWjAjBgkqhkiG9w0BCQQxFgQU8mE6gw6iudxLUc9379lWK0lUSWcwDQYJ"" + 
                               ""KoZIhvcNAQEBBQAEgYB5mVhqJu1iX9nUqfqk7hTYJb1lR/hQiCaxruEuInkuVTglYuyzivZjAR54"" + 
                               ""zx7Cfm5lkcRyyxQ35ztqoq/V5JzBa+dYkisKcHGptJX3CbmmDIa1s65mEye4eLS4MTBvXCNCUTb9"" + 
                               ""STYSWvr4VPenN80mbpqSS6JpVxjM0gF3QTAhHwAAAAAAAA=="";
        String Sig_Bytes =""YduK22AlMLSXV3ajX5r/pX5OQ0xjj58uhGT9I9MvOrz912xNHo+9OiOKeMOD+Ys2/LUW3XaN6T+/""+
                ""tuRM5bi4RK7yjaqaJCZWtr/O4I968BQGgt0cyNvK8u0Jagbr9MYk6G7nnejbRXYHyAOaunqD05lW""+
                ""U/+g92i18dl0OMc50m4="";

        Provider provider = new BouncyCastleProvider();
        Security.addProvider(provider);
        CMSSignedData signedData = new CMSSignedData(Base64.decode(envelopedData.getBytes()));

        CMSProcessable cmsProcesableContent = new CMSProcessableByteArray(Base64.decode(Sig_Bytes.getBytes()));
        signedData = new CMSSignedData(cmsProcesableContent, Base64.decode(envelopedData.getBytes()));
        // Verify signature
        Store store = signedData.getCertificates(); 
        SignerInformationStore signers = signedData.getSignerInfos(); 
        Collection c = signers.getSigners(); 
        Iterator it = c.iterator();
        while (it.hasNext()) { 
            SignerInformation signer = (SignerInformation) it.next(); 
            Collection certCollection = store.getMatches(signer.getSID()); 
            Iterator certIt = certCollection.iterator();
            X509CertificateHolder certHolder = (X509CertificateHolder) certIt.next();
            X509Certificate certFromSignedData = new JcaX509CertificateConverter().setProvider(BC_PROVIDER).getCertificate(certHolder);
            if (signer.verify(new JcaSimpleSignerInfoVerifierBuilder().setProvider(BC_PROVIDER).build(certFromSignedData))) {
                System.out.println(""Signature verified"");
            } else {
                System.out.println(""Signature verification failed"");
            }
        }
    }



}
</code></pre>
",Cedric Simon,,1414951864,1414951864,0
http://stackoverflow.com/a/26749343/4247460,Change status bar color with AppCompat ActionBarActivity,124572,tyczj,,1414948073,1542205604,0,https://stackoverflow.com/questions/26702000/change-status-bar-color-with-appcompat-actionbaractivity,"<p>I'm not sure I understand the problem.</p>

<p>I you want to change the status bar color programmatically (and provided the device has Android 5.0) then you <strong>can</strong> use <a href=""https://developer.android.com/reference/android/view/Window.html#setStatusBarColor%28int%29""><code>Window.setStatusBarColor()</code></a>. It shouldn't make a difference whether the activity is derived from <code>Activity</code> or <code>ActionBarActivity</code>.</p>

<p>Just try doing:</p>

<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {
    Window window = getWindow();
    window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);
    window.setStatusBarColor(Color.BLUE);
}
</code></pre>

<p>Just tested this with <code>ActionBarActivity</code> and it works alright.</p>

<hr>

<p>Note: Setting the <code>FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS</code> flag programmatically is not necessary if your <code>values-v21</code> styles file has it set already, via:</p>

<pre><code>    &lt;item name=""android:windowDrawsSystemBarBackgrounds""&gt;true&lt;/item&gt;
</code></pre>
",matiash,matiash,1415158951,1427487570,1427487570
http://stackoverflow.com/a/26814964/115145,ListPopupWindow not obeying WRAP_CONTENT width spec,14216,Karakuri,Karakuri,1357578781,1550940511,1357581254,https://stackoverflow.com/questions/14200724/listpopupwindow-not-obeying-wrap-content-width-spec,"<p>You could measure the width of the adapter content:</p>

<pre><code>private int measureContentWidth(ListAdapter listAdapter) {
    ViewGroup mMeasureParent = null;
    int maxWidth = 0;
    View itemView = null;
    int itemType = 0;

    final ListAdapter adapter = listAdapter;
    final int widthMeasureSpec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
    final int heightMeasureSpec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
    final int count = adapter.getCount();
    for (int i = 0; i &lt; count; i++) {
        final int positionType = adapter.getItemViewType(i);
        if (positionType != itemType) {
            itemType = positionType;
            itemView = null;
        }

        if (mMeasureParent == null) {
            mMeasureParent = new FrameLayout(mContext);
        }

        itemView = adapter.getView(i, itemView, mMeasureParent);
        itemView.measure(widthMeasureSpec, heightMeasureSpec);

        final int itemWidth = itemView.getMeasuredWidth();

        if (itemWidth &gt; maxWidth) {
            maxWidth = itemWidth;
        }
    }

    return maxWidth;
}
</code></pre>

<p>and in your showPopup() function:</p>

<pre><code> ArrayAdapter arrayAdapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_list_item_1, STRINGS);
    popup.setAdapter(arrayAdapter);
    popup.setAnchorView(anchorView);
    popup.setContentWidth(measureContentWidth(arrayAdapter));
</code></pre>
",alerant,janzoner,1415432568,1423588487,1423588487
http://stackoverflow.com/a/2685827/157965,Cooler ASCII Spinners?,35535,Jason Kleban,wim,1271873442,1551837798,1360652507,https://stackoverflow.com/questions/2685435/cooler-ascii-spinners,"<p>Lots of choices with Unicode, including  and !</p>

<ul>
<li><p><code>       </code></p></li>
<li><p><code>             </code></p></li>
<li><p><code></code></p></li>
<li><p><code>   </code></p></li>
<li><p><code>       </code></p></li>
<li><p><code>   </code></p></li>
<li><p><code>   </code></p></li>
<li><p><code>   </code></p></li>
<li><p><code>   </code></p></li>
<li><p><code>  </code></p></li>
<li><p><code> </code> The entire braille block, even in random order <a href=""http://www.fileformat.info/info/unicode/block/braille_patterns/images.htm"" rel=""noreferrer"">http://www.fileformat.info/info/unicode/block/braille_patterns/images.htm</a></p></li>
</ul>
",Joe Koberg,Otto Allmendinger,1271876881,1419716193,1419716193
http://stackoverflow.com/a/2691891/204819,PUT vs. POST in REST,2132945,alex,Peter Mortensen,1236695120,1561539979,1500723546,https://stackoverflow.com/questions/630453/put-vs-post-in-rest,"<p>You can find assertions on the web that say</p>

<ul>
<li><a href=""http://java.sun.com/developer/technicalArticles/WebServices/restful/"" rel=""noreferrer""><strong>POST</strong> should be used to create a resource, and <strong>PUT</strong> should be used to modify one</a></li>
<li><a href=""http://awsmedia.s3.amazonaws.com/pdf/RESTandS3.pdf"" rel=""noreferrer""><strong>PUT</strong> should be used to create a resource, and <strong>POST</strong> should be used to modify one</a></li>
</ul>

<p>Neither is quite right. </p>

<hr>

<p>Better is to choose between PUT and POST based on <a href=""http://en.wikipedia.org/wiki/Idempotent"" rel=""noreferrer"">idempotence</a> of the action. </p>

<p><strong>PUT</strong> implies putting a resource - completely replacing whatever is available at the given URL with a different thing.  By definition, a PUT is idempotent.  Do it as many times as you like, and the result is the same. <code>x=5</code> is idempotent.  You can PUT a resource whether it previously exists, or not (eg, to Create, or to Update)! </p>

<p><strong>POST</strong> updates a resource, adds a subsidiary resource, or causes a change.  A POST is not idempotent, in the way that <code>x++</code> is not idempotent. </p>

<hr>

<p>By this argument, PUT is for creating when you know the URL of the thing you will create. POST can be used to create when you know the URL of the ""factory"" or manager for the category of things you want to create. </p>

<p>so: </p>

<pre><code>POST /expense-report
</code></pre>

<p>or:</p>

<pre><code>PUT  /expense-report/10929
</code></pre>
",Cheeso,the Tin Man,1271948154,1369202165,1369202165
http://stackoverflow.com/a/26930938/5334314,Trying to get the display size of an image in an ImageView,37515,Guillaume M&#233;nant,skaffman,1286195479,1529557532,1286196901,https://stackoverflow.com/questions/3855218/trying-to-get-the-display-size-of-an-image-in-an-imageview,"<p>I extended B T's answer to produce a static method from it, and to include image left and top positions into the ImageView :</p>

<pre><code>/**
 * Returns the bitmap position inside an imageView.
 * @param imageView source ImageView
 * @return 0: left, 1: top, 2: width, 3: height
 */
public static int[] getBitmapPositionInsideImageView(ImageView imageView) {
    int[] ret = new int[4];

    if (imageView == null || imageView.getDrawable() == null)
        return ret;

    // Get image dimensions
    // Get image matrix values and place them in an array
    float[] f = new float[9];
    imageView.getImageMatrix().getValues(f);

    // Extract the scale values using the constants (if aspect ratio maintained, scaleX == scaleY)
    final float scaleX = f[Matrix.MSCALE_X];
    final float scaleY = f[Matrix.MSCALE_Y];

    // Get the drawable (could also get the bitmap behind the drawable and getWidth/getHeight)
    final Drawable d = imageView.getDrawable();
    final int origW = d.getIntrinsicWidth();
    final int origH = d.getIntrinsicHeight();

    // Calculate the actual dimensions
    final int actW = Math.round(origW * scaleX);
    final int actH = Math.round(origH * scaleY);

    ret[2] = actW;
    ret[3] = actH;

    // Get image position
    // We assume that the image is centered into ImageView
    int imgViewW = imageView.getWidth();
    int imgViewH = imageView.getHeight();

    int top = (int) (imgViewH - actH)/2;
    int left = (int) (imgViewW - actW)/2;

    ret[0] = left;
    ret[1] = top;

    return ret;
}
</code></pre>
",chteuchteu,,1415971182,1415971182,0
http://stackoverflow.com/a/26936864/266378,How to implement is_enum_class type trait?,1335,Inkane,Toby Speight,1415990111,1475502034,1475502034,https://stackoverflow.com/questions/26936640/how-to-implement-is-enum-class-type-trait,"<p>Based on your <code>+T{}</code> test:</p>

<h3>Option #1:</h3>

<p>Expression SFINAE in trailing return type:</p>

<pre><code>#include &lt;type_traits&gt;

template &lt;typename T&gt;
auto test(int) -&gt; decltype((void)+T{}, std::false_type{});

template &lt;typename T&gt;
auto test(...) -&gt; std::true_type;

template &lt;typename T&gt;
using is_enum_class = std::integral_constant&lt;bool, decltype(test&lt;T&gt;(0))::value &amp;&amp; std::is_enum&lt;T&gt;::value&gt;;
</code></pre>

<p><a href=""http://coliru.stacked-crooked.com/a/babe8cc77dc18703"" rel=""noreferrer""><strong>DEMO</strong></a></p>

<h3>Option #2:</h3>

<p>In <em>void_t-fashion</em>:</p>

<pre><code>template &lt;typename T, typename V = void&gt;
struct test : std::false_type {};

template &lt;typename T&gt;
struct test&lt;T, decltype((void)+T{})&gt; : std::true_type {};

template &lt;typename T&gt;
using is_enum_class = std::integral_constant&lt;bool, !test&lt;T&gt;::value &amp;&amp; std::is_enum&lt;T&gt;::value&gt;;
</code></pre>

<p><a href=""http://coliru.stacked-crooked.com/a/6ea16b461467ac51"" rel=""noreferrer""><strong>DEMO 2</strong></a></p>

<p>Tests:</p>

<pre><code>enum class EC { a, b };
enum E { c, d };

int main()
{
    static_assert(is_enum_class&lt;EC&gt;::value, ""!"");
    static_assert(!is_enum_class&lt;E&gt;::value, ""!"");
    static_assert(!is_enum_class&lt;int&gt;::value, ""!"");
}
</code></pre>
",Piotr Skotnicki,Piotr Skotnicki,1415990902,1415992311,1415992311
http://stackoverflow.com/a/26949793/945838,SFINAE enable_if explicit constructor,846,Uroc327,Uroc327,1416076558,1416081842,1416079225,https://stackoverflow.com/questions/26949290/sfinae-enable-if-explicit-constructor,"<p>Use</p>

<pre><code>template &lt;class...&gt; struct null_v : std::integral_constant&lt;int, 0&gt; {};
</code></pre>

<p>and define the constructors as</p>

<pre><code>template &lt;typename T2,
          long = null_v&lt;enable_if_t&lt;SCheckEnable&lt;U&gt;::value, T2&gt;&gt;::value&gt;
constexpr CClass(T2 v) : val(v) {};

template &lt;typename T2,
          int = null_v&lt;disable_if_t&lt;SCheckEnable&lt;U&gt;::value, T2&gt;&gt;::value&gt;
explicit constexpr CClass(T2 v) : val(v) {};
</code></pre>

<p>Making the argument dependent and actually instantiated. 
<a href=""http://coliru.stacked-crooked.com/a/60aa171e1d2627ba"" rel=""nofollow""><strong>Demo</strong></a>.</p>

<p>[temp.deduct]/8:</p>

<blockquote>
  <p>If <strong>a substitution</strong> results in an invalid type or expression, type
  deduction fails. An invalid type or expression is one that would be
  ill-formed if written <strong>using the substituted arguments</strong>.</p>
</blockquote>

<p>In your case the error occurs outside of any substitution, so that's not causing a deduction failure but rather makes your code ill-formed.</p>
",Columbo,Columbo,1416079704,1416081842,1416081842
http://stackoverflow.com/a/2695466/1401686,"In Python, how do I decode GZIP encoding?",43925,TIMEX,,1271977811,1551140874,0,https://stackoverflow.com/questions/2695152/in-python-how-do-i-decode-gzip-encoding,"<p>Decompress your byte stream using the built-in gzip module.</p>

<p>If you have any problems, do show the exact minimal code that you used, the exact error message and traceback, together with the result of <code>print repr(your_byte_stream[:100])</code></p>

<p><strong>Further information</strong></p>

<p><strong>1.</strong> For an explanation of the gzip/zlib/deflate confusion, read the ""Other uses"" section of <a href=""http://en.wikipedia.org/wiki/Gzip"" rel=""noreferrer"">this Wikipedia article</a>.</p>

<p><strong>2.</strong> It can be easier to use the zlib module than the gzip module if you have a string rather than a file. Unfortunately the <a href=""http://docs.python.org/library/zlib.html#zlib.decompress"" rel=""noreferrer"">Python docs</a> are incomplete/wrong:</p>

<p>""""""
zlib.decompress(string[, wbits[, bufsize]])
...
The absolute value of wbits is the base two logarithm of the size of the history buffer (the window size) used when compressing data. Its absolute value should be between 8 and 15 for the most recent versions of the zlib library, larger values resulting in better compression at the expense of greater memory usage. The default value is 15. When wbits is negative, the standard gzip header is suppressed; this is an undocumented feature of the zlib library, used for compatibility with unzips compression file format.
""""""</p>

<p>Firstly, 8 &lt;= log2_window_size &lt;= 15, with the meaning given above. Then what should be a separate arg is kludged on top:</p>

<p>arg == log2_window_size means assume string is in zlib format (RFC 1950; what the HTTP 1.1 RFC 2616 confusingly calls ""deflate"").</p>

<p>arg == -log2_window_size means assume string is in deflate format (RFC 1951; what people who didn't read the HTTP 1.1 RFC carefully actually implemented)</p>

<p>arg == 16 + log_2_window_size means assume string is in gzip format (RFC 1952). So you can use 31.</p>

<p>The above information is documented in the <a href=""http://www.zlib.net/manual.html"" rel=""noreferrer"">zlib C library manual</a> ... Ctrl-F search for <code>windowBits</code>.</p>
",John Machin,John Machin,1271983124,1271992486,1271992486
http://stackoverflow.com/a/27023733/145346,Sorting time hh:mm:ss with tablesorter plugin,573,user4199101,user4199101,1416414131,1416420274,1416415551,https://stackoverflow.com/questions/27021789/sorting-time-hhmmss-with-tablesorter-plugin,"<p>There is already a built-in time parser for tablesorter, but it looks for an ""AM"" or ""PM"".</p>

<p>But it looks like you need to sort using timer times (<code>hh:mm:ss</code>, or whatever it's called).</p>

<p>The following parser code looks a bit convoluted, but it should cover circumstances where a column only contains seconds (<code>ss</code>), or minutes &amp; seconds (<code>mm:ss</code>).</p>

<p>The <code>maxDigits</code> setting is needed because the parser is basically adding leading zeros on to the value to keep the values consistent, so <code>10:30:40</code> becomes <code>010030040</code> (when <code>maxDigits</code> is set to <code>3</code>).</p>

<p>Anyway, <a href=""http://jsfiddle.net/abkNM/4630/"" rel=""nofollow"">here is a demo</a>:</p>

<pre><code>$(function () {

    // change maxDigits to 4, if values go &gt; 999
    // or to 5 for values &gt; 9999, etc.
    var maxDigits = 3;

    $.tablesorter.addParser({
        id: ""times"",
        is: function (s) {
            return false;
        },
        format: function (s) {
            // prefix contains leading zeros that are tacked
            var prefix = new Array(maxDigits + 1).join('0'),
                // split time into blocks
                blocks = s.split(/\s*:\s*/),
                len = blocks.length,
                result = [];
            // add values in reverse, so if there is only one block
            // (e.g. ""10""), then it would be the time in seconds
            while (len) {
                result.push((prefix + (blocks[--len] || 0)).slice(-maxDigits));
            }
            // reverse the results and join them
            return result.length ? result.reverse().join('') : s;
        },
        type: ""text""
    });

    $('table').tablesorter({
        theme: 'blue',
        headers: {
            3: {
                sorter: 'times'
            }
        }
    });
});
</code></pre>

<p>I'm not sure if this matters to you, but there is also a ""duration"" parser available that allows adding labels after the times (e.g. <code>10y 30d 6h 10m</code>) - see <a href=""http://mottie.github.io/tablesorter/docs/example-parsers-duration.html"" rel=""nofollow"">this demo</a></p>
",Mottie,Mottie,1416419959,1416420274,1416420274
http://stackoverflow.com/a/270338/800016,Can I use a function for a default value in MySql?,56786,mmattax,,1226006160,1554968249,0,https://stackoverflow.com/questions/270309/can-i-use-a-function-for-a-default-value-in-mysql,"<p>No, you can't.</p>

<p>However, you could easily create a trigger to do this, such as:</p>

<pre>
CREATE TRIGGER before_insert_app_users
  BEFORE INSERT ON app_users 
  FOR EACH ROW
  SET new.api_key = uuid();
</pre>
",Harrison Fisk,,1226006662,1226006662,0
http://stackoverflow.com/a/2704866/81121,What would a &quot;frozen dict&quot; be?,67230,dugres,wim,1272093590,1560876082,1470751141,https://stackoverflow.com/questions/2703599/what-would-a-frozen-dict-be,"<p>Python doesn't have a builtin frozendict type. It turns out this wouldn't be useful too often (though it would still probably be useful more often than <code>frozenset</code> is).</p>

<p>The most common reason to want such a type is when memoizing function calls for functions with unknown arguments. The most common solution to store a hashable equivalent of a dict (where the values are hashable) is something like <code>tuple(sorted(kwargs.iteritems()))</code>. </p>

<p>This depends on the sorting not being a bit insane. Python cannot positively promise sorting will result in something reasonable here. (But it can't promise much else, so don't sweat it too much.)</p>

<hr>

<p>You could easily enough make some sort of wrapper that works much like a dict. It might look something like</p>

<pre><code>import collections

class FrozenDict(collections.Mapping):
    """"""Don't forget the docstrings!!""""""

    def __init__(self, *args, **kwargs):
        self._d = dict(*args, **kwargs)
        self._hash = None

    def __iter__(self):
        return iter(self._d)

    def __len__(self):
        return len(self._d)

    def __getitem__(self, key):
        return self._d[key]

    def __hash__(self):
        # It would have been simpler and maybe more obvious to 
        # use hash(tuple(sorted(self._d.iteritems()))) from this discussion
        # so far, but this solution is O(n). I don't know what kind of 
        # n we are going to run into, but sometimes it's hard to resist the 
        # urge to optimize when it will gain improved algorithmic performance.
        if self._hash is None:
            self._hash = 0
            for pair in self.iteritems():
                self._hash ^= hash(pair)
        return self._hash
</code></pre>

<p>It should work great:</p>

<pre><code>&gt;&gt;&gt; x = FrozenDict(a=1, b=2)
&gt;&gt;&gt; y = FrozenDict(a=1, b=2)
&gt;&gt;&gt; x is y
False
&gt;&gt;&gt; x == y
True
&gt;&gt;&gt; x == {'a': 1, 'b': 2}
True
&gt;&gt;&gt; d = {x: 'foo'}
&gt;&gt;&gt; d[y]
'foo'
</code></pre>
",Mike Graham,Mike Graham,1272120737,1352661889,1352661889
http://stackoverflow.com/a/27049418/148668,Mesh Simplification: Edge Collapse Conditions,6065,jaykumarark,,1416516126,1501783235,0,https://stackoverflow.com/questions/27049163/mesh-simplification-edge-collapse-conditions,"<p>There are two main conditions for an edge collapse:</p>

<h2>Connectivity</h2>

<p>On each side of the collapsed edge, only one pair of edges must be merged. This can be checked by counting the joint neighbour vertices of the two merging vertices (there must be exactly two).
Consider the following example where the red edge is being collapsed:</p>

<p><img src=""https://i.stack.imgur.com/2h56a.png"" alt=""Invalid Edge collapse""></p>

<p>The triangle between the orange and cyan edge is not manifold anymore.</p>

<h2>Geometry</h2>

<p>Triangles must not flip during the edge collapse. This can be checked by calculating the angle between the triangle normal before the flip and after the flip for triangles that are kept.</p>

<p>Here is an example where the normal of the green triangle is flipped during the collapse:</p>

<p><a href=""https://i.stack.imgur.com/iQeto.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/iQeto.png"" alt=""Normal Flip""></a></p>
",Nico Schertler,Nico Schertler,1416516983,1441607857,1441607857
http://stackoverflow.com/a/27078401/815507,Simple throttle in js,36481,Mia,Brian Burns,1416665346,1562514193,1531938680,https://stackoverflow.com/questions/27078285/simple-throttle-in-js,"<p>I would use the <a href=""https://github.com/jashkenas/underscore/blob/master/underscore.js"" rel=""noreferrer"" title=""underscore.js"">underscore.js</a> or <a href=""https://lodash.com"" rel=""noreferrer"">lodash</a> source code to find a well tested version of this function.</p>

<p>Here is the slightly modified version of the underscore code to remove all references to underscore.js himself:</p>

<pre><code>// Returns a function, that, when invoked, will only be triggered at most once
// during a given window of time. Normally, the throttled function will run
// as much as it can, without ever going more than once per `wait` duration;
// but if you'd like to disable the execution on the leading edge, pass
// `{leading: false}`. To disable execution on the trailing edge, ditto.
function throttle(func, wait, options) {
  var context, args, result;
  var timeout = null;
  var previous = 0;
  if (!options) options = {};
  var later = function() {
    previous = options.leading === false ? 0 : Date.now();
    timeout = null;
    result = func.apply(context, args);
    if (!timeout) context = args = null;
  };
  return function() {
    var now = Date.now();
    if (!previous &amp;&amp; options.leading === false) previous = now;
    var remaining = wait - (now - previous);
    context = this;
    args = arguments;
    if (remaining &lt;= 0 || remaining &gt; wait) {
      if (timeout) {
        clearTimeout(timeout);
        timeout = null;
      }
      previous = now;
      result = func.apply(context, args);
      if (!timeout) context = args = null;
    } else if (!timeout &amp;&amp; options.trailing !== false) {
      timeout = setTimeout(later, remaining);
    }
    return result;
  };
};
</code></pre>

<p>Please note that this code can be simplified if you don't need all the options that underscore support.</p>

<p>Edit 1: Removed another reference to underscore, thx to Zettam's comment</p>

<p>Edit 2: Added suggestion about lodash and possible code simplification, thx to lolzery wowzery's comment</p>
",Clment Prvost,Clment Prvost,1416666085,1523178863,1523178863
http://stackoverflow.com/a/27088560/4184258,Linear index upper triangular matrix,8075,Robert T. McGibbon,normanius,1416723375,1532915666,1532915666,https://stackoverflow.com/questions/27086195/linear-index-upper-triangular-matrix,"<p>The equations going from linear index to <code>(i,j)</code> index are</p>

<pre><code>i = n - 2 - floor(sqrt(-8*k + 4*n*(n-1)-7)/2.0 - 0.5)
j = k + i + 1 - n*(n-1)/2 + (n-i)*((n-i)-1)/2
</code></pre>

<p>The inverse operation, from <code>(i,j)</code> index to linear index is</p>

<pre><code>k = (n*(n-1)/2) - (n-i)*((n-i)-1)/2 + j - i - 1
</code></pre>

<p>Verify in Python with:</p>

<pre><code>from numpy import triu_indices, sqrt
n = 10
for k in range(n*(n-1)/2):
    i = n - 2 - int(sqrt(-8*k + 4*n*(n-1)-7)/2.0 - 0.5)
    j = k + i + 1 - n*(n-1)/2 + (n-i)*((n-i)-1)/2
    assert np.triu_indices(n, k=1)[0][k] == i
    assert np.triu_indices(n, k=1)[1][k] == j

for i in range(n):
    for j in range(i+1, n):
        k = (n*(n-1)/2) - (n-i)*((n-i)-1)/2 + j - i - 1
        assert triu_indices(n, k=1)[0][k] == i
        assert triu_indices(n, k=1)[1][k] == j
</code></pre>
",Robert T. McGibbon,shadowtalker,1416743077,1467766211,1467766211
http://stackoverflow.com/a/27145655/1709587,How to get the WordNet synset given an offset ID?,8569,user1039457,Mark Amery,1320918650,1515664353,1486649326,https://stackoverflow.com/questions/8077641/how-to-get-the-wordnet-synset-given-an-offset-id,"<p>As of NLTK 3.2.3, there's a public method for doing this:</p>

<pre><code>wordnet.synset_from_pos_and_offset(pos, offset)
</code></pre>

<p>In earlier versions you can use:</p>

<pre><code>wordnet._synset_from_pos_and_offset(pos, offset)
</code></pre>

<p>This returns a synset based on it's POS and offest ID. I think this method is only available in NLTK 3.0 but I'm not sure.</p>

<p>Example:</p>

<pre><code>from nltk.corpus import wordnet as wn
wn._synset_from_pos_and_offset('n',4543158)
&gt;&gt; Synset('wagon.n.01')
</code></pre>
",donners45,Mark Amery,1416994624,1515342412,1515342412
http://stackoverflow.com/a/271650/1106908,MySQL offset infinite rows,53665,stillinbeta,informatik01,1225512538,1536763948,1536763948,https://stackoverflow.com/questions/255517/mysql-offset-infinite-rows,"<p>From the <a href=""http://dev.mysql.com/doc/refman/5.0/en/select.html#id4651990"" rel=""noreferrer"">MySQL Manual on LIMIT</a>:</p>

<blockquote>
  <p>To retrieve all rows from a certain
  offset up to the end of the result
  set, you can use some large number for
  the second parameter. This statement
  retrieves all rows from the 96th row
  to the last:</p>
</blockquote>

<pre><code>SELECT * FROM tbl LIMIT 95, 18446744073709551615;
</code></pre>
",Greg,Michael Berkowski,1226051510,1363822347,1363822347
http://stackoverflow.com/a/27165165/500098,RGB values of the colors in the Ansi extended colors index (17-255),6929,Jim Knecht,Antti Haapala,1417037860,1552103363,1424623198,https://stackoverflow.com/questions/27159322/rgb-values-of-the-colors-in-the-ansi-extended-colors-index-17-255,"<h2>The 256 color table and its partitioning</h2>

<p>The color range of a 256 color terminal consists of 4 parts, often 5, in which case you actually get 258 colors:</p>

<ol>
<li><p>Color numbers 0 to 7 are the default terminal colors, the actual RGB value of which is not standardized and can often be configured.</p></li>
<li><p>Color numbers 8 to 15 are the ""bright"" colors. Most of the time these are a lighter shade of the color with index - 8. They are also not standardized and can often be configured. Depending on terminal and shell, they are often used instead of or in conjunction with bold font faces.</p></li>
<li><p>Color numbers 16 to 231 are RGB colors. These 216 colors are defined by 6 values on each of the three RGB axes. That is, instead of values 0 - 255, each color only ranges from 0 - 5. </p>

<p>The color number is then calculated like this:</p>

<pre class=""lang-py prettyprint-override""><code>number = 16 + 36 * r + 6 * g + b
</code></pre>

<p>with <code>r</code>, <code>g</code> and <code>b</code> in the range 0 - 5.</p></li>
<li><p>The color numbers 232 to 255 are grayscale with 24 shades of gray from dark to light.</p></li>
<li><p>The default colors for foreground and background. In many terminals they can be configured independently from the 256 indexed colors, giving an additional two configurable colors . You get them when not setting any other color or disabling other colors (i.e. <code>print '\e[m'</code>).</p></li>
</ol>

<p>Some sources: </p>

<ul>
<li><p><code>urxvt</code> manpage:</p>

<blockquote>
  <p>In addition to the default foreground and background colours, urxvt can display up to 88/256 colours: 8 ANSI colours plus high-intensity (potentially bold/blink) versions of the same, and 72 (or 240 in 256 colour mode) colours arranged in an 4x4x4 (or 6x6x6) colour RGB cube plus a 8 (24) colour greyscale ramp.</p>
</blockquote></li>
<li><p><code>xterm</code> manpage:</p>

<blockquote>
  <p>These specify the colors for the 256-color extension.  The default resource values are for colors 16 through 231 to make a 6x6x6 color cube, and colors 232 through 255 to make a grayscale ramp.</p>
</blockquote></li>
<li><p><a href=""https://en.wikipedia.org/wiki/ANSI_escape_code"" rel=""noreferrer"">Wikipedia article on ANSI escape codes</a> (which in turn itself is lacking a citation on the topic)</p></li>
</ul>

<hr>

<h2>Default RGB values</h2>

<p>Theoretically, in order to get an equally distributed range of colors, the RGB values for the colors in the range 16 - 231 could be calculated like this:</p>

<pre><code># example in Python: // is integer divison, % is modulo
rgb_R = ((number - 16) // 36) * 51
rgb_G = (((number - 16) % 36) // 6) * 51
rgb_B = ((number - 16) % 6) * 51
</code></pre>

<p><strong>But</strong> it seems that the actual method is different:</p>

<p>Any terminal emulators I tested seems to follow XTerm and map the values <code>[0, 1, 2, 3, 4, 5]</code> for red, green and blue to the values <code>[0, 95, 135, 175, 215, 255]</code> on the RGB color axes. (I tested with XTerm (297) URxvt (v9.19), ROXTerm (2.8.1), gnome-terminal (3.6.2) and xfce4-terminal (0.6.3))</p>

<p>The RGB values for a given index can be calculated with this algorithm:</p>

<pre><code># example in Python: 'a = b if c else d' is 'a = (c) ? b : d` in C, Perl, etc.
index_R = ((number - 16) // 36)
rgb_R = 55 + index_R * 40 if index_R &gt; 0 else 0
index_G = (((number - 16) % 36) // 6)
rgb_G = 55 + index_G * 40 if index_G &gt; 0 else 0
index_B = ((number - 16) % 6)
rgb_B = 55 + index_B * 40 if index_B &gt; 0 else 0
</code></pre>

<p>The grayscale seems to follow this simple formula:</p>

<pre><code>rgb_R = rgb_G = rgb_B = (number - 232) * 10 + 8
</code></pre>

<p><code>256colres.pl</code> in the root of the <a href=""ftp://invisible-island.net/xterm/xterm-313.tgz"" rel=""noreferrer"">XTerm sources (version 313)</a> uses a similar algorithm to generate <code>256colres.h</code>, which contains the color definitions for 256 color mode:</p>

<pre class=""lang-perl prettyprint-override""><code>$line1=""COLOR_RES(\""%d\"","";
$line2=""\tscreen.Acolors[%d],"";
$line3=""\tDFT_COLOR(\""rgb:%2.2x/%2.2x/%2.2x\"")),\n"";

# colors 16-231 are a 6x6x6 color cube
for ($red = 0; $red &lt; 6; $red++) {
    for ($green = 0; $green &lt; 6; $green++) {
    for ($blue = 0; $blue &lt; 6; $blue++) {
        $code = 16 + ($red * 36) + ($green * 6) + $blue;
        printf($line1, $code);
        printf($line2, $code);
        printf($line3,
           ($red ? ($red * 40 + 55) : 0),
           ($green ? ($green * 40 + 55) : 0),
           ($blue ? ($blue * 40 + 55) : 0));
    }
    }
}

# colors 232-255 are a grayscale ramp, intentionally leaving out
# black and white
$code=232;
for ($gray = 0; $gray &lt; 24; $gray++) {
    $level = ($gray * 10) + 8;
    $code = 232 + $gray;
    printf($line1, $code);
    printf($line2, $code);
    printf($line3,
       $level, $level, $level);
}
</code></pre>

<hr>

<h2>Showing available colors in a terminal</h2>

<p>Here is a zsh function that prints all colors on a 256 color terminal (if <code>TERM</code> is set to a 256 color value):</p>

<pre class=""lang-sh prettyprint-override""><code>function termcolors () 
{
    print TERM
    print -P ""Foreground: &gt;&lt;""
    print -P ""Background: &gt;%S%s&lt;\n""

    print ""      0 1 2 3 4 5 6 7"" 
    for b (0 1)
    do
        printf ""%d %2d "" $b $(( 8 * b ))
        for r (0 1 2 3 4 5 6 7)
        do
            c=$(( 8 * b + r ))
            print -nP ""%K{$c}  %k""
        done
        printf "" %2d\n"" $(( 8 * b + 7 ))
    done

    print

    print RGB
    for r (0 1 2 3 4 5)
    do 
        print ""$r $(( 16 + 36 * r )) - $(( 16 + 36 * r + 35 ))\n       0 1 2 3 4 5""
        for g (0 1 2 3 4 5)
        do
            printf ""%d %3d "" $g $(( 16 + 36 * r + 6 * g ))
            for b (0 1 2 3 4 5)
            do
                c=$(( 16 + 36 * r + 6 * g + b ))
                print -nP ""%K{$c}  %k""
            done
            printf "" %3d\n"" $(( 16 + 36 * r + 6 * g + 5))
        done
        print
    done

    print

    print GRAY
    for g in $(seq 0 23)
    do
        c=$(( 232 + g ))
        printf ""%2d %3d "" $g $c
        print -P ""%K{$c}  %k""
    done
}
</code></pre>

<hr>

<h2>Changing RGB values during runtime</h2>

<p>In some terminals (at least <code>xterm</code>, <code>gnome-terminal</code>, <code>termite</code> and <code>urxvt</code>) all those colors can be changed during runtime by sending one of the following <a href=""http://invisible-island.net/xterm/ctlseqs/ctlseqs.html"" rel=""noreferrer""><em>XTerm Control Sequences</em></a>:</p>

<pre><code>OSC 4; c ; spec BEL
OSC 4; c ; spec ST
</code></pre>

<p>where:</p>

<ul>
<li><code>OSC</code> is the escape character (<code>\e</code> or <code>\033</code>) followed by <code>]</code></li>
<li><code>c</code> is the color number (0 - 255) </li>
<li><code>spec</code> is a color specification (e.g. <code>red</code>, <code>#ff0000</code>, <code>rgb:ff/00/00</code>, <code>rgbi:1/0/0</code> - what actually works might depend on the terminal)</li>
<li><code>BEL</code> is the bell character (<code>\a</code> or <code>\007</code>)</li>
<li><code>ST</code> is the string terminator <code>\e\\</code> or <code>\033\\</code></li>
</ul>

<p>These control sequences can be sent by simply printing them with <code>echo</code>:</p>

<pre><code>echo -en ""\e]4;COLOR;SPEC\a""
echo -en ""\e]4;COLOR;SPEC\a""
</code></pre>

<p>For example, in order to set color number 5 (usually some shade of magenta) to red, either of these should work:</p>

<pre><code>echo -en ""\e]4;5;red\a""
echo -en ""\e]4;5;#ff0000\e\\""
echo -en ""\033]4;5;rgb:ff/00/00\007""
</code></pre>

<p>Those colors can be reset to their (configured) default with one of the control sequences</p>

<pre><code>OSC 104 ; c BEL
OSC 104 ; c ST
</code></pre>

<p>So the following loop will reset all colors from 0 to 255 to their configured or default value:</p>

<pre><code>for c in {0..255}; do
  echo -en ""\e]104;$c\a""
done
</code></pre>

<p>For the default foreground and background colors the control sequences are <code>OSC 10 ; spec BEL</code> and <code>OSC 11 ; spec BEL</code>, respectively. For example:</p>

<pre><code>echo -en ""\e]10;red\a""
echo -en ""\e]11;green\a""
</code></pre>

<p>Those can be reset with <code>OSC 110 BEL</code> and <code>OSC 111 BEL</code> respectively:</p>

<pre><code>echo -en ""\e]110\a""
echo -en ""\e]111\a""
</code></pre>
",Adaephon,Josh,1417072949,1500110527,1500110527
http://stackoverflow.com/a/27191354/854540,How can I concatenate regex literals in JavaScript?,69539,eyelidlessness,informatik01,1223512992,1523442892,1428329887,https://stackoverflow.com/questions/185510/how-can-i-concatenate-regex-literals-in-javascript,"<p><strong>Problem</strong> If the regexp contains back-matching groups like \1.</p>

<pre><code>var r = /(a|b)\1/  // Matches aa, bb but nothing else.
var p = /(c|d)\1/   // Matches cc, dd but nothing else.
</code></pre>

<p>Then just contatenating the sources will not work. Indeed, the combination of the two is:</p>

<pre><code>var rp = /(a|b)\1(c|d)\1/
rp.test(""aadd"") // Returns false
</code></pre>

<p><strong>The solution:</strong>
    First we count the number of matching groups in the first regex, Then for each back-matching token in the second, we increment it by the number of matching groups.</p>

<pre><code>function concatenate(r1, r2) {
  var count = function(r, str) {
    return str.match(r).length;
  }
  var numberGroups = /([^\\]|^)(?=\((?!\?:))/g; // Home-made regexp to count groups.
  var offset = count(numberGroups, r1.source);    
  var escapedMatch = /[\\](?:(\d+)|.)/g;        // Home-made regexp for escaped literals, greedy on numbers.
  var r2newSource = r2.source.replace(escapedMatch, function(match, number) { return number?""\\""+(number-0+offset):match; });
  return new RegExp(r1.source+r2newSource,
      (r1.global ? 'g' : '') 
      + (r1.ignoreCase ? 'i' : '')
      + (r1.multiline ? 'm' : ''));
}
</code></pre>

<p>Test:</p>

<pre><code>var rp = concatenate(r, p) // returns  /(a|b)\1(c|d)\2/
rp.test(""aadd"") // Returns true
</code></pre>
",Mikal Mayer,,1417186913,1417186913,0
http://stackoverflow.com/a/27239869/2331953,java.lang.ClassNotFoundException: android.os.AsyncTask caused by AdMob / Google Play Services?,4877,S&#233;bastien,Community,1417099835,1422915330,1495535251,https://stackoverflow.com/questions/27173375/java-lang-classnotfoundexception-android-os-asynctask-caused-by-admob-google,"<p>OK, looks like it is a problem with one of the versions of Google play Services.
See <a href=""https://code.google.com/p/android/issues/detail?id=81083"">https://code.google.com/p/android/issues/detail?id=81083</a></p>

<p>Looks like a work around might be to add the following to your <code>Application#onCreate()</code>:</p>

<pre><code>package acme.com.myAppName;

import android.app.Application;

public class MyApplication extends Application
{
    @Override
    public void onCreate()
    {
        // begin add
        try {
            Class.forName(""android.os.AsyncTask"");
        } catch(Throwable ignore) {
        }
        // end add

        super.onCreate();
    }
}
</code></pre>

<p>NB don't forget to configure your Application class in your <code>AndroidManifest.xml</code> (if you haven't already).</p>

<pre><code>&lt;application
    android:icon=""@drawable/ic_launcher""
    android:label=""@string/app_name""
    android:theme=""@style/AppTheme""
    android:name=""acme.com.myAppName.MyApplication"" &gt;
...
&lt;/application&gt;
</code></pre>
",William,William,1417479989,1422839509,1422839509
http://stackoverflow.com/a/2726348/570168,Custom filtering in Android using ArrayAdapter,71406,Alxandr,,1272332159,1401261013,0,https://stackoverflow.com/questions/2718202/custom-filtering-in-android-using-arrayadapter,"<p>This fixed my problem. I'm not certain it's the best solution, but it works. My project's open-source, so feel free to use any of the code here should it prove usefull :-).</p>

<pre><code>package me.alxandr.android.mymir.adapters;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Set;

import me.alxandr.android.mymir.R;
import me.alxandr.android.mymir.model.Manga;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.SectionIndexer;
import android.widget.TextView;

public class MangaListAdapter extends ArrayAdapter&lt;Manga&gt; implements SectionIndexer
{
    public ArrayList&lt;Manga&gt; items;
    public ArrayList&lt;Manga&gt; filtered;
    private Context context;
    private HashMap&lt;String, Integer&gt; alphaIndexer;
    private String[] sections = new String[0];
    private Filter filter;
    private boolean enableSections;

    public Manga getByPosition(int position)
    {
        return items.get(position);
    }

    public MangaListAdapter(Context context, int textViewResourceId, ArrayList&lt;Manga&gt; items, boolean enableSections)
    {
        super(context, textViewResourceId, items);
        this.filtered = items;
        this.items = ArrayList&lt;Manga&gt; items.clone();
        this.context = context;
        this.filter = new MangaNameFilter();
        this.enableSections = enableSections;

        if(enableSections)
        {
            alphaIndexer = new HashMap&lt;String, Integer&gt;();
            for(int i = items.size() - 1; i &gt;= 0; i--)
            {
                Manga element = items.get(i);
                String firstChar = element.getName().substring(0, 1).toUpperCase();
                if(firstChar.charAt(0) &gt; 'Z' || firstChar.charAt(0) &lt; 'A')
                    firstChar = ""@"";

                alphaIndexer.put(firstChar, i);
            }

            Set&lt;String&gt; keys = alphaIndexer.keySet();
            Iterator&lt;String&gt; it = keys.iterator();
            ArrayList&lt;String&gt; keyList = new ArrayList&lt;String&gt;();
            while(it.hasNext())
                keyList.add(it.next());

            Collections.sort(keyList);
            sections = new String[keyList.size()];
            keyList.toArray(sections);
        }
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View v = convertView;
        if(v == null)
        {
            LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.mangarow, null);
        }

        Manga o = filtered.get(position);
        if(o != null)
        {
            TextView tt = (TextView) v.findViewById(R.id.MangaRow_MangaName);
            TextView bt = (TextView) v.findViewById(R.id.MangaRow_MangaExtra);
            if(tt != null)
                tt.setText(o.getName());
            if(bt != null)
                bt.setText(o.getLastUpdated() + "" - "" + o.getLatestChapter());

            if(enableSections &amp;&amp; getSectionForPosition(position) != getSectionForPosition(position + 1))
            {
                TextView h = (TextView) v.findViewById(R.id.MangaRow_Header);
                h.setText(sections[getSectionForPosition(position)]);
                h.setVisibility(View.VISIBLE);
            }
            else
            {
                TextView h = (TextView) v.findViewById(R.id.MangaRow_Header);
                h.setVisibility(View.GONE);
            }
        }

        return v;
    }

    @Override
    public void notifyDataSetInvalidated()
    {
        if(enableSections)
        {
            for (int i = items.size() - 1; i &gt;= 0; i--)
            {
                Manga element = items.get(i);
                String firstChar = element.getName().substring(0, 1).toUpperCase();
                if(firstChar.charAt(0) &gt; 'Z' || firstChar.charAt(0) &lt; 'A')
                    firstChar = ""@"";
                alphaIndexer.put(firstChar, i);
            }

            Set&lt;String&gt; keys = alphaIndexer.keySet();
            Iterator&lt;String&gt; it = keys.iterator();
            ArrayList&lt;String&gt; keyList = new ArrayList&lt;String&gt;();
            while (it.hasNext())
            {
                keyList.add(it.next());
            }

            Collections.sort(keyList);
            sections = new String[keyList.size()];
            keyList.toArray(sections);

            super.notifyDataSetInvalidated();
        }
    }

    public int getPositionForSection(int section)
    {
        if(!enableSections) return 0;
        String letter = sections[section];

        return alphaIndexer.get(letter);
    }

    public int getSectionForPosition(int position)
    {
        if(!enableSections) return 0;
        int prevIndex = 0;
        for(int i = 0; i &lt; sections.length; i++)
        {
            if(getPositionForSection(i) &gt; position &amp;&amp; prevIndex &lt;= position)
            {
                prevIndex = i;
                break;
            }
            prevIndex = i;
        }
        return prevIndex;
    }

    public Object[] getSections()
    {
        return sections;
    }

    @Override
    public Filter getFilter()
    {
        if(filter == null)
            filter = new MangaNameFilter();
        return filter;
    }

    private class MangaNameFilter extends Filter
    {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            // NOTE: this function is *always* called from a background thread, and
            // not the UI thread.
            constraint = constraint.toString().toLowerCase();
            FilterResults result = new FilterResults();
            if(constraint != null &amp;&amp; constraint.toString().length() &gt; 0)
            {
                ArrayList&lt;Manga&gt; filt = new ArrayList&lt;Manga&gt;();
                ArrayList&lt;Manga&gt; lItems = new ArrayList&lt;Manga&gt;();
                synchronized (this)
                {
                    lItems.addAll(items);
                }
                for(int i = 0, l = lItems.size(); i &lt; l; i++)
                {
                    Manga m = lItems.get(i);
                    if(m.getName().toLowerCase().contains(constraint))
                        filt.add(m);
                }
                result.count = filt.size();
                result.values = filt;
            }
            else
            {
                synchronized(this)
                {
                    result.values = items;
                    result.count = items.size();
                }
            }
            return result;
        }

        @SuppressWarnings(""unchecked"")
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            // NOTE: this function is *always* called from the UI thread.
            filtered = (ArrayList&lt;Manga&gt;)results.values;
            notifyDataSetChanged();
            clear();
            for(int i = 0, l = filtered.size(); i &lt; l; i++)
                add(filtered.get(i));
            notifyDataSetInvalidated();
        }

    }
}
</code></pre>
",Alxandr,tim.paetz,1272419513,1334281842,1334281842
http://stackoverflow.com/a/27307004/3569421,How to change color / appearance of EditText select handle / anchor?,11907,jimpic,Jonik,1362049661,1552493301,1479134560,https://stackoverflow.com/questions/15133926/how-to-change-color-appearance-of-edittext-select-handle-anchor,"<p>How to do it from code:</p>

<pre><code>try {
    final Field fEditor = TextView.class.getDeclaredField(""mEditor"");
    fEditor.setAccessible(true);
    final Object editor = fEditor.get(editText);

    final Field fSelectHandleLeft = editor.getClass().getDeclaredField(""mSelectHandleLeft"");
    final Field fSelectHandleRight =
        editor.getClass().getDeclaredField(""mSelectHandleRight"");
    final Field fSelectHandleCenter =
        editor.getClass().getDeclaredField(""mSelectHandleCenter"");

    fSelectHandleLeft.setAccessible(true);
    fSelectHandleRight.setAccessible(true);
    fSelectHandleCenter.setAccessible(true);

    final Resources res = context.getResources();

    fSelectHandleLeft.set(editor, res.getDrawable(R.drawable.text_select_handle_left));
    fSelectHandleRight.set(editor, res.getDrawable(R.drawable.text_select_handle_right));
    fSelectHandleCenter.set(editor, res.getDrawable(R.drawable.text_select_handle_middle));
} catch (final Exception ignored) {
}
</code></pre>
",Jared Rummler,Vadim Kotov,1417740802,1552493301,1552493301
http://stackoverflow.com/a/27338013/499240,Is there a &quot;theirs&quot; version of &quot;git merge -s ours&quot;?,401865,elmarco,,1223291803,1559164672,1406258297,https://stackoverflow.com/questions/173919/is-there-a-theirs-version-of-git-merge-s-ours,"<p>It is not entirely clear what your desired outcome is, so there is some confusion about the ""correct"" way of doing it in the answers and their comments. I try to give an overview and see the following three options:</p>

<p><strong>Try merge and use B for conflicts</strong></p>

<p>This is <em>not</em> the ""theirs version for <code>git merge -s ours</code>"" but the ""theirs version for <code>git merge -X ours</code>"" (which is short for <code>git merge -s recursive -X ours</code>):</p>



<pre class=""lang-bash prettyprint-override""><code>git checkout branchA
# also uses -s recursive implicitly
git merge -X theirs branchB
</code></pre>

<p>This is what e.g. <a href=""https://stackoverflow.com/a/3364506/1347968"">Alan W. Smith's answer</a> does.</p>

<p><strong>Use content from B only</strong></p>

<p>This creates a merge commit for both branches but discards all changes from <code>branchA</code> and only keeps the contents from <code>branchB</code>.</p>

<pre class=""lang-bash prettyprint-override""><code># Get the content you want to keep.
# If you want to keep branchB at the current commit, you can add --detached,
# else it will be advanced to the merge commit in the next step.
git checkout branchB

# Do the merge an keep current (our) content from branchB we just checked out.
git merge -s ours branchA

# Set branchA to current commit and check it out.
git checkout -B branchA
</code></pre>

<p>Note that the merge commits first parent now is that from <code>branchB</code> and only the second is from <code>branchA</code>. This is what e.g. <a href=""https://stackoverflow.com/a/18682314/1347968"">Gandalf458's answer</a> does.</p>

<p><strong>Use content from B only and keep correct parent order</strong></p>

<p>This is the real ""theirs version for <code>git merge -s ours</code>"". It has the same content as in the option before (i.e. only that from <code>branchB</code>) but the order of parents is correct, i.e. the first parent comes from <code>branchA</code> and the second from <code>branchB</code>.</p>

<pre class=""lang-bash prettyprint-override""><code>git checkout branchA

# Do a merge commit. The content of this commit does not matter,
# so use a strategy that never fails.
# Note: This advances branchA.
git merge -s ours branchB

# Change working tree and index to desired content.
# --detach ensures branchB will not move when doing the reset in the next step.
git checkout --detach branchB

# Move HEAD to branchA without changing contents of working tree and index.
git reset --soft branchA

# 'attach' HEAD to branchA.
# This ensures branchA will move when doing 'commit --amend'.
git checkout branchA

# Change content of merge commit to current index (i.e. content of branchB).
git commit --amend -C HEAD
</code></pre>

<p>This is what <a href=""https://stackoverflow.com/a/4969679/1347968"">Paul Pladijs's answer</a> does (without requiring a temporary branch).</p>
",siegi,Community,1417910661,1452071084,1495539206
http://stackoverflow.com/a/27410865/1221742,&quot;Average&quot; of multiple quaternions?,21032,jonathan,,1347380869,1549385275,0,https://stackoverflow.com/questions/12374087/average-of-multiple-quaternions,"<p>Contrary to popular belief in the computer graphics industry, there is a straightforward algorithm to solve this problem which is robust, accurate, and simple that comes from the aerospace industry.  It runs in time linear in the number of quaternions being averaged plus a (largish) constant factor.</p>

<p>Let Q = [a_1*q_1 a_2*q_2 ... a_n*q_n]</p>

<p>Where a_i are the weight of the ith quaternion, and q_i are the ith quaternion being averaged, as a column vector.  Q is therefore a 4xN matrix.</p>

<p>The normalized eigenvector corresponding to the largest eigenvalue of Q*Q^T is the weighted average.  Since Q*Q^T is self-adjoint and at least positive semi-definite, fast and robust methods of solving that eigenproblem are available.  Computing the matrix-matrix product is the only step that grows with the number of elements being averaged.</p>

<p>See this <a href=""http://www.acsu.buffalo.edu/~johnc/ave_quat07.pdf"">technical note in the Journal of Guidance, Control, and Dynamics from 2007</a>, which is a summary paper of this and other methods.  In the modern era, the method I quoted above makes a good tradeoff for implementation reliability and robustness, and was already published in textbooks in 1978!</p>
",Jonathan,,1418245886,1418245886,0
http://stackoverflow.com/a/2742234/14302,How to format a function pointer?,17848,Longpoke,Jon Seigel,1272588542,1511221184,1272905933,https://stackoverflow.com/questions/2741683/how-to-format-a-function-pointer,"<p>There's the use of unions that can get around the warning/error, but the result is still (most likely) undefined behavior:</p>

<pre><code>#include &lt;stdio.h&gt;

int
main (void)
{
  union
  {
    int (*funcptr) (void);
    void *objptr;
  } u;
  u.funcptr = main;

  printf (""%p\n"", u.objptr);

  return 0;
}
</code></pre>

<p>You can compare two function pointers (e.g. <code>printf (""%i\n"", (main == funcptr));</code>) using an if statement to test whether they're equal or not (I know that completely defeats the purpose and could very well be irrelevant), but as far as actually outputting the address of the function pointer, what happens is up to the vendor of your target platform's C library and your compiler.</p>
",Dustin,,1272600423,1272600423,0
http://stackoverflow.com/a/27436614/1079728,&#39;Randomly&#39; construct symmetric/positive definite pair of matrices with specific generalized eigenvector?,260,Robert T. McGibbon,,1418276845,1418359250,0,https://stackoverflow.com/questions/27416193/randomly-construct-symmetric-positive-definite-pair-of-matrices-with-specific,"<p>Given symmetric A and symmetric, positive definite B, the <a href=""http://en.wikipedia.org/wiki/Eigendecomposition_of_a_matrix#Generalized_eigenvalue_problem"" rel=""nofollow"">generalized
eigenvalue problem</a> is to find nonsingular P and diagonal D such that</p>

<pre><code>A P = B P D
</code></pre>

<p>The diagonal of D holds the generalized eigenvalues, and the columns of P
are the corresponding generalized eigenvectors.</p>

<p>For such a solution, P and B satisfy the B-orthogonality condition</p>

<pre><code>P.T B P = I
</code></pre>

<p>The ""reverse"" problem can be stated as: given nonsingular P and diagonal D,
find symmetric A and symmetric, positive definite B such that</p>

<pre><code>A P = B P D
</code></pre>

<p>This can be solved with a little algebra.
Multiply on the left by P.T, and use B-orthogonality:</p>

<pre><code>P.T A P = D
</code></pre>

<p>so</p>

<pre><code>A = inv(P.T) D inv(P)
</code></pre>

<p>To get B, solve the B-orthogonality condition</p>

<pre><code>B = inv(P.T) inv(P)
  = inv(P P.T)
</code></pre>

<p>Those are the formulas for A and B given P and D.</p>
",Warren Weckesser,Warren Weckesser,1418356782,1418359250,1418359250
http://stackoverflow.com/a/2745496/931625,How to make scipy.interpolate give an extrapolated result beyond the input range?,72638,Salim Fadhley,ryggyr,1272638816,1491482076,1354169575,https://stackoverflow.com/questions/2745329/how-to-make-scipy-interpolate-give-an-extrapolated-result-beyond-the-input-range,"<h3>1. Constant extrapolation</h3>

<p>You can use <code>interp</code> function from scipy, it extrapolates left and right values as constant beyond the range:</p>

<pre><code>&gt;&gt;&gt; from scipy import interp, arange, exp
&gt;&gt;&gt; x = arange(0,10)
&gt;&gt;&gt; y = exp(-x/3.0)
&gt;&gt;&gt; interp([9,10], x, y)
array([ 0.04978707,  0.04978707])
</code></pre>

<h3>2. Linear (or other custom) extrapolation</h3>

<p>You can write a wrapper around an interpolation function which takes care of linear extrapolation. For example:</p>

<pre><code>from scipy.interpolate import interp1d
from scipy import arange, array, exp

def extrap1d(interpolator):
    xs = interpolator.x
    ys = interpolator.y

    def pointwise(x):
        if x &lt; xs[0]:
            return ys[0]+(x-xs[0])*(ys[1]-ys[0])/(xs[1]-xs[0])
        elif x &gt; xs[-1]:
            return ys[-1]+(x-xs[-1])*(ys[-1]-ys[-2])/(xs[-1]-xs[-2])
        else:
            return interpolator(x)

    def ufunclike(xs):
        return array(map(pointwise, array(xs)))

    return ufunclike
</code></pre>

<p><code>extrap1d</code> takes an interpolation function and returns a function which can also extrapolate. And you can use it like this:</p>

<pre><code>x = arange(0,10)
y = exp(-x/3.0)
f_i = interp1d(x, y)
f_x = extrap1d(f_i)

print f_x([9,10])
</code></pre>

<p>Output:</p>

<pre><code>[ 0.04978707  0.03009069]
</code></pre>
",sastanin,sastanin,1272640073,1272641821,1272641821
http://stackoverflow.com/a/27455363/937715,No ActionBar in PreferenceActivity after upgrade to Support Library v21,38922,rekire,Community,1413986127,1546540249,1495541448,https://stackoverflow.com/questions/26509180/no-actionbar-in-preferenceactivity-after-upgrade-to-support-library-v21,"<p>Please find the GitHub Repo: <strong><a href=""https://github.com/davcpas1234/MaterialSettings"" rel=""noreferrer"">Here</a></strong></p>

<hr>

<p>Very Similar to your own code but added xml to allow for set title:</p>

<p>Continuing to use <code>PreferenceActivity</code>:</p>

<p><code>settings_toolbar.xml :</code> </p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;android.support.v7.widget.Toolbar
    xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    android:id=""@+id/toolbar""
    app:theme=""@style/ThemeOverlay.AppCompat.Dark.ActionBar""
    android:layout_width=""match_parent""
    android:layout_height=""wrap_content""
    android:minHeight=""?attr/actionBarSize""
    app:navigationContentDescription=""@string/abc_action_bar_up_description""
    android:background=""?attr/colorPrimary""
    app:navigationIcon=""?attr/homeAsUpIndicator""
    app:title=""@string/action_settings""
    /&gt;
</code></pre>

<p><code>SettingsActivity.java :</code></p>

<pre><code>public class SettingsActivity extends PreferenceActivity {

    @Override
    protected void onPostCreate(Bundle savedInstanceState) {
        super.onPostCreate(savedInstanceState);

        LinearLayout root = (LinearLayout)findViewById(android.R.id.list).getParent().getParent().getParent();
        Toolbar bar = (Toolbar) LayoutInflater.from(this).inflate(R.layout.settings_toolbar, root, false);
        root.addView(bar, 0); // insert at top
        bar.setNavigationOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        });
    }

}
</code></pre>

<p><code>Result :</code></p>

<p><img src=""https://i.stack.imgur.com/xYYco.png"" alt=""example""></p>

<hr>

<h1><strong>UPDATE (Gingerbread Compatibility) :</strong></h1>

<p>As pointed out <a href=""https://stackoverflow.com/questions/26564400/creating-a-preference-screen-with-support-v21-toolbar/27455330?noredirect=1#comment43790647_27455330"">here</a>, Gingerbread Devices are returning NullPointerException on this line:</p>

<pre><code>LinearLayout root = (LinearLayout)findViewById(android.R.id.list).getParent().getParent().getParent();
</code></pre>

<h2>FIX:</h2>

<p><code>SettingsActivity.java :</code></p>

<pre><code>public class SettingsActivity extends PreferenceActivity {

    @Override
    protected void onPostCreate(Bundle savedInstanceState) {
        super.onPostCreate(savedInstanceState);
        Toolbar bar;

        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {
            LinearLayout root = (LinearLayout) findViewById(android.R.id.list).getParent().getParent().getParent();
            bar = (Toolbar) LayoutInflater.from(this).inflate(R.layout.settings_toolbar, root, false);
            root.addView(bar, 0); // insert at top
        } else {
            ViewGroup root = (ViewGroup) findViewById(android.R.id.content);
            ListView content = (ListView) root.getChildAt(0);

            root.removeAllViews();

            bar = (Toolbar) LayoutInflater.from(this).inflate(R.layout.settings_toolbar, root, false);


            int height;
            TypedValue tv = new TypedValue();
            if (getTheme().resolveAttribute(R.attr.actionBarSize, tv, true)) {
                height = TypedValue.complexToDimensionPixelSize(tv.data, getResources().getDisplayMetrics());
            }else{
                height = bar.getHeight();
            }

            content.setPadding(0, height, 0, 0);

            root.addView(content);
            root.addView(bar);
        }

        bar.setNavigationOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        });
    }
}
</code></pre>

<p>Any issues with the above let me know!</p>

<hr>

<p><strong>UPDATE 2: TINTING WORKAROUND</strong></p>

<p>As pointed out in many dev notes <code>PreferenceActivity</code> does not support tinting of elements, however by utilising a few internal classes you CAN achieve this. That is until these classes are removed. (Works using appCompat support-v7 v21.0.3).</p>

<p>Add the following imports:</p>

<pre><code>import android.support.v7.internal.widget.TintCheckBox;
import android.support.v7.internal.widget.TintCheckedTextView;
import android.support.v7.internal.widget.TintEditText;
import android.support.v7.internal.widget.TintRadioButton;
import android.support.v7.internal.widget.TintSpinner;
</code></pre>

<p>Then override the <code>onCreateView</code> method:</p>

<pre><code>@Override
public View onCreateView(String name, Context context, AttributeSet attrs) {
    // Allow super to try and create a view first
    final View result = super.onCreateView(name, context, attrs);
    if (result != null) {
        return result;
    }

    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) {
        // If we're running pre-L, we need to 'inject' our tint aware Views in place of the
        // standard framework versions
        switch (name) {
            case ""EditText"":
                return new TintEditText(this, attrs);
            case ""Spinner"":
                return new TintSpinner(this, attrs);
            case ""CheckBox"":
                return new TintCheckBox(this, attrs);
            case ""RadioButton"":
                return new TintRadioButton(this, attrs);
            case ""CheckedTextView"":
                return new TintCheckedTextView(this, attrs);
        }
    }

    return null;
}
</code></pre>

<p><code>Result:</code></p>

<p><img src=""https://i.stack.imgur.com/PUzqh.png"" alt=""example 2""></p>

<hr>

<h2><em>AppCompat 22.1</em></h2>

<p>AppCompat 22.1 introduced new tinted elements, meaning that there is no longer a need to utilise the internal classes to achieve the same effect as the last update. Instead follow this (still overriding <code>onCreateView</code>):</p>

<pre><code>@Override
public View onCreateView(String name, Context context, AttributeSet attrs) {
    // Allow super to try and create a view first
    final View result = super.onCreateView(name, context, attrs);
    if (result != null) {
        return result;
    }

    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {
        // If we're running pre-L, we need to 'inject' our tint aware Views in place of the
        // standard framework versions
        switch (name) {
            case ""EditText"":
                return new AppCompatEditText(this, attrs);
            case ""Spinner"":
                return new AppCompatSpinner(this, attrs);
            case ""CheckBox"":
                return new AppCompatCheckBox(this, attrs);
            case ""RadioButton"":
                return new AppCompatRadioButton(this, attrs);
            case ""CheckedTextView"":
                return new AppCompatCheckedTextView(this, attrs);
        }
    }

    return null;
}
</code></pre>

<hr>

<p><strong>NESTED PREFERENCE SCREENS</strong></p>

<p>A lot of people are experiencing issues with including the Toolbar in nested <code>&lt;PreferenceScreen /&gt;</code>s however, I have found a solution!! - After a lot of trial and error!</p>

<p>Add the following to your <code>SettingsActivity</code>:</p>

<pre><code>@SuppressWarnings(""deprecation"")
@Override
public boolean onPreferenceTreeClick(PreferenceScreen preferenceScreen, Preference preference) {
    super.onPreferenceTreeClick(preferenceScreen, preference);

    // If the user has clicked on a preference screen, set up the screen
    if (preference instanceof PreferenceScreen) {
        setUpNestedScreen((PreferenceScreen) preference);
    }

    return false;
}

public void setUpNestedScreen(PreferenceScreen preferenceScreen) {
    final Dialog dialog = preferenceScreen.getDialog();

    Toolbar bar;

    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        LinearLayout root = (LinearLayout) dialog.findViewById(android.R.id.list).getParent();
        bar = (Toolbar) LayoutInflater.from(this).inflate(R.layout.settings_toolbar, root, false);
        root.addView(bar, 0); // insert at top
    } else {
        ViewGroup root = (ViewGroup) dialog.findViewById(android.R.id.content);
        ListView content = (ListView) root.getChildAt(0);

        root.removeAllViews();

        bar = (Toolbar) LayoutInflater.from(this).inflate(R.layout.settings_toolbar, root, false);

        int height;
        TypedValue tv = new TypedValue();
        if (getTheme().resolveAttribute(R.attr.actionBarSize, tv, true)) {
            height = TypedValue.complexToDimensionPixelSize(tv.data, getResources().getDisplayMetrics());
        }else{
            height = bar.getHeight();
        }

        content.setPadding(0, height, 0, 0);

        root.addView(content);
        root.addView(bar);
    }

    bar.setTitle(preferenceScreen.getTitle());

    bar.setNavigationOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            dialog.dismiss();
        }
    });
}
</code></pre>

<p>The reason that <code>PreferenceScreen</code>'s are such a pain is because they are based as a wrapper dialog, so we need to capture the dialog layout to add the toolbar to it.</p>

<hr>

<h2>Toolbar Shadow</h2>

<p>By design importing the <code>Toolbar</code> does not allow for elevation and shadowing in pre-v21 devices, so if you would like to have elevation on your <code>Toolbar</code> you need to wrap it in a <code>AppBarLayout</code>:</p>

<p>`settings_toolbar.xml :</p>

<pre><code>&lt;android.support.design.widget.AppBarLayout
    xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""wrap_content""&gt;

   &lt;android.support.v7.widget.Toolbar
       .../&gt;

&lt;/android.support.design.widget.AppBarLayout&gt;
</code></pre>

<p>Not forgetting to add the add the Design Support library as a dependency in <code>build.gradle</code> file:</p>

<pre><code>compile 'com.android.support:support-v4:22.2.0'
compile 'com.android.support:appcompat-v7:22.2.0'
compile 'com.android.support:design:22.2.0'
</code></pre>

<hr>

<h2>Android 6.0</h2>

<p>I have investigated the reported overlapping issue and I cannot reproduce the issue.</p>

<p>The full code in use as above produces the following:</p>

<p><a href=""https://i.stack.imgur.com/mggWc.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/mggWc.jpg"" alt=""enter image description here""></a></p>

<p>If I am missing something please let me know via <a href=""https://github.com/davcpas1234/MaterialSettings"" rel=""noreferrer"">this repo</a> and I will investigate.</p>
",David Passmore,Community,1418442572,1481302011,1495535495
http://stackoverflow.com/a/27457689/172068,How do I get an object&#39;s unqualified (short) class name?,80724,Greg.Forbes,Dan Lugg,1384158503,1554839868,1394946674,https://stackoverflow.com/questions/19901850/how-do-i-get-an-objects-unqualified-short-class-name,"<p>I added substr to the test of <a href=""https://stackoverflow.com/a/25472778/2386943"">https://stackoverflow.com/a/25472778/2386943</a>
and that's the fastet way I could test (CentOS PHP 5.3.3, Ubuntu PHP 5.5.9) both with an i5.</p>

<pre><code>$classNameWithNamespace=get_class($this);
return substr($classNameWithNamespace, strrpos($classNameWithNamespace, '\\')+1);
</code></pre>

<p><strong>Results</strong></p>

<pre><code>Reflection: 0.068084406852722 s ClassA
Basename: 0.12301609516144 s ClassA
Explode: 0.14073524475098 s ClassA
Substring: 0.059865570068359 s ClassA 
</code></pre>

<p><strong>Code</strong></p>

<pre><code>namespace foo\bar\baz;
class ClassA{
  public function getClassExplode(){
    $c = array_pop(explode('\\', get_class($this)));
    return $c;
  }

  public function getClassReflection(){
    $c = (new \ReflectionClass($this))-&gt;getShortName();
    return $c;
  }

  public function getClassBasename(){
    $c = basename(str_replace('\\', '/', get_class($this)));
    return $c;
  }

  public function getClassSubstring(){
    $classNameWithNamespace = get_class($this);
    return substr($classNameWithNamespace, strrpos($classNameWithNamespace, '\\')+1);
  }
}

$a = new ClassA();
$num = 100000;

$rounds = 10;
$res = array(
    ""Reflection"" =&gt; array(),
    ""Basename"" =&gt; array(),
    ""Explode"" =&gt; array(),
    ""Substring"" =&gt; array()
);

for($r = 0; $r &lt; $rounds; $r++){

  $start = microtime(true);
  for($i = 0; $i &lt; $num; $i++){
    $a-&gt;getClassReflection();
  }
  $end = microtime(true);
  $res[""Reflection""][] = ($end-$start);

  $start = microtime(true);
  for($i = 0; $i &lt; $num; $i++){
    $a-&gt;getClassBasename();
  }
  $end = microtime(true);
  $res[""Basename""][] = ($end-$start);

  $start = microtime(true);
  for($i = 0; $i &lt; $num; $i++){
    $a-&gt;getClassExplode();
  }
  $end = microtime(true);
  $res[""Explode""][] = ($end-$start);

  $start = microtime(true);
  for($i = 0; $i &lt; $num; $i++){
    $a-&gt;getClassSubstring();
  }
  $end = microtime(true);
  $res[""Substring""][] = ($end-$start);
}

echo ""Reflection: "".array_sum($res[""Reflection""])/count($res[""Reflection""])."" s "".$a-&gt;getClassReflection().""\n"";
echo ""Basename: "".array_sum($res[""Basename""])/count($res[""Basename""])."" s "".$a-&gt;getClassBasename().""\n"";
echo ""Explode: "".array_sum($res[""Explode""])/count($res[""Explode""])."" s "".$a-&gt;getClassExplode().""\n"";
echo ""Substring: "".array_sum($res[""Substring""])/count($res[""Substring""])."" s "".$a-&gt;getClassSubstring().""\n"";
</code></pre>

<p><strong>==UPDATE==</strong></p>

<p>As mentioned in the comments by @MrBandersnatch there is even a faster way to do this:</p>

<pre><code>return substr(strrchr(get_class($this), '\\'), 1);
</code></pre>

<p>Here are the updated test results with ""SubstringStrChr"" (saves up to about 0.001 s):</p>

<pre><code>Reflection: 0.073065280914307 s ClassA
Basename: 0.12585079669952 s ClassA
Explode: 0.14593172073364 s ClassA
Substring: 0.060415267944336 s ClassA
SubstringStrChr: 0.059880912303925 s ClassA
</code></pre>
",MaBi,Community,1418465447,1447364379,1495540978
http://stackoverflow.com/a/27461352/1254730,How to draw a directed arrow line in Java?,57183,Yatendra Goel,Machavity,1262955003,1550599425,1534270541,https://stackoverflow.com/questions/2027613/how-to-draw-a-directed-arrow-line-in-java,"<p>This is my approach, absolute Math only:</p>

<pre><code>/**
 * Draw an arrow line between two points.
 * @param g the graphics component.
 * @param x1 x-position of first point.
 * @param y1 y-position of first point.
 * @param x2 x-position of second point.
 * @param y2 y-position of second point.
 * @param d  the width of the arrow.
 * @param h  the height of the arrow.
 */
private void drawArrowLine(Graphics g, int x1, int y1, int x2, int y2, int d, int h) {
    int dx = x2 - x1, dy = y2 - y1;
    double D = Math.sqrt(dx*dx + dy*dy);
    double xm = D - d, xn = xm, ym = h, yn = -h, x;
    double sin = dy / D, cos = dx / D;

    x = xm*cos - ym*sin + x1;
    ym = xm*sin + ym*cos + y1;
    xm = x;

    x = xn*cos - yn*sin + x1;
    yn = xn*sin + yn*cos + y1;
    xn = x;

    int[] xpoints = {x2, (int) xm, (int) xn};
    int[] ypoints = {y2, (int) ym, (int) yn};

    g.drawLine(x1, y1, x2, y2);
    g.fillPolygon(xpoints, ypoints, 3);
}
</code></pre>
",phibao37,ecerulm,1418489975,1508750402,1508750402
http://stackoverflow.com/a/2752754/1440403,Finding whether a point lies inside a rectangle or not,106556,avd,Peter O.,1272784095,1545446992,1484341215,https://stackoverflow.com/questions/2752725/finding-whether-a-point-lies-inside-a-rectangle-or-not,"<pre><code># Pseudo code
# Corners in ax,ay,bx,by,dx,dy
# Point in x, y

bax = bx - ax
bay = by - ay
dax = dx - ax
day = dy - ay

if ((x - ax) * bax + (y - ay) * bay &lt; 0.0) return false
if ((x - bx) * bax + (y - by) * bay &gt; 0.0) return false
if ((x - ax) * dax + (y - ay) * day &lt; 0.0) return false
if ((x - dx) * dax + (y - dy) * day &gt; 0.0) return false

return true
</code></pre>
",Jonas Elfstrm,Jonas Elfstrm,1272784877,1386705311,1386705311
http://stackoverflow.com/a/27528612/1243487,Draw equidistant points on a spiral,11955,Giulio Pierucci,Giulio Pierucci,1355594304,1508937063,1355644828,https://stackoverflow.com/questions/13894715/draw-equidistant-points-on-a-spiral,"<p>Contributing a Python generator (OP did not request any specific language). It uses a similar circle approximation as Pete Kirkham's answer. </p>

<p><code>arc</code> is the required point distance along the path, <code>separation</code> is the required separation of the spiral arms.</p>

<pre class=""lang-py prettyprint-override""><code>def spiral_points(arc=1, separation=1):
    """"""generate points on an Archimedes' spiral
    with `arc` giving the length of arc between two points
    and `separation` giving the distance between consecutive 
    turnings
    - approximate arc length with circle arc at given distance
    - use a spiral equation r = b * phi
    """"""
    def p2c(r, phi):
        """"""polar to cartesian
        """"""
        return (r * math.cos(phi), r * math.sin(phi))

    # yield a point at origin
    yield (0, 0)

    # initialize the next point in the required distance
    r = arc
    b = separation / (2 * math.pi)
    # find the first phi to satisfy distance of `arc` to the second point
    phi = float(r) / b
    while True:
        yield p2c(r, phi)
        # advance the variables
        # calculate phi that will give desired arc length at current radius
        # (approximating with circle)
        phi += float(arc) / r
        r = b * phi
</code></pre>
",liborm,,1418828881,1418828881,0
http://stackoverflow.com/a/2753343/579925,How do I calculate percentiles with python/numpy?,218977,Uri,kmario23,1267647673,1556403636,1556403636,https://stackoverflow.com/questions/2374640/how-do-i-calculate-percentiles-with-python-numpy,"<p>By the way, there is <a href=""http://code.activestate.com/recipes/511478-finding-the-percentile-of-the-values/"" rel=""noreferrer"">a pure-Python implementation of percentile function</a>, in case one doesn't want to depend on scipy.  The function is copied below:</p>

<pre><code>## {{{ http://code.activestate.com/recipes/511478/ (r1)
import math
import functools

def percentile(N, percent, key=lambda x:x):
    """"""
    Find the percentile of a list of values.

    @parameter N - is a list of values. Note N MUST BE already sorted.
    @parameter percent - a float value from 0.0 to 1.0.
    @parameter key - optional key function to compute value from each element of N.

    @return - the percentile of the values
    """"""
    if not N:
        return None
    k = (len(N)-1) * percent
    f = math.floor(k)
    c = math.ceil(k)
    if f == c:
        return key(N[int(k)])
    d0 = key(N[int(f)]) * (c-k)
    d1 = key(N[int(c)]) * (k-f)
    return d0+d1

# median is 50th percentile.
median = functools.partial(percentile, percent=0.5)
## end of http://code.activestate.com/recipes/511478/ }}}
</code></pre>
",Boris Gorelik,Boris Gorelik,1272800780,1316068676,1316068676
http://stackoverflow.com/a/27540921/1000543,Android show softkeyboard with showSoftInput is not working?,40228,mobibob,mobibob,1301702381,1559684657,1301789703,https://stackoverflow.com/questions/5520085/android-show-softkeyboard-with-showsoftinput-is-not-working,"<p>When the activity launches It seems that the keyboard is initially displayed but hidden by something else, because the following works (but is actually a dirty work-around):</p>

<p><strong>First Method</strong></p>

<pre><code>InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
editText.postDelayed(new Runnable()
{
    @Override
    public void run()
    {
        editText.requestFocus();
        imm.showSoftInput(editText, 0);
    }
}, 100);
</code></pre>

<p><strong>Second method</strong></p>

<p>in onCreate to launch it on activity create</p>

<pre><code>new Handler().postDelayed(new Runnable() {
    @Override
    public void run() 
    {
    //  InputMethodManager inputMethodManager=(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    //    inputMethodManager.toggleSoftInputFromWindow(EnterYourViewHere.getApplicationWindowToken(), InputMethodManager.SHOW_FORCED, 0);

        if (inputMethodManager != null)
        {
            inputMethodManager.toggleSoftInput(InputMethodManager.SHOW_FORCED,0);
        } 
    }
}, 200);
</code></pre>

<p><strong>Third Method</strong>
ADD given code to activity tag in Manifest. It will show keyboard on launch, and set the first focus to your desire view.</p>

<pre><code>android:windowSoftInputMode=""stateVisible""
</code></pre>
",Xar E Ahmer,Matthew Pape,1418886268,1420763431,1420763431
http://stackoverflow.com/a/27588263/1866775,"Variadic template class, getting index of a specific type from its argument list",1285,Stringer,,1419154391,1445606625,0,https://stackoverflow.com/questions/27588194/variadic-template-class-getting-index-of-a-specific-type-from-its-argument-list,"<p>You may use something like:</p>

<pre><code>template &lt;typename T, typename... Ts&gt; struct get_index;

template &lt;typename T, typename... Ts&gt;
struct get_index&lt;T, T, Ts...&gt; : std::integral_constant&lt;std::size_t, 0&gt; {};

template &lt;typename T, typename Tail, typename... Ts&gt;
struct get_index&lt;T, Tail, Ts...&gt; :
    std::integral_constant&lt;std::size_t, 1 + get_index&lt;T, Ts...&gt;::value&gt; {};

#if 1 // explicit error case, but you already have error without that. 
template &lt;typename T&gt;
struct get_index&lt;T&gt;
{
    // condition is always false, but should be dependant of T
    static_assert(sizeof(T) == 0, ""element not found"");
};
#endif
</code></pre>

<p><a href=""http://ideone.com/Zn0eQf"" rel=""nofollow"">Live example</a></p>

<p>Note: You don't specify what happens for duplicate matching type (So I take the first one),
nor if the type is not matched (so I did a compile time error)</p>

<p><a href=""https://ideone.com/gwSaaH"" rel=""nofollow"">Live Demo with duplicates</a></p>
",Jarod42,Jarod42,1419155156,1445606625,1445606625
http://stackoverflow.com/a/27596917/3984761,How to check if a datetime object is localized with pytz?,25262,chiborg,,1303897379,1562759493,0,https://stackoverflow.com/questions/5802108/how-to-check-if-a-datetime-object-is-localized-with-pytz,"<blockquote>
  <p>How do I determine if localization is needed?</p>
</blockquote>

<p>From <a href=""https://docs.python.org/3/library/datetime.html#available-types"" rel=""nofollow noreferrer""><code>datetime</code> docs</a>:</p>

<ul>
<li><p>a datetime object <code>d</code> is aware iff:</p>

<pre><code>d.tzinfo is not None and d.tzinfo.utcoffset(d) is not None
</code></pre></li>
<li><p><code>d</code> is naive iff:</p>

<pre><code>d.tzinfo is None or d.tzinfo.utcoffset(d) is None
</code></pre></li>
</ul>

<p>Though if <code>d</code> is a datetime object representing time in UTC timezone then you could use in both cases:</p>

<pre><code>self.date = d.replace(tzinfo=pytz.utc)
</code></pre>

<p>It works regardless <code>d</code> is timezone-aware or naive.</p>

<p>Note: <a href=""https://stackoverflow.com/a/27592919/4279"">don't use <code>datetime.replace()</code> method with a timezone with a non-fixed utc offset</a> (it is ok to use it with UTC timezone but otherwise you should use <code>tz.localize()</code> method).</p>
",jfs,Jrme,1419225298,1562759493,1562759493
http://stackoverflow.com/a/2768256/2506748,How can I prevent the backspace key from navigating back?,194769,erikkallen,John Weisz,1254262132,1538922947,1470860820,https://stackoverflow.com/questions/1495219/how-can-i-prevent-the-backspace-key-from-navigating-back,"<p>This code solves the problem, at least in IE and Firefox (haven't tested any other, but I give it a reasonable chance of working if the problem even exists in other browsers).</p>

<pre><code>// Prevent the backspace key from navigating back.
$(document).unbind('keydown').bind('keydown', function (event) {
    if (event.keyCode === 8) {
        var doPrevent = true;
        var types = [""text"", ""password"", ""file"", ""search"", ""email"", ""number"", ""date"", ""color"", ""datetime"", ""datetime-local"", ""month"", ""range"", ""search"", ""tel"", ""time"", ""url"", ""week""];
        var d = $(event.srcElement || event.target);
        var disabled = d.prop(""readonly"") || d.prop(""disabled"");
        if (!disabled) {
            if (d[0].isContentEditable) {
                doPrevent = false;
            } else if (d.is(""input"")) {
                var type = d.attr(""type"");
                if (type) {
                    type = type.toLowerCase();
                }
                if (types.indexOf(type) &gt; -1) {
                    doPrevent = false;
                }
            } else if (d.is(""textarea"")) {
                doPrevent = false;
            }
        }
        if (doPrevent) {
            event.preventDefault();
            return false;
        }
    }
});
</code></pre>
",erikkallen,Jorge Fuentes Gonzlez,1273000308,1475827271,1475827271
http://stackoverflow.com/a/2768256/676195,How can I prevent the backspace key from navigating back?,194769,erikkallen,John Weisz,1254262132,1538922947,1470860820,https://stackoverflow.com/questions/1495219/how-can-i-prevent-the-backspace-key-from-navigating-back,"<p>This code solves the problem, at least in IE and Firefox (haven't tested any other, but I give it a reasonable chance of working if the problem even exists in other browsers).</p>

<pre><code>// Prevent the backspace key from navigating back.
$(document).unbind('keydown').bind('keydown', function (event) {
    if (event.keyCode === 8) {
        var doPrevent = true;
        var types = [""text"", ""password"", ""file"", ""search"", ""email"", ""number"", ""date"", ""color"", ""datetime"", ""datetime-local"", ""month"", ""range"", ""search"", ""tel"", ""time"", ""url"", ""week""];
        var d = $(event.srcElement || event.target);
        var disabled = d.prop(""readonly"") || d.prop(""disabled"");
        if (!disabled) {
            if (d[0].isContentEditable) {
                doPrevent = false;
            } else if (d.is(""input"")) {
                var type = d.attr(""type"");
                if (type) {
                    type = type.toLowerCase();
                }
                if (types.indexOf(type) &gt; -1) {
                    doPrevent = false;
                }
            } else if (d.is(""textarea"")) {
                doPrevent = false;
            }
        }
        if (doPrevent) {
            event.preventDefault();
            return false;
        }
    }
});
</code></pre>
",erikkallen,Jorge Fuentes Gonzlez,1273000308,1475827271,1475827271
http://stackoverflow.com/a/27724419/1207670,Custom Exceptions in JavaScript,96177,Manki,,1232523632,1530720168,0,https://stackoverflow.com/questions/464359/custom-exceptions-in-javascript,"<p>You should create a custom exception that prototypically inherits from Error.  For example:</p>

<pre><code>function InvalidArgumentException(message) {
    this.message = message;
    // Use V8's native method if available, otherwise fallback
    if (""captureStackTrace"" in Error)
        Error.captureStackTrace(this, InvalidArgumentException);
    else
        this.stack = (new Error()).stack;
}

InvalidArgumentException.prototype = Object.create(Error.prototype);
InvalidArgumentException.prototype.name = ""InvalidArgumentException"";
InvalidArgumentException.prototype.constructor = InvalidArgumentException;
</code></pre>

<p>This is basically a simplified version of what <a href=""https://stackoverflow.com/users/489553/disfated"">disfated</a> posted above with the enhancement that stack traces work on Firefox and other browsers.  It satisfies the same tests that he posted:</p>

<p>Usage:</p>

<pre><code>throw new InvalidArgumentException();
var err = new InvalidArgumentException(""Not yet..."");
</code></pre>

<p>And it will behave is expected:</p>

<pre><code>err instanceof InvalidArgumentException          // -&gt; true
err instanceof Error                             // -&gt; true
InvalidArgumentException.prototype.isPrototypeOf(err) // -&gt; true
Error.prototype.isPrototypeOf(err)               // -&gt; true
err.constructor.name                             // -&gt; InvalidArgumentException
err.name                                         // -&gt; InvalidArgumentException
err.message                                      // -&gt; Not yet...
err.toString()                                   // -&gt; InvalidArgumentException: Not yet...
err.stack                                        // -&gt; works fine!
</code></pre>
",asselin,,1420047449,1420047449,0
http://stackoverflow.com/a/27747004/3708426,JavaFX TextArea and autoscroll,23621,Sam Keays,,1374535834,1546105702,0,https://stackoverflow.com/questions/17799160/javafx-textarea-and-autoscroll,"<p><strong>txa.appendText("""") will scroll to the bottom without a listener</strong>. This becomes an issue if you want to scroll back and the text is being constantly updated. txa.setText("""") puts the scroll bar back at the top and same issue applies.</p>

<p>My solution was to extend the TextArea class, ammend the FXML tag from textArea to LogTextArea. Where this works, it clearly causes problems in scene builder as it does not know what this component is</p>

<pre><code>import javafx.scene.control.TextArea;
import javafx.scene.text.Font;

public class LogTextArea extends TextArea {

private boolean pausedScroll = false;
private double scrollPosition = 0;

public LogTextArea() {
    super();
}

public void setMessage(String data) {
    if (pausedScroll) {
        scrollPosition = this.getScrollTop();
        this.setText(data);
        this.setScrollTop(scrollPosition);
    } else {
        this.setText(data);
        this.setScrollTop(Double.MAX_VALUE);
    }
}

public void pauseScroll(Boolean pause) {
    pausedScroll = pause;
}

}
</code></pre>
",jamesarbrown,dermoritz,1420224391,1438266231,1438266231
http://stackoverflow.com/a/27747377/829771,Generate random string/characters in JavaScript,1104057,Tom Lehman,T.Todua,1251494081,1559324263,1469104025,https://stackoverflow.com/questions/1349404/generate-random-string-characters-in-javascript,"<p><a href=""https://stackoverflow.com/a/14869745/633183""><strong>Math.random</strong> is bad for this kind of thing</a></p>

<p><strong>Option 1</strong></p>

<p>If you're able to do this <em>server</em>-side, just use the <a href=""http://nodejs.org/api/crypto.html"" rel=""noreferrer"">crypto</a> module -</p>

<pre><code>var crypto = require(""crypto"");
var id = crypto.randomBytes(20).toString('hex');

// ""bb5dc8842ca31d4603d6aa11448d1654""
</code></pre>

<p>The resulting string will be twice as long as the random bytes you generate; each byte encoded to hex is 2 characters. 20 bytes will be 40 characters of hex.</p>

<hr>

<p><strong>Option 2</strong></p>

<p>If you have to do this <em>client</em>-side, perhaps try the uuid module -</p>

<pre><code>var uuid = require(""uuid"");
var id = uuid.v4();

// ""110ec58a-a0f2-4ac4-8393-c866d813b8d1""
</code></pre>

<hr>

<p><strong>Option 3</strong></p>

<p>If you have to do this <em>client</em>-side and you don't have to support old browsers, you can do it without dependencies -</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>// dec2hex :: Integer -&gt; String
// i.e. 0-255 -&gt; '00'-'ff'
function dec2hex (dec) {
  return ('0' + dec.toString(16)).substr(-2)
}

// generateId :: Integer -&gt; String
function generateId (len) {
  var arr = new Uint8Array((len || 40) / 2)
  window.crypto.getRandomValues(arr)
  return Array.from(arr, dec2hex).join('')
}

console.log(generateId())
// ""82defcf324571e70b0521d79cce2bf3fffccd69""

console.log(generateId(20))
// ""c1a050a4cd1556948d41""</code></pre>
</div>
</div>
</p>

<hr>

<p>For more information on <a href=""https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues"" rel=""noreferrer""><code>crypto.getRandomValues</code></a> -</p>

<blockquote>
  <p>The <code>crypto.getRandomValues()</code> method lets you get cryptographically strong random values. The array given as the parameter is filled with random numbers (random in its cryptographic meaning). </p>
</blockquote>

<p>Here's a little console example -</p>

<pre><code>&gt; var arr = new Uint8Array(4) # make array of 4 bytes (values 0-255)
&gt; arr
Uint8Array(4) [ 0, 0, 0, 0 ]

&gt; window.crypto
Crypto { subtle: SubtleCrypto }

&gt; window.crypto.getRandomValues()
TypeError: Crypto.getRandomValues requires at least 1 argument, but only 0 were passed

&gt; window.crypto.getRandomValues(arr)
Uint8Array(4) [ 235, 229, 94, 228 ]
</code></pre>

<p>For IE11 support you can use -</p>

<pre><code>(window.crypto || window.msCrypto).getRandomValues(arr)
</code></pre>

<p>For browser coverage see <a href=""https://caniuse.com/#feat=getrandomvalues"" rel=""noreferrer"">https://caniuse.com/#feat=getrandomvalues</a></p>
",user633183,user633183,1420226293,1555106422,1555106422
http://stackoverflow.com/a/27750897/14379,how to combine @RunWith with @RunWith(Parameterized.class),5483,user389955,,1420218079,1455241901,0,https://stackoverflow.com/questions/27745691/how-to-combine-runwith-with-runwithparameterized-class,"

<p>I believe this does what you want:</p>

<pre class=""lang-java prettyprint-override""><code>package so.junit.runner;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.model.InitializationError;
import org.junit.runners.parameterized.BlockJUnit4ClassRunnerWithParameters;
import org.junit.runners.parameterized.ParametersRunnerFactory;
import org.junit.runners.parameterized.TestWithParameters;

import java.util.Arrays;

@RunWith(Parameterized.class)
@Parameterized.UseParametersRunnerFactory(CustomParameterizedTest.RunnerFactory.class)
public class CustomParameterizedTest {

  @Parameterized.Parameters
  public static Iterable&lt;Integer&gt; data() {
    return Arrays.asList(new Integer[]{1, 2, 3});
  }

  private int i;

  public CustomParameterizedTest(int i) {
    this.i = i;
  }

  @Test
  public void test() {
    System.out.println(i);
  }

  public static class RunnerFactory implements ParametersRunnerFactory {
    @Override
    public org.junit.runner.Runner createRunnerForTestWithParameters(TestWithParameters test) throws InitializationError {
      return new A(test);
    }
  }

  public static class A extends BlockJUnit4ClassRunnerWithParameters {
    private final Object[] parameters;

    public A(TestWithParameters test) throws InitializationError {
      super(test);
      parameters = test.getParameters().toArray(new Object[test.getParameters().size()]);
    }

    @Override
    public Object createTest() throws Exception {
      return getTestClass().getOnlyConstructor().newInstance(parameters);
    }
  }
}
</code></pre>

<p>Based on the Javadocs in the JUnit Parameterized class, this is how they expect you to create a custom test runner that supports parameterization.</p>

<p><strong>UPDATE</strong></p>

<p>Updated to name the custom runner <code>A</code></p>
",Alex,seanf,1420249221,1455241901,1455241901
http://stackoverflow.com/a/27799004/1265472,Auto __repr__ method,3121,appqui-platform,SilentGhost,1239787318,1510346176,1239789899,https://stackoverflow.com/questions/750908/auto-repr-method,"<p>Well, I played a little bit with other answers and got a very pretty solution:</p>

<pre><code>class data:
    @staticmethod
    def repr(obj):
        items = []
        for prop, value in obj.__dict__.items():
            try:
                item = ""%s = %r"" % (prop, value)
                assert len(item) &lt; 20
            except:
                item = ""%s: &lt;%s&gt;"" % (prop, value.__class__.__name__)
            items.append(item)

        return ""%s(%s)"" % (obj.__class__.__name__, ', '.join(items))

    def __init__(self, cls):
        cls.__repr__ = data.repr
        self.cls = cls

    def __call__(self, *args, **kwargs):
        return self.cls(*args, **kwargs)
</code></pre>

<p>You use it as a decorator:</p>

<pre><code>@data
class PythonBean:
    def __init__(self):
        self.int = 1
        self.list = [5, 6, 7]
        self.str = ""hello""
        self.obj = SomeOtherClass()
</code></pre>

<p>and get a smart <code>__repr__</code> out of the box:</p>

<pre><code>PythonBean(int = 1, obj: &lt;SomeOtherClass&gt;, list = [5, 6, 7], str = 'hello')
</code></pre>

<p>This works with any recursive classes, including tree structures. If you try to put a self-reference in the class <code>self.ref = self</code>, the function will try (successfully) to work it out for about a second.</p>

<p>Of course, always mind your boss - mine would not like such a syntax sugar ))</p>
",voddan,,1420548458,1420548458,0
http://stackoverflow.com/a/27801394/1315039,Equivalent of ListView.setEmptyView in RecyclerView,38312,Manish Mulimani,Sheharyar,1418263276,1494683502,1494683502,https://stackoverflow.com/questions/27414173/equivalent-of-listview-setemptyview-in-recyclerview,"<p>Here's a class similar to @dragon born's, but more complete. Based on <a href=""https://gist.github.com/adelnizamutdinov/31c8f054d1af4588dc5c"">this gist</a>.</p>

<pre><code>public class EmptyRecyclerView extends RecyclerView {
    private View emptyView;
    final private AdapterDataObserver observer = new AdapterDataObserver() {
        @Override
        public void onChanged() {
            checkIfEmpty();
        }

        @Override
        public void onItemRangeInserted(int positionStart, int itemCount) {
            checkIfEmpty();
        }

        @Override
        public void onItemRangeRemoved(int positionStart, int itemCount) {
            checkIfEmpty();
        }
    };

    public EmptyRecyclerView(Context context) {
        super(context);
    }

    public EmptyRecyclerView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public EmptyRecyclerView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    void checkIfEmpty() {
        if (emptyView != null && getAdapter() != null) {
            final boolean emptyViewVisible = getAdapter().getItemCount() == 0;
            emptyView.setVisibility(emptyViewVisible ? VISIBLE : GONE);
            setVisibility(emptyViewVisible ? GONE : VISIBLE);
        }
    }

    @Override
    public void setAdapter(Adapter adapter) {
        final Adapter oldAdapter = getAdapter();
        if (oldAdapter != null) {
            oldAdapter.unregisterAdapterDataObserver(observer);
        }
        super.setAdapter(adapter);
        if (adapter != null) {
            adapter.registerAdapterDataObserver(observer);
        }

        checkIfEmpty();
    }

    public void setEmptyView(View emptyView) {
        this.emptyView = emptyView;
        checkIfEmpty();
    }
}</code></pre>
",Marc Plano-Lesay,,1420556731,1420556731,0
http://stackoverflow.com/a/2782859/6871666,Most lightweight way to create a random string and a random hexadecimal number,69212,xRobot,Peter Mortensen,1273159402,1556561979,1401544804,https://stackoverflow.com/questions/2782229/most-lightweight-way-to-create-a-random-string-and-a-random-hexadecimal-number,"<p>I got a faster one for the hex output.  Using the same t1 and t2 as above:</p>

<pre><code>&gt;&gt;&gt; t1 = timeit.Timer(""''.join(random.choice('0123456789abcdef') for n in xrange(30))"", ""import random"")
&gt;&gt;&gt; t2 = timeit.Timer(""binascii.b2a_hex(os.urandom(15))"", ""import os, binascii"")
&gt;&gt;&gt; t3 = timeit.Timer(""'%030x' % random.randrange(16**30)"", ""import random"")
&gt;&gt;&gt; for t in t1, t2, t3:
...     t.timeit()
... 
28.165037870407104
9.0292739868164062
5.2836320400238037
</code></pre>

<p><code>t3</code> only makes one call to the random module, doesn't have to build or read a list, and then does the rest with string formatting.</p>
",jcdyer,jcdyer,1273164757,1429820389,1429820389
http://stackoverflow.com/a/27830579/1954789,Loading a mock JSON file within Karma+AngularJS test,66346,Aaronius,,1372440489,1481844565,0,https://stackoverflow.com/questions/17370427/loading-a-mock-json-file-within-karmaangularjs-test,"<p>Serving JSON via the fixture is the easiest but because of our setup we couldn't do that easily so I wrote an alternative helper function:</p>

<h2><a href=""https://github.com/pizzapanther/Karma-Read-JSON"" rel=""noreferrer"">Repository</a></h2>

<h2>Install</h2>

<pre><code>$ bower install karma-read-json --save

  OR

$ npm install karma-read-json --save-dev

  OR

$ yarn add karma-read-json --dev
</code></pre>

<h2>Usage</h2>

<ol>
<li><p>Put karma-read-json.js in your Karma files. Example:</p>

<pre><code>files = [
  ...
  'bower_components/karma-read-json/karma-read-json.js',
  ...
]
</code></pre></li>
<li><p>Make sure your JSON is being served by Karma. Example:</p>

<pre><code>files = [
  ...
  {pattern: 'json/**/*.json', included: false},
  ...
]
</code></pre></li>
<li><p>Use the <code>readJSON</code> function in your tests. Example:</p>

<pre><code>var valid_respond = readJSON('json/foobar.json');
$httpBackend.whenGET(/.*/).respond(valid_respond);
</code></pre></li>
</ol>
",PizzaPanther,Gust van de Wal,1420673451,1481844565,1481844565
http://stackoverflow.com/a/27865285/1181761,How do I get the decimal places of a floating point number in Javascript?,28607,JussiR,JussiR,1330848560,1559684125,1540198871,https://stackoverflow.com/questions/9553354/how-do-i-get-the-decimal-places-of-a-floating-point-number-in-javascript,"<p>For anyone wondering how to do this faster (without converting to string), here's a solution:</p>

<pre><code>function precision(a) {
  var e = 1;
  while (Math.round(a * e) / e !== a) e *= 10;
  return Math.log(e) / Math.LN10;
}
</code></pre>

<p>Edit: a more complete solution with edge cases covered:</p>

<pre><code>function precision(a) {
  if (!isFinite(a)) return 0;
  var e = 1, p = 0;
  while (Math.round(a * e) / e !== a) { e *= 10; p++; }
  return p;
}
</code></pre>
",Mourner,Mourner,1420822091,1453725276,1453725276
http://stackoverflow.com/a/27872144/383904,Generate random string/characters in JavaScript,1104057,Tom Lehman,T.Todua,1251494081,1559324263,1469104025,https://stackoverflow.com/questions/1349404/generate-random-string-characters-in-javascript,"<h1>Random String Generator (Alpha-Numeric | Alpha | Numeric)</h1>



<pre><code>/**
 * RANDOM STRING GENERATOR
 *
 * Info:      http://stackoverflow.com/a/27872144/383904
 * Use:       randomString(length [,""A""] [,""N""] );
 * Default:   return a random alpha-numeric string
 * Arguments: If you use the optional ""A"", ""N"" flags:
 *            ""A"" (Alpha flag)   return random a-Z string
 *            ""N"" (Numeric flag) return random 0-9 string
 */
function randomString(len, an){
    an = an&amp;&amp;an.toLowerCase();
    var str="""", i=0, min=an==""a""?10:0, max=an==""n""?10:62;
    for(;i++&lt;len;){
      var r = Math.random()*(max-min)+min &lt;&lt;0;
      str += String.fromCharCode(r+=r&gt;9?r&lt;36?55:61:48);
    }
    return str;
}
</code></pre>



<pre><code>randomString(10);        // ""4Z8iNQag9v""
randomString(10, ""A"");   // ""aUkZuHNcWw""
randomString(10, ""N"");   // ""9055739230""
</code></pre>

<p>Have fun. <strong><em><a href=""http://jsbin.com/vomafi/3/edit?js,console,output"">jsBin demo</a></em></strong></p>

<hr>

<p>While the above uses additional checks for the desired (A/N, A, N) output,
<strong>let's break it down the to the essentials (Alpha-Numeric only) for a better understanding:</strong></p>

<ul>
<li>Create a function that accepts an argument (desired length of the random String result)</li>
<li>Create an empty string like <code>var str = """";</code> to concatenate random characters</li>
<li>Inside a loop <strong>create a <code>rand</code> index number</strong> from <strong>0 to 61</strong> (0..9+A..Z+a..z = 62)</li>
<li>Create a <strong>conditional logic</strong> to <strong>Adjust/fix <code>rand</code></strong> (since it's 0..61) incrementing it by some number (see examples below) to get back the right <code>CharCode</code> number and the related Character.</li>
<li>Inside the loop concatenate to <code>str</code> a <code>String.fromCharCode( incremented rand )</code></li>
</ul>

<p>Let's picture the <strong>Character table</strong> and their <strong>ranges</strong>:</p>

<pre><code>_____0....9______A..........Z______a..........z___________  Character
     | 10 |      |    26    |      |    26    |             Tot = 62 characters
    48....57    65..........90    97..........122           CharCode ranges
</code></pre>

<p><code>Math.floor( Math.random * 62 )</code> gives a range from <code>0..61</code> (what we need). 
<strong>How to fix (increment) the random</strong> to get the correct <strong>charCode ranges</strong>?</p>

<pre><code>      |   rand   | charCode |  (0..61)rand += fix            = charCode ranges |
------+----------+----------+--------------------------------+-----------------+
0..9  |   0..9   |  48..57  |  rand += 48                    =     48..57      |
A..Z  |  10..35  |  65..90  |  rand += 55 /*  90-35 = 55 */  =     65..90      |
a..z  |  36..61  |  97..122 |  rand += 61 /* 122-61 = 61 */  =     97..122     |
</code></pre>

<p><strong>The <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator"">conditional operation</a> logic</strong> from the table above:</p>

<pre><code>   rand += rand&gt;9 ? ( rand&lt;36 ? 55 : 61 ) : 48 ;
// rand +=  true  ? (  true   ? 55 else 61 ) else 48 ;
</code></pre>

<p>If you followed the above explanation you should be able to create this <strong>alpha-numeric snippet</strong>:</p>

<p><strong><em><a href=""http://jsbin.com/xilawe/1/edit?js,console,output"">jsBin demo</a></em></strong></p>

<pre><code>function randomString( len ) {
  var str = """";                                         // String result
  for(var i=0; i&lt;len; i++){                             // Loop `len` times
    var rand = Math.floor( Math.random() * 62 );        // random: 0..61
    var charCode = rand+= rand&gt;9? (rand&lt;36?55:61) : 48; // Get correct charCode
    str += String.fromCharCode( charCode );             // add Character to str
  }
  return str;       // After all loops are done, return the concatenated string
}

console.log( randomString(10) ); // ""7GL9F0ne6t""
</code></pre>

<p><strong><em><a href=""http://jsbin.com/xilawe/2/edit?js,console,output"">Or if you will: </a></em></strong></p>

<pre><code>function randomString( n ) {
  var r="""";
  while(n--)r+=String.fromCharCode((r=Math.random()*62|0,r+=r&gt;9?(r&lt;36?55:61):48));
  return r;
}
</code></pre>
",Roko C. Buljan,Roko C. Buljan,1420855797,1452188978,1452188978
http://stackoverflow.com/a/27873086/1517919,How to make travis execute Angular tests on Chrome (&quot;Please set env variable CHROME_BIN&quot;),7763,vucalur,vucalur,1381258594,1512433816,1382161278,https://stackoverflow.com/questions/19255976/how-to-make-travis-execute-angular-tests-on-chrome-please-set-env-variable-chr,"<p>Based in karma-runner project issue (<a href=""https://github.com/karma-runner/karma/issues/1144#issuecomment-53633076"" rel=""noreferrer"">https://github.com/karma-runner/karma/issues/1144#issuecomment-53633076</a>) You should set <code>CHROME_BIN</code> environment variable in your <code>.travis.yml</code> and configure a customLauncher in your karma file configuration.</p>

<p>For example, your .travis.yml file content will be:</p>

<pre><code>language: node_js
node_js:
    - '0.10'
before_script:
    - 'export CHROME_BIN=chromium-browser'
    - 'export DISPLAY=:99.0'
    - 'sh -e /etc/init.d/xvfb start'
    - 'npm install -g bower karma grunt-cli jshint'
    - 'npm install'
    - 'bower install'
</code></pre>

<p>And your <code>karma.conf.js</code> content:</p>

<pre><code>module.exports = function(config) {
    config.set({

        // ... your default content

        // This is the new content for your travis-ci configuration test
        //  Custom launcher for Travis-CI
        customLaunchers: {
            Chrome_travis_ci: {
                base: 'Chrome',
                flags: ['--no-sandbox']
            }
        },

        // Continuous Integration mode
        // if true, it capture browsers, run tests and exit
        singleRun: true 
    });

    if(process.env.TRAVIS){
        config.browsers = ['Chrome_travis_ci'];
    }

};
</code></pre>

<p> </p>
",Wilson Mendes,,1420866736,1420866736,0
http://stackoverflow.com/a/27910553/6124862,Python overwriting variables in nested functions,15683,Ord,,1319845425,1491506592,0,https://stackoverflow.com/questions/7935966/python-overwriting-variables-in-nested-functions,"<p>You can also get around this by using function attributes:</p>

<pre><code>def outer():
    def inner():
        inner.string = ""String was changed by a nested function!""
    inner.string = """"
    inner()
    return inner.string
</code></pre>

<p>Clarification: this works in both python 2.x and 3.x.</p>
",Scott Crunkleton,Scott Crunkleton,1421095935,1436643767,1436643767
http://stackoverflow.com/a/2792045/5351316,Convert Dashes to CamelCase in PHP,50566,Kirk Ouimet,,1273270516,1555626714,0,https://stackoverflow.com/questions/2791998/convert-dashes-to-camelcase-in-php,"<p>No regex or callbacks necessary. Almost all the work can be done with ucwords:</p>

<pre><code>function dashesToCamelCase($string, $capitalizeFirstCharacter = false) 
{

    $str = str_replace(' ', '', ucwords(str_replace('-', ' ', $string)));

    if (!$capitalizeFirstCharacter) {
        $str[0] = strtolower($str[0]);
    }

    return $str;
}

echo dashesToCamelCase('this-is-a-string');
</code></pre>

<p>If you're using PHP >= 5.3, you can use lcfirst instead of strtolower.</p>

<h1>Update</h1>

<p>A second parameter was added to ucwords in PHP 5.4.32/5.5.16 which means we don't need to first change the dashes to spaces (thanks to Lars Ebert and PeterM for pointing this out). Here is the updated code:</p>

<pre><code>function dashesToCamelCase($string, $capitalizeFirstCharacter = false) 
{

    $str = str_replace('-', '', ucwords($string, '-'));

    if (!$capitalizeFirstCharacter) {
        $str = lcfirst($str);
    }

    return $str;
}

echo dashesToCamelCase('this-is-a-string');
</code></pre>
",webbiedave,webbiedave,1273271064,1487286464,1487286464
http://stackoverflow.com/a/2793153/939250,How to use java.net.URLConnection to fire and handle HTTP requests,974077,BalusC,BalusC,1273299371,1542452936,1517904209,https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests,"<p><sup><em>First a disclaimer beforehand: the posted code snippets are all basic examples. You'll need to handle trivial <code>IOException</code>s and <code>RuntimeException</code>s like <code>NullPointerException</code>, <code>ArrayIndexOutOfBoundsException</code> and consorts yourself.</em></sup></p>

<hr>

<h3>Preparing</h3>

<p>We first need to know at least the URL and the charset. The parameters are optional and depend on the functional requirements.</p>

<pre><code>String url = ""http://example.com"";
String charset = ""UTF-8"";  // Or in Java 7 and later, use the constant: java.nio.charset.StandardCharsets.UTF_8.name()
String param1 = ""value1"";
String param2 = ""value2"";
// ...

String query = String.format(""param1=%s&amp;param2=%s"", 
     URLEncoder.encode(param1, charset), 
     URLEncoder.encode(param2, charset));
</code></pre>

<p>The query parameters must be in <code>name=value</code> format and be concatenated by <code>&amp;</code>. You would normally also <a href=""http://en.wikipedia.org/wiki/Percent-encoding"" rel=""noreferrer"">URL-encode</a> the query parameters with the specified charset using <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html#encode-java.lang.String-java.lang.String-"" rel=""noreferrer""><code>URLEncoder#encode()</code></a>.</p>

<p><sup>The <code>String#format()</code> is just for convenience. I prefer it when I would need the String concatenation operator <code>+</code> more than twice.</sup></p>

<hr>

<h3>Firing a <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3"" rel=""noreferrer"">HTTP GET</a> request with (optionally) query parameters</h3>

<p>It's a trivial task. It's the default request method.</p>

<pre><code>URLConnection connection = new URL(url + ""?"" + query).openConnection();
connection.setRequestProperty(""Accept-Charset"", charset);
InputStream response = connection.getInputStream();
// ...
</code></pre>

<p>Any query string should be concatenated to the URL using <code>?</code>. The <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.2"" rel=""noreferrer""><code>Accept-Charset</code></a> header may hint the server what encoding the parameters are in. If you don't send any query string, then you can leave the <code>Accept-Charset</code> header away. If you don't need to set any headers, then you can even use the <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/URL.html#openStream%28%29"" rel=""noreferrer""><code>URL#openStream()</code></a> shortcut method.</p>

<pre><code>InputStream response = new URL(url).openStream();
// ...
</code></pre>

<p>Either way, if the other side is a <a href=""http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html"" rel=""noreferrer""><code>HttpServlet</code></a>, then its <a href=""http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29"" rel=""noreferrer""><code>doGet()</code></a> method will be called and the parameters will be available by <a href=""http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29"" rel=""noreferrer""><code>HttpServletRequest#getParameter()</code></a>.</p>

<p>For testing purposes, you can print the response body to stdout as below:</p>

<pre><code>try (Scanner scanner = new Scanner(response)) {
    String responseBody = scanner.useDelimiter(""\\A"").next();
    System.out.println(responseBody);
}
</code></pre>

<hr>

<h3>Firing a <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5"" rel=""noreferrer"">HTTP POST</a> request with query parameters</h3>

<p>Setting the <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29"" rel=""noreferrer""><code>URLConnection#setDoOutput()</code></a> to <code>true</code> implicitly sets the request method to POST. The standard HTTP POST as web forms do is of type <code>application/x-www-form-urlencoded</code> wherein the query string is written to the request body.</p>

<pre><code>URLConnection connection = new URL(url).openConnection();
connection.setDoOutput(true); // Triggers POST.
connection.setRequestProperty(""Accept-Charset"", charset);
connection.setRequestProperty(""Content-Type"", ""application/x-www-form-urlencoded;charset="" + charset);

try (OutputStream output = connection.getOutputStream()) {
    output.write(query.getBytes(charset));
}

InputStream response = connection.getInputStream();
// ...
</code></pre>

<p>Note: whenever you'd like to submit a HTML form programmatically, don't forget to take the <code>name=value</code> pairs of any <code>&lt;input type=""hidden""&gt;</code> elements into the query string and of course also the <code>name=value</code> pair of the <code>&lt;input type=""submit""&gt;</code> element which you'd like to ""press"" programmatically (because that's usually been used in the server side to distinguish if a button was pressed and if so, which one).</p>

<p>You can also cast the obtained <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html"" rel=""noreferrer""><code>URLConnection</code></a> to <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html"" rel=""noreferrer""><code>HttpURLConnection</code></a> and use its <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29"" rel=""noreferrer""><code>HttpURLConnection#setRequestMethod()</code></a> instead. But if you're trying to use the connection for output you still need to set <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#setDoOutput%28boolean%29"" rel=""noreferrer""><code>URLConnection#setDoOutput()</code></a> to <code>true</code>.</p>

<pre><code>HttpURLConnection httpConnection = (HttpURLConnection) new URL(url).openConnection();
httpConnection.setRequestMethod(""POST"");
// ...
</code></pre>

<p>Either way, if the other side is a <a href=""http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html"" rel=""noreferrer""><code>HttpServlet</code></a>, then its <a href=""http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29"" rel=""noreferrer""><code>doPost()</code></a> method will be called and the parameters will be available by <a href=""http://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29"" rel=""noreferrer""><code>HttpServletRequest#getParameter()</code></a>.</p>

<hr>

<h3>Actually firing the HTTP request</h3>

<p>You can fire the HTTP request explicitly with <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#connect%28%29"" rel=""noreferrer""><code>URLConnection#connect()</code></a>, but the request will automatically be fired on demand when you want to get any information about the HTTP response, such as the response body using <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html#getInputStream%28%29"" rel=""noreferrer""><code>URLConnection#getInputStream()</code></a> and so on. The above examples does exactly that, so the <code>connect()</code> call is in fact superfluous.</p>

<hr>

<h3>Gathering HTTP response information</h3>

<ol>
<li><p><a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html"" rel=""noreferrer"">HTTP response status</a>:</p>

<p>You need a <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html"" rel=""noreferrer""><code>HttpURLConnection</code></a> here. Cast it first if necessary.</p>

<pre><code>int status = httpConnection.getResponseCode();
</code></pre></li>
<li><p><a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html"" rel=""noreferrer"">HTTP response headers</a>:</p>

<pre><code>for (Entry&lt;String, List&lt;String&gt;&gt; header : connection.getHeaderFields().entrySet()) {
    System.out.println(header.getKey() + ""="" + header.getValue());
}
</code></pre></li>
<li><p><a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17"" rel=""noreferrer"">HTTP response encoding</a>:</p>

<p>When the <code>Content-Type</code> contains a <code>charset</code> parameter, then the response body is likely text based and we'd like to process the response body with the server-side specified character encoding then.</p>

<pre><code>String contentType = connection.getHeaderField(""Content-Type"");
String charset = null;

for (String param : contentType.replace("" "", """").split("";"")) {
    if (param.startsWith(""charset="")) {
        charset = param.split(""="", 2)[1];
        break;
    }
}

if (charset != null) {
    try (BufferedReader reader = new BufferedReader(new InputStreamReader(response, charset))) {
        for (String line; (line = reader.readLine()) != null;) {
            // ... System.out.println(line) ?
        }
    }
} else {
    // It's likely binary content, use InputStream/OutputStream.
}
</code></pre></li>
</ol>

<hr>

<h3>Maintaining the session</h3>

<p>The server side session is usually backed by a cookie. Some web forms require that you're logged in and/or are tracked by a session. You can use the <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html"" rel=""noreferrer""><code>CookieHandler</code></a> API to maintain cookies. You need to prepare a <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html"" rel=""noreferrer""><code>CookieManager</code></a> with a <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html"" rel=""noreferrer""><code>CookiePolicy</code></a> of <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html#ACCEPT_ALL"" rel=""noreferrer""><code>ACCEPT_ALL</code></a> before sending all HTTP requests.</p>

<pre><code>// First set the default cookie manager.
CookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));

// All the following subsequent URLConnections will use the same cookie manager.
URLConnection connection = new URL(url).openConnection();
// ...

connection = new URL(url).openConnection();
// ...

connection = new URL(url).openConnection();
// ...
</code></pre>

<p>Note that this is known to not always work properly in all circumstances. If it fails for you, then best is to manually gather and set the cookie headers. You basically need to grab all <code>Set-Cookie</code> headers from the response of the login or the first <code>GET</code> request and then pass this through the subsequent requests.</p>

<pre><code>// Gather all cookies on the first request.
URLConnection connection = new URL(url).openConnection();
List&lt;String&gt; cookies = connection.getHeaderFields().get(""Set-Cookie"");
// ...

// Then use the same cookies on all subsequent requests.
connection = new URL(url).openConnection();
for (String cookie : cookies) {
    connection.addRequestProperty(""Cookie"", cookie.split("";"", 2)[0]);
}
// ...
</code></pre>

<p>The <code>split("";"", 2)[0]</code> is there to get rid of cookie attributes which are irrelevant for the server side like <code>expires</code>, <code>path</code>, etc. Alternatively, you could also use <code>cookie.substring(0, cookie.indexOf(';'))</code> instead of <code>split()</code>.</p>

<hr>

<h3>Streaming mode</h3>

<p>The <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html"" rel=""noreferrer""><code>HttpURLConnection</code></a> will by default buffer the <em>entire</em> request body before actually sending it, regardless of whether you've set a fixed content length yourself using <code>connection.setRequestProperty(""Content-Length"", contentLength);</code>. This may cause <code>OutOfMemoryException</code>s whenever you concurrently send large POST requests (e.g. uploading files). To avoid this, you would like to set the <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setFixedLengthStreamingMode%28int%29"" rel=""noreferrer""><code>HttpURLConnection#setFixedLengthStreamingMode()</code></a>.</p>

<pre><code>httpConnection.setFixedLengthStreamingMode(contentLength);
</code></pre>

<p>But if the content length is really not known beforehand, then you can make use of chunked streaming mode by setting the <a href=""http://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html#setChunkedStreamingMode%28int%29"" rel=""noreferrer""><code>HttpURLConnection#setChunkedStreamingMode()</code></a> accordingly. This will set the HTTP <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.41"" rel=""noreferrer""><code>Transfer-Encoding</code></a> header to <code>chunked</code> which will force the request body being sent in chunks. The below example will send the body in chunks of 1KB.</p>

<pre><code>httpConnection.setChunkedStreamingMode(1024);
</code></pre>

<hr>

<h3>User-Agent</h3>

<p>It can happen that <a href=""https://stackoverflow.com/questions/13670692/403-forbidden-with-java-but-not-web-browser"">a request returns an unexpected response, while it works fine with a real web browser</a>. The server side is probably blocking requests based on the <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43"" rel=""noreferrer""><code>User-Agent</code></a> request header. The <code>URLConnection</code> will by default set it to <code>Java/1.6.0_19</code> where the last part is obviously the JRE version. You can override this as follows:</p>

<pre><code>connection.setRequestProperty(""User-Agent"", ""Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36""); // Do as if you're using Chrome 41 on Windows 7.
</code></pre>

<p>Use the User-Agent string from a <a href=""http://www.useragentstring.com/pages/useragentstring.php"" rel=""noreferrer"">recent browser</a>.</p>

<hr>

<h3>Error handling</h3>

<p>If the HTTP response code is <code>4nn</code> (Client Error) or <code>5nn</code> (Server Error), then you may want to read the <code>HttpURLConnection#getErrorStream()</code> to see if the server has sent any useful error information.</p>

<pre><code>InputStream error = ((HttpURLConnection) connection).getErrorStream();
</code></pre>

<p>If the HTTP response code is -1, then something went wrong with connection and response handling. The <code>HttpURLConnection</code> implementation is in older JREs somewhat buggy with keeping connections alive. You may want to turn it off by setting the <code>http.keepAlive</code> system property to <code>false</code>. You can do this programmatically in the beginning of your application by:</p>

<pre><code>System.setProperty(""http.keepAlive"", ""false"");
</code></pre>

<hr>

<h3>Uploading files</h3>

<p>You'd normally use <a href=""http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2"" rel=""noreferrer""><code>multipart/form-data</code></a> encoding for mixed POST content (binary and character data). The encoding is in more detail described in <a href=""http://www.faqs.org/rfcs/rfc2388.html"" rel=""noreferrer"">RFC2388</a>.</p>

<pre><code>String param = ""value"";
File textFile = new File(""/path/to/file.txt"");
File binaryFile = new File(""/path/to/file.bin"");
String boundary = Long.toHexString(System.currentTimeMillis()); // Just generate some unique random value.
String CRLF = ""\r\n""; // Line separator required by multipart/form-data.
URLConnection connection = new URL(url).openConnection();
connection.setDoOutput(true);
connection.setRequestProperty(""Content-Type"", ""multipart/form-data; boundary="" + boundary);

try (
    OutputStream output = connection.getOutputStream();
    PrintWriter writer = new PrintWriter(new OutputStreamWriter(output, charset), true);
) {
    // Send normal param.
    writer.append(""--"" + boundary).append(CRLF);
    writer.append(""Content-Disposition: form-data; name=\""param\"""").append(CRLF);
    writer.append(""Content-Type: text/plain; charset="" + charset).append(CRLF);
    writer.append(CRLF).append(param).append(CRLF).flush();

    // Send text file.
    writer.append(""--"" + boundary).append(CRLF);
    writer.append(""Content-Disposition: form-data; name=\""textFile\""; filename=\"""" + textFile.getName() + ""\"""").append(CRLF);
    writer.append(""Content-Type: text/plain; charset="" + charset).append(CRLF); // Text file itself must be saved in this charset!
    writer.append(CRLF).flush();
    Files.copy(textFile.toPath(), output);
    output.flush(); // Important before continuing with writer!
    writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.

    // Send binary file.
    writer.append(""--"" + boundary).append(CRLF);
    writer.append(""Content-Disposition: form-data; name=\""binaryFile\""; filename=\"""" + binaryFile.getName() + ""\"""").append(CRLF);
    writer.append(""Content-Type: "" + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);
    writer.append(""Content-Transfer-Encoding: binary"").append(CRLF);
    writer.append(CRLF).flush();
    Files.copy(binaryFile.toPath(), output);
    output.flush(); // Important before continuing with writer!
    writer.append(CRLF).flush(); // CRLF is important! It indicates end of boundary.

    // End of multipart/form-data.
    writer.append(""--"" + boundary + ""--"").append(CRLF).flush();
}
</code></pre>

<p>If the other side is a <a href=""http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html"" rel=""noreferrer""><code>HttpServlet</code></a>, then its <a href=""http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html#doPost%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29"" rel=""noreferrer""><code>doPost()</code></a> method will be called and the parts will be available by <a href=""http://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29"" rel=""noreferrer""><code>HttpServletRequest#getPart()</code></a> (note, thus <strong>not</strong> <code>getParameter()</code> and so on!). The <code>getPart()</code> method is however relatively new, it's introduced in Servlet 3.0 (Glassfish 3, Tomcat 7, etc). Prior to Servlet 3.0, your best choice is using <a href=""http://commons.apache.org/fileupload"" rel=""noreferrer"">Apache Commons FileUpload</a> to parse a <code>multipart/form-data</code> request. Also see <a href=""https://stackoverflow.com/questions/2422468/upload-big-file-to-servlet/2424824#2424824"">this answer</a> for examples of both the FileUpload and the Servelt 3.0 approaches.</p>

<hr>

<h3>Dealing with untrusted or misconfigured HTTPS sites</h3>

<p>Sometimes you need to connect a HTTPS URL, perhaps because you're writing a web scraper. In that case, you may likely face a <code>javax.net.ssl.SSLException: Not trusted server certificate</code> on some HTTPS sites who doesn't keep their SSL certificates up to date, or a <code>java.security.cert.CertificateException: No subject alternative DNS name matching [hostname] found</code> or <code>javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name</code> on some misconfigured HTTPS sites.</p>

<p>The following one-time-run <code>static</code> initializer in your web scraper class should make <code>HttpsURLConnection</code> more lenient as to those HTTPS sites and thus not throw those exceptions anymore.</p>

<pre><code>static {
    TrustManager[] trustAllCertificates = new TrustManager[] {
        new X509TrustManager() {
            @Override
            public X509Certificate[] getAcceptedIssuers() {
                return null; // Not relevant.
            }
            @Override
            public void checkClientTrusted(X509Certificate[] certs, String authType) {
                // Do nothing. Just allow them all.
            }
            @Override
            public void checkServerTrusted(X509Certificate[] certs, String authType) {
                // Do nothing. Just allow them all.
            }
        }
    };

    HostnameVerifier trustAllHostnames = new HostnameVerifier() {
        @Override
        public boolean verify(String hostname, SSLSession session) {
            return true; // Just allow them all.
        }
    };

    try {
        System.setProperty(""jsse.enableSNIExtension"", ""false"");
        SSLContext sc = SSLContext.getInstance(""SSL"");
        sc.init(null, trustAllCertificates, new SecureRandom());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
        HttpsURLConnection.setDefaultHostnameVerifier(trustAllHostnames);
    }
    catch (GeneralSecurityException e) {
        throw new ExceptionInInitializerError(e);
    }
}
</code></pre>

<hr>

<h3>Last words</h3>

<p>The <a href=""http://hc.apache.org/httpcomponents-client-ga/"" rel=""noreferrer"">Apache HttpComponents HttpClient</a> is <em>much</em> more convenient in this all :)</p>

<ul>
<li><a href=""http://hc.apache.org/httpcomponents-client-ga/tutorial/html/"" rel=""noreferrer"">HttpClient Tutorial</a></li>
<li><a href=""http://hc.apache.org/httpcomponents-client-ga/examples.html"" rel=""noreferrer"">HttpClient Examples</a></li>
</ul>

<hr>

<h3>Parsing and extracting HTML</h3>

<p>If all you want is parsing and extracting data from HTML, then better use a HTML parser like <a href=""http://jsoup.org"" rel=""noreferrer"">Jsoup</a></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers/3154281#3154281"">What are the pros/cons of leading HTML parsers in Java</a></li>
<li><a href=""https://stackoverflow.com/questions/2835505/how-to-scan-a-website-or-page-for-info-and-bring-it-into-my-program/2835555#2835555"">How to scan and extract a webpage in Java</a></li>
</ul>
",BalusC,Raedwald,1273299397,1532607244,1532607244
http://stackoverflow.com/a/27952712/2726725,Override AngularJS Default Email Validator,3253,gogachinchaladze,PSL,1421268465,1421297224,1421297224,https://stackoverflow.com/questions/27952132/override-angularjs-default-email-validator,"<p>angular version <code>1.2.26</code> that you are using does not add <a href=""https://docs.angularjs.org/api/ng/type/ngModel.NgModelController#$validators""><code>$validators</code></a> special property on the ngModel controller instance. You need 1.3.x version of angular.</p>

<p>Provided you have 1.3.x you can just use your directive as is, and you can add priority <code>2</code> to be greater than ng-model (which is 1) so that your directive sets the validator before <code>ng-model</code> directive takes its turn :</p>

<pre><code>app.directive('overwriteEmail', function() {
  var EMAIL_REGEXP = /^[a-z0-9!#$%&amp;'*+/=?^_`{|}~.-]+@example\.com$/i;

  return {
    require: 'ngModel',
    restrict: '',
    priority: 2,
    link: function(scope, elm, attrs, ctrl) {
      if (ctrl &amp;&amp; ctrl.$validators.email) {
        // this will overwrite the default Angular email validator
        ctrl.$validators.email = function(modelValue) {
          return ctrl.$isEmpty(modelValue) || EMAIL_REGEXP.test(modelValue);
        }
      }
    }
  }
});
</code></pre>

<p><strong>Demo</strong></p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""true"">
<div class=""snippet-code snippet-currently-hidden"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var app = angular.module('app', []);

app.directive('overwriteEmail', function() {
  var EMAIL_REGEXP = /^[a-z0-9!#$%&amp;'*+/=?^_`{|}~.-]+@example\.com$/i;

  return {
    require: 'ngModel',
    restrict: '',
    priority: 1,
    link: function(scope, elm, attrs, ctrl) {
      if (ctrl &amp;&amp; ctrl.$validators.email) {
        // this will overwrite the default Angular email validator
        ctrl.$validators.email = function(modelValue) {
          return ctrl.$isEmpty(modelValue) || EMAIL_REGEXP.test(modelValue);
        }
      }
    }
  }
});</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js""&gt;&lt;/script&gt;
&lt;div ng-app=""app""&gt;
  &lt;div&gt;
    &lt;form name=""form"" class=""css-form"" novalidate&gt;
      &lt;div&gt;
        Overwritten Email:
        &lt;input type=""email"" ng-model=""myEmail"" overwrite-email name=""overwrittenEmail"" /&gt;
        &lt;span ng-show=""form.overwrittenEmail.$error.email""&gt;This email format is invalid!     &lt;/span&gt;
        &lt;br&gt;Model: {{myEmail}}
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
</p>

<p>You can also stick with using <code>ng-pattern</code> and use <code>form.overwrittenEmail.$error.pattern</code> to display the message if invalid pattern.</p>

<pre><code>&lt;input type=""email"" ng-pattern=""/^[a-z0-9!#$%&amp;'*+/=?^_`{|}~.-]+@example\.com$/i"" 
                    ng-model=""myEmail"" name=""overwrittenEmail"" /&gt;
   &lt;span ng-show=""form.overwrittenEmail.$error.pattern""&gt;
</code></pre>

<p><strong>Demo</strong></p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""true"">
<div class=""snippet-code snippet-currently-hidden"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var app = angular.module('app', []);</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js""&gt;&lt;/script&gt;
&lt;div ng-app=""app""&gt;
  &lt;div&gt;
    &lt;form name=""form"" class=""css-form"" novalidate&gt;
      &lt;div&gt;
        Overwritten Email:
        &lt;input type=""email"" ng-model=""myEmail"" ng-pattern=""/^[a-z0-9!#$%&amp;'*+/=?^_`{|}~.-]+@example\.com$/i"" name=""overwrittenEmail"" /&gt;
        &lt;span ng-show=""form.overwrittenEmail.$error.pattern""&gt;This email format is invalid!     &lt;/span&gt;
        &lt;br&gt;Model: {{myEmail}}
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
</p>
",PSL,PSL,1421270576,1421271009,1421271009
http://stackoverflow.com/a/27986860/504611,Gson: How to exclude specific fields from Serialization without annotations,295552,Liviu T.,Liviu T.,1296033591,1554831634,1352413805,https://stackoverflow.com/questions/4802887/gson-how-to-exclude-specific-fields-from-serialization-without-annotations,"<p>After reading all available answers I found out, that most flexible, in my case, was to use custom <code>@Exclude</code> annotation. So, I implemented simple strategy for this (I didn't want to mark all fields using <code>@Expose</code> nor I wanted to use <code>transient</code> which conflicted with in app <code>Serializable</code> serialization) :</p>

<p>Annotation:</p>

<pre><code>@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface Exclude {
}
</code></pre>

<p>Strategy:</p>

<pre><code>public class AnnotationExclusionStrategy implements ExclusionStrategy {

    @Override
    public boolean shouldSkipField(FieldAttributes f) {
        return f.getAnnotation(Exclude.class) != null;
    }

    @Override
    public boolean shouldSkipClass(Class&lt;?&gt; clazz) {
        return false;
    }
}
</code></pre>

<p>Usage:</p>

<pre><code>new GsonBuilder().setExclusionStrategies(new AnnotationExclusionStrategy()).create();
</code></pre>
",pkk,,1421420669,1421420669,0
http://stackoverflow.com/a/27996031/5961578,What is the best way to convert all controller params from camelCase to snake_case in Rails?,12598,a.s.t.r.o,,1371832224,1539861475,0,https://stackoverflow.com/questions/17240106/what-is-the-best-way-to-convert-all-controller-params-from-camelcase-to-snake-ca,"<p>Merging Sebastian Hoitz's answer with <a href=""https://gist.github.com/bndkn/4e4b4f4da2c60627eddf"" rel=""nofollow"">this gist</a>, I could make it work on rails 4.2, strong parameters AND parameters wrapping with the <a href=""http://api.rubyonrails.org/classes/ActionController/ParamsWrapper.html"" rel=""nofollow""><code>wrap_parameters</code></a> tagging method.</p>

<p>I couldn't make it work using a <code>before_filter</code>, probably because the parameter wrapping is done before filtering.</p>

<p>In <code>config/initializers/wrap_parameters.rb</code>:</p>

<pre><code># Convert json parameters, sent from Javascript UI, from camelCase to snake_case.
# This bridges the gap between javascript and ruby naming conventions.
module ActionController
  module ParamsNormalizer
    extend ActiveSupport::Concern

    def process_action(*args)
      deep_underscore_params!(request.parameters)
      super
    end

    private
      def deep_underscore_params!(val)
        case val
        when Array
          val.map {|v| deep_underscore_params! v }
        when Hash
          val.keys.each do |k, v = val[k]|
            val.delete k
            val[k.underscore] = deep_underscore_params!(v)
          end
          val
        else
          val
        end
      end
  end
end

# Enable parameter wrapping for JSON. You can disable this by setting :format to an empty array.
ActiveSupport.on_load(:action_controller) do
  wrap_parameters format: [:json] if respond_to?(:wrap_parameters)
  # Include the above defined concern
  include ::ActionController::ParamsNormalizer
end
</code></pre>
",patatepartie,petRUShka,1421467582,1471105823,1471105823
http://stackoverflow.com/a/28046896/682179,How many decimal places does the primitive float and double support?,28020,code511788465541441,,1421758119,1421763002,0,https://stackoverflow.com/questions/28045787/how-many-decimal-places-does-the-primitive-float-and-double-support,"<blockquote>
  <p>are these numbers the number of decimal places supported or total number of digits in a number?</p>
</blockquote>

<p>They are the <em>significant</em> digits contained in every number (although you may not need all of them, but they're still there). The mantissa of the same type always contains the same number of bits, so every number consequentially contains the same number of valid ""digits"" if you think in terms of decimal digits. You cannot store more digits than will fit into the mantissa.</p>

<p>The number of ""supported"" digits is, however, much larger, for example <code>float</code> will usually support up to 38 decimal digits and <code>double</code> will support up to 308 decimal digits, but most of these digits are <em>not significant</em> (that is, ""unknown"").</p>

<p>Although technically, this is wrong, since <code>float</code> and <code>double</code> do not have universally well-defined sizes like I presumed above (they're implementation-defined). Also, storage sizes are not necessarily the same as the sizes of intermediate results.</p>

<p>The C++ standard is very reluctant at precisely defining any fundamental type, leaving almost everything to the implementation. Floating point types are no exception:</p>

<blockquote>
  <p>3.9.1 / 8<br>
  There are three floating point types: float, double, and long double. The type double provides at least as much precision as float, and the type long double provides at least as much precision as double. The set of values of the type float is a subset of the set of values of the type double; the set of values of the type double is a subset of the set of values of the type long double. The value representation of floating-point types is implementation-defined.</p>
</blockquote>

<p>Now of course all of this is not particularly helpful in practice.</p>

<p>In practice, floating point is (usually) IEEE 754 compliant, with <code>float</code> having a width of 32 bits and <code>double</code> having a width of 64 bits (as stored in memory, registers have higher precision on some notable mainstream architectures).</p>

<p>This is equivalent to 24 bits and 53 bits of matissa, respectively, or <strong>7 and 15 full decimals</strong>.</p>
",Damon,,1421761574,1421761574,0
http://stackoverflow.com/a/28090544/4919483,Get records with max value for each group of grouped SQL results,201130,Yarin,axiac,1345772210,1546313749,1503492329,https://stackoverflow.com/questions/12102200/get-records-with-max-value-for-each-group-of-grouped-sql-results,"<p>The correct solution is:</p>

<pre><code>SELECT o.*
FROM `Persons` o                    # 'o' from 'oldest person in group'
  LEFT JOIN `Persons` b             # 'b' from 'bigger age'
      ON o.Group = b.Group AND o.Age &lt; b.Age
WHERE b.Age is NULL                 # bigger age not found
</code></pre>

<h3>How it works:</h3>

<p>It matches each row from <code>o</code> with all the rows from <code>b</code> having the same value in column <code>Group</code> and a bigger value in column <code>Age</code>. Any row from <code>o</code> not having the maximum value of its group in column <code>Age</code> will match one or more rows from <code>b</code>.</p>

<p>The <code>LEFT JOIN</code> makes it match the oldest person in group (including the persons that are alone in their group) with a row full of <code>NULL</code>s from <code>b</code> ('no biggest age in the group').<br>
<em>Using <code>INNER JOIN</code> makes these rows not matching and they are ignored.</em></p>

<p>The <code>WHERE</code> clause keeps only the rows having <code>NULL</code>s in the fields extracted from <code>b</code>. They are the oldest persons from each group.</p>

<h3>Further readings</h3>

<p>This solution and many others are explained in the book <a href=""https://rads.stackoverflow.com/amzn/click/com/1934356557"" rel=""noreferrer"" rel=""nofollow noreferrer"">SQL Antipatterns: Avoiding the Pitfalls of Database Programming</a></p>
",axiac,,1421934985,1421934985,0
http://stackoverflow.com/a/28090883/6691595,"A safe, atomic file-copy operation",5755,Rory,,1343054592,1509789402,0,https://stackoverflow.com/questions/11614815/a-safe-atomic-file-copy-operation,"<p>There <em>is</em> in fact a way to do this, atomically and safely, <strong>provided all actors do it the same way</strong>. It's an adaptation of the <a href=""http://www.cl.cam.ac.uk/techreports/UCAM-CL-TR-697.pdf#page=66"" rel=""nofollow noreferrer"">lock-free whack-a-mole algorithm</a>, and not entirely trivial, so feel free to go with ""no"" as the general answer ;)</p>

<h1>What to do</h1>

<ol>
<li>Check whether the file already exists. Stop if it does.</li>
<li><a href=""https://docs.python.org/2/library/uuid.html#uuid.uuid4"" rel=""nofollow noreferrer"">Generate a unique ID</a></li>
<li>Copy the source file to the target folder with a temporary name, say, <code>&lt;target&gt;.&lt;UUID&gt;.tmp</code>.</li>
<li>Rename<sup></sup> the copy <code>&lt;target&gt;-&lt;UUID&gt;.mole.tmp</code>.</li>
<li><a href=""https://docs.python.org/2/library/glob.html"" rel=""nofollow noreferrer"">Look for any other files matching the pattern</a> <code>&lt;target&gt;-*.mole.tmp</code>.

<ul>
<li>If their UUID compares greater than yours, <a href=""https://docs.python.org/2/library/os.html#os.remove"" rel=""nofollow noreferrer"">attempt to delete it</a>. (Don't worry if it's gone.)</li>
<li>If their UUID compares less than yours, attempt to delete your own. (Again, don't worry if it's gone.) From now on, treat their UUID as if it were your own.</li>
</ul></li>
<li>Check again to see if the destination file already exists. If so, attempt to delete your temporary file. (Don't worry if it's gone. Remember your UUID may have changed in step 5.)</li>
<li>If you didn't already attempt to delete it in step 6, attempt to rename your temporary file to its final name, <code>&lt;target&gt;</code>. (Don't worry if it's gone, just jump back to step 5.)</li>
</ol>

<p>You're done!</p>

<h1>How it works</h1>

<p>Imagine each candidate source file is a mole coming out of its hole. Half-way out, it pauses and whacks any competing moles back into the ground, before checking no other mole has fully emerged. If you run this through in your head, you should see that only one mole will ever make it all the way out. To prevent this system from <a href=""https://en.wikipedia.org/wiki/Deadlock#Livelock"" rel=""nofollow noreferrer"">livelocking</a>, we add a total ordering on which mole can whack which. Bam! A <strike>&nbsp;PhD thesis&nbsp;</strike> <a href=""https://en.wikipedia.org/wiki/Non-blocking_algorithm#Lock-freedom"" rel=""nofollow noreferrer"">lock-free algorithm</a>.</p>

<p><sup></sup> Step 4 may look unnecessary&mdash;why not just use that name in the first place? However, another process may ""adopt"" your <strike>&nbsp;mole&nbsp;</strike> file in step 5, and make it the winner in step 7, so it's very important that you're not still writing out the contents! Renames on the same file system are atomic, so step 4 is safe.</p>
",Alice Purcell,Alice Purcell,1421936026,1509789402,1509789402
http://stackoverflow.com/a/2809114/5351316,How do I open a file from line X to line Y in PHP?,13987,lock,Xenph Yan,1233810877,1340878214,1233812512,https://stackoverflow.com/questions/514673/how-do-i-open-a-file-from-line-x-to-line-y-in-php,"<p>Yes, you can do that easily with <a href=""http://de.php.net/manual/en/splfileobject.seek.php"" rel=""noreferrer""><code>SplFileObject::seek</code></a></p>

<pre><code>$file = new SplFileObject('filename.txt');
$file-&gt;seek(1000);
for($i = 0; !$file-&gt;eof() &amp;&amp; $i &lt; 1000; $i++) {
    echo $file-&gt;current(); 
    $file-&gt;next();
}
</code></pre>

<p>This is a method from the <a href=""http://de.php.net/manual/en/class.seekableiterator.php"" rel=""noreferrer"">SeekableIterator</a> interface and not to be confused with <code>fseek</code>.  </p>

<p>And because SplFileObject is iterable you can do it even easier with a <a href=""http://de.php.net/manual/en/class.limititerator.php"" rel=""noreferrer""><code>LimitIterator</code></a>:</p>

<pre><code>$file = new SplFileObject('longFile.txt');
$fileIterator = new LimitIterator($file, 1000, 2000);
foreach($fileIterator as $line) {
    echo $line, PHP_EOL;
}
</code></pre>

<p>Again, this is zero-based, so it's line 1001 to 2001.</p>
",Gordon,Gordon,1273566890,1273578987,1273578987
http://stackoverflow.com/a/28091651/2726725,Unable to get connect-livereload to work with express server in gulp task,3212,robabby,robabby,1421849927,1421939376,1421863581,https://stackoverflow.com/questions/28069417/unable-to-get-connect-livereload-to-work-with-express-server-in-gulp-task,"<p>I was able to get past this issue by removing the <code>app.use(require('connect-livereload')({port: 35729}))</code> from my gulpfile, along with a couple of other lines, and having that instantiate in my Express server's app.js file.</p>

<p>My gulpfile's <code>express</code> task now looks like this:</p>

<pre><code>gulp.task('express', function() {
  var app = require('./server/app');
  app.listen(3000);
});
</code></pre>

<p>I added in the <code>connect-livereload</code> just above where I specify my static directory in Express:</p>

<pre><code>if (app.get('env') === 'development') {
  app.use(require('connect-livereload')());
}

app.use(express.static(path.join(__dirname, '../app')));
</code></pre>

<p>Once I started using this setup, I was getting the livereload.js script injected into my document, and client-side changes are now auto-refreshed just how I wanted.</p>

<p>Hope this helps someone!</p>
",robabby,robabby,1421938139,1421939376,1421939376
http://stackoverflow.com/a/2819788/6490583,parsing .properties file in Python,51608,Tshepang,Tshepang,1273674301,1550002698,1360851906,https://stackoverflow.com/questions/2819696/parsing-properties-file-in-python,"<p>Say you have, e.g.:</p>

<pre><code>$ cat my.props
first: primo
second: secondo
third: terzo
</code></pre>

<p>i.e. would be a <code>.config</code> format except that it's missing a leading section name.  Then, it easy to fake the section header:</p>

<pre><code>import ConfigParser

class FakeSecHead(object):
    def __init__(self, fp):
        self.fp = fp
        self.sechead = '[asection]\n'

    def readline(self):
        if self.sechead:
            try: 
                return self.sechead
            finally: 
                self.sechead = None
        else: 
            return self.fp.readline()
</code></pre>

<p><strong>usage:</strong></p>

<pre><code>cp = ConfigParser.SafeConfigParser()
cp.readfp(FakeSecHead(open('my.props')))
print cp.items('asection')
</code></pre>

<p><strong>output:</strong></p>

<pre><code>[('second', 'secondo'), ('third', 'terzo'), ('first', 'primo')]
</code></pre>
",Alex Martelli,Jossef Harush,1273674998,1424178593,1424178593
http://stackoverflow.com/a/28203456/307333,Get number of digits with JavaScript,145911,bit4fox,Chad von Nau,1360859958,1549653589,1548831724,https://stackoverflow.com/questions/14879691/get-number-of-digits-with-javascript,"<p>Here's a mathematical answer (also works for negative numbers):</p>

<pre><code>function numDigits(x) {
  return Math.max(Math.floor(Math.log10(Math.abs(x))), 0) + 1;
}
</code></pre>

<p>And an optimized version of the above (more efficient bitwise operations):</p>

<pre><code>function numDigits(x) {
  return (Math.log10((x ^ (x &gt;&gt; 31)) - (x &gt;&gt; 31)) | 0) + 1;
}
</code></pre>

<p>Essentially, we start by getting the absolute value of the input to allow negatives values to work correctly. Then we run the through the log10 operation to give us what power of 10 the input is (if you were working in another base, you would use the logarithm for that base), which is the number of digits. Then we floor the output to only grab the integer part of that. Finally, we use the max function to fix decimal values (any fractional value between 0 and 1 just returns 1, instead of a negative number), and add 1 to the final output to get the count.</p>

<p>The above assumes (based on your example input) that you wish to count the number of digits in integers (so 12345 = 5, and thus 12345.678 = 5 as well). If you would like to count the total number of digits in the value (so 12345.678 = 8), then add this before the 'return' in either function above:</p>

<pre><code>x = Number(String(x).replace(/[^0-9]/g, ''));
</code></pre>
",Mwr247,Mwr247,1422483270,1422892006,1422892006
http://stackoverflow.com/a/28210364/1070244,How to get list of registered custom elements,8928,dy_,,1417886706,1510234089,0,https://stackoverflow.com/questions/27334365/how-to-get-list-of-registered-custom-elements,"<p>There is a way to check whether an element was registered. Registered elements have their own constructors, while unregistered ones would use plain <code>HTMLElement()</code> for constructor (or <code>HTMLUnknownElement()</code> whether the name is not valid, but this is out of scope of the question):</p>

<pre><code>document.registerElement('x-my-element');
document.createElement('x-my-element').constructor
// function x-my-element() { [native code] }
document.createElement('x-my-element-not-registered').constructor
// function HTMLElement() { [native code] }
</code></pre>

<p>That said, the checker might look like:</p>

<pre><code>var isRegistered = function(name) {
  return document.createElement(name).constructor !== HTMLElement;
}
</code></pre>

<p>Or, with syntactic sugar:</p>

<pre><code>String.prototype.isRegistered = function() { 
  return document.createElement(this).constructor !== HTMLElement; 
}
'x-my-element'.isRegistered()
// true
'xx-my-element'.isRegistered()
// false
</code></pre>

<p>The mostly careful version:</p>

<pre><code>String.prototype.wasRegistered = function() { 
  switch(document.createElement(this).constructor) {
    case HTMLElement: return false; 
    case HTMLUnknownElement: return undefined; 
  }
  return true;
}
'x-my-element'.wasRegistered()
// true
'xx-my-element'.wasRegistered()
// false
'xx'.wasRegistered()
// undefined
</code></pre>

<p>There is no way to access a list of registered elements, AFAIK.</p>

<p>BTW, I still think that the <em>try-catched</em> registration (as proposed by @stephan-muller) suits your needs better.</p>
",Aleksei Matiushkin,Aleksei Matiushkin,1422521201,1422521615,1422521615
http://stackoverflow.com/a/282220/382458,How to get memory usage under Windows in C++,64949,Brian Stewart,,1226439025,1517997520,0,https://stackoverflow.com/questions/282194/how-to-get-memory-usage-under-windows-in-c,"<p>A good starting point would be <a href=""http://msdn.microsoft.com/en-us/library/ms683219.aspx"" rel=""noreferrer"">GetProcessMemoryInfo</a>, which reports various memory info about the specified process. You can pass <code>GetCurrentProcess()</code> as the process handle in order to get information about the calling process.</p>

<p>Probably the <code>WorkingSetSize</code> member of <code>PROCESS_MEMORY_COUNTERS</code> is the closest match to the Mem Usage coulmn in task manager, but it's not going to be exactly the same. I would experiment with the different values to find the one that's closest to your needs.</p>
",Charlie,hmjd,1226439582,1328719062,1328719062
http://stackoverflow.com/a/28223420/324122,How do you test that a Python function throws an exception?,328105,Daryl Spitzer,Aaron Hall,1222286435,1560339044,1422561614,https://stackoverflow.com/questions/129507/how-do-you-test-that-a-python-function-throws-an-exception,"<blockquote>
  <p><strong>How do you test that a Python function throws an exception?</strong></p>
  
  <p>How does one write a test that fails only if a function doesn't throw
  an expected exception?</p>
</blockquote>

<h1>Short Answer:</h1>

<p>Use the <code>self.assertRaises</code> method as a context manager:</p>

<pre><code>    def test_1_cannot_add_int_and_str(self):
        with self.assertRaises(TypeError):
            1 + '1'
</code></pre>

<h1>Demonstration</h1>

<p>The best practice approach is fairly easy to demonstrate in a Python shell. </p>

<p><strong>The <code>unittest</code> library</strong></p>

<p>In Python 2.7 or 3:</p>

<pre><code>import unittest
</code></pre>

<p>In Python 2.6, you can install a backport of 2.7's <code>unittest</code> library, called <a href=""https://pypi.python.org/pypi/unittest2"" rel=""noreferrer"">unittest2</a>, and just alias that as <code>unittest</code>:</p>

<pre><code>import unittest2 as unittest
</code></pre>

<h1>Example tests</h1>

<p>Now, paste into your Python shell the following test of Python's type-safety:</p>

<pre><code>class MyTestCase(unittest.TestCase):
    def test_1_cannot_add_int_and_str(self):
        with self.assertRaises(TypeError):
            1 + '1'
    def test_2_cannot_add_int_and_str(self):
        import operator
        self.assertRaises(TypeError, operator.add, 1, '1')
</code></pre>

<p>Test one uses <code>assertRaises</code> as a context manager, which ensures that the error is properly caught and cleaned up, while recorded. </p>

<p>We could also write it <em>without</em> the context manager, see test two. The first argument would be the error type you expect to raise, the second argument, the function you are testing, and the remaining args and keyword args will be passed to that function. </p>

<p>I think it's far more simple, readable, and maintainable to just to use the context manager.</p>

<h1>Running the tests</h1>

<p>To run the tests:</p>

<pre><code>unittest.main(exit=False)
</code></pre>

<p>In Python 2.6, you'll probably <a href=""https://stackoverflow.com/a/21262077/541136"">need the following</a>:</p>

<pre><code>unittest.TextTestRunner().run(unittest.TestLoader().loadTestsFromTestCase(MyTestCase))
</code></pre>

<p>And your terminal should output the following:</p>

<pre><code>..
----------------------------------------------------------------------
Ran 2 tests in 0.007s

OK
&lt;unittest2.runner.TextTestResult run=2 errors=0 failures=0&gt;
</code></pre>

<p>And we see that as we expect, attempting to add a <code>1</code> and a <code>'1'</code> result in a <code>TypeError</code>.</p>

<hr>

<p>For more verbose output, try this:</p>

<pre><code>unittest.TextTestRunner(verbosity=2).run(unittest.TestLoader().loadTestsFromTestCase(MyTestCase))
</code></pre>
",Aaron Hall,Community,1422561266,1458272140,1495541443
http://stackoverflow.com/a/28302809/1657047,Opening sqlite3 database from python in read-only mode,11192,dsign,,1334738210,1522845184,0,https://stackoverflow.com/questions/10205744/opening-sqlite3-database-from-python-in-read-only-mode,"<p>Workaround for Python 2.x:</p>

<pre><code>fd = os.open(filename, os.O_RDONLY)
c = sqlite3.connect('/dev/fd/%d' % fd)
os.close(fd)
</code></pre>

<p>Not posix, but available on Linux, OS/X and most modern unixes.</p>
",user873942,,1422977816,1422977816,0
http://stackoverflow.com/a/28338123/7829525,Clang Compile error with default initialization,2540,meddle0106,Community,1423119544,1423120807,1495541872,https://stackoverflow.com/questions/28337951/clang-compile-error-with-default-initialization,"<p>You quoted the answer yourself. In the SO answer that you linked, there is the following quote from the standard (section 6.8.6precisely):</p>

<blockquote>
  <p>If a program calls for the default initialization of an object of a
  const-qualified type T, T shall be a class type with a <strong>user-provided</strong>
  default constructor.</p>
</blockquote>

<p>emphasis mine. The line</p>

<pre><code>A() = default;
</code></pre>

<p>obviously does not provide a constructor, it does the opposite by telling the compiler that you don't want to provide one, thus your code doesn't compile. However, once you provide the constructor by uncommenting </p>

<pre><code> A(){}; 
</code></pre>

<p>it works fine. So, to summarize, the error that clang shows is per standard, and the behaviour of gcc is probably a bug.</p>
",SingerOfTheFall,,1423120245,1423120245,0
http://stackoverflow.com/a/28338254/595220,Retrieve the command line arguments of the Python interpreter,664,John Zwinck,Community,1423111795,1423120780,1495541819,https://stackoverflow.com/questions/28336431/retrieve-the-command-line-arguments-of-the-python-interpreter,"<p>You can use ctypes</p>

<pre><code>~$ python2 -B -R -u
Python 2.7.9 (default, Dec 11 2014, 04:42:00) 
[GCC 4.9.2] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
Persistent session history and tab completion are enabled.
&gt;&gt;&gt; import ctypes
&gt;&gt;&gt; argv = ctypes.POINTER(ctypes.c_char_p)()
&gt;&gt;&gt; argc = ctypes.c_int()
&gt;&gt;&gt; ctypes.pythonapi.Py_GetArgcArgv(ctypes.byref(argc), ctypes.byref(argv))
1227013240
&gt;&gt;&gt; argc.value
4
&gt;&gt;&gt; argv[0]
'python2'
&gt;&gt;&gt; argv[1]
'-B'
&gt;&gt;&gt; argv[2]
'-R'
&gt;&gt;&gt; argv[3]
'-u'
</code></pre>
",bav,,1423120780,1423120780,0
http://stackoverflow.com/a/28375339/1468366,Cube using single GL_TRIANGLE_STRIP,4735,MvG,,1423259172,1552462645,0,https://stackoverflow.com/questions/28375338/cube-using-single-gl-triangle-strip,"<p>Yes, after a bit of experimenting I found the answer myself. Imagine the corners of your cube are colored alternatingly black and white. Draw a triangle edge along each face between the two black corners. That way, the diagonals form a tetrahedron inside the cube. For the [0,1] cube, a possible sequence of coordinates would be the following:</p>

<pre><code>Vertex  Triangle    Face
------+-----------+-----
0 0 0
0 1 0
1 0 0  000 010 100  **0
1 1 0  100 010 110  **0
1 1 1  100 110 111  1**
0 1 0  111 110 010  *1*
0 1 1  111 010 011  *1*
0 0 1  011 010 001  0**
1 1 1  011 001 111  **1
1 0 1  111 001 101  **1
1 0 0  111 101 100  1**
0 0 1  100 101 001  *0*
0 0 0  100 001 000  *0*
0 1 0  000 001 010  0**
</code></pre>
",MvG,,1423259172,1423259172,0
http://stackoverflow.com/a/28450002/2726725,change focus to the next input text with angularjs,13293,Karim Oukara,,1423643080,1506519183,0,https://stackoverflow.com/questions/28449622/change-focus-to-the-next-input-text-with-angularjs,"<p>You'd need to use a directive for this:</p>

<pre><code>app.directive(""moveNextOnMaxlength"", function() {
    return {
        restrict: ""A"",
        link: function($scope, element) {
            element.on(""input"", function(e) {
                if(element.val().length == element.attr(""maxlength"")) {
                    var $nextElement = element.next();
                    if($nextElement.length) {
                        $nextElement[0].focus();
                    }
                }
            });
        }
    }
});
</code></pre>

<p>And update your form as follows:</p>

<pre><code>&lt;form&gt;
    &lt;input type=""text"" id=""part1"" ng-model=""myObject.part1"" maxlength=""7"" move-next-on-maxlength /&gt;
    &lt;input type=""text"" id=""part2"" ng-model=""myObject.part2"" maxlength=""12"" move-next-on-maxlength /&gt;
    &lt;input type=""text"" id=""part2"" ng-model=""myObject.part2"" maxlength=""12""/&gt;
&lt;/form&gt;
</code></pre>

<p><a href=""http://jsfiddle.net/z02L5gbx/"">Demo</a></p>

<p>You <em>could</em> move the directive onto the <code>&lt;form&gt;</code> element instead, but the build-int jqLite's <code>find()</code> method will restrict you to only finding elements by tag name. If you're using full jQuery, or can use vanillaJS instead, I would suggest this method.</p>
",CodingIntrigue,,1423644574,1423644574,0
http://stackoverflow.com/a/28457286/7095038,jQuery UI draggable over out event order,1169,kmcc049,kmcc049,1327004988,1423674466,1327008713,https://stackoverflow.com/questions/8932820/jquery-ui-draggable-over-out-event-order,"<p>I had the same problem today, I didn't notice the cause (previous element) before your post, and of course it's a normal behavior.
To resolve my problem I simply put the ""over"" function in a setTimeout with 0 ms, so the ""over"" function is pushed in task queue and executed after the ""out"" function.</p>

<p>A great talk from Philip Roberts to understand this mechanism : <a href=""http://vimeo.com/96425312"" rel=""nofollow"">http://vimeo.com/96425312</a></p>

<p>[EDIT]
Example : <a href=""http://jsbin.com/rizuse/1/edit?html,js,output"" rel=""nofollow"">http://jsbin.com/rizuse/1/edit?html,js,output</a></p>
",tricky21,tricky21,1423666267,1423674466,1423674466
http://stackoverflow.com/a/28507806/5430,How can I mock requests and the response?,114948,kk1957,Martin Thoma,1364857313,1559900813,1526391417,https://stackoverflow.com/questions/15753390/how-can-i-mock-requests-and-the-response,"<p>This is how you can do it (you can run this file as-is):</p>

<pre><code>import requests
import unittest
from unittest import mock

# This is the class we want to test
class MyGreatClass:
    def fetch_json(self, url):
        response = requests.get(url)
        return response.json()

# This method will be used by the mock to replace requests.get
def mocked_requests_get(*args, **kwargs):
    class MockResponse:
        def __init__(self, json_data, status_code):
            self.json_data = json_data
            self.status_code = status_code

        def json(self):
            return self.json_data

    if args[0] == 'http://someurl.com/test.json':
        return MockResponse({""key1"": ""value1""}, 200)
    elif args[0] == 'http://someotherurl.com/anothertest.json':
        return MockResponse({""key2"": ""value2""}, 200)

    return MockResponse(None, 404)

# Our test case class
class MyGreatClassTestCase(unittest.TestCase):

    # We patch 'requests.get' with our own method. The mock object is passed in to our test case method.
    @mock.patch('requests.get', side_effect=mocked_requests_get)
    def test_fetch(self, mock_get):
        # Assert requests.get calls
        mgc = MyGreatClass()
        json_data = mgc.fetch_json('http://someurl.com/test.json')
        self.assertEqual(json_data, {""key1"": ""value1""})
        json_data = mgc.fetch_json('http://someotherurl.com/anothertest.json')
        self.assertEqual(json_data, {""key2"": ""value2""})
        json_data = mgc.fetch_json('http://nonexistenturl.com/cantfindme.json')
        self.assertIsNone(json_data)

        # We can even assert that our mocked method was called with the right parameters
        self.assertIn(mock.call('http://someurl.com/test.json'), mock_get.call_args_list)
        self.assertIn(mock.call('http://someotherurl.com/anothertest.json'), mock_get.call_args_list)

        self.assertEqual(len(mock_get.call_args_list), 3)

if __name__ == '__main__':
    unittest.main()
</code></pre>

<p><strong>Important Note:</strong> If your <code>MyGreatClass</code> class lives in a different package, say <code>my.great.package</code>, you have to mock <code>my.great.package.requests.get</code> instead of just 'request.get'. In that case your test case would look like this:</p>

<pre><code>import unittest
from unittest import mock
from my.great.package import MyGreatClass

# This method will be used by the mock to replace requests.get
def mocked_requests_get(*args, **kwargs):
    # Same as above


class MyGreatClassTestCase(unittest.TestCase):

    # Now we must patch 'my.great.package.requests.get'
    @mock.patch('my.great.package.requests.get', side_effect=mocked_requests_get)
    def test_fetch(self, mock_get):
        # Same as above

if __name__ == '__main__':
    unittest.main()
</code></pre>

<p>Enjoy!</p>
",Johannes Fahrenkrug,Johannes Fahrenkrug,1423857650,1493823639,1493823639
http://stackoverflow.com/a/2855946/316944,Validating email addresses using jQuery and regex,418491,RussP,alex,1274174199,1562161594,1490106294,https://stackoverflow.com/questions/2855865/validating-email-addresses-using-jquery-and-regex,"<h1>UPDATES</h1>

<ul>
<li><a href=""http://so.lucafilosofi.com/jquery-validate-e-mail-address-regex/"" rel=""noreferrer"">http://so.lucafilosofi.com/jquery-validate-e-mail-address-regex/</a></li>
<li>using new regex </li>
<li>added support for <a href=""http://en.wikipedia.org/wiki/Email_address#Address_tags"" rel=""noreferrer"">Address tags</a> (+ sign)</li>
</ul>

<hr>

<pre><code>function isValidEmailAddress(emailAddress) {
    var pattern = /^([a-z\d!#$%&amp;'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&amp;'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|""((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?"")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
    return pattern.test(emailAddress);
}
</code></pre>

<hr>

<pre><code>if( !isValidEmailAddress( emailaddress ) ) { /* do stuff here */ }
</code></pre>

<ul>
<li><strong>NOTE:</strong> <a href=""https://stackoverflow.com/questions/201323/what-is-the-best-regular-expression-for-validating-email-addresses"">keep in mind that no 100% regex</a> email check exists!</li>
</ul>
",Luca Filosofi,Luca Filosofi,1274174883,1524937023,1524937023
http://stackoverflow.com/a/28565320/1199911,How can I loop through Exception getCause() to find root cause with detail message,69735,agpt,agpt,1374240056,1553627224,1464755263,https://stackoverflow.com/questions/17747175/how-can-i-loop-through-exception-getcause-to-find-root-cause-with-detail-messa,"<p>I normally use the implementation below instead of Apache's one.
<P>Besides its complexity, Apache's implementation returns null when no cause is found, which force me to perform an additional check for null.
<p>Normally when looking for an exception's root/cause I already have a non-null exception to start with, which is for all intended proposes is the cause of the failure at hand, if a deeper cause can't be found.   </p>

<pre><code>Throwable getCause(Throwable e) {
    Throwable cause = null; 
    Throwable result = e;

    while(null != (cause = result.getCause())  &amp;&amp; (result != cause) ) {
        result = cause;
    }
    return result;
}
</code></pre>
",Legna,Legna,1424187950,1553092581,1553092581
http://stackoverflow.com/a/28570677/315168,py.test: Pass a parameter to a fixture function,49731,maggie,Mel,1375431106,1553765434,1466509057,https://stackoverflow.com/questions/18011902/py-test-pass-a-parameter-to-a-fixture-function,"<p>I had a similar problem--I have a fixture called <code>test_package</code>, and I later wanted to be able to pass an optional argument to that fixture when running it in specific tests.  For example:</p>

<pre><code>@pytest.fixture()
def test_package(request, version='1.0'):
    ...
    request.addfinalizer(fin)
    ...
    return package
</code></pre>

<p>(It doesn't matter for these purposes what the fixture does or what type of object the returned <code>package</code>) is.</p>

<p>It would then be desirable to somehow use this fixture in a test function in such a way that I can also specify the <code>version</code> argument to that fixture to use with that test.  This is currently not possible, though might make a nice feature.</p>

<p>In the meantime it was easy enough to make my fixture simply return a <em>function</em> that does all the work the fixture previously did, but allows me to specify the <code>version</code> argument:</p>

<pre><code>@pytest.fixture()
def test_package(request):
    def make_test_package(version='1.0'):
        ...
        request.addfinalizer(fin)
        ...
        return test_package

    return make_test_package
</code></pre>

<p>Now I can use this in my test function like:</p>

<pre><code>def test_install_package(test_package):
    package = test_package(version='1.1')
    ...
    assert ...
</code></pre>

<p>and so on.</p>

<p>The OP's attempted solution was headed in the right direction, and as @hpk42's <a href=""https://stackoverflow.com/a/18098713/982257"">answer</a> suggests, the <code>MyTester.__init__</code> could just store off a reference to the request like:</p>

<pre><code>class MyTester(object):
    def __init__(self, request, arg=[""var0"", ""var1""]):
        self.request = request
        self.arg = arg
        # self.use_arg_to_init_logging_part()

    def dothis(self):
        print ""this""

    def dothat(self):
        print ""that""
</code></pre>

<p>Then use this to implement the fixture like:</p>

<pre><code>@pytest.fixture()
def tester(request):
    """""" create tester object """"""
    # how to use the list below for arg?
    _tester = MyTester(request)
    return _tester
</code></pre>

<p>If desired the <code>MyTester</code> class could be restructured a bit so that its <code>.args</code> attribute can be updated after it has been created, to tweak the behavior for individual tests.</p>
",Iguananaut,Community,1424205400,1424205400,1495540032
http://stackoverflow.com/a/28584090/613428,Python&#39;s `email.message.as_string` encodes some parts as base64; unclear why,2149,equaeghe,equaeghe,1416783279,1424263704,1424260340,https://stackoverflow.com/questions/27095403/pythons-email-message-as-string-encodes-some-parts-as-base64-unclear-why,"<p>Use <code>as_bytes</code> instead. So change your print to:</p>

<p><code>print(msg.as_bytes().decode(encoding='UTF-8'))</code></p>

<p>reason is in policy documentation 
<a href=""https://docs.python.org/3.4/library/email.policy.html#module-email.policy"" rel=""nofollow"">https://docs.python.org/3.4/library/email.policy.html#module-email.policy</a></p>

<p>A cte_type value of 8bit only works with BytesGenerator, not Generator, because strings cannot contain binary data. If a Generator is operating under a policy that specifies cte_type=8bit, it will act as if cte_type is 7bit.</p>

<p>And as_string use Generator, but as_bytes use BytesGenerator which you need</p>
",farincz,,1424263704,1424263704,0
http://stackoverflow.com/a/28611214/4521584,How to convert preg_replace with pattern in array into preg_replace_callback?,948,e-ghost,e-ghost,1424284209,1426932819,1424610825,https://stackoverflow.com/questions/28591171/how-to-convert-preg-replace-with-pattern-in-array-into-preg-replace-callback,"<p>Calling <a href=""http://php.net/manual/en/function.preg-replace-callback.php"" rel=""nofollow""><code>preg_replace_callback()</code></a> with an array of search strings is possible only when there is a single replacement for them (when the parameter <code>$replacement</code> of the call to <a href=""http://php.net/manual/en/function.preg-replace.php"" rel=""nofollow""><code>preg_replace()</code></a> you want to replace is a string, not an array). This is because the parameter provided to the callback does not contain any information about which of the search strings produced the match for which the callback is invoked.</p>

<p>Because your replacements depend on the search string, I suggest you to do each replacement using a new call to <code>preg_replace_callback()</code>. This way you need to write individual functions for each set of search/replacement strings.</p>

<p>The callback function receives as parameter the array of matches (the same array that is filled by <code>preg_match()</code> when received as its third argument). Use the <code>use</code> language construct (as explained in the third example on the documentation page about <a href=""http://php.net/manual/en/functions.anonymous.php"" rel=""nofollow""><code>anonymous functions</code></a> to let the callback know about the value of variable <code>$allowimgcode</code>:</p>

<pre><code>$message = preg_replace_callback(
    ""/\[img\]\s*([^\[\&lt;\r\n]+?)\s*\[\/img\]/is"",
    function (array $matches) use ($allowimgcode) {
        if ($allowimgmode) {
            return bbcode($matches[1], '&lt;img src=""%s"" border=""0"" onclick=""zoom(this, this.src)"" onload=""attachimg(this, \'load\')"" alt="""" /&gt;');
        } else {
            return bbcode($matches[1], '&lt;a href=""%s"" target=""_blank""&gt;%s&lt;/a&gt;');
        }
    }
    $message,
);
</code></pre>

<p>If there are many search/replacement pairs then you can organize the search together with the replacement functions into a list (and use separate callbacks for each scenario). The code is cleaner this way:</p>

<pre><code>// The search strings and their alternate replacements
$replacements = array(
    array(
        // The search regex
        'search' =&gt; ""/\[img\]\s*([^\[\&lt;\r\n]+?)\s*\[\/img\]/is"",
        // The callback when $allowimgcode is TRUE
        'images' =&gt; function (array $matches) {
            return bbcode($matches[1], '&lt;img src=""%s"" border=""0"" onclick=""zoom(this, this.src)"" onload=""attachimg(this, \'load\')"" alt="""" /&gt;');
        },
        // The callback when $allowimgcode is FALSE
        'noimgs' =&gt; function (array $matches) {
            return bbcode($matches[1], '&lt;a href=""%s"" target=""_blank""&gt;%s&lt;/a&gt;');
        },
    ),
    array(
        'search' =&gt; ""/\[img=(\d{1,4})[x|\,](\d{1,4})\]\s*([^\[\&lt;\r\n]+?)\s*\[\/img\]/is"",
        'images' =&gt; function (array $matches) {
            return bbcode($matches[3], '&lt;img width=""'.$matches[1].'"" height=""'.$matches[2].'"" src=""%s"" border=""0"" alt="""" /&gt;');
        },
        'noimgs' =&gt; function (array $matches) {
            return bbcode($matches[3], '&lt;a href=""%s"" target=""_blank""&gt;%s&lt;/a&gt;');
        },
    ),
);
</code></pre>

<p>Then do the replacements one by one, in a loop:</p>

<pre><code>foreach ($replacements as $set) {
    $message = preg_replace_callback(
        $set['search'],
        // select the correct replacement callback depending on $allowimgcode
        $allowimgcode ? $set['images'] : $set['noimgs'], 
        $message
    );
}
</code></pre>
",axiac,,1424362337,1424362337,0
http://stackoverflow.com/a/2861125/3474,How can I hash a password in Java?,137216,Chris Dutrow,durron597,1274214916,1552174159,1438267478,https://stackoverflow.com/questions/2860943/how-can-i-hash-a-password-in-java,"<p>You can actually use a facility built in to the Java runtime to do this. The SunJCE in Java 6 supports PBKDF2, which is a good algorithm to use for password hashing.</p>

<pre><code>byte[] salt = new byte[16];
random.nextBytes(salt);
KeySpec spec = new PBEKeySpec(""password"".toCharArray(), salt, 65536, 128);
SecretKeyFactory f = SecretKeyFactory.getInstance(""PBKDF2WithHmacSHA1"");
byte[] hash = f.generateSecret(spec).getEncoded();
Base64.Encoder enc = Base64.getEncoder();
System.out.printf(""salt: %s%n"", enc.encodeToString(salt));
System.out.printf(""hash: %s%n"", enc.encodeToString(hash));
</code></pre>

<p>Here's a utility class that you can use for PBKDF2 password authentication:</p>

<pre><code>import java.security.NoSuchAlgorithmException;
import java.security.SecureRandom;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.KeySpec;
import java.util.Arrays;
import java.util.Base64;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;

/**
 * Hash passwords for storage, and test passwords against password tokens.
 * 
 * Instances of this class can be used concurrently by multiple threads.
 *  
 * @author erickson
 * @see &lt;a href=""http://stackoverflow.com/a/2861125/3474""&gt;StackOverflow&lt;/a&gt;
 */
public final class PasswordAuthentication
{

  /**
   * Each token produced by this class uses this identifier as a prefix.
   */
  public static final String ID = ""$31$"";

  /**
   * The minimum recommended cost, used by default
   */
  public static final int DEFAULT_COST = 16;

  private static final String ALGORITHM = ""PBKDF2WithHmacSHA1"";

  private static final int SIZE = 128;

  private static final Pattern layout = Pattern.compile(""\\$31\\$(\\d\\d?)\\$(.{43})"");

  private final SecureRandom random;

  private final int cost;

  public PasswordAuthentication()
  {
    this(DEFAULT_COST);
  }

  /**
   * Create a password manager with a specified cost
   * 
   * @param cost the exponential computational cost of hashing a password, 0 to 30
   */
  public PasswordAuthentication(int cost)
  {
    iterations(cost); /* Validate cost */
    this.cost = cost;
    this.random = new SecureRandom();
  }

  private static int iterations(int cost)
  {
    if ((cost &lt; 0) || (cost &gt; 30))
      throw new IllegalArgumentException(""cost: "" + cost);
    return 1 &lt;&lt; cost;
  }

  /**
   * Hash a password for storage.
   * 
   * @return a secure authentication token to be stored for later authentication 
   */
  public String hash(char[] password)
  {
    byte[] salt = new byte[SIZE / 8];
    random.nextBytes(salt);
    byte[] dk = pbkdf2(password, salt, 1 &lt;&lt; cost);
    byte[] hash = new byte[salt.length + dk.length];
    System.arraycopy(salt, 0, hash, 0, salt.length);
    System.arraycopy(dk, 0, hash, salt.length, dk.length);
    Base64.Encoder enc = Base64.getUrlEncoder().withoutPadding();
    return ID + cost + '$' + enc.encodeToString(hash);
  }

  /**
   * Authenticate with a password and a stored password token.
   * 
   * @return true if the password and token match
   */
  public boolean authenticate(char[] password, String token)
  {
    Matcher m = layout.matcher(token);
    if (!m.matches())
      throw new IllegalArgumentException(""Invalid token format"");
    int iterations = iterations(Integer.parseInt(m.group(1)));
    byte[] hash = Base64.getUrlDecoder().decode(m.group(2));
    byte[] salt = Arrays.copyOfRange(hash, 0, SIZE / 8);
    byte[] check = pbkdf2(password, salt, iterations);
    int zero = 0;
    for (int idx = 0; idx &lt; check.length; ++idx)
      zero |= hash[salt.length + idx] ^ check[idx];
    return zero == 0;
  }

  private static byte[] pbkdf2(char[] password, byte[] salt, int iterations)
  {
    KeySpec spec = new PBEKeySpec(password, salt, iterations, SIZE);
    try {
      SecretKeyFactory f = SecretKeyFactory.getInstance(ALGORITHM);
      return f.generateSecret(spec).getEncoded();
    }
    catch (NoSuchAlgorithmException ex) {
      throw new IllegalStateException(""Missing algorithm: "" + ALGORITHM, ex);
    }
    catch (InvalidKeySpecException ex) {
      throw new IllegalStateException(""Invalid SecretKeyFactory"", ex);
    }
  }

  /**
   * Hash a password in an immutable {@code String}. 
   * 
   * &lt;p&gt;Passwords should be stored in a {@code char[]} so that it can be filled 
   * with zeros after use instead of lingering on the heap and elsewhere.
   * 
   * @deprecated Use {@link #hash(char[])} instead
   */
  @Deprecated
  public String hash(String password)
  {
    return hash(password.toCharArray());
  }

  /**
   * Authenticate with a password in an immutable {@code String} and a stored 
   * password token. 
   * 
   * @deprecated Use {@link #authenticate(char[],String)} instead.
   * @see #hash(String)
   */
  @Deprecated
  public boolean authenticate(String password, String token)
  {
    return authenticate(password.toCharArray(), token);
  }

}
</code></pre>
",erickson,erickson,1274216300,1508794919,1508794919
http://stackoverflow.com/a/28731847/2521354,How can I keep bootstrap popover alive while the popover is being hovered?,83553,vikas devde,Doorknob,1365867744,1556820289,1378125686,https://stackoverflow.com/questions/15989591/how-can-i-keep-bootstrap-popover-alive-while-the-popover-is-being-hovered,"<p>The chosen answer <em>works</em> but will fail if the popover is initialized with the <code>body</code> as the container.</p>

<pre><code>$('a').popover({ container: 'body' });
</code></pre>

<p>A solution based on the chosen answer is the following code that needs to be placed before using the popover.</p>

<pre><code>var originalLeave = $.fn.popover.Constructor.prototype.leave;
$.fn.popover.Constructor.prototype.leave = function(obj) {
    var self = obj instanceof this.constructor ? obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type);
    originalLeave.call(this, obj);

    if (obj.currentTarget) {
        self.$tip.one('mouseenter', function() {
            clearTimeout(self.timeout);
            self.$tip.one('mouseleave', function() {
                $.fn.popover.Constructor.prototype.leave.call(self, self);
            });
        })
    }
};
</code></pre>

<p>The change is minimal using <code>self.$tip</code> instead of traversing the DOM expecting the popover to be always a siblings of the element.</p>
",Rubens Mariuzzo,,1424907408,1424907408,0
http://stackoverflow.com/a/28748160/1838811,React &quot;after render&quot; code?,230895,Oscar Godson,Oscar Godson,1414185576,1561890104,1414186866,https://stackoverflow.com/questions/26556436/react-after-render-code,"<p>One drawback of using <code>componentDidUpdate</code>, or <code>componentDidMount</code> is that they are actually executed before the dom elements are done being drawn, but after they've been passed from React to the browser's DOM.</p>

<p>Say for example if you needed set node.scrollHeight to the rendered node.scrollTop, then React's DOM elements may not be enough. You need to wait until the elements are done being painted to get their height.</p>

<p>Solution:</p>

<p>Use <code>requestAnimationFrame</code> to ensure that your code is run after the painting of  your newly rendered object </p>

<pre><code>scrollElement: function() {
  //store a this ref, and
  var _this = this;
  //wait for a paint to do scrolly stuff
  window.requestAnimationFrame(function() {
    var node = _this.getDOMNode();
    if (node !== undefined) {
      //and scroll them!
      node.scrollTop = node.scrollHeight;
    }
  });
},
componentDidMount: function() {
  this.scrollElement();
},
// and or
componentDidUpdate: function() {
  this.scrollElement();
},
// and or
render: function() {
  this.scrollElement()
  return [...]
</code></pre>
",Graham P Heath,Graham P Heath,1424969533,1434555609,1434555609
http://stackoverflow.com/a/28748285/624544,Retrieving user information with a oauth token from the office365 oauth api,3417,Talus,Talus,1424950199,1457645165,1424960391,https://stackoverflow.com/questions/28741270/retrieving-user-information-with-a-oauth-token-from-the-office365-oauth-api,"<p>Have you looked at the identity token that comes back from your token request? This might have all the info you want, and you already have it so no need to make a second request.</p>

<p>Here's a <a href=""https://github.com/jasonjoh/php-calendar"" rel=""nofollow"">sample</a> that (among other things) parses the identity token to get the user's display name. Check the <code>getUserName</code> function in <a href=""https://github.com/jasonjoh/php-calendar/blob/master/o365/Office365Service.php"" rel=""nofollow"">Office365Service.php</a>:</p>

<pre><code>// Parses an ID token returned from Azure to get the user's
// display name.
public static function getUserName($id_token) {
  $token_parts = explode(""."", $id_token);

  // First part is header, which we ignore
  // Second part is JWT, which we want to parse
  error_log(""getUserName found id token: "".$token_parts[1]);

  // First, in case it is url-encoded, fix the characters to be 
  // valid base64
  $encoded_token = str_replace('-', '+', $token_parts[1]);
  $encoded_token = str_replace('_', '/', $encoded_token);
  error_log(""After char replace: "".$encoded_token);

  // Next, add padding if it is needed.
  switch (strlen($encoded_token) % 4){
    case 0:
      // No pad characters needed.
      error_log(""No padding needed."");
      break;
    case 2:
      $encoded_token = $encoded_token.""=="";
      error_log(""Added 2: "".$encoded_token);
      break;
    case 3:
      $encoded_token = $encoded_token.""="";
      error_log(""Added 1: "".$encoded_token);
      break;
    default:
      // Invalid base64 string!
      error_log(""Invalid base64 string"");
      return null;
  }

  $json_string = base64_decode($encoded_token);
  error_log(""Decoded token: "".$json_string);
  $jwt = json_decode($json_string, true);
  error_log(""Found user name: "".$jwt['name']);
  return $jwt['name'];
}
</code></pre>
",Jason Johnston,Jason Johnston,1424969896,1424970595,1424970595
http://stackoverflow.com/a/28779982/438249,How to join the stdout of two subprocesses and pipe to stdin of new subprocess in python,841,Marco Albuquerque,Marco Albuquerque,1425072937,1425125650,1425074385,https://stackoverflow.com/questions/28774716/how-to-join-the-stdout-of-two-subprocesses-and-pipe-to-stdin-of-new-subprocess-i,"<p>If you already have the shell command in the string then you could just  run it as is:</p>

<pre><code>#!/usr/bin/env python
from subprocess import check_call

check_call(r""""""
{ 
samtools view -HS header.sam;           # command1
samtools view input.bam 1:1-50000000;   # command2
} | samtools view -bS - &gt; output.bam    # command3
"""""", shell=True)
</code></pre>

<p>To emulate the pipeline in Python:</p>

<pre><code>#!/usr/bin/env python
from subprocess import Popen, PIPE

# start command3 to get stdin pipe, redirect output to the file
with open('output.bam', 'wb', 0) as output_file:
    command3 = Popen(""samtools view -bS -"".split(), 
                     stdin=PIPE, stdout=output_file)
# start command1 with its stdout redirected to command3 stdin
command1 = Popen('samtools view -HS header.sam'.split(),
                 stdout=command3.stdin)
rc_command1 = command1.wait() #NOTE: command3.stdin is not closed, no SIGPIPE or a write error if command3 dies
# start command2 after command1 finishes
command2 = Popen('samtools view input.bam 1:1-50000000'.split(),
                 stdout=command3.stdin)
command3.stdin.close() # inform command2 if command3 dies (SIGPIPE or a write error)
rc_command2 = command2.wait()
rc_command3 = command3.wait()
</code></pre>
",jfs,,1425114318,1425114318,0
http://stackoverflow.com/a/287944/1195812,How to print colored text in terminal in Python?,1003149,aboSamoor,Sukumar Rdjf,1226602690,1561611197,1556104634,https://stackoverflow.com/questions/287871/how-to-print-colored-text-in-terminal-in-python,"<p>This somewhat depends on what platform you are on. The most common way to do this is by printing ANSI escape sequences. For a simple example, here's some python code from the <a href=""https://svn.blender.org/svnroot/bf-blender/trunk/blender/build_files/scons/tools/bcolors.py"" rel=""noreferrer"">blender build scripts</a>:</p>

<pre><code>class bcolors:
    HEADER = '\033[95m'
    OKBLUE = '\033[94m'
    OKGREEN = '\033[92m'
    WARNING = '\033[93m'
    FAIL = '\033[91m'
    ENDC = '\033[0m'
    BOLD = '\033[1m'
    UNDERLINE = '\033[4m'
</code></pre>

<p>To use code like this, you can do something like </p>

<pre><code>print bcolors.WARNING + ""Warning: No active frommets remain. Continue?"" 
      + bcolors.ENDC
</code></pre>

<p>This will work on unixes including OS X, linux and windows (provided you use <a href=""https://github.com/adoxa/ansicon"" rel=""noreferrer"">ANSICON</a>, or in Windows 10 provided you enable <a href=""https://msdn.microsoft.com/en-us/library/mt638032"" rel=""noreferrer"">VT100 emulation</a>). There are ansi codes for setting the color, moving the cursor, and more.</p>

<p>If you are going to get complicated with this (and it sounds like you are if you are writing a game), you should look into the ""curses"" module, which handles a lot of the complicated parts of this for you. The <a href=""http://docs.python.org/howto/curses.html"" rel=""noreferrer"" title=""Python Curses howto"">Python Curses HowTO</a> is a good introduction.</p>

<p>If you are not using extended ASCII (i.e. not on a PC), you are stuck with the ascii characters below 127, and '#' or '@' is probably your best bet for a block. If you can ensure your terminal is using a IBM <a href=""http://telecom.tbi.net/asc-ibm.html"" rel=""noreferrer"">extended ascii character set</a>, you have many more options. Characters 176, 177, 178 and 219 are the ""block characters"".</p>

<p>Some modern text-based programs, such as ""Dwarf Fortress"", emulate text mode in a graphical mode, and use images of the classic PC font. You can find some of these bitmaps that you can use on the <a href=""http://dwarffortresswiki.org/DF2014:Tilesets"" rel=""noreferrer"">Dwarf Fortress Wiki</a> see (<a href=""http://dwarffortresswiki.org/Tileset_repository"" rel=""noreferrer"">user-made tilesets</a>).</p>

<p>The <a href=""http://en.wikipedia.org/wiki/TMDC"" rel=""noreferrer"" title=""text mode demo contest"">Text Mode Demo Contest</a> has more resources for doing graphics in text mode.</p>

<p>Hmm.. I think got a little carried away on this answer. I am in the midst of planning an epic text-based adventure game, though. Good luck with your colored text!</p>
",joeld,eryksun,1226604307,1472774495,1472774495
http://stackoverflow.com/a/2880929/35070,How can I get query string values in JavaScript?,3463742,Kemal Emin,Brad Larson,1243066248,1555321091,1428368108,https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript,"<p>Some of the solutions posted here are inefficient. Repeating the regular expression search every time the script needs to access a parameter is completely unnecessary, one single function to split up the parameters into an associative-array style object is enough. If you're not working with the HTML 5 History API, this is only necessary once per page load.  The other suggestions here also fail to decode the URL correctly.</p>

<pre><code>var urlParams;
(window.<a href=""https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate"" rel=""noreferrer"">onpopstate</a> = function () {
    var match,
        pl     = /\+/g,  // Regex for replacing addition symbol with a space
        search = /([^&=]+)=?([^&]*)/g,
        decode = function (s) { return <a href=""https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent"" rel=""noreferrer"">decodeURIComponent</a>(s.replace(pl, "" "")); },
        query  = window.<a href=""https://developer.mozilla.org/en-US/docs/DOM/window.location"" rel=""noreferrer"">location</a>.search.<a href=""https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring"" rel=""noreferrer"">substring</a>(1);

    urlParams = {};
    while (match = search.<a href=""https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec"" rel=""noreferrer"">exec</a>(query))
       urlParams[decode(match[1])] = decode(match[2]);
})();</code></pre>

<p>Example querystring: </p>

<blockquote>
  <p><code>?i=main&amp;mode=front&amp;sid=de8d49b78a85a322c4155015fdce22c4&amp;enc=+Hello%20&amp;empty</code></p>
</blockquote>

<p>Result:</p>

<pre class=""lang-js prettyprint-override""><code> urlParams = {
    enc: "" Hello "",
    i: ""main"",
    mode: ""front"",
    sid: ""de8d49b78a85a322c4155015fdce22c4"",
    empty: """"
}

alert(urlParams[""mode""]);
// -&gt; ""front""

alert(""empty"" in urlParams);
// -&gt; true
</code></pre>

<p>This could easily be improved upon to handle array-style query strings too.  An example of this is <a href=""http://jsbin.com/adali3/2"" rel=""noreferrer"">here</a>, but since array-style parameters aren't defined in <a href=""http://tools.ietf.org/html/rfc3986"" rel=""noreferrer"">RFC 3986</a> I won't pollute this answer with the source code. <a href=""https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript/23401756#23401756"">For those interested in a ""polluted"" version, look at campbeln's answer below</a>.</p>

<p>Also, as pointed out in the comments, <code>;</code> is a legal delimiter for <code>key=value</code> pairs.  It would require a more complicated regex to handle <code>;</code> or <code>&amp;</code>, which I think is unnecessary because it's rare that <code>;</code> is used and I would say even more unlikely that both would be used.  If you need to support <code>;</code> instead of <code>&amp;</code>, just swap them in the regex.</p>

<p><hr /> 
If you're using a server-side preprocessing language, you might want to use its native JSON functions to do the heavy lifting for you.  For example, in PHP you can write:</p>

<pre><code>&lt;script>var urlParams = &lt;?php echo <a href=""http://php.net/manual/en/function.json-encode.php"" rel=""noreferrer"">json_encode</a>($_GET, JSON_HEX_TAG);?>;&lt;/script></code></pre>

<p>Much simpler!</p>
",Andy E,Community,1274434156,1448180977,1495541910
http://stackoverflow.com/a/2881008/187954,Detect inline/block type of a DOM element,7558,abernier,Mohsen Nosratinia,1274434444,1431095120,1431095120,https://stackoverflow.com/questions/2880957/detect-inline-block-type-of-a-dom-element,"<p>You can go with <a href=""https://developer.mozilla.org/en/DOM/window.getComputedStyle"" rel=""noreferrer""><code>getComputedStyle()</code></a> and <a href=""http://msdn.microsoft.com/en-us/library/ms535231(VS.85).aspx"" rel=""noreferrer""><code>currentStyle</code></a> to get the calculated styles for an element.  This should do it:</p>

<pre><code>function getDisplayType (element) {
    var cStyle = element.currentStyle || window.getComputedStyle(element, """"); 
    return cStyle.display;
}
</code></pre>

<p>To be a little clearer, computed styles contain values for every style property, even for those that don't have a style property set.  Those values will be the default value so in the case of an unstyled <code>&lt;a&gt;</code> element, <code>display</code> will return <code>inline</code>:</p>

<pre><code>function getElementDefaultDisplay(tag) {
    var cStyle,
        t = document.createElement(tag),
        gcs = ""getComputedStyle"" in window;

    document.body.appendChild(t);
    cStyle = (gcs ? window.getComputedStyle(t, """") : t.currentStyle).display; 
    document.body.removeChild(t);

    return cStyle;
}
</code></pre>

<p>Tested in latest Firefox, Chrome and IE7/IE8.  </p>

<p>Results:</p>

<blockquote>
<pre><code>&gt; getElementDefaultDisplay(""a"")
inline
&gt; getElementDefaultDisplay(""div"")
block
</code></pre>
</blockquote>

<p><strong>Update:</strong> edited to give preference to standards compliance/<code>getComputedStyle()</code> in IE9, which supports both methods.</p>
",Andy E,Andy E,1274434905,1298045069,1298045069
http://stackoverflow.com/a/2881533/1325798,ArrayAccess multidimensional (un)set?,4536,anomareh,,1274439582,1457772730,0,https://stackoverflow.com/questions/2881431/arrayaccess-multidimensional-unset,"<p>The problem <strong>could be</strong> resolved by changing <code>public function offsetGet($name)</code> to <code>public function &amp;offsetGet($name)</code> (by adding return by reference), <strong>but</strong> it will cause Fatal Error (""<em>Declaration of ArrayTest::offsetGet() must be compatible with that of ArrayAccess::offsetGet()</em>"").</p>

<p>PHP authors screwed up with this class some time ago and now they <a href=""http://bugs.php.net/bug.php?id=32983"" rel=""noreferrer"">won't change it in sake of backwards compatibility</a>:</p>

<blockquote>
  <p>We found out that this is not solvable
  without blowing up the interface and
  creating a BC or providing an
  additional interface to support
  references and thereby creating an
  internal nightmare - actually i don't
  see a way we can make that work ever.
  Thus we decided to enforce the
  original design and disallow
  references completley.</p>
</blockquote>

<p><strong>Edit:</strong> If you still need that functionality, I'd suggest using magic method instead (<code>__get()</code>, <code>__set()</code>, etc.), because <code>__get()</code> returns value by reference. This will change syntax to something like this:</p>

<pre><code>$arrTest-&gt;test['bar'] = 5;
</code></pre>

<p>Not an ideal solution of course, but I can't think of a better one.</p>

<p><strong>Update:</strong> This problem was <a href=""http://php.net/manual/en/arrayaccess.offsetget.php"" rel=""noreferrer"">fixed in PHP 5.3.4</a> and ArrayAccess now works as expected:</p>

<blockquote>
  <p>Starting with PHP 5.3.4, the prototype checks were relaxed and it's possible for implementations of this method to return by reference. This makes indirect modifications to the overloaded array dimensions of ArrayAccess objects possible.</p>
</blockquote>
",Alexander Konstantinov,Alexander Konstantinov,1274440605,1377617633,1377617633
http://stackoverflow.com/a/28838834/115145,How to properly highlight selected item on RecyclerView?,158674,user65721,Morteza Jalambadani,1417198417,1559051243,1538207711,https://stackoverflow.com/questions/27194044/how-to-properly-highlight-selected-item-on-recyclerview,"<p>I wrote a base adapter class to automatically handle item selection with a RecyclerView. Just derive your adapter from it and use drawable state lists with state_selected, like you would do with a list view.  </p>

<p>I have a <a href=""http://innodroid.com/blog/post/tracking-selected-item-in-recyclerview"" rel=""noreferrer"">Blog Post Here</a> about it, but here is the code:</p>

<pre><code>public abstract class TrackSelectionAdapter&lt;VH extends TrackSelectionAdapter.ViewHolder&gt; extends RecyclerView.Adapter&lt;VH&gt; {
    // Start with first item selected
    private int focusedItem = 0;

    @Override
    public void onAttachedToRecyclerView(final RecyclerView recyclerView) {
        super.onAttachedToRecyclerView(recyclerView);

        // Handle key up and key down and attempt to move selection
        recyclerView.setOnKeyListener(new View.OnKeyListener() {
            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                RecyclerView.LayoutManager lm = recyclerView.getLayoutManager();

                // Return false if scrolled to the bounds and allow focus to move off the list
                if (event.getAction() == KeyEvent.ACTION_DOWN) {
                    if (keyCode == KeyEvent.KEYCODE_DPAD_DOWN) {
                        return tryMoveSelection(lm, 1);
                    } else if (keyCode == KeyEvent.KEYCODE_DPAD_UP) {
                        return tryMoveSelection(lm, -1);
                    }
                }

                return false;
            }
        });
    }

    private boolean tryMoveSelection(RecyclerView.LayoutManager lm, int direction) {
        int tryFocusItem = focusedItem + direction;

        // If still within valid bounds, move the selection, notify to redraw, and scroll
        if (tryFocusItem &gt;= 0 &amp;&amp; tryFocusItem &lt; getItemCount()) {
            notifyItemChanged(focusedItem);
            focusedItem = tryFocusItem;
            notifyItemChanged(focusedItem);
            lm.scrollToPosition(focusedItem);
            return true;
        }

        return false;
    }

    @Override
    public void onBindViewHolder(VH viewHolder, int i) {
        // Set selected state; use a state list drawable to style the view
        viewHolder.itemView.setSelected(focusedItem == i);
    }

    public class ViewHolder extends RecyclerView.ViewHolder {
        public ViewHolder(View itemView) {
            super(itemView);

            // Handle item click and set the selection
            itemView.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // Redraw the old selection and the new
                    notifyItemChanged(focusedItem);
                    focusedItem = getLayoutPosition();
                    notifyItemChanged(focusedItem);
                }
            });
        }
    }
} 
</code></pre>
",Greg Ennis,Greg Ennis,1425406084,1429144203,1429144203
http://stackoverflow.com/a/2886224/2728507,How to find out if you&#39;re using HTTPS without $_SERVER[&#39;HTTPS&#39;],226957,Tyler Carter,Quill,1248392569,1562104621,1428986768,https://stackoverflow.com/questions/1175096/how-to-find-out-if-youre-using-https-without-serverhttps,"<p>This should always work even when  <code>$_SERVER['HTTPS']</code> is undefined:</p>

<pre><code>function isSecure() {
  return
    (!empty($_SERVER['HTTPS']) &amp;&amp; $_SERVER['HTTPS'] !== 'off')
    || $_SERVER['SERVER_PORT'] == 443;
}
</code></pre>

<p>The code is compatible with IIS.</p>

<p>From the <a href=""http://www.php.net/manual/en/reserved.variables.server.php"" rel=""noreferrer"">PHP.net documentation and user comments</a> :</p>

<blockquote>
  <p>1) Set to a non-empty value if the script was queried through the HTTPS protocol.</p>
  
  <p>2) Note that when using ISAPI with IIS, the value will be ""off"" if the request was not made through the HTTPS protocol. (Same behaviour has been reported for IIS7 running PHP as a Fast-CGI application).</p>
</blockquote>

<p>Also, Apache 1.x servers (and broken installations) might not have <code>$_SERVER['HTTPS']</code> defined even if connecting securely. Although not guaranteed, connections on port 443 are, by <a href=""http://tools.ietf.org/html/rfc2818#section-2.3"" rel=""noreferrer"">convention</a>, likely using <a href=""http://en.wikipedia.org/wiki/Secure_Sockets_Layer"" rel=""noreferrer"">secure sockets</a>, hence the additional port check.</p>
",Gras Double,Gras Double,1274484398,1396143861,1396143861
http://stackoverflow.com/a/2886589/195873,Case-insensitive string comparison in C++,429005,Adam,Toby Speight,1218744088,1538752776,1503506126,https://stackoverflow.com/questions/11635/case-insensitive-string-comparison-in-c,"<p>Take advantage of the standard <code>char_traits</code>. Recall that a <code>std::string</code> is in fact a typedef for <code>std::basic_string&lt;char&gt;</code>, or more explicitly, <code>std::basic_string&lt;char, std::char_traits&lt;char&gt; &gt;</code>. The <code>char_traits</code> type describes how characters compare, how they copy, how they cast etc. All you need to do is typedef a new string over <code>basic_string</code>, and provide it with your own custom <code>char_traits</code> that compare case insensitively.</p>

<pre><code>struct ci_char_traits : public char_traits&lt;char&gt; {
    static bool eq(char c1, char c2) { return toupper(c1) == toupper(c2); }
    static bool ne(char c1, char c2) { return toupper(c1) != toupper(c2); }
    static bool lt(char c1, char c2) { return toupper(c1) &lt;  toupper(c2); }
    static int compare(const char* s1, const char* s2, size_t n) {
        while( n-- != 0 ) {
            if( toupper(*s1) &lt; toupper(*s2) ) return -1;
            if( toupper(*s1) &gt; toupper(*s2) ) return 1;
            ++s1; ++s2;
        }
        return 0;
    }
    static const char* find(const char* s, int n, char a) {
        while( n-- &gt; 0 &amp;&amp; toupper(*s) != toupper(a) ) {
            ++s;
        }
        return s;
    }
};

typedef std::basic_string&lt;char, ci_char_traits&gt; ci_string;
</code></pre>

<p>The details are on <a href=""http://www.gotw.ca/gotw/029.htm"" rel=""noreferrer"">Guru of The Week number 29</a>.</p>
",wilhelmtell,wilhelmtell,1274492213,1274494591,1274494591
http://stackoverflow.com/a/2886589/251153,Case-insensitive string comparison in C++,429005,Adam,Toby Speight,1218744088,1538752776,1503506126,https://stackoverflow.com/questions/11635/case-insensitive-string-comparison-in-c,"<p>Take advantage of the standard <code>char_traits</code>. Recall that a <code>std::string</code> is in fact a typedef for <code>std::basic_string&lt;char&gt;</code>, or more explicitly, <code>std::basic_string&lt;char, std::char_traits&lt;char&gt; &gt;</code>. The <code>char_traits</code> type describes how characters compare, how they copy, how they cast etc. All you need to do is typedef a new string over <code>basic_string</code>, and provide it with your own custom <code>char_traits</code> that compare case insensitively.</p>

<pre><code>struct ci_char_traits : public char_traits&lt;char&gt; {
    static bool eq(char c1, char c2) { return toupper(c1) == toupper(c2); }
    static bool ne(char c1, char c2) { return toupper(c1) != toupper(c2); }
    static bool lt(char c1, char c2) { return toupper(c1) &lt;  toupper(c2); }
    static int compare(const char* s1, const char* s2, size_t n) {
        while( n-- != 0 ) {
            if( toupper(*s1) &lt; toupper(*s2) ) return -1;
            if( toupper(*s1) &gt; toupper(*s2) ) return 1;
            ++s1; ++s2;
        }
        return 0;
    }
    static const char* find(const char* s, int n, char a) {
        while( n-- &gt; 0 &amp;&amp; toupper(*s) != toupper(a) ) {
            ++s;
        }
        return s;
    }
};

typedef std::basic_string&lt;char, ci_char_traits&gt; ci_string;
</code></pre>

<p>The details are on <a href=""http://www.gotw.ca/gotw/029.htm"" rel=""noreferrer"">Guru of The Week number 29</a>.</p>
",wilhelmtell,wilhelmtell,1274492213,1274494591,1274494591
http://stackoverflow.com/a/2893259/454004,Pretty printing XML with javascript,130279,Darin Dimitrov,Dimitre Novatchev,1229554878,1550008418,1287347356,https://stackoverflow.com/questions/376373/pretty-printing-xml-with-javascript,"<p>Slight modification of efnx clckclcks's javascript function.  I changed the formatting from spaces to tab, but most importantly I allowed text to remain on one line:</p>

<pre><code>var formatXml = this.formatXml = function (xml) {
        var reg = /(&gt;)\s*(&lt;)(\/*)/g; // updated Mar 30, 2015
        var wsexp = / *(.*) +\n/g;
        var contexp = /(&lt;.+&gt;)(.+\n)/g;
        xml = xml.replace(reg, '$1\n$2$3').replace(wsexp, '$1\n').replace(contexp, '$1\n$2');
        var pad = 0;
        var formatted = '';
        var lines = xml.split('\n');
        var indent = 0;
        var lastType = 'other';
        // 4 types of tags - single, closing, opening, other (text, doctype, comment) - 4*4 = 16 transitions 
        var transitions = {
            'single-&gt;single': 0,
            'single-&gt;closing': -1,
            'single-&gt;opening': 0,
            'single-&gt;other': 0,
            'closing-&gt;single': 0,
            'closing-&gt;closing': -1,
            'closing-&gt;opening': 0,
            'closing-&gt;other': 0,
            'opening-&gt;single': 1,
            'opening-&gt;closing': 0,
            'opening-&gt;opening': 1,
            'opening-&gt;other': 1,
            'other-&gt;single': 0,
            'other-&gt;closing': -1,
            'other-&gt;opening': 0,
            'other-&gt;other': 0
        };

        for (var i = 0; i &lt; lines.length; i++) {
            var ln = lines[i];

            // Luca Viggiani 2017-07-03: handle optional &lt;?xml ... ?&gt; declaration
            if (ln.match(/\s*&lt;\?xml/)) {
                formatted += ln + ""\n"";
                continue;
            }
            // ---

            var single = Boolean(ln.match(/&lt;.+\/&gt;/)); // is this line a single tag? ex. &lt;br /&gt;
            var closing = Boolean(ln.match(/&lt;\/.+&gt;/)); // is this a closing tag? ex. &lt;/a&gt;
            var opening = Boolean(ln.match(/&lt;[^!].*&gt;/)); // is this even a tag (that's not &lt;!something&gt;)
            var type = single ? 'single' : closing ? 'closing' : opening ? 'opening' : 'other';
            var fromTo = lastType + '-&gt;' + type;
            lastType = type;
            var padding = '';

            indent += transitions[fromTo];
            for (var j = 0; j &lt; indent; j++) {
                padding += '\t';
            }
            if (fromTo == 'opening-&gt;closing')
                formatted = formatted.substr(0, formatted.length - 1) + ln + '\n'; // substr removes line break (\n) from prev loop
            else
                formatted += padding + ln + '\n';
        }

        return formatted;
    };
</code></pre>
",Dan BROOKS,lviggiani,1274645534,1499091001,1499091001
http://stackoverflow.com/a/2893932/2257172,Accept server&#39;s self-signed ssl certificate in Java client,267598,Nikita Rybak,jww,1274654911,1560886308,1496563977,https://stackoverflow.com/questions/2893819/accept-servers-self-signed-ssl-certificate-in-java-client,"<p>You have basically two options here: add the self-signed certificate to your JVM truststore or configure your client to </p>

<h3>Option 1</h3>

<p>Export the certificate from your browser and import it in your JVM truststore (to establish a chain of trust):</p>

<pre><code>&lt;JAVA_HOME&gt;\bin\keytool -import -v -trustcacerts
-alias server-alias -file server.cer
-keystore cacerts.jks -keypass changeit
-storepass changeit 
</code></pre>

<h3>Option 2</h3>

<p>Disable Certificate Validation:</p>

<pre><code>// Create a trust manager that does not validate certificate chains
TrustManager[] trustAllCerts = new TrustManager[] { 
    new X509TrustManager() {     
        public java.security.cert.X509Certificate[] getAcceptedIssuers() { 
            return new X509Certificate[0];
        } 
        public void checkClientTrusted( 
            java.security.cert.X509Certificate[] certs, String authType) {
            } 
        public void checkServerTrusted( 
            java.security.cert.X509Certificate[] certs, String authType) {
        }
    } 
}; 

// Install the all-trusting trust manager
try {
    SSLContext sc = SSLContext.getInstance(""SSL""); 
    sc.init(null, trustAllCerts, new java.security.SecureRandom()); 
    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
} catch (GeneralSecurityException e) {
} 
// Now you can access an https URL without having the certificate in the truststore
try { 
    URL url = new URL(""https://hostname/index.html""); 
} catch (MalformedURLException e) {
} 
</code></pre>

<p>Note that <strong>I do not recommend the Option #2 at all</strong>. Disabling the trust manager defeats some parts of SSL and makes you vulnerable to man in the middle attacks. Prefer Option #1 or, even better, have the server use a ""real"" certificate signed by a well known CA. </p>
",Pascal Thivent,Idos,1274657185,1515455260,1515455260
http://stackoverflow.com/a/28950776/671626,Finding local IP addresses using Python&#39;s stdlib,579976,UnkwnTech,anatoly techtonik,1223035416,1556227359,1387106392,https://stackoverflow.com/questions/166506/finding-local-ip-addresses-using-pythons-stdlib,"<p><strong>This method returns the ""primary"" IP on the local box (the one with a default route)</strong>.</p>

<ul>
<li>Does NOT need routable net access or any connection at all.</li>
<li>Works even if all interfaces are unplugged from the network.</li>
<li>Does NOT need or even try to get <em>anywhere else</em>.</li>
<li>Works with NAT, public, private, external, and internal IP's</li>
<li>Pure Python 2 (or 3) with no external dependencies.</li>
<li>Works on Linux, Windows, and OSX.</li>
</ul>

<p>Python 2 or 3:</p>

<pre><code>import socket
def get_ip():
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    try:
        # doesn't even have to be reachable
        s.connect(('10.255.255.255', 1))
        IP = s.getsockname()[0]
    except:
        IP = '127.0.0.1'
    finally:
        s.close()
    return IP
</code></pre>

<p>This returns a single IP which is the primary (the one with a default route). If you need instead all IP's attached to all interfaces (including localhost, etc), see <a href=""https://stackoverflow.com/questions/166506/finding-local-ip-addresses-using-pythons-stdlib/24564613#24564613"">this answer</a>.</p>

<p>If you are behind a NAT firewall like your wifi box at home, then this will not show your public NAT IP, but instead your private NAT IP on the local network which has a default route to your local WIFI router; getting your wifi router's external IP would either require running this on THAT box, or connecting to an external service such as whatismyip.com/whatismyipaddress.com that could reflect back the IP... but that is completely different from the original question. :)</p>

<p>Updated connect() call per Pedro's suggestion in comments. (If you need a specific license statement, this is public domain/free for any use, or MIT/CC2-BY-SA per Stack Overflow's code/content license at your option.)</p>
",Jamieson Becker,Jamieson Becker,1425931347,1534716185,1534716185
http://stackoverflow.com/a/28952464/1060738,Reading the target of a .lnk file in Python?,17097,Etienne Perot,lesmana,1230525087,1509064920,1337808336,https://stackoverflow.com/questions/397125/reading-the-target-of-a-lnk-file-in-python,"<p>I know this is an older thread but I feel that there isn't much information on the method that uses the link specification as noted in the original question.  </p>

<p>My shortcut target implementation could not use the win32com module and after a lot of searching, decided to come up with my own.  Nothing else seemed to accomplish what I needed under my restrictions.  Hopefully this will help other folks in this same situation.</p>

<p>It uses the binary structure Microsoft has provided for <a href=""http://msdn.microsoft.com/en-us/library/dd871305.aspx"" rel=""nofollow noreferrer"">MS-SHLLINK</a>. </p>

<pre><code>import struct

path = 'myfile.txt.lnk'    
target = ''

with open(path, 'rb') as stream:
    content = stream.read()
    # skip first 20 bytes (HeaderSize and LinkCLSID)
    # read the LinkFlags structure (4 bytes)
    lflags = struct.unpack('I', content[0x14:0x18])[0]
    position = 0x18
    # if the HasLinkTargetIDList bit is set then skip the stored IDList 
    # structure and header
    if (lflags &amp; 0x01) == 1:
        position = struct.unpack('H', content[0x4C:0x4E])[0] + 0x4E
    last_pos = position
    position += 0x04
    # get how long the file information is (LinkInfoSize)
    length = struct.unpack('I', content[last_pos:position])[0]
    # skip 12 bytes (LinkInfoHeaderSize, LinkInfoFlags, and VolumeIDOffset)
    position += 0x0C
    # go to the LocalBasePath position
    lbpos = struct.unpack('I', content[position:position+0x04])[0]
    position = last_pos + lbpos
    # read the string at the given position of the determined length
    size= (length + last_pos) - position - 0x02
    temp = struct.unpack('c' * size, content[position:position+size])
    target = ''.join([chr(ord(a)) for a in temp])
</code></pre>
",Jared,Glycerine,1425938113,1509064920,1509064920
http://stackoverflow.com/a/28967275/5444623,allowing data-* attributes with HTMLPurifier,1860,johndodo,johndodo,1371116333,1553340949,1371120080,https://stackoverflow.com/questions/17083848/allowing-data-attributes-with-htmlpurifier,"<p>It's not a full solution, but I was able to globally white-list individual <code>data-</code> attributes with the follow code, allowing them to be placed on any element without having to itemize each element type for each attribute.</p>

<pre><code>$def = $config-&gt;getHTMLDefinition(true);
$def-&gt;info_global_attr['data-aaa-xxx'] = new HTMLPurifier_AttrDef_Text;
$def-&gt;info_global_attr['data-bbb-yyy'] = new HTMLPurifier_AttrDef_Text;
$def-&gt;info_global_attr['data-ccc-zzz'] = new HTMLPurifier_AttrDef_Text;
</code></pre>
",Adam Franco,,1426000130,1426000130,0
https://stackoverflow.com/questions/28998241/how-to-clear-cookies-and-cache-of-webview-on-android-when-not-in-webview,How to clear cookies and cache of webview on Android when not in webview?,51850,JohnRock,,1426111315,1461493892,0,,,,,,,
http://stackoverflow.com/a/2901298/145346,How to print a number with commas as thousands separators in JavaScript,962297,Elias Zamaria,whackamadoodle3000,1274744551,1562587186,1513138319,https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript,"<p>I used the idea from Kerry's answer, but simplified it since I was just looking for something simple for my specific purpose. Here is what I did:</p>

<pre><code>function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "","");
}
</code></pre>

<p>This is all you really need to know.</p>

<p>@Neils Bom asked how the regex works. My explanation is sort of long. It won't fit in the comments and I don't know where else to put it so I am doing it here. If anyone has any other suggestions for where to put it, please let me know.</p>

<p>The regex uses 2 lookahead assertions: a positive one to look for any point in the string that has a multiple of 3 digits in a row after it, and a negative assertion to make sure that point only has exactly a multiple of 3 digits. The replacement expression puts a comma there.</p>

<p>For example, if you pass it ""123456789.01"", the positive assertion will match every spot to the left of the 7 (since ""789"" is a multiple of 3 digits, ""678"" is a multiple of 3 digits, ""567"", etc.). The negative assertion checks that the multiple of 3 digits does not have any digits after it. ""789"" has a period after it so it is exactly a multiple of 3 digits, so a comma goes there. ""678"" is a multiple of 3 digits but it has a ""9"" after it, so those 3 digits are part of a group of 4, and a comma does not go there. Similarly for ""567"". ""456789"" is 6 digits, which is a multiple of 3, so a comma goes before that. ""345678"" is a multiple of 3, but it has a ""9"" after it, so no comma goes there. And so on. The ""\B"" keeps the regex from putting a comma at the beginning of the string.</p>

<p>@neu-rah mentioned that this function adds commas in undesirable places if there are more than 3 digits after the decimal point. If this is a problem, you can use this function:</p>

<pre><code>function numberWithCommas(x) {
    var parts = x.toString().split(""."");
    parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, "","");
    return parts.join(""."");
}
</code></pre>
",Elias Zamaria,Lloyd Banks,1274748059,1543040248,1543040248
http://stackoverflow.com/a/2901298/2506748,How to print a number with commas as thousands separators in JavaScript,962297,Elias Zamaria,whackamadoodle3000,1274744551,1562587186,1513138319,https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript,"<p>I used the idea from Kerry's answer, but simplified it since I was just looking for something simple for my specific purpose. Here is what I did:</p>

<pre><code>function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "","");
}
</code></pre>

<p>This is all you really need to know.</p>

<p>@Neils Bom asked how the regex works. My explanation is sort of long. It won't fit in the comments and I don't know where else to put it so I am doing it here. If anyone has any other suggestions for where to put it, please let me know.</p>

<p>The regex uses 2 lookahead assertions: a positive one to look for any point in the string that has a multiple of 3 digits in a row after it, and a negative assertion to make sure that point only has exactly a multiple of 3 digits. The replacement expression puts a comma there.</p>

<p>For example, if you pass it ""123456789.01"", the positive assertion will match every spot to the left of the 7 (since ""789"" is a multiple of 3 digits, ""678"" is a multiple of 3 digits, ""567"", etc.). The negative assertion checks that the multiple of 3 digits does not have any digits after it. ""789"" has a period after it so it is exactly a multiple of 3 digits, so a comma goes there. ""678"" is a multiple of 3 digits but it has a ""9"" after it, so those 3 digits are part of a group of 4, and a comma does not go there. Similarly for ""567"". ""456789"" is 6 digits, which is a multiple of 3, so a comma goes before that. ""345678"" is a multiple of 3, but it has a ""9"" after it, so no comma goes there. And so on. The ""\B"" keeps the regex from putting a comma at the beginning of the string.</p>

<p>@neu-rah mentioned that this function adds commas in undesirable places if there are more than 3 digits after the decimal point. If this is a problem, you can use this function:</p>

<pre><code>function numberWithCommas(x) {
    var parts = x.toString().split(""."");
    parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, "","");
    return parts.join(""."");
}
</code></pre>
",Elias Zamaria,Lloyd Banks,1274748059,1543040248,1543040248
http://stackoverflow.com/a/2901298/3153,How to print a number with commas as thousands separators in JavaScript,962297,Elias Zamaria,whackamadoodle3000,1274744551,1562587186,1513138319,https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript,"<p>I used the idea from Kerry's answer, but simplified it since I was just looking for something simple for my specific purpose. Here is what I did:</p>

<pre><code>function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "","");
}
</code></pre>

<p>This is all you really need to know.</p>

<p>@Neils Bom asked how the regex works. My explanation is sort of long. It won't fit in the comments and I don't know where else to put it so I am doing it here. If anyone has any other suggestions for where to put it, please let me know.</p>

<p>The regex uses 2 lookahead assertions: a positive one to look for any point in the string that has a multiple of 3 digits in a row after it, and a negative assertion to make sure that point only has exactly a multiple of 3 digits. The replacement expression puts a comma there.</p>

<p>For example, if you pass it ""123456789.01"", the positive assertion will match every spot to the left of the 7 (since ""789"" is a multiple of 3 digits, ""678"" is a multiple of 3 digits, ""567"", etc.). The negative assertion checks that the multiple of 3 digits does not have any digits after it. ""789"" has a period after it so it is exactly a multiple of 3 digits, so a comma goes there. ""678"" is a multiple of 3 digits but it has a ""9"" after it, so those 3 digits are part of a group of 4, and a comma does not go there. Similarly for ""567"". ""456789"" is 6 digits, which is a multiple of 3, so a comma goes before that. ""345678"" is a multiple of 3, but it has a ""9"" after it, so no comma goes there. And so on. The ""\B"" keeps the regex from putting a comma at the beginning of the string.</p>

<p>@neu-rah mentioned that this function adds commas in undesirable places if there are more than 3 digits after the decimal point. If this is a problem, you can use this function:</p>

<pre><code>function numberWithCommas(x) {
    var parts = x.toString().split(""."");
    parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, "","");
    return parts.join(""."");
}
</code></pre>
",Elias Zamaria,Lloyd Banks,1274748059,1543040248,1543040248
http://stackoverflow.com/a/29019278/96342,How do I programmatically create a TouchEvent in Chrome 41?,10793,exavatar,Community,1426186893,1489115906,1495535396,https://stackoverflow.com/questions/29018151/how-do-i-programmatically-create-a-touchevent-in-chrome-41,"<p>Update: This will not actually result in an instance of TouchEvent. lame.</p>

<p>I did it like this:</p>

<pre><code>var type = 'start'; // or move, end
var event = document.createEvent('Event');
event.initEvent('touch' + type, true, true);     
event.constructor.name; // Event (not TouchEvent)
</code></pre>

<p>You'll also need to set the touches on the event. That's another can of worms as some browsers support the document.createTouch and document.createTouchList methods and some don't. In browsers that don't you just create and array of JS objects that are ""TouchEvent-like"". This looks like:</p>

<pre><code>var point = {x: 10, y: 10 };
event.touches = [{
    target: someElement,
    identifier: Date.now() + i,
    pageX: point.x,
    pageY: point.y,
    screenX: point.x,
    screenY: point.y,
    clientX: point.x,
    clientY: point.y
}]
</code></pre>
",Rob,Rob,1426190935,1426196134,1426196134
http://stackoverflow.com/a/2906198/154651,globals and locals in python exec(),27125,hawkett,hawkett,1274788461,1362016950,1274796522,https://stackoverflow.com/questions/2904274/globals-and-locals-in-python-exec,"<p>Well, I believe it's either an implementation bug or an undocumented design decision. The crux of the issue is that a name-binding operation in the module-scope should bind to a global variable. The way it is achieved is that when in the module level, globals() IS locals() (try that one out in the interpreter), so when you do any name-binding, it assigns it, as usual, to the locals() dictionary, which is also the globals, hence a global variable is created.</p>

<p>When you look up a variable, you first check your current locals, and if the name is not found, you recursively check locals of containing scopes for the variable name until you find the variable or reach the module-scope. If you reach that, you check the globals, which are supposed to be the module scope's locals.</p>

<pre><code>&gt;&gt;&gt; exec(compile(""import sys\nprint sys._getframe().f_code.co_name"", ""blah"", ""exec""), {}, {})
&lt;module&gt;
&gt;&gt;&gt; exec(""a = 1\nclass A(object):\n\tprint a\n"", {}, {})
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""&lt;string&gt;"", line 2, in &lt;module&gt;
  File ""&lt;string&gt;"", line 3, in A
NameError: name 'a' is not defined
&gt;&gt;&gt; d = {}
&gt;&gt;&gt; exec(""a = 1\nclass A(object):\n\tprint a\n"", d,d)
1
</code></pre>

<p>This behavior is why inheritance worked (The name-lookup used code object's scope locals(), which indeed had A in it).</p>

<p>In the end, it's an ugly hack in the CPython implementation, special-casing globals lookup. It also causes some nonsensical artifical situations - e.g.:</p>

<pre><code>&gt;&gt;&gt; def f():
...     global a
...     a = 1
...
&gt;&gt;&gt; f()
&gt;&gt;&gt; 'a' in locals()
True
</code></pre>

<p>Please note that this is all my inference based on messing with the interpreter while reading section 4.1 (Naming and binding) of the python language reference. While this isn't definitive (I haven't opened CPython's sources), I'm fairly sure I'm correct about the behavior.</p>
",Roee Shenberg,,1274802106,1274802106,0
http://stackoverflow.com/a/29068727/4184258,Fastest Way to Determine if Character Belongs to a Set of Known Characters C++,1525,Alexander Eden,Praetorian,1426467526,1426522072,1426467934,https://stackoverflow.com/questions/29068130/fastest-way-to-determine-if-character-belongs-to-a-set-of-known-characters-c,"<p>I went a little further and wrote two versions, one based on a lookup array, the other on a set using an underlying hash.</p>

<pre><code>class CharLookup {
public:
  CharLookup(const std::string &amp; set) : lookup(*std::max_element(set.begin(), set.end()) + 1) {
    for ( auto c : set) lookup[c] = true;
  }
  inline bool has(const unsigned char c) const {
    return c &gt; lookup.size() ? false : lookup[c];
  }
private:
  std::vector&lt;bool&gt; lookup;
};

class CharSet {
public:
  CharSet(const std::string &amp; cset) {
    for ( auto c : cset) set.insert(c);
  }
  inline bool has(const unsigned char c) const {
    return set.contains(c);
  }
private:
  QSet&lt;unsigned char&gt; set;
};
</code></pre>

<p>Then wrote a little benchmark, added a few more containers for the sake of comparison. Lower is better, the data points are for ""character set size / text size"":</p>

<p><img src=""https://i.stack.imgur.com/bF0CO.png"" alt=""enter image description here""></p>

<p>Seems like for short char sets and text, <code>std::string::find_first_of</code> is fastest, even faster than using a lookup array, but quickly dwindles as the test size increases. <code>std::vector&lt;bool&gt;</code> seems like the ""golden mean"", <code>QBitArray</code> probably has a little different implementation because it pulls ahead as the test size increases, at the largest test <code>QVector&lt;bool&gt;</code> is fastest, presumably because it doesn't have the overhead of bit access. The two hash sets are close, trading places, last and least there is the <code>std::set</code>.</p>

<p>Tested on an i7-3770k Win7 x64 box, using MinGW 4.9.1 x32 with -O3.</p>
",dtech,dtech,1426472651,1426520114,1426520114
http://stackoverflow.com/a/2919363/1048589,jQuery convert line breaks to br (nl2br equivalent),101014,gbhall,Luca Filosofi,1274946693,1545215265,1334133331,https://stackoverflow.com/questions/2919337/jquery-convert-line-breaks-to-br-nl2br-equivalent,"<blockquote>
  <p><strong>demo:</strong> <a href=""http://so.devilmaycode.it/jquery-convert-line-breaks-to-br-nl2br-equivalent"" rel=""noreferrer"">http://so.devilmaycode.it/jquery-convert-line-breaks-to-br-nl2br-equivalent</a></p>
</blockquote>

<pre><code>function nl2br (str, is_xhtml) {   
    var breakTag = (is_xhtml || typeof is_xhtml === 'undefined') ? '&lt;br /&gt;' : '&lt;br&gt;';    
    return (str + '').replace(/([^&gt;\r\n]?)(\r\n|\n\r|\r|\n)/g, '$1'+ breakTag +'$2');
}
</code></pre>

<blockquote>
  <ul>
  <li><a href=""http://phpjs.org/functions/nl2br:480"" rel=""noreferrer"">http://phpjs.org/functions/nl2br:480</a></li>
  </ul>
</blockquote>
",Luca Filosofi,Luca Filosofi,1274947014,1399291226,1399291226
http://stackoverflow.com/a/29232803/731166,Select all tables in psql database EXCEPT those matching [pattern],1016,jacel,,1427169465,1427200526,0,https://stackoverflow.com/questions/29224781/select-all-tables-in-psql-database-except-those-matching-pattern,"<p>According to the manual, <code>psql</code> supports <a href=""http://www.postgresql.org/docs/current/interactive/app-psql.html#APP-PSQL-PATTERNS"" rel=""nofollow"">these patterns</a>. Normally you could use regular expression negative lookahead <code>(?!valid)*</code> but <code>?</code> cannot be used in regular expression with <code>psql</code> because it is translated to <code>.</code>. It is probably easier to do a query from <code>INFROMATION SCHEMA</code>:</p>

<pre><code>SELECT table_name FROM information_schema.tables
  WHERE table_schema NOT IN ('pg_catalog', 'information_schema') --exclude system tables
    AND table_type = 'BASE TABLE' -- only tables
    AND table_name NOT LIKE 'valid%';
</code></pre>
",Simo Kivist,,1427200526,1427200526,0
http://stackoverflow.com/a/29237391/175551,javascript - unfocus a textbox,56687,Joe,,1288674607,1528882928,0,https://stackoverflow.com/questions/4075057/javascript-unfocus-a-textbox,"<p>This is what I used when <code>.blur()</code> didn't want to be my friend</p>

<pre><code>function blurAll(){
 var tmp = document.createElement(""input"");
 document.body.appendChild(tmp);
 tmp.focus();
 document.body.removeChild(tmp);
}
</code></pre>
",shygoo,,1427212850,1427212850,0
http://stackoverflow.com/a/29251516/731166,Prevent Sessions For Routes in Laravel (Custom on-demand session handling),6375, p,,1413832012,1556767908,0,https://stackoverflow.com/questions/26473106/prevent-sessions-for-routes-in-laravel-custom-on-demand-session-handling,"<p>Its really easy using the middleware in Laravel 5, I needed any request with an API key not to have a session and I simply did :</p>

<pre class=""lang-php prettyprint-override""><code>&lt;?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Session\Middleware\StartSession as BaseStartSession;

class StartSession extends BaseStartSession
{

    /**
     * Handle an incoming request.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  \Closure  $next
     * @return mixed
     */
    public function handle($request, Closure $next)
    {
        if(\Request::has('api_key'))
        {
            \Config::set('session.driver', 'array');
        }
        return parent::handle($request, $next);
    }
}
</code></pre>



<p>Also you will need to extend the SessionServiceProvider as follows:</p>

<pre class=""lang-php prettyprint-override""><code>&lt;?php namespace App\Providers;

use Illuminate\Session\SessionServiceProvider as BaseSessionServiceProvider;

class SessionServiceProvider extends BaseSessionServiceProvider
{
    /**
     * Register the service provider.
     *
     * @return void
     */
    public function register()
    {
        $this-&gt;registerSessionManager();

        $this-&gt;registerSessionDriver();

        $this-&gt;app-&gt;singleton('App\Http\Middleware\StartSession');
    }
}
</code></pre>



<p>and place in your <code>config/app.php</code> under <code>providers</code>:</p>

<pre><code>'App\Providers\SessionServiceProvider',
</code></pre>

<p>Also you must change it in your kernel file: <code>App/Http/Kernel.php</code>, in the <code>$middlewareGroups</code> section change the default entry, <code>\Illuminate\Session\Middleware\StartSession::class,</code> to your new class <code>\App\Http\Middleware\StartSession::class,</code>.</p>
",LukePOLO,Darryl E. Clarke,1427274778,1507060830,1507060830
http://stackoverflow.com/a/29257533/3642890,Get keyboard height in Lollipop,1226,stanga bogdan,,1422182659,1427291220,0,https://stackoverflow.com/questions/28135486/get-keyboard-height-in-lollipop,"<p>Try This Following Code When the Keyboard Opens Up.</p>

<pre><code>@TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
public int calculateScreenHeightForLollipop() {
    WindowManager wm = (WindowManager) mContext.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    return size.y;
}

/**
 * Call this function to resize the emoji popup according to your soft keyboard size
 */
public void setSizeForSoftKeyboard() {
    rootView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            Rect r = new Rect();
            rootView.getWindowVisibleDisplayFrame(r);
            int screenHeight;
            if (Build.VERSION.SDK_INT &gt;= 5.0) {
                screenHeight = calculateScreenHeightForLollipop();
            } else {
                screenHeight = rootView.getRootView().getHeight();
            }
            int heightDifference = screenHeight
                    - (r.bottom - r.top);
            int resourceId = mContext.getResources()
                    .getIdentifier(""status_bar_height"",
                            ""dimen"", ""android"");
            if (resourceId &gt; 0) {
                heightDifference -= mContext.getResources()
                        .getDimensionPixelSize(resourceId);
            }
            if (heightDifference &gt; 100) {
                keyBoardHeight = heightDifference;
                setSize(LayoutParams.MATCH_PARENT, keyBoardHeight);
                if (!isOpened) {
                    if (onSoftKeyboardOpenCloseListener != null)
                        onSoftKeyboardOpenCloseListener.onKeyboardOpen(keyBoardHeight);
                }
                isOpened = true;
                if (pendingOpen) {
                    showAtBottom();
                    pendingOpen = false;
                }
            } else {
                isOpened = false;
                if (onSoftKeyboardOpenCloseListener != null)
                    onSoftKeyboardOpenCloseListener.onKeyboardClose();
            }
        }
    });
}
</code></pre>
",iAviatorJose,,1427291220,1427291220,0
http://stackoverflow.com/a/29331237/865091,How to enable MySQL client auto re-connect with MySQLdb?,45796,victorz,,1224150965,1541924852,0,https://stackoverflow.com/questions/207981/how-to-enable-mysql-client-auto-re-connect-with-mysqldb,"<p>I had problems with the proposed solution because it didn't catch the exception. I am not sure why.</p>

<p>I have solved the problem with the <code>ping(True)</code> statement which I think is neater:</p>

<pre><code>import MySQLdb
con=MySQLdb.Connect()
con.ping(True)
cur=con.cursor()
</code></pre>

<p>Got it from here: <a href=""http://www.neotitans.com/resources/python/mysql-python-connection-error-2006.html"">http://www.neotitans.com/resources/python/mysql-python-connection-error-2006.html</a></p>
",joaquintopiso,Jeffrey Bosboom,1427644108,1427645158,1427645158
http://stackoverflow.com/a/29353049/325479,Android: how to select texts from webview,24558,vnshetty,vnshetty,1305809327,1481735260,1306409072,https://stackoverflow.com/questions/6058843/android-how-to-select-texts-from-webview,"<p>Step: 1
Create custom WebView class.
This class will override the native action bar on long press on the webview text.
Also it handles the the selection case for different version of android (tested on 4.0 onwards)
This code takes the selected text using javascript.</p>

<pre><code>public class CustomWebView extends WebView {
private Context context;
// override all other constructor to avoid crash
public CustomWebView(Context context) {
    super(context);
    this.context = context;
    WebSettings webviewSettings = getSettings();
    webviewSettings.setJavaScriptEnabled(true);
    // add JavaScript interface for copy
    addJavascriptInterface(new WebAppInterface(context), ""JSInterface"");
}

// setting custom action bar
private ActionMode mActionMode;
private ActionMode.Callback mSelectActionModeCallback;
private GestureDetector mDetector;

// this will over ride the default action bar on long press
@Override
public ActionMode startActionMode(Callback callback) {
    ViewParent parent = getParent();
    if (parent == null) {
        return null;
    }
    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.KITKAT) {
        String name = callback.getClass().toString();
        if (name.contains(""SelectActionModeCallback"")) {
            mSelectActionModeCallback = callback;
            mDetector = new GestureDetector(context,
                    new CustomGestureListener());
        }
    }
    CustomActionModeCallback mActionModeCallback = new CustomActionModeCallback();
    return parent.startActionModeForChild(this, mActionModeCallback);
}

private class CustomActionModeCallback implements ActionMode.Callback {

    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        mActionMode = mode;
        MenuInflater inflater = mode.getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        return false; 
    }

    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {

        switch (item.getItemId()) {
        case R.id.copy:
            getSelectedData();
            mode.finish(); 
            return true;
        case R.id.share:
            mode.finish();
            return true;
        default:
            mode.finish();
            return false;
        }
    }
    @Override
    public void onDestroyActionMode(ActionMode mode) {
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {
            clearFocus();
        }else{
             if (mSelectActionModeCallback != null) {
                 mSelectActionModeCallback.onDestroyActionMode(mode);
             }
             mActionMode = null;
        }
    }
}
private void getSelectedData(){

    String js= ""(function getSelectedText() {""+
            ""var txt;""+
            ""if (window.getSelection) {""+
                ""txt = window.getSelection().toString();""+
            ""} else if (window.document.getSelection) {""+
                ""txt = window.document.getSelection().toString();""+
            ""} else if (window.document.selection) {""+
                ""txt = window.document.selection.createRange().text;""+
            ""}""+
            ""JSInterface.getText(txt);""+
          ""})()"";
    // calling the js function
    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {
        evaluateJavascript(""javascript:""+js, null);
    }else{
        loadUrl(""javascript:""+js);
    }
}

private class CustomGestureListener extends GestureDetector.SimpleOnGestureListener {
    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        if (mActionMode != null) {
            mActionMode.finish();
            return true;
        }
        return false;
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    // Send the event to our gesture detector
    // If it is implemented, there will be a return value
    if(mDetector !=null)
        mDetector.onTouchEvent(event);
    // If the detected gesture is unimplemented, send it to the superclass
    return super.onTouchEvent(event);
}
</code></pre>

<p>}</p>

<p>Step 2:
create separate class for WebView interface. 
This class listnes for event from once javascript code is getting executed</p>

<pre><code>public class WebAppInterface {
Context mContext;

WebAppInterface(Context c) {
    mContext = c;
}

@JavascriptInterface
public void getText(String text) {
    // put selected text into clipdata
    ClipboardManager clipboard = (ClipboardManager)
            mContext.getSystemService(Context.CLIPBOARD_SERVICE);
    ClipData clip = ClipData.newPlainText(""simple text"",text);
    clipboard.setPrimaryClip(clip);
    // gives the toast for selected text
    Toast.makeText(mContext, text, Toast.LENGTH_SHORT).show();
}
}
</code></pre>

<p>Step 3:
Add menu.xml for custom menu in res > menu folder</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;menu xmlns:android=""http://schemas.android.com/apk/res/android"" &gt;
&lt;item
    android:id=""@+id/copy""
    android:icon=""@drawable/ic_action_copy""
    android:showAsAction=""always"" 
    android:title=""copy""&gt;
&lt;/item&gt;
&lt;item
    android:id=""@+id/share""
    android:icon=""@drawable/ic_action_share""
    android:showAsAction=""always"" 
    android:title=""share""&gt;
&lt;/item&gt;
</code></pre>

<p></p>

<p>I took help of several links listed below to achieve this:
Thanks to you guys.</p>

<p>how to use javascript on webview 
<a href=""http://developer.android.com/guide/webapps/webview.html#UsingJavaScript"" rel=""nofollow noreferrer"">http://developer.android.com/guide/webapps/webview.html#UsingJavaScript</a></p>

<p>for injecting javascript
<a href=""https://stackoverflow.com/questions/24354640/why-cant-i-inject-this-javascript-in-the-webview-on-android?answertab=votes#tab-top"">Why can&#39;t I inject this javascript in the webview on android?</a></p>

<p>for overriding default action bar
<a href=""https://stackoverflow.com/questions/17024203/how-to-override-default-text-selection-of-android-webview-os-4-1"">How to override default text selection of android webview os 4.1+?</a></p>

<p>for version 4.0. to 4.3 text selection
<a href=""https://stackoverflow.com/questions/23277479/webview-text-selection-not-clearing?answertab=votes#tab-top"">Webview text selection not clearing</a></p>
",vikoo,Community,1427738490,1427738490,1495535492
http://stackoverflow.com/a/29354206/1243487,Generate a random point in a specific plane in C,2504,Dezhou Zhang,rici,1427731540,1550230259,1427735756,https://stackoverflow.com/questions/29350965/generate-a-random-point-in-a-specific-plane-in-c,"<h2>The Problem</h2>

<p>As mentioned in the comments, the question was under specified. Despite that it's a interesting question. Because no distribution was given I just picked one. Here is the more precise(?)/general(?) question I will answer:</p>

<blockquote>
  <p>Suppose I have a plane <code>P</code> in <code>R^3</code> defined by <code>ax + by + cz = d</code>.</p>
  
  <p>Let <code>c</code> be in the point on <code>P</code> closest to the origin.</p>
  
  <p>How can I uniformly choose a point on <code>P</code> within some radius <code>r</code> of <code>c</code>?</p>
</blockquote>

<h2>The Algorithm</h2>

<p>Let <code>n = (a,b,c)</code>. <code>n</code> is the vector normal to <code>P</code>.</p>

<h1>direction</h1>

<ol>
<li><p>Generate any non-zero vector on the plane <code>ax + by + cz = d</code>, call it <code>w</code>. You can do this by taking the cross product of <code>n</code> with any non-zero vector not parallel to <code>n</code>.</p></li>
<li><p>Rotate <code>w</code> around <code>n</code> by a random angle in <code>[0,2pi)</code>. You can do this using <a href=""http://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula"" rel=""nofollow noreferrer"">http://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula</a>.</p></li>
<li><p>so , now you got direction by normalizing it</p></li>
</ol>

<pre><code>direction = direction  /  direction.magnitude

</code></pre>

<h1>origin of the ray</h1>

<ol>
<li><p>If <code>d</code> is 0, we're done. Otherwise:</p></li>
<li><p>Calculate  c = distance of plane from  Vector3(0 , 0 , 0)<br>
according to <a href=""http://en.wikipedia.org/wiki/Distance_from_a_point_to_a_plane"" rel=""nofollow noreferrer"">http://en.wikipedia.org/wiki/Distance_from_a_point_to_a_plane</a>.</p></li>
<li><p>Translate Origin of ray </p></li>
</ol>

<pre><code> origin of the ray = vector3.zero +  c * ( n )
</code></pre>

<p>scale = random.range(min , max)</p>

<h3>So the point is</h3>

<ul>
<li>origin_of_the_ray + scale * (direction_)</li>
</ul>

<h2>The Code</h2>

<p>Here is my C implementation of the algorithm. I wrote all the vector machinery from scratch so it's a little messy. I have not tested this throughly.</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;time.h&gt;
#include &lt;math.h&gt;

typedef struct {
    double x, y, z;
} vec3;

vec3 vec(double x, double y, double z);
vec3 crossp(vec3 u, vec3 v);
vec3 add(vec3 u, vec3 v);
double dotp(vec3 u, vec3 v);
double norm2(vec3 u);
double norm(vec3 u);
vec3 scale(vec3 u, double s);
vec3 normalize(vec3 u);
void print_vec3(vec3 u);

// generates a random point on the plane ax + by + cz = d
vec3 random_on_plane(double r, double a, double b, double c, double d) {
    // The normal vector for the plane
    vec3 n = vec(a, b, c);

    // create a normal vector on the plane ax + by + cz = 0
    // we take any vector not parallel to n
    // and find the cross product
    vec3 w;
    if (n.x == 0)
        w = crossp(n, vec(1,0,0));
    else
        w = crossp(n, vec(0,0,1));

    // rotate the vector around n by a random angle
    // using Rodrigues' rotation formula
    // http://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula
    double theta = ((double)rand() / RAND_MAX) * M_PI;
    vec3 k = normalize(n);
    w = add(scale(w, cos(theta)),
            scale(crossp(k, w), sin(theta)));

    // Scale the vector fill our disk.
    // If the radius is zero, generate unit vectors
    if (r == 0) {
        w = scale(w, r/norm(w));
    } else {
        double rand_r = ((double)rand() / RAND_MAX) * r;
        w = scale(w, rand_r/norm(w));
    }

    // now translate the vector from ax + by + cz = 0
    // to the plane ax + by + cz = d
    // http://en.wikipedia.org/wiki/Distance_from_a_point_to_a_plane
    if (d != 0) {
        vec3 t = scale(n, d / norm2(n));
        w = add(w, t);
    }

    return w;
}

int main(void) {
    int i;
    srand(time(NULL));

    for (i = 0; i &lt; 100; i++) {
        vec3 r = random_on_plane(10, 1, 1, 1, 1);
        printf(""random v = "");
        print_vec3(r);
        printf(""sum = %f, norm = %f\n"", r.x + r.y + r.z, norm(r));
    }
}

vec3 vec(double x, double y, double z) {
    vec3 u;
    u.x = x;
    u.y = y;
    u.z = z;
    return u;
}

vec3 crossp(vec3 u, vec3 v) {
    vec3 w;
    w.x = (u.y * v.z) - (u.z * v.y);
    w.y = (u.z * v.x) - (u.x * v.z);
    w.z = (u.x * v.y) - (u.y * v.x);
    return w;
}

double dotp(vec3 u, vec3 v) {
    return (u.x * v.x) + (u.y * v.y) + (u.z * v.z);
}

double norm2(vec3 u) {
    return dotp(u, u);
}

double norm(vec3 u) {
    return sqrt(norm2(u));
}

vec3 scale(vec3 u, double s) {
    u.x *= s;
    u.y *= s;
    u.z *= s;
    return u;
}

vec3 add(vec3 u, vec3 v) {
    u.x += v.x;
    u.y += v.y;
    u.z += v.z;
    return u;
}

vec3 normalize(vec3 u) {
    return scale(u, 1/norm(u));
}

void print_vec3(vec3 u) {
    printf(""%f %f %f\n"", u.x, u.y, u.z);
}
</code></pre>
",axblount,Pavan,1427742359,1550230259,1550230259
http://stackoverflow.com/a/29376445/1483200,JavaFX ScrollPane border and background,20930,Nuntipat Narkthong,Community,1373345353,1486555035,1495542748,https://stackoverflow.com/questions/17540137/javafx-scrollpane-border-and-background,"<p>In the current version of JavaFX 8, you can use the edge-to-edge style class to remove the border entirely:</p>

<pre><code>&lt;ScrollPane styleClass=""edge-to-edge""/&gt;
</code></pre>
",Mike Hearn,,1427828576,1427828576,0
http://stackoverflow.com/a/2938020/485241,How to add a new method to a php object on the fly?,49525,MadBad,,1275209352,1550479481,0,https://stackoverflow.com/questions/2938004/how-to-add-a-new-method-to-a-php-object-on-the-fly,"<p>You can harness <a href=""http://php.net/manual/en/language.oop5.overloading.php"" rel=""noreferrer""><code>__call</code></a> for this:</p>

<pre><code>class Foo
{
    public function __call($method, $args)
    {
        if (isset($this-&gt;$method)) {
            $func = $this-&gt;$method;
            return call_user_func_array($func, $args);
        }
    }
}

$foo = new Foo();
$foo-&gt;bar = function () { echo ""Hello, this function is added at runtime""; };
$foo-&gt;bar();
</code></pre>
",karim79,Ivan Castellanos,1275210004,1363208394,1363208394
http://stackoverflow.com/a/29442039/504611,Android Spannablecontent With Rounded Corners,6239,ericlokness,Community,1405093962,1538449434,1495542301,https://stackoverflow.com/questions/24701762/android-spannablecontent-with-rounded-corners,"<p>I further improved mvandillen class.</p>

<p>This seems to work very fine:</p>

<pre><code>public class RoundedBackgroundSpan extends ReplacementSpan
    {
        private final int mPadding = 10;
        private int mBackgroundColor;
        private int mTextColor;

        public RoundedBackgroundSpan(int backgroundColor, int textColor) {
            super();
            mBackgroundColor = backgroundColor;
            mTextColor = textColor;
        }

        @Override
        public int getSize(Paint paint, CharSequence text, int start, int end, Paint.FontMetricsInt fm) {
            return (int) (mPadding + paint.measureText(text.subSequence(start, end).toString()) + mPadding);
        }

        @Override
        public void draw(Canvas canvas, CharSequence text, int start, int end, float x, int top, int y, int bottom, Paint paint)
        {
            float width = paint.measureText(text.subSequence(start, end).toString());
            RectF rect = new RectF(x, top+mPadding, x + width + 2*mPadding, bottom);
            paint.setColor(mBackgroundColor);
            canvas.drawRoundRect(rect, mPadding, mPadding, paint);
            paint.setColor(mTextColor);
            canvas.drawText(text, start, end, x+mPadding, y, paint);
        }
    }
</code></pre>
",Daniele B,,1428114050,1428114050,0
http://stackoverflow.com/a/29452781/1006828,RegEx: Grabbing values between quotation marks,291071,deadbug,Alan Moore,1223180526,1540223501,1394904728,https://stackoverflow.com/questions/171480/regex-grabbing-values-between-quotation-marks,"<p>Lets see two efficient ways that deal with escaped quotes. These patterns are not designed to be concise nor aesthetic, but to be efficient.</p>

<p>These ways use the first character discrimination to quickly find quotes in the string without the cost of an alternation. <em>(The idea is to discard quickly characters that are not quotes without to test the two branches of the alternation.)</em></p>

<p>Content between quotes is described with an unrolled loop (instead of a repeated alternation) to be more efficient too: <code>[^""\\]*(?:\\.[^""\\]*)*</code></p>

<p>Obviously to deal with strings that haven't balanced quotes, you can use possessive quantifiers instead: <code>[^""\\]*+(?:\\.[^""\\]*)*+</code> or a workaround to emulate them, to prevent too much backtracking. You can choose too that a quoted part can be an opening quote until the next (non-escaped) quote or the end of the string. In this case there is no need to use possessive quantifiers, you only need to make the last quote optional.</p>

<p>Notice: sometimes quotes are not escaped with a backslash but by repeating the quote. In this case the content subpattern looks like this: <code>[^""]*(?:""""[^""]*)*</code></p>

<p>The patterns avoid the use of a capture group and a backreference <em>(I mean something like <code>([""']).....\1</code>)</em> and use a simple alternation but with <code>[""']</code> at the beginning, in factor.</p>

<p><strong>Perl like:</strong></p>

<pre><code>[""'](?:(?&lt;="")[^""\\]*(?s:\\.[^""\\]*)*""|(?&lt;=')[^'\\]*(?s:\\.[^'\\]*)*')
</code></pre>

<p><em>(note that <code>(?s:...)</code> is a syntactic sugar to switch on the dotall/singleline mode inside the non-capturing group. If this syntax is not supported you can easily switch this mode on for all the pattern or replace the dot with <code>[\s\S]</code>)</em></p>

<p><em>(The way this pattern is written is totally ""hand-driven"" and doesn't take account of eventual engine internal optimizations)</em></p>

<p><strong>ECMA script:</strong></p>

<pre><code>(?=[""'])(?:""[^""\\]*(?:\\[\s\S][^""\\]*)*""|'[^'\\]*(?:\\[\s\S][^'\\]*)*')
</code></pre>

<p><strong>POSIX extended:</strong></p>

<pre><code>""[^""\\]*(\\(.|\n)[^""\\]*)*""|'[^'\\]*(\\(.|\n)[^'\\]*)*'
</code></pre>

<p>or simply:</p>

<pre><code>""([^""\\]|\\.|\\\n)*""|'([^'\\]|\\.|\\\n)*'
</code></pre>
",Casimir et Hippolyte,Casimir et Hippolyte,1428192783,1476294982,1476294982
http://stackoverflow.com/a/2947012/1541408,Advantages of createElement over innerHTML?,28012,oninea,Gordon Gustafson,1275352213,1497770842,1275352864,https://stackoverflow.com/questions/2946656/advantages-of-createelement-over-innerhtml,"<p>There are several advantages to using <code>createElement</code> instead of modifying <code>innerHTML</code> (as opposed to just throwing away what's already there and replacing it) besides safety, like Pekka already mentioned:</p>

<h3>Preserves existing references to DOM elements when appending elements</h3>

<p>When you append to (or otherwise modify) <code>innerHTML</code>, all the DOM nodes inside that element have to be re-parsed and recreated. If you saved any references to nodes, they will be essentially useless, because they aren't the ones that show up anymore.</p>

<h3>Preserves event handlers attached to any DOM elements</h3>

<p>This is really just a special case (although common) of the last one. Setting <code>innerHTML</code> will not automatically reattach event handlers to the new elements it creates, so you would have to keep track of them yourself and add them manually. Event delegation can eliminate this problem in some cases.</p>

<h3>Could be simpler/faster in some cases</h3>

<p>If you are doing lots of additions, you definitely don't want to keep resetting <code>innerHTML</code> because, although faster for simple changes, repeatedly re-parsing and creating elements would be slower. The way to get around that is to build up the HTML in a string and set <code>innerHTML</code> once when you are done. Depending on the situation, the string manipulation could be slower than just creating elements and appending them.</p>

<p>Additionally, the string manipulation code may be more complicated (especially if you want it to be safe).</p>

<p>Here's a function I use sometimes that make it more convenient to use <code>createElement</code>.</p>

<pre><code>function isArray(a) {
    return Object.prototype.toString.call(a) === ""[object Array]"";
}

function make(desc) {
    if (!isArray(desc)) {
        return make.call(this, Array.prototype.slice.call(arguments));
    }

    var name = desc[0];
    var attributes = desc[1];

    var el = document.createElement(name);

    var start = 1;
    if (typeof attributes === ""object"" &amp;&amp; attributes !== null &amp;&amp; !isArray(attributes)) {
        for (var attr in attributes) {
            el[attr] = attributes[attr];
        }
        start = 2;
    }

    for (var i = start; i &lt; desc.length; i++) {
        if (isArray(desc[i])) {
            el.appendChild(make(desc[i]));
        }
        else {
            el.appendChild(document.createTextNode(desc[i]));
        }
    }

    return el;
}
</code></pre>

<p>If you call it like this:</p>

<pre><code>make([""p"", ""Here is a "", [""a"", { href:""http://www.google.com/"" }, ""link""], "".""]);
</code></pre>

<p>you get the equivalent of this HTML:</p>

<pre><code>&lt;p&gt;Here is a &lt;a href=""http://www.google.com/""&gt;link&lt;/a&gt;.&lt;/p&gt;
</code></pre>
",Matthew Crumley,Matthew Crumley,1275359915,1344999585,1344999585
http://stackoverflow.com/a/295229/148668,C++ mark as deprecated,75250,Diederik,Guillaume Racicot,1226911889,1553103258,1553103258,https://stackoverflow.com/questions/295120/c-mark-as-deprecated,"<p>This should do the trick:</p>

<pre><code>#ifdef __GNUC__
#define DEPRECATED(func) func __attribute__ ((deprecated))
#elif defined(_MSC_VER)
#define DEPRECATED(func) __declspec(deprecated) func
#else
#pragma message(""WARNING: You need to implement DEPRECATED for this compiler"")
#define DEPRECATED(func) func
#endif

...

//don't use me any more
DEPRECATED(void OldFunc(int a, float b));

//use me instead
void NewFunc(int a, double b);
</code></pre>

<p>However, you will encounter problems if a function return type has a commas in its name e.g. <code>std::pair&lt;int, int&gt;</code> as this will be interpreted by the preprocesor as passing 2 arguments to the DEPRECATED macro. In that case you would have to typedef the return type.</p>

<p>Edit: simpler (but possibly less widely compatible) version <a href=""https://stackoverflow.com/a/21265197/2651243"">here</a>.</p>
",Michael Platings,Community,1226916581,1390325962,1495542396
http://stackoverflow.com/a/2954632/18475,How do you check the Gem Version in Ruby at Runtime?,11566,Lance Pollard,,1275438901,1288771823,0,https://stackoverflow.com/questions/2954279/how-do-you-check-the-gem-version-in-ruby-at-runtime,"<pre><code>puts Gem.loaded_specs[""activesupport""].version
</code></pre>
",seangrieve,,1275445763,1275445763,0
http://stackoverflow.com/a/29556509/3408572,Are these the null-terminator rules for MultiByteToWideChar() and WideCharToMultiByte()? I don&#39;t quite understand MSDN,767,andlabs,,1428653118,1428654390,0,https://stackoverflow.com/questions/29556327/are-these-the-null-terminator-rules-for-multibytetowidechar-and-widechartomult,"<p>The documentation for the return value of <a href=""https://msdn.microsoft.com/en-us/library/windows/desktop/dd319072.aspx"" rel=""nofollow""><code>MultiByteToWideChar</code></a> says:</p>

<blockquote>
  <p>If the function succeeds and cchWideChar is 0, the return value is the required size, in characters, for the buffer indicated by lpWideCharStr.</p>
</blockquote>

<p>So, to your questions.</p>

<blockquote>
  <p>If I pass 0 for the output buffer count, will the returned count include null terminators or not?</p>
</blockquote>

<p>Yes, if you passed <code>-1</code> to <code>cbMultiByte</code>. No if you passed <code>strlen(lpMultiByteStr)</code>.</p>

<blockquote>
  <p>For the actual conversion, do I say the output buffer's size includes the null terminator or not?</p>
</blockquote>

<p>Yes if you want the buffer to be null-terminated, no if you do not.</p>

<hr>

<p>So, having done:</p>

<pre><code>n = MultiByteToWideChar(..., -1, NULL, 0);
</code></pre>

<p>You can choose to allocate a buffer of length <code>n</code> if you want the buffer null-terminated, or allocate a buffer of length <code>n-1</code> if you do not want it null-terminated. Obviously you need to pass either <code>n</code> or <code>n-1</code> as the <code>cchWideChar</code> parameter, to match the actual length of your buffer.</p>

<hr>

<p>Looking at your code, it's clear that you want to create null-terminated buffers. Your code for <code>toUTF16</code> is correct. Your code for <code>toUTF8</code> is not. You should use the same length handling code as you did in <code>toUTF16</code>. What's more, your final parameter to <code>WideCharToMultiByte</code> is a little imprecise. It's a pointer to a boolean. The code should be:</p>

<pre><code>#define WCTMB(wstr, str, bufsiz) WideCharToMultiByte(CP_UTF8, 0, wstr, -1, str, bufsiz, NULL, NULL)

char *toUTF8(const WCHAR *wstr)
{
    char *str;
    int n;

    n = WCTMB(wstr, NULL, 0);
    if (n == 0)
        logLastError(""error figuring out number of characters to convert to in toUTF8()"");
    str = (char *) uiAlloc(n * sizeof (char), ""char[]"");
    if (WCTMB(wstr, str, n) != n)
        logLastError(""error converting from UTF-16 to UTF-8 in toUTFF8()"");
    return str;
}
</code></pre>
",David Heffernan,David Heffernan,1428653746,1428654390,1428654390
http://stackoverflow.com/a/2955878/1025836,PHP function to make slug (URL string),193633,Andres SK,vaxquis,1275457277,1562227576,1560159759,https://stackoverflow.com/questions/2955251/php-function-to-make-slug-url-string,"<p>Instead of a lengthy replace, try this one:</p>

<pre><code>public static function slugify($text)
{
  // replace non letter or digits by -
  $text = preg_replace('~[^\pL\d]+~u', '-', $text);

  // transliterate
  $text = iconv('utf-8', 'us-ascii//TRANSLIT', $text);

  // remove unwanted characters
  $text = preg_replace('~[^-\w]+~', '', $text);

  // trim
  $text = trim($text, '-');

  // remove duplicate -
  $text = preg_replace('~-+~', '-', $text);

  // lowercase
  $text = strtolower($text);

  if (empty($text)) {
    return 'n-a';
  }

  return $text;
}
</code></pre>

<p>This was based off the one in Symfony's Jobeet tutorial.</p>
",Maerlyn,leoap,1275465426,1531857892,1531857892
http://stackoverflow.com/a/29575389/6763239,Default values for models in rails,13328,Denis Papushaev,,1428737079,1532457988,0,https://stackoverflow.com/questions/29575259/default-values-for-models-in-rails,"<p>Defining defaults in your migration has some disadvantages as well. This will not work when you just call <code>Model.new</code>.</p>

<p>I prefer to write an <a href=""http://guides.rubyonrails.org/active_record_callbacks.html#after-initialize-and-after-find""><code>after_initialize</code></a> callback, which lets me set default attributes:</p>

<pre><code>class Model &lt; ActiveRecord::Base
  after_initialize :set_defaults, unless: :persisted?
  # The set_defaults will only work if the object is new

  def set_defaults
    self.attribute  ||= 'some value'
    self.bool_field = true if self.bool_field.nil?
  end
end 
</code></pre>
",Sharvy Ahmed,Sharvy Ahmed,1428737949,1428738905,1428738905
http://stackoverflow.com/a/29642072/331379,Supporting unique_ptr in an implementation of Active Object,310,John,Community,1429056816,1429074937,1495539817,https://stackoverflow.com/questions/29639519/supporting-unique-ptr-in-an-implementation-of-active-object,"<p>Here's a rough sketch of a type-erasing move-only wrapper capable of holding any move-constructible function object that can be called with no arguments.</p>

<pre><code>struct Message {
    struct holder_base {
        virtual void operator()() = 0;
        virtual ~holder_base() = default;
    };

    template&lt;class F&gt;
    struct holder : holder_base {
        holder(F&amp;&amp; f) : func(std::move(f)) {}
        void operator()() override { func(); }
        F func;
    }; 

    Message() = default;
    Message(Message&amp;&amp;) = default;
    ~Message() = default;
    Message&amp; operator=(Message&amp;&amp;) = default;

    // copy members implicitly deleted

    template&lt;class F&gt;
    Message(F func) : p_func(new holder&lt;F&gt;(std::move(func))) {}

    void operator()() const { (*p_func)(); }
    std::unique_ptr&lt;holder_base&gt; p_func;
};
</code></pre>
",T.C.,,1429074937,1429074937,0
http://stackoverflow.com/a/2966703/467582,Understanding what goes on with textarea selection with JavaScript,16606,brad,random,1230673024,1556874079,1342302811,https://stackoverflow.com/questions/401593/understanding-what-goes-on-with-textarea-selection-with-javascript,"<pre><code>function get_selection(the_id)
{
    var e = document.getElementById(the_id);

    //Mozilla and DOM 3.0
    if('selectionStart' in e)
    {
        var l = e.selectionEnd - e.selectionStart;
        return { start: e.selectionStart, end: e.selectionEnd, length: l, text: e.value.substr(e.selectionStart, l) };
    }
    //IE
    else if(document.selection)
    {
        e.focus();
        var r = document.selection.createRange();
        var tr = e.createTextRange();
        var tr2 = tr.duplicate();
        tr2.moveToBookmark(r.getBookmark());
        tr.setEndPoint('EndToStart',tr2);
        if (r == null || tr == null) return { start: e.value.length, end: e.value.length, length: 0, text: '' };
        var text_part = r.text.replace(/[\r\n]/g,'.'); //for some reason IE doesn't always count the \n and \r in the length
        var text_whole = e.value.replace(/[\r\n]/g,'.');
        var the_start = text_whole.indexOf(text_part,tr.text.length);
        return { start: the_start, end: the_start + text_part.length, length: text_part.length, text: r.text };
    }
    //Browser not supported
    else return { start: e.value.length, end: e.value.length, length: 0, text: '' };
}

function replace_selection(the_id,replace_str)
{
    var e = document.getElementById(the_id);
    selection = get_selection(the_id);
    var start_pos = selection.start;
    var end_pos = start_pos + replace_str.length;
    e.value = e.value.substr(0, start_pos) + replace_str + e.value.substr(selection.end, e.value.length);
    set_selection(the_id,start_pos,end_pos);
    return {start: start_pos, end: end_pos, length: replace_str.length, text: replace_str};
}

function set_selection(the_id,start_pos,end_pos)
{
    var e = document.getElementById(the_id);

    //Mozilla and DOM 3.0
    if('selectionStart' in e)
    {
        e.focus();
        e.selectionStart = start_pos;
        e.selectionEnd = end_pos;
    }
    //IE
    else if(document.selection)
    {
        e.focus();
        var tr = e.createTextRange();

        //Fix IE from counting the newline characters as two seperate characters
        var stop_it = start_pos;
        for (i=0; i &lt; stop_it; i++) if( e.value[i].search(/[\r\n]/) != -1 ) start_pos = start_pos - .5;
        stop_it = end_pos;
        for (i=0; i &lt; stop_it; i++) if( e.value[i].search(/[\r\n]/) != -1 ) end_pos = end_pos - .5;

        tr.moveEnd('textedit',-1);
        tr.moveStart('character',start_pos);
        tr.moveEnd('character',end_pos - start_pos);
        tr.select();
    }
    return get_selection(the_id);
}

function wrap_selection(the_id, left_str, right_str, sel_offset, sel_length)
{
    var the_sel_text = get_selection(the_id).text;
    var selection =  replace_selection(the_id, left_str + the_sel_text + right_str );
    if(sel_offset !== undefined &amp;&amp; sel_length !== undefined) selection = set_selection(the_id, selection.start +  sel_offset, selection.start +  sel_offset + sel_length);
    else if(the_sel_text == '') selection = set_selection(the_id, selection.start + left_str.length, selection.start + left_str.length);
    return selection;
}
</code></pre>
",user357565,navit,1275574069,1482134903,1482134903
http://stackoverflow.com/a/2967461/3609487,How to force PyYAML to load strings as unicode objects?,10281,Petr Viktorin,Petr Viktorin,1274570851,1275622249,1274610659,https://stackoverflow.com/questions/2890146/how-to-force-pyyaml-to-load-strings-as-unicode-objects,"<p>Here's a version which overrides the PyYAML handling of strings by always outputting <code>unicode</code>. In reality, this is probably the identical result of the other response I posted except shorter (i.e. you still need to make sure that strings in custom classes are converted to <code>unicode</code> or passed <code>unicode</code> strings yourself if you use custom handlers):</p>

<pre><code># -*- coding: utf-8 -*-
import yaml
from yaml import Loader, SafeLoader

def construct_yaml_str(self, node):
    # Override the default string handling function 
    # to always return unicode objects
    return self.construct_scalar(node)
Loader.add_constructor(u'tag:yaml.org,2002:str', construct_yaml_str)
SafeLoader.add_constructor(u'tag:yaml.org,2002:str', construct_yaml_str)

print yaml.load(u""""""---
- spam
- eggs
- bacon
- crme brle
- spam
"""""")
</code></pre>

<p>(The above gives <code>[u'spam', u'eggs', u'bacon', u'cr\xe8me br\xfbl\xe9e', u'spam']</code>)</p>

<p>I haven't tested it on <code>LibYAML</code> (the c-based parser) as I couldn't compile it though, so I'll leave the other answer as it was.</p>
",cryo,cryo,1275579350,1275622249,1275622249
http://stackoverflow.com/a/29677616/230468,Weighted percentile using numpy,9452,user308827,,1392695732,1559921650,0,https://stackoverflow.com/questions/21844024/weighted-percentile-using-numpy,"<h2>Completely vectorized numpy solution</h2>

<p>Here is the code I'm using. It's not an optimal one (which I'm unable write in <code>numpy</code>), but still much faster and more reliable than accepted solution</p>

<pre class=""lang-py prettyprint-override""><code>def weighted_quantile(values, quantiles, sample_weight=None, 
                      values_sorted=False, old_style=False):
    """""" Very close to numpy.percentile, but supports weights.
    NOTE: quantiles should be in [0, 1]!
    :param values: numpy.array with data
    :param quantiles: array-like with many quantiles needed
    :param sample_weight: array-like of the same length as `array`
    :param values_sorted: bool, if True, then will avoid sorting of
        initial array
    :param old_style: if True, will correct output to be consistent
        with numpy.percentile.
    :return: numpy.array with computed quantiles.
    """"""
    values = np.array(values)
    quantiles = np.array(quantiles)
    if sample_weight is None:
        sample_weight = np.ones(len(values))
    sample_weight = np.array(sample_weight)
    assert np.all(quantiles &gt;= 0) and np.all(quantiles &lt;= 1), \
        'quantiles should be in [0, 1]'

    if not values_sorted:
        sorter = np.argsort(values)
        values = values[sorter]
        sample_weight = sample_weight[sorter]

    weighted_quantiles = np.cumsum(sample_weight) - 0.5 * sample_weight
    if old_style:
        # To be convenient with numpy.percentile
        weighted_quantiles -= weighted_quantiles[0]
        weighted_quantiles /= weighted_quantiles[-1]
    else:
        weighted_quantiles /= np.sum(sample_weight)
    return np.interp(quantiles, weighted_quantiles, values)
</code></pre>

<p>Examples: </p>

<blockquote>
  <p>weighted_quantile([1, 2, 9, 3.2, 4], [0.0, 0.5, 1.])</p>
</blockquote>

<p>array([ 1. ,  3.2,  9. ])</p>

<blockquote>
  <p>weighted_quantile([1, 2, 9, 3.2, 4], [0.0, 0.5, 1.], sample_weight=[2, 1, 2, 4, 1])</p>
</blockquote>

<p>array([ 1. ,  3.2,  9. ])</p>
",Alleo,Max Ghenis,1429194155,1554938939,1554938939
http://stackoverflow.com/a/2976714/486547,JavaScript - How do I get the URL of script being called?,57313,MikeC8,Eric Leschinski,1275675223,1543931063,1384576081,https://stackoverflow.com/questions/2976651/javascript-how-do-i-get-the-url-of-script-being-called,"<p>From <a href=""http://feather.elektrum.org/book/src.html"" rel=""noreferrer"">http://feather.elektrum.org/book/src.html</a>:</p>

<pre><code>var scripts = document.getElementsByTagName('script');
var index = scripts.length - 1;
var myScript = scripts[index];
</code></pre>

<p>The variable <code>myScript</code> now has the script dom element. You can get the src url by using <code>myScript.src</code>.</p>

<p>Note that this needs to execute as part of the initial evaluation of the script. If you want to not pollute the Javascript namespace you can do something like:</p>

<pre><code>var getScriptURL = (function() {
    var scripts = document.getElementsByTagName('script');
    var index = scripts.length - 1;
    var myScript = scripts[index];
    return function() { return myScript.src; };
})();
</code></pre>
",lambacck,lambacck,1275675743,1275676082,1275676082
http://stackoverflow.com/a/29792313/1332026,Add a search filter on RecyclerView with Cards?,31894,priyank,hoijui,1429692364,1480423290,1444926890,https://stackoverflow.com/questions/29792187/add-a-search-filter-on-recyclerview-with-cards,"<p>Yes it is possible Your <code>RecyclerView.Adapter</code> can implement <code>Filterable</code>. After that you have to override <code>Filter getFilter()</code> method.</p>

<p>You have to define your own filter as is shown in the code below:</p>

<pre><code>@Override
public Filter getFilter() {
    return new YourFilterClass();
}
</code></pre>

<p><strong>YourFilterClass</strong></p>

<pre><code>class YourFilterClass extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            //Here you have to implement filtering way
            final FilterResults results = new FilterResults();
            //logic to filtering
            results.values = ...
            results.count = ...
            return results;
        }

        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            // here you can use result - (f.e. set in in adapter list)
        }
}
</code></pre>

<h1>Example</h1>

<pre><code>public class UserListAdapter extends RecyclerView.Adapter&lt;UserListAdapter.ViewHolder&gt; implements Filterable {

    private final List&lt;User&gt; userList;

    private final List&lt;User&gt; filteredUserList;

    private UserFilter userFilter;

    public UserListAdapter(Context context) {
        this.userList =new ArrayList&lt;&gt;();
        this.filteredUserList = new ArrayList&lt;&gt;();
    }


    ///... other methods

    @Override
    public Filter getFilter() {
       if(userFilter == null)
             userFilter = new UserFilter(this, userList);
        return userFilter;
    }

    private static class UserFilter extends Filter {

        private final UserListAdapter adapter;

        private final List&lt;User&gt; originalList;

        private final List&lt;User&gt; filteredList;

        private UserFilter(UserListAdapter adapter, List&lt;User&gt; originalList) {
            super();
            this.adapter = adapter;
            this.originalList = new LinkedList&lt;&gt;(originalList);
            this.filteredList = new ArrayList&lt;&gt;();
        }

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            filteredList.clear();
            final FilterResults results = new FilterResults();

            if (constraint.length() == 0) {
                filteredList.addAll(originalList);
            } else {
                final String filterPattern = constraint.toString().toLowerCase().trim();

                for (final User user : originalList) {
                    if (user.getName().contains(filterPattern)) {
                        filteredList.add(user);
                    }
                }
            }
            results.values = filteredList;
            results.count = filteredList.size();
            return results;
        }

        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            adapter.filteredUserList.clear();
            adapter.filteredUserList.addAll((ArrayList&lt;User&gt;) results.values);
            adapter.notifyDataSetChanged();
        }
    }
}
</code></pre>

<p>After that in the place when you want to filtering call:</p>

<pre><code>userListAdapter.getFilter().filter(text)
</code></pre>
",Konrad Krakowiak,Konrad Krakowiak,1429692651,1467976916,1467976916
http://stackoverflow.com/a/29825204/2528668,Eigen Spline interpolation - How to get spline y value at arbitray point x?,5016,windenergy,,1429788349,1429796349,0,https://stackoverflow.com/questions/29822041/eigen-spline-interpolation-how-to-get-spline-y-value-at-arbitray-point-x,"<p>I see how that could be confusing. The Eigen Spline fitting module, as you use it, does not model a function R -> R. You could, for example, build a spiral with it. This means that you cannot expect to get an Y value from an X value, and instead you pick out points on the spline by how far along the spline they are (hence the chord lengths).</p>

<p>It is possible to use the module to model a function, albeit not terribly intuitive: consider your Y values points in R<sup>1</sup>, and instead of letting Eigen calculate the chord lengths, supply your own set of knot parameters that are spaced like your X values (scaled down to [0,1] so the algorithm can cope). It could be packaged something like this:</p>

<pre><code>#include &lt;Eigen/Core&gt;
#include &lt;unsupported/Eigen/Splines&gt;

#include &lt;iostream&gt;

class SplineFunction {
public:
  SplineFunction(Eigen::VectorXd const &amp;x_vec,
                 Eigen::VectorXd const &amp;y_vec)
    : x_min(x_vec.minCoeff()),
      x_max(x_vec.maxCoeff()),
      // Spline fitting here. X values are scaled down to [0, 1] for this.
      spline_(Eigen::SplineFitting&lt;Eigen::Spline&lt;double, 1&gt;&gt;::Interpolate(
                y_vec.transpose(),
                 // No more than cubic spline, but accept short vectors.

                std::min&lt;int&gt;(x_vec.rows() - 1, 3),
                scaled_values(x_vec)))
  { }

  double operator()(double x) const {
    // x values need to be scaled down in extraction as well.
    return spline_(scaled_value(x))(0);
  }

private:
  // Helpers to scale X values down to [0, 1]
  double scaled_value(double x) const {
    return (x - x_min) / (x_max - x_min);
  }

  Eigen::RowVectorXd scaled_values(Eigen::VectorXd const &amp;x_vec) const {
    return x_vec.unaryExpr([this](double x) { return scaled_value(x); }).transpose();
  }

  double x_min;
  double x_max;

  // Spline of one-dimensional ""points.""
  Eigen::Spline&lt;double, 1&gt; spline_;
};

int main(int argc, char const* argv[])
{
  Eigen::VectorXd xvals(3);
  Eigen::VectorXd yvals(xvals.rows());

  xvals &lt;&lt; 0, 15, 30;
  yvals &lt;&lt; 0, 12, 17;

  SplineFunction s(xvals, yvals);

  std::cout &lt;&lt; s(12.34) &lt;&lt; std::endl;
}
</code></pre>
",Wintermute,,1429796349,1429796349,0
http://stackoverflow.com/a/29832646/6124862,Dangers of sys.setdefaultencoding(&#39;utf-8&#39;),15658,anatoly techtonik,smci,1424602525,1516070294,1510783478,https://stackoverflow.com/questions/28657010/dangers-of-sys-setdefaultencodingutf-8,"<p>The original poster asked for code which demonstrates that the switch is harmful<em>except</em> that it ""hides"" bugs unrelated to the switch.</p>

<h2>Summary of conclusions</h2>

<p>Based on both experience and evidence I've collected, here are the conclusions I've arrived at.</p>

<ol>
<li><p>Setting the defaultencoding to UTF-8 nowadays is <strong>safe</strong>, except for specialised applications, handling files from non unicode ready systems.</p></li>
<li><p>The ""official"" rejection of the switch is based on <strong>reasons no longer relevant</strong> for a vast majority of end users (not library providers), so we should stop discouraging users to set it.</p></li>
<li><p>Working in a model that handles Unicode properly by default is far better suited for applications for <strong>inter-systems communications</strong> than manually working with unicode APIs.</p></li>
</ol>

<p>Effectively, modifying the default encoding <strong>very frequently</strong> avoids a number of <a href=""http://bugs.python.org/issue1668295"" rel=""noreferrer"">user headaches</a> in the vast majority of use cases. Yes, there are situations in which programs dealing with multiple encodings will silently misbehave, but since this switch can be enabled piecemeal, this is <strong>not a problem in end-user code</strong>.</p>

<p>More importantly, enabling this flag is a <em>real advantage</em> is users' code, both by reducing the overhead of having to manually handle Unicode conversions, cluttering the code and making it less readable, but also by avoiding potential bugs when the programmer fails to do this properly in all cases.</p>

<hr>

<p>Since these claims are pretty much the exact opposite of Python's official line of communication, I think the an explanation for these conclusions is warranted.</p>

<h2>Examples of successfully using a modified defaultencoding in the wild</h2>

<ol>
<li><p>Dave Malcom of Fedora believed it is <a href=""https://fedoraproject.org/wiki/Features/PythonEncodingUsesSystemLocale"" rel=""noreferrer""><em>always</em> right.</a> He proposed, after investigating risks, to change distribution wide def.enc.=UTF-8 for <em>all</em> Fedora users.</p>

<p>Hard fact presented though <em>why</em> Python would break is only the hashing behavior I <a href=""https://stackoverflow.com/a/29558302/4583360"">listed</a>, which is never picked up by any other opponent within the core community as a reason to worry about or even by the <a href=""http://bugs.python.org/issue1052098#msg54297"" rel=""noreferrer"">same person</a>, when working on user tickets. </p>

<p><a href=""http://article.gmane.org/gmane.comp.python.devel/109970"" rel=""noreferrer"">Resume of Fedora</a>: Admittedly, the change itself was described as ""wildly unpopular"" with the core developers, and it was accused of being inconsistent with previous versions.</p></li>
<li><p>There are <a href=""http://code.openhub.net/search?s=setdefaultencoding"" rel=""noreferrer"">3000 projects alone at openhub</a> doing it. They have a slow search frontend, but scanning over it, I estimate 98% are using UTF-8. Nothing found about nasty surprises.</p></li>
<li><p>There are <a href=""https://github.com/search?utf8=%E2%9C%93&amp;q=setdefaultencoding+language%3APython+utf-8&amp;type=Code&amp;ref=searchresults"" rel=""noreferrer"">18000(!) github master branches</a> with it changed.</p>

<p>While the change is ""<a href=""http://article.gmane.org/gmane.comp.python.devel/109970"" rel=""noreferrer"">unpopular</a>"" at the core community its <em>pretty</em> popular in the user base. Though this could be disregarded, since users are known to use hacky solutions, I don't think this is a relevant argument due to my next point.</p></li>
<li><p>There are only <a href=""https://github.com/search?l=python&amp;o=desc&amp;q=setdefaultencoding+language%3APython+utf-8&amp;ref=searchresults&amp;s=updated&amp;type=Issues&amp;utf8=%E2%9C%93"" rel=""noreferrer"">150 bugreports</a> total on GitHub due to this. At a rate of effectively 100%, the change seems to be positive, not negative.</p>

<p>To summarize the existing issues people <em>have</em> run into, I've scanned through all of the aforementioned tickets.</p>

<ul>
<li><p>Chaging def.enc. to UTF-8 is typically <em>introduced</em> but not removed in the issue closing process, most often as a solution. Some bigger ones excusing it as <a href=""https://github.com/ioam/holoviews/issues/29"" rel=""noreferrer"">temporary fix</a>, considering the ""bad press"" it has, but far more bug reporters are <a href=""https://github.com/seecr/weightless-core/issues/2"" rel=""noreferrer"">just</a><a href=""https://github.com/ajs124/autokey/issues/165"" rel=""noreferrer"">glad</a> about <a href=""https://github.com/joeyespo/grip/issues/86"" rel=""noreferrer"">the fix</a>.</p></li>
<li><p>A few (1-5?) projects modified their code doing the type conversions manually so that they did not need to change the default anymore.</p></li>
<li><p>In two instances I see someone claiming that with def.enc. set to UTF-8 leads to a complete lack <a href=""https://github.com/meibenjin/GoogleSearchCrawler/issues/3"" rel=""noreferrer"">of output</a> <a href=""https://github.com/ipython/ipython/issues/8071"" rel=""noreferrer"">entirely</a>, without explaining the test setup. I could not verify the claim, and I tested one and found the opposite to be true.</p></li>
<li><p>One <a href=""https://github.com/fritzy/SleekXMPP/issues/82"" rel=""noreferrer"">claims</a> his ""system"" might depend on not changing it but we do not learn why. </p></li>
<li><p>One (and <em>only</em> one) had a real reason to avoid it: <a href=""https://github.com/ipython/ipython/pull/252"" rel=""noreferrer"">ipython</a> either uses a 3rd party module or the test runner modified their process in an uncontrolled way (it is never disputed that a def.enc. change is advocated by its <em>proponents</em> only at interpreter setup time, i.e. when 'owning' the process).</p></li>
</ul></li>
<li><p>I found zero indication that the different hashes of ''  and u''   causes problems in real-world code.</p></li>
<li><p>Python does <em>not</em> ""break""</p>

<p>After changing the setting to UTF-8, no feature of Python covered by unit tests is working any differently than without the switch. The switch <em>itself</em>, though, is not tested at all.</p></li>
<li><p>It is advised on bugs.python.org to frustrated users</p>

<p>Examples <a href=""http://bugs.python.org/issue6611"" rel=""noreferrer"">here</a>, <a href=""http://bugs.python.org/issue1052098#msg54297"" rel=""noreferrer"">here</a> or <a href=""http://bugs.python.org/msg31343"" rel=""noreferrer"">here</a>
(often connected with the official line of warning)</p>

<p>The first one demonstrates how established the switch is in Asia (compare also with the github argument). </p></li>
<li><p>Ian Bicking <a href=""http://www.ianbicking.org/illusive-setdefaultencoding.html"" rel=""noreferrer"">published</a> his support for <em>always</em> enabling this behavior.</p>

<blockquote>
  <p>I can make my systems and communications consistently UTF-8, things will just get better. I really don't see a downside. But why does Python make it SO DAMN HARD [...] I feel like someone decided they were smarter than me, but I'm not sure I believe them.</p>
</blockquote></li>
<li><p>Martijn Fassen, while refuting Ian, <a href=""http://blog.startifact.com/posts/older/changing-the-python-default-encoding-considered-harmful.html"" rel=""noreferrer"">admitted</a> that ASCII might have been wrong in the first place.</p>

<blockquote>
  <p>I believe if, say, Python 2.5, shipped with a default encoding of UTF-8, it wouldn't actually break anything. But if I did it for my Python, I'd have problems soon as I gave my code to someone else.</p>
</blockquote></li>
<li><p>In Python3, they don't ""practice what they preach""</p>

<p>While opposing any def.enc. change so harshly because of environment dependent code or implicitness, a discussion <a href=""http://bugs.python.org/issue19846"" rel=""noreferrer"">here</a> revolves about <a href=""http://bugs.python.org/issue9549"" rel=""noreferrer"">Python3</a>'s problems with its <a href=""http://nedbatchelder.com/text/unipain/unipain.html#35"" rel=""noreferrer"">'unicode sandwich'</a> paradigm and the corresponding required implicit assumptions.</p>

<p>Further they created possibilities to write valid Python3 code like:</p>

<pre><code>&gt;&gt;&gt; from  import *        
&gt;&gt;&gt; def (): (())
&gt;&gt;&gt; ((' ') + )

</code></pre></li>
<li><p>DiveIntoPython <a href=""http://www.diveintopython.net/xml_processing/unicode.html"" rel=""noreferrer"">recommends it</a>.</p></li>
<li><p><a href=""https://mail.python.org/pipermail/python-dev/2009-August/091362.html"" rel=""noreferrer"">In this thread</a>, Guido himself <a href=""https://mail.python.org/pipermail/python-dev/2009-August/091418.html"" rel=""noreferrer"">advises</a> a <a href=""https://github.com/cjw296"" rel=""noreferrer"">professional end user</a> to use a process specific environt with the switch set to ""create a custom Python environment for each project.""</p>

<blockquote>
  <p>The fundamental reason the designers of Python's 2.x standard library don't want you to be able to set the default encoding in your app, is that the standard library is written with the assumption that the default encoding is fixed, and no guarantees about the correct workings of the standard library can be made when you change it. There are no tests for this situation. Nobody knows what will fail when. And you (or worse, your users) will come back to us with complaints if the standard library suddenly starts doing things you didn't expect.</p>
</blockquote></li>
<li><p>Jython offers to change it on the fly, even in modules.</p></li>
<li><p>PyPy did <a href=""http://osdir.com/ml/python.twisted.bugs/2008-01/msg00030.html"" rel=""noreferrer"">not</a> support reload(sys) - but <a href=""https://bitbucket.org/pypy/pypy/commits/19e305e27e67"" rel=""noreferrer"">brought it back</a> on <a href=""https://bitbucket.org/pypy/pypy/issue/1991/reload-sys-error"" rel=""noreferrer"">user request</a> within a single day without questions asked. Compare with the ""<a href=""https://bugs.python.org/msg199265"" rel=""noreferrer"">you are doing it wrong</a>"" attitude of CPython, <a href=""http://bugs.python.org/issue9632"" rel=""noreferrer"">claiming</a> without proof it is the ""root of evil"".</p></li>
</ol>

<hr>

<p>Ending this  list I confirm that one <em>could</em> construct a module which crashes <strong>because</strong> of a changed interpreter config, doing something like this:</p>

<pre><code>def is_clean_ascii(s):
    """""" [Stupid] type agnostic checker if only ASCII chars are contained in s""""""
    try:
        unicode(str(s))
        # we end here also for NON ascii if the def.enc. was changed
        return True
    except Exception, ex:
        return False    

if is_clean_ascii(mystr):
    &lt;code relying on mystr to be ASCII&gt;
</code></pre>

<p>I don't think this is a valid argument because the person who wrote this dual type accepting module was obviously aware about ASCII vs. non ASCII strings and would be aware of encoding and decoding.</p>

<p>I think this evidence is more than enough indication that changing this setting does not lead to any problems in real world codebases the <em>vast</em> majority of the time.</p>
",Red Pill,Community,1429817267,1429878161,1495541907
http://stackoverflow.com/a/29835355/1208233,A comprehensive regex for phone number validation,862057,Nicholas Trandem,Taryn,1222200822,1550515017,1490199527,https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation,"<p>Here's a wonderful pattern that most closely matched the validation that I needed to achieve. I'm not the original author, but I think it's well worth sharing as I found this problem to be very complex and without a concise or widely useful answer.</p>

<p>The following regex will catch widely used number and character combinations in a variety of global phone number formats:</p>

<p><code>/^\s*(?:\+?(\d{1,3}))?([-. (]*(\d{3})[-. )]*)?((\d{3})[-. ]*(\d{2,4})(?:[-.x ]*(\d+))?)\s*$/gm</code></p>

<p>Positive:<br/>
+42 555.123.4567<br/>
+1-(800)-123-4567<br/>
+7 555 1234567<br/>
+7(926)1234567<br/>
(926) 1234567<br/>
+79261234567<br/>
926 1234567<br/>
9261234567<br/>
1234567<br/>
123-4567<br/>
123-89-01<br/>
495 1234567<br/>
469 123 45 67<br/>
89261234567<br/>
8 (926) 1234567<br/>
926.123.4567<br/>
415-555-1234<br/>
650-555-2345<br/>
(416)555-3456<br/>
202 555 4567<br/>
4035555678<br/>
1 416 555 9292</p>

<p>Negative:<br/>
926 3 4<br/>
8 800 600-APPLE</p>

<p>Original source: <a href=""http://www.regexr.com/38pvb"">http://www.regexr.com/38pvb</a></p>
",Stuart Kershaw,Stuart Kershaw,1429827524,1429827845,1429827845
http://stackoverflow.com/a/29893338/886133,Scikit-learn Multicore: &quot;AttributeError: StdIn instance has no attribute &#39;close&#39;&quot;,1564,Krishan Gupta,,1402517469,1442816244,0,https://stackoverflow.com/questions/24171725/scikit-learn-multicore-attributeerror-stdin-instance-has-no-attribute-close,"<p>Coming a little late to the party, but I encountered the same problem myself just now.</p>

<p>The workaround, suggested in the other answer, is to avoid the interactive interpreter of PyCharm. This, of course, works but does not satisfy me since I like to use the interactive interpreter very much.</p>

<p>I found a different workaround that solves the problem <em>and</em> allows the usage of the interactive interpreter. Before <strong>each</strong> creation of a new process via <code>multiprocessing.Process()</code>, the following code snippet has to be applied:</p>

<pre><code>if not hasattr(sys.stdin, 'close'):
    def dummy_close():
        pass
    sys.stdin.close = dummy_close
</code></pre>

<p>Now, <code>multiprocessing</code> can call <code>close()</code> on <code>sys.stdin</code> just fine, and everything works smoothly.</p>

<p>Please note that it is not sufficient to attach the dummy <code>close()</code> once during a start-up phase. I found that it is necessary to do it before each call to <code>multiprocessing.Process()</code>; I didn't try it with process pools, though.</p>
",WeiXi,,1430130996,1430130996,0
http://stackoverflow.com/a/29901074/598696,Getting nth variadic argument value (not type),993,Vittorio Romeo,Vittorio Romeo,1430151290,1430235285,1430152276,https://stackoverflow.com/questions/29900928/getting-nth-variadic-argument-value-not-type,"<p>Ignoring the perfect forwarding as requested, this should work:</p>

<pre><code>template&lt;typename B, typename C&gt;
struct forEachNArgsImpl;

template&lt;std::size_t... Bs, std::size_t... Cs&gt;
struct forEachNArgsImpl&lt;
    std::index_sequence&lt;Bs...&gt;,
    std::index_sequence&lt;Cs...&gt;
&gt;
{
    template&lt;std::size_t N, typename TF, typename... Ts&gt;
    static void execN(TF mFn, const std::tuple&lt;Ts...&gt;&amp; mXs)
    {
        mFn( std::get&lt; N + Cs &gt;( mXs )... );
    }

    template&lt;typename TF, typename... Ts&gt;
    static void exec(TF mFn, const std::tuple&lt;Ts...&gt;&amp; mXs)
    {
        using swallow = bool[];
        (void)swallow{ (execN&lt; Bs * sizeof...(Cs) &gt;( mFn, mXs ), true)... };
    }
};

template&lt;std::size_t N, typename TF, typename... Ts&gt;
void forEachNArgs(TF mFn, Ts... mXs)
{
    static_assert( sizeof...(Ts) % N == 0, ""Wrong number of arguments"" );
    forEachNArgsImpl&lt;
        std::make_index_sequence&lt;sizeof...(Ts)/N&gt;,
        std::make_index_sequence&lt;N&gt;
    &gt;::exec(mFn, std::forward_as_tuple( mXs... ) );
}
</code></pre>

<p><a href=""http://coliru.stacked-crooked.com/a/a8baf8e74d1a9616""><strong>Live example</strong></a></p>
",Daniel Frey,Daniel Frey,1430151688,1430153535,1430153535
http://stackoverflow.com/a/29945693/1315039,How do I make WRAP_CONTENT work on a RecyclerView,110721,Edward van Raak,Amit Vaghela,1418598307,1562326855,1537939124,https://stackoverflow.com/questions/27475178/how-do-i-make-wrap-content-work-on-a-recyclerview,"<p>Here is the refined version of the class which seems to work and lacks problems other solutions have:</p>

<pre><code>package org.solovyev.android.views.llm;

import android.content.Context;
import android.support.v7.widget.RecyclerView;
import android.util.Log;
import android.view.View;

/**
 * {@link android.support.v7.widget.LinearLayoutManager} which wraps its content. Note that this class will always
 * wrap the content regardless of {@link android.support.v7.widget.RecyclerView} layout parameters.
 *
 * Now it's impossible to run add/remove animations with child views which have arbitrary dimensions (height for
 * VERTICAL orientation and width for HORIZONTAL). However if child views have fixed dimensions
 * {@link #setChildSize(int)} method might be used to let the layout manager know how big they are going to be.
 * If animations are not used at all then a normal measuring procedure will run and child views will be measured during
 * the measure pass.
 */
public class LinearLayoutManager extends android.support.v7.widget.LinearLayoutManager {

    private static final int CHILD_WIDTH = 0;
    private static final int CHILD_HEIGHT = 1;
    private static final int DEFAULT_CHILD_SIZE = 100;

    private final int[] childDimensions = new int[2];

    private int childSize = DEFAULT_CHILD_SIZE;
    private boolean hasChildSize;

    @SuppressWarnings(""UnusedDeclaration"")
    public LinearLayoutManager(Context context) {
        super(context);
    }

    @SuppressWarnings(""UnusedDeclaration"")
    public LinearLayoutManager(Context context, int orientation, boolean reverseLayout) {
        super(context, orientation, reverseLayout);
    }

    public static int makeUnspecifiedSpec() {
        return View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED);
    }

    @Override
    public void onMeasure(RecyclerView.Recycler recycler, RecyclerView.State state, int widthSpec, int heightSpec) {
        final int widthMode = View.MeasureSpec.getMode(widthSpec);
        final int heightMode = View.MeasureSpec.getMode(heightSpec);

        final int widthSize = View.MeasureSpec.getSize(widthSpec);
        final int heightSize = View.MeasureSpec.getSize(heightSpec);

        final boolean exactWidth = widthMode == View.MeasureSpec.EXACTLY;
        final boolean exactHeight = heightMode == View.MeasureSpec.EXACTLY;

        final int unspecified = makeUnspecifiedSpec();

        if (exactWidth &amp;&amp; exactHeight) {
            // in case of exact calculations for both dimensions let's use default ""onMeasure"" implementation
            super.onMeasure(recycler, state, widthSpec, heightSpec);
            return;
        }

        final boolean vertical = getOrientation() == VERTICAL;

        initChildDimensions(widthSize, heightSize, vertical);

        int width = 0;
        int height = 0;

        // it's possible to get scrap views in recycler which are bound to old (invalid) adapter entities. This
        // happens because their invalidation happens after ""onMeasure"" method. As a workaround let's clear the
        // recycler now (it should not cause any performance issues while scrolling as ""onMeasure"" is never
        // called whiles scrolling)
        recycler.clear();

        final int stateItemCount = state.getItemCount();
        final int adapterItemCount = getItemCount();
        // adapter always contains actual data while state might contain old data (f.e. data before the animation is
        // done). As we want to measure the view with actual data we must use data from the adapter and not from  the
        // state
        for (int i = 0; i &lt; adapterItemCount; i++) {
            if (vertical) {
                if (!hasChildSize) {
                    if (i &lt; stateItemCount) {
                        // we should not exceed state count, otherwise we'll get IndexOutOfBoundsException. For such items
                        // we will use previously calculated dimensions
                        measureChild(recycler, i, widthSpec, unspecified, childDimensions);
                    } else {
                        logMeasureWarning(i);
                    }
                }
                height += childDimensions[CHILD_HEIGHT];
                if (i == 0) {
                    width = childDimensions[CHILD_WIDTH];
                }
                if (height &gt;= heightSize) {
                    break;
                }
            } else {
                if (!hasChildSize) {
                    if (i &lt; stateItemCount) {
                        // we should not exceed state count, otherwise we'll get IndexOutOfBoundsException. For such items
                        // we will use previously calculated dimensions
                        measureChild(recycler, i, unspecified, heightSpec, childDimensions);
                    } else {
                        logMeasureWarning(i);
                    }
                }
                width += childDimensions[CHILD_WIDTH];
                if (i == 0) {
                    height = childDimensions[CHILD_HEIGHT];
                }
                if (width &gt;= widthSize) {
                    break;
                }
            }
        }

        if ((vertical &amp;&amp; height &lt; heightSize) || (!vertical &amp;&amp; width &lt; widthSize)) {
            // we really should wrap the contents of the view, let's do it

            if (exactWidth) {
                width = widthSize;
            } else {
                width += getPaddingLeft() + getPaddingRight();
            }

            if (exactHeight) {
                height = heightSize;
            } else {
                height += getPaddingTop() + getPaddingBottom();
            }

            setMeasuredDimension(width, height);
        } else {
            // if calculated height/width exceeds requested height/width let's use default ""onMeasure"" implementation
            super.onMeasure(recycler, state, widthSpec, heightSpec);
        }
    }

    private void logMeasureWarning(int child) {
        if (BuildConfig.DEBUG) {
            Log.w(""LinearLayoutManager"", ""Can't measure child #"" + child + "", previously used dimensions will be reused."" +
                    ""To remove this message either use #setChildSize() method or don't run RecyclerView animations"");
        }
    }

    private void initChildDimensions(int width, int height, boolean vertical) {
        if (childDimensions[CHILD_WIDTH] != 0 || childDimensions[CHILD_HEIGHT] != 0) {
            // already initialized, skipping
            return;
        }
        if (vertical) {
            childDimensions[CHILD_WIDTH] = width;
            childDimensions[CHILD_HEIGHT] = childSize;
        } else {
            childDimensions[CHILD_WIDTH] = childSize;
            childDimensions[CHILD_HEIGHT] = height;
        }
    }

    @Override
    public void setOrientation(int orientation) {
        // might be called before the constructor of this class is called
        //noinspection ConstantConditions
        if (childDimensions != null) {
            if (getOrientation() != orientation) {
                childDimensions[CHILD_WIDTH] = 0;
                childDimensions[CHILD_HEIGHT] = 0;
            }
        }
        super.setOrientation(orientation);
    }

    public void clearChildSize() {
        hasChildSize = false;
        setChildSize(DEFAULT_CHILD_SIZE);
    }

    public void setChildSize(int childSize) {
        hasChildSize = true;
        if (this.childSize != childSize) {
            this.childSize = childSize;
            requestLayout();
        }
    }

    private void measureChild(RecyclerView.Recycler recycler, int position, int widthSpec, int heightSpec, int[] dimensions) {
        final View child = recycler.getViewForPosition(position);

        final RecyclerView.LayoutParams p = (RecyclerView.LayoutParams) child.getLayoutParams();

        final int hPadding = getPaddingLeft() + getPaddingRight();
        final int vPadding = getPaddingTop() + getPaddingBottom();

        final int hMargin = p.leftMargin + p.rightMargin;
        final int vMargin = p.topMargin + p.bottomMargin;

        final int hDecoration = getRightDecorationWidth(child) + getLeftDecorationWidth(child);
        final int vDecoration = getTopDecorationHeight(child) + getBottomDecorationHeight(child);

        final int childWidthSpec = getChildMeasureSpec(widthSpec, hPadding + hMargin + hDecoration, p.width, canScrollHorizontally());
        final int childHeightSpec = getChildMeasureSpec(heightSpec, vPadding + vMargin + vDecoration, p.height, canScrollVertically());

        child.measure(childWidthSpec, childHeightSpec);

        dimensions[CHILD_WIDTH] = getDecoratedMeasuredWidth(child) + p.leftMargin + p.rightMargin;
        dimensions[CHILD_HEIGHT] = getDecoratedMeasuredHeight(child) + p.bottomMargin + p.topMargin;

        recycler.recycleView(child);
    }
}
</code></pre>

<p>This is also available as a <a href=""https://github.com/serso/android-linear-layout-manager"">library</a>. Link to <a href=""https://github.com/serso/android-linear-layout-manager/blob/master/lib/src/main/java/org/solovyev/android/views/llm/LinearLayoutManager.java"">relevant class</a>.</p>
",se.solovyev,CommonSenseCode,1430315235,1449521136,1449521136
http://stackoverflow.com/a/29948396/153102,URL encoding the space character: + or %20?,602895,BC.,Cole Johnson,1256685803,1559556519,1402073496,https://stackoverflow.com/questions/1634271/url-encoding-the-space-character-or-20,"<p>This confusion is because URLs are still 'broken' to this day.</p>

<blockquote>
  <p>Take ""<a href=""http://www.google.com"" rel=""noreferrer"">http://www.google.com</a>"" for instance. This is a URL. A URL is a Uniform Resource Locator and is really a pointer to a web page (in most cases). URLs actually have a very well-defined structure since the first specification in 1994.</p>
  
  <p>We can extract detailed information about the ""<a href=""http://www.google.com"" rel=""noreferrer"">http://www.google.com</a>"" URL:</p>
</blockquote>

<pre><code>+---------------+-------------------+
|      Part     |      Data         |
+---------------+-------------------+
|  Scheme       | http              |
|  Host         | www.google.com    |
+---------------+-------------------+
</code></pre>

<blockquote>
  <p>If we look at a more complex URL such as:</p>
  
  <p>""<a href=""https://bob:bobby@www.lunatech.com:8080/file;p=1?q=2#third"" rel=""noreferrer"">https://bob:bobby@www.lunatech.com:8080/file;p=1?q=2#third</a>""</p>
  
  <p>we can extract the following information:</p>
</blockquote>

<pre><code>+-------------------+---------------------+
|        Part       |       Data          |
+-------------------+---------------------+
|  Scheme           | https               |
|  User             | bob                 |
|  Password         | bobby               |
|  Host             | www.lunatech.com    |
|  Port             | 8080                |
|  Path             | /file;p=1           |
|  Path parameter   | p=1                 |
|  Query            | q=2                 |
|  Fragment         | third               |
+-------------------+---------------------+

https://bob:bobby@www.lunatech.com:8080/file;p=1?q=2#third
\___/   \_/ \___/ \______________/ \__/\_______/ \_/ \___/
  |      |    |          |          |      | \_/  |    |
Scheme User Password    Host       Port  Path |   | Fragment
        \_____________________________/       | Query
                       |               Path parameter
                   Authority
</code></pre>

<blockquote>
  <p>The reserved characters are different for each part.</p>
  
  <p>For HTTP URLs, a space in a path fragment part has to be encoded to ""%20"" (not, absolutely not ""+""), while the ""+"" character in the path fragment part can be left unencoded.</p>
  
  <p>Now in the query part, spaces may be encoded to either ""+"" (for backwards compatibility: do not try to search for it in the URI standard) or ""%20"" while the ""+"" character (as a result of this ambiguity) has to be escaped to ""%2B"".</p>
  
  <p>This means that the ""blue+light blue"" string has to be encoded differently in the path and query parts:</p>
  
  <p>""<a href=""http://example.com/blue+light%20blue?blue%2Blight+blue"" rel=""noreferrer"">http://example.com/blue+light%20blue?blue%2Blight+blue</a>"".</p>
  
  <p>From there you can deduce that encoding a fully constructed URL is impossible without a syntactical awareness of the URL structure.</p>
</blockquote>

<p>This boils down to:</p>

<p><strong>You should have <code>%20</code> before the <code>?</code> and <code>+</code> after.</strong></p>

<p><a href=""https://web.archive.org/web/20151218094722/http://blog.lunatech.com/2009/02/03/what-every-web-developer-must-know-about-url-encoding"" rel=""noreferrer"">Source</a></p>
",Matas Vaitkevicius,Peter Mortensen,1430321804,1544739091,1544739091
http://stackoverflow.com/a/29954160/1033535,How can memoized functions be tested?,1566,Ceasar Bautista,Ceasar Bautista,1430338823,1430340673,1430340641,https://stackoverflow.com/questions/29953764/how-can-memoized-functions-be-tested,"<p>Is it really desirable for your memoization to be defined at the function level? </p>

<p>This effectively makes the memoized data a <em>global variable</em> (just like the function, whose scope it shares). </p>

<p>Incidentally, that's why you're having difficulty testing it!</p>

<p>So, how about wrapping this into an object? </p>

<pre><code>import functools
import time

def memoize(meth):
    @functools.wraps(meth)
    def wrapped(self, *args, **kwargs):

        # Prepare and get reference to cache
        attr = ""_memo_{0}"".format(meth.__name__)
        if not hasattr(self, attr):
            setattr(self, attr, {})
        cache = getattr(self, attr)

        # Actual caching
        key = args, tuple(sorted(kwargs))
        try:
            return cache[key]
        except KeyError:
            cache[key] = meth(self, *args, **kwargs)
            return cache[key]

    return wrapped

def network_call(user_id):
    print ""Was called with: %s"" % user_id
    return 1

class NetworkEngine(object):

    @memoize
    def search(self, user_id):
        return network_call(user_id)


if __name__ == ""__main__"":
    e = NetworkEngine()
    for v in [1,1,2]:
        e.search(v)
    NetworkEngine().search(1)
</code></pre>

<p>Yields:</p>

<pre><code>Was called with: 1
Was called with: 2
Was called with: 1
</code></pre>

<p>In other words, each instance of <code>NetworkEngine</code> gets its own cache. Just reuse the same one to share a cache, or instantiate a new one to get a new cache.</p>

<hr>

<p>In your test code, you'd use:</p>

<pre><code>@mock.patch('mem.network_call')
def test_search(mock_network_call):
    mock_network_call.return_value = 2
    assert mem.NetworkEngine().search(1) == 2
</code></pre>
",Thomas Orozco,Thomas Orozco,1430340275,1430340673,1430340673
http://stackoverflow.com/a/30010748/2726725,Downloaded .pdf files are corrupted when using expressjs,3558,Libin TK,Libin TK,1428673151,1496148355,1429613350,https://stackoverflow.com/questions/29562954/downloaded-pdf-files-are-corrupted-when-using-expressjs,"<p>I had corruption when serving static pdfs too. I tried everything suggested above. Then I found this:
<a href=""https://github.com/intesso/connect-livereload/issues/39"" rel=""noreferrer"">https://github.com/intesso/connect-livereload/issues/39</a>
In essence the usually excellent connect-livereload (package ~0.4.0) was corrupting the pdf.
So just get it to ignore pdfs via:</p>

<pre><code>app.use(require('connect-livereload')({ignore: ['.pdf']}));
</code></pre>

<p>now this works:</p>

<pre><code>app.use('/pdf', express.static(path.join(config.root, 'content/files')));
</code></pre>

<p>...great relief.</p>
",Paul Muston,Paul Muston,1430632911,1430633351,1430633351
http://stackoverflow.com/a/3001556/880628,Ideal HTTP cache control headers for different types of resources,28209,Chris Lercher,Chris Lercher,1275614597,1364324730,1275981385,https://stackoverflow.com/questions/2970938/ideal-http-cache-control-headers-for-different-types-of-resources,"<p>I would probably use these settings:</p>

<ol>
<li><code>Cache-Control: max-age=31556926</code>  Representations may be cached by any cache. The cached representation is to be considered fresh for 1 year:

<blockquote>
  <p>To mark a response as ""never expires,"" an origin server sends an
  <em>Expires</em> date approximately one year from the time the response is
  sent. HTTP/1.1 servers SHOULD NOT send <em>Expires</em> dates more than one
  year in the future.</p>
</blockquote></li>
<li><code>Cache-Control: no-cache</code>  Representations are allowed to be cached by any cache. But caches must submit the request to the origin server for validation before releasing a cached copy.</li>
<li><code>Cache-Control: no-store</code>  Caches must not cache the representation under any condition.</li>
</ol>

<p>See <a href=""http://www.mnot.net/cache_docs/"" rel=""noreferrer"">Mark Nottinghams <em>Caching Tutorial</em></a> for further information.</p>
",Gumbo,Gumbo,1276033761,1302014522,1302014522
http://stackoverflow.com/a/30056066/1052778,"Pythonic way to merge two overlapping lists, preserving order",4934,Firnagzen,Firnagzen,1430836193,1506015159,1430837398,https://stackoverflow.com/questions/30055830/pythonic-way-to-merge-two-overlapping-lists-preserving-order,"<p>You can try the following:</p>

<pre><code>&gt;&gt;&gt; a = [1, 3, 9, 8, 3, 4, 5]
&gt;&gt;&gt; b = [3, 4, 5, 7, 8]

&gt;&gt;&gt; matches = (i for i in xrange(len(b), 0, -1) if b[:i] == a[-i:])
&gt;&gt;&gt; i = next(matches, 0)
&gt;&gt;&gt; a + b[i:]
[1, 3, 9, 8, 3, 4, 5, 7, 8]
</code></pre>

<p>The idea is we check the first <code>i</code> elements of <code>b</code> (<code>b[:i]</code>) with the last <code>i</code> elements of <code>a</code> (<code>a[-i:]</code>). We take <code>i</code> in decreasing order, starting from the length of <code>b</code> until 1 (<code>xrange(len(b), 0, -1)</code>) because we want to match as much as possible. We take the first such <code>i</code> by using <code>next</code> and if we don't find it we use the zero value (<code>next(..., 0)</code>). From the moment we found the <code>i</code>, we add to <code>a</code> the elements of <code>b</code> from index <code>i</code>.</p>
",JuniorCompressor,Paul Draper,1430836827,1430887894,1430887894
http://stackoverflow.com/a/30073528/681493,Selecting child view at index using Espresso,17204,ijunes,tomrozb,1405385089,1526902733,1406670340,https://stackoverflow.com/questions/24748303/selecting-child-view-at-index-using-espresso,"<pre><code> public static Matcher&lt;View&gt; nthChildOf(final Matcher&lt;View&gt; parentMatcher, final int childPosition) {
    return new TypeSafeMatcher&lt;View&gt;() {
      @Override
      public void describeTo(Description description) {
        description.appendText(""with ""+childPosition+"" child view of type parentMatcher"");
      }

      @Override
      public boolean matchesSafely(View view) {
        if (!(view.getParent() instanceof ViewGroup)) {
          return parentMatcher.matches(view.getParent());
        }

        ViewGroup group = (ViewGroup) view.getParent();
        return parentMatcher.matches(view.getParent()) &amp;&amp; group.getChildAt(childPosition).equals(view);
      }
    };
  }
</code></pre>

<p>To use it</p>

<pre><code>onView(nthChildOf(withId(R.id.parent_container), 0)).check(matches(withText(""I am the first child"")));
</code></pre>
",Maragues,vilpe89,1430906654,1526902733,1526902733
http://stackoverflow.com/a/3010495/1265472,How to get Linux console window width in Python,96267,Sergey Golovchenko,anatoly techtonik,1235071039,1525323099,1490522459,https://stackoverflow.com/questions/566746/how-to-get-linux-console-window-width-in-python,"<p>Code above didn't return correct result on my linux because winsize-struct has 4 unsigned shorts, not 2 signed shorts:</p>

<pre><code>def terminal_size():
    import fcntl, termios, struct
    h, w, hp, wp = struct.unpack('HHHH',
        fcntl.ioctl(0, termios.TIOCGWINSZ,
        struct.pack('HHHH', 0, 0, 0, 0)))
    return w, h
</code></pre>

<p>hp and hp should contain pixel width and height, but don't.</p>
",pascal,,1276122998,1276122998,0
http://stackoverflow.com/a/30159424/14379,Should I use a separate ScriptEngine and CompiledScript instances per each thread?,14048,And390,Nicolas Filotto,1431175626,1537776604,1537776430,https://stackoverflow.com/questions/30140103/should-i-use-a-separate-scriptengine-and-compiledscript-instances-per-each-threa,"<p>You can share a <code>ScriptEngine</code> and <code>CompiledScript</code> objects across threads. They are threadsafe. Actually, you should share them, as a single engine instance is a holder for a class cache and for JavaScript objects' hidden classes, so by having only one you cut down on repeated compilation.</p>

<p>What you can't share is <code>Bindings</code> objects. The bindings object basically corresponds to the JavaScript runtime environment's <code>Global</code> object. The engine starts with a default bindings instance, but if you use it in multithreaded environment, you need to use <code>engine.createBindings()</code> to obtain a separate Bindings object for every thread -- its own global, and evaluate the compiled scripts into it. That way you'll set up isolated global scopes with the same code. (Of course, you can also pool them, or synchronize on 'em, just make sure there's never more than one thread working in one bindings instance). Once you evaluated the script into the bindings, you can subsequently efficiently invoke functions it defined with <code>((JSObject)bindings.get(fnName).call(this, args...)</code></p>

<p>If you must share state across threads, then at least try to make it not mutable. If your objects are immutable, you might as well evaluate the script into single <code>Bindings</code> instance and then just use that across threads (invoking hopefully side-effect free functions). If it is mutable, you'll have to synchronize; either the whole bindings, or you can also use the <code>var syncFn = Java.synchronized(fn, lockObj)</code> Nashorn-specific JS API to obtain versions of JS functions that synchronize on a specific object.</p>

<p>This presupposes that you share single bindings across threads. If you want to have multiple bindings share a subset of objects (e.g. by putting the same object into multiple bindings), again, you'll have to somehow deal with ensuring that access to shared objects is thread safe yourself.</p>

<p>As for <a href=""http://docs.oracle.com/javase/8/docs/api/javax/script/ScriptEngineFactory.html#getParameter-java.lang.String-"" rel=""noreferrer""><code>THREADING</code> parameter returning null</a>: yeah, initially we planned on not making the engine threadsafe (saying that the language itself isn't threadsafe) so we chose the null value. We might need to re-evaluate that now, as in the meantime we did make it so that engine instances are threadsafe, just the global scope (bindings) isn't (and never will be, because of JavaScript language semantics.)</p>
",Attila Szegedi,Alexey Subach,1431316484,1516103559,1516103559
http://stackoverflow.com/a/30176254/2254360,IDENTITY INSERT not working with MERGE,1877,Mortalus,marc_s,1431372776,1431378195,1431378195,https://stackoverflow.com/questions/30176144/identity-insert-not-working-with-merge,"<p>Try removing the identity column from the UPDATE portion of the MERGE.</p>

<p>IDENTITY_INSERT is, as it says, for INSERTs, not UPDATEs.  Also, you include the field in your JOIN as so the UPDATE would never actually change the value anyway.</p>
",MatBailie,,1431373154,1431373154,0
http://stackoverflow.com/a/30209048/2236179,How to detect if a string is encoded with escape() or encodeURIComponent(),18188,Rodrigo,,1250221712,1502965660,0,https://stackoverflow.com/questions/1275948/how-to-detect-if-a-string-is-encoded-with-escape-or-encodeuricomponent,"<p>I realize this is an old question, but I am unaware of a better solution. So I do it like this (thanks to a comment by RobertPitt above):</p>

<pre><code>function isEncoded(str) {
    return typeof str == ""string"" &amp;&amp; decodeURIComponent(str) !== str;
}
</code></pre>

<p>I have not yet encountered a case where this failed. Which doesn't mean that case doesn't exists. Maybe someone could shed some light on this.</p>
",Dejan Janjuevi,,1431504190,1431504190,0
http://stackoverflow.com/a/30224178/297710,Toggle Fullscreen mode,12853,bwoogie,That1Guy,1318021026,1447449145,1447449145,https://stackoverflow.com/questions/7692789/toggle-fullscreen-mode,"<pre><code>/**
 * toggles fullscreen mode
 * &lt;br/&gt;
 * REQUIRE: android:configChanges=""orientation|screenSize""
 * &lt;pre&gt;
 * sample:
 *     private boolean fullscreen;
 *     ................
 *     Activity activity = (Activity)context;
 *     toggleFullscreen(activity, !fullscreen);
 *     fullscreen = !fullscreen;
 * &lt;/pre&gt;
 */
private void toggleFullscreen(Activity activity, boolean fullscreen) {
    if (Build.VERSION.SDK_INT &gt;= 11) {
        // The UI options currently enabled are represented by a bitfield.
        // getSystemUiVisibility() gives us that bitfield.
        int uiOptions = activity.getWindow().getDecorView().getSystemUiVisibility();
        int newUiOptions = uiOptions;
        boolean isImmersiveModeEnabled =
                ((uiOptions | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY) == uiOptions);
        if (isImmersiveModeEnabled) {
            Log.i(context.getPackageName(), ""Turning immersive mode mode off. "");
        } else {
            Log.i(context.getPackageName(), ""Turning immersive mode mode on."");
        }

        // Navigation bar hiding:  Backwards compatible to ICS.
        if (Build.VERSION.SDK_INT &gt;= 14) {
            newUiOptions ^= View.SYSTEM_UI_FLAG_HIDE_NAVIGATION;
        }

        // Status bar hiding: Backwards compatible to Jellybean
        if (Build.VERSION.SDK_INT &gt;= 16) {
            newUiOptions ^= View.SYSTEM_UI_FLAG_FULLSCREEN;
        }

        // Immersive mode: Backward compatible to KitKat.
        // Note that this flag doesn't do anything by itself, it only augments the behavior
        // of HIDE_NAVIGATION and FLAG_FULLSCREEN.  For the purposes of this sample
        // all three flags are being toggled together.
        // Note that there are two immersive mode UI flags, one of which is referred to as ""sticky"".
        // Sticky immersive mode differs in that it makes the navigation and status bars
        // semi-transparent, and the UI flag does not get cleared when the user interacts with
        // the screen.
        if (Build.VERSION.SDK_INT &gt;= 18) {
            newUiOptions ^= View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;
        }
        activity.getWindow().getDecorView().setSystemUiVisibility(newUiOptions);
    } else {
        // for android pre 11
        WindowManager.LayoutParams attrs = activity.getWindow().getAttributes();
        if (fullscreen) {
            attrs.flags |= WindowManager.LayoutParams.FLAG_FULLSCREEN;
        } else {
            attrs.flags &amp;= ~WindowManager.LayoutParams.FLAG_FULLSCREEN;
        }
        activity.getWindow().setAttributes(attrs);
    }

    try {
        // hide actionbar
        if (activity instanceof ActionBarActivity) {
            if (fullscreen) ((ActionBarActivity) activity).getSupportActionBar().hide();
            else ((ActionBarActivity) activity).getSupportActionBar().show();
        } else if (Build.VERSION.SDK_INT &gt;= 11) {
            if (fullscreen) activity.getActionBar().hide();
            else activity.getActionBar().show();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    // set landscape
   // if(fullscreen)  activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
   // else activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
}
</code></pre>

<p>my code working fine with android 2.3 and 4.4.2</p>
",vuhung3990,,1431547331,1431547331,0
http://stackoverflow.com/a/30228437/4871809,How can I trim whitespace by Velocity,26800,Surasin Tancharoen,Vadzim,1324489392,1533802483,1435243420,https://stackoverflow.com/questions/8594022/how-can-i-trim-whitespace-by-velocity,"<p>I struggled a while to find a straightforward solution to whitespace gobbling, so here the one I finally came up with. It is inspired from  and Vadzim's answer and this page <a href=""http://wiki.apache.org/velocity/StructuredGlobbingResourceLoader"" rel=""nofollow"">http://wiki.apache.org/velocity/StructuredGlobbingResourceLoader</a></p>

<p>The StructuredGlobbingResourceLoader we can find on the website has a complex behaviour and doesnt get rid of any kind of whitespace, so I modified it to get the simple behaviour: ""Delete any whitespace at the beginning of the lines, and add a comment at the end of each line"" (which prevents the linebreak evaluation). The filter is applied on the input stream at loading time.</p>

<p>This kind of velocity template</p>

<pre><code>#if($value)
    the value is $value
#end
</code></pre>

<p>is transformed to</p>

<pre><code>#if($value)##
the value is $value##
#end##
</code></pre>

<p>Then if you want to have linebreaks or beginning of line whitespaces, you'll have to put($br,""\n"") and put($sp,"" "") in your context like Vadzim's explained and explicitly use them in your template. This way of doing will allow you to keep indented templates, with maximum control.</p>

<p>take the class from this page <a href=""http://wiki.apache.org/velocity/StructuredGlobbingResourceLoader"" rel=""nofollow"">http://wiki.apache.org/velocity/StructuredGlobbingResourceLoader</a>
change the extended class to the kind of loader your need (this one uses the webapp loader)
replace the read() method with the code I provide
use the class as your resource loader in your properties. Example for the webapp loader: webapp.resource.loader.class=...StructuredGlobbingResourceLoader</p>

<pre><code>public int read() throws IOException {        
    int ch;
    switch(state){
        case bol: //beginning of line, read until non-indentation character
            while(true){
                ch = in.read();
                if (ch!=(int)' ' &amp;&amp; ch!=(int)'\t'){
                    state = State.content;
                    return processChar(ch);
                }
            }

        case content:
            ch = in.read();
            return processChar(ch);

        //eol states replace all ""\n"" by ""##\n""
        case eol1: 
            state = State.eol2;
            return (int)'#';

        case eol2:
            state = State.bol;
            return (int)'\n';

        case eof: 
            return -1;
    }
    return -1;
}

//Return the normal character if not end of file or \n
private int processChar(int ch){
    switch(ch){
    case -1:
        state = State.eof;
        return -1;
    case (int)'\n':
        state = State.eol1;
    return (int)'#';
    default:
        return ch;
    }
}
</code></pre>

<p>Any feedback on my implementation is welcome</p>
",Geoffrey,,1431571633,1431571633,0
http://stackoverflow.com/a/30247202/4014509,How to implement thread-safe lazy initialization?,37864,mre,,1322492252,1510146144,0,https://stackoverflow.com/questions/8297705/how-to-implement-thread-safe-lazy-initialization,"<p>This can be done in lock-free manner by using <a href=""https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicReference.html"" rel=""noreferrer""><code>AtomicReference</code></a> as instance holder:</p>

<pre><code>// in class declaration
private AtomicReference&lt;Foo&gt; instance = new AtomicReference&lt;&gt;(null);  

public Foo getInstance() {
   Foo foo = instance.get();
   if (foo == null) {
       foo = new Foo();                       // create and initialize actual instance
       if (instance.compareAndSet(null, foo)) // CAS succeeded
           return foo;
       else                                   // CAS failed: other thread set an object 
           return instance.get();             
   } else {
       return foo;
   }
}
</code></pre>

<p>Main disadvantage here is that multiple threads can concurrently instantiate two or more <code>Foo</code> objects, and only one will be lucky to be set up, so if instantiation requires I/O or another shared resource, this method may not be suitable.</p>

<p>At the other side, this approach is <strong><em>lock-free</em></strong> and <strong><em>wait-free</em></strong>: if one thread which first entered this method is stuck, it won't affect execution of others.</p>
",Alex Salauyou,,1431637032,1431637032,0
http://stackoverflow.com/a/30253848/2037738,decorators in the python standard lib (@deprecated specifically),47459,Stefano Borini,Steven M. Vascellaro,1269846897,1562451830,1526493654,https://stackoverflow.com/questions/2536307/decorators-in-the-python-standard-lib-deprecated-specifically,"<p>Here's some snippet, modified from those cited by Leandro:</p>

<pre><code>import warnings
import functools

def deprecated(func):
    """"""This is a decorator which can be used to mark functions
    as deprecated. It will result in a warning being emitted
    when the function is used.""""""
    @functools.wraps(func)
    def new_func(*args, **kwargs):
        warnings.simplefilter('always', DeprecationWarning)  # turn off filter
        warnings.warn(""Call to deprecated function {}."".format(func.__name__),
                      category=DeprecationWarning,
                      stacklevel=2)
        warnings.simplefilter('default', DeprecationWarning)  # reset filter
        return func(*args, **kwargs)
    return new_func

# Examples

@deprecated
def some_old_function(x, y):
    return x + y

class SomeClass:
    @deprecated
    def some_old_method(self, x, y):
        return x + y
</code></pre>

<p>Because in some interpreters the first solution exposed (without filter handling) may result in a warning suppression.</p>
",Patrizio Bertoni,endolith,1431674668,1517155487,1517155487
http://stackoverflow.com/a/30259368/1816347,Bordas positional ranking,442,sss,Ami Tavory,1431689560,1431723446,1431692663,https://stackoverflow.com/questions/30258453/borda-s-positional-ranking,"<p>Calling index(i) takes time proportionate to the list size, and because you have to call that for every element, it ends up taking O(N^2) time where N is the list size.  Much better to iterate one list at a time where you know the index and add that part of the score to a score accumulator in a dict.</p>

<pre><code>def borda_sort(lists):
    scores = {}
    for l in lists:
        for idx, elem in enumerate(reversed(l)):
            if not elem in scores:
                scores[elem] = 0
            scores[elem] += idx
    return sorted(scores.keys(), key=lambda elem: scores[elem], reverse=True)

lists = [ ['a', 'c'], ['b', 'd', 'a'], ['b', 'a', 'c', 'd'] ]
print borda_sort(lists)
# ['b', 'a', 'c', 'd']
</code></pre>

<p>The only tricky part here is scanning lists in reverse; this makes sure that if an element was not in one of the lists at all, its score increases by 0 for that list.</p>

<p>Compare with the other suggestion here:</p>

<pre><code>import itertools
import random

def borda_simple_sort(lists):
    candidates = set(itertools.chain(*lists))
    return sorted([sum([len(l) - l.index(c) - 1 for l in lists if c in l], 0) for c in candidates], reverse=True)
    # returns scores - a bit more work needed to return a list

# make 10 random lists of size 10000
lists = [ random.sample(range(10000), 10000) for x in range(10) ] 
%timeit borda_sort(lists)
10 loops, best of 3: 40.9 ms per loop

%timeit borda_simple_sort(lists)
1 loops, best of 3: 30.8 s per loop
</code></pre>

<p>That's not a typo :) 40 <em>milli</em>seconds vs 30 seconds, a 750x speedup. The fast algorithm is not significantly more difficult to read in this case, and may even be easier to read, it just relies on an appropriate auxiliary data structure, and going through the data in the right order.</p>
",Alex I,Alex I,1431692245,1431723446,1431723446
http://stackoverflow.com/a/30337653/1084488,How does this strange condition happens when show menu item icon in toolbar overflow menu?,4193,wqycsu,Community,1430914320,1530085825,1495540945,https://stackoverflow.com/questions/30076392/how-does-this-strange-condition-happens-when-show-menu-item-icon-in-toolbar-over,"<p>For the <strong><a href=""https://developer.android.com/reference/android/support/v7/app/AppCompatActivity.html"" rel=""noreferrer"">AppCompactActivity</a></strong> you can put this check on the <strong>onPrepareOptionsPanel</strong>() instead.</p>

<pre><code>@Override
protected boolean onPrepareOptionsPanel(View view, Menu menu) {
        if (menu != null) {
            if (menu.getClass().getSimpleName().equals(""MenuBuilder"")) {
                try {
                    Method m = menu.getClass().getDeclaredMethod(
                            ""setOptionalIconsVisible"", Boolean.TYPE);
                    m.setAccessible(true);
                    m.invoke(menu, true);
                } catch (Exception e) {
                    Log.e(getClass().getSimpleName(), ""onMenuOpened...unable to set icons for overflow menu"", e);
                }
            }
        }
    return super.onPrepareOptionsPanel(view, menu);
}
</code></pre>
",Alcio Carvalho,,1432077007,1432077007,0
http://stackoverflow.com/a/30361345/1199911,Assert proper number of items in list with espresso,6403,Cory Roy,,1432158917,1468329375,0,https://stackoverflow.com/questions/30361068/assert-proper-number-of-items-in-list-with-espresso,"<p>Figured this out.</p>

<pre><code>class Matchers {
  public static Matcher&lt;View&gt; withListSize (final int size) {
    return new TypeSafeMatcher&lt;View&gt; () {
      @Override public boolean matchesSafely (final View view) {
        return ((ListView) view).getCount () == size;
      }

      @Override public void describeTo (final Description description) {
        description.appendText (""ListView should have "" + size + "" items"");
      }
    };
  }
}
</code></pre>

<p>If expecting one item in the list, put this in the actual test script.</p>

<pre><code>onView (withId (android.R.id.list)).check (ViewAssertions.matches (Matchers.withListSize (1)));
</code></pre>
",Cory Roy,vaughandroid,1432160343,1468329375,1468329375
http://stackoverflow.com/a/30402243/1475412,Defining an abstract method in a SQLAlchemy base class,991,user1475412,,1432313434,1432338821,0,https://stackoverflow.com/questions/30402024/defining-an-abstract-method-in-a-sqlalchemy-base-class,"<p>It looks like you can pass a metaclass to <a href=""http://docs.sqlalchemy.org/en/latest/orm/extensions/declarative/api.html#sqlalchemy.ext.declarative.declarative_base"" rel=""noreferrer""><code>declarative_base</code></a>.  The default metaclass is <code>DeclarativeMeta</code> -- So, I think the key would be to create a new metaclass that is a mixin of <code>abc.ABCMeta</code> and <code>DeclarativeMeta</code>:</p>

<pre><code>import abc
from sqlalchemy.ext.declarative import declarative_base, DeclarativeMeta

class DeclarativeABCMeta(DeclarativeMeta, abc.ABCMeta):
    pass

class Base(declarative_base(metaclass=DeclarativeABCMeta)):
    __abstract__ = True
    @abc.abstractmethod
    def implement_me(self):
        """"""Canhaz override?""""""
</code></pre>

<p><sup>*Untested</sup></p>
",mgilson,user1475412,1432314276,1432338821,1432338821
http://stackoverflow.com/a/3040722/5441,"need to print 5 column list in alpha order, vertically",1345,Brad,Brad,1276546573,1394596864,1276547276,https://stackoverflow.com/questions/3040565/need-to-print-5-column-list-in-alpha-order-vertically,"<p>I would load the critical data into an array so you can count them and step through them in whatever order you want. Then use an algorithm like this to get them in the right order:</p>

<pre><code>$items = BuildItemArray(); // Get the values into an array.
$columnCount = 5;
$itemCount = count($items);

$rowCount = ceil($itemCount / $columnCount);
for ($i = 0; $i &lt; $rowCount * $columnCount; $i++)
{
    $index = ($i % $columnCount) * $rowCount + floor($i / $columnCount);
    if ($index &lt; $itemCount)
    {
        DisplayItem($items[$index]);
    }
    else
    {
        DisplayBlank();
    }
}
</code></pre>

<p>I think that should work, but I haven't tested it.</p>
",Don Kirkby,Don Kirkby,1276547736,1276623685,1276623685
http://stackoverflow.com/a/3041990/2125406,APT command line interface-like yes/no input?,156689,h3.,martineau,1276564434,1552385113,1468419159,https://stackoverflow.com/questions/3041986/apt-command-line-interface-like-yes-no-input,"<p>As you mentioned, the easiest way is to use <code>raw_input()</code> (or simply <code>input()</code> for <a href=""https://docs.python.org/3/whatsnew/3.0.html"" rel=""noreferrer"">Python 3</a>). There is no built-in way to do this. From <a href=""http://code.activestate.com/recipes/577058/"" rel=""noreferrer"">Recipe 577058</a>:</p>

<pre><code>import sys

def query_yes_no(question, default=""yes""):
    """"""Ask a yes/no question via raw_input() and return their answer.

    ""question"" is a string that is presented to the user.
    ""default"" is the presumed answer if the user just hits &lt;Enter&gt;.
        It must be ""yes"" (the default), ""no"" or None (meaning
        an answer is required of the user).

    The ""answer"" return value is True for ""yes"" or False for ""no"".
    """"""
    valid = {""yes"": True, ""y"": True, ""ye"": True,
             ""no"": False, ""n"": False}
    if default is None:
        prompt = "" [y/n] ""
    elif default == ""yes"":
        prompt = "" [Y/n] ""
    elif default == ""no"":
        prompt = "" [y/N] ""
    else:
        raise ValueError(""invalid default answer: '%s'"" % default)

    while True:
        sys.stdout.write(question + prompt)
        choice = raw_input().lower()
        if default is not None and choice == '':
            return valid[default]
        elif choice in valid:
            return valid[choice]
        else:
            sys.stdout.write(""Please respond with 'yes' or 'no' ""
                             ""(or 'y' or 'n').\n"")
</code></pre>

<p>Usage example:</p>

<pre><code>&gt;&gt;&gt; query_yes_no(""Is cabbage yummier than cauliflower?"")
Is cabbage yummier than cauliflower? [Y/n] oops
Please respond with 'yes' or 'no' (or 'y' or 'n').
Is cabbage yummier than cauliflower? [Y/n] [ENTER]
&gt;&gt;&gt; True

&gt;&gt;&gt; query_yes_no(""Is cabbage yummier than cauliflower?"", None)
Is cabbage yummier than cauliflower? [y/n] [ENTER]
Please respond with 'yes' or 'no' (or 'y' or 'n').
Is cabbage yummier than cauliflower? [y/n] y
&gt;&gt;&gt; True
</code></pre>
",fmark,Jake,1276564560,1544383178,1544383178
http://stackoverflow.com/a/3041990/459543,APT command line interface-like yes/no input?,156689,h3.,martineau,1276564434,1552385113,1468419159,https://stackoverflow.com/questions/3041986/apt-command-line-interface-like-yes-no-input,"<p>As you mentioned, the easiest way is to use <code>raw_input()</code> (or simply <code>input()</code> for <a href=""https://docs.python.org/3/whatsnew/3.0.html"" rel=""noreferrer"">Python 3</a>). There is no built-in way to do this. From <a href=""http://code.activestate.com/recipes/577058/"" rel=""noreferrer"">Recipe 577058</a>:</p>

<pre><code>import sys

def query_yes_no(question, default=""yes""):
    """"""Ask a yes/no question via raw_input() and return their answer.

    ""question"" is a string that is presented to the user.
    ""default"" is the presumed answer if the user just hits &lt;Enter&gt;.
        It must be ""yes"" (the default), ""no"" or None (meaning
        an answer is required of the user).

    The ""answer"" return value is True for ""yes"" or False for ""no"".
    """"""
    valid = {""yes"": True, ""y"": True, ""ye"": True,
             ""no"": False, ""n"": False}
    if default is None:
        prompt = "" [y/n] ""
    elif default == ""yes"":
        prompt = "" [Y/n] ""
    elif default == ""no"":
        prompt = "" [y/N] ""
    else:
        raise ValueError(""invalid default answer: '%s'"" % default)

    while True:
        sys.stdout.write(question + prompt)
        choice = raw_input().lower()
        if default is not None and choice == '':
            return valid[default]
        elif choice in valid:
            return valid[choice]
        else:
            sys.stdout.write(""Please respond with 'yes' or 'no' ""
                             ""(or 'y' or 'n').\n"")
</code></pre>

<p>Usage example:</p>

<pre><code>&gt;&gt;&gt; query_yes_no(""Is cabbage yummier than cauliflower?"")
Is cabbage yummier than cauliflower? [Y/n] oops
Please respond with 'yes' or 'no' (or 'y' or 'n').
Is cabbage yummier than cauliflower? [Y/n] [ENTER]
&gt;&gt;&gt; True

&gt;&gt;&gt; query_yes_no(""Is cabbage yummier than cauliflower?"", None)
Is cabbage yummier than cauliflower? [y/n] [ENTER]
Please respond with 'yes' or 'no' (or 'y' or 'n').
Is cabbage yummier than cauliflower? [y/n] y
&gt;&gt;&gt; True
</code></pre>
",fmark,Jake,1276564560,1544383178,1544383178
http://stackoverflow.com/a/30421295/677735,Why is there no multi-line commenting support in Erlang?,5566,Martin G,,1408084978,1485342358,0,https://stackoverflow.com/questions/25322269/why-is-there-no-multi-line-commenting-support-in-erlang,"<p>It's simple. Use preprocessor:</p>

<pre><code>-ifdef(comment).
  Something to comment
  You can add text or
  function(Declaration) -&gt;
     ...
  Which will removed from file
-endif.
</code></pre>
",DenisKolodin,,1432454409,1432454409,0
http://stackoverflow.com/a/304447/90297,Is there an equivalent of &#39;which&#39; on the Windows command line?,529281,namin,Wolf,1227154775,1556888418,1516809184,https://stackoverflow.com/questions/304319/is-there-an-equivalent-of-which-on-the-windows-command-line,"<p>Windows Server 2003 and later (i.e. anything after Windows XP 32 bit) provide the <code>where.exe</code> program which does some of what <code>which</code> does, though it matches all types of files, not just executable commands.  (It does not match built-in shell commands like <code>cd</code>.)  It will even accept wildcards, so <code>where nt*</code> finds all files in your <code>%PATH%</code> and current directory whose names start with <code>nt</code>.</p>

<p>Try <code>where /?</code> for help.</p>

<p>Note that Windows PowerShell defines <code>where</code> as an alias for <a href=""http://technet.microsoft.com/en-us/library/hh849715.aspx"" rel=""noreferrer"">the <code>Where-Object</code> cmdlet</a>, so if you want <code>where.exe</code>, you need to type the full name instead of omitting the <code>.exe</code> extension.</p>
",Michael Ratanapintha,rogerdpack,1227160370,1454917175,1454917175
http://stackoverflow.com/a/30463972/1170370,How do you do a simple &quot;chmod +x&quot; from within python?,71966,priestc,ArtOfWarfare,1349749127,1557351550,1436294088,https://stackoverflow.com/questions/12791997/how-do-you-do-a-simple-chmod-x-from-within-python,"<p>For tools that generate executable files (e.g. scripts), the following code might be helpful:</p>

<pre><code>def make_executable(path):
    mode = os.stat(path).st_mode
    mode |= (mode &amp; 0o444) &gt;&gt; 2    # copy R bits to X
    os.chmod(path, mode)
</code></pre>

<p>This makes it (more or less) respect the <code>umask</code> that was in effect when the file was created: Executable is only set for those that can read.</p>

<p>Usage:</p>

<pre><code>path = 'foo.sh'
with open(path, 'w') as f:           # umask in effect when file is created
    f.write('#!/bin/sh\n')
    f.write('echo ""hello world""\n')

make_executable(path)
</code></pre>
",Jonathon Reinhart,Jonathon Reinhart,1432657339,1453567181,1453567181
http://stackoverflow.com/a/30477507/228885,Test that a click event in React updates the HTML,3282,Paul D&#39;Ambra,Paul D&#39;Ambra,1424648576,1466062085,1424649421,https://stackoverflow.com/questions/28664824/test-that-a-click-event-in-react-updates-the-html,"<p>I had the same issue. The thing is, <code>TestUtils.Simulate.click(yearHeader.getDOMNode())</code> is making a click on the DOM, which brings about sorting data and DOM manipulation. Even if you use jsDom and not a real dom, this manipulation itself is an <em>async</em> event. So, just by checking the DOM state right after the click event you are making a syncronous call, within which the DOM state has not been changed yet.</p>

<p>The solution is, use a <code>setTimeout</code> with 0 milliseconds timeout, and check the DOM state there. As for you example : </p>

<pre><code>setTimeout(function() {
  var columnValues = getYearColumnValues(payTable, TestUtils);
  columnValues.should.match([ 'Year', '1066', '1067', '1068' ]);
},0)
</code></pre>

<p>This would make your DOM update its state and you will be able to test your component.</p>
",Koustuv Sinha,,1432716584,1432716584,0
http://stackoverflow.com/a/3054314/1391441,Generating a PNG with matplotlib when DISPLAY is undefined,160916,krisdigitx,Joel,1273486953,1548489277,1470699446,https://stackoverflow.com/questions/2801882/generating-a-png-with-matplotlib-when-display-is-undefined,"<p>The main problem is that (on your system) matplotlib chooses an x-using backend by default. I just had the same problem on one of my servers.  The solution for me was to add the following code in a place that gets read <em>before</em> any other pylab/matplotlib/<strong>pyplot</strong> import:</p>

<pre><code>import matplotlib
# Force matplotlib to not use any Xwindows backend.
matplotlib.use('Agg')
</code></pre>

<p>The alternative is to set it in your .matplotlibrc</p>
",Reinout van Rees,Reinout van Rees,1276699282,1439963895,1439963895
http://stackoverflow.com/a/3054314/4794,Generating a PNG with matplotlib when DISPLAY is undefined,160916,krisdigitx,Joel,1273486953,1548489277,1470699446,https://stackoverflow.com/questions/2801882/generating-a-png-with-matplotlib-when-display-is-undefined,"<p>The main problem is that (on your system) matplotlib chooses an x-using backend by default. I just had the same problem on one of my servers.  The solution for me was to add the following code in a place that gets read <em>before</em> any other pylab/matplotlib/<strong>pyplot</strong> import:</p>

<pre><code>import matplotlib
# Force matplotlib to not use any Xwindows backend.
matplotlib.use('Agg')
</code></pre>

<p>The alternative is to set it in your .matplotlibrc</p>
",Reinout van Rees,Reinout van Rees,1276699282,1439963895,1439963895
http://stackoverflow.com/a/30577608/1222326,How to create a new table from select statement in sqlalchemy?,3024,Ranjith Ramachandra,Ranjith Ramachandra,1433166013,1460462736,1433166538,https://stackoverflow.com/questions/30575111/how-to-create-a-new-table-from-select-statement-in-sqlalchemy,"<p>Normally we'd subclass DDLElement, but as you'd like to use bound parameters, we'll stay within the SQL element system:</p>

<pre class=""lang-py prettyprint-override""><code>from sqlalchemy.ext.compiler import compiles
from sqlalchemy.sql.expression import ClauseElement, Executable


class CreateTableAs(Executable, ClauseElement):

    def __init__(self, name, query):
        self.name = name
        self.query = query


@compiles(CreateTableAs, ""postgresql"")
def _create_table_as(element, compiler, **kw):
    return ""CREATE TABLE %s AS %s"" % (
        element.name,
        compiler.process(element.query)
    )

if __name__ == '__main__':
    from sqlalchemy import Table, Column, Integer, \
        MetaData, create_engine, select

    m = MetaData()
    t = Table('t', m, Column('x', Integer), Column('y', Integer))

    e = create_engine(""postgresql://scott:tiger@localhost/test"", echo=True)
    c = e.connect()
    trans = c.begin()

    t.create(c)
    c.execute(
        t.insert(),
        [{""x"": 1, ""y"": 2}, {""x"": 11, ""y"": 3}]
    )

    s = select([t]).where(t.c.x &gt; 10)

    c.execute(CreateTableAs('t2', s))

    assert c.execute(""select x, y from t2"").fetchall() == [(11, 3)]
    trans.rollback()
</code></pre>

<p>output:</p>

<pre><code>2015-06-01 11:42:55,982 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)
2015-06-01 11:42:55,982 INFO sqlalchemy.engine.base.Engine 
CREATE TABLE t (
    x INTEGER, 
    y INTEGER
)


2015-06-01 11:42:55,982 INFO sqlalchemy.engine.base.Engine {}
2015-06-01 11:42:55,985 INFO sqlalchemy.engine.base.Engine INSERT INTO t (x, y) VALUES (%(x)s, %(y)s)
2015-06-01 11:42:55,986 INFO sqlalchemy.engine.base.Engine ({'y': 2, 'x': 1}, {'y': 3, 'x': 11})
2015-06-01 11:42:55,988 INFO sqlalchemy.engine.base.Engine CREATE TABLE t2 AS SELECT t.x, t.y 
FROM t 
WHERE t.x &gt; %(x_1)s
2015-06-01 11:42:55,988 INFO sqlalchemy.engine.base.Engine {'x_1': 10}
2015-06-01 11:42:55,996 INFO sqlalchemy.engine.base.Engine select x, y from t2
2015-06-01 11:42:55,996 INFO sqlalchemy.engine.base.Engine {}
2015-06-01 11:42:55,997 INFO sqlalchemy.engine.base.Engine ROLLBACK
</code></pre>
",zzzeek,das-g,1433173123,1460462736,1460462736
http://stackoverflow.com/a/30624034/186202,Sphinx autodoc gives WARNING: py:class reference target not found: type warning,1884,Douglas Schneider,Abhijeet Kasurde,1341935729,1433344212,1431181708,https://stackoverflow.com/questions/11417221/sphinx-autodoc-gives-warning-pyclass-reference-target-not-found-type-warning,"<p>This is simply a bug in the Python docs themselves--references to some of the Python built-ins (including <code>type</code>) do no resolve correctly (see, for example <a href=""https://bugs.python.org/issue11975"" rel=""noreferrer"">https://bugs.python.org/issue11975</a>).</p>

<p>To make the warning go away you can add the <a href=""http://sphinx-doc.org/config.html#confval-nitpick_ignore"" rel=""noreferrer""><code>nitpick_ignore</code></a> option to your Sphinx config.  For example on the Astropy project we have:</p>

<pre><code>nitpick_ignore = [('py:class', 'type')]
</code></pre>

<p>In fact, there are enough exceptions that we just put them all in a separate file that we read them out of.  See:</p>

<p><a href=""https://github.com/astropy/astropy/blob/35501fcba6811705fcd53669742db8346727672d/docs/conf.py#L195"" rel=""noreferrer"">https://github.com/astropy/astropy/blob/35501fcba6811705fcd53669742db8346727672d/docs/conf.py#L195</a></p>

<p>and for the exception file itself:</p>

<p><a href=""https://github.com/astropy/astropy/blob/35501fcba6811705fcd53669742db8346727672d/docs/nitpick-exceptions"" rel=""noreferrer"">https://github.com/astropy/astropy/blob/35501fcba6811705fcd53669742db8346727672d/docs/nitpick-exceptions</a></p>

<p>Many of the exceptions in the above file are specific to Astropy, but others address some broken references in Python and in Numpy, and may be generically useful.</p>
",Iguananaut,,1433344212,1433344212,0
http://stackoverflow.com/a/30723988/1068746,Javascript: Convert dot-delimited strings to nested object value,4873,Tyler,Tyler,1421806654,1491837636,1421808907,https://stackoverflow.com/questions/28058519/javascript-convert-dot-delimited-strings-to-nested-object-value,"<p>You mentioned lodash in your question, so I thought I should add their easy object <code>set()</code> and <code>get()</code> functions. Just do something like:</p>

<pre><code>_.set(record, 'availability_meta.supplier.price', 99);
</code></pre>

<p>You can read more about it here: <a href=""https://lodash.com/docs#set"">https://lodash.com/docs#set</a></p>

<p>These functions let you do more complex things too, like specify array indexes, etc :)</p>
",Matt Way,,1433829355,1433829355,0
http://stackoverflow.com/a/3072979/230513,GUI not working after rewriting to MVC,38918,trevor_nise,SME,1276822504,1409396043,1342700426,https://stackoverflow.com/questions/3066590/gui-not-working-after-rewriting-to-mvc,"<p>As you've discovered, the <a href=""http://en.wikipedia.org/wiki/Model-view-controller"" rel=""noreferrer"">ModelViewController</a> pattern is no panacea, but it offers some advantages. Rooted in <a href=""http://en.wikipedia.org/wiki/Model-view-controller"" rel=""noreferrer"">MVC</a>, the Swing separable model architecture is discussed in <a href=""http://www.oracle.com/technetwork/java/architecture-142923.html"" rel=""noreferrer""><em>A Swing Architecture Overview</em></a>. Based on <a href=""https://stackoverflow.com/questions/2687871"">this outline</a>, the following example shows an <a href=""http://en.wikipedia.org/wiki/Model-view-controller"" rel=""noreferrer"">MVC</a> implementation of a much simpler game that illustrates similar principles. Note that the <code>Model</code> manages a single <code>Piece</code>, chosen at random. In response to a user's selection, the <code>View</code> invokes the <code>check()</code> method, while listening for a response from the <code>Model</code> via <code>update()</code>. The <code>View</code> then updates itself using information obtained from the <code>Model</code>. Similarly, the <code>Controller</code> may <code>reset()</code> the <code>Model</code>. In particular, there is no drawing in the <code>Model</code> and no game logic in the <code>View</code>. This somewhat more complex <a href=""http://robotchase.sourceforge.net/"" rel=""noreferrer"">game</a> was designed to illustrate the same concepts.</p>

<p>Addendum: I've modified the original example to show how <a href=""http://en.wikipedia.org/wiki/Model-view-controller"" rel=""noreferrer"">MVC</a> allows one to enhance the <code>View</code> without changing the nature of the <code>Model</code>.</p>

<p>Addendum: As @akf observes, <a href=""http://en.wikipedia.org/wiki/Model-view-controller"" rel=""noreferrer"">MVC</a> hinges on the <a href=""http://en.wikipedia.org/wiki/Observer_pattern"" rel=""noreferrer"">observer pattern</a>. Your <code>Model</code> needs a way to notify the <code>View</code> of changes. Several approaches are widely used:</p>

<ul>
<li><p>In the example below, <code>Model</code> extends <a href=""http://java.sun.com/javase/6/docs/api/java/util/Observable.html"" rel=""noreferrer""><code>Observable</code></a> for simplicity.</p></li>
<li><p>A more common approach uses an <a href=""http://java.sun.com/javase/6/docs/api/javax/swing/event/EventListenerList.html"" rel=""noreferrer""><code>EventListenerList</code></a>, as shown in the <a href=""http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html"" rel=""noreferrer""><code>Converter</code></a> application and suggested by the large number of <a href=""http://java.sun.com/javase/6/docs/api/java/util/EventListener.html"" rel=""noreferrer""><code>EventListener</code></a> subinterfaces and implementing classes.</p></li>
<li><p>A third option is to use a <a href=""http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyChangeListener.html"" rel=""noreferrer""><code>PropertyChangeListener</code></a>, as shown <a href=""https://stackoverflow.com/a/10523401/230513"">here</a> and <a href=""https://stackoverflow.com/questions/5533581"">here</a>.</p></li>
</ul>

<p>Addendum: Some common questions about Swing controllers are addressed <a href=""https://stackoverflow.com/a/25556585/230513"">here</a> and <a href=""https://stackoverflow.com/a/23416515/230513"">here</a>.</p>

<p><img src=""https://i.stack.imgur.com/uaeEq.png"" alt=""screen capture""></p>

<pre><code>import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Observable;
import java.util.Observer;
import java.util.Random;
import javax.swing.Icon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

/**
 * @see https://stackoverflow.com/q/3066590/230513
 * 15-Mar-2011 r8 https://stackoverflow.com/questions/5274962
 * 26-Mar-2013 r17 per comment
 */
public class MVCGame implements Runnable {

    public static void main(String[] args) {
        EventQueue.invokeLater(new MVCGame());
    }

    @Override
    public void run() {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new MainPanel());
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
}

class MainPanel extends JPanel {

    public MainPanel() {
        super(new BorderLayout());
        Model model = new Model();
        View view = new View(model);
        Control control = new Control(model, view);
        JLabel label = new JLabel(""Guess what color!"", JLabel.CENTER);
        this.add(label, BorderLayout.NORTH);
        this.add(view, BorderLayout.CENTER);
        this.add(control, BorderLayout.SOUTH);
    }
}

/**
 * Control panel
 */
class Control extends JPanel {

    private Model model;
    private View view;
    private JButton reset = new JButton(""Reset"");

    public Control(Model model, View view) {
        this.model = model;
        this.view = view;
        this.add(reset);
        reset.addActionListener(new ButtonHandler());
    }

    private class ButtonHandler implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            String cmd = e.getActionCommand();
            if (""Reset"".equals(cmd)) {
                model.reset();
            }
        }
    }
}

/**
 * View
 */
class View extends JPanel {

    private static final String s = ""Click a button."";
    private Model model;
    private ColorIcon icon = new ColorIcon(80, Color.gray);
    private JLabel label = new JLabel(s, icon, JLabel.CENTER);

    public View(Model model) {
        super(new BorderLayout());
        this.model = model;
        label.setVerticalTextPosition(JLabel.BOTTOM);
        label.setHorizontalTextPosition(JLabel.CENTER);
        this.add(label, BorderLayout.CENTER);
        this.add(genButtonPanel(), BorderLayout.SOUTH);
        model.addObserver(new ModelObserver());
    }

    private JPanel genButtonPanel() {
        JPanel panel = new JPanel();
        for (Piece p : Piece.values()) {
            PieceButton pb = new PieceButton(p);
            pb.addActionListener(new ButtonHandler());
            panel.add(pb);
        }
        return panel;
    }

    private class ModelObserver implements Observer {

        @Override
        public void update(Observable o, Object arg) {
            if (arg == null) {
                label.setText(s);
                icon.color = Color.gray;
            } else {
                if ((Boolean) arg) {
                    label.setText(""Win!"");
                } else {
                    label.setText(""Keep trying."");
                }
            }
        }
    }

    private class ButtonHandler implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            PieceButton pb = (PieceButton) e.getSource();
            icon.color = pb.piece.color;
            label.repaint();
            model.check(pb.piece);
        }
    }

    private static class PieceButton extends JButton {

        Piece piece;

        public PieceButton(Piece piece) {
            this.piece = piece;
            this.setIcon(new ColorIcon(16, piece.color));
        }
    }

    private static class ColorIcon implements Icon {

        private int size;
        private Color color;

        public ColorIcon(int size, Color color) {
            this.size = size;
            this.color = color;
        }

        @Override
        public void paintIcon(Component c, Graphics g, int x, int y) {
            Graphics2D g2d = (Graphics2D) g;
            g2d.setRenderingHint(
                RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.setColor(color);
            g2d.fillOval(x, y, size, size);
        }

        @Override
        public int getIconWidth() {
            return size;
        }

        @Override
        public int getIconHeight() {
            return size;
        }
    }
}

/**
 * Model
 */
class Model extends Observable {

    private static final Random rnd = new Random();
    private static final Piece[] pieces = Piece.values();
    private Piece hidden = init();

    private Piece init() {
        return pieces[rnd.nextInt(pieces.length)];
    }

    public void reset() {
        hidden = init();
        setChanged();
        notifyObservers();
    }

    public void check(Piece guess) {
        setChanged();
        notifyObservers(guess.equals(hidden));
    }
}

enum Piece {

    Red(Color.red), Green(Color.green), Blue(Color.blue);
    public Color color;

    private Piece(Color color) {
        this.color = color;
    }
}
</code></pre>
",trashgod,Community,1276894232,1409396043,1495542377
http://stackoverflow.com/a/3091136/1208233,Check if a key exists in Memcache,15633,Matic,NHG,1277191729,1515406233,1444386712,https://stackoverflow.com/questions/3091107/check-if-a-key-exists-in-memcache,"<p>I am not sure if this is of any help to you, but you can use </p>

<pre><code>Memcache::add  (  string $key  ,  mixed $var)
</code></pre>

<p>It will return false if the key already exists.</p>

<p>In case true is returned you may use </p>

<pre><code>Memcache::delete  (  string $key)
</code></pre>

<p>to remove the key you just set. That way you won't need to fetch the data.</p>
",Thariama,,1277192088,1277192088,0
http://stackoverflow.com/a/30923963/2946714,How to convert an xml string to a dictionary?,149191,user361526,martineau,1264606129,1559141140,1552519184,https://stackoverflow.com/questions/2148119/how-to-convert-an-xml-string-to-a-dictionary,"<p>This lightweight version, while not configurable, is pretty easy to tailor as needed, and works in old pythons.  Also it is rigid - meaning the results are the same regardless of the existence of attributes.</p>

<pre><code>import xml.etree.ElementTree as ET

from copy import copy

def dictify(r,root=True):
    if root:
        return {r.tag : dictify(r, False)}
    d=copy(r.attrib)
    if r.text:
        d[""_text""]=r.text
    for x in r.findall(""./*""):
        if x.tag not in d:
            d[x.tag]=[]
        d[x.tag].append(dictify(x,False))
    return d
</code></pre>

<p>So:</p>

<pre><code>root = ET.fromstring(""&lt;erik&gt;&lt;a x='1'&gt;v&lt;/a&gt;&lt;a y='2'&gt;w&lt;/a&gt;&lt;/erik&gt;"")

dictify(root)
</code></pre>

<p>Results in:</p>

<pre><code>{'erik': {'a': [{'x': '1', '_text': 'v'}, {'y': '2', '_text': 'w'}]}}
</code></pre>
",Erik Aronesty,Erik Aronesty,1434655177,1434655609,1434655609
http://stackoverflow.com/a/309718/115145,How do I read / convert an InputStream into a String in Java?,1953047,Johnny Maelstrom,Peter Mortensen,1227286060,1561010248,1546684106,https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java,"<p>Taking into account file one should first get a <code>java.io.Reader</code> instance. This can then be read and added to a <code>StringBuilder</code> (we don't need <code>StringBuffer</code> if we are not accessing it in multiple threads, and <code>StringBuilder</code> is faster). The trick here is that we work in blocks, and as such don't need other buffering streams. The block size is parameterized for run-time performance optimization.</p>

<pre><code>public static String slurp(final InputStream is, final int bufferSize) {
    final char[] buffer = new char[bufferSize];
    final StringBuilder out = new StringBuilder();
    try (Reader in = new InputStreamReader(is, ""UTF-8"")) {
        for (;;) {
            int rsz = in.read(buffer, 0, buffer.length);
            if (rsz &lt; 0)
                break;
            out.append(buffer, 0, rsz);
        }
    }
    catch (UnsupportedEncodingException ex) {
        /* ... */
    }
    catch (IOException ex) {
        /* ... */
    }
    return out.toString();
}
</code></pre>
",Paul de Vrieze,Ian2thedv,1227292451,1436955825,1436955825
http://stackoverflow.com/a/31003453/321797,How to use subList(),126672,user1285928,,1345754806,1554197578,0,https://stackoverflow.com/questions/12099721/how-to-use-sublist,"<p>I've implemented and tested this one; it should cover most bases:</p>

<pre><code>public static &lt;T&gt; List&lt;T&gt; safeSubList(List&lt;T&gt; list, int fromIndex, int toIndex) {
    int size = list.size();
    if (fromIndex &gt;= size || toIndex &lt;= 0 || fromIndex &gt;= toIndex) {
        return Collections.emptyList();
    }

    fromIndex = Math.max(0, fromIndex);
    toIndex = Math.min(size, toIndex);

    return list.subList(fromIndex, toIndex);
}
</code></pre>
",Haroldo_OK,Haroldo_OK,1435064252,1435143500,1435143500
http://stackoverflow.com/a/31012883/2726725,How do I reset a form including removing all validation errors?,49173,battmanz,Community,1435082332,1524110506,1495542749,https://stackoverflow.com/questions/31010096/how-do-i-reset-a-form-including-removing-all-validation-errors,"<p>There doesn't seem to be an easy way to reset the $errors in angular. The best way would probably be to reload the current page to start with a new form. Alternatively you have to remove all $error manually with this script:</p>

<pre><code>form.$setPristine(true);
form.$setUntouched(true);

// iterate over all from properties
angular.forEach(form, function(ctrl, name) {
  // ignore angular fields and functions
  if (name.indexOf('$') != 0) {
    // iterate over all $errors for each field        
    angular.forEach(ctrl.$error, function(value, name) {
      // reset validity
      ctrl.$setValidity(name, null);
    });
  }
});
$scope.resetCount++; 
</code></pre>
",Michael,,1435091337,1435091337,0
http://stackoverflow.com/a/310927/253576,Use of &#39;prototype&#39; vs. &#39;this&#39; in JavaScript?,110313,sw234,CRABOLO,1227328789,1553810209,1444497599,https://stackoverflow.com/questions/310870/use-of-prototype-vs-this-in-javascript,"<p>As others have said the first version, using ""this"" results in every instance of the class A having its own independent copy of function method ""x"".  Whereas using ""prototype"" will mean that each instance of class A will use the same copy of method ""x"".</p>

<p>Here is some code to show this subtle difference:</p>

<pre><code>// x is a method assigned to the object using ""this""
var A = function () {
    this.x = function () { alert('A'); };
};
A.prototype.updateX = function( value ) {
    this.x = function() { alert( value ); }
};

var a1 = new A();
var a2 = new A();
a1.x();  // Displays 'A'
a2.x();  // Also displays 'A'
a1.updateX('Z');
a1.x();  // Displays 'Z'
a2.x();  // Still displays 'A'

// Here x is a method assigned to the object using ""prototype""
var B = function () { };
B.prototype.x = function () { alert('B'); };

B.prototype.updateX = function( value ) {
    B.prototype.x = function() { alert( value ); }
}

var b1 = new B();
var b2 = new B();
b1.x();  // Displays 'B'
b2.x();  // Also displays 'B'
b1.updateX('Y');
b1.x();  // Displays 'Y'
b2.x();  // Also displays 'Y' because by using prototype we have changed it for all instances
</code></pre>

<p>As others have mentioned, there are various reasons to choose one method or the other.  My sample is just meant to clearly demonstrate the difference.</p>
",Benry,kaiser,1227332509,1466000331,1466000331
http://stackoverflow.com/a/31107425/3101412,PHP random string generator,1107724,Captain Lightning,Yogesh Suthar,1291503381,1560085273,1460277335,https://stackoverflow.com/questions/4356289/php-random-string-generator,"<p>There are a lot of answers to this question, but none of them leverage a <a href=""http://www.cryptofails.com/post/72902772336/how-not-to-csprng"" rel=""noreferrer"">Cryptographically Secure Pseudo-Random Number Generator</a> (CSPRNG).</p>

<p>The simple, secure, and correct answer is to use <a href=""https://github.com/paragonie/RandomLib"" rel=""noreferrer"">RandomLib</a> and don't reinvent the wheel.</p>

<p>For those of you who insist on inventing your own solution, PHP 7.0.0 will provide <a href=""https://secure.php.net/random_int"" rel=""noreferrer""><code>random_int()</code></a> for this purpose; if you're still on PHP 5.x, we wrote a <a href=""https://github.com/paragonie/random_compat"" rel=""noreferrer"">PHP 5 polyfill for <code>random_int()</code></a> so you can use the new API even before you upgrade to PHP 7.</p>

<p><a href=""https://paragonie.com/blog/2015/07/how-safely-generate-random-strings-and-integers-in-php"" rel=""noreferrer"">Safely generating random integers in PHP</a> isn't a trivial task. You should always check with <a href=""https://crypto.stackexchange.com"">your resident StackExchange cryptography experts</a> before you deploy a home-grown algorithm in production.</p>

<p>With a secure integer generator in place, generating a random string with a CSPRNG is a walk in the park.</p>

<h3>Creating a Secure, Random String</h3>

<pre><code>/**
 * Generate a random string, using a cryptographically secure 
 * pseudorandom number generator (random_int)
 * 
 * For PHP 7, random_int is a PHP core function
 * For PHP 5.x, depends on https://github.com/paragonie/random_compat
 * 
 * @param int $length      How many characters do we want?
 * @param string $keyspace A string of all possible characters
 *                         to select from
 * @return string
 */
function random_str($length, $keyspace = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ')
{
    $pieces = [];
    $max = mb_strlen($keyspace, '8bit') - 1;
    for ($i = 0; $i &lt; $length; ++$i) {
        $pieces []= $keyspace[random_int(0, $max)];
    }
    return implode('', $pieces);
}
</code></pre>

<p><strong>Usage</strong>:</p>

<pre><code>$a = random_str(32);
$b = random_str(8, 'abcdefghijklmnopqrstuvwxyz');
</code></pre>

<p><strong>Demo</strong>: <a href=""https://3v4l.org/b4PST"" rel=""noreferrer"">https://3v4l.org/b4PST</a> (Ignore the PHP 5 failures; it needs random_compat)</p>
",Scott Arciszewski,Scott Arciszewski,1435549282,1522614560,1522614560
http://stackoverflow.com/a/311716/4184258,Algorithm for sampling without replacement?,20812,Argalatyr,Ciro Santilli 996ICU,1227383815,1508374384,1488193820,https://stackoverflow.com/questions/311703/algorithm-for-sampling-without-replacement,"<p>Here's some code for sampling without replacement based on Algorithm 3.4.2S of Knuth's book Seminumeric Algorithms.</p>

<pre><code>void SampleWithoutReplacement
(
    int populationSize,    // size of set sampling from
    int sampleSize,        // size of each sample
    vector&lt;int&gt; &amp; samples  // output, zero-offset indicies to selected items
)
{
    // Use Knuth's variable names
    int&amp; n = sampleSize;
    int&amp; N = populationSize;

    int t = 0; // total input records dealt with
    int m = 0; // number of items selected so far
    double u;

    while (m &lt; n)
    {
        u = GetUniform(); // call a uniform(0,1) random number generator

        if ( (N - t)*u &gt;= n - m )
        {
            t++;
        }
        else
        {
            samples[m] = t;
            t++; m++;
        }
    }
}
</code></pre>

<p>There is a more efficient but more complex method by Jeffrey Scott Vitter in ""An Efficient Algorithm for Sequential Random Sampling,"" ACM Transactions on Mathematical Software, 13(1), March 1987, 58-67. </p>
",John D. Cook,,1227384494,1227384494,0
http://stackoverflow.com/a/312464/190597,How do you split a list into evenly sized chunks?,769865,jespern,Community,1227442552,1562681052,1495540511,https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks,"<p>Here's a generator that yields the chunks you want:</p>

<pre><code>def chunks(l, n):
    """"""Yield successive n-sized chunks from l.""""""
    for i in range(0, len(l), n):
        yield l[i:i + n]
</code></pre>

<hr>

<pre><code>import pprint
pprint.pprint(list(chunks(range(10, 75), 10)))
[[10, 11, 12, 13, 14, 15, 16, 17, 18, 19],
 [20, 21, 22, 23, 24, 25, 26, 27, 28, 29],
 [30, 31, 32, 33, 34, 35, 36, 37, 38, 39],
 [40, 41, 42, 43, 44, 45, 46, 47, 48, 49],
 [50, 51, 52, 53, 54, 55, 56, 57, 58, 59],
 [60, 61, 62, 63, 64, 65, 66, 67, 68, 69],
 [70, 71, 72, 73, 74]]
</code></pre>

<hr>

<p>If you're using Python 2, you should use <code>xrange()</code> instead of <code>range()</code>:</p>

<pre><code>def chunks(l, n):
    """"""Yield successive n-sized chunks from l.""""""
    for i in xrange(0, len(l), n):
        yield l[i:i + n]
</code></pre>

<hr>

<p>Also you can simply use list comprehension instead of writing a function, though it's a good idea to encapsulate operations like this in named functions so that your code is easier to understand. Python 3:</p>

<pre><code>[l[i:i + n] for i in range(0, len(l), n)]
</code></pre>

<p>Python 2 version:</p>

<pre><code>[l[i:i + n] for i in xrange(0, len(l), n)]
</code></pre>
",Ned Batchelder,Ned Batchelder,1227443633,1557268889,1557268889
http://stackoverflow.com/a/312464/3776794,How do you split a list into evenly sized chunks?,769865,jespern,Community,1227442552,1562681052,1495540511,https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks,"<p>Here's a generator that yields the chunks you want:</p>

<pre><code>def chunks(l, n):
    """"""Yield successive n-sized chunks from l.""""""
    for i in range(0, len(l), n):
        yield l[i:i + n]
</code></pre>

<hr>

<pre><code>import pprint
pprint.pprint(list(chunks(range(10, 75), 10)))
[[10, 11, 12, 13, 14, 15, 16, 17, 18, 19],
 [20, 21, 22, 23, 24, 25, 26, 27, 28, 29],
 [30, 31, 32, 33, 34, 35, 36, 37, 38, 39],
 [40, 41, 42, 43, 44, 45, 46, 47, 48, 49],
 [50, 51, 52, 53, 54, 55, 56, 57, 58, 59],
 [60, 61, 62, 63, 64, 65, 66, 67, 68, 69],
 [70, 71, 72, 73, 74]]
</code></pre>

<hr>

<p>If you're using Python 2, you should use <code>xrange()</code> instead of <code>range()</code>:</p>

<pre><code>def chunks(l, n):
    """"""Yield successive n-sized chunks from l.""""""
    for i in xrange(0, len(l), n):
        yield l[i:i + n]
</code></pre>

<hr>

<p>Also you can simply use list comprehension instead of writing a function, though it's a good idea to encapsulate operations like this in named functions so that your code is easier to understand. Python 3:</p>

<pre><code>[l[i:i + n] for i in range(0, len(l), n)]
</code></pre>

<p>Python 2 version:</p>

<pre><code>[l[i:i + n] for i in xrange(0, len(l), n)]
</code></pre>
",Ned Batchelder,Ned Batchelder,1227443633,1557268889,1557268889
http://stackoverflow.com/a/31253540/4970,Commit manually in Django data migration,3472,Pankrat,,1436191108,1538225674,0,https://stackoverflow.com/questions/31247810/commit-manually-in-django-data-migration,"<p>The best workaround I found is manually exiting the atomic scope before running the data migration:</p>

<pre><code>def modify_data(apps, schema_editor):
    schema_editor.atomic.__exit__(None, None, None)
    # [...]
</code></pre>

<p>In contrast to resetting <code>connection.in_atomic_block</code> manually this allows using <code>atomic</code> context manager inside the migration. There doesn't seem to be a much saner way.</p>

<p>One can contain the (admittedly messy) transaction break out logic in a decorator to be used with the <code>RunPython</code> operation:</p>

<pre><code>def non_atomic_migration(func):
  """"""
  Close a transaction from within code that is marked atomic. This is
  required to break out of a transaction scope that is automatically wrapped
  around each migration by the schema editor. This should only be used when
  committing manually inside a data migration. Note that it doesn't re-enter
  the atomic block afterwards.
  """"""
  @wraps(func)
  def wrapper(apps, schema_editor):
      if schema_editor.connection.in_atomic_block:
          schema_editor.atomic.__exit__(None, None, None)
      return func(apps, schema_editor)
  return wrapper
</code></pre>

<p><strong>Update</strong></p>

<p>Django 1.10 will support <a href=""https://docs.djangoproject.com/en/dev/howto/writing-migrations/#non-atomic-migrations"" rel=""noreferrer"">non-atomic migrations</a>.</p>
",Pankrat,Pankrat,1436209101,1454918156,1454918156
http://stackoverflow.com/a/31306961/2188572,Python: How to Sort List by Last Character of String,6996,Chris Hodges,Anand S Kumar,1436407812,1545463534,1436407846,https://stackoverflow.com/questions/31306951/python-how-to-sort-list-by-last-character-of-string,"<blockquote>
  <p>I am trying to write a program that orders a list of strings based on the last character in the item.</p>
</blockquote>

<pre><code>&gt;&gt;&gt; s = [""Tiger 6"", ""Shark 4"", ""Cyborg 8""]
&gt;&gt;&gt; sorted(s, key=lambda x: int(x[-1]))
['Shark 4', 'Tiger 6', 'Cyborg 8']
</code></pre>

<p>Try this if there are more num of digits at the last.</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; sorted(s, key=lambda x: int(re.search(r'\d+$',x).group()))
['Shark 4', 'Tiger 6', 'Cyborg 8']
</code></pre>

<p><code>re.search(r'\d+$',x).group()</code> helps to fetch the number present at the last irrespective of preceding space. </p>
",Avinash Raj,Avinash Raj,1436407889,1436408213,1436408213
http://stackoverflow.com/a/3143231/486547,javascript regex iso datetime,45848,Scott,,1277831586,1551894673,0,https://stackoverflow.com/questions/3143070/javascript-regex-iso-datetime,"<p>For the strict, full datetime, including milliseconds, per <strong><a href=""http://www.w3.org/TR/NOTE-datetime"" rel=""noreferrer"">the W3C's take on the spec</a></strong>.:</p>

<pre><code>//-- Complete precision:
/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/

//-- No milliseconds:
/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)/

//-- No Seconds:
/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)/

//-- Putting it all together:
/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/
</code></pre>

<p>.<br>
Additional variations allowed by the actual <a href=""http://dotat.at/tmp/ISO_8601-2004_E.pdf"" rel=""noreferrer"">ISO 8601:2004(E) doc</a>:</p>

<pre><code>/********************************************
**    No time-zone varients:
*/
//-- Complete precision:
/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+/

//-- No milliseconds:
/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d/

//-- No Seconds:
/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d/

//-- Putting it all together:
/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+)|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d)|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d)/
</code></pre>

<p>WARNING: This all gets messy fast, and it <strong>still</strong> allows certain nonsense such as a 14th month.
Additionally, ISO 8601:2004(E) allows a several other variants.  </p>

<p>.<br>
<strike>""2010-06-15T00:00:00"" isn't legal, because it doesn't have the time-zone designation.</strike></p>
",Brock Adams,Brock Adams,1277832853,1277855668,1277855668
http://stackoverflow.com/a/314422/1148634,How to read a line from the console in C?,237790,pbreault,Jim Fell,1227539108,1495718648,1465482441,https://stackoverflow.com/questions/314401/how-to-read-a-line-from-the-console-in-c,"<p>You need dynamic memory management, and use the <code>fgets</code> function to read your line. However, there seems to be no way to see how many characters it read. So you use fgetc:</p>

<pre><code>char * getline(void) {
    char * line = malloc(100), * linep = line;
    size_t lenmax = 100, len = lenmax;
    int c;

    if(line == NULL)
        return NULL;

    for(;;) {
        c = fgetc(stdin);
        if(c == EOF)
            break;

        if(--len == 0) {
            len = lenmax;
            char * linen = realloc(linep, lenmax *= 2);

            if(linen == NULL) {
                free(linep);
                return NULL;
            }
            line = linen + (line - linep);
            linep = linen;
        }

        if((*line++ = c) == '\n')
            break;
    }
    *line = '\0';
    return linep;
}
</code></pre>

<p><strong>Note</strong>: Never use gets ! It does not do bounds checking and can overflow your buffer</p>
",Johannes Schaub - litb,TheConstructor,1227539455,1352849289,1352849289
http://stackoverflow.com/a/3146214/2224584,AES CTR 256 Encryption Mode of operation on OpenSSL,36847,Bartzilla,Bartzilla,1277823047,1336452372,1278084202,https://stackoverflow.com/questions/3141860/aes-ctr-256-encryption-mode-of-operation-on-openssl,"<p>Usually, you will be intending to call <code>AES_ctr128_encrypt()</code> repeatedly to send several messages with the same key and IV, and an incrementing counter.  This means you need to keep track of the 'ivec', 'num' and 'ecount' values between calls - so create a <code>struct</code> to hold these, and an initialisation function:</p>

<pre><code>struct ctr_state {
    unsigned char ivec[16];  /* ivec[0..7] is the IV, ivec[8..15] is the big-endian counter */
    unsigned int num;
    unsigned char ecount[16];
};

int init_ctr(struct ctr_state *state, const unsigned char iv[8])
{
    /* aes_ctr128_encrypt requires 'num' and 'ecount' set to zero on the
     * first call. */
    state-&gt;num = 0;
    memset(state-&gt;ecount, 0, 16);

    /* Initialise counter in 'ivec' to 0 */
    memset(state-&gt;ivec + 8, 0, 8);

    /* Copy IV into 'ivec' */
    memcpy(state-&gt;ivec, iv, 8);
}
</code></pre>

<p>Now, when you start communicating with the destination, you'll need to generate an IV to use and initialise the counter:</p>

<pre><code>unsigned char iv[8];
struct ctr_state state;

if (!RAND_bytes(iv, 8))
    /* Handle the error */;

init_ctr(&amp;state, iv);
</code></pre>

<p>You will then need to send the 8 byte IV to the destination.  You'll also need to initialise an <code>AES_KEY</code> from your raw key bytes:</p>

<pre><code>AES_KEY aes_key;

if (!AES_set_encrypt_key(key, 128, &amp;aes_key))
    /* Handle the error */;
</code></pre>

<p>You can now start encrypting data and sending it to the destination, with repeated calls to <code>AES_ctr128_encrypt()</code> like this:</p>

<pre><code>if (!AES_ctr128_encrypt(msg_in, msg_out, msg_len, &amp;aes_key, state-&gt;ivec, state-&gt;ecount, &amp;state-&gt;num))
    /* Handle the error */;
</code></pre>

<p>(<code>msg_in</code> is a pointer to a buffer containing the plaintext message, <code>msg_out</code> is a pointer to a buffer where the encrypted message should go, and <code>msg_len</code> is the message length).</p>

<p>Decryption is exactly the same, except that you do not generate the IV with <code>RAND_bytes()</code> - instead, you take the value given to you by the other side.</p>

<p><strong>Important:</strong></p>

<ol>
<li><p>Do <strong>not</strong> call <code>init_ctr()</code> more than once during the encryption process.  The counter and IV must be initialised <strong>once only</strong> prior to the start of encryption.</p></li>
<li><p>Under no circumstances be tempted to get the IV anywhere other than from <code>RAND_bytes()</code> on the encryption side.  Don't set it to a fixed value; don't use a hash function; don't use the recipient's name; don't read it from disk.  Generate it with <code>RAND_bytes()</code> and send it to the destination.  Whenever you start with a zero counter, you <em>must</em> start with a completely fresh IV that you have never used before.</p></li>
<li><p>If it is at all possible that you will be sending 2**64 bytes without changing the IV and/or key, you will need to test for the counter overflowing.</p></li>
<li><p>Do not omit error-checking.  If a function fails and you ignore it, it's quite possible (even likely) that your system will appear to be functioning normally, but will actually be operating completely insecurely.</p></li>
</ol>
",caf,caf,1277867382,1311840534,1311840534
http://stackoverflow.com/a/31474509/569101,#1071 - Specified key was too long; max key length is 767 bytes,517655,Steven,OMG Ponies,1259464697,1560089516,1306186374,https://stackoverflow.com/questions/1814532/1071-specified-key-was-too-long-max-key-length-is-767-bytes,"<p>When you hit the limit. Set the following.</p>

<ul>
<li>INNODB <code>utf8</code> <code>VARCHAR(255)</code></li>
<li>INNODB <code>utf8mb4</code> <code>VARCHAR(191)</code></li>
</ul>
",Aley,,1437131569,1437131569,0
http://stackoverflow.com/a/3153457/22466,"How to either determine SVG text box width, or force line breaks after &#39;x&#39; characters?",19653,Jack Roscoe,,1277824033,1432508046,0,https://stackoverflow.com/questions/3142007/how-to-either-determine-svg-text-box-width-or-force-line-breaks-after-x-chara,"<p>There isn't an attribute for text wrapping, but there is a simple trick you can use. Add one word at a time to a text object and when it gets too wide, add a line feed. You can use the getBBox() function to determine the width. Basically, you emulate an old fashioned typewriter. Here is a sample of some code that will do this for you. You could easily turn this into a simple function that takes the text and a width.</p>

<pre><code>var r = Raphael(500, 500);
var t = r.text(100, 100).attr('text-anchor', 'start');
var maxWidth = 100;

var content = ""Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate. "";
var words = content.split("" "");

var tempText = """";
for (var i=0; i&lt;words.length; i++) {
  t.attr(""text"", tempText + "" "" + words[i]);
  if (t.getBBox().width &gt; maxWidth) {
    tempText += ""\n"" + words[i];
  } else {
    tempText += "" "" + words[i];
  }
}

t.attr(""text"", tempText.substring(1));
</code></pre>
",Mark,,1277932482,1277932482,0
http://stackoverflow.com/a/31557473/135001,Correct way to sign and verify signature using bouncycastle,64691,Oscar,Luke Girvin,1369112279,1505818188,1490109764,https://stackoverflow.com/questions/16662408/correct-way-to-sign-and-verify-signature-using-bouncycastle,"<p>There are two kinds of <strong><em>CMSSignedData</em></strong> object generated using <strong><em>CMSSignedDataGenerator</em></strong> They are generated by the following way: </p>

<p>The one below generates a CMSSignedData object carrying a detached CMS signature</p>

<pre><code>gen.generate(cmsdata);
</code></pre>

<p>The code below creates a CMSSignedData carrying a detached CMS signature, having the data encapsulated</p>

<pre><code>gen.generate(cmsdata, true);
</code></pre>

<p>So verifying them requires 2 approaches </p>

<p>Approach No.1 to verify detached signature with encapsulated data</p>

<pre><code>//sig is the Signature object
CMSSignedData signedData = new CMSSignedData(Base64.decode(sig.getBytes()));
</code></pre>

<p>Approach No.2 to verify detached signature without encapsulated data, just the detached signature</p>

<pre><code>//Create a CMSProcessable object, specify any encoding, I have used mine 
CMSProcessable signedContent = new CMSProcessableByteArray(content.getBytes(""ISO-8859-1""));
//Create a InputStream object
InputStream is = new ByteArrayInputStream(Base64.decode(sig.getBytes()));
//Pass them both to CMSSignedData constructor
CMSSignedData signedData = new CMSSignedData(signedContent, is);
</code></pre>

<p>Rest of the code for verification remains the same</p>

<pre><code>Store store = signedData.getCertificates(); 
SignerInformationStore signers = signedData.getSignerInfos(); 

Collection c = signers.getSigners(); 
Iterator it = c.iterator(); 

while (it.hasNext()) { 
    SignerInformation signer = (SignerInformation)it.next(); 

    Collection certCollection = store.getMatches(signer.getSID()); 
    Iterator certIt = certCollection.iterator(); 

    X509CertificateHolder certHolder = (X509CertificateHolder)certIt.next(); 
    X509Certificate cert = new JcaX509CertificateConverter().setProvider(""BC"").getCertificate(certHolder); 

    if (signer.verify(new JcaSimpleSignerInfoVerifierBuilder().setProvider(""BC"").build(cert))) {
        ret = true; 
    }
}
</code></pre>
",Novice,Oscar,1437552708,1437626341,1437626341
http://stackoverflow.com/a/31582977/10278,QPlainTextEdit double click event,1791,hteso,,1437638514,1441202302,0,https://stackoverflow.com/questions/31581453/qplaintextedit-double-click-event,"<ol>
<li><p><code>QTextEdit</code> inherits a <code>QScrollView</code> and when you double click on the viewport of the QTextEdit, the viewport receives the double click event. You can cross check your current code by double clicking on the edges of the text edit. It will capture the event.</p></li>
<li><p>To solve this, add the event filter to the view port in addition to the current event filters you have installed as shown below:</p>

<pre><code>ui-&gt;myPlainTextEdit-&gt;viewport()-&gt;installEventFilter(this);
</code></pre></li>
<li><p>Next, capture the event using this if statement:</p>

<pre><code>   if ((obj == ui-&gt;myPlainTextEdit||obj==ui-&gt;myPlainTextEdit-&gt;viewport()) &amp;&amp;   
        event-&gt;type() == QEvent::MouseButtonDblClick) 
   {
        qDebug() &lt;&lt; ""Double click""&lt;&lt;obj-&gt;objectName();
   }
</code></pre></li>
<li><p>You can capture the click position using <code>QMouseEvent</code>: </p>

<pre><code>QMouseEvent *mouseEvent = static_cast&lt;QMouseEvent*&gt;(event);
qDebug()&lt;&lt;QString(""Click location: (%1,%2)"").arg(mouseEvent-&gt;x()).arg(mouseEvent-&gt;y());
</code></pre></li>
</ol>
",techneaz,Philip Allgaier,1437642702,1441202302,1441202302
http://stackoverflow.com/a/31633962/298171,c++ stack trace from unhandled exception?,17094,c-urchin,Bart,1280338515,1437888380,1395914779,https://stackoverflow.com/questions/3355683/c-stack-trace-from-unhandled-exception,"<p>You can use <em>libunwind</em> (just add <code>-lunwind</code> to linker parameters) (tested with <code>clang++ 3.6</code>):</p>

<p>demagle.hpp:</p>

<pre><code>#pragma once

char const *
get_demangled_name(char const * const symbol) noexcept;
</code></pre>

<p>demangle.cpp:</p>

<pre><code>#include ""demangle.hpp""

#include &lt;memory&gt;

#include &lt;cstdlib&gt;

#include &lt;cxxabi.h&gt;

namespace
{

#pragma clang diagnostic push
#pragma clang diagnostic ignored ""-Wglobal-constructors""
#pragma clang diagnostic ignored ""-Wexit-time-destructors""
std::unique_ptr&lt; char, decltype(std::free) &amp; &gt; demangled_name{nullptr, std::free};
#pragma clang diagnostic pop

}

char const *
get_demangled_name(char const * const symbol) noexcept
{
    if (!symbol) {
        return ""&lt;null&gt;"";
    }
    int status = -4;
    demangled_name.reset(abi::__cxa_demangle(symbol, demangled_name.release(), nullptr, &amp;status));
    return ((status == 0) ? demangled_name.get() : symbol);
}
</code></pre>

<p>backtrace.hpp:</p>

<pre><code>#pragma once
#include &lt;ostream&gt;

void
backtrace(std::ostream &amp; _out) noexcept;
</code></pre>

<p>backtrace.cpp:</p>

<pre><code>#include ""backtrace.hpp""

#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;limits&gt;
#include &lt;ostream&gt;

#include &lt;cstdint&gt;

#define UNW_LOCAL_ONLY
#include &lt;libunwind.h&gt;

namespace
{

void
print_reg(std::ostream &amp; _out, unw_word_t reg) noexcept
{
    constexpr std::size_t address_width = std::numeric_limits&lt; std::uintptr_t &gt;::digits / 4;
    _out &lt;&lt; ""0x"" &lt;&lt; std::setfill('0') &lt;&lt; std::setw(address_width) &lt;&lt; reg;
}

char symbol[1024];

}

void
backtrace(std::ostream &amp; _out) noexcept
{
    unw_cursor_t cursor;
    unw_context_t context;
    unw_getcontext(&amp;context);
    unw_init_local(&amp;cursor, &amp;context);
    _out &lt;&lt; std::hex &lt;&lt; std::uppercase;
    while (0 &lt; unw_step(&amp;cursor)) {
        unw_word_t ip = 0;
        unw_get_reg(&amp;cursor, UNW_REG_IP, &amp;ip);
        if (ip == 0) {
            break;
        }
        unw_word_t sp = 0;
        unw_get_reg(&amp;cursor, UNW_REG_SP, &amp;sp);
        print_reg(_out, ip);
        _out &lt;&lt; "": (SP:"";
        print_reg(_out, sp);
        _out &lt;&lt; "") "";
        unw_word_t offset = 0;
        if (unw_get_proc_name(&amp;cursor, symbol, sizeof(symbol), &amp;offset) == 0) {
            _out &lt;&lt; ""("" &lt;&lt; get_demangled_name(symbol) &lt;&lt; "" + 0x"" &lt;&lt; offset &lt;&lt; "")\n\n"";
        } else {
            _out &lt;&lt; ""-- error: unable to obtain symbol name for this frame\n\n"";
        }
    }
    _out &lt;&lt; std::flush;
}
</code></pre>

<p>backtrace_on_terminate.hpp:</p>

<pre><code>#include ""demangle.hpp""
#include ""backtrace.hpp""

#include &lt;iostream&gt;
#include &lt;type_traits&gt;
#include &lt;exception&gt;
#include &lt;memory&gt;
#include &lt;typeinfo&gt;

#include &lt;cstdlib&gt;

#include &lt;cxxabi.h&gt;

namespace
{

[[noreturn]]
void
backtrace_on_terminate() noexcept;

static_assert(std::is_same&lt; std::terminate_handler, decltype(&amp;backtrace_on_terminate) &gt;{});

#pragma clang diagnostic push
#pragma clang diagnostic ignored ""-Wglobal-constructors""
#pragma clang diagnostic ignored ""-Wexit-time-destructors""
std::unique_ptr&lt; std::remove_pointer_t&lt; std::terminate_handler &gt;, decltype(std::set_terminate) &amp; &gt; terminate_handler{std::set_terminate(backtrace_on_terminate), std::set_terminate};
#pragma clang diagnostic pop

[[noreturn]]
void
backtrace_on_terminate() noexcept
{
    std::set_terminate(terminate_handler.release()); // to avoid infinite looping if any
    backtrace(std::clog);
    if (std::exception_ptr ep = std::current_exception()) {
        try {
            std::rethrow_exception(ep);
        } catch (std::exception const &amp; e) {
            std::clog &lt;&lt; ""backtrace: unhandled exception std::exception:what(): "" &lt;&lt; e.what() &lt;&lt; std::endl;
        } catch (...) {
            if (std::type_info * et = abi::__cxa_current_exception_type()) {
                std::clog &lt;&lt; ""backtrace: unhandled exception type: "" &lt;&lt; get_demangled_name(et-&gt;name()) &lt;&lt; std::endl;
            } else {
                std::clog &lt;&lt; ""backtrace: unhandled unknown exception"" &lt;&lt; std::endl;
            }
        }
    }
    std::_Exit(EXIT_FAILURE);
}

}
</code></pre>

<p>There is <a href=""http://eli.thegreenplace.net/2015/programmatic-access-to-the-call-stack-in-c/"" rel=""nofollow"">good article</a> concerning the issue.</p>
",Orient,,1437888380,1437888380,0
http://stackoverflow.com/a/31720143/937715,Why does an image captured using camera intent gets rotated on some devices on Android?,180088,Shirish Herwade,Peter Mortensen,1356679049,1556715245,1481367379,https://stackoverflow.com/questions/14066038/why-does-an-image-captured-using-camera-intent-gets-rotated-on-some-devices-on-a,"<p>By combining <em>Jason Robinson</em>'s <a href=""https://stackoverflow.com/a/21754321/1364896"">answer</a> with <em>Felix</em>'s <a href=""https://stackoverflow.com/a/14066265/1364896"">answer</a> and filling the missing parts, <strong>here is the final complete solution for this issue</strong> that will do the following after testing it on Android <a href=""https://en.wikipedia.org/wiki/Android_version_history#Android_4.1_Jelly_Bean_.28API_level_16.29"" rel=""noreferrer"">Android&nbsp;4.1</a> (<em>Jelly Bean</em>), <a href=""https://en.wikipedia.org/wiki/Android_version_history#Android_4.4_KitKat_.28API_level_19.29"" rel=""noreferrer"">Android 4.4</a> (<em>KitKat</em>) and <a href=""https://en.wikipedia.org/wiki/Android_Lollipop"" rel=""noreferrer"">Android 5.0</a> (<em>Lollipop</em>).</p>

<p><strong>Steps</strong></p>

<ol>
<li><p>Scale down the image if it was bigger than 1024x1024.</p></li>
<li><p>Rotate the image to the right orientation <em>only</em> if it was rotate 90, 180 or 270 degree.</p></li>
<li><p>Recycle the rotated image for memory purposes.</p></li>
</ol>

<p><strong>Here is the code part:</strong></p>

<p>Call the following method with the current <code>Context</code> and the image <code>URI</code> that you want to fix</p>

<pre><code>/**
 * This method is responsible for solving the rotation issue if exist. Also scale the images to
 * 1024x1024 resolution
 *
 * @param context       The current context
 * @param selectedImage The Image URI
 * @return Bitmap image results
 * @throws IOException
 */
public static Bitmap handleSamplingAndRotationBitmap(Context context, Uri selectedImage)
        throws IOException {
    int MAX_HEIGHT = 1024;
    int MAX_WIDTH = 1024;

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    InputStream imageStream = context.getContentResolver().openInputStream(selectedImage);
    BitmapFactory.decodeStream(imageStream, null, options);
    imageStream.close();

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, MAX_WIDTH, MAX_HEIGHT);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    imageStream = context.getContentResolver().openInputStream(selectedImage);
    Bitmap img = BitmapFactory.decodeStream(imageStream, null, options);

    img = rotateImageIfRequired(context, img, selectedImage);
    return img;
}
</code></pre>

<p>Here is the <code>CalculateInSampleSize</code> method from the pre mentioned <a href=""https://gist.github.com/anonymous/b7ea25fc2bbc54e43616"" rel=""noreferrer"">source</a>:</p>

<pre><code>/**
  * Calculate an inSampleSize for use in a {@link BitmapFactory.Options} object when decoding
  * bitmaps using the decode* methods from {@link BitmapFactory}. This implementation calculates
  * the closest inSampleSize that will result in the final decoded bitmap having a width and
  * height equal to or larger than the requested width and height. This implementation does not
  * ensure a power of 2 is returned for inSampleSize which can be faster when decoding but
  * results in a larger bitmap which isn't as useful for caching purposes.
  *
  * @param options   An options object with out* params already populated (run through a decode*
  *                  method with inJustDecodeBounds==true
  * @param reqWidth  The requested width of the resulting bitmap
  * @param reqHeight The requested height of the resulting bitmap
  * @return The value to be used for inSampleSize
  */
private static int calculateInSampleSize(BitmapFactory.Options options,
                                         int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height &gt; reqHeight || width &gt; reqWidth) {

        // Calculate ratios of height and width to requested height and width
        final int heightRatio = Math.round((float) height / (float) reqHeight);
        final int widthRatio = Math.round((float) width / (float) reqWidth);

        // Choose the smallest ratio as inSampleSize value, this will guarantee a final image
        // with both dimensions larger than or equal to the requested height and width.
        inSampleSize = heightRatio &lt; widthRatio ? heightRatio : widthRatio;

        // This offers some additional logic in case the image has a strange
        // aspect ratio. For example, a panorama may have a much larger
        // width than height. In these cases the total pixels might still
        // end up being too large to fit comfortably in memory, so we should
        // be more aggressive with sample down the image (=larger inSampleSize).

        final float totalPixels = width * height;

        // Anything more than 2x the requested pixels we'll sample down further
        final float totalReqPixelsCap = reqWidth * reqHeight * 2;

        while (totalPixels / (inSampleSize * inSampleSize) &gt; totalReqPixelsCap) {
            inSampleSize++;
        }
    }
    return inSampleSize;
}
</code></pre>

<p>Then comes the method that will check the current image orientation to decide the rotation angle</p>

<pre><code> /**
 * Rotate an image if required.
 *
 * @param img           The image bitmap
 * @param selectedImage Image URI
 * @return The resulted Bitmap after manipulation
 */
private static Bitmap rotateImageIfRequired(Context context, Bitmap img, Uri selectedImage) throws IOException {

InputStream input = context.getContentResolver().openInputStream(selectedImage);
ExifInterface ei;
if (Build.VERSION.SDK_INT &gt; 23)
    ei = new ExifInterface(input);
else
    ei = new ExifInterface(selectedImage.getPath());

    int orientation = ei.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);

    switch (orientation) {
        case ExifInterface.ORIENTATION_ROTATE_90:
            return rotateImage(img, 90);
        case ExifInterface.ORIENTATION_ROTATE_180:
            return rotateImage(img, 180);
        case ExifInterface.ORIENTATION_ROTATE_270:
            return rotateImage(img, 270);
        default:
            return img;
    }
}
</code></pre>

<p>Finally the rotation method itself</p>

<pre><code>private static Bitmap rotateImage(Bitmap img, int degree) {
    Matrix matrix = new Matrix();
    matrix.postRotate(degree);
    Bitmap rotatedImg = Bitmap.createBitmap(img, 0, 0, img.getWidth(), img.getHeight(), matrix, true);
    img.recycle();
    return rotatedImg;
}
</code></pre>

<p>-Don't forget to vote up for those guys answers for their efforts and <em>Shirish Herwade</em> who asked this helpful question.</p>
",Sami Eltamawy,Pei,1438248940,1505270798,1505270798
http://stackoverflow.com/a/31735043/64911,Adding django admin permissions in a migration: Permission matching query does not exist,5157,int_ua,,1438294696,1532543494,0,https://stackoverflow.com/questions/31735042/adding-django-admin-permissions-in-a-migration-permission-matching-query-does-n,"<h2>Django &lt;= <code>1.9</code></h2>

<p>see another answer for Django <code>1.10+</code></p>

<p>It's enough to call <code>create_permissions</code>:</p>

<pre><code>from django.contrib.auth.management import create_permissions

apps.models_module = True
create_permissions(apps, verbosity=0)
apps.models_module = None
</code></pre>

<p>The whole migration being something like this</p>

<pre><code># coding:utf-8
from django.db import migrations
from django.contrib.auth.models import Permission, Group
from django.contrib.auth.management import create_permissions
from django.contrib.contenttypes.models import ContentType
from django.conf import settings

MODERATORS_PERMISSIONS = ['change_modelname', ]


def add_permissions(apps, schema_editor):
    apps.models_module = True
    create_permissions(apps, verbosity=0)
    apps.models_module = None

    moderators_group = Group.objects.get_or_create(
        name=settings.MODERATORS_GROUP)[0]
    for codename in MODERATORS_PERMISSIONS:
        permission = Permission.objects.get(codename=codename)
        moderators_group.permissions.add(permission)


class Migration(migrations.Migration):

    dependencies = [
        ('contenttypes', '0002_remove_content_type_name'),
        ('thisappname', '0001_initial'),
    ]

    operations = [
        migrations.RunPython(add_permissions),
    ]
</code></pre>
",int_ua,int_ua,1438294696,1481191012,1481191012
http://stackoverflow.com/a/31762672/2066546,How to migrate the database when renaming an ActiveRecord model that is a subclass of a base class?,763,bgrommes,,1342016256,1438437609,0,https://stackoverflow.com/questions/11434678/how-to-migrate-the-database-when-renaming-an-activerecord-model-that-is-a-subcla,"<p>Rails 4 lets you define a <a href=""http://api.rubyonrails.org/classes/ActiveRecord/Migration.html#method-i-reversible"" rel=""nofollow""><code>reversible</code></a> migration for @deefour's answer:</p>

<pre><code>def change
  rename_sti_type :table_name, 'Namespace::OldSubclass', 'Namespace::NewSubclass'
end

def rename_sti_type(table_name, old_type, new_type)
  reversible do |dir|
    dir.up { execute ""UPDATE #{table_name} SET type = '#{new_type}' WHERE type = '#{old_type}'"" }
    dir.down { execute ""UPDATE #{table_name} SET type = '#{old_type}' WHERE type = '#{new_type}'""}
  end
end
</code></pre>

<p>You could generalise this into a <code>change_data(table, field, old_value, new_value)</code> method; but be mindful that if the up migration sets the type/field to a <code>new_value</code> which is already in use, then the down migration will also change existing rows which already had <code>new_value</code> value into <code>old_value</code>.</p>
",James EJ,,1438437609,1438437609,0
http://stackoverflow.com/a/31770875/2993478,webpack require every file in directory,29455,yonatanmn,Manwal,1430125764,1493829753,1430125972,https://stackoverflow.com/questions/29891458/webpack-require-every-file-in-directory,"<h2>Solution:</h2>

<pre><code>var req = require.context(""../someDir"", true, /^(.*\.(js$))[^.]*$/igm);
req.keys().forEach(function(key){
    req(key);
});
// or just: req.keys().forEach(req)
</code></pre>

<h3>extra:</h3>

<p>regex to match <code>js</code> but ignore <code>test.js</code></p>

<p><code>/^(?!.*test.js)((.*\.(js\.*))[^.]*$)/igm)</code></p>
",yonatanmn,yonatanmn,1438510893,1493829753,1493829753
http://stackoverflow.com/a/31825971/122441,Setting up a MultiTenantConnectionProvider using Hibernate 4.2 and Spring 3.1.1,20919,Carsten,Carsten,1366889375,1509149828,1367234742,https://stackoverflow.com/questions/16213573/setting-up-a-multitenantconnectionprovider-using-hibernate-4-2-and-spring-3-1-1,"<p>According to <a href=""https://stackoverflow.com/users/1082300/steve-ebersole"">Steve Ebersole</a>'s comments on the JIRA issue referred by one of this question's commenters (<a href=""https://hibernate.atlassian.net/browse/HHH-8752?focusedCommentId=69229&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-69229"" rel=""nofollow noreferrer"">HHH-8752</a>):</p>

<blockquote>
  <p>Well first, it is simply not true that Hibernate ""instantiates the classes referred by ... MULTI_TENANT_CONNECTION_PROVIDER and MULTI_TENANT_IDENTIFIER_RESOLVER"". Hibernate first tries to treat these settings as objects of their intended types, (MultiTenantConnectionProvider for MULTI_TENANT_CONNECTION_PROVIDER and CurrentTenantIdentifierResolver for MULTI_TENANT_IDENTIFIER_RESOLVER.</p>
  
  <p>So just pass your beans in directly, configured however you want.</p>
</blockquote>

<p><strong>I just followed his suggestion and managed to make it work.</strong></p>

<p>This is a <code>CurrentTenantIdentifierResolver</code> defined as a Spring Bean:</p>

<pre><code>@Component
@Scope(value = ""request"", proxyMode = ScopedProxyMode.TARGET_CLASS)
public class RequestURITenantIdentifierResolver implements CurrentTenantIdentifierResolver {

    @Autowired
    private HttpServletRequest request;

    @Override
    public String resolveCurrentTenantIdentifier() {
        String[] pathElements = request.getRequestURI().split(""/"");
        String tenant = pathElements[1];
        return tenant;
    }

    @Override
    public boolean validateExistingCurrentSessions() {
        return true;
    }
}
</code></pre>

<p>This is a <code>MultiTenantConnectionProvider</code> defined as a Spring Bean:</p>

<pre><code>@Component
public class SchemaPerTenantConnectionProviderImpl implements MultiTenantConnectionProvider {

    @Autowired
    private DataSource dataSource;

    @Override
    public Connection getAnyConnection() throws SQLException {
        return dataSource.getConnection();
    }

    @Override
    public void releaseAnyConnection(final Connection connection) throws SQLException {
        connection.close();
    }

    @Override
    public Connection getConnection(final String tenantIdentifier) throws SQLException {
        final Connection connection = getAnyConnection();
        try {
            connection.createStatement().execute(""USE "" + tenantIdentifier);
        } catch (SQLException e) {
            throw new HibernateException(""Could not alter JDBC connection to specified schema ["" + tenantIdentifier + ""]"",
                                         e);
        }
        return connection;
    }

    @Override
    public void releaseConnection(final String tenantIdentifier, final Connection connection) throws SQLException {
        try {
            connection.createStatement().execute(""USE dummy"");
        } catch (SQLException e) {
            // on error, throw an exception to make sure the connection is not returned to the pool.
            // your requirements may differ
            throw new HibernateException(
                    ""Could not alter JDBC connection to specified schema ["" +
                            tenantIdentifier + ""]"",
                    e
            );
        } finally {
            connection.close();
        }
    }

    @Override
    public boolean supportsAggressiveRelease() {
        return true;
    }

    @Override
    public boolean isUnwrappableAs(Class aClass) {
        return false;
    }

    @Override
    public &lt;T&gt; T unwrap(Class&lt;T&gt; aClass) {
        return null;
    }
}
</code></pre>

<p>And finally, this is a <code>LocalContainerEntityManagerFactoryBean</code> wired to make use of the two components above:</p>

<pre><code>@Configuration
public class HibernateConfig {

    @Bean
    public JpaVendorAdapter jpaVendorAdapter() {
        return new HibernateJpaVendorAdapter();
    }


    @Bean
    public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSource dataSource,
                                                                       MultiTenantConnectionProvider multiTenantConnectionProvider,
                                                                       CurrentTenantIdentifierResolver tenantIdentifierResolver) {
        LocalContainerEntityManagerFactoryBean emfBean = new LocalContainerEntityManagerFactoryBean();
        emfBean.setDataSource(dataSource);
        emfBean.setPackagesToScan(VistoJobsApplication.class.getPackage().getName());
        emfBean.setJpaVendorAdapter(jpaVendorAdapter());

        Map&lt;String, Object&gt; jpaProperties = new HashMap&lt;&gt;();
        jpaProperties.put(org.hibernate.cfg.Environment.MULTI_TENANT,
                          MultiTenancyStrategy.SCHEMA);
        jpaProperties.put(org.hibernate.cfg.Environment.MULTI_TENANT_CONNECTION_PROVIDER,
                          multiTenantConnectionProvider);
        jpaProperties.put(org.hibernate.cfg.Environment.MULTI_TENANT_IDENTIFIER_RESOLVER,
                          tenantIdentifierResolver);
        emfBean.setJpaPropertyMap(jpaProperties);
        return emfBean;
    }
}
</code></pre>

<p>The data source I'm using is made available automatically by <a href=""http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/htmlsingle/#boot-features-connect-to-production-database"" rel=""nofollow noreferrer"">Spring Boot</a>.</p>

<p>I hope this helps.</p>
",mhnagaoka,mhnagaoka,1438759521,1509149828,1509149828
http://stackoverflow.com/a/3186907/776425,"Chrome re-ordering object keys if numerics, is that normal/expected",10260,Dimitar Christoff,Dimitar Christoff,1278424289,1544549361,1506546620,https://stackoverflow.com/questions/3186770/chrome-re-ordering-object-keys-if-numerics-is-that-normal-expected,"<p>It's the way v8 handles associative arrays. A known issue <a href=""http://code.google.com/p/v8/issues/detail?id=164"" rel=""noreferrer"">Issue 164</a> but it follows the spec so is marked 'working as intended'. There isn't a required order for looping through associative arrays.</p>

<p>A simple workaround is to precede number values with letters e.g: <code>'size_7':['9149','9139']</code> etc.</p>

<p>The standard will change in the next ECMAScript spec forcing [chrome] developers to change this.</p>
",Michael Sparks,Michael Sparks,1278425214,1278426983,1278426983
http://stackoverflow.com/a/3187802/42171,How do you flush a buffered log4j FileAppender?,29796,Amos,,1276765405,1498844534,0,https://stackoverflow.com/questions/3060240/how-do-you-flush-a-buffered-log4j-fileappender,"<pre><code>public static void flushAllLogs()
{
    try
    {
        Set&lt;FileAppender&gt; flushedFileAppenders = new HashSet&lt;FileAppender&gt;();
        Enumeration currentLoggers = LogManager.getLoggerRepository().getCurrentLoggers();
        while(currentLoggers.hasMoreElements())
        {
            Object nextLogger = currentLoggers.nextElement();
            if(nextLogger instanceof Logger)
            {
                Logger currentLogger = (Logger) nextLogger;
                Enumeration allAppenders = currentLogger.getAllAppenders();
                while(allAppenders.hasMoreElements())
                {
                    Object nextElement = allAppenders.nextElement();
                    if(nextElement instanceof FileAppender)
                    {
                        FileAppender fileAppender = (FileAppender) nextElement;
                        if(!flushedFileAppenders.contains(fileAppender) &amp;&amp; !fileAppender.getImmediateFlush())
                        {
                            flushedFileAppenders.add(fileAppender);
                            //log.info(""Appender ""+fileAppender.getName()+"" is not doing immediateFlush "");
                            fileAppender.setImmediateFlush(true);
                            currentLogger.info(""FLUSH"");
                            fileAppender.setImmediateFlush(false);
                        }
                        else
                        {
                            //log.info(""fileAppender""+fileAppender.getName()+"" is doing immediateFlush"");
                        }
                    }
                }
            }
        }
    }
    catch(RuntimeException e)
    {
        log.error(""Failed flushing logs"",e);
    }
}
</code></pre>
",Niv,,1278430689,1278430689,0
http://stackoverflow.com/a/31907095/684,How to remove JS comments using PHP?,9774,Momar,Momar,1382420691,1546866517,1383576151,https://stackoverflow.com/questions/19509863/how-to-remove-js-comments-using-php,"<p>Alexander Yancharuk solution is nearly perfect, he just forgot to ignore double quotes, making his answer break on jquery.min.js which contains the code : replace(Fb,yb[1]+""//"") </p>

<p>Please find below the corrected version :</p>

<pre><code>$output = ""
//remove comment
this1 //remove comment
this2 /* remove comment */
this3 /* remove
comment */
this4 /* * * remove
* * * *
comment * * */
this5 http://removecomment.com
id = id.replace(/\//g,''); //do not remove the regex //
HTTP+'//www.googleadservices.com/pagead/conversion'
"";

$pattern = '/(?:(?:\/\*(?:[^*]|(?:\*+[^*\/]))*\*+\/)|(?:(?&lt;!\:|\\\|\'|\"")\/\/.*))/';
$output = preg_replace($pattern, '', $output);

echo nl2br($output);
</code></pre>

<p>I used this to create a on-the-flow JS compression in PHP  based on Manas Tungare example for CSS : <a href=""http://manas.tungare.name/software/css-compression-in-php/"" rel=""noreferrer"">http://manas.tungare.name/software/css-compression-in-php/</a></p>

<pre><code>&lt;?php

/**
 * On-the-fly JS Compression by A. Heiligtag
 * Based on On-the-fly CSS Compression by  Manas Tungare.
 *
 * In order to minimize the number and size of HTTP requests for JS content,
 * this script combines multiple JS files into a single file and compresses
 * it on-the-fly.
 *
 */
$cssFiles = array(
    //&lt;!-- Bootstrap --&gt;
    // &lt;!-- jQuery (necessary for Bootstrap's JavaScript plugins) --&gt;
    ""./js/jquery-1.11.3.min.js"",
    // &lt;!-- Bootstrap core JavaScript
    ""./js/bootstrap.min.js"",
    // &lt;!-- IE10 viewport hack for Surface/desktop Windows 8 bug --&gt;
    ""./js/ie10-viewport-bug-workaround.js"",

     // &lt;!-- Jasny bootstrap --&gt;
    ""./js/jasny-bootstrap.min.js"",

    // &lt;!-- color picker : https://github.com/istvan-ujjmeszaros/bootstrap-colorpickersliders / http://www.virtuosoft.eu/code/bootstrap-colorpickersliders/ --&gt;
    // &lt;!-- Polyglot Language Switcher 2 : http://www.ixtendo.com/polyglot-language-switcher-2/ --&gt;
    ""./js/jquery-polyglot.language.switcher.js""

);

/**
 * Ideally, you wouldn't need to change any code beyond this point.
 */
$buffer = """";
foreach ($cssFiles as $cssFile) {
  $buffer .= file_get_contents($cssFile);
}
// Remove comments
$buffer = preg_replace('/(?:(?:\/\*(?:[^*]|(?:\*+[^*\/]))*\*+\/)|(?:(?&lt;!\:|\\\|\'|\"")\/\/.*))/', '', $buffer);
// Remove space after colons
$buffer = str_replace(': ', ':', $buffer);
// Remove space before equal signs
$buffer = str_replace(' =', '=', $buffer);
// Remove space after equal signs
$buffer = str_replace('= ', '=', $buffer);
// Remove whitespace
$buffer = str_replace(array(""\r\n\r\n"", ""\n\n"", ""\r\r"", '\t', '  ', '    ', '    '), '', $buffer);
// Enable GZip encoding.
ob_start(""ob_gzhandler"");
// Enable caching
header('Cache-Control: public');
// Expire in one day
header('Expires: ' . gmdate('D, d M Y H:i:s', time() + 86400) . ' GMT');
// Set the correct MIME type, because Apache won't set it for us
header(""Content-type: application/javascript"");
// Write everything out
echo($buffer);
?&gt;
</code></pre>
",AmaelH,AmaelH,1439142304,1439142762,1439142762
http://stackoverflow.com/a/319293/2755602,How to validate IP address in Python?,194719,krupan,chills42,1227656445,1522221484,1227656521,https://stackoverflow.com/questions/319279/how-to-validate-ip-address-in-python,"<pre><code>def is_valid_ip(ip):
    """"""Validates IP addresses.
    """"""
    return is_valid_ipv4(ip) or is_valid_ipv6(ip)
</code></pre>

<p>IPv4:</p>

<pre><code>def is_valid_ipv4(ip):
    """"""Validates IPv4 addresses.
    """"""
    pattern = re.compile(r""""""
        ^
        (?:
          # Dotted variants:
          (?:
            # Decimal 1-255 (no leading 0's)
            [3-9]\d?|2(?:5[0-5]|[0-4]?\d)?|1\d{0,2}
          |
            0x0*[0-9a-f]{1,2}  # Hexadecimal 0x0 - 0xFF (possible leading 0's)
          |
            0+[1-3]?[0-7]{0,2} # Octal 0 - 0377 (possible leading 0's)
          )
          (?:                  # Repeat 0-3 times, separated by a dot
            \.
            (?:
              [3-9]\d?|2(?:5[0-5]|[0-4]?\d)?|1\d{0,2}
            |
              0x0*[0-9a-f]{1,2}
            |
              0+[1-3]?[0-7]{0,2}
            )
          ){0,3}
        |
          0x0*[0-9a-f]{1,8}    # Hexadecimal notation, 0x0 - 0xffffffff
        |
          0+[0-3]?[0-7]{0,10}  # Octal notation, 0 - 037777777777
        |
          # Decimal notation, 1-4294967295:
          429496729[0-5]|42949672[0-8]\d|4294967[01]\d\d|429496[0-6]\d{3}|
          42949[0-5]\d{4}|4294[0-8]\d{5}|429[0-3]\d{6}|42[0-8]\d{7}|
          4[01]\d{8}|[1-3]\d{0,9}|[4-9]\d{0,8}
        )
        $
    """""", re.VERBOSE | re.IGNORECASE)
    return pattern.match(ip) is not None
</code></pre>

<p>IPv6:</p>

<pre><code>def is_valid_ipv6(ip):
    """"""Validates IPv6 addresses.
    """"""
    pattern = re.compile(r""""""
        ^
        \s*                         # Leading whitespace
        (?!.*::.*::)                # Only a single whildcard allowed
        (?:(?!:)|:(?=:))            # Colon iff it would be part of a wildcard
        (?:                         # Repeat 6 times:
            [0-9a-f]{0,4}           #   A group of at most four hexadecimal digits
            (?:(?&lt;=::)|(?&lt;!::):)    #   Colon unless preceeded by wildcard
        ){6}                        #
        (?:                         # Either
            [0-9a-f]{0,4}           #   Another group
            (?:(?&lt;=::)|(?&lt;!::):)    #   Colon unless preceeded by wildcard
            [0-9a-f]{0,4}           #   Last group
            (?: (?&lt;=::)             #   Colon iff preceeded by exacly one colon
             |  (?&lt;!:)              #
             |  (?&lt;=:) (?&lt;!::) :    #
             )                      # OR
         |                          #   A v4 address with NO leading zeros 
            (?:25[0-4]|2[0-4]\d|1\d\d|[1-9]?\d)
            (?: \.
                (?:25[0-4]|2[0-4]\d|1\d\d|[1-9]?\d)
            ){3}
        )
        \s*                         # Trailing whitespace
        $
    """""", re.VERBOSE | re.IGNORECASE | re.DOTALL)
    return pattern.match(ip) is not None
</code></pre>

<p>The IPv6 version uses ""<code>(?:(?&lt;=::)|(?&lt;!::):)</code>"", which could be replaced with ""<code>(?(?&lt;!::):)</code>"" on regex engines that support conditionals with look-arounds. (i.e. PCRE, .NET)</p>

<p><strong>Edit:</strong></p>

<ul>
<li>Dropped the native variant.</li>
<li>Expanded the regex to comply with the RFC.</li>
<li>Added another regex for IPv6 addresses.</li>
</ul>

<p><strong>Edit2:</strong></p>

<p>I found some links discussing how to parse IPv6 addresses with regex:</p>

<ul>
<li><a href=""http://forums.dartware.com/viewtopic.php?t=452"" rel=""noreferrer"">A Regular Expression for IPv6 Addresses</a> - InterMapper Forums</li>
<li><a href=""http://www.vankouteren.eu/blog/2009/05/working-ipv6-regular-expression/"" rel=""noreferrer"">Working IPv6 regular expression</a> - Patricks playground blog</li>
<li><a href=""http://download.dartware.com/thirdparty/test-ipv6-regex.pl"" rel=""noreferrer"">test-ipv6-regex.pl</a> - Perl script with tons of test-cases. It seems my regex fails on a few of those tests.</li>
</ul>

<p><strong>Edit3:</strong></p>

<p>Finally managed to write a pattern that passes all tests, and that I am also happy with.</p>
",Markus Jarderot,Markus Jarderot,1227656874,1275015127,1275015127
http://stackoverflow.com/a/31961816/1081396,Bug with translate3d in Chrome v.44?,2041,Alvaro,Alvaro,1437604276,1439373252,1437665408,https://stackoverflow.com/questions/31575177/bug-with-translate3d-in-chrome-v-44,"<p>It works if you just calls it in a <code>animation frame</code></p>

<p><a href=""http://jsfiddle.net/9ksx000q/4/"" rel=""nofollow"">http://jsfiddle.net/9ksx000q/4/</a></p>

<p>Guess the issue is that the animation and the position calculation is happening at the same time, which is causing things to get weird</p>

<pre><code>requestAnimationFrame(function () {
    var dtop = element.position().top;

    element.addClass('active').siblings().removeClass('active');

    canScroll = false;

    var translate3d = 'translate3d(0px, -' + Math.ceil(dtop) + 'px, 0px)';
    $('#container').css(getTransforms(translate3d));

    //after animations finishes we allow to scroll again
    setTimeout(function () {
        canScroll = true;
    }, 1000);    
    //1000s is the time set to the in the CSS for the container
    //transition: all 1000ms ease-in-out;
});
</code></pre>
",Morten Olsen,,1439373252,1439373252,0
http://stackoverflow.com/a/32095106/646947,Take advantage of ARM unaligned memory access while writing clean C code,5841,Cyan,Cyan,1439867384,1490558808,1439924663,https://stackoverflow.com/questions/32062894/take-advantage-of-arm-unaligned-memory-access-while-writing-clean-c-code,"<p>OK, the situation is more confusing than one would like. So, in an effort to clarify, here are the findings on this journey : </p>

<h2><em>accessing unaligned memory</em></h2>

<ol>
<li>The only portable C standard solution to access unaligned memory is the <code>memcpy</code> one. I was hoping to get another one through this question, but apparently it's the only one found so far.</li>
</ol>

<p>Example code :</p>

<pre><code>u32 read32(const void* ptr)  { 
    u32 value; 
    memcpy(&amp;value, ptr, sizeof(value)); 
    return value;  }
</code></pre>

<p>This solution is safe in all circumstances. It also compiles into a trivial <code>load register</code> operation on x86 target using GCC.</p>

<p>However, on ARM target using GCC, it translates into a way too large and useless assembly sequence, which bogs down performance.</p>

<p>Using Clang on ARM target, <code>memcpy</code> works fine (see @notlikethat comment below). It would be easy to blame GCC at large, but it's not that simple : the <code>memcpy</code> solution works fine on GCC with x86/x64, PPC and ARM64 targets. Lastly, trying another compiler, icc13, the memcpy version is surprisingly heavier on x86/x64 (4 instructions, while one should be enough). And that's just the combinations I could test so far.</p>

<p>I have to thank godbolt's project to make such statements <a href=""https://gcc.godbolt.org/#%7B%22version%22%3A3%2C%22filterAsm%22%3A%7B%22labels%22%3Atrue%2C%22directives%22%3Atrue%2C%22commentOnly%22%3Atrue%7D%2C%22compilers%22%3A%5B%7B%22sourcez%22%3A%22MQSwdgxgNgrgJgUwAQB4DOAXOUQCMB0AFgHwBQoksiqAtgjQPYBOAnkWRiwA4KIBmSGGDQgA5mF5JwGQQGYATAG5SpTj35JMTGBBlIA%2BvoCGGDEzwwMCQ0gAUtw1yMQA1r0MBKD0gDeg4WIScEi4ikgAvoIwCsrR8khMCEZwcbYQDMIyAG4MIHAAVEhcZt5%2BiRgwTGB2aRmYUQr5HsVMHgC0xKERKnEJSXBGCrWZSDl5hS2lfRVVSPnD9XFNRWZh4T0KfclD6SNjBSutSKR%2BpEjnfaIgmAhMcvGJaDBQGGFnF3Q0EFwstgBkj2eGAANIdQQAWDxvC7TSrVQEvN7hIAAA%22%2C%22compiler%22%3A%22armhfg482%22%2C%22options%22%3A%22-O3%22%7D%5D%7D"" rel=""noreferrer"">easy to observe</a>.</p>

<ol start=""2"">
<li>The second solution is to use <code>__packed</code> structures. This solution is not C standard, and entirely depends on compiler's extension. As a consequence, the way to write it depends on the compiler, and sometimes on its version. This is a mess for maintenance of portable code.</li>
</ol>

<p>That being said, in most circumstances, it leads to better code generation than <code>memcpy</code>. In most circumstances only ...</p>

<p>For example, regarding the above cases where <code>memcpy</code> solution does not work, here are the findings :</p>

<ul>
<li>on x86 with ICC : <code>__packed</code> solution works</li>
<li>on ARMv7 with GCC : <code>__packed</code> solution works</li>
<li><p>on ARMv6 with GCC : does not work. Assembly looks even uglier than <code>memcpy</code>.</p>

<ol start=""3"">
<li>The last solution is to use direct <code>u32</code> access to unaligned memory positions. This solution used to work for decades on x86 cpus, but is not recommended, as it violates some C standard principles : compiler is authorized to consider this statement as a guarantee that data is properly aligned, leading to buggy code generation.</li>
</ol></li>
</ul>

<p>Unfortunately, in at least one case, it is the only solution able to extract performance from target. Namely for GCC on ARMv6.</p>

<p>Do not use this solution for ARMv7 though : GCC can generate instructions which are reserved for aligned memory accesses, namely <code>LDM</code> (Load Multiple), leading to crash.</p>

<p>Even on x86/x64, it becomes dangerous to write your code this way nowadays, as the new generation compilers may try to auto-vectorize some compatible loops, generating SSE/AVX code <em>based on the assumption that these memory positions are properly aligned</em>, crashing the program.</p>

<p>As a recap, here are the results summarized as a table, using the convention : memcpy > packed > direct.</p>

<pre><code>| compiler  | x86/x64 | ARMv7  | ARMv6  | ARM64  |  PPC   |
|-----------|---------|--------|--------|--------|--------|
| GCC 4.8   | memcpy  | packed | direct | memcpy | memcpy |
| clang 3.6 | memcpy  | memcpy | memcpy | memcpy |   ?    |
| icc 13    | packed  | N/A    | N/A    | N/A    | N/A    |
</code></pre>
",Cyan,Cyan,1439986119,1490558808,1490558808
http://stackoverflow.com/a/3217427/184363,How do you pass a Queue reference to a function managed by pool.map_async()?,21742,David,tburrows13,1278715329,1490214049,1490214049,https://stackoverflow.com/questions/3217002/how-do-you-pass-a-queue-reference-to-a-function-managed-by-pool-map-async,"<p>Making <code>q</code> <em>global</em> works...:</p>

<pre><code>import multiprocessing, time

q = multiprocessing.Queue()

def task(count):
    for i in xrange(count):
        q.put(""%d mississippi"" % i)
    return ""Done""

def main():
    pool = multiprocessing.Pool()
    result = pool.map_async(task, range(10))
    time.sleep(1)
    while not q.empty():
        print q.get()
    print result.get()

if __name__ == ""__main__"":
    main()
</code></pre>

<p>If you need multiple queues, e.g. to avoid mixing up the progress of the various pool processes, a global list of queues should work (of course, each process will then need to know what <em>index</em> in the list to use, but that's OK to pass as an argument;-).</p>
",Alex Martelli,,1278725217,1278725217,0
http://stackoverflow.com/a/3218128/797941,Checking validity of email in django/python,67907,muntu,,1278732075,1545740683,0,https://stackoverflow.com/questions/3217682/checking-validity-of-email-in-django-python,"<blockquote>
  <p><strong>UPDATE 2017</strong>: the code below is 7 years old and was since modified, fixed and expanded. For anyone wishing to do this now, the correct code lives around here: <a href=""https://github.com/django/django/blob/master/django/core/validators.py#L168-L180"" rel=""noreferrer"">https://github.com/django/django/blob/master/django/core/validators.py#L168-L180</a></p>
</blockquote>

<p>Here is part of django.core.validators you may find interesting :)</p>

<pre><code>class EmailValidator(RegexValidator):

    def __call__(self, value):
        try:
            super(EmailValidator, self).__call__(value)
        except ValidationError, e:
            # Trivial case failed. Try for possible IDN domain-part
            if value and u'@' in value:
                parts = value.split(u'@')
                domain_part = parts[-1]
                try:
                    parts[-1] = parts[-1].encode('idna')
                except UnicodeError:
                    raise e
                super(EmailValidator, self).__call__(u'@'.join(parts))
            else:
                raise

email_re = re.compile(
    r""(^[-!#$%&amp;'*+/=?^_`{}|~0-9A-Z]+(\.[-!#$%&amp;'*+/=?^_`{}|~0-9A-Z]+)*""  # dot-atom
    r'|^""([\001-\010\013\014\016-\037!#-\[\]-\177]|\\[\001-011\013\014\016-\177])*""' # quoted-string
    r')@(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\.)+[A-Z]{2,6}\.?$', re.IGNORECASE)  # domain
validate_email = EmailValidator(email_re, _(u'Enter a valid e-mail address.'), 'invalid')
</code></pre>

<p>so if you don't want to use forms and form fields, you can import <code>email_re</code> and use it in your function, or even better - import <code>validate_email</code> and use it, catching possible <code>ValidationError</code>.</p>

<pre><code>def validateEmail( email ):
    from django.core.validators import validate_email
    from django.core.exceptions import ValidationError
    try:
        validate_email( email )
        return True
    except ValidationError:
        return False
</code></pre>

<p>And here is <a href=""http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html"" rel=""noreferrer"">Mail::RFC822::Address regexp</a> used in PERL, if you really need to be that paranoid.</p>
",cji,cji,1278743564,1502894264,1502894264
http://stackoverflow.com/a/3221813/402891,How to sum up elements of a C++ vector?,258897,Prasoon Saurav,noz,1278820774,1547621482,1484524049,https://stackoverflow.com/questions/3221812/how-to-sum-up-elements-of-a-c-vector,"<p>Actually there are quite a few methods.</p>

<pre><code>int sum_of_elems = 0;
</code></pre>

<h2>C++03</h2>

<ol>
<li><p>Classic for loop:</p>

<pre><code>for(std::vector&lt;int&gt;::iterator it = vector.begin(); it != vector.end(); ++it)
    sum_of_elems += *it;
</code></pre></li>
<li><p>Using a standard algorithm:    </p>

<pre><code>#include &lt;numeric&gt;

sum_of_elems = std::accumulate(vector.begin(), vector.end(), 0);
</code></pre>

<p>flag</p>

<p><em>Be careful with accumulate.</em> The last argument's type is used not just for the initial value, but for the type of the result as well. If you put an int there, it will accumulate ints even if the vector has float. If you are summing floating-point numbers, change <code>0</code> to <code>0.0</code> or <code>0.0f</code> (thanks to nneonneo).</p></li>
</ol>

<h2>C++11 and higher</h2>

<ol start=""3"">
<li><p>Using <code>std::for_each</code>:</p>

<pre><code>std::for_each(vector.begin(), vector.end(), [&amp;] (int n) {
    sum_of_elems += n;
});
</code></pre></li>
<li><p>Using a range-based for loop (thanks to Roger Pate):</p>

<pre><code>for (auto&amp; n : vector)
    sum_of_elems += n;
</code></pre></li>
</ol>
",Prasoon Saurav,Damian,1278820912,1483102562,1483102562
http://stackoverflow.com/a/32235744/3708426,how to check whether two matrixes are identical in OpenCV,31066,kirkor,,1332928458,1548927905,0,https://stackoverflow.com/questions/9905093/how-to-check-whether-two-matrixes-are-identical-in-opencv,"<p>As mentioned by Acme and Tim, you can use <code>cv::compare</code>. This is the code I use to compare my <code>cv::Mat</code>:</p>

<pre><code> bool matIsEqual(const cv::Mat mat1, const cv::Mat mat2){
    // treat two empty mat as identical as well
    if (mat1.empty() &amp;&amp; mat2.empty()) {
        return true;
    }
    // if dimensionality of two mat is not identical, these two mat is not identical
    if (mat1.cols != mat2.cols || mat1.rows != mat2.rows || mat1.dims != mat2.dims) {
        return false;
    }
    cv::Mat diff;
    cv::compare(mat1, mat2, diff, cv::CMP_NE);
    int nz = cv::countNonZero(diff);
    return nz==0;
}
</code></pre>

<p>It is important to stand out that the function <a href=""https://stackoverflow.com/a/31241344/2436175""><code>cv::countNonZero</code> only works with <code>cv::Mat</code> of one channel</a>, so if you need to compare two <code>cv::Mat</code> images, you need first to convert your <code>cv::Mat</code> in this way:</p>

<pre><code>Mat gray1, gray2;
cvtColor(InputMat1, gray1, CV_BGR2GRAY);
cvtColor(InputMat2, gray2, CV_BGR2GRAY);
</code></pre>

<p>where <code>InputMat1</code> and <code>InputMat2</code> are the <code>cv::Mat</code> you want to compare. 
After that you can call the function:</p>

<pre><code>bool equal = matsEqual(gray1, gray2);
</code></pre>

<p>I took this code of this site: <a href=""http://dragonwood-blastevil.blogspot.com/2013/02/opencv-compare-whether-two-mat-is.html"" rel=""nofollow noreferrer"">OpenCV: compare whether two Mat is identical</a></p>

<p>I hope this help you.</p>
",Angie Quijano,Community,1440619548,1442567110,1495540985
http://stackoverflow.com/a/32278587/23691,How would I go about parsing the Java class file constant pool?,1089,user3530525,,1440693408,1440790801,0,https://stackoverflow.com/questions/32255023/how-would-i-go-about-parsing-the-java-class-file-constant-pool,"<p>The only relevant documentation for class files you need is the <a href=""https://docs.oracle.com/javase/specs/jvms/se8/html/index.html"" rel=""nofollow"">The Java Virtual Machine Specification</a>, especially <a href=""https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html"" rel=""nofollow"">Chapter 4. The class File Format</a> and, if you are going to parse more than the constant pool, <a href=""https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html"" rel=""nofollow"">Chapter 6. The Java Virtual Machine Instruction Set</a>.</p>

<p>The constant pool consists of variable length items whose first byte determines its type which in turn dictates the size. Most items consist of one or two indices pointing to other items. A simple parsing code which doesnt need any 3rd party library may look like this:</p>

<pre><code>public static final int HEAD=0xcafebabe;
// Constant pool types
public static final byte CONSTANT_Utf8               = 1;
public static final byte CONSTANT_Integer            = 3;
public static final byte CONSTANT_Float              = 4;
public static final byte CONSTANT_Long               = 5;
public static final byte CONSTANT_Double             = 6;
public static final byte CONSTANT_Class              = 7;
public static final byte CONSTANT_String             = 8;
public static final byte CONSTANT_FieldRef           = 9;
public static final byte CONSTANT_MethodRef          =10;
public static final byte CONSTANT_InterfaceMethodRef =11;
public static final byte CONSTANT_NameAndType        =12;
public static final byte CONSTANT_MethodHandle       =15;
public static final byte CONSTANT_MethodType         =16;
public static final byte CONSTANT_InvokeDynamic      =18;

static void parseRtClass(Class&lt;?&gt; clazz) throws IOException, URISyntaxException {
    URL url = clazz.getResource(clazz.getSimpleName()+"".class"");
    if(url==null) throw new IOException(""can't access bytecode of ""+clazz);
    parse(ByteBuffer.wrap(Files.readAllBytes(Paths.get(url.toURI()))));
}
static void parseClassFile(Path path) throws IOException {
    ByteBuffer bb;
    try(FileChannel ch=FileChannel.open(path, StandardOpenOption.READ)) {
        bb=ch.map(FileChannel.MapMode.READ_ONLY, 0, ch.size());
    }
    parse(bb);
}
static void parse(ByteBuffer buf) {
    if(buf.order(ByteOrder.BIG_ENDIAN).getInt()!=HEAD) {
        System.out.println(""not a valid class file"");
        return;
    }
    int minor=buf.getChar(), ver=buf.getChar();
    System.out.println(""version ""+ver+'.'+minor);
    for(int ix=1, num=buf.getChar(); ix&lt;num; ix++) {
        String s; int index1=-1, index2=-1;
        byte tag = buf.get();
        switch(tag) {
            default:
                System.out.println(""unknown pool item type ""+buf.get(buf.position()-1));
                return;
            case CONSTANT_Utf8: decodeString(ix, buf); continue;
            case CONSTANT_Class: case CONSTANT_String: case CONSTANT_MethodType:
                s=""%d:\t%s ref=%d%n""; index1=buf.getChar();
                break;
            case CONSTANT_FieldRef: case CONSTANT_MethodRef:
            case CONSTANT_InterfaceMethodRef: case CONSTANT_NameAndType:
                s=""%d:\t%s ref1=%d, ref2=%d%n"";
                index1=buf.getChar(); index2=buf.getChar();
                break;
            case CONSTANT_Integer: s=""%d:\t%s value=""+buf.getInt()+""%n""; break;
            case CONSTANT_Float: s=""%d:\t%s value=""+buf.getFloat()+""%n""; break;
            case CONSTANT_Double: s=""%d:\t%s value=""+buf.getDouble()+""%n""; ix++; break;
            case CONSTANT_Long: s=""%d:\t%s value=""+buf.getLong()+""%n""; ix++; break;
            case CONSTANT_MethodHandle:
                s=""%d:\t%s kind=%d, ref=%d%n""; index1=buf.get(); index2=buf.getChar();
                break;
             case CONSTANT_InvokeDynamic:
                s=""%d:\t%s bootstrap_method_attr_index=%d, ref=%d%n"";
                index1=buf.getChar(); index2=buf.getChar();
                break;
        }
        System.out.printf(s, ix, FMT[tag], index1, index2);
    }
}
private static String[] FMT= {
    null, ""Utf8"", null, ""Integer"", ""Float"", ""Long"", ""Double"", ""Class"",
    ""String"", ""Field"", ""Method"", ""Interface Method"", ""Name and Type"",
    null, null, ""MethodHandle"", ""MethodType"", null, ""InvokeDynamic""
};

private static void decodeString(int poolIndex, ByteBuffer buf) {
    int size=buf.getChar(), oldLimit=buf.limit();
    buf.limit(buf.position()+size);
    StringBuilder sb=new StringBuilder(size+(size&gt;&gt;1)+16)
        .append(poolIndex).append("":\tUtf8 "");
    while(buf.hasRemaining()) {
        byte b=buf.get();
        if(b&gt;0) sb.append((char)b);
        else
        {
            int b2 = buf.get();
            if((b&amp;0xf0)!=0xe0)
                sb.append((char)((b&amp;0x1F)&lt;&lt;6 | b2&amp;0x3F));
            else
            {
                int b3 = buf.get();
                sb.append((char)((b&amp;0x0F)&lt;&lt;12 | (b2&amp;0x3F)&lt;&lt;6 | b3&amp;0x3F));
            }
        }
    }
    buf.limit(oldLimit);
    System.out.println(sb);
}
</code></pre>

<p>Dont get confused by the <code>getChar()</code> calls, I used them as a convenient way for getting an unsigned short, instead of <code>getShort()&amp;0xffff</code>.</p>

<p>The code above simply prints the indices of references to other pool items. For decoding the items, you may first store the data of all items into a random access data structure, i.e. array or <code>List</code> as items may refer to items with a higher index number. And mind the starting at index <code>1</code></p>
",Holger,Holger,1440790450,1440790801,1440790801
http://stackoverflow.com/a/3233356/2754040,Update value of a nested dictionary of varying depth,63643,jay_t,,1278975672,1560770679,0,https://stackoverflow.com/questions/3232943/update-value-of-a-nested-dictionary-of-varying-depth,"<p>@FM's answer has the right general idea, i.e. a recursive solution, but somewhat peculiar coding and at least one bug.  I'd recommend, instead:</p>

<p>Python 2:</p>

<pre><code>import collections

def update(d, u):
    for k, v in u.iteritems():
        if isinstance(v, collections.Mapping):
            d[k] = update(d.get(k, {}), v)
        else:
            d[k] = v
    return d
</code></pre>

<p>Python 3:</p>

<pre><code>import collections

def update(d, u):
    for k, v in u.items():
        if isinstance(v, collections.Mapping):
            d[k] = update(d.get(k, {}), v)
        else:
            d[k] = v
    return d
</code></pre>

<p>The bug shows up when the ""update"" has a <code>k</code>, <code>v</code> item where <code>v</code> is a <code>dict</code> and <code>k</code> is not originally a key in the dictionary being updated -- @FM's code ""skips"" this part of the update (because it performs it on an empty new <code>dict</code> which isn't saved or returned anywhere, just lost when the recursive call returns).</p>

<p>My other changes are minor: there is no reason for the <code>if</code>/<code>else</code> construct when <code>.get</code> does the same job faster and cleaner, and <code>isinstance</code> is best applied to abstract base classes (not concrete ones) for generality.</p>
",Alex Martelli,linusg,1278981113,1520877091,1520877091
http://stackoverflow.com/a/3233356/596939,Update value of a nested dictionary of varying depth,63643,jay_t,,1278975672,1560770679,0,https://stackoverflow.com/questions/3232943/update-value-of-a-nested-dictionary-of-varying-depth,"<p>@FM's answer has the right general idea, i.e. a recursive solution, but somewhat peculiar coding and at least one bug.  I'd recommend, instead:</p>

<p>Python 2:</p>

<pre><code>import collections

def update(d, u):
    for k, v in u.iteritems():
        if isinstance(v, collections.Mapping):
            d[k] = update(d.get(k, {}), v)
        else:
            d[k] = v
    return d
</code></pre>

<p>Python 3:</p>

<pre><code>import collections

def update(d, u):
    for k, v in u.items():
        if isinstance(v, collections.Mapping):
            d[k] = update(d.get(k, {}), v)
        else:
            d[k] = v
    return d
</code></pre>

<p>The bug shows up when the ""update"" has a <code>k</code>, <code>v</code> item where <code>v</code> is a <code>dict</code> and <code>k</code> is not originally a key in the dictionary being updated -- @FM's code ""skips"" this part of the update (because it performs it on an empty new <code>dict</code> which isn't saved or returned anywhere, just lost when the recursive call returns).</p>

<p>My other changes are minor: there is no reason for the <code>if</code>/<code>else</code> construct when <code>.get</code> does the same job faster and cleaner, and <code>isinstance</code> is best applied to abstract base classes (not concrete ones) for generality.</p>
",Alex Martelli,linusg,1278981113,1520877091,1520877091
http://stackoverflow.com/a/324533/1234699,How do you read CSS rule values with JavaScript?,102244,Diodeus - James MacFarlane,,1227812520,1516991853,0,https://stackoverflow.com/questions/324486/how-do-you-read-css-rule-values-with-javascript,"<p>Adapted from <a href=""http://www.javascriptkit.com/domref/cssrule.shtml"" rel=""noreferrer"">here</a>, building on scunliffe's answer:</p>

<pre><code>function getStyle(className) {
    var classes = document.styleSheets[0].rules || document.styleSheets[0].cssRules;
    for (var x = 0; x &lt; classes.length; x++) {
        if (classes[x].selectorText == className) {
            (classes[x].cssText) ? alert(classes[x].cssText) : alert(classes[x].style.cssText);
        }
    }
}
getStyle('.test');
</code></pre>
",nsdel,Timwi,1227814586,1406392036,1406392036
http://stackoverflow.com/a/32458998/228539,ID of a Python thread as reported by top,4603,Phani,Phani,1345137295,1441718520,1364317182,https://stackoverflow.com/questions/11992275/id-of-a-python-thread-as-reported-by-top,"<p>Here's a patch to replace the python thread identifier with the <code>TID</code> as displayed in <code>htop</code>:</p>

<pre><code>def patch_thread_identifier():
    """"""Replace python thread identifier by TID.""""""
    # Imports
    import threading, ctypes
    # Define get tid function
    def gettid():
        """"""Get TID as displayed by htop.""""""
        libc = 'libc.so.6'
        for cmd in (186, 224, 178):
            tid = ctypes.CDLL(libc).syscall(cmd)
            if tid != -1:
                return tid
    # Get current thread
    current = threading.current_thread()
    # Patch _get_ident
    threading._get_ident = gettid
    # Update active dictionary
    threading._active[gettid()] = threading._active.pop(current.ident)
    # Set new identifier for the current thread
    current._set_ident()
    # Done
    print 'threading._get_ident patched!'
</code></pre>
",Vincent,,1441718520,1441718520,0
http://stackoverflow.com/a/32503192/101923,HttpURLConnection Invalid HTTP method: PATCH,43125,kavai77,,1407335579,1557569153,0,https://stackoverflow.com/questions/25163131/httpurlconnection-invalid-http-method-patch,"<p>Yes there is workaround for this. Use </p>

<blockquote>
  <p>X-HTTP-Method-Override</p>
</blockquote>

<p>. This header can be used in a POST request to fake other HTTP methods. Simply set the value of the X-HTTP-Method-Override header to the HTTP method you would like to actually perform.
So use following code.</p>

<pre><code>conn.setRequestProperty(""X-HTTP-Method-Override"", ""PATCH"");
conn.setRequestMethod(""POST"");
</code></pre>
",sagar,Asaph,1441891499,1449961118,1449961118
http://stackoverflow.com/a/3253071/176160,How to write java.util.Properties to XML with sorted keys?,15957,user5084,erickson,1221058848,1397588211,1225912192,https://stackoverflow.com/questions/54295/how-to-write-java-util-properties-to-xml-with-sorted-keys,"<p>Here's a way to produce sorted output for both store <code>Properties.store(OutputStream out, String comments)</code> and <code>Properties.storeToXML(OutputStream os, String comment)</code>:</p>

<pre><code>Properties props = new Properties() {
    @Override
    public Set&lt;Object&gt; keySet(){
        return Collections.unmodifiableSet(new TreeSet&lt;Object&gt;(super.keySet()));
    }

    @Override
    public synchronized Enumeration&lt;Object&gt; keys() {
        return Collections.enumeration(new TreeSet&lt;Object&gt;(super.keySet()));
    }
};
props.put(""B"", ""Should come second"");
props.put(""A"", ""Should come first"");
props.storeToXML(new FileOutputStream(new File(""sortedProps.xml"")), null);
props.store(new FileOutputStream(new File(""sortedProps.properties"")), null);
</code></pre>
",Espen,,1279176169,1279176169,0
http://stackoverflow.com/a/32534720/1885921,Get old value and new value from dropdown,16266,Photovor,Photovor,1392902677,1458557636,1392908955,https://stackoverflow.com/questions/21909163/get-old-value-and-new-value-from-dropdown,"<p>Try like this </p>

<p><strong>View</strong></p>

<pre><code>&lt;select ng-model=""selected"" ng-change=""change(selected, {{selected}})""&gt;
</code></pre>

<p><strong>JS</strong></p>

<pre><code>$scope.change = function(newObj, oldObj){
   console.log(newObj);
   console.log(oldObj);
}
</code></pre>
",Anik Islam Abhi,,1442026672,1442026672,0
http://stackoverflow.com/a/325528/90777,Is there any way to kill a Thread?,660109,Sudden Def,martineau,1227797753,1561550862,1539530634,https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread,"<p>It is generally a bad pattern to kill a thread abruptly, in Python and in any language. Think of the following cases:</p>

<ul>
<li>the thread is holding a critical resource that must be closed properly</li>
<li>the thread has created several other threads that must be killed as well.</li>
</ul>

<p>The nice way of handling this if you can afford it (if you are managing your own threads) is to have an exit_request flag that each threads checks on regular interval to see if it is time for it to exit.</p>

<p><strong>For example:</strong></p>

<pre><code>import threading

class StoppableThread(threading.Thread):
    """"""Thread class with a stop() method. The thread itself has to check
    regularly for the stopped() condition.""""""

    def __init__(self):
        super(StoppableThread, self).__init__()
        self._stop_event = threading.Event()

    def stop(self):
        self._stop_event.set()

    def stopped(self):
        return self._stop_event.is_set()
</code></pre>

<p>In this code, you should call <code>stop()</code> on the thread when you want it to exit, and wait for the thread to exit properly using <code>join()</code>. The thread should check the stop flag at regular intervals.</p>

<p>There are cases however when you really need to kill a thread. An example is when you are wrapping an external library that is busy for long calls and you want to interrupt it.</p>

<p>The following code allows (with some restrictions) to raise an Exception in a Python thread:</p>

<pre><code>def _async_raise(tid, exctype):
    '''Raises an exception in the threads with id tid'''
    if not inspect.isclass(exctype):
        raise TypeError(""Only types can be raised (not instances)"")
    res = ctypes.pythonapi.PyThreadState_SetAsyncExc(ctypes.c_long(tid),
                                                     ctypes.py_object(exctype))
    if res == 0:
        raise ValueError(""invalid thread id"")
    elif res != 1:
        # ""if it returns a number greater than one, you're in trouble,
        # and you should call it again with exc=NULL to revert the effect""
        ctypes.pythonapi.PyThreadState_SetAsyncExc(ctypes.c_long(tid), None)
        raise SystemError(""PyThreadState_SetAsyncExc failed"")

class ThreadWithExc(threading.Thread):
    '''A thread class that supports raising exception in the thread from
       another thread.
    '''
    def _get_my_tid(self):
        """"""determines this (self's) thread id

        CAREFUL : this function is executed in the context of the caller
        thread, to get the identity of the thread represented by this
        instance.
        """"""
        if not self.isAlive():
            raise threading.ThreadError(""the thread is not active"")

        # do we have it cached?
        if hasattr(self, ""_thread_id""):
            return self._thread_id

        # no, look for it in the _active dict
        for tid, tobj in threading._active.items():
            if tobj is self:
                self._thread_id = tid
                return tid

        # TODO: in python 2.6, there's a simpler way to do : self.ident

        raise AssertionError(""could not determine the thread's id"")

    def raiseExc(self, exctype):
        """"""Raises the given exception type in the context of this thread.

        If the thread is busy in a system call (time.sleep(),
        socket.accept(), ...), the exception is simply ignored.

        If you are sure that your exception should terminate the thread,
        one way to ensure that it works is:

            t = ThreadWithExc( ... )
            ...
            t.raiseExc( SomeException )
            while t.isAlive():
                time.sleep( 0.1 )
                t.raiseExc( SomeException )

        If the exception is to be caught by the thread, you need a way to
        check that your thread has caught it.

        CAREFUL : this function is executed in the context of the
        caller thread, to raise an excpetion in the context of the
        thread represented by this instance.
        """"""
        _async_raise( self._get_my_tid(), exctype )
</code></pre>

<p>(Based on <a href=""http://tomerfiliba.com/recipes/Thread2/"" rel=""nofollow noreferrer"">Killable Threads</a> by Tomer Filiba. The quote about the return value of <code>PyThreadState_SetAsyncExc</code> appears to be from an <a href=""https://svn.python.org/projects/stackless/Python-2.4.3/dev/Python/pystate.c"" rel=""nofollow noreferrer"">old version of Python</a>.)</p>

<p>As noted in the documentation, this is not a magic bullet because if the thread is busy outside the Python interpreter, it will not catch the interruption.</p>

<p>A good usage pattern of this code is to have the thread catch a specific exception and perform the cleanup. That way, you can interrupt a task and still have proper cleanup.</p>
",Philippe F,vinzee,1227871194,1561550862,1561550862
http://stackoverflow.com/a/32553208/586978,midiOutOpen on Windows 10 using Microsoft GS Wavetable Synth fails,3071,fhevol,,1438367246,1460277165,0,https://stackoverflow.com/questions/31752786/midioutopen-on-windows-10-using-microsoft-gs-wavetable-synth-fails,"<p>I see it.  Tracing through the machine code, I see the <a href=""https://msdn.microsoft.com/en-us/library/windows/hardware/ff537532%28v=vs.85%29.aspx"">modMessage()</a> function fail and return MMSYSERR_ERROR. Exactly why isn't clear to me, it looks like a missing initialization problem.  </p>

<p>What is strange about this mishap is that there are not a lot of complaints about it, you'd expect plenty of other programs fall over as well.  Or for that matter for them to be tested before Win10 shipped.  Next thing I tried is adding the one thing that happens in any non-trivial audio app that I skipped in my test program.  Partly inspired by seeing ""ATL"" back in the symbols of modMessage, although it wasn't anywhere close.  I added this as the first line in main():</p>

<pre><code>   CoInitializeEx(NULL, COINIT_MULTITHREADED);
</code></pre>

<p>Badaboom, no more error.  Use COINIT_APARTMENTTHREADED if you call this on the main thread of a UI thread.  CoUninitialize() at the end to clean up.</p>

<p>Explaining it is difficult, initializing COM should not be necessary when you use MIDI.  With it in place, calling midiOutOpen gets one more DLL loaded, clbcatq.dll.  That's a COM+ support module.  So sure looks like Win10 requires COM to be initialized.</p>
",Hans Passant,,1442169535,1442169535,0
http://stackoverflow.com/a/3259271/35070,Windows cmd encoding change causes Python crash,40605,Alex,tripleee,1242669130,1548310163,1454504295,https://stackoverflow.com/questions/878972/windows-cmd-encoding-change-causes-python-crash,"<p>Here's how to alias <code>cp65001</code> to UTF-8 without changing <code>encodings\aliases.py</code>:</p>

<pre><code>import codecs
codecs.register(lambda name: codecs.lookup('utf-8') if name == 'cp65001' else None)
</code></pre>

<p>(IMHO, don't pay any attention to the silliness about <code>cp65001</code> not being identical to UTF-8 at <a href=""http://bugs.python.org/issue6058#msg97731"" rel=""noreferrer"">http://bugs.python.org/issue6058#msg97731</a> . It's intended to be the same, even if Microsoft's codec has some minor bugs.)</p>

<p>Here is some code (written for Tahoe-LAFS, tahoe-lafs.org) that makes console output work <em>regardless</em> of the <code>chcp</code> code page, and also reads Unicode command-line arguments. Credit to <a href=""http://www.siao2.com/2008/03/18/8306597.aspx"" rel=""noreferrer"">Michael Kaplan</a> for the idea behind this solution. If stdout or stderr are redirected, it will output UTF-8. If you want a Byte Order Mark, you'll need to write it explicitly.</p>

<p>[Edit: This version uses <code>WriteConsoleW</code> instead of the <code>_O_U8TEXT</code> flag in the MSVC runtime library, which is buggy. <code>WriteConsoleW</code> is also buggy relative to the MS documentation, but less so.]</p>

<pre><code>import sys
if sys.platform == ""win32"":
    import codecs
    from ctypes import WINFUNCTYPE, windll, POINTER, byref, c_int
    from ctypes.wintypes import BOOL, HANDLE, DWORD, LPWSTR, LPCWSTR, LPVOID

    original_stderr = sys.stderr

    # If any exception occurs in this code, we'll probably try to print it on stderr,
    # which makes for frustrating debugging if stderr is directed to our wrapper.
    # So be paranoid about catching errors and reporting them to original_stderr,
    # so that we can at least see them.
    def _complain(message):
        print &gt;&gt;original_stderr, message if isinstance(message, str) else repr(message)

    # Work around &lt;http://bugs.python.org/issue6058&gt;.
    codecs.register(lambda name: codecs.lookup('utf-8') if name == 'cp65001' else None)

    # Make Unicode console output work independently of the current code page.
    # This also fixes &lt;http://bugs.python.org/issue1602&gt;.
    # Credit to Michael Kaplan &lt;http://www.siao2.com/2010/04/07/9989346.aspx&gt;
    # and TZOmegaTZIOY
    # &lt;http://stackoverflow.com/questions/878972/windows-cmd-encoding-change-causes-python-crash/1432462#1432462&gt;.
    try:
        # &lt;http://msdn.microsoft.com/en-us/library/ms683231(VS.85).aspx&gt;
        # HANDLE WINAPI GetStdHandle(DWORD nStdHandle);
        # returns INVALID_HANDLE_VALUE, NULL, or a valid handle
        #
        # &lt;http://msdn.microsoft.com/en-us/library/aa364960(VS.85).aspx&gt;
        # DWORD WINAPI GetFileType(DWORD hFile);
        #
        # &lt;http://msdn.microsoft.com/en-us/library/ms683167(VS.85).aspx&gt;
        # BOOL WINAPI GetConsoleMode(HANDLE hConsole, LPDWORD lpMode);

        GetStdHandle = WINFUNCTYPE(HANDLE, DWORD)((""GetStdHandle"", windll.kernel32))
        STD_OUTPUT_HANDLE = DWORD(-11)
        STD_ERROR_HANDLE = DWORD(-12)
        GetFileType = WINFUNCTYPE(DWORD, DWORD)((""GetFileType"", windll.kernel32))
        FILE_TYPE_CHAR = 0x0002
        FILE_TYPE_REMOTE = 0x8000
        GetConsoleMode = WINFUNCTYPE(BOOL, HANDLE, POINTER(DWORD))((""GetConsoleMode"", windll.kernel32))
        INVALID_HANDLE_VALUE = DWORD(-1).value

        def not_a_console(handle):
            if handle == INVALID_HANDLE_VALUE or handle is None:
                return True
            return ((GetFileType(handle) &amp; ~FILE_TYPE_REMOTE) != FILE_TYPE_CHAR
                    or GetConsoleMode(handle, byref(DWORD())) == 0)

        old_stdout_fileno = None
        old_stderr_fileno = None
        if hasattr(sys.stdout, 'fileno'):
            old_stdout_fileno = sys.stdout.fileno()
        if hasattr(sys.stderr, 'fileno'):
            old_stderr_fileno = sys.stderr.fileno()

        STDOUT_FILENO = 1
        STDERR_FILENO = 2
        real_stdout = (old_stdout_fileno == STDOUT_FILENO)
        real_stderr = (old_stderr_fileno == STDERR_FILENO)

        if real_stdout:
            hStdout = GetStdHandle(STD_OUTPUT_HANDLE)
            if not_a_console(hStdout):
                real_stdout = False

        if real_stderr:
            hStderr = GetStdHandle(STD_ERROR_HANDLE)
            if not_a_console(hStderr):
                real_stderr = False

        if real_stdout or real_stderr:
            # BOOL WINAPI WriteConsoleW(HANDLE hOutput, LPWSTR lpBuffer, DWORD nChars,
            #                           LPDWORD lpCharsWritten, LPVOID lpReserved);

            WriteConsoleW = WINFUNCTYPE(BOOL, HANDLE, LPWSTR, DWORD, POINTER(DWORD), LPVOID)((""WriteConsoleW"", windll.kernel32))

            class UnicodeOutput:
                def __init__(self, hConsole, stream, fileno, name):
                    self._hConsole = hConsole
                    self._stream = stream
                    self._fileno = fileno
                    self.closed = False
                    self.softspace = False
                    self.mode = 'w'
                    self.encoding = 'utf-8'
                    self.name = name
                    self.flush()

                def isatty(self):
                    return False

                def close(self):
                    # don't really close the handle, that would only cause problems
                    self.closed = True

                def fileno(self):
                    return self._fileno

                def flush(self):
                    if self._hConsole is None:
                        try:
                            self._stream.flush()
                        except Exception as e:
                            _complain(""%s.flush: %r from %r"" % (self.name, e, self._stream))
                            raise

                def write(self, text):
                    try:
                        if self._hConsole is None:
                            if isinstance(text, unicode):
                                text = text.encode('utf-8')
                            self._stream.write(text)
                        else:
                            if not isinstance(text, unicode):
                                text = str(text).decode('utf-8')
                            remaining = len(text)
                            while remaining:
                                n = DWORD(0)
                                # There is a shorter-than-documented limitation on the
                                # length of the string passed to WriteConsoleW (see
                                # &lt;http://tahoe-lafs.org/trac/tahoe-lafs/ticket/1232&gt;.
                                retval = WriteConsoleW(self._hConsole, text, min(remaining, 10000), byref(n), None)
                                if retval == 0 or n.value == 0:
                                    raise IOError(""WriteConsoleW returned %r, n.value = %r"" % (retval, n.value))
                                remaining -= n.value
                                if not remaining:
                                    break
                                text = text[n.value:]
                    except Exception as e:
                        _complain(""%s.write: %r"" % (self.name, e))
                        raise

                def writelines(self, lines):
                    try:
                        for line in lines:
                            self.write(line)
                    except Exception as e:
                        _complain(""%s.writelines: %r"" % (self.name, e))
                        raise

            if real_stdout:
                sys.stdout = UnicodeOutput(hStdout, None, STDOUT_FILENO, '&lt;Unicode console stdout&gt;')
            else:
                sys.stdout = UnicodeOutput(None, sys.stdout, old_stdout_fileno, '&lt;Unicode redirected stdout&gt;')

            if real_stderr:
                sys.stderr = UnicodeOutput(hStderr, None, STDERR_FILENO, '&lt;Unicode console stderr&gt;')
            else:
                sys.stderr = UnicodeOutput(None, sys.stderr, old_stderr_fileno, '&lt;Unicode redirected stderr&gt;')
    except Exception as e:
        _complain(""exception %r while fixing up sys.stdout and sys.stderr"" % (e,))


    # While we're at it, let's unmangle the command-line arguments:

    # This works around &lt;http://bugs.python.org/issue2128&gt;.
    GetCommandLineW = WINFUNCTYPE(LPWSTR)((""GetCommandLineW"", windll.kernel32))
    CommandLineToArgvW = WINFUNCTYPE(POINTER(LPWSTR), LPCWSTR, POINTER(c_int))((""CommandLineToArgvW"", windll.shell32))

    argc = c_int(0)
    argv_unicode = CommandLineToArgvW(GetCommandLineW(), byref(argc))

    argv = [argv_unicode[i].encode('utf-8') for i in xrange(0, argc.value)]

    if not hasattr(sys, 'frozen'):
        # If this is an executable produced by py2exe or bbfreeze, then it will
        # have been invoked directly. Otherwise, unicode_argv[0] is the Python
        # interpreter, so skip that.
        argv = argv[1:]

        # Also skip option arguments to the Python interpreter.
        while len(argv) &gt; 0:
            arg = argv[0]
            if not arg.startswith(u""-"") or arg == u""-"":
                break
            argv = argv[1:]
            if arg == u'-m':
                # sys.argv[0] should really be the absolute path of the module source,
                # but never mind
                break
            if arg == u'-c':
                argv[0] = u'-c'
                break

    # if you like:
    sys.argv = argv
</code></pre>

<p>Finally, it <em>is</em> possible to grant 's wish to use DejaVu Sans Mono, which I agree is an excellent font, for the console.</p>

<p>You can find information on the font requirements and how to add new fonts for the windows console in the <a href=""https://support.microsoft.com/en-us/kb/247815"" rel=""noreferrer"">'Necessary criteria for fonts to be available in a command window' Microsoft KB</a></p>

<p>But basically, on Vista (probably also Win7):</p>

<ul>
<li>under <code>HKEY_LOCAL_MACHINE_SOFTWARE\Microsoft\Windows NT\CurrentVersion\Console\TrueTypeFont</code>, set <code>""0""</code> to <code>""DejaVu Sans Mono""</code>;</li>
<li>for each of the subkeys under <code>HKEY_CURRENT_USER\Console</code>, set <code>""FaceName""</code> to <code>""DejaVu Sans Mono""</code>.</li>
</ul>

<p>On XP, check the thread <a href=""http://help.lockergnome.com/windows/Changing-Command-Prompt-fonts--ftopict551879.html"" rel=""noreferrer"">'Changing Command Prompt fonts?' in LockerGnome forums</a>.</p>
",Daira Hopwood,KurzedMetal,1279222510,1438808758,1438808758
http://stackoverflow.com/a/32611061/4928558,How to disable animations in protractor for angular js application,13181,user3345216,Juha Syrj&#228;l&#228;,1414401997,1504178651,1453721349,https://stackoverflow.com/questions/26584451/how-to-disable-animations-in-protractor-for-angular-js-application,"<p>I personally use the following code in the ""onPrepare"" function in my 'conf.js' file to disable both Angular/CSS animations:</p>

<pre><code>...
onPrepare: function() {
    var disableNgAnimate = function() {
        angular
            .module('disableNgAnimate', [])
            .run(['$animate', function($animate) {
                $animate.enabled(false);
            }]);
    };

    var disableCssAnimate = function() {
        angular
            .module('disableCssAnimate', [])
            .run(function() {
                var style = document.createElement('style');
                style.type = 'text/css';
                style.innerHTML = '* {' +
                    '-webkit-transition: none !important;' +
                    '-moz-transition: none !important' +
                    '-o-transition: none !important' +
                    '-ms-transition: none !important' +
                    'transition: none !important' +
                    '}';
                document.getElementsByTagName('head')[0].appendChild(style);
            });
    };

    browser.addMockModule('disableNgAnimate', disableNgAnimate);
    browser.addMockModule('disableCssAnimate', disableCssAnimate);
}
...
</code></pre>

<p>Please note: I did not write the above code, I found it online while looking for ways to speed up my own tests.</p>
",John Stennett,,1442412664,1442412664,0
http://stackoverflow.com/a/32656429/5909792,Using os.walk() to recursively traverse directories in Python,230795,SidNoob,Morgoth,1370494020,1559899824,1502116838,https://stackoverflow.com/questions/16953842/using-os-walk-to-recursively-traverse-directories-in-python,"<p>try this:</p>

<pre><code>#!/usr/bin/env python
# -*- coding: utf-8 -*-

""""""FileTreeMaker.py: ...""""""

__author__  = ""legendmohe""

import os
import argparse
import time

class FileTreeMaker(object):

    def _recurse(self, parent_path, file_list, prefix, output_buf, level):
        if len(file_list) == 0 \
            or (self.max_level != -1 and self.max_level &lt;= level):
            return
        else:
            file_list.sort(key=lambda f: os.path.isfile(os.path.join(parent_path, f)))
            for idx, sub_path in enumerate(file_list):
                if any(exclude_name in sub_path for exclude_name in self.exn):
                    continue

                full_path = os.path.join(parent_path, sub_path)
                idc = """"
                if idx == len(file_list) - 1:
                    idc = """"

                if os.path.isdir(full_path) and sub_path not in self.exf:
                    output_buf.append(""%s%s[%s]"" % (prefix, idc, sub_path))
                    if len(file_list) &gt; 1 and idx != len(file_list) - 1:
                        tmp_prefix = prefix + ""  ""
                    else:
                        tmp_prefix = prefix + ""    ""
                    self._recurse(full_path, os.listdir(full_path), tmp_prefix, output_buf, level + 1)
                elif os.path.isfile(full_path):
                    output_buf.append(""%s%s%s"" % (prefix, idc, sub_path))

    def make(self, args):
        self.root = args.root
        self.exf = args.exclude_folder
        self.exn = args.exclude_name
        self.max_level = args.max_level

        print(""root:%s"" % self.root)

        buf = []
        path_parts = self.root.rsplit(os.path.sep, 1)
        buf.append(""[%s]"" % (path_parts[-1],))
        self._recurse(self.root, os.listdir(self.root), """", buf, 0)

        output_str = ""\n"".join(buf)
        if len(args.output) != 0:
            with open(args.output, 'w') as of:
                of.write(output_str)
        return output_str

if __name__ == ""__main__"":
    parser = argparse.ArgumentParser()
    parser.add_argument(""-r"", ""--root"", help=""root of file tree"", default=""."")
    parser.add_argument(""-o"", ""--output"", help=""output file name"", default="""")
    parser.add_argument(""-xf"", ""--exclude_folder"", nargs='*', help=""exclude folder"", default=[])
    parser.add_argument(""-xn"", ""--exclude_name"", nargs='*', help=""exclude name"", default=[])
    parser.add_argument(""-m"", ""--max_level"", help=""max level"",
                        type=int, default=-1)
    args = parser.parse_args()
    print(FileTreeMaker().make(args))
</code></pre>

<p>you will get this:</p>

<pre><code>root:.
[.]
[.idea]
  [scopes]
    scope_settings.xml
  .name
  Demo.iml
  encodings.xml
  misc.xml
  modules.xml
  vcs.xml
  workspace.xml
[test1]
  test1.txt
[test2]
  [test2-2]
    [test2-3]
        test2
        test2-3-1
  test2
folder_tree_maker.py
tree.py
</code></pre>
",legendmohe,legendmohe,1442592112,1442665243,1442665243
http://stackoverflow.com/a/32717129/101258,How can I detect if I&#39;m compiling for a 64bits architecture in C++,15667,Mathieu Pag&#233;,Brian Tompsett - ,1222961852,1464978246,1464978246,https://stackoverflow.com/questions/163058/how-can-i-detect-if-im-compiling-for-a-64bits-architecture-in-c,"<p>An architecture-independent way to detect 32-bit and 64-bit builds in C and C++ looks like this:</p>

<pre><code>// C
#include &lt;stdint.h&gt;

// C++
#include &lt;cstdint&gt;

#if INTPTR_MAX == INT64_MAX
// 64-bit
#elif INTPTR_MAX == INT32_MAX
// 32-bit
#else
#error Unknown pointer size or missing size macros!
#endif
</code></pre>
",DarkDust,,1442925570,1442925570,0
http://stackoverflow.com/a/3273571/1866775,Is it possible to transform the types in a parameter pack?,1617,Georg Fritzsche,Johannes Schaub - litb,1279405194,1317480963,1317480963,https://stackoverflow.com/questions/3273504/is-it-possible-to-transform-the-types-in-a-parameter-pack,"<p>Yes we can do that </p>

<pre><code>template&lt;template&lt;typename...&gt; class List, 
         template&lt;typename&gt; class Mod, 
         typename ...Args&gt;
struct magic {
    typedef List&lt;typename Mod&lt;Args&gt;::type...&gt; type;
};
</code></pre>
",Johannes Schaub - litb,,1279407020,1279407020,0
http://stackoverflow.com/a/32768790/1429367,"In java8, how to set the global value in the lambdas foreach block?",34230,MarsYoung,assylias,1441969582,1509783498,1441970140,https://stackoverflow.com/questions/32521972/in-java8-how-to-set-the-global-value-in-the-lambdas-foreach-block,"<p>In addition to already provided idiomatic examples, another hack would be to use AtomicReference, but I would only recommend it if you do need 'forEach' and prefer something more readable than true-functional variant:</p>

<pre><code>public void test(){
    AtomicReference&lt;String&gt; x = new AtomicReference&lt;&gt;();
    List&lt;String&gt; list= Arrays.asList(""a"", ""b"", ""c"", ""d"");

    list.forEach(n-&gt;{
        if(n.equals(""d""))
            x.set(""match the value"");
    });
}
</code></pre>
",Andrii Rubtsov,Andrii Rubtsov,1443120708,1509783498,1509783498
http://stackoverflow.com/a/3277192/128454],How to get the global object in JavaScript?,46057,CoolAJ86,Qantas 94 Heavy,1279485860,1559152112,1387352929,https://stackoverflow.com/questions/3277182/how-to-get-the-global-object-in-javascript,"<p>Well, you can use the <code>typeof</code> operator, and if the identifier doesn't exist in any place of the scope chain, it will <em>not</em> throw a <code>ReferenceError</code>, it will just return <code>""undefined""</code>:</p>

<pre><code>if (typeof ModuleName != 'undefined') {
  //...
}
</code></pre>

<p>Remember also that the <code>this</code> value on Global code, refers to the global object, meaning that if your <code>if</code> statement is on the global context, you can simply check <code>this.ModuleName</code>.</p>

<p>About the <code>(function () { return this; }());</code> technique, you are right, on strict mode the <code>this</code> value will simply be <code>undefined</code>.</p>

<p>Under strict mode there are two ways to get a reference to the Global object, no matter where you are:</p>

<ul>
<li><p>Through the <code>Function</code> constructor:</p>

<pre><code>var global = Function('return this')();
</code></pre></li>
</ul>

<p>Functions created with the <code>Function</code> constructor don't inherit the strictness of the caller, they are strict only if they start their body with the <code>'use strict'</code> directive, otherwise they are non-strict.</p>

<p>This method is compatible with any ES3 implementation.</p>

<ul>
<li><p>Through an <em>indirect <code>eval</code> call</em>, for example:</p>

<pre><code>""use strict"";
var get = eval;
var global = get(""this"");
</code></pre></li>
</ul>

<p>The above will work because in ES5, indirect calls to <code>eval</code>, use the <a href=""http://ecma262-5.com/ELS5_HTML.htm#Section_10.4.1.1"" rel=""noreferrer"">global environment</a> as both, the variable environment and lexical environment for the eval code.</p>

<p>See details on <a href=""http://ecma262-5.com/ELS5_HTML.htm#Section_10.4.2"" rel=""noreferrer"">Entering Eval Code</a>, Step 1.</p>

<p>But be aware that the last solution will not work on ES3 implementations, because an indirect call to <code>eval</code> on ES3 will use the variable and lexical environments of the caller as the environments for the eval code itself.</p>

<p>And at last, you may find useful to detect if strict mode is supported:</p>

<pre><code>var isStrictSupported = (function () { ""use strict""; return !this; })();
</code></pre>
",CMS,CMS,1279486100,1311089448,1311089448
http://stackoverflow.com/a/3279550/148668,What is the copy-and-swap idiom?,318830,GManNickG,Community,1279528929,1490199565,1495540519,https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom,"<h2>Overview</h2>

<h3>Why do we need the copy-and-swap idiom?</h3>

<p>Any class that manages a resource (a <em>wrapper</em>, like a smart pointer) needs to implement <a href=""https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three"">The Big Three</a>. While the goals and implementation of the copy-constructor and destructor are straightforward, the copy-assignment operator is arguably the most nuanced and difficult. How should it be done? What pitfalls need to be avoided?</p>

<p>The <em>copy-and-swap idiom</em> is the solution, and elegantly assists the assignment operator in achieving two things: avoiding <a href=""http://en.wikipedia.org/wiki/Don%27t_repeat_yourself"" rel=""noreferrer"">code duplication</a>, and providing a <a href=""http://en.wikipedia.org/wiki/Exception_guarantees"" rel=""noreferrer"">strong exception guarantee</a>.</p>

<h3>How does it work?</h3>

<p><a href=""https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom/3279616#3279616"">Conceptually</a>, it works by using the copy-constructor's functionality to create a local copy of the data, then takes the copied data with a <code>swap</code> function, swapping the old data with the new data. The temporary copy then destructs, taking the old data with it. We are left with a copy of the new data.</p>

<p>In order to use the copy-and-swap idiom, we need three things: a working copy-constructor, a working destructor (both are the basis of any wrapper, so should be complete anyway), and a <code>swap</code> function.</p>

<p>A swap function is a <em>non-throwing</em> function that swaps two objects of a class, member for member. We might be tempted to use <code>std::swap</code> instead of providing our own, but this would be impossible; <code>std::swap</code> uses the copy-constructor and copy-assignment operator within its implementation, and we'd ultimately be trying to define the assignment operator in terms of itself!</p>

<p>(Not only that, but unqualified calls to <code>swap</code> will use our custom swap operator, skipping over the unnecessary construction and destruction of our class that <code>std::swap</code> would entail.)</p>

<hr>

<h2>An in-depth explanation</h2>

<h3>The goal</h3>

<p>Let's consider a concrete case. We want to manage, in an otherwise useless class, a dynamic array. We start with a working constructor, copy-constructor, and destructor:</p>

<pre><code>#include &lt;algorithm&gt; // std::copy
#include &lt;cstddef&gt; // std::size_t

class dumb_array
{
public:
    // (default) constructor
    dumb_array(std::size_t size = 0)
        : mSize(size),
          mArray(mSize ? new int[mSize]() : nullptr)
    {
    }

    // copy-constructor
    dumb_array(const dumb_array&amp; other)
        : mSize(other.mSize),
          mArray(mSize ? new int[mSize] : nullptr),
    {
        // note that this is non-throwing, because of the data
        // types being used; more attention to detail with regards
        // to exceptions must be given in a more general case, however
        std::copy(other.mArray, other.mArray + mSize, mArray);
    }

    // destructor
    ~dumb_array()
    {
        delete [] mArray;
    }

private:
    std::size_t mSize;
    int* mArray;
};
</code></pre>

<p>This class almost manages the array successfully, but it needs <code>operator=</code> to work correctly.</p>

<h3>A failed solution</h3>

<p>Here's how a naive implementation might look:</p>

<pre><code>// the hard part
dumb_array&amp; operator=(const dumb_array&amp; other)
{
    if (this != &amp;other) // (1)
    {
        // get rid of the old data...
        delete [] mArray; // (2)
        mArray = nullptr; // (2) *(see footnote for rationale)

        // ...and put in the new
        mSize = other.mSize; // (3)
        mArray = mSize ? new int[mSize] : nullptr; // (3)
        std::copy(other.mArray, other.mArray + mSize, mArray); // (3)
    }

    return *this;
}
</code></pre>

<p>And we say we're finished; this now manages an array, without leaks. However, it suffers from three problems, marked sequentially in the code as <code>(n)</code>.</p>

<ol>
<li><p>The first  is the self-assignment test. This check serves two purposes: it's an easy way to prevent us from running needless code on self-assignment, and it protects us from subtle bugs (such as deleting the array only to try and copy it). But in all other cases it merely serves to slow the program down, and act as noise in the code; self-assignment rarely occurs, so most of the time this check is a waste. It would be better if the operator could work properly without it.</p></li>
<li><p>The second is that it only provides a basic exception guarantee. If <code>new int[mSize]</code> fails, <code>*this</code> will have been modified. (Namely, the size is wrong and the data is gone!) For a strong exception guarantee, it would need to be something akin to:</p>

<pre><code>dumb_array&amp; operator=(const dumb_array&amp; other)
{
    if (this != &amp;other) // (1)
    {
        // get the new data ready before we replace the old
        std::size_t newSize = other.mSize;
        int* newArray = newSize ? new int[newSize]() : nullptr; // (3)
        std::copy(other.mArray, other.mArray + newSize, newArray); // (3)

        // replace the old data (all are non-throwing)
        delete [] mArray;
        mSize = newSize;
        mArray = newArray;
    }

    return *this;
}
</code></pre></li>
<li><p>The code has expanded! Which leads us to the third problem: code duplication. Our assignment operator effectively duplicates all the code we've already written elsewhere, and that's a terrible thing.</p></li>
</ol>

<p>In our case, the core of it is only two lines (the allocation and the copy), but with more complex resources this code bloat can be quite a hassle. We should strive to never repeat ourselves.</p>

<p>(One might wonder: if this much code is needed to manage one resource correctly, what if my class manages more than one? While this may seem to be a valid concern, and indeed it requires non-trivial <code>try</code>/<code>catch</code> clauses, this is a non-issue. That's because a class should manage <a href=""http://en.wikipedia.org/wiki/Single_responsibility_principle"" rel=""noreferrer""><em>one resource only</em></a>!)</p>

<h3>A successful solution</h3>

<p>As mentioned, the copy-and-swap idiom will fix all these issues. But right now, we have all the requirements except one: a <code>swap</code> function. While The Rule of Three successfully entails the existence of our copy-constructor, assignment operator, and destructor, it should really be called ""The Big Three and A Half"": any time your class manages a resource it also makes sense to provide a <code>swap</code> function.</p>

<p>We need to add swap functionality to our class, and we do that as follows:</p>

<pre><code>class dumb_array
{
public:
    // ...

    friend void swap(dumb_array&amp; first, dumb_array&amp; second) // nothrow
    {
        // enable ADL (not necessary in our case, but good practice)
        using std::swap;

        // by swapping the members of two objects,
        // the two objects are effectively swapped
        swap(first.mSize, second.mSize);
        swap(first.mArray, second.mArray);
    }

    // ...
};
</code></pre>

<p>(<a href=""https://stackoverflow.com/questions/5695548/public-friend-swap-member-function"">Here</a> is the explanation why <code>public friend swap</code>.) Now not only can we swap our <code>dumb_array</code>'s, but swaps in general can be more efficient; it merely swaps pointers and sizes, rather than allocating and copying entire arrays. Aside from this bonus in functionality and efficiency, we are now ready to implement the copy-and-swap idiom.</p>

<p>Without further ado, our assignment operator is:</p>

<pre><code>dumb_array&amp; operator=(dumb_array other) // (1)
{
    swap(*this, other); // (2)

    return *this;
}
</code></pre>

<p>And that's it! With one fell swoop, all three problems are elegantly tackled at once.</p>

<h3>Why does it work?</h3>

<p>We first notice an important choice: the parameter argument is taken <em>by-value</em>. While one could just as easily do the following (and indeed, many naive implementations of the idiom do):</p>

<pre><code>dumb_array&amp; operator=(const dumb_array&amp; other)
{
    dumb_array temp(other);
    swap(*this, temp);

    return *this;
}
</code></pre>

<p>We lose an <a href=""https://web.archive.org/web/20140113221447/http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/"" rel=""noreferrer"">important optimization opportunity</a>. Not only that, but this choice is critical in C++11, which is discussed later. (On a general note, a remarkably useful guideline is as follows: if you're going to make a copy of something in a function, let the compiler do it in the parameter list.)</p>

<p>Either way, this method of obtaining our resource is the key to eliminating code duplication: we get to use the code from the copy-constructor to make the copy, and never need to repeat any bit of it. Now that the copy is made, we are ready to swap.</p>

<p>Observe that upon entering the function that all the new data is already allocated, copied, and ready to be used. This is what gives us a strong exception guarantee for free: we won't even enter the function if construction of the copy fails, and it's therefore not possible to alter the state of <code>*this</code>. (What we did manually before for a strong exception guarantee, the compiler is doing for us now; how kind.)</p>

<p>At this point we are home-free, because <code>swap</code> is non-throwing. We swap our current data with the copied data, safely altering our state, and the old data gets put into the temporary. The old data is then released when the function returns. (Where upon the parameter's scope ends and its destructor is called.)</p>

<p>Because the idiom repeats no code, we cannot introduce bugs within the operator. Note that this means we are rid of the need for a self-assignment check, allowing a single uniform implementation of <code>operator=</code>. (Additionally, we no longer have a performance penalty on non-self-assignments.)</p>

<p>And that is the copy-and-swap idiom.</p>

<h2>What about C++11?</h2>

<p>The next version of C++, C++11, makes one very important change to how we manage resources: the Rule of Three is now <strong>The Rule of Four</strong> (and a half). Why? Because not only do we need to be able to copy-construct our resource, <a href=""https://stackoverflow.com/questions/3106110/can-someone-please-explain-move-semantics-to-me"">we need to move-construct it as well</a>.</p>

<p>Luckily for us, this is easy:</p>

<pre><code>class dumb_array
{
public:
    // ...

    // move constructor
    dumb_array(dumb_array&amp;&amp; other)
        : dumb_array() // initialize via default constructor, C++11 only
    {
        swap(*this, other);
    }

    // ...
};
</code></pre>

<p>What's going on here? Recall the goal of move-construction: to take the resources from another instance of the class, leaving it in a state guaranteed to be assignable and destructible.</p>

<p>So what we've done is simple: initialize via the default constructor (a C++11 feature), then swap with <code>other</code>; we know a default constructed instance of our class can safely be assigned and destructed, so we know <code>other</code> will be able to do the same, after swapping.</p>

<p>(Note that some compilers do not support constructor delegation; in this case, we have to manually default construct the class. This is an unfortunate but luckily trivial task.)</p>

<h3>Why does that work?</h3>

<p>That is the only change we need to make to our class, so why does it work? Remember the ever-important decision we made to make the parameter a value and not a reference:</p>

<pre><code>dumb_array&amp; operator=(dumb_array other); // (1)
</code></pre>

<p>Now, if <code>other</code> is being initialized with an rvalue, <em>it will be move-constructed</em>. Perfect. In the same way C++03 let us re-use our copy-constructor functionality by taking the argument by-value, C++11 will <em>automatically</em> pick the move-constructor when appropriate as well. (And, of course, as mentioned in previously linked article, the copying/moving of the value may simply be elided altogether.)</p>

<p>And so concludes the copy-and-swap idiom.</p>

<hr>

<h3>Footnotes</h3>

<p>*Why do we set <code>mArray</code> to null? Because if any further code in the operator throws, the destructor of <code>dumb_array</code> might be called; and if that happens without setting it to null, we attempt to delete memory that's already been deleted! We avoid this by setting it to null, as deleting null is a no-operation.</p>

<p>There are other claims that we should specialize <code>std::swap</code> for our type, provide an in-class <code>swap</code> along-side a free-function <code>swap</code>, etc. But this is all unnecessary: any proper use of <code>swap</code> will be through an unqualified call, and our function will be found through <a href=""http://en.wikipedia.org/wiki/Argument-dependent_name_lookup"" rel=""noreferrer"">ADL</a>. One function will do.</p>

<p>The reason is simple: once you have the resource to yourself, you may swap and/or move it (C++11) anywhere it needs to be. And by making the copy in the parameter list, you maximize optimization.</p>
",GManNickG,Community,1279528994,1475227829,1495541454
http://stackoverflow.com/a/3280042/180733,"Duplicating a MySQL table, indices, and data",424731,xkcd150,DwB,1279533237,1560879689,1549555411,https://stackoverflow.com/questions/3280006/duplicating-a-mysql-table-indices-and-data,"<p>To copy with indexes and triggers do these 2 queries:</p>

<pre><code>CREATE TABLE newtable LIKE oldtable; 
INSERT newtable SELECT * FROM oldtable;
</code></pre>

<p>To copy just structure and data use this one:</p>

<pre><code>CREATE TABLE tbl_new AS SELECT * FROM tbl_old;
</code></pre>

<p>I've asked this before:</p>

<p><a href=""https://stackoverflow.com/questions/2415855/run-mysql-create-table-by-select-another-and-copied-the-indexes-automatically"">Copy a MySQL table including indexes</a></p>
",Haim Evgi,Community,1279533583,1481490260,1495539204
http://stackoverflow.com/a/32822431/1773758,Scipy and CX_freeze - Error importing scipy: you cannot import scipy while being in scipy source directory,3221,Praxis,,1442834854,1501693577,0,https://stackoverflow.com/questions/32694052/scipy-and-cx-freeze-error-importing-scipy-you-cannot-import-scipy-while-being,"<p>i have had the same issue. I added this code to the <code>setup.py</code> generated by cx_freeze:</p>

<pre><code>import scipy
includefiles_list=[]
scipy_path = dirname(scipy.__file__)
includefiles_list.append(scipy_path)
</code></pre>

<p>Then, used <code>includefiles_list</code> as part of the build_exe parameter:</p>

<pre><code>build_options = dict(packages=[], include_files=includefiles_list)

setup(name=""foo"", options=dict(build_exe=build_options))
</code></pre>
",fepzzz,fepzzz,1443441514,1481210956,1481210956
http://stackoverflow.com/a/3284324/786644,Make object not pass by reference,2330,skerit,,1279567425,1328605606,0,https://stackoverflow.com/questions/3284285/make-object-not-pass-by-reference,"<p>This is not an example of passing by reference (you aren't passing any parameters).
However, you're correct; assigning an object will not make a deep copy.</p>

<p>You can make a deep copy of an object like this:</p>

<pre><code>function deepCopy(obj) {
    if (typeof obj !== ""object"") return obj;
    if (obj.constructor === RegExp) return obj;

    var retVal = new obj.constructor();
    for (var key in obj) {
        if (!obj.hasOwnProperty(key)) continue;
        retVal[key] = deepCopy(obj[key]);
    }
    return retVal;
}
</code></pre>

<p>Note that if an object's constructor has any side-effects, this code will trigger them.</p>
",SLaks,SLaks,1279567699,1279568487,1279568487
http://stackoverflow.com/a/3285479/741249,Java ProcessBuilder: Resultant Process Hangs,20705,Matt D,,1279576488,1507831015,0,https://stackoverflow.com/questions/3285408/java-processbuilder-resultant-process-hangs,"<p>If the process writes to stderr or stdout, and you're not reading it - it will just ""hang"" , blocking when writing to stdout/err. Either redirect stdout/err to /dev/null using a shell or merge stdout/err with redirectErrorStream(true) and spawn another thread that reads from stdout of the process</p>
",nos,,1279577178,1279577178,0
http://stackoverflow.com/a/3288988/267841,How can I get fields in an original order?,2658,DenisKolodin,miku,1279613835,1477464952,1279614101,https://stackoverflow.com/questions/3288107/how-can-i-get-fields-in-an-original-order,"<p>I was 80% done with this answer when Will posted his, but I decided to post anyway so the effort wouldn't go to waste (our answers basically describe the same thing).</p>

<p>Here's how Django does it. I've chosen to keep the same nomenclature, methodology, and data structures as Django, so that this answer may be also useful for people trying to understand how field names are sorted in Django.</p>

<pre><code>from bisect import bisect

class Field(object):
    # A global creation counter that will contain the number of Field objects
    # created globally.
    creation_counter = 0

    def __init__(self, *args, **kwargs):
        super(Field, self).__init__(*args, **kwargs)
        # Store the creation index in the ""creation_counter"" of the field.
        self.creation_counter = Field.creation_counter
        # Increment the global counter.
        Field.creation_counter += 1
        # As with Django, we'll be storing the name of the model property
        # that holds this field in ""name"".
        self.name = None

    def __cmp__(self, other):
        # This specifies that fields should be compared based on their creation
        # counters, allowing sorted lists to be built using bisect.
        return cmp(self.creation_counter, other.creation_counter)

# A metaclass used by all Models
class ModelBase(type):
    def __new__(cls, name, bases, attrs):
        klass = super(ModelBase, cls).__new__(cls, name, bases, attrs)
        fields = []
        # Add all fields defined for the model into ""fields"".
        for key, value in attrs.items():
            if isinstance(value, Field):
                # Store the name of the model property.
                value.name = key
                # This ensures the list is sorted based on the creation order
                fields.insert(bisect(fields, value), value)
        # In Django, ""_meta"" is an ""Options"" object and contains both a
        # ""local_fields"" and a ""many_to_many_fields"" property. We'll use a
        # dictionary with a ""fields"" key to keep things simple.
        klass._meta = { 'fields': fields }
        return klass

class Model(object):
    __metaclass__ = ModelBase
</code></pre>

<p>Now let's define some example models:</p>

<pre><code>class Model1(Model):
    a = Field()
    b = Field()
    c = Field()
    z = Field()

class Model2(Model):
    c = Field()
    z = Field()
    b = Field()
    a = Field()
</code></pre>

<p>And let's test them:</p>

<pre><code>&gt;&gt;&gt;&gt; [f.name for f in Model1()._meta['fields']]
['a', 'b', 'c', 'z']
&gt;&gt;&gt;&gt; [f.name for f in Model2()._meta['fields']]
['c', 'z', 'b', 'a']
</code></pre>

<p>Hope this helps clarify anything that wasn't already clear in Will's answer.</p>
",Aram Dulyan,Aram Dulyan,1279621255,1279623125,1279623125
http://stackoverflow.com/a/32903747/378298,Algorithm for simplifying decimal to fractions,28606,Chibueze Opata,,1298688954,1545647568,0,https://stackoverflow.com/questions/5124743/algorithm-for-simplifying-decimal-to-fractions,"<p><em>(code improved Feb 2017 - scroll down to 'optimization'...)</em></p>

<p><strong>(algorithm comparison table at the end of this answer)</strong></p>

<p>I implemented <a href=""https://stackoverflow.com/a/5128558/344541"">btilly's answer</a> in C# and...</p>

<ul>
<li>added support for negative numbers</li>
<li>provide an <code>accuracy</code> parameter to specify the max. relative error, not the max. absolute error; <code>0.01</code> would find a fraction within 1% of the value.</li>
<li>provide an optimization</li>
<li><code>Double.NaN</code> and <code>Double.Infinity</code> are not supported; you might want to handle those (<a href=""https://codereview.stackexchange.com/questions/71851/rational-wrapper-class-with-support-for-rational-number-approximation"">example here</a>).</li>
</ul>



<pre><code>public Fraction RealToFraction(double value, double accuracy)
{
    if (accuracy &lt;= 0.0 || accuracy &gt;= 1.0)
    {
        throw new ArgumentOutOfRangeException(""accuracy"", ""Must be &gt; 0 and &lt; 1."");
    }

    int sign = Math.Sign(value);

    if (sign == -1)
    {
        value = Math.Abs(value);
    }

    // Accuracy is the maximum relative error; convert to absolute maxError
    double maxError = sign == 0 ? accuracy : value * accuracy;

    int n = (int) Math.Floor(value);
    value -= n;

    if (value &lt; maxError)
    {
        return new Fraction(sign * n, 1);
    }

    if (1 - maxError &lt; value)
    {
        return new Fraction(sign * (n + 1), 1);
    }

    // The lower fraction is 0/1
    int lower_n = 0;
    int lower_d = 1;

    // The upper fraction is 1/1
    int upper_n = 1;
    int upper_d = 1;

    while (true)
    {
        // The middle fraction is (lower_n + upper_n) / (lower_d + upper_d)
        int middle_n = lower_n + upper_n;
        int middle_d = lower_d + upper_d;

        if (middle_d * (value + maxError) &lt; middle_n)
        {
            // real + error &lt; middle : middle is our new upper
            upper_n = middle_n;
            upper_d = middle_d;
        }
        else if (middle_n &lt; (value - maxError) * middle_d)
        {
            // middle &lt; real - error : middle is our new lower
            lower_n = middle_n;
            lower_d = middle_d;
        }
        else
        {
            // Middle is our best fraction
            return new Fraction((n * middle_d + middle_n) * sign, middle_d);
        }
    }
}
</code></pre>

<p>The <code>Fraction</code> type is just a simple struct. Of course, use your own preferred type... (I like <a href=""https://codereview.stackexchange.com/q/84424"">this one</a> by Rick Davin.)</p>

<pre><code>public struct Fraction
{
    public Fraction(int n, int d)
    {
        N = n;
        D = d;
    }

    public int N { get; private set; }
    public int D { get; private set; }
}
</code></pre>

<p><strong>Feb 2017 optimization</strong></p>

<p>For certain values, like <code>0.01</code>, <code>0.001</code>, etc. the algorithm goes through hundreds or thousands of linear iterations. To fix this, I implemented a binary way of finding the final value -- thanks to <a href=""https://stackoverflow.com/users/585411/btilly"">btilly</a> for this idea. Inside the <code>if</code>-statement substitute the following:</p>

<pre><code>// real + error &lt; middle : middle is our new upper
Seek(ref upper_n, ref upper_d, lower_n, lower_d, (un, ud) =&gt; (lower_d + ud) * (value + maxError) &lt; (lower_n + un));
</code></pre>

<p>and</p>

<pre><code>// middle &lt; real - error : middle is our new lower
Seek(ref lower_n, ref lower_d, upper_n, upper_d, (ln, ld) =&gt; (ln + upper_n) &lt; (value - maxError) * (ld + upper_d));
</code></pre>

<p>Here is the <code>Seek</code> method implementation:</p>

<pre><code>/// &lt;summary&gt;
/// Binary seek for the value where f() becomes false.
/// &lt;/summary&gt;
void Seek(ref int a, ref int b, int ainc, int binc, Func&lt;int, int, bool&gt; f)
{
    a += ainc;
    b += binc;

    if (f(a, b))
    {
        int weight = 1;

        do
        {
            weight *= 2;
            a += ainc * weight;
            b += binc * weight;
        }
        while (f(a, b));

        do
        {
            weight /= 2;

            int adec = ainc * weight;
            int bdec = binc * weight;

            if (!f(a - adec, b - bdec))
            {
                a -= adec;
                b -= bdec;
            }
        }
        while (weight &gt; 1);
    }
}
</code></pre>

<p><strong>Algorithm comparison table</strong></p>

<p>You may want to copy the table to your text editor for full screen viewing.</p>

<pre><code>Accuracy: 1.0E-3      | Stern-Brocot                             OPTIMIZED   | Eppstein                                 | Richards                                 
Input                 | Result           Error       Iterations  Iterations  | Result           Error       Iterations  | Result           Error       Iterations  
======================| =====================================================| =========================================| =========================================
   0                  |       0/1 (zero)   0         0           0           |       0/1 (zero)   0         0           |       0/1 (zero)   0         0           
   1                  |       1/1          0         0           0           |    1001/1000      1.0E-3     1           |       1/1          0         0           
   3                  |       3/1          0         0           0           |    1003/334       1.0E-3     1           |       3/1          0         0           
  -1                  |      -1/1          0         0           0           |   -1001/1000      1.0E-3     1           |      -1/1          0         0           
  -3                  |      -3/1          0         0           0           |   -1003/334       1.0E-3     1           |      -3/1          0         0           
   0.999999           |       1/1         1.0E-6     0           0           |    1000/1001     -1.0E-3     2           |       1/1         1.0E-6     0           
  -0.999999           |      -1/1         1.0E-6     0           0           |   -1000/1001     -1.0E-3     2           |      -1/1         1.0E-6     0           
   1.000001           |       1/1        -1.0E-6     0           0           |    1001/1000      1.0E-3     1           |       1/1        -1.0E-6     0           
  -1.000001           |      -1/1        -1.0E-6     0           0           |   -1001/1000      1.0E-3     1           |      -1/1        -1.0E-6     0           
   0.50 (1/2)         |       1/2          0         1           1           |     999/1999     -5.0E-4     2           |       1/2          0         1           
   0.33... (1/3)      |       1/3          0         2           2           |     999/2998     -3.3E-4     2           |       1/3          0         1           
   0.67... (2/3)      |       2/3          0         2           2           |     999/1498      3.3E-4     3           |       2/3          0         2           
   0.25 (1/4)         |       1/4          0         3           3           |     999/3997     -2.5E-4     2           |       1/4          0         1           
   0.11... (1/9)      |       1/9          0         8           4           |     999/8992     -1.1E-4     2           |       1/9          0         1           
   0.09... (1/11)     |       1/11         0         10          5           |     999/10990    -9.1E-5     2           |       1/11         0         1           
   0.62... (307/499)  |       8/13        2.5E-4     5           5           |     913/1484     -2.2E-6     8           |       8/13        2.5E-4     5           
   0.14... (33/229)   |      15/104       8.7E-4     20          9           |     974/6759     -4.5E-6     6           |      16/111       2.7E-4     3           
   0.05... (33/683)   |       7/145      -8.4E-4     24          10          |     980/20283     1.5E-6     7           |      10/207      -1.5E-4     4           
   0.18... (100/541)  |      17/92       -3.3E-4     11          10          |     939/5080     -2.0E-6     8           |      17/92       -3.3E-4     4           
   0.06... (33/541)   |       5/82       -3.7E-4     19          8           |     995/16312    -1.9E-6     6           |       5/82       -3.7E-4     4           
   0.1                |       1/10         0         9           5           |     999/9991     -1.0E-4     2           |       1/10         0         1           
   0.2                |       1/5          0         4           3           |     999/4996     -2.0E-4     2           |       1/5          0         1           
   0.3                |       3/10         0         5           5           |     998/3327     -1.0E-4     4           |       3/10         0         3           
   0.4                |       2/5          0         3           3           |     999/2497      2.0E-4     3           |       2/5          0         2           
   0.5                |       1/2          0         1           1           |     999/1999     -5.0E-4     2           |       1/2          0         1           
   0.6                |       3/5          0         3           3           |    1000/1667     -2.0E-4     4           |       3/5          0         3           
   0.7                |       7/10         0         5           5           |     996/1423     -1.0E-4     4           |       7/10         0         3           
   0.8                |       4/5          0         4           3           |     997/1246      2.0E-4     3           |       4/5          0         2           
   0.9                |       9/10         0         9           5           |     998/1109     -1.0E-4     4           |       9/10         0         3           
   0.01               |       1/100        0         99          8           |     999/99901    -1.0E-5     2           |       1/100        0         1           
   0.001              |       1/1000       0         999         11          |     999/999001   -1.0E-6     2           |       1/1000       0         1           
   0.0001             |       1/9991      9.0E-4     9990        15          |     999/9990001  -1.0E-7     2           |       1/10000      0         1           
   1E-05              |       1/99901     9.9E-4     99900       18          |    1000/99999999  1.0E-8     3           |       1/99999     1.0E-5     1           
   0.33333333333      |       1/3         1.0E-11    2           2           |    1000/3001     -3.3E-4     2           |       1/3         1.0E-11    1           
   0.3                |       3/10         0         5           5           |     998/3327     -1.0E-4     4           |       3/10         0         3           
   0.33               |      30/91       -1.0E-3     32          8           |     991/3003      1.0E-5     3           |      33/100        0         2           
   0.333              |     167/502      -9.9E-4     169         11          |    1000/3003      1.0E-6     3           |     333/1000       0         2           
   0.7777             |       7/9         1.0E-4     5           4           |     997/1282     -1.1E-5     4           |       7/9         1.0E-4     3           
   0.101              |      10/99        1.0E-4     18          10          |     919/9099      1.1E-6     5           |      10/99        1.0E-4     3           
   0.10001            |       1/10       -1.0E-4     9           5           |       1/10       -1.0E-4     4           |       1/10       -1.0E-4     2           
   0.100000001        |       1/10       -1.0E-8     9           5           |    1000/9999      1.0E-4     3           |       1/10       -1.0E-8     2           
   0.001001           |       1/999       1.0E-6     998         11          |       1/999       1.0E-6     3           |       1/999       1.0E-6     1           
   0.0010000001       |       1/1000     -1.0E-7     999         11          |    1000/999999    9.0E-7     3           |       1/1000     -1.0E-7     2           
   0.11               |      10/91       -1.0E-3     18          9           |    1000/9091     -1.0E-5     4           |      10/91       -1.0E-3     2           
   0.1111             |       1/9         1.0E-4     8           4           |    1000/9001     -1.1E-5     2           |       1/9         1.0E-4     1           
   0.111111111111     |       1/9         1.0E-12    8           4           |    1000/9001     -1.1E-4     2           |       1/9         1.0E-12    1           
   1                  |       1/1          0         0           0           |    1001/1000      1.0E-3     1           |       1/1          0         0           
  -1                  |      -1/1          0         0           0           |   -1001/1000      1.0E-3     1           |      -1/1          0         0           
  -0.5                |      -1/2          0         1           1           |    -999/1999     -5.0E-4     2           |      -1/2          0         1           
   3.14               |      22/7         9.1E-4     6           4           |     964/307       2.1E-5     3           |      22/7         9.1E-4     1           
   3.1416             |      22/7         4.0E-4     6           4           |     732/233       9.8E-6     3           |      22/7         4.0E-4     1           
   3.14... (pi)       |      22/7         4.0E-4     6           4           |     688/219      -1.3E-5     4           |      22/7         4.0E-4     1           
   0.14               |       7/50         0         13          7           |     995/7107      2.0E-5     3           |       7/50         0         2           
   0.1416             |      15/106      -6.4E-4     21          8           |     869/6137      9.2E-7     5           |      16/113      -5.0E-5     2           
   2.72... (e)        |      68/25        6.3E-4     7           7           |     878/323      -5.7E-6     8           |      87/32        1.7E-4     5           
   0.141592653589793  |      15/106      -5.9E-4     21          8           |     991/6999     -7.0E-6     4           |      15/106      -5.9E-4     2           
  -1.33333333333333   |      -4/3         2.5E-15    2           2           |   -1001/751      -3.3E-4     2           |      -4/3         2.5E-15    1           
  -1.3                |     -13/10         0         5           5           |    -992/763       1.0E-4     3           |     -13/10         0         2           
  -1.33               |     -97/73       -9.3E-4     26          8           |    -935/703       1.1E-5     3           |    -133/100        0         2           
  -1.333              |      -4/3         2.5E-4     2           2           |   -1001/751      -8.3E-5     2           |      -4/3         2.5E-4     1           
  -1.33333337         |      -4/3        -2.7E-8     2           2           |    -999/749       3.3E-4     3           |      -4/3        -2.7E-8     2           
  -1.7                |     -17/10         0         5           5           |    -991/583      -1.0E-4     4           |     -17/10         0         3           
  -1.37               |     -37/27        2.7E-4     7           7           |    -996/727       1.0E-5     7           |     -37/27        2.7E-4     5           
  -1.33337            |      -4/3        -2.7E-5     2           2           |    -999/749       3.1E-4     3           |      -4/3        -2.7E-5     2           
   0.047619           |       1/21        1.0E-6     20          6           |    1000/21001    -4.7E-5     2           |       1/21        1.0E-6     1           
  12.125              |      97/8          0         7           4           |     982/81       -1.3E-4     2           |      97/8          0         1           
   5.5                |      11/2          0         1           1           |     995/181      -5.0E-4     2           |      11/2          0         1           
   0.1233333333333    |       9/73       -3.7E-4     16          8           |     971/7873     -3.4E-6     4           |       9/73       -3.7E-4     2           
   0.7454545454545    |      38/51       -4.8E-4     15          8           |     981/1316     -1.9E-5     6           |      38/51       -4.8E-4     4           
   0.01024801004      |       2/195       8.2E-4     98          9           |     488/47619     2.0E-8     13          |       2/195       8.2E-4     3           
   0.99011            |      91/92       -9.9E-4     91          8           |     801/809       1.3E-6     5           |     100/101      -1.1E-5     2           
   0.9901134545       |      91/92       -9.9E-4     91          8           |     601/607       1.9E-6     5           |     100/101      -1.5E-5     2           
   0.19999999         |       1/5         5.0E-8     4           3           |    1000/5001     -2.0E-4     2           |       1/5         5.0E-8     1           
   0.20000001         |       1/5        -5.0E-8     4           3           |    1000/4999      2.0E-4     3           |       1/5        -5.0E-8     2           
   5.0183168565E-05   |       1/19908     9.5E-4     19907       16          |    1000/19927001 -5.0E-8     2           |       1/19927     5.2E-12    1           
   3.909E-07          |       1/2555644   1.0E-3     2555643     23          |       1/1         2.6E6 (!)  1           |       1/2558199   1.1E-8     1           
88900003.001          |88900003/1        -1.1E-11    0           0           |88900004/1         1.1E-8     1           |88900003/1        -1.1E-11    0           
   0.26... (5/19)     |       5/19         0         7           6           |     996/3785     -5.3E-5     4           |       5/19         0         3           
   0.61... (37/61)    |      17/28        9.7E-4     8           7           |     982/1619     -1.7E-5     8           |      17/28        9.7E-4     5           
                      |                                                      |                                          | 
Accuracy: 1.0E-4      | Stern-Brocot                             OPTIMIZED   | Eppstein                                 | Richards                                 
Input                 | Result           Error       Iterations  Iterations  | Result           Error       Iterations  | Result           Error       Iterations  
======================| =====================================================| =========================================| =========================================
   0.62... (307/499)  |     227/369      -8.8E-5     33          11          |    9816/15955    -2.0E-7     8           |     299/486      -6.7E-6     6           
   0.05... (33/683)   |      23/476       6.4E-5     27          12          |    9989/206742    1.5E-7     7           |      23/476       6.4E-5     5           
   0.06... (33/541)   |      28/459       6.6E-5     24          12          |    9971/163464   -1.9E-7     6           |      33/541        0         5           
   1E-05              |       1/99991     9.0E-5     99990       18          |   10000/999999999 1.0E-9     3           |       1/99999     1.0E-5     1           
   0.333              |     303/910      -9.9E-5     305         12          |    9991/30003     1.0E-7     3           |     333/1000       0         2           
   0.7777             |     556/715      -1.0E-4     84          12          |    7777/10000      0         8           |    1109/1426     -1.8E-7     4           
   3.14... (pi)       |     289/92       -9.2E-5     19          8           |    9918/3157     -8.1E-7     4           |     333/106      -2.6E-5     2           
   2.72... (e)        |     193/71        1.0E-5     10          9           |    9620/3539      6.3E-8     11          |     193/71        1.0E-5     7           
   0.7454545454545    |      41/55        6.1E-14    16          8           |    9960/13361    -1.8E-6     6           |      41/55        6.1E-14    5           
   0.01024801004      |       7/683       8.7E-5     101         12          |    9253/902907   -1.3E-10    16          |       7/683       8.7E-5     5           
   0.99011            |     100/101      -1.1E-5     100         8           |     901/910      -1.1E-7     6           |     100/101      -1.1E-5     2           
   0.9901134545       |     100/101      -1.5E-5     100         8           |    8813/8901      1.6E-8     7           |     100/101      -1.5E-5     2           
   0.26... (5/19)     |       5/19         0         7           6           |    9996/37985    -5.3E-6     4           |       5/19         0         3           
   0.61... (37/61)    |      37/61         0         10          8           |    9973/16442    -1.6E-6     8           |      37/61         0         7           
</code></pre>

<p><strong>Performance comparison</strong></p>

<p>I performed detailed speed tests and plotted the results. Not looking at quality and only speed:</p>

<ul>
<li>The Stern-Brocot <strong>optimization</strong> slows it down by at most a factor 2, but the original Stern-Brocot can be hundreds or thousands times slower when it hits the unlucky values mentioned. That's still only a couple of microseconds though per call.</li>
<li><a href=""https://stackoverflow.com/a/42085412"">Richards</a> is consistently fast.</li>
<li><a href=""https://stackoverflow.com/a/32905992/344541"">Eppstein</a> is around 3 times slower than the others.</li>
</ul>

<p>Stern-Brocot and Richards compared:</p>

<ul>
<li>Both return nice fractions.</li>
<li>Richards often results in a smaller error. It is also a bit faster.</li>
<li>Stern-Brocot walks down the S-B tree. It finds the fraction of the lowest denominator that meets the required accuracy, then stops.</li>
</ul>

<p>If you do not require the lowest denominator fraction, Richards is a good choice.</p>
",Kay Zed,Community,1443776272,1487055002,1495539195
http://stackoverflow.com/a/32954565/96342,How to capture all scrolling events on a page without attaching an onscroll handler to every single container,28863,drcode,,1351800844,1517435587,0,https://stackoverflow.com/questions/13184779/how-to-capture-all-scrolling-events-on-a-page-without-attaching-an-onscroll-hand,"<p>The simplest way to detect all scroll events in modern browser would be using 'capturing' rather than 'bubbling' when attaching the event:</p>

<pre><code>window.addEventListener('scroll', function(){ code goes here }, true)
</code></pre>

<p>Unfortunately as I am aware there is no equivalent in older browser such as &lt;= IE8</p>
",Norman Xu,,1444066648,1444066648,0
http://stackoverflow.com/a/32955708/61158,ConcurrentHashMap crashing application compiled with JDK 8 but targeting JRE 7,6832,JRSofty,JRSofty,1444064815,1444070869,1444068817,https://stackoverflow.com/questions/32954041/concurrenthashmap-crashing-application-compiled-with-jdk-8-but-targeting-jre-7,"<p>If i compile your code with Java 8 and javac -source 1.7 -target 1.8 and then run it with Java 7 i get an </p>

<pre>
Exception in thread ""main"" java.lang.NoSuchMethodError:
  java.util.concurrent.ConcurrentHashMap.keySet()Ljava/util/concurrent/ConcurrentHashMap$KeySetView;
    at stackoverflowt.Test.processing(Test.java:20)
    at stackoverflowt.Test.main(Test.java:27)   
</pre>

<p>This is because the the byte code looks like </p>

<pre>
public void processing();
    Code:
       0: aload_0       
       1: getfield      #4                  // Field map:Ljava/util/concurrent/ConcurrentHashMap;
       4: invokevirtual #10                 // Method java/util/concurrent/ConcurrentHashMap.keySet:()Ljava/util/concurrent/ConcurrentHashMap$KeySetView;
       7: invokevirtual #11                 // Method java/util/concurrent/ConcurrentHashMap$KeySetView.iterator:()Ljava/util/Iterator;
      10: astore_1      
</pre>

<p>and referring explicitly to ConcurrentHashMap$KeySetView which is not present in Java 7. I am on Mac with Java 1.7.0_79 and 1.8.0_45</p>

<p>If you change the code to (only use the Map Interface):</p>

<pre><code>private Map&lt;String, Object&gt; map = new ConcurrentHashMap&lt;String, Object&gt;();
</code></pre>

<p>then it work's for me. Bytecode then looks like</p>

<pre>
public void processing();
    Code:
       0: aload_0       
       1: getfield      #4                  // Field map:Ljava/util/Map;
       4: invokeinterface #10,  1           // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
       9: invokeinterface #11,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      14: astore_1      
</pre>
",salyh,,1444070869,1444070869,0
http://stackoverflow.com/a/3297081/504611,403 Forbidden vs 401 Unauthorized HTTP responses,890055,VirtuosiMedia,MK-rou,1279696918,1562324871,1447766656,https://stackoverflow.com/questions/3297048/403-forbidden-vs-401-unauthorized-http-responses,"<p>See <a href=""https://tools.ietf.org/html/rfc2616#section-10.4.2"" rel=""noreferrer"">RFC2616</a>:</p>

<p>401 Unauthorized:</p>

<blockquote>
  <p>If the request already included Authorization credentials, then the 401 response indicates that authorization has been refused for those credentials.</p>
</blockquote>

<p>403 Forbidden:</p>

<blockquote>
  <p>The server understood the request, but is refusing to fulfill it.</p>
</blockquote>

<p><strong>Update</strong></p>

<p>From your use case, it appears that the user is not authenticated. I would return 401.</p>

<hr>

<p><em>Edit: <a href=""https://tools.ietf.org/html/rfc2616#section-10.4.2"" rel=""noreferrer"">RFC2616</a> is obsolete, see <a href=""https://tools.ietf.org/html/rfc7231#section-6.5.3"" rel=""noreferrer"">RFC7231</a> and <a href=""https://tools.ietf.org/html/rfc7235#section-3.1"" rel=""noreferrer"">RFC7235</a>.</em></p>
",Oded,StampyCode,1279697288,1502473007,1502473007
http://stackoverflow.com/a/32973351/2088273,How to get hosting Activity from a view?,74955,mAndroid,MonikaKumarJethani,1322287080,1555983637,1555983637,https://stackoverflow.com/questions/8276634/how-to-get-hosting-activity-from-a-view,"<p>I just pulled that source code from the MediaRouter in the <a href=""https://android.googlesource.com/platform/frameworks/support/+/refs/heads/marshmallow-release/v7/mediarouter/src/android/support/v7/app/MediaRouteButton.java#262"" rel=""noreferrer"">official support library</a> and so far it works fine:</p>

<pre><code>private Activity getActivity() {
    Context context = getContext();
    while (context instanceof ContextWrapper) {
        if (context instanceof Activity) {
            return (Activity)context;
        }
        context = ((ContextWrapper)context).getBaseContext();
    }
    return null;
}
</code></pre>
",Gomino,Vadim Kotov,1444143879,1550482540,1550482540
http://stackoverflow.com/a/33024310/172068,"session_start() issues regarding illegal characters, empty session ID and failed session",3854,Ryflex,Community,1443746189,1444561766,1495542899,https://stackoverflow.com/questions/32898857/session-start-issues-regarding-illegal-characters-empty-session-id-and-failed,"<p>@Ryflex, I've done a couple of tests on my server and concluded the following:</p>

<p><strong>The problem:</strong></p>

<p><code>session_start()</code> relies on <code>$_COOKIE[session_name()]</code>, so, if you edit the cookie value to something like <code>#$#$FDSFSR#""#""$""#$""</code> or simply empty it (not delete the cookie) and refresh a page with your code:</p>

<pre><code>if (!session_id()) {
    session_start();
}
</code></pre>

<p>The following warning is generated:</p>

<blockquote>
  <p>PHP Warning:  session_start(): The session id is too long or contains
  illegal characters, valid characters are a-z, A-Z, 0-9 and '-,' in
  /home/username/public_html/session_start.php on line 7</p>
</blockquote>

<p>This happens because <code>php</code> is checking if <code>session_id()</code> exists and, in fact, it exists, but contains illegal characters not allowed as <code>session_id</code> name.</p>

<p>A <strong>valid</strong> <code>session id</code> may contain <strong>only</strong> digits, letters A to Z (both upper and lower case), comma and dash (<code>[-,a-zA-Z0-9]</code>) between <strong>1</strong> and <strong>128</strong> characters.</p>

<hr>

<p><strong>My solution:</strong></p>

<p>Check if <code>$_COOKIE[session_name()]</code> is set and contains a valid <code>session_id</code> prior to <code>session_start()</code>, otherwise, delete the session cookie and only then  <code>session_start()</code>, something like:</p>

<pre><code>function safeSession() {
if (isset($_COOKIE[session_name()]) AND preg_match('/^[-,a-zA-Z0-9]{1,128}$/', $_COOKIE[session_name()])) {
        session_start();
    } elseif (isset($_COOKIE[session_name()])) {
        unset($_COOKIE[session_name()]);
        session_start(); 
    } else {
        session_start(); 
    }
}
</code></pre>

<p>start the session:   </p>

<pre><code>safeSession();
</code></pre>

<hr>

<p><strong>NOTES:</strong>  </p>

<p>1 - <code>session_name</code> is defined on your <code>php.ini</code> as <code>session.name = SOMETHING</code> (default is <code>PHPSESSID</code>), so, you may be looking for a cookie matching <code>session.name</code>. You can use the <code>session_name()</code> function to retrieve it.</p>

<p>2 - Session cookie manipulation can be used by hackers to dump information from your server (<code>username</code> and <code>path</code>) if <code>ini_set('display_errors', 1);</code> is set.</p>

<p>3 - <code>session_regenerate_id(true)</code> works but, because it checks the current <code>session_id</code> prior to assign a new one, generates warnings.</p>

<p>4 - I've tested the code with several invalid session names and no errors or warnings were generated, everything worked and intended.</p>

<hr>

<p><strong>References:</strong>  </p>

<p><a href=""https://github.com/php/php-src/blob/master/ext/session/session.c"" rel=""noreferrer"">session.c Source Code</a></p>
",Pedro Lobito,Pedro Lobito,1444332266,1444561766,1444561766
http://stackoverflow.com/a/3303361/280182,how do I convert a string to a valid variable name in python?,7999,George Profenza,Markus Meskanen,1279742370,1471328320,1471328320,https://stackoverflow.com/questions/3303312/how-do-i-convert-a-string-to-a-valid-variable-name-in-python,"<p><a href=""http://docs.python.org/reference/lexical_analysis.html#identifiers"" rel=""noreferrer"">According to Python</a>, an identifier is a letter or underscore, followed by an unlimited string of letters, numbers, and underscores:</p>

<pre><code>import re

def clean(s):

   # Remove invalid characters
   s = re.sub('[^0-9a-zA-Z_]', '', s)

   # Remove leading characters until we find a letter or underscore
   s = re.sub('^[^a-zA-Z_]+', '', s)

   return s
</code></pre>

<p>Use like this:</p>

<pre><code>&gt;&gt;&gt; clean(' 32v2 g #Gmw845h$W b53wi ')
'v2gGmw845hWb53wi'
</code></pre>
",Triptych,,1279742821,1279742821,0
http://stackoverflow.com/a/3305731/438386,how do I convert a string to a valid variable name in python?,7999,George Profenza,Markus Meskanen,1279742370,1471328320,1471328320,https://stackoverflow.com/questions/3303312/how-do-i-convert-a-string-to-a-valid-variable-name-in-python,"<p>Well, I'd like to best Triptych's solution with ... a one-liner!</p>

<pre><code>&gt;&gt;&gt; clean = lambda varStr: re.sub('\W|^(?=\d)','_', varStr)

&gt;&gt;&gt; clean('32v2 g #Gmw845h$W b53wi ')
'_32v2_g__Gmw845h_W_b53wi_'
</code></pre>

<p>This substitution replaces any non-variable appropriate character with underscore and inserts underscore in front if the string starts with a digit. IMO, 'name/with/slashes' looks better as variable name <code>name_with_slashes</code> than as <code>namewithslashes</code>.</p>
",Nas Banov,,1279771967,1279771967,0
http://stackoverflow.com/a/33171840/648955,How to get PID of process I&#39;ve just started within java program?,90259,raf,Dennis Meng,1295544640,1556044578,1387909820,https://stackoverflow.com/questions/4750470/how-to-get-pid-of-process-ive-just-started-within-java-program,"<p>In Unix System (Linux &amp; Mac)</p>

<pre><code> public static synchronized long getPidOfProcess(Process p) {
    long pid = -1;

    try {
      if (p.getClass().getName().equals(""java.lang.UNIXProcess"")) {
        Field f = p.getClass().getDeclaredField(""pid"");
        f.setAccessible(true);
        pid = f.getLong(p);
        f.setAccessible(false);
      }
    } catch (Exception e) {
      pid = -1;
    }
    return pid;
  }
</code></pre>
",LRBH10,LRBH10,1445002413,1482394911,1482394911
http://stackoverflow.com/a/3318993/148668,g++ duplicate symbol error when working with templates (noob question),3215,sa125,Will,1279894202,1374170710,1374170710,https://stackoverflow.com/questions/3318915/g-duplicate-symbol-error-when-working-with-templates-noob-question,"<p>Templated class member definition does not go to .cc / .cpp files.
They go in the .h, or in a .hpp / .hxx file included by the .h
The rational is that .cc / .cpp files are used to build objects files.
However, with templated code, objects cannot be created before templated arguments are substituted. Therefore, their implementation must be available to all pieces of code instantiating them: in a .h like file.</p>
",Scharron,,1279894694,1279894694,0
http://stackoverflow.com/a/33213279/1123654,How to test saving and restoring state of an android activity with Espresso?,2059,JojoCT,Community,1443900673,1445254252,1495535351,https://stackoverflow.com/questions/32926643/how-to-test-saving-and-restoring-state-of-an-android-activity-with-espresso,"<p>The solution is to use the <code>activity.recreate()</code> method BUT do not forget to follow this by an assertion which waits for an idle state.
My problem with my first attempt was that the test I was writing was like :</p>

<pre><code>instrumentation.runOnMainSync(new Runnable() {
    @Override
    public void run() {
        activity.recreate();
    }
});
assertThat(activityTestRule.getActivity().getXXX()).isNull();
</code></pre>

<p>Where <code>XXX</code> was a field that I expected to be null when no save/restore state handling had been implemented. But that was not the case because my assertion was not waiting for the recreation task to be completed.</p>

<p>So in my situation, my problem was solved when I simply add an espresso assertion which does the job, for example by verifiying that the TextView which displayed the <code>XXX</code> field was empty.</p>

<p>Finally, thanks to the UI thread synchronization provided by Espresso, my test which can assert on my activity save/restore state missing implementation can be written like :</p>

<pre><code>instrumentation.runOnMainSync(new Runnable() {
    @Override
    public void run() {
        activity.recreate();
    }
});
onView(withText(""a string depending on XXX value"")).check(doesNotExist());
</code></pre>

<p>Note that the rotation solution suggested does the job either, but can be much slower than <code>activity.recreate()</code> when we just want to test the activity lifecycle. And in my case it was not relevant since my activity was not implemented for a landscape orientation.</p>
",JojoCT,,1445254252,1445254252,0
http://stackoverflow.com/a/3322174/1199911,Is there a way to get rid of accents and convert a whole string to regular letters?,117080,Martin,Erick Robertson,1279917207,1560092784,1413128788,https://stackoverflow.com/questions/3322152/is-there-a-way-to-get-rid-of-accents-and-convert-a-whole-string-to-regular-lette,"<p><strong>Use <a href=""https://docs.oracle.com/javase/8/docs/api/index.html?java/text/Normalizer.html"" rel=""nofollow noreferrer""><code>java.text.Normalizer</code></a> to handle this for you.</strong></p>

<pre><code>string = Normalizer.normalize(string, Normalizer.Form.NFD);
// or Normalizer.Form.NFKD for a more ""compatable"" deconstruction 
</code></pre>

<p>This will separate all of the accent marks from the characters.  Then, you just need to compare each character against being a letter and throw out the ones that aren't.</p>

<pre><code>string = string.replaceAll(""[^\\p{ASCII}]"", """");
</code></pre>

<p>If your text is in unicode, you should use this instead:</p>

<pre><code>string = string.replaceAll(""\\p{M}"", """");
</code></pre>

<p>For unicode, <code>\\P{M}</code> matches the base glyph and <code>\\p{M}</code> (lowercase) matches each accent.</p>

<p>Thanks to GarretWilson for the pointer and <a href=""http://www.regular-expressions.info/unicode.html"" rel=""nofollow noreferrer"">regular-expressions.info</a> for the great unicode guide.</p>
",Erick Robertson,authchir,1279917482,1560092784,1560092784
http://stackoverflow.com/a/3322174/122441,Is there a way to get rid of accents and convert a whole string to regular letters?,117080,Martin,Erick Robertson,1279917207,1560092784,1413128788,https://stackoverflow.com/questions/3322152/is-there-a-way-to-get-rid-of-accents-and-convert-a-whole-string-to-regular-lette,"<p><strong>Use <a href=""https://docs.oracle.com/javase/8/docs/api/index.html?java/text/Normalizer.html"" rel=""nofollow noreferrer""><code>java.text.Normalizer</code></a> to handle this for you.</strong></p>

<pre><code>string = Normalizer.normalize(string, Normalizer.Form.NFD);
// or Normalizer.Form.NFKD for a more ""compatable"" deconstruction 
</code></pre>

<p>This will separate all of the accent marks from the characters.  Then, you just need to compare each character against being a letter and throw out the ones that aren't.</p>

<pre><code>string = string.replaceAll(""[^\\p{ASCII}]"", """");
</code></pre>

<p>If your text is in unicode, you should use this instead:</p>

<pre><code>string = string.replaceAll(""\\p{M}"", """");
</code></pre>

<p>For unicode, <code>\\P{M}</code> matches the base glyph and <code>\\p{M}</code> (lowercase) matches each accent.</p>

<p>Thanks to GarretWilson for the pointer and <a href=""http://www.regular-expressions.info/unicode.html"" rel=""nofollow noreferrer"">regular-expressions.info</a> for the great unicode guide.</p>
",Erick Robertson,authchir,1279917482,1560092784,1560092784
http://stackoverflow.com/a/3322174/1343587,Is there a way to get rid of accents and convert a whole string to regular letters?,117080,Martin,Erick Robertson,1279917207,1560092784,1413128788,https://stackoverflow.com/questions/3322152/is-there-a-way-to-get-rid-of-accents-and-convert-a-whole-string-to-regular-lette,"<p><strong>Use <a href=""https://docs.oracle.com/javase/8/docs/api/index.html?java/text/Normalizer.html"" rel=""nofollow noreferrer""><code>java.text.Normalizer</code></a> to handle this for you.</strong></p>

<pre><code>string = Normalizer.normalize(string, Normalizer.Form.NFD);
// or Normalizer.Form.NFKD for a more ""compatable"" deconstruction 
</code></pre>

<p>This will separate all of the accent marks from the characters.  Then, you just need to compare each character against being a letter and throw out the ones that aren't.</p>

<pre><code>string = string.replaceAll(""[^\\p{ASCII}]"", """");
</code></pre>

<p>If your text is in unicode, you should use this instead:</p>

<pre><code>string = string.replaceAll(""\\p{M}"", """");
</code></pre>

<p>For unicode, <code>\\P{M}</code> matches the base glyph and <code>\\p{M}</code> (lowercase) matches each accent.</p>

<p>Thanks to GarretWilson for the pointer and <a href=""http://www.regular-expressions.info/unicode.html"" rel=""nofollow noreferrer"">regular-expressions.info</a> for the great unicode guide.</p>
",Erick Robertson,authchir,1279917482,1560092784,1560092784
http://stackoverflow.com/a/33222983/3408572,How should I handle the update rect/region/area in a Direct2D application?,384,andlabs,,1444835581,1445285222,0,https://stackoverflow.com/questions/33129163/how-should-i-handle-the-update-rect-region-area-in-a-direct2d-application,"<p>Yes. Use <code>PushAxisAlignedClip</code> with <code>D2D1_ANTIALIAS_MODE_ALIASED</code>.</p>

<p>Call <code>ID2D1HwndRenderTarget::Resize</code> when the window is resized. Do pay attention to the HRESULT it returns. It can return <code>D2DERR_RECREATE_TARGET</code>, but you may not know that it can also return <code>D2DERR_DISPLAY_STATE_INVALID</code> (which can also be returned by <code>EndDraw</code>, btw). And yes, call <code>InvalidateRect(NULL)</code> after that.</p>

<p>I also recommend using <code>D2D1_PRESENT_OPTIONS_RETAIN_CONTENTS</code> because otherwise you'll run into nasty bugs on some stupid driver/hardware configurations and in other events. Don't ask me why -- it just doesn't behave well without this. You'll get bug reports that your whole rendering area just becomes filled with black. It took me months to figure out that all I had to do was to use that flag. I was never able to repro the problem locally.</p>
",Rick Brewster,,1445285222,1445285222,0
http://stackoverflow.com/a/33308014/188108,Django unique_together with nullable ForeignKey,5361,MatheusJardimB,Ivan,1445620045,1549519433,1445630952,https://stackoverflow.com/questions/33307892/django-unique-together-with-nullable-foreignkey,"<p><strong>UPDATE</strong>: previous version of my answer was functional but had bad design, this one takes in account some of the comments and other answers.</p>

<p>In SQL NULL does not equal NULL. This means if you have two objects where <code>field_d == None and field_c == ""somestring""</code> they are not equal, so you can create both.</p>

<p>You can override <code>Model.clean</code> to add your check:</p>

<pre><code>class ModelB(Model):
    #...
    def validate_unique(self, exclude=None):
        if ModelB.objects.exclude(id=self.id).filter(field_c=self.field_c, \
                                 field_d__isnull=True).exists():
            raise ValidationError(""Duplicate ModelB"")
        super(ModelB, self).validate_unique(exclude)
</code></pre>

<p>If used outside of forms you have to call <code>full_clean</code> or <code>validate_unique</code>.</p>

<p>Take care to handle the race condition though.</p>
",Ivan,Ivan,1445620543,1493046290,1493046290
http://stackoverflow.com/a/3333679/729729,"Editable DOM in HTML, like Google Docs",1159,Johan,,1280132886,1481002684,0,https://stackoverflow.com/questions/3333269/editable-dom-in-html-like-google-docs,"<p>It uses editing functionality built into all modern desktop browsers, accessed at document level via setting the <code>designMode</code> property of the document to ""on"", or at an element level by adding a <code>contenteditable</code> attribute with value ""true"" (also triggered by setting the <code>contentEditable</code> property of an element to the string ""true"").</p>

<p>A very common strategy for editing a piece of content in a web page is to include an iframe whose document has <code>designMode</code> turned on.</p>

<p>Coupled with this is <code>document.execCommand</code>, which in an editable document can be used to apply various kinds of formatting. For example:</p>

<pre><code> document.execCommand(""bold"", false, null);
</code></pre>

<p>... will toggle whether the selected text is bold. There is a pool of common commands between browsers but there are some discrepancies as to exactly how some are implemented. More info can be found <a href=""http://msdn.microsoft.com/en-us/library/ms533049%28VS.85%29.aspx"" rel=""nofollow noreferrer"">here at MSDN for IE</a> and <a href=""https://developer.mozilla.org/en/rich-text_editing_in_mozilla"" rel=""nofollow noreferrer"">here at MDC for Firefox</a>. Can't seem to find documentation for WebKit.</p>
",Tim Down,Tim Down,1280137092,1280146205,1280146205
http://stackoverflow.com/a/3348524/260761,What is the _snowman param in Ruby on Rails 3 forms for?,35709,Matthew Savage,Peter Mortensen,1278827132,1364011757,1357043202,https://stackoverflow.com/questions/3222013/what-is-the-snowman-param-in-ruby-on-rails-3-forms-for,"<p>This parameter was added to forms in order to force Internet Explorer (5, 6, 7 <em>and</em> 8) to encode its parameters as unicode.</p>

<p>Specifically, this bug can be triggered if the user switches the browser's encoding to Latin-1. To understand why a user would decide to do something seemingly so crazy, check out <a href=""http://www.google.com/search?sourceid=chrome&amp;ie=UTF-8&amp;q=diamond%20with%20a%20question%20mark%20in%20it"" rel=""noreferrer"">this google search</a>. Once the user has put the web-site into Latin-1 mode, if they use characters that can be understood as both Latin-1 and Unicode (for instance,  or , common in names), Internet Explorer will encode them in Latin-1.</p>

<p>This means that if a user searches for ""Ch Guevara"", it will come through incorrectly on the server-side. In Ruby 1.9, this will result in an encoding error when the text inevitably makes its way into the regular expression engine. In Ruby 1.8, it will result in broken results for the user.</p>

<p>By creating a parameter that can only be understood by IE as a unicode character, we are forcing IE to look at the accept-charset attribute, which then tells it to encode all of the characters as UTF-8, even ones that can be encoded in Latin-1.</p>

<p>Keep in mind that in Ruby 1.8, it is extremely trivial to get Latin-1 data into your UTF-8 database (since <em>nothing</em> in the entire stack checks that the bytes that the user sent at any point are valid UTF-8 characters). As a result, it's extremely common for Ruby applications (and PHP applications, etc. etc.) to exhibit this user-facing bug, and therefore extremely common for users to try to change the encoding as a palliative measure.</p>

<p>All that said, when I wrote this patch, I didn't realize that the name of the parameter would ever appear in a user-facing place (it does with forms that use the GET action, such as search forms). Since it does, we will rename this parameter to <code>_e</code>, and use a more innocuous-looking unicode character.</p>
",Yehuda Katz,Andrew Marshall,1280269616,1364011757,1364011757
http://stackoverflow.com/a/3348664/199166,CSV file written with Python has blank lines between each row,196979,l--&#39;&#39;&#39;&#39;&#39;&#39;---------&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;,martineau,1280268882,1555660234,1544137174,https://stackoverflow.com/questions/3348460/csv-file-written-with-python-has-blank-lines-between-each-row,"<p>In Python 2, open <code>outfile</code> with mode <code>'wb'</code> instead of <code>'w'</code>.  The <code>csv.writer</code> writes <code>\r\n</code> into the file directly.  If you don't open the file in <em>binary</em> mode, it will write <code>\r\r\n</code> because on Windows <em>text</em> mode will translate each <code>\n</code> into <code>\r\n</code>.</p>

<p>In Python 3 the required syntax changed, so open <code>outfile</code> with the additional parameter <code>newline=''</code> instead.</p>

<h3>Examples:</h3>

<pre><code># Python 2
with open('/pythonwork/thefile_subset11.csv', 'wb') as outfile:
    writer = csv.writer(outfile)

# Python 3
with open('/pythonwork/thefile_subset11.csv', 'w', newline='') as outfile:
    writer = csv.writer(outfile)
</code></pre>

<h3>Documentation Links</h3>

<ul>
<li><a href=""https://docs.python.org/2/library/csv.html#csv.writer"" rel=""noreferrer"">https://docs.python.org/2/library/csv.html#csv.writer</a></li>
<li><a href=""https://docs.python.org/3/library/csv.html#csv.writer"" rel=""noreferrer"">https://docs.python.org/3/library/csv.html#csv.writer</a></li>
</ul>
",Mark Tolonen,Mark Tolonen,1280271315,1405352931,1405352931
http://stackoverflow.com/a/33515264/374865,Create and import helper functions in tests without creating packages in test directory using py.test,9297,Juan Carlos Coto,Juan Carlos Coto,1446581049,1546950115,1447470542,https://stackoverflow.com/questions/33508060/create-and-import-helper-functions-in-tests-without-creating-packages-in-test-di,"<p>my option is to create an extra dir in <code>tests</code> dir and add it to pythonpath in the conftest so.</p>

<pre><code>tests/
    helpers/
      utils.py
      ...
    conftest.py
setup.cfg
</code></pre>

<p>in the <code>conftest.py</code></p>

<pre><code>import sys
import os
sys.path.append(os.path.join(os.path.dirname(__file__), 'helpers'))
</code></pre>

<p>in <code>setup.cfg</code></p>

<pre><code>[pytest]
norecursedirs=tests/helpers
</code></pre>

<p>this module will be available with <code>import utils</code>, only be careful to name clashing.</p>
",sax,A. Sarid,1446619294,1546950115,1546950115
http://stackoverflow.com/a/33541885/841108,keyboard events on [non-] contenteditable HTML5 elements,1335,Basile Starynkevitch,Community,1446713360,1532090602,1495540339,https://stackoverflow.com/questions/33540051/keyboard-events-on-non-contenteditable-html5-elements,"<p>This snippet could be what you are looking for, making <code>span.momitemref_cl</code> elements focusable but not tabbable and setting has <code>contenteditable</code>. But as i'm testing it on chrome, <code>contenteditable</code> inside any container with attribute <code>contenteditable</code> set to <code>true</code>, don't fire any keyboard event. So the trick could be on focus to set any container to not editable (and switch back on blur).</p>

<p>See e.g: <em>(keypress and keydown events are both binded to handle some specific cases where keypress or keydown wouldn't be fired on specifc keys)</em></p>

<p><strong>NOTE:</strong> <em>has you seem to populate DIV with content dynamically, you could delegate it or bind event (&amp; set tabindex attribute if changing it in HTML markup not a solution) once ajax request has completed.</em></p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>$('#microedit_id .momitemref_cl').attr('tabindex', -1).prop('contenteditable', true).on('focusin focusout', function(e) {
  $(this).parents('[contenteditable]').prop('contenteditable', e.type === ""focusout"");
}).on('keypress keydown paste cut', function(e) {
  if (/[a-zA-Z0-9 ]/.test(String.fromCharCode(e.which))) return;
  return false;
});</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js""&gt;&lt;/script&gt;
&lt;h1&gt;Micro Editing Monimelt&lt;/h1&gt;

&lt;div id='microedit_id' contenteditable='true'&gt;
  &lt;dd class='statval_cl' data-forattr='notice'&gt;&amp;#9653; &lt;span class='momnode_cl'&gt;*&lt;span class='momconn_cl'&gt;
    &lt;span class='momitemref_cl'&gt;comment&lt;/span&gt;&lt;/span&gt;(&amp;#8220;&lt;span class='momstring_cl'&gt;some simple notice&lt;/span&gt;&amp;#8221; &lt;span class='momnode_cl'&gt;*&lt;span class='momconn_cl'&gt;
     &lt;span class='momitemref_cl'&gt;web_state&lt;/span&gt;&lt;/span&gt;(&lt;span class='momnumber_cl'&gt;2&lt;/span&gt;)&lt;/span&gt; &lt;span class='momitemval_cl'&gt;hashset&lt;/span&gt;
    &lt;span class='momset_cl'&gt;{&lt;span class='momitemref_cl'&gt;microedit&lt;/span&gt;
    &lt;span class='momitemref_cl'&gt;the_agenda&lt;/span&gt;}&lt;/span&gt; &lt;span class='momtuple_cl'&gt;[&lt;span class='momitemref_cl'&gt;web_session&lt;/span&gt;
    &lt;span class='momitemref_cl empty_cl'&gt;~&lt;/span&gt;
    &lt;span class='momitemref_cl'&gt;the_system&lt;/span&gt;]&lt;/span&gt;)&lt;/span&gt;;&lt;/dd&gt;
&lt;/div&gt;
&lt;hr/&gt;</code></pre>
</div>
</div>
</p>
",A. Wolff,A. Wolff,1446718503,1446719576,1446719576
http://stackoverflow.com/a/33542403/379593,Store output of subprocess.Popen call in a string,366842,Mark,Community,1269371101,1505252889,1495541426,https://stackoverflow.com/questions/2502833/store-output-of-subprocess-popen-call-in-a-string,"<p>This was perfect for me. 
You will get the return code, stdout and stderr in a tuple.</p>

<pre><code>from subprocess import Popen, PIPE

def console(cmd):
    p = Popen(cmd, shell=True, stdout=PIPE)
    out, err = p.communicate()
    return (p.returncode, out, err)
</code></pre>

<p>For Example:</p>

<pre><code>result = console('ls -l')
print 'returncode: %s' % result[0]
print 'output: %s' % result[1]
print 'error: %s' % result[2]
</code></pre>
",gravmatt,,1446719901,1446719901,0
http://stackoverflow.com/a/33697621/3238938,Toolbar icon tinting on Android,25763,natario,Community,1422547371,1559293249,1495541889,https://stackoverflow.com/questions/28219178/toolbar-icon-tinting-on-android,"<p>Here is the solution that I use. Call tintAllIcons after onPrepareOptionsMenu or the equivalent location. The reason for mutate() is if you happen to use the icons in more than one location; without the mutate, they will all take on the same tint.</p>

<pre><code>public class MenuTintUtils {
    public static void tintAllIcons(Menu menu, final int color) {
        for (int i = 0; i &lt; menu.size(); ++i) {
            final MenuItem item = menu.getItem(i);
            tintMenuItemIcon(color, item);
            tintShareIconIfPresent(color, item);
        }
    }

    private static void tintMenuItemIcon(int color, MenuItem item) {
        final Drawable drawable = item.getIcon();
        if (drawable != null) {
            final Drawable wrapped = DrawableCompat.wrap(drawable);
            drawable.mutate();
            DrawableCompat.setTint(wrapped, color);
            item.setIcon(drawable);
        }
    }

    private static void tintShareIconIfPresent(int color, MenuItem item) {
        if (item.getActionView() != null) {
            final View actionView = item.getActionView();
            final View expandActivitiesButton = actionView.findViewById(R.id.expand_activities_button);
            if (expandActivitiesButton != null) {
                final ImageView image = (ImageView) expandActivitiesButton.findViewById(R.id.image);
                if (image != null) {
                    final Drawable drawable = image.getDrawable();
                    final Drawable wrapped = DrawableCompat.wrap(drawable);
                    drawable.mutate();
                    DrawableCompat.setTint(wrapped, color);
                    image.setImageDrawable(drawable);
                }
            }
        }
    }
}
</code></pre>

<p>This won't take care of the overflow, but for that, you can do this:</p>

<p>Layout:</p>

<pre><code>&lt;android.support.v7.widget.Toolbar
    ...
    android:theme=""@style/myToolbarTheme"" /&gt;
</code></pre>

<p>Styles:</p>

<pre><code>&lt;style name=""myToolbarTheme""&gt;
        &lt;item name=""colorControlNormal""&gt;#FF0000&lt;/item&gt;
&lt;/style&gt;
</code></pre>

<p>This works as of appcompat v23.1.0.</p>
",Learn OpenGL ES,Learn OpenGL ES,1447432765,1447433169,1447433169
http://stackoverflow.com/a/33712110/1070215,Jackson JSON gives exception on collection of nested class,7263,Piero dS,Piero dS,1447493897,1447527376,1447512228,https://stackoverflow.com/questions/33707023/jackson-json-gives-exception-on-collection-of-nested-class,"<p>Looks like the recognition of non-static inner classes is done where they are properties directly on their containing bean (<code>BeanDeserializerBase.java</code> line 476 in 2.6.3). So an intervening Collection deserializer would go past that. A custom deserializer is likely the simplest option here.</p>

<p>Note that you can still use Jackson to read the properties of <code>Nested</code>, and just implement the construction of it yourself, in a custom deserializer <em>only</em> used when deserializing a list of <code>Nested</code> objects.</p>

<p>To do this, annotate the list like so:</p>

<pre><code>    @JsonDeserialize(contentUsing = NestedDeserializer.class)
    public List&lt;Nested&gt; nestedList;
</code></pre>

<p>and then use a custom deserializer that will:</p>

<ol>
<li><p>Look at the parsing context when called to find the containing <code>MyClass</code> instance.</p></li>
<li><p>Encapsulate a default/root-level deserializer of <code>Nested</code> to delegate the work of deserializing the content to.</p></li>
</ol>

<p>For example:</p>

<pre><code>public static final class NestedDeserializer extends StdDeserializer&lt;MyClass.Nested&gt;
    implements ResolvableDeserializer {
  private JsonDeserializer&lt;Object&gt; underlyingDeserializer;

  public NestedDeserializer() {
    super(MyClass.Nested.class);
  }

  @Override
  public void resolve(DeserializationContext ctxt) throws JsonMappingException {
    underlyingDeserializer = ctxt
        .findRootValueDeserializer(ctxt.getTypeFactory().constructType(MyClass.Nested.class));
  }

  @Override
  public Nested deserialize(JsonParser p, DeserializationContext ctxt)
      throws IOException, JsonProcessingException {
    JsonStreamContext ourContext = p.getParsingContext();
    JsonStreamContext listContext = ourContext.getParent();
    JsonStreamContext containerContext = listContext.getParent();
    MyClass container = (MyClass) containerContext.getCurrentValue();
    MyClass.Nested value = container.new Nested();
    // note use of three-argument deserialize method to specify instance to populate
    underlyingDeserializer.deserialize(p, ctxt, value);
    return value;
  }
}
</code></pre>
",araqnid,,1447527376,1447527376,0
http://stackoverflow.com/a/33755176/1694896,How to compile boost unit test module with clang++?,667,josch,josch,1441702523,1447758816,1441703596,https://stackoverflow.com/questions/32453386/how-to-compile-boost-unit-test-module-with-clang,"<p>In Ubuntu Willy, Boost 1.58 Unit Test library is compiled with GCC 5.0. The library file <code>libboost_unit_test_framework.a</code> contains the mangled function <code>_ZN5boost9unit_test9ut_detail24normalize_test_case_nameB5cxx11ENS0_13basic_cstringIKcEE</code> that resolves to <code>boost::unit_test::ut_detail::normalize_test_case_name[abi:cxx11](boost::unit_test::basic_cstring&lt;char const&gt;)</code></p>

<p>However, CLang does not seem to use the new ABI, so it searches for <code>_ZN5boost9unit_test9ut_detail24normalize_test_case_nameENS0_13basic_cstringIKcEE</code>, which is <code>boost::unit_test::ut_detail::normalize_test_case_name(boost::unit_test::basic_cstring&lt;char const&gt;)</code>.</p>

<p>In order to overcome this, define your own function in the test file:</p>

<pre><code>namespace boost { namespace unit_test { namespace ut_detail {
    std::string normalize_test_case_name(const_string name) {
        return ( name[0] == '&amp;' ? std::string(name.begin()+1, name.size()-1) : std::string(name.begin(), name.size() ));
    }
}}}
</code></pre>

<p>This should resolve the issue. If compiled with the same version of the compiler as Boost, it should be no problem, as the linker will simply ignore the library version of the  function.</p>
",Maciek D.,Maciek D.,1447757850,1447758816,1447758816
http://stackoverflow.com/a/337971/2066546,How to log something in Rails in an independent log file?,67908,akshat,,1228321452,1495681243,0,https://stackoverflow.com/questions/337739/how-to-log-something-in-rails-in-an-independent-log-file,"<p>You can create a Logger object yourself from inside any model. Just pass the file name to the constructor and use the object like the usual Rails <code>logger</code>:</p>

<pre><code>class User &lt; ActiveRecord::Base
  def my_logger
    @@my_logger ||= Logger.new(""#{Rails.root}/log/my.log"")
  end

  def before_save
    my_logger.info(""Creating user with name #{self.name}"")
  end
end
</code></pre>

<p>Here I used a class attribute to memoize the logger. This way it won't be created for every single User object that gets created, but you aren't required to do that. Remember also that you can inject the <code>my_logger</code> method directly into the <code>ActiveRecord::Base</code> class (or into some superclass of your own if you don't like to monkey patch too much) to share the code between your app's models.</p>
",Thiago Arrais,Thiago Arrais,1228324892,1312827082,1312827082
http://stackoverflow.com/a/33828321/1866775,generate new type from container having same container type but different value_type,87,Tobias Hermann,,1448026890,1448035503,0,https://stackoverflow.com/questions/33828172/generate-new-type-from-container-having-same-container-type-but-different-value,"<p>Some template template parameter twiddling later...</p>

<pre><code>template &lt;class T, class NewP&gt;
struct SameContNewT;

template &lt;template &lt;class...&gt; class T, class... TPs, class NewP&gt;
struct SameContNewT&lt;T&lt;TPs...&gt;, NewP&gt; {
    using type = T&lt;NewP&gt;;
};
</code></pre>

<p><a href=""http://coliru.stacked-crooked.com/a/9daff57394fc9bdc"" rel=""nofollow"">Live on Coliru</a></p>

<p>This does throw away all template arguments of the original type, such as allocators for standard containers. Something more involved would be needed for these, since you can't reuse <code>T</code>'s allocator, which is most probably <code>std::allocator&lt;typename T::value_type&gt;</code> and is not fit for allocating <code>NewT</code>'s.</p>
",Quentin,Quentin,1448027310,1448027895,1448027895
http://stackoverflow.com/a/33851951/2245623,Reference invalidation after applying reverse_iterator on a custom made iterator,385,Herbert,Herbert,1424298076,1448170320,1424299079,https://stackoverflow.com/questions/28595084/reference-invalidation-after-applying-reverse-iterator-on-a-custom-made-iterator,"<p>As has been mentioned, the C++03 and C++14 standards define <code>reverse_iterator::operator*</code> in this way:</p>

<blockquote>
  <p>24.5.1.3.4 <code>operator*</code> [reverse.iter.op.star]</p>
  
  <p><code>reference operator*() const;</code></p>
  
  <p>1 Effects:</p>
</blockquote>

<pre><code>Iterator tmp = current;
return *--tmp;
</code></pre>

<p><code>tmp</code> is destroyed after <code>operator*</code> returns, so any references to data stored inside of <code>tmp</code> will become invalid. The C++11 standard changed this and added a note:</p>

<blockquote>
  <p>24.5.1.3.4 <code>operator*</code> [reverse.iter.op.star]</p>
  
  <p><code>reference operator*() const;</code></p>
  
  <p>1 Effects:</p>
</blockquote>

<pre><code>deref_tmp = current;
--deref_tmp;
return *deref_tmp;
</code></pre>

<blockquote>
  <p>2 [ Note: This operation must use an auxiliary member variable rather than
  a temporary variable to avoid returning a reference that persists beyond
  the lifetime of its associated iterator. (See 24.2.) end note ]</p>
</blockquote>

<p>This is actually impossible to implement because of the <code>const</code> qualifier on <code>operator*</code>, so the wording was reverted between C++11 and C++14.</p>

<p>The best solution is probably to just implement your own version of <code>reverse_iterator</code> based on the C++11 wording for whatever version of C++ you are targeting. Fortunately, the specification is very straightforward and easy to follow. As a working example, here's one I wrote for C++14:</p>

<pre><code>template &lt;class Iterator&gt;
class stashing_reverse_iterator :
  public std::iterator&lt;
    typename std::iterator_traits&lt;Iterator&gt;::iterator_category,
    typename std::iterator_traits&lt;Iterator&gt;::value_type,
    typename std::iterator_traits&lt;Iterator&gt;::difference_type,
    typename std::iterator_traits&lt;Iterator&gt;::pointer,
    typename std::iterator_traits&lt;Iterator&gt;::reference
  &gt; {
  typedef std::iterator_traits&lt;Iterator&gt; traits_type;
public:
  typedef Iterator iterator_type;
  typedef typename traits_type::difference_type difference_type;
  typedef typename traits_type::reference       reference;
  typedef typename traits_type::pointer         pointer;

  stashing_reverse_iterator() : current() {}

  explicit stashing_reverse_iterator(Iterator x) : current(x) {}

  template &lt;class U&gt;
  stashing_reverse_iterator(const stashing_reverse_iterator&lt;U&gt;&amp; u) : current(u.current) {}

  template &lt;class U&gt;
  stashing_reverse_iterator&amp; operator=(const stashing_reverse_iterator&lt;U&gt;&amp; u) {
    current = u.base();
    return *this;
  }

  Iterator base() const {
    return current;
  }

  // Differs from reverse_iterator::operator*:
  // 1. const qualifier removed
  // 2. current iterator is stored in a member field to ensure references are
  //    always valid after this function returns
  reference operator*() {
    deref_tmp = current;
    --deref_tmp;
    return *deref_tmp;
  }

  pointer operator-&gt;() const {
    return std::addressof(operator*());
  }

  stashing_reverse_iterator&amp; operator++() {
    --current;
    return *this;
  }

 stashing_reverse_iterator operator++(int) {
    stashing_reverse_iterator tmp = *this;
    --current;
    return tmp;
  }

  stashing_reverse_iterator&amp; operator--() {
    ++current;
    return *this;
  }

  stashing_reverse_iterator operator--(int) {
    stashing_reverse_iterator tmp = *this;
    ++current;
    return tmp;
  }

  stashing_reverse_iterator  operator+ (difference_type n) const {
    return stashing_reverse_iterator(current - n);
  }

  stashing_reverse_iterator&amp; operator+=(difference_type n) {
    current -= n;
    return *this;
  }

  stashing_reverse_iterator  operator- (difference_type n) const {
    return stashing_reverse_iterator(current + n);
  }

  stashing_reverse_iterator&amp; operator-=(difference_type n) {
    current += n;
    return *this;
  }

  // Differs from reverse_iterator::operator[]:
  // 1. const qualifier removed because this function makes use of operator*
  reference operator[](difference_type n) {
    return *(*this + n);
  }

protected:
  Iterator current;
private:
  Iterator deref_tmp;
};

template &lt;class Iterator1, class Iterator2&gt;
bool operator==(
  const stashing_reverse_iterator&lt;Iterator1&gt;&amp; x,
  const stashing_reverse_iterator&lt;Iterator2&gt;&amp; y)
{ return x.base() == y.base(); }

template &lt;class Iterator1, class Iterator2&gt;
bool operator&lt;(
  const stashing_reverse_iterator&lt;Iterator1&gt;&amp; x,
  const stashing_reverse_iterator&lt;Iterator2&gt;&amp; y)
{ return x.base() &gt; y.base(); }

template &lt;class Iterator1, class Iterator2&gt;
bool operator!=(
  const stashing_reverse_iterator&lt;Iterator1&gt;&amp; x,
  const stashing_reverse_iterator&lt;Iterator2&gt;&amp; y)
{ return !(x.base() == y.base()); }

template &lt;class Iterator1, class Iterator2&gt;
bool operator&gt;(
  const stashing_reverse_iterator&lt;Iterator1&gt;&amp; x,
  const stashing_reverse_iterator&lt;Iterator2&gt;&amp; y)
{ return x.base() &lt; y.base(); }

template &lt;class Iterator1, class Iterator2&gt;
bool operator&gt;=(
  const stashing_reverse_iterator&lt;Iterator1&gt;&amp; x,
  const stashing_reverse_iterator&lt;Iterator2&gt;&amp; y)
{ return x.base() &lt;= y.base(); }

template &lt;class Iterator1, class Iterator2&gt;
bool operator&lt;=(
  const stashing_reverse_iterator&lt;Iterator1&gt;&amp; x,
  const stashing_reverse_iterator&lt;Iterator2&gt;&amp; y)
{ return x.base() &gt;= y.base(); }

template &lt;class Iterator1, class Iterator2&gt;
auto operator-(
  const stashing_reverse_iterator&lt;Iterator1&gt;&amp; x,
  const stashing_reverse_iterator&lt;Iterator2&gt;&amp; y) -&gt; decltype(y.base() - x.base())
{ return y.base() - x.base(); }

template &lt;class Iterator&gt;
stashing_reverse_iterator&lt;Iterator&gt; operator+(
  typename stashing_reverse_iterator&lt;Iterator&gt;::difference_type n,
  const stashing_reverse_iterator&lt;Iterator&gt;&amp; x)
{ return stashing_reverse_iterator&lt;Iterator&gt;(x.base() - n); }

template &lt;class Iterator&gt;
stashing_reverse_iterator&lt;Iterator&gt; make_stashing_reverse_iterator(Iterator i)
{ return stashing_reverse_iterator&lt;Iterator&gt;(i); }
</code></pre>

<p>Usage is the same as <code>reverse_iterator</code>:</p>

<pre><code>// prints 5,4,3,2,1, for a sanely implemented number_iterator
std::copy(
  make_stashing_reverse_iterator(number_iterator(5)),
  make_stashing_reverse_iterator(number_iterator(0)),
  std::ostream_iterator&lt;int&gt;(std::cout, "",""));
</code></pre>
",J.C. Moyer,,1448170320,1448170320,0
http://stackoverflow.com/a/33858649/64911,"Search only for single value of Solr multivalue field, not across the values",1096,mlissner,,1447977268,1453873711,0,https://stackoverflow.com/questions/33816576/search-only-for-single-value-of-solr-multivalue-field-not-across-the-values,"<p><a href=""https://cwiki.apache.org/confluence/display/solr/Other+Parsers#OtherParsers-SurroundQueryParser"" rel=""nofollow"">SurroundQueryParser</a> is your best bet for figuring out whether two terms are in the same value of a multiValued field.. The multivalued fields are actually internally one long set of tokens but with a big gap between tokens that belong to different ""values"". That's controlled by positionIncrementGap parameter in schema.xml, and is usually 100. So, setting the maximum gap to below 100 would require both terms to be within one field value. </p>
",Alexandre Rafalovitch,,1448217715,1448217715,0
http://stackoverflow.com/a/3387975/438249,How to &quot;perfectly&quot; override a dict?,91494,Paul Biggar,Bonifacio2,1280751808,1517149428,1517149428,https://stackoverflow.com/questions/3387691/how-to-perfectly-override-a-dict,"<p>You can write an object that behaves like a dict quite easily with <a href=""http://docs.python.org/library/abc.html"" rel=""noreferrer"">ABC</a>s
(Abstract Base Classes) from the <a href=""http://docs.python.org/2/library/collections.html"" rel=""noreferrer"">collections</a> module.  It even tells you
if you missed a method, so below is the minimal version that shuts the ABC up.</p>

<pre><code>import collections


class TransformedDict(collections.MutableMapping):
    """"""A dictionary that applies an arbitrary key-altering
       function before accessing the keys""""""

    def __init__(self, *args, **kwargs):
        self.store = dict()
        self.update(dict(*args, **kwargs))  # use the free update to set keys

    def __getitem__(self, key):
        return self.store[self.__keytransform__(key)]

    def __setitem__(self, key, value):
        self.store[self.__keytransform__(key)] = value

    def __delitem__(self, key):
        del self.store[self.__keytransform__(key)]

    def __iter__(self):
        return iter(self.store)

    def __len__(self):
        return len(self.store)

    def __keytransform__(self, key):
        return key
</code></pre>

<p>You get a few free methods from the ABC:</p>

<pre><code>class MyTransformedDict(TransformedDict):

    def __keytransform__(self, key):
        return key.lower()


s = MyTransformedDict([('Test', 'test')])

assert s.get('TEST') is s['test']   # free get
assert 'TeSt' in s                  # free __contains__
                                    # free setdefault, __eq__, and so on

import pickle
assert pickle.loads(pickle.dumps(s)) == s
                                    # works too since we just use a normal dict
</code></pre>

<p>I wouldn't subclass <code>dict</code> (or other builtins) directly. It often makes no sense, because what you actually want to do is <em>implement the interface of a dict</em>. And that is exactly what ABCs are for.</p>
",Jochen Ritzel,Alois Mahdal,1280754025,1380714288,1380714288
http://stackoverflow.com/a/33911936/841108,contenteditable with nested span. Who has the focus?,530,Basile Starynkevitch,Community,1448378984,1448517560,1495541242,https://stackoverflow.com/questions/33897603/contenteditable-with-nested-span-who-has-the-focus,"<p>To make any element focusable, not only interactive content ones, you have to set <a href=""http://www.w3.org/WAI/UA/TS/html401/cp0101/0101-TABINDEX.html"" rel=""nofollow"">tabindex attribute</a>.</p>

<p>In your sample, it would be:</p>

<pre><code>&lt;div id='myeditdiv' contenteditable='true'&gt;
  &lt;span class='foo_cl' tabindex=""-1""&gt;FOO&lt;span class='bar_cl' tabindex=""-1""&gt;bar&lt;/span&lt;/span&gt;
&lt;/div&gt;
</code></pre>

<p><strong><em>Note:</em></strong> negative <code>tabindex</code> makes element focusable <strong>but</strong> not tabbable because using tabbing method would start at <code>0</code> using absolute value (<a href=""http://www.w3.org/TR/WD-forms-970402"" rel=""nofollow"">spec</a>).</p>

<p>Now in jQuery, you could delegate <code>focus</code> event to these elements:</p>

<pre><code>$('[contenteditable]').on('focus', '*', function(e){
    e.stopPropagation();
    console.log(this);
});
</code></pre>

<p><a href=""http://jsfiddle.net/rex7dwc2/1/"" rel=""nofollow"">-jsFiddle-</a></p>

<p>As a side note, jQuery UI has a <code>:focusable</code> pseudo selector. If you wish to dynamically set <code>tabindex</code> attribute to not focusable elements, you could use:</p>

<pre><code>$('[contenteditable]').find(':not(:focusable)').attr('tabindex', -1);
</code></pre>

<p><a href=""http://jsfiddle.net/rex7dwc2/2/"" rel=""nofollow"">-jsFiddle (including jQuery UI)-</a></p>

<p>If you don't want to include jQuery UI just to get <code>:focusable</code> pseudo selector, you can create your own custom selector:</p>

<pre><code>//include IIFE if not already including jQuery UI
(function () {
    function focusable(element, isTabIndexNotNaN) {
        var map, mapName, img,
        nodeName = element.nodeName.toLowerCase();
        if (""area"" === nodeName) {
            map = element.parentNode;
            mapName = map.name;
            if (!element.href || !mapName || map.nodeName.toLowerCase() !== ""map"") {
                return false;
            }
            img = $(""img[usemap='#"" + mapName + ""']"")[0];
            return !!img &amp;&amp; $(img).is(':visible');
        }
        return (/^(input|select|textarea|button|object)$/.test(nodeName) ? !element.disabled :
            ""a"" === nodeName ? element.href || isTabIndexNotNaN : isTabIndexNotNaN) &amp;&amp;
        // the element and all of its ancestors must be visible
        $(element).is(':visible');
    }
    $.extend($.expr["":""], {
        focusable: function (element) {
            return focusable(element, !isNaN($.attr(element, ""tabindex"")));
        }
    });
})();
</code></pre>

<p><a href=""http://jsfiddle.net/rex7dwc2/3/"" rel=""nofollow"">-jsFiddle-</a></p>
",A. Wolff,A. Wolff,1448441218,1448442370,1448442370
http://stackoverflow.com/a/33961706/504611,picasso: how to cancel all image requests made in an adapter,7759,terry,,1406061753,1490215072,0,https://stackoverflow.com/questions/24897441/picasso-how-to-cancel-all-image-requests-made-in-an-adapter,"<p>This answer may come a bit late, but maybe someone still needs it...</p>

<p>Define a <code>ViewHolder</code> which provides a cleanup method:</p>

<pre><code>static class ImageHolder extends RecyclerView.ViewHolder {
    public final ImageView image;

    public ImageHolder(final View itemView) {
        super(itemView);
        image = (ImageView) itemView.findViewById(R.id.image);
    }

    public void cleanup() {
        Picasso.with(image.getContext())
            .cancelRequest(image);
        image.setImageDrawable(null);
    }
}
</code></pre>

<p>Implement <code>onViewRecycled()</code> in your adapter:</p>

<pre><code>static class ImageAdapter extends RecyclerView.Adapter&lt;ImageHolder&gt; {

    // ...

    @Override
    public void onViewRecycled(final ImageHolder holder) {
        holder.cleanup();
    }
}
</code></pre>

<p>Cancel the Picasso requests when your Fragment's view is destroyed (or whenever you wish):</p>

<pre><code>public class MyFragment extends Fragment {
    private RecyclerView recycler;

    // ...

    @Override
    public void onDestroyView() {
        super.onDestroyView();
        recycler.setAdapter(null); // will trigger the recycling in the adapter
    }
}
</code></pre>

<p><code>RecyclerView.setAdapter(null)</code> will detach all currently added <code>View</code>s and their associated <code>ViewHolder</code>s will be recycled.</p>
",sfera,,1448642675,1448642675,0
http://stackoverflow.com/a/34015469/988941,Can I Fastclick ReactJS running in Cordova,22151,nicholas,,1403299212,1466487926,0,https://stackoverflow.com/questions/24335821/can-i-fastclick-reactjs-running-in-cordova,"<p><strong>Edit</strong></p>

<p><strong>Facebook decided to <a href=""https://github.com/facebook/react/issues/436#issuecomment-207624448"">not add support for defining custom event types</a> and recommend you to use something like <a href=""https://github.com/JedWatson/react-tappable"">react-tappable</a></strong> so you can write something like <code>&lt;Tappable onTap={}&gt;</code>.</p>

<hr>

<p><strike>Facebook's working on a solution in the form of <code>TapEventPlugin</code>, but it <a href=""https://github.com/facebook/react/issues/436"">won't be made available</a> <a href=""https://github.com/facebook/react/pull/1170#issuecomment-52123901"">until they make some decisions</a>.</p>

<p>If you're reading this you're probably working on a project that can't wait until they figure out how they want to publish it.</strike></p>

<p>This repo is for you: <a href=""https://github.com/zilverline/react-tap-event-plugin"">https://github.com/zilverline/react-tap-event-plugin</a></p>

<p><strike>When Facebook solves <a href=""https://github.com/facebook/react/issues/436"">#436</a> and <a href=""https://github.com/facebook/react/pull/1170"">#1170</a>, this repo will disappear.</strike></p>

<p><em>This solution works for React 0.14.x and 15.x.</em></p>

<pre><code>npm i -S react-tap-event-plugin
</code></pre>

<p>Example of usage:</p>

<pre><code>var React = require(""react"");
var ReactDOM = require(""react-dom"");
injectTapEventPlugin = require(""react-tap-event-plugin"");
injectTapEventPlugin();

var Main = React.createClass({
  render: function() {
    return (
      &lt;a
        href=""#""
        onTouchTap={this.handleTouchTap}
        onClick={this.handleClick}&gt;
        Tap Me
      &lt;/a&gt;
    );
  },

  handleClick: function(e) {
    console.log(""click"", e);
  },

  handleTouchTap: function(e) {
    console.log(""touchTap"", e);
  }
});

ReactDOM.render(&lt;Main /&gt;, document.getElementById(""container""));
</code></pre>

<p><em>Note that with the injector, you will probably need to use only <code>onTouchTap</code> (and not <code>onClick</code> anymore).</em></p>
",MoOx,MoOx,1448957277,1466487926,1466487926
http://stackoverflow.com/a/3407254/103252,C++: Rounding up to the nearest multiple of a number,107790,Robben_Ford_Fan_boy,Josh Lee,1280935163,1561403247,1561403247,https://stackoverflow.com/questions/3407012/c-rounding-up-to-the-nearest-multiple-of-a-number,"<p>This works for positive numbers, not sure about negative. It only uses integer math.</p>

<pre><code>int roundUp(int numToRound, int multiple)
{
    if (multiple == 0)
        return numToRound;

    int remainder = numToRound % multiple;
    if (remainder == 0)
        return numToRound;

    return numToRound + multiple - remainder;
}
</code></pre>

<p>Edit: Here's a version that works with negative numbers, if by ""up"" you mean a result that's always >= the input.</p>

<pre><code>int roundUp(int numToRound, int multiple)
{
    if (multiple == 0)
        return numToRound;

    int remainder = abs(numToRound) % multiple;
    if (remainder == 0)
        return numToRound;

    if (numToRound &lt; 0)
        return -(abs(numToRound) - remainder);
    else
        return numToRound + multiple - remainder;
}
</code></pre>
",Mark Ransom,bdesham,1280936640,1446131857,1446131857
http://stackoverflow.com/a/3407254/4795763,C++: Rounding up to the nearest multiple of a number,107790,Robben_Ford_Fan_boy,Josh Lee,1280935163,1561403247,1561403247,https://stackoverflow.com/questions/3407012/c-rounding-up-to-the-nearest-multiple-of-a-number,"<p>This works for positive numbers, not sure about negative. It only uses integer math.</p>

<pre><code>int roundUp(int numToRound, int multiple)
{
    if (multiple == 0)
        return numToRound;

    int remainder = numToRound % multiple;
    if (remainder == 0)
        return numToRound;

    return numToRound + multiple - remainder;
}
</code></pre>

<p>Edit: Here's a version that works with negative numbers, if by ""up"" you mean a result that's always >= the input.</p>

<pre><code>int roundUp(int numToRound, int multiple)
{
    if (multiple == 0)
        return numToRound;

    int remainder = abs(numToRound) % multiple;
    if (remainder == 0)
        return numToRound;

    if (numToRound &lt; 0)
        return -(abs(numToRound) - remainder);
    else
        return numToRound + multiple - remainder;
}
</code></pre>
",Mark Ransom,bdesham,1280936640,1446131857,1446131857
http://stackoverflow.com/a/34088882/1070215,What&#39;s an appropriate HTTP status code to return by a REST API service for a validation failure?,188196,michaeljoseph,George Stocker,1261694092,1503782214,1387162682,https://stackoverflow.com/questions/1959947/whats-an-appropriate-http-status-code-to-return-by-a-rest-api-service-for-a-val,"<p>Here it is: </p>

<p><strong>rfc2616#section-10.4.1 - 400 Bad Request</strong></p>

<blockquote>
  <p>The request could not be understood by the server due to <strong>malformed 
  syntax</strong>. The client SHOULD NOT repeat the request without modifications.</p>
</blockquote>

<p><strong>rfc7231#section-6.5.1 - 6.5.1.  400 Bad Request</strong></p>

<blockquote>
  <p>The 400 (Bad Request) status code indicates that the server cannot
   or    will not process the request due to something that is perceived
  to be    a client error <strong><em>(e.g., malformed request syntax, invalid request    message framing, or deceptive request routing)</em></strong>.</p>
</blockquote>

<p>Refers to malformed (not wellformed) cases!</p>

<p><strong>rfc4918 - 11.2.  422 Unprocessable Entity</strong></p>

<blockquote>
  <p>The 422 (Unprocessable Entity) status code means the server<br>
  understands the content type of the request entity (hence a 415 (Unsupported Media Type) status code is inappropriate), and the <strong>syntax of the request entity is correct</strong> (thus a 400 (Bad Request) status code is inappropriate) but was unable to process the contained instructions.  For example, this error condition may occur if an XML request body contains well-formed (i.e., syntactically correct), but <strong>semantically erroneous</strong>, XML instructions.</p>
</blockquote>

<p><strong>Conclusion</strong></p>

<p>Rule of thumb: [_]00 covers the most general case and cases that are not covered by designated code.</p>

<p><strong>422</strong> fits best object validation error (precisely my recommendation:)<br>
As for <strong>semantically erroneous -</strong> Think of something like ""This username already exists"" validation. </p>

<p>400 is incorrectly used for object validation </p>
",honzajde,honzajde,1449233593,1503782214,1503782214
http://stackoverflow.com/a/3409892/4795763,C++: Rounding up to the nearest multiple of a number,107790,Robben_Ford_Fan_boy,Josh Lee,1280935163,1561403247,1561403247,https://stackoverflow.com/questions/3407012/c-rounding-up-to-the-nearest-multiple-of-a-number,"<pre><code>float roundUp(float number, float fixedBase) {
    if (fixedBase != 0 &amp;&amp; number != 0) {
        float sign = number &gt; 0 ? 1 : -1;
        number *= sign;
        number /= fixedBase;
        int fixedPoint = (int) ceil(number);
        number = fixedPoint * fixedBase;
        number *= sign;
    }
    return number;
}
</code></pre>

<p>This works for any float number or base (e.g. you can round -4 to the nearest 6.75).  In essence it is converting to fixed point, rounding there, then converting back.  It handles negatives by rounding AWAY from 0.  It also handles a negative round to value by essentially turning the function into roundDown.</p>

<p>An int specific version looks like:</p>

<pre><code>int roundUp(int number, int fixedBase) {
    if (fixedBase != 0 &amp;&amp; number != 0) {
        int sign = number &gt; 0 ? 1 : -1;
        int baseSign = fixedBase &gt; 0 ? 1 : 0;
        number *= sign;
        int fixedPoint = (number + baseSign * (fixedBase - 1)) / fixedBase;
        number = fixedPoint * fixedBase;
        number *= sign;
    }
    return number;
}
</code></pre>

<p>Which is more or less plinth's answer, with the added negative input support.</p>
",Dolphin,Mr. Polywhirl,1280956583,1424387176,1424387176
http://stackoverflow.com/a/34111150/873661,Does Java support Let&#39;s Encrypt certificates?,57938,Hexaholic,Hexaholic,1449346952,1530192109,1530192109,https://stackoverflow.com/questions/34110426/does-java-support-lets-encrypt-certificates,"<p>[<strong>Update 2016-06-08</strong>: According to <a href=""https://bugs.openjdk.java.net/browse/JDK-8154757"" rel=""noreferrer"">https://bugs.openjdk.java.net/browse/JDK-8154757</a> the IdenTrust CA will be included in Oracle Java 8u101.]</p>

<p>[<strong>Update 2016-08-05</strong>: Java 8u101 has been released and does indeed include the IdenTrust CA: <a href=""http://www.oracle.com/technetwork/java/javase/8u101-relnotes-3021761.html"" rel=""noreferrer"">release notes</a>]</p>

<hr>

<blockquote>
  <p>Does Java support Let's Encrypt certificates?</p>
</blockquote>

<p>Yes. The Let's Encrypt certificate is just a regular public key certificate. Java supports it (according to <a href=""https://letsencrypt.org/docs/certificate-compatibility/"" rel=""noreferrer"">Let's Encrypt Certificate Compatibility</a>, for Java 7 >= 7u111 and Java 8 >= 8u101).</p>

<blockquote>
  <p>Does Java trust Let's Encrypt certificates out of the box?</p>
</blockquote>

<p>No / it depends on the JVM. The truststore of Oracle JDK/JRE up to 8u66 contains neither the Let's Encrypt CA specifically nor the IdenTrust CA that cross signed it. <code>new URL(""https://letsencrypt.org/"").openConnection().connect();</code> for example results in <code>javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException</code>.</p>

<p>You can however provide your own validator / define a custom keystore that contains the required root CA or import the certificate into the JVM truststore.</p>

<p><a href=""https://community.letsencrypt.org/t/will-the-cross-root-cover-trust-by-the-default-list-in-the-jdk-jre/134/10"" rel=""noreferrer"">https://community.letsencrypt.org/t/will-the-cross-root-cover-trust-by-the-default-list-in-the-jdk-jre/134/10</a> discusses the topic as well.</p>

<hr>

<p>Here is some example code that shows how to add a certificate to the default truststore at runtime. You'll just need to add the certificate (exported from firefox as .der and put in classpath)</p>

<p>Based on <a href=""https://stackoverflow.com/questions/3508050/how-can-i-get-a-list-of-trusted-root-certificates-in-java/3508175#3508175"">How can I get a list of trusted root certificates in Java?</a> and <a href=""http://developer.android.com/training/articles/security-ssl.html#UnknownCa"" rel=""noreferrer"">http://developer.android.com/training/articles/security-ssl.html#UnknownCa</a></p>

<pre><code>import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.security.KeyStore;
import java.security.cert.Certificate;
import java.security.cert.CertificateFactory;
import java.security.cert.PKIXParameters;
import java.security.cert.TrustAnchor;
import java.security.cert.X509Certificate;

import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLHandshakeException;
import javax.net.ssl.TrustManagerFactory;

public class SSLExample {
    // BEGIN ------- ADDME
    static {
        try {
            KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
            Path ksPath = Paths.get(System.getProperty(""java.home""),
                    ""lib"", ""security"", ""cacerts"");
            keyStore.load(Files.newInputStream(ksPath),
                    ""changeit"".toCharArray());

            CertificateFactory cf = CertificateFactory.getInstance(""X.509"");
            try (InputStream caInput = new BufferedInputStream(
                    // this files is shipped with the application
                    SSLExample.class.getResourceAsStream(""DSTRootCAX3.der""))) {
                Certificate crt = cf.generateCertificate(caInput);
                System.out.println(""Added Cert for "" + ((X509Certificate) crt)
                        .getSubjectDN());

                keyStore.setCertificateEntry(""DSTRootCAX3"", crt);
            }

            if (false) { // enable to see
                System.out.println(""Truststore now trusting: "");
                PKIXParameters params = new PKIXParameters(keyStore);
                params.getTrustAnchors().stream()
                        .map(TrustAnchor::getTrustedCert)
                        .map(X509Certificate::getSubjectDN)
                        .forEach(System.out::println);
                System.out.println();
            }

            TrustManagerFactory tmf = TrustManagerFactory
                    .getInstance(TrustManagerFactory.getDefaultAlgorithm());
            tmf.init(keyStore);
            SSLContext sslContext = SSLContext.getInstance(""TLS"");
            sslContext.init(null, tmf.getTrustManagers(), null);
            SSLContext.setDefault(sslContext);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
    // END ---------- ADDME

    public static void main(String[] args) throws IOException {
        // signed by default trusted CAs.
        testUrl(new URL(""https://google.com""));
        testUrl(new URL(""https://www.thawte.com""));

        // signed by letsencrypt
        testUrl(new URL(""https://helloworld.letsencrypt.org""));
        // signed by LE's cross-sign CA
        testUrl(new URL(""https://letsencrypt.org""));
        // expired
        testUrl(new URL(""https://tv.eurosport.com/""));
        // self-signed
        testUrl(new URL(""https://www.pcwebshop.co.uk/""));

    }

    static void testUrl(URL url) throws IOException {
        URLConnection connection = url.openConnection();
        try {
            connection.connect();
            System.out.println(""Headers of "" + url + "" =&gt; ""
                    + connection.getHeaderFields());
        } catch (SSLHandshakeException e) {
            System.out.println(""Untrusted: "" + url);
        }
    }

}
</code></pre>
",zapl,potame,1449351185,1497353620,1497353620
http://stackoverflow.com/a/34121629/3408572,Why does std::condition_variable::wait_for() throw an operation not permitted std::system_error on Windows with VS2013?,418,andlabs,,1449423024,1449462451,0,https://stackoverflow.com/questions/34120422/why-does-stdcondition-variablewait-for-throw-an-operation-not-permitted-st,"<p>Your program exhibits undefined behavior, by trying to unlock a mutex locked by a different thread. <code>ourlock</code> is originally constructed on the main thread, being a global variable, at which point it locks <code>m</code>. Then you pass it to <code>cv.wait_for</code> on the second thread. This is explicitly prohibited:</p>

<blockquote>
  <p><strong>[thread.condition.condvar]</strong></p>

<pre><code>template &lt;class Rep, class Period&gt;
    cv_status wait_for(unique_lock&lt;mutex&gt;&amp; lock,
                       const chrono::duration&lt;Rep, Period&gt;&amp; rel_time);
</code></pre>
  
  <p><strong>25</strong> <em>Requires:</em> <code>lock.owns_lock()</code> is true and <code>lock.mutex()</code> is <strong>locked by the calling thread</strong>...</p>
</blockquote>

<p>Emphasis mine.</p>
",Igor Tandetnik,Igor Tandetnik,1449429837,1449462451,1449462451
http://stackoverflow.com/a/34126154/6930869,Combine multiple Collections into a single logical Collection?,103775,newgre,newgre,1296813422,1503085912,1296814524,https://stackoverflow.com/questions/4896662/combine-multiple-collections-into-a-single-logical-collection,"<p>If you're using at least Java 8, see <a href=""//stackoverflow.com/questions/4896662/combine-multiple-collections-into-a-single-logical-collection/23998250#23998250"" rel=""nofollow"">my other answer</a>.</p>

<p>If you're already using Google Guava, see <a href=""//stackoverflow.com/questions/4896662/combine-multiple-collections-into-a-single-logical-collection/4896878#4896878"" rel=""nofollow"">Sean Patrick Floyd's answer</a>.</p>

<p>If you're stuck at Java 7 and don't want to include Google Guava, you can write your own (read-only) <code>Iterables.concat()</code> using no more than <code>Iterable</code> and <code>Iterator</code>:</p>

<h2>Constant number</h2>

<pre><code>public static &lt;E&gt; Iterable&lt;E&gt; concat(final Iterable&lt;? extends E&gt; iterable1,
                                     final Iterable&lt;? extends E&gt; iterable2) {
    return new Iterable&lt;E&gt;() {
        @Override
        public Iterator&lt;E&gt; iterator() {
            return new Iterator&lt;E&gt;() {
                final Iterator&lt;? extends E&gt; iterator1 = iterable1.iterator();
                final Iterator&lt;? extends E&gt; iterator2 = iterable2.iterator();

                @Override
                public boolean hasNext() {
                    return iterator1.hasNext() || iterator2.hasNext();
                }

                @Override
                public E next() {
                    return iterator1.hasNext() ? iterator1.next() : iterator2.next();
                }
            };
        }
    };
}
</code></pre>

<h2>Variable number</h2>

<pre><code>@SafeVarargs
public static &lt;E&gt; Iterable&lt;E&gt; concat(final Iterable&lt;? extends E&gt;... iterables) {
    return concat(Arrays.asList(iterables));
}

public static &lt;E&gt; Iterable&lt;E&gt; concat(final Iterable&lt;Iterable&lt;? extends E&gt;&gt; iterables) {
    return new Iterable&lt;E&gt;() {
        final Iterator&lt;Iterable&lt;? extends E&gt;&gt; iterablesIterator = iterables.iterator();

        @Override
        public Iterator&lt;E&gt; iterator() {
            return !iterablesIterator.hasNext() ? Collections.emptyIterator()
                                                : new Iterator&lt;E&gt;() {
                Iterator&lt;? extends E&gt; iterableIterator = nextIterator();

                @Override
                public boolean hasNext() {
                    return iterableIterator.hasNext();
                }

                @Override
                public E next() {
                    final E next = iterableIterator.next();
                    findNext();
                    return next;
                }

                Iterator&lt;? extends E&gt; nextIterator() {
                    return iterablesIterator.next().iterator();
                }

                Iterator&lt;E&gt; findNext() {
                    while (!iterableIterator.hasNext()) {
                        if (!iterablesIterator.hasNext()) {
                            break;
                        }
                        iterableIterator = nextIterator();
                    }
                    return this;
                }
            }.findNext();
        }
    };
}
</code></pre>
",xehpuk,,1449460293,1449460293,0
http://stackoverflow.com/a/3419987/1526861,How do I restart an Android Activity,273342,user157195,N J,1252465957,1544978882,1435342681,https://stackoverflow.com/questions/1397361/how-do-i-restart-an-android-activity,"<p>Before SDK 11, a way to do this is like so:</p>

<pre><code>public void reload() {
    Intent intent = getIntent();
    overridePendingTransition(0, 0);
    intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
    finish();
    overridePendingTransition(0, 0);
    startActivity(intent);
}
</code></pre>
",Ben,Jared Rummler,1281051413,1441452796,1441452796
http://stackoverflow.com/a/3427615/1084488,Which Values (High or Low) are better in Android&#39;s getGsmSignalStrength(),9925,Eric,CraigTeegarden,1281126738,1365281119,1365281119,https://stackoverflow.com/questions/3427571/which-values-high-or-low-are-better-in-androids-getgsmsignalstrength,"<p>The values are defined in the GSM standard TS 27.007, section 8.5 (Google it, or see <a href=""http://www.xs4all.nl/~m10/mac/downloads/3GPP-27007-630.pdf"" rel=""noreferrer"">here</a>)</p>

<p>From the standard:</p>

<pre><code>0        -113 dBm or less  
1        -111 dBm  
2...30   -109... -53 dBm  
31        -51 dBm or greater  

99 not known or not detectable
</code></pre>

<p>Which means - 0 is low, 31 is good.</p>
",adamk,,1281127047,1281127047,0
http://stackoverflow.com/a/3431699/654755,Creating functions in a loop,28037,sharvey,Aran-Fey,1281207873,1555662113,1553618542,https://stackoverflow.com/questions/3431676/creating-functions-in-a-loop,"<p>You're running into a problem with <em>late binding</em> -- each function looks up <code>i</code> as late as possible (thus, when called after the end of the loop, <code>i</code> will be set to <code>2</code>).  </p>

<p>Easily fixed by forcing early binding: change <code>def f():</code> to <code>def f(i=i):</code> like this:</p>

<pre><code>def f(i=i):
    return i
</code></pre>

<p>Default values (the right-hand <code>i</code> in <code>i=i</code> is a default value for argument name <code>i</code>, which is the left-hand <code>i</code> in <code>i=i</code>) are looked up at <code>def</code> time, not at <code>call</code> time, so essentially they're a way to specifically looking for early binding.</p>

<p>If you're worried about <code>f</code> getting an extra argument (and thus potentially being called erroneously), there's a more sophisticated way which involved using a closure as a ""function factory"":</p>

<pre><code>def make_f(i):
    def f():
        return i
    return f
</code></pre>

<p>and in your loop use <code>f = make_f(i)</code> instead of the <code>def</code> statement.</p>
",Alex Martelli,Aran-Fey,1281208179,1552246256,1552246256
http://stackoverflow.com/a/3431838/315168,Generating an MD5 checksum of a file,292772,Alexander,S,1281210652,1556113394,1460515975,https://stackoverflow.com/questions/3431825/generating-an-md5-checksum-of-a-file,"<p>You can use <a href=""http://docs.python.org/library/hashlib.html"" rel=""noreferrer"">hashlib.md5()</a></p>

<p>Note that sometimes you won't be able to fit the whole file in memory. In that case, you'll have to read chunks of 4096 bytes sequentially and feed them to the Md5 function:</p>

<pre><code>def md5(fname):
    hash_md5 = hashlib.md5()
    with open(fname, ""rb"") as f:
        for chunk in iter(lambda: f.read(4096), b""""):
            hash_md5.update(chunk)
    return hash_md5.hexdigest()
</code></pre>

<p><strong>Note:</strong> <code>hash_md5.hexdigest()</code> will return the <em>hex string</em> representation for the digest, if you just need the packed bytes use <code>return hash_md5.digest()</code>, so you don't have to convert back.</p>
",quantumSoup,awiebe,1281210832,1540519640,1540519640
http://stackoverflow.com/a/34324179/5678759,REST API error return good practices,256436,Remus Rusanu,Michael Freidgeim,1244000357,1518897028,1507409511,https://stackoverflow.com/questions/942951/rest-api-error-return-good-practices,"<p>A great resource to pick the correct HTTP error code for your API:
<a href=""http://www.codetinkerer.com/2015/12/04/choosing-an-http-status-code.html"" rel=""noreferrer"">http://www.codetinkerer.com/2015/12/04/choosing-an-http-status-code.html</a></p>

<p>An excerpt from the article:</p>

<h2>Where to start:</h2>

<p><a href=""https://i.stack.imgur.com/0pDZI.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/0pDZI.png"" alt=""enter image description here""></a></p>

<h2>2XX/3XX:</h2>

<p><a href=""https://i.stack.imgur.com/LayiK.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/LayiK.png"" alt=""enter image description here""></a></p>

<h2>4XX:</h2>

<p><a href=""https://i.stack.imgur.com/UTpnp.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/UTpnp.png"" alt=""enter image description here""></a></p>

<h2>5XX:</h2>

<p><a href=""https://i.stack.imgur.com/Wy1rN.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/Wy1rN.png"" alt=""enter image description here""></a></p>
",Omar Ali,Michael Kropat,1450308849,1518897028,1518897028
http://stackoverflow.com/a/34347138/2608858,"How can I sort a javascript array while ignoring articles (A, an, the)?",1514,YPCrumble,,1450400765,1450408140,0,https://stackoverflow.com/questions/34347008/how-can-i-sort-a-javascript-array-while-ignoring-articles-a-an-the,"<p>You can simply have a function say <code>removeArticles()</code> which checks if there is more than a single word in the sentence, if so return the second word for comparison. For specific words only you would need to add conditions for the words, for example <code>(words[0] == 'a' || words[0] == 'the' || words[0] == 'an')</code> would cover <code>""A""</code>, <code>""An""</code>, and <code>""The""</code>: </p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>books = [""A Whale"", ""The Moive"", ""A Good Time"", ""The Alphabet 2"" , ""The Alphabet 1"", ""Alphabet Soup"", ""Foo""];

var compare = function(a, b) {
  var aTitle = a.toLowerCase(),
      bTitle = b.toLowerCase();
      
  aTitle = removeArticles(aTitle);
  bTitle = removeArticles(bTitle);
  
  if (aTitle &gt; bTitle) return 1;
  if (aTitle &lt; bTitle) return -1; 
  return 0;
};

function removeArticles(str) {
  words = str.split("" "");
  if(words.length &lt;= 1) return str;
  if( words[0] == 'a' || words[0] == 'the' || words[0] == 'an' )
    return words.splice(1).join("" "");
  return str;
}

var sortedBooks = books.sort(compare);

// [ ""The Alphabet 1"", ""The Alphabet 2"", ""Alphabet Soup"", ""Foo"", ""A Good Time"", ""The Moive"", ""A Whale"" ]
console.log(sortedBooks);</code></pre>
</div>
</div>
</p>
",Spencer Wieczorek,Spencer Wieczorek,1450401740,1450408140,1450408140
http://stackoverflow.com/a/3437484/485098,MIN and MAX in C,627053,Matt Joiner,a3f,1281329380,1549552874,1427862516,https://stackoverflow.com/questions/3437404/min-and-max-in-c,"<blockquote>
  <p>Where are <code>MIN</code> and <code>MAX</code> defined in C, if at all?</p>
</blockquote>

<p>They aren't.</p>

<blockquote>
  <p>What is the best way to implement these, as generically and type safe as possible (compiler extensions/builtins for mainstream compilers preferred).</p>
</blockquote>

<p>As functions. I wouldn't use macros like <code>#define MIN(X, Y) (((X) &lt; (Y)) ? (X) : (Y))</code>, especially if you plan to deploy your code. Either write your own, use something like standard <a href=""http://en.cppreference.com/w/c/numeric/math/fmax"" rel=""noreferrer""><code>fmax</code></a> or <a href=""http://en.cppreference.com/w/c/numeric/math/fmin"" rel=""noreferrer""><code>fmin</code></a>, or fix the macro using <a href=""http://gcc.gnu.org/onlinedocs/gcc-4.9.2/gcc/Typeof.html#Typeof"" rel=""noreferrer"">GCC's typeof</a> (you get typesafety bonus too):</p>

<pre><code> #define max(a,b) \
   ({ __typeof__ (a) _a = (a); \
       __typeof__ (b) _b = (b); \
     _a &gt; _b ? _a : _b; })
</code></pre>

<p>Everyone says ""oh I know about double evaluation, it's no problem"" and a few months down the road, you'll be debugging the silliest problems for hours on end.</p>

<p>Note the use of <code>__typeof__</code> instead of <code>typeof</code>:</p>

<blockquote>
  <p>If you are writing a header file that
  must work when included in ISO C
  programs, write <code>__typeof__</code> instead of
  <code>typeof</code>.</p>
</blockquote>
",David Titarenco,Nisse Engstrm,1281330787,1414951624,1414951624
http://stackoverflow.com/a/34501500/360782,Check if AngularJS module is bootstrapped,7028,Guy,Pankaj Parkar,1423387629,1458678416,1435400264,https://stackoverflow.com/questions/28392439/check-if-angularjs-module-is-bootstrapped,"<p>It's not good practice to access scope from outside the app, so it's not enabled in well-built production applications. If you need to access/apply scope then there's something strange/unsupported about your use case.</p>

<p>However, the right way to check whether an element has been bootstrapped is the way the Angular library does it which is to load up the element and check for an injector. So you'd want <code>angular.element(document.querySelector('#mainDiv')).injector();</code> which makes your code:</p>

<pre><code>function onEndRequest(sender, args) {
    var element = angular.element(document.querySelector('#mainDiv'));

    //This will be truthy if initialized and falsey otherwise.
    var isInitialized = element.injector();
    if (!isInitialized) {
        angular.bootstrap(element, ['defaultApp']);
    }

    // Can't get at scope, and you shouldn't be doing so anyway
}
</code></pre>

<p>Can you tell us why you need to apply the scope?</p>
",Adam McCormick,,1451340490,1451340490,0
http://stackoverflow.com/a/34509163/608639,Coverity finding: Not restoring ostream format (STREAM_FORMAT_STATE),1308,jww,Community,1451359081,1453757720,1495542323,https://stackoverflow.com/questions/34503914/coverity-finding-not-restoring-ostream-format-stream-format-state,"<p>After about 6 attempts (I think we used all of our submissions for the week), it appears we <strong><em>cannot</em></strong> use the member functions to set the <code>floatfield</code> in the program (i.e., <strong><em><code>ostream.iosflags(...); ostream.precision(...)</code></em></strong>). We had to use the manipulators for the <code>floatfield</code> (i.e., <strong><em><code>ostream &lt;&lt; setiosflags(...) &lt;&lt; setprecision(...)</code></em></strong>):</p>

<pre><code>// Coverity finding
class StreamState
{
public:
    StreamState(std::ostream&amp; out)
        : m_out(out), m_fmt(out.flags()), m_prec(out.precision())
    {
    }

    ~StreamState()
    {
        m_out.precision(m_prec);
        m_out.flags(m_fmt);
    }

private:
    std::ostream&amp; m_out;
    std::ios_base::fmtflags m_fmt;
    std::streamsize m_prec;
};
</code></pre>

<p>And:</p>

<pre><code>StreamState ss(cout);
cout &lt;&lt; std::setiosflags(std::ios::fixed) &lt;&lt; std::setprecision(6);
cout &lt;&lt; ""  Maurer Randomness Test returned value "" &lt;&lt; mv &lt;&lt; endl;
</code></pre>
",jww,jww,1451385093,1453757720,1453757720
http://stackoverflow.com/a/3451640/145346,Get the element with the highest occurrence in an array,62721,vise,Peter Mortensen,1246144483,1551519840,1319604669,https://stackoverflow.com/questions/1053843/get-the-element-with-the-highest-occurrence-in-an-array,"<p>As per <code>George Jempty's</code> request to have the algorithm account for ties, I propose a modified version of <code>Matthew Flaschen's</code> algorithm.</p>

<pre><code>function modeString(array)
{
    if (array.length == 0)
        return null;

    var modeMap = {},
        maxEl = array[0],
        maxCount = 1;

    for(var i = 0; i &lt; array.length; i++)
    {
        var el = array[i];

        if (modeMap[el] == null)
            modeMap[el] = 1;
        else
            modeMap[el]++;

        if (modeMap[el] &gt; maxCount)
        {
            maxEl = el;
            maxCount = modeMap[el];
        }
        else if (modeMap[el] == maxCount)
        {
            maxEl += '&amp;' + el;
            maxCount = modeMap[el];
        }
    }
    return maxEl;
}
</code></pre>

<p>This will now return a string with the mode element(s) delimited by a <code>'&amp;'</code> symbol. When the result is received it can be split on that <code>'&amp;'</code> element and you have your mode(s). </p>

<p>Another option would be to return an array of mode element(s) like so:</p>

<pre><code>function modeArray(array)
{
    if (array.length == 0)
        return null;
    var modeMap = {},
        maxCount = 1, 
        modes = [];

    for(var i = 0; i &lt; array.length; i++)
    {
        var el = array[i];

        if (modeMap[el] == null)
            modeMap[el] = 1;
        else
            modeMap[el]++;

        if (modeMap[el] &gt; maxCount)
        {
            modes = [el];
            maxCount = modeMap[el];
        }
        else if (modeMap[el] == maxCount)
        {
            modes.push(el);
            maxCount = modeMap[el];
        }
    }
    return modes;
}
</code></pre>

<p>In the above example you would then be able to handle the result of the function as an array of modes.</p>
",samandmoore,noz,1281460910,1531429880,1531429880
http://stackoverflow.com/a/3468650/222487,Why does setTimeout() &quot;break&quot; for large millisecond delay values?,30083,Matt Ball,,1281622438,1561227676,0,https://stackoverflow.com/questions/3468607/why-does-settimeout-break-for-large-millisecond-delay-values,"<p>This is due to setTimeout using a 32 bit int to store the delay so the max value allowed would be </p>

<pre><code>2147483647
</code></pre>

<p>if you try </p>

<pre><code>2147483648
</code></pre>

<p>you get your problem occurring.</p>

<p>I can only presume this is causing some form of internal exception in the JS Engine and causing the function to fire immediately rather than not at all.</p>
",OneSHOT,Matt Ball,1281622741,1314979613,1314979613
http://stackoverflow.com/a/34780589/3697225,How to scroll tablayout programmatically - Android,16162,Mohit Charadva,Cur,1437033591,1551354360,1541160550,https://stackoverflow.com/questions/31448504/how-to-scroll-tablayout-programmatically-android,"<p>Are you calling <code>tab.select()</code> before the TabLayout and its children have actually been measured and drawn? If so, your TabLayout won't animate to the selection with <code>tab.select()</code> (or Kayvan N's suggestion of <code>scrollTo()</code>). Using a Handler will probably work, but that's not an ideal solution.</p>

<p>Provided the layout hasn't been laid out yet, a <a href=""http://developer.android.com/reference/android/view/ViewTreeObserver.html"" rel=""nofollow""><code>ViewTreeObserver</code></a> will allow you to move to your selected tab after the layout process is finished.</p>

<pre><code>private void scrollToTabAfterLayout(final int tabIndex) {
    if (getView() != null) {
        final ViewTreeObserver observer = mTabLayout.getViewTreeObserver();

        if (observer.isAlive()) {
            observer.dispatchOnGlobalLayout(); // In case a previous call is waiting when this call is made
            observer.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
                @Override
                public void onGlobalLayout() {
                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {
                        observer.removeOnGlobalLayoutListener(this);
                    } else {
                        //noinspection deprecation
                        observer.removeGlobalOnLayoutListener(this);
                    }

                    mTabLayout.getTabAt(tabIndex).select();

                }
            });
        }
    }
}
</code></pre>

<p>Please comment if you have any suggestions.</p>
",Matthew Sisinni,,1452737803,1452737803,0
http://stackoverflow.com/a/34780800/1984644,express-jwt setting user object to req.user._doc instead of just req.user?,2364,bobbyz,bobbyz,1452714335,1452812594,1452714857,https://stackoverflow.com/questions/34775687/express-jwt-setting-user-object-to-req-user-doc-instead-of-just-req-user,"<p>I played around with past version numbers of the <code>jsonewebtoken</code> package in my code and the problem goes away with version 5.5.1. (5.5.2 seems to have introduced the problem). I looked into the source code for jsonwebtoken, and had a couple conversations with some of the developers on their github issues page (<a href=""https://github.com/auth0/node-jsonwebtoken/issues/156"" rel=""noreferrer"">here</a> and <a href=""https://github.com/auth0/node-jsonwebtoken/issues/159"" rel=""noreferrer"">here</a>). It seems like they introduced a package called <code>xtend</code> to the payload in the <code>jwt.sign()</code> method, which seems to be adding all the additional meta properties onto the payload before encoding.</p>

<p>I'm using Mongoose, and according to one of the <code>jsonwebtoken</code> developers, I will need to begin using the <code>Document.toObject()</code> method from Mongoose. So from now on:</p>

<pre><code>...
jwt.sign(user.toObject(), ...)
...
</code></pre>

<p>will be the way to do this in Mongoose.</p>
",bobbyz,bobbyz,1452739369,1452812594,1452812594
http://stackoverflow.com/a/34838513/1385109,How to scroll to bottom of React Native ListView,25076,iwongu,Mark Amery,1429806571,1549373186,1514230557,https://stackoverflow.com/questions/29829375/how-to-scroll-to-bottom-of-react-native-listview,"<p>I had the same problem, and came up with this solution:</p>

<pre><code>render()
{
    if(""listHeight"" in this.state &amp;&amp; 
           ""footerY"" in this.state &amp;&amp; 
               this.state.footerY &gt; this.state.listHeight)
    {
        var scrollDistance = this.state.listHeight - this.state.footerY;
        this.refs.list.getScrollResponder().scrollTo(-scrollDistance);
    }

    return (
            &lt;ListView ref=""list""

                onLayout={(event) =&gt; {

                    var layout = event.nativeEvent.layout;

                    this.setState({
                        listHeight : layout.height
                    });

                }}
                renderFooter={() =&gt; {

                    return &lt;View onLayout={(event)=&gt;{

                        var layout = event.nativeEvent.layout;

                        this.setState({
                            footerY : layout.y
                        });

                    }}&gt;&lt;/View&gt;
                }}
            /&gt;
    )
}
</code></pre>

<p>Basically, I render an empty footer in order to ascertain the Y offset of the list bottom. From this I can derive the scroll offset to the bottom, based on the list container height.</p>

<p><strong>NOTE:</strong> The last if condition checks whether the content length overflows the list height, and only scrolls if it does. Whether you need this or not depends on your design!</p>

<p>Hope this solution aids others in the same position.</p>

<p>FWIW I did not fancy the <a href=""https://github.com/exponentjs/react-native-invertible-scroll-view"" rel=""noreferrer"">InvertibleScrollView</a> plugin discussed in another answer because it does a scale transform on the whole list, and each list item.. which sounds expensive!</p>
",Darius,Darius,1453035108,1453037110,1453037110
http://stackoverflow.com/a/34848872/841108,How to abort fading out of jqueryui menu?,142,Basile Starynkevitch,Community,1452886622,1453702983,1495540386,https://stackoverflow.com/questions/34818540/how-to-abort-fading-out-of-jqueryui-menu,"<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var mymenu;
var mybutton;
var count = 0;
var menuTO;

function remove_menu() {
  if (!mymenu) return;
  console.log(""removing mymenu="", mymenu);
  mymenu.remove();
}

function fadeOutMenu() {
  console.log(""fading mymenu="", mymenu);
  mymenu.delay(100).fadeOut(900, remove_menu);
}
$(document).ready(function() {
  mybutton = $(""#mybutton_id"");
  mybutton.on(""click"", function() {
    count++;
    var menuid = ""menuid_"" + count;
    $(""#mymenudiv_id"").append(""&lt;ul class='menucl' id='"" + menuid + ""'&lt;/ul&gt;"");
    mymenu = $(""#"" + menuid);
    mymenu.append(""&lt;li&gt;first&lt;/li&gt;&lt;li&gt;counting "" + count + ""&lt;/li&gt;&lt;li&gt;last&lt;/li&gt;"")
    mymenu.menu({
      select: function(ev, ui) {
        console.log(""selected ui="", ui);
        $(""#message_id"").html(""&lt;b&gt;selected&lt;/b&gt; &lt;i&gt;"" + ui.item.text() + ""&lt;/i&gt; menu#"" + count);
      }
    });
    mymenu.mousemove(function(ev) {
      console.log(""mousemove ev="", ev);
      clearTimeout(menuTO);
      menuTO = setTimeout(fadeOutMenu,
        9000);
      //mymenu.finish();
    })
    menuTO = setTimeout(fadeOutMenu,
      9000);
  })
})</code></pre>
<pre class=""snippet-code-css lang-css prettyprint-override""><code>ul.menucl {
  background-color: lightpink;
  color: navy;
  font-size: 80%;
  display: inline-block;
}
p.explaincl {
  font-size: 75%;
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js""&gt;&lt;/script&gt;
&lt;link rel=""stylesheet"" href=""//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css""&gt;
&lt;script src=""//code.jquery.com/ui/1.11.4/jquery-ui.js""&gt;&lt;/script&gt;
&lt;p&gt;
  See &lt;a href='http://stackoverflow.com/q/34818540/841108'&gt;this SO question&lt;/a&gt;
&lt;/p&gt;
&lt;h2&gt; my menu &lt;/h2&gt;
&lt;p class='explaincl'&gt;
  First, try clicking the button, and do nothing more: the menu disappears in 10 sec. Then, try again, click the button, move the mouse inside the menu, it is still disappearing but I want it to stay!&lt;/p&gt;
&lt;button id='mybutton_id'&gt;click me&lt;/button&gt;
&lt;div id='mymenudiv_id'&gt;
  Here
&lt;/div&gt;
&lt;p id='message_id'&gt;
&lt;/p&gt;</code></pre>
</div>
</div>
</p>

<p>I have stored Timeout id in a variable menuTO. Then on every mousemove I reset Timeout so that the menu won't fade out if mouse is moving inside the menu.</p>

<p>Also keep in mind if your cursor is inside menu but is not moving, then it will obviously fade out in next 9 to 10 seconds.</p>
",Kiran Shakya,,1453100282,1453100282,0
http://stackoverflow.com/a/3485654/119937,How can I force WebKit to redraw/repaint to propagate style changes?,166355,danorton,danorton,1281824747,1557997691,1281831146,https://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes,"<p>I found some complicated suggestions and many simple ones that didnt work, but a comment to one of them by <a href=""http://vadikom.com/about/#vasil-dinkov"" rel=""noreferrer"">Vasil Dinkov</a> provided a simple solution to force a redraw/repaint that works just fine:</p>

<pre><code>sel.style.display='none';
sel.offsetHeight; // no need to store this anywhere, the reference is enough
sel.style.display='';
</code></pre>

<p>Ill let someone else comment if it works for styles other than block.</p>

<p>Thanks, Vasil!</p>
",danorton,Jack,1281830763,1411748930,1411748930
http://stackoverflow.com/a/34930421/1694896,&quot;Unpack&quot; an array to call a function with variadic template,2255,Thijs Miedema,,1453395745,1453398267,0,https://stackoverflow.com/questions/34929856/unpack-an-array-to-call-a-function-with-variadic-template,"<p>You can use <a href=""http://en.cppreference.com/w/cpp/utility/integer_sequence"" rel=""nofollow""><code>std::integer_sequence</code></a> for that purpose:</p>

<pre><code>namespace Detail
{
template &lt;typename Reader, typename T, std::size_t... I&gt;
void read_row(Reader&amp; in, T* data, std::index_sequence&lt;I...&gt;)
{
     in.read_row(data[I]...); // A trick here
} 

}

template &lt;std::size_t N, typename T&gt;
void read_row(io::CSVReader&lt;N&gt;&amp; in, T* data)
{
     Detail::read_row(in, data, std::make_index_sequence&lt;N&gt;{});
} 
</code></pre>

<p>And of course, use like this:</p>

<pre><code>int a[7];
io::CSVReader&lt;7&gt; r;
read_row(r, a);
</code></pre>

<p>""Working"" example: <a href=""http://ideone.com/EiWjBm"" rel=""nofollow"">link</a></p>

<hr>

<p>For compiler ""below"" C++14 - <code>integer_sequence</code> (actually just <code>index_sequence</code> needed) is pretty easy to implement:</p>

<pre><code>template &lt;std::size_t... I&gt;
class index_sequence {};
</code></pre>

<p>And <code>make_index_sequence</code> not so easy - but also doable:</p>

<pre><code>template &lt;std::size_t N, std::size_t ...I&gt;
struct make_index_sequence : make_index_sequence&lt;N-1, N-1,I...&gt; {};

template &lt;std::size_t ...I&gt;
struct make_index_sequence&lt;0,I...&gt; : index_sequence&lt;I...&gt; {};
</code></pre>
",PiotrNycz,PiotrNycz,1453397341,1453398267,1453398267
http://stackoverflow.com/a/3493746/207604,Preemptive Basic authentication with Apache HttpClient 4,64829,yossis,Jonas,1262797545,1489691521,1305126935,https://stackoverflow.com/questions/2014700/preemptive-basic-authentication-with-apache-httpclient-4,"<p>It's difficult to do this without passing a context through every time, but you can probably do it by using a request interceptor. Here is some code that we use (found from their JIRA, iirc):</p>

<pre><code>// Pre-emptive authentication to speed things up
BasicHttpContext localContext = new BasicHttpContext();

BasicScheme basicAuth = new BasicScheme();
localContext.setAttribute(""preemptive-auth"", basicAuth);

httpClient.addRequestInterceptor(new PreemptiveAuthInterceptor(), 0);

(...)

static class PreemptiveAuthInterceptor implements HttpRequestInterceptor {

    public void process(final HttpRequest request, final HttpContext context) throws HttpException, IOException {
        AuthState authState = (AuthState) context.getAttribute(ClientContext.TARGET_AUTH_STATE);

        // If no auth scheme avaialble yet, try to initialize it
        // preemptively
        if (authState.getAuthScheme() == null) {
            AuthScheme authScheme = (AuthScheme) context.getAttribute(""preemptive-auth"");
            CredentialsProvider credsProvider = (CredentialsProvider) context.getAttribute(ClientContext.CREDS_PROVIDER);
            HttpHost targetHost = (HttpHost) context.getAttribute(ExecutionContext.HTTP_TARGET_HOST);
            if (authScheme != null) {
                Credentials creds = credsProvider.getCredentials(new AuthScope(targetHost.getHostName(), targetHost.getPort()));
                if (creds == null) {
                    throw new HttpException(""No credentials for preemptive authentication"");
                }
                authState.setAuthScheme(authScheme);
                authState.setCredentials(creds);
            }
        }

    }

}
</code></pre>
",Mat Mannion,,1281966560,1281966560,0
http://stackoverflow.com/a/34946092/4939630,HSL to RGB color conversion,149146,hhafez,Cur,1267401529,1547714449,1490502024,https://stackoverflow.com/questions/2353211/hsl-to-rgb-color-conversion,"<p>For all who said that Garry Tan solution converting incorrect from RGB to HSL and back. It because he left out fraction part of number in his code.
I corrected his code (javascript).
Sorry for link on russian languadge, but on english absent - <a href=""https://ru.wikipedia.org/wiki/HSL"" rel=""nofollow"">HSL-wiki</a></p>

<pre><code>function toHsl(r, g, b)
{
    r /= 255.0;
    g /= 255.0;
    b /= 255.0;
    var max = Math.max(r, g, b);
    var min = Math.min(r, g, b);
    var h, s, l = (max + min) / 2.0;

    if(max == min)
    {
        h = s = 0; 
    }
    else
    {
        var d = max - min;
        s = (l &gt; 0.5 ? d / (2.0 - max - min) : d / (max + min));

        if(max == r &amp;&amp; g &gt;= b)
        {
            h = 1.0472 * (g - b) / d ;
        }
        else if(max == r &amp;&amp; g &lt; b)
        {
            h = 1.0472 * (g - b) / d + 6.2832;
        }
        else if(max == g)
        {
            h = 1.0472 * (b - r) / d + 2.0944;
        }
        else if(max == b)
        {
            h = 1.0472 * (r - g) / d + 4.1888;
        }
    }
    return {
        str: 'hsl(' + parseInt(h / 6.2832 * 360.0 + 0.5) + ',' + parseInt(s * 100.0 + 0.5) + '%,' + parseInt(l * 100.0 + 0.5) + '%)',
        obj: { h: parseInt(h / 6.2832 * 360.0 + 0.5), s: parseInt(s * 100.0 + 0.5), l: parseInt(l * 100.0 + 0.5) }
    };
};
</code></pre>
",0x000f,,1453463511,1453463511,0
http://stackoverflow.com/a/34953411/1682419,Notification not shown when setGroup() is called in Android KitKat,2008,Addev,,1436879437,1487915297,0,https://stackoverflow.com/questions/31407607/notification-not-shown-when-setgroup-is-called-in-android-kitkat,"<p>The short answer to this is that it appears showing a stacked notification on a KitKat device is not automatically supported by the support library.</p>

<p>Since you asked for an enlightenment here are my findings based on testing with two devices running Android 4.4.2. I am also using AppCompat 23.1.1.</p>

<p>When you dig into the source code of the library you will find that when a notification is shown it will either use something called the <code>SideChannel</code> or the <code>NotificationManager</code> directly to show the notification. Below is the <code>NotificationManagerCompat.notify</code> method for reference showing this:</p>

<pre><code>public void notify(String tag, int id, Notification notification) {
    // MY COMMENT: true when the notification has the extra 
    // NotificationCompatJellybean.EXTRA_USE_SIDE_CHANNEL set to true.
    if (useSideChannelForNotification(notification)) {
        pushSideChannelQueue(new NotifyTask(mContext.getPackageName(), id, tag, notification));
        // Cancel this notification in notification manager if it just transitioned to being
        // side channelled.
        IMPL.cancelNotification(mNotificationManager, tag, id);
    } else {
        // MY COMMENT: this calls notificationManager.notify(id, notification); in the base implementation
        IMPL.postNotification(mNotificationManager, tag, id, notification);
    }
}
</code></pre>

<p>Now when you show a notification without setting a group the notification is shown using the notification manager which works, but <em>if a group is set</em> it will attempt to use the side channel to send the notification and cancel any notification shown using the notification manager as seen in the above method.</p>

<p>Proof that the side channel is used when a group is set is found in <code>NotificationCompatKitKat.Builder</code> where you will see the following code:</p>

<pre><code>if (groupKey != null) {
    mExtras.putString(NotificationCompatJellybean.EXTRA_GROUP_KEY, groupKey);
    if (groupSummary) {
        mExtras.putBoolean(NotificationCompatJellybean.EXTRA_GROUP_SUMMARY, true);
    } else {
        mExtras.putBoolean(NotificationCompatJellybean.EXTRA_USE_SIDE_CHANNEL, true);
    }
}
</code></pre>

<p>This all does not seem like a big deal until you look at what the <code>pushSideChannelQueue(...)</code> method does when showing a notification using the <code>SideChannel</code>.</p>

<p>It ends up looking for a service that can handle the action <code>android.support.BIND_NOTIFICATION_SIDE_CHANNEL</code> of which there is not one by default so the method simply returns. This is what is causing the notification to never be shown.</p>

<p>There is a <code>NotificationCompatSideChannelService</code> abstract class in the compatibility library that you can implement according to the <a href=""http://developer.android.com/reference/android/support/v4/app/NotificationCompatSideChannelService.html"">documentation</a> if you want to write your own <code>SideChannelService</code> but it seems like you are better off just not using grouped notifications in KitKat and prior devices.</p>
",George Mulligan,George Mulligan,1453486717,1453775046,1453775046
http://stackoverflow.com/a/35008842/266378,Checking if a sequence container is contiguous in memory,1965,Daniel,Daniel,1453765622,1453811294,1453803480,https://stackoverflow.com/questions/35004633/checking-if-a-sequence-container-is-contiguous-in-memory,"<p><strong>No</strong>, there is not compiletime trait for this.</p>

<p>The <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4567.pdf"" rel=""noreferrer""><strong>draft C++1z Standard</strong></a> defines contiguity as a <strong>runtime property</strong> of an iterator range. Note there is no compiletime <code>std::contiguous_iterator_tag</code> corresponding to this iterator category.</p>

<blockquote>
  <p><strong>24.2 Iterator requirements [iterator.requirements]</strong></p>
  
  <p><strong>24.2.1 In general [iterator.requirements.general]</strong></p>
  
  <p>5 Iterators that further satisfy the requirement that, for integral
  values <code>n</code> and dereferenceable iterator values <code>a</code> and <code>(a + n), *(a + n)</code>
  is equivalent to <code>*(addressof(*a) + n)</code>, are called contiguous
  iterators. [ Note: For example, the type pointer to int is a
  contiguous iterator, but <code>reverse_iterator&lt;int *&gt;</code> is not. For a valid
  iterator range <code>[a,b)</code> with dereferenceable <code>a</code>, the corresponding range
  denoted by pointers is <code>[addressof(*a),addressof(*a) + (b - a));</code> <code>b</code>
  might not be dereferenceable.  end note ]</p>
</blockquote>

<p>One way to test for this at runtime would be</p>

<pre><code>#include &lt;array&gt;
#include &lt;deque&gt;
#include &lt;list&gt;
#include &lt;iostream&gt;
#include &lt;iterator&gt;
#include &lt;map&gt;
#include &lt;memory&gt;
#include &lt;string&gt;
#include &lt;unordered_set&gt;
#include &lt;vector&gt;

template&lt;class I&gt;
auto is_contiguous(I first, I last)
{ 
    auto test = true;
    auto const n = std::distance(first, last);
    for (auto i = 0; i &lt; n &amp;&amp; test; ++i) {
        test &amp;= *(std::next(first, i)) == *(std::next(std::addressof(*first), i));
    }        
    return test;        
}

int main()
{
    auto l = std::list&lt;int&gt; { 1, 2, 3 };
    auto m = std::map&lt;int, int&gt;  { {1, 1}, {2,2}, {3,3} };
    auto u = std::unordered_multiset&lt;int&gt; { 1, 1, 1 };
    auto d = std::deque&lt;int&gt;(4000);
    int c[] = { 1, 2, 3 };
    auto a = std::array&lt;int, 3&gt; {{ 1, 2, 3 }};
    auto s = std::string {""Hello world!""};
    auto v = std::vector&lt;int&gt; { 1, 2, 3, };

    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_contiguous(l.begin(), l.end()) &lt;&lt; ""\n"";
    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_contiguous(m.begin(), m.end()) &lt;&lt; ""\n"";
    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_contiguous(u.begin(), u.end()) &lt;&lt; ""\n"";
    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_contiguous(d.begin(), d.end()) &lt;&lt; ""\n"";
    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_contiguous(d.begin(), d.begin() + 1000) &lt;&lt; ""\n"";
    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_contiguous(std::begin(c), std::end(c)) &lt;&lt; ""\n"";
    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_contiguous(a.begin(), a.end()) &lt;&lt; ""\n"";
    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_contiguous(s.begin(), s.end()) &lt;&lt; ""\n"";
    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_contiguous(v.begin(), v.end()) &lt;&lt; ""\n"";
    std::cout &lt;&lt; std::boolalpha &lt;&lt; is_contiguous(v.rbegin(), v.rend()) &lt;&lt; ""\n"";
}
</code></pre>

<p><a href=""http://coliru.stacked-crooked.com/a/e0e37d9aa7f8c305"" rel=""noreferrer""><strong>Live Example</strong></a>. This prints <code>false</code> for the <code>list</code>, <code>map</code> and <code>unordered_multimap</code>, and <code>true</code> for the C-array, and the <code>std::array</code>, <code>string</code> and <code>vector</code>. It prints <code>true</code> for small subranges within a <code>deque</code> and <code>false</code> for large subranges. It also prints <code>false</code> for an iterator range consisting of reverse iterators.</p>

<p><strong>UPDATE</strong>: as commented by @T.C. the original <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3884.pdf"" rel=""noreferrer""><strong>N3884</strong></a> proposal did have a </p>

<pre><code>struct contiguous_iterator_tag : random_access_iterator_tag {};
</code></pre>

<p>so that tag-dispatching on iterator categories would not break. However, this would have broken non-idiomatic code with class template specializations on <code>random_access_iterator_tag</code>. The current draft hence does not contain a new iterator category tag.</p>
",TemplateRex,TemplateRex,1453793723,1453811294,1453811294
http://stackoverflow.com/a/35047629/1541408,Get all unique values in a JavaScript array (remove duplicates),1084787,Mottie,APerson,1261715303,1562285395,1531959914,https://stackoverflow.com/questions/1960473/get-all-unique-values-in-a-javascript-array-remove-duplicates,"<p>To address the problem the other way around, it may be useful to have no duplicate while you load your array, the way <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set"" rel=""nofollow"">Set</a> object would do it but it's not available in all browsers yet. It saves memory and is more efficient if you need to look at its content many times.</p>

<pre><code>Array.prototype.add = function (elem) {
   if (this.indexOf(elem) == -1) {
      this.push(elem);
   }
}
</code></pre>

<p>Sample:</p>

<pre><code>set = [];
[1,3,4,1,2,1,3,3,4,1].forEach(function(x) { set.add(x); });
</code></pre>

<p>Gives you <code>set = [1,3,4,2]</code></p>
",Le Droid,Le Droid,1453927427,1453927934,1453927934
http://stackoverflow.com/a/35057342/572635,Using jQuery delay() with css(),80615,jerrygarciuh,jerrygarciuh,1300818858,1512812104,1300819260,https://stackoverflow.com/questions/5396119/using-jquery-delay-with-css,"<p>A tiny jQuery extension can help with this. You might call it <strong>qcss</strong>:</p>

<pre><code>$.fn.extend({
   qcss: function(css) {
      return $(this).queue(function(next) {
         $(this).css(css);
         next();
      });
   }
});
</code></pre>

<p>This lets you write:</p>

<pre><code>$('.an_element')
   .delay(750)
   .qcss({ backgroundColor: 'skyblue' })
   .delay(750)
   .qcss({ backgroundColor: 'springgreen' })
   .delay(750)
   .qcss({ backgroundColor: 'pink' })
   .delay(750)
   .qcss({ backgroundColor: 'slategray' })
</code></pre>

<p>This can be a reasonably elegant way to define a chained animation. Note that in this very simple form, qcss only supports a single object argument containing CSS properties. (Youd have to do a bit more work to support <code>.qcss('color', 'blue')</code> for instance.)</p>

<p>Heres <a href=""https://jsfiddle.net/41gLwcma/2/"" rel=""noreferrer"">an example</a> on jsfiddle.</p>
",Benji XVI,Benji XVI,1453972731,1512812104,1512812104
http://stackoverflow.com/a/35139887/115145,How can you test the parceling of a view with Espresso?,122,ZakTaccardi,,1453916137,1457379409,0,https://stackoverflow.com/questions/35044266/how-can-you-test-the-parceling-of-a-view-with-espresso,"<p>Call <a href=""http://developer.android.com/reference/android/app/Activity.html#recreate()"" rel=""nofollow"">activity.recreate()</a> and the activity will be recreated with its <code>savedInstanceState</code></p>

<pre><code>@Test
public void testStateParceling() throws Exception {
    InstrumentationRegistry.getInstrumentation().runOnMainSync(new Runnable() {
        @Override
        public void run() {
            mainToolbar.updateToolbarWithSelection(MainContentView.DEVICE_ACTIVITY);
            activity.recreate();
        }
    });

    checker.checkToolbarTitle(MainContentView.DEVICE_ACTIVITY);
}
</code></pre>
",ZakTaccardi,Ziem,1454359205,1457379409,1457379409
http://stackoverflow.com/a/3516003/731300,Logging inside threads in a Rails application,4038,Mark Westling,EmFi,1256093534,1282160508,1256101125,https://stackoverflow.com/questions/1598494/logging-inside-threads-in-a-rails-application,"<p>I was scratching my head with the same problem.  For me the answer was as follows:</p>

<pre><code>Thread.new do
  begin
    ...
  ensure
    Rails.logger.flush
  end
end
</code></pre>
",Brad Pardee,,1282160508,1282160508,0
http://stackoverflow.com/a/3516110/393756,Question about the implementation of Bezier Curves?,908,q0987,q0987,1282159830,1452110389,1282165346,https://stackoverflow.com/questions/3515909/question-about-the-implementation-of-bezier-curves,"<p>I think what you are trying to do is to create a smooth curve interpolating the points. To do this, you need to understand the following about Bezier curves:</p>

<p>Say we have two curves with points A1, A2, A3, A4, and B1, B2, B3, and B4.</p>

<p>If the two curves end on the same point, and if the last control point of the first is colinear with the first control point of the next, then the curves will be smooth. So in our example, if:</p>

<ul>
<li>A4 == B1</li>
<li>A3, A4, and B2 are colinear (same as saying A3, B1, B2 are colinear)</li>
</ul>

<p>Then the curves will be smooth.</p>

<p>In order to take an arbitrary list of points and make a smooth curve, we need to force these two conditions to be true.</p>

<p>To do this, lets say that we start with a set of points:</p>

<p><img src=""https://i.stack.imgur.com/0APRY.png"" alt=""Initial Points""></p>

<p>To force the above conditions, lets add some extra points. We'll place a new point at the <strong>midpoint</strong> of every other pair as shown:</p>

<p><img src=""https://i.stack.imgur.com/9jsMi.png"" alt=""With meta points""></p>

<p>We can now draw bezier curves between points 0-3, 3-6, 6-9, etc., and we can be sure that it will form a smooth curve:</p>

<p><img src=""https://i.stack.imgur.com/tXOCi.png"" alt=""Curve drawn""></p>

<p>Hope this helps!</p>

<p>EDIT: Here's a simple python program that implements exactly what was shown above (and I mean exactly). You need to have python and PIL installed:</p>

<pre><code>from PIL import Image
import math

#
#   draws a single point on our image
#
def drawPoint( img, loc, size=5, color=(0,0,0) ):
    px = img.load()
    for x in range(size):
        for y in range(size):
            xloc = loc[0] + x - size/2
            yloc = loc[1] + y - size/2
            px[ xloc, yloc ] = color


#
#   draws a simple bezier curve with 4 points
#            
def drawCurve( img, points ):

    steps = 20
    for i in range(steps):

        t = i / float(steps)

        xloc = math.pow(1-t,3) * points[0][0] \
             + 3*t*math.pow(1-t,2) * points[1][0] \
             + 3*(1-t)*math.pow(t,2) * points[2][0] \
             + math.pow(t,3) * points[3][0]
        yloc = math.pow(1-t,3) * points[0][1] \
             + 3*t*math.pow(1-t,2) * points[1][1] \
             + 3*(1-t)*math.pow(t,2) * points[2][1] \
             + math.pow(t,3) * points[3][1]

        drawPoint( img, (xloc,yloc), size=2 )


#
#   draws a bezier curve with any number of points
#
def drawBezier( img, points ):

    for i in range(0,len(points),3):
        if( i+3 &lt; len(points) ):
            drawCurve( img, points[i:i+4] )


#
#   draws a smooth bezier curve by adding points that
#   force smoothness
#
def drawSmoothBezier( img, points ):

    newpoints = []

    for i in range(len(points)):

        # add the next point (and draw it)
        newpoints.append(points[i])
        drawPoint( img, points[i], color=(255,0,0) )

        if( i%2 == 0 and i&gt;0 and i+1&lt;len(points) ):

            # calculate the midpoint
            xloc = (points[i][0] + points[i+1][0]) / 2.0
            yloc = (points[i][1] + points[i+1][1]) / 2.0

            # add the new point (and draw it)
            newpoints.append( (xloc, yloc) )
            drawPoint( img, (xloc, yloc), color=(0,255,0) )

    drawBezier( img, newpoints )



#   Create the image
myImage = Image.new(""RGB"",(627,271),(255,255,255))

#   Create the points
points = [  (54,172), 
            (121,60), 
            (220,204), 
            (284,56), 
            (376,159), 
            (444,40), 
            (515,228), 
            (595,72) ]

#   Draw the curve
drawSmoothBezier( myImage, points )

#   Save the image
myImage.save(""myfile.png"",""PNG"")
</code></pre>

<p>The line will follow the pattern of the points. If your result is zig-zagged, that's because that's what the lines looked like.</p>
",riwalk,riwalk,1282161115,1452110389,1452110389
http://stackoverflow.com/a/3516243/837709,iPad Safari: How to disable the quick blinking effect when a link has been hit,44123,cat,Fosco,1282161602,1483677459,1282161912,https://stackoverflow.com/questions/3516173/ipad-safari-how-to-disable-the-quick-blinking-effect-when-a-link-has-been-hit,"<p>You could set a transparent color to the <a href=""https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/doc/uid/TP30001266-_webkit_tap_highlight_color"" rel=""noreferrer""><code>-webkit-tap-highlight-color</code> property</a> of that element. </p>

<pre><code>a {
    -webkit-tap-highlight-color: transparent;
}
</code></pre>
",kennytm,kennytm,1282162166,1483677459,1483677459
http://stackoverflow.com/a/35173198/252589,How to group words whose Levenshtein distance is more than 80 percent in Python,1847,python,python,1454487308,1454502158,1454489522,https://stackoverflow.com/questions/35171710/how-to-group-words-whose-levenshtein-distance-is-more-than-80-percent-in-python,"<p>This groups the names</p>

<pre><code>from fuzzywuzzy import fuzz

combined_list = ['rakesh', 'zakesh', 'bikash', 'zikash', 'goldman LLC', 'oldman LLC']
combined_list.append('bakesh')
print('input names:', combined_list)

grs = list() # groups of names with distance &gt; 80
for name in combined_list:
    for g in grs:
        if all(fuzz.ratio(name, w) &gt; 80 for w in g):
            g.append(name)
            break
    else:
        grs.append([name, ])

print('output groups:', grs)
outlist = [el for g in grs for el in g]
print('output list:', outlist)
</code></pre>

<p>producing</p>

<pre><code>input names: ['rakesh', 'zakesh', 'bikash', 'zikash', 'goldman LLC', 'oldman LLC', 'bakesh']
output groups: [['rakesh', 'zakesh', 'bakesh'], ['bikash', 'zikash'], ['goldman LLC', 'oldman LLC']]
output list: ['rakesh', 'zakesh', 'bakesh', 'bikash', 'zikash', 'goldman LLC', 'oldman LLC']
</code></pre>

<p>As you can see, the names are grouped correctly, but the order may not be the one you desire.</p>
",Pynchia,Pynchia,1454492079,1454502158,1454502158
http://stackoverflow.com/a/35220476/1045199,"&quot;Protected Apps&quot; setting on Huawei phones, and how to handle it",52419,jaseelder,Kai Noack,1437926155,1561547209,1486634235,https://stackoverflow.com/questions/31638986/protected-apps-setting-on-huawei-phones-and-how-to-handle-it,"<p>There isn't a setting in the manifest, and Huawei has enabled Tinder because it's a popular app. There isn't a way to know if apps are protected.</p>

<p>Anyway I used <code>ifHuaweiAlert()</code> in <code>onCreate()</code> to show an <code>AlertDialog</code>:</p>

<pre><code>private void ifHuaweiAlert() {
    final SharedPreferences settings = getSharedPreferences(""ProtectedApps"", MODE_PRIVATE);
    final String saveIfSkip = ""skipProtectedAppsMessage"";
    boolean skipMessage = settings.getBoolean(saveIfSkip, false);
    if (!skipMessage) {
        final SharedPreferences.Editor editor = settings.edit();
        Intent intent = new Intent();
        intent.setClassName(""com.huawei.systemmanager"", ""com.huawei.systemmanager.optimize.process.ProtectActivity"");
        if (isCallable(intent)) {
            final AppCompatCheckBox dontShowAgain = new AppCompatCheckBox(this);
            dontShowAgain.setText(""Do not show again"");
            dontShowAgain.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    editor.putBoolean(saveIfSkip, isChecked);
                    editor.apply();
                }
            });

            new AlertDialog.Builder(this)
                    .setIcon(android.R.drawable.ic_dialog_alert)
                    .setTitle(""Huawei Protected Apps"")
                    .setMessage(String.format(""%s requires to be enabled in 'Protected Apps' to function properly.%n"", getString(R.string.app_name)))
                    .setView(dontShowAgain)
                    .setPositiveButton(""Protected Apps"", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            huaweiProtectedApps();
                        }
                    })
                    .setNegativeButton(android.R.string.cancel, null)
                    .show();
        } else {
            editor.putBoolean(saveIfSkip, true);
            editor.apply();
        }
    }
}

private boolean isCallable(Intent intent) {
    List&lt;ResolveInfo&gt; list = getPackageManager().queryIntentActivities(intent,
            PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() &gt; 0;
}

private void huaweiProtectedApps() {
    try {
        String cmd = ""am start -n com.huawei.systemmanager/.optimize.process.ProtectActivity"";
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {
            cmd += "" --user "" + getUserSerial();
        }
        Runtime.getRuntime().exec(cmd);
    } catch (IOException ignored) {
    }
}

private String getUserSerial() {
    //noinspection ResourceType
    Object userManager = getSystemService(""user"");
    if (null == userManager) return """";

    try {
        Method myUserHandleMethod = android.os.Process.class.getMethod(""myUserHandle"", (Class&lt;?&gt;[]) null);
        Object myUserHandle = myUserHandleMethod.invoke(android.os.Process.class, (Object[]) null);
        Method getSerialNumberForUser = userManager.getClass().getMethod(""getSerialNumberForUser"", myUserHandle.getClass());
        Long userSerial = (Long) getSerialNumberForUser.invoke(userManager, myUserHandle);
        if (userSerial != null) {
            return String.valueOf(userSerial);
        } else {
            return """";
        }
    } catch (NoSuchMethodException | IllegalArgumentException | InvocationTargetException | IllegalAccessException ignored) {
    }
    return """";
}
</code></pre>
",Aiuspaktyn,CopsOnRoad,1454664446,1544079685,1544079685
http://stackoverflow.com/a/3522853/481864,How do I convert between big-endian and little-endian values in C++?,262577,Uhall,Yu Hao,1221855816,1562521416,1394889443,https://stackoverflow.com/questions/105252/how-do-i-convert-between-big-endian-and-little-endian-values-in-c,"<p>I took a few suggestions from this post and put them together to form this:</p>

<pre><code>#include &lt;boost/type_traits.hpp&gt;
#include &lt;boost/static_assert.hpp&gt;
#include &lt;boost/detail/endian.hpp&gt;
#include &lt;stdexcept&gt;

enum endianness
{
    little_endian,
    big_endian,
    network_endian = big_endian,

    #if defined(BOOST_LITTLE_ENDIAN)
        host_endian = little_endian
    #elif defined(BOOST_BIG_ENDIAN)
        host_endian = big_endian
    #else
        #error ""unable to determine system endianness""
    #endif
};

namespace detail {

template&lt;typename T, size_t sz&gt;
struct swap_bytes
{
    inline T operator()(T val)
    {
        throw std::out_of_range(""data size"");
    }
};

template&lt;typename T&gt;
struct swap_bytes&lt;T, 1&gt;
{
    inline T operator()(T val)
    {
        return val;
    }
};

template&lt;typename T&gt;
struct swap_bytes&lt;T, 2&gt;
{
    inline T operator()(T val)
    {
        return ((((val) &gt;&gt; 8) &amp; 0xff) | (((val) &amp; 0xff) &lt;&lt; 8));
    }
};

template&lt;typename T&gt;
struct swap_bytes&lt;T, 4&gt;
{
    inline T operator()(T val)
    {
        return ((((val) &amp; 0xff000000) &gt;&gt; 24) |
                (((val) &amp; 0x00ff0000) &gt;&gt;  8) |
                (((val) &amp; 0x0000ff00) &lt;&lt;  8) |
                (((val) &amp; 0x000000ff) &lt;&lt; 24));
    }
};

template&lt;&gt;
struct swap_bytes&lt;float, 4&gt;
{
    inline float operator()(float val)
    {
        uint32_t mem =swap_bytes&lt;uint32_t, sizeof(uint32_t)&gt;()(*(uint32_t*)&amp;val);
        return *(float*)&amp;mem;
    }
};

template&lt;typename T&gt;
struct swap_bytes&lt;T, 8&gt;
{
    inline T operator()(T val)
    {
        return ((((val) &amp; 0xff00000000000000ull) &gt;&gt; 56) |
                (((val) &amp; 0x00ff000000000000ull) &gt;&gt; 40) |
                (((val) &amp; 0x0000ff0000000000ull) &gt;&gt; 24) |
                (((val) &amp; 0x000000ff00000000ull) &gt;&gt; 8 ) |
                (((val) &amp; 0x00000000ff000000ull) &lt;&lt; 8 ) |
                (((val) &amp; 0x0000000000ff0000ull) &lt;&lt; 24) |
                (((val) &amp; 0x000000000000ff00ull) &lt;&lt; 40) |
                (((val) &amp; 0x00000000000000ffull) &lt;&lt; 56));
    }
};

template&lt;&gt;
struct swap_bytes&lt;double, 8&gt;
{
    inline double operator()(double val)
    {
        uint64_t mem =swap_bytes&lt;uint64_t, sizeof(uint64_t)&gt;()(*(uint64_t*)&amp;val);
        return *(double*)&amp;mem;
    }
};

template&lt;endianness from, endianness to, class T&gt;
struct do_byte_swap
{
    inline T operator()(T value)
    {
        return swap_bytes&lt;T, sizeof(T)&gt;()(value);
    }
};
// specialisations when attempting to swap to the same endianess
template&lt;class T&gt; struct do_byte_swap&lt;little_endian, little_endian, T&gt; { inline T operator()(T value) { return value; } };
template&lt;class T&gt; struct do_byte_swap&lt;big_endian,    big_endian,    T&gt; { inline T operator()(T value) { return value; } };

} // namespace detail

template&lt;endianness from, endianness to, class T&gt;
inline T byte_swap(T value)
{
    // ensure the data is only 1, 2, 4 or 8 bytes
    BOOST_STATIC_ASSERT(sizeof(T) == 1 || sizeof(T) == 2 || sizeof(T) == 4 || sizeof(T) == 8);
    // ensure we're only swapping arithmetic types
    BOOST_STATIC_ASSERT(boost::is_arithmetic&lt;T&gt;::value);

    return detail::do_byte_swap&lt;from, to, T&gt;()(value);
}
</code></pre>
",Steve Lorimer,,1282228573,1282228573,0
http://stackoverflow.com/a/35318409/2422398,Flask-Script command that passes all remaining args to nose?,1766,ddinchev,,1455112736,1479849083,0,https://stackoverflow.com/questions/35317206/flask-script-command-that-passes-all-remaining-args-to-nose,"<p>In the sources of <code>flask_script</code> you can see that the <code>""too many arguments""</code> error is prevented when the executed <code>Command</code> has the attribute <code>capture_all_args</code> set to <code>True</code> which isn't documented anywhere.</p>

<p>You can set that attribute on the class just before you run the manager</p>

<pre><code>if __name__ == ""__main__"":
    from flask.ext.script import Command
    Command.capture_all_args = True
    manager.run()
</code></pre>

<p>Like this additional arguments to the manager are always accepted.</p>

<p>The downside of this quick fix is that you cannot register options or arguments to the commands the normal way anymore.</p>

<p>If you still need that feature you could subclass the <code>Manager</code> and override the <code>command</code> decorator like this</p>

<pre><code>class MyManager(Manager):
    def command(self, capture_all=False):
        def decorator(func):
            command = Command(func)
            command.capture_all_args = capture_all
            self.add_command(func.__name__, command)

            return func
        return decorator
</code></pre>

<p>Then you can use the <code>command</code> decorator like this</p>

<pre><code>@manager.command(True)  # capture all arguments
def use_all(*args):
    print(""args:"", args[0])

@manager.command()  # normal way of registering arguments
def normal(name):
    print(""name"", name)
</code></pre>

<p>Note that for some reason <code>flask_script</code> requires <code>use_all</code> to accept a varargs but will store the list of arguments in <code>args[0]</code> which is a bit strange. <code>def use_all(args):</code> does not work and fails with <code>TypeError ""got multiple values for argument 'args'""</code></p>
",Wombatz,,1455115912,1455115912,0
http://stackoverflow.com/a/35328409/298171,base64 decode snippet in c++,94667,joeld,,1223425526,1536762151,0,https://stackoverflow.com/questions/180947/base64-decode-snippet-in-c,"<p>My variation on @DaedalusAlpha answer.
It avoids copying the parameters at the expense of a couple of tests.</p>

<p>Uses uint8_t instead of BYTE.</p>

<p>Adds some handy functions for dealing with strings, although usually the input data is binary and may have zero bytes inside, so typically should not be manipulated as a string (which often implies null-terminated data).</p>

<p>Also adds some casts to fix compiler warnings (at least on GCC, I haven't run it through MSVC yet).</p>

<p>part of base64.hpp:</p>

<pre><code>   void base64_encode(string &amp; out, const vector&lt;uint8_t&gt;&amp; buf);
   void base64_encode(string &amp; out, const uint8_t* buf, size_t bufLen);
   void base64_encode(string &amp; out, string const&amp; buf);

   void base64_decode(vector&lt;uint8_t&gt; &amp; out, string const&amp; encoded_string);

   // use this if you know the output should be a valid string
   void base64_decode(string &amp; out, string const&amp; encoded_string);
</code></pre>

<p>base64.cpp:</p>

<pre><code>static const uint8_t from_base64[128] = {
   // 8 rows of 16 = 128
   // note: only require 123 entries, as we only lookup for &lt;= z , which z=122
               255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,  
               255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
               255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,  62, 255,  62, 255,  63, 
                52,  53,  54,  55,  56,  57,  58,  59,  60,  61, 255, 255,   0, 255, 255, 255, 
               255,   0,   1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,
                15,  16,  17,  18,  19,  20,  21,  22,  23,  24,  25, 255, 255, 255, 255,  63,
               255,  26,  27,  28,  29,  30,  31,  32,  33,  34,  35,  36,  37,  38,  39,  40, 
                41,  42,  43,  44,  45,  46,  47,  48,  49,  50,  51, 255, 255, 255, 255, 255
            };

static const char to_base64[65] = 
            ""ABCDEFGHIJKLMNOPQRSTUVWXYZ""
            ""abcdefghijklmnopqrstuvwxyz""
            ""0123456789+/"";


void base64_encode(string &amp; out, string const&amp; buf)
{
   if (buf.empty())
      base64_encode(out, NULL, 0);
   else
      base64_encode(out, reinterpret_cast&lt;uint8_t const*&gt;(&amp;buf[0]), buf.size());
}


void base64_encode(string &amp; out, std::vector&lt;uint8_t&gt; const&amp; buf)
{
   if (buf.empty())
      base64_encode(out, NULL, 0);
   else
      base64_encode(out, &amp;buf[0], buf.size());
}

void base64_encode(string &amp; ret, uint8_t const* buf, size_t bufLen)
{
   // Calculate how many bytes that needs to be added to get a multiple of 3
   size_t missing = 0;
   size_t ret_size = bufLen;
   while ((ret_size % 3) != 0)
   {
      ++ret_size;
      ++missing;
   }

   // Expand the return string size to a multiple of 4
   ret_size = 4*ret_size/3;

   ret.clear();
   ret.reserve(ret_size);

   for (size_t i = 0; i &lt; ret_size/4; ++i)
   {
      // Read a group of three bytes (avoid buffer overrun by replacing with 0)
      const size_t index = i*3;
      const uint8_t b3_0 = (index+0 &lt; bufLen) ? buf[index+0] : 0;
      const uint8_t b3_1 = (index+1 &lt; bufLen) ? buf[index+1] : 0;
      const uint8_t b3_2 = (index+2 &lt; bufLen) ? buf[index+2] : 0;

      // Transform into four base 64 characters
      const uint8_t b4_0 =                        ((b3_0 &amp; 0xfc) &gt;&gt; 2);
      const uint8_t b4_1 = ((b3_0 &amp; 0x03) &lt;&lt; 4) + ((b3_1 &amp; 0xf0) &gt;&gt; 4);
      const uint8_t b4_2 = ((b3_1 &amp; 0x0f) &lt;&lt; 2) + ((b3_2 &amp; 0xc0) &gt;&gt; 6);
      const uint8_t b4_3 = ((b3_2 &amp; 0x3f) &lt;&lt; 0);

      // Add the base 64 characters to the return value
      ret.push_back(to_base64[b4_0]);
      ret.push_back(to_base64[b4_1]);
      ret.push_back(to_base64[b4_2]);
      ret.push_back(to_base64[b4_3]);
   }

   // Replace data that is invalid (always as many as there are missing bytes)
   for (size_t i = 0; i != missing; ++i)
      ret[ret_size - i - 1] = '=';
}


template &lt;class Out&gt;
void base64_decode_any( Out &amp; ret, std::string const&amp; in)
{
   typedef typename Out::value_type T;

   // Make sure the *intended* string length is a multiple of 4
   size_t encoded_size = in.size();

   while ((encoded_size % 4) != 0)
      ++encoded_size;

   const size_t N = in.size();
   ret.clear();
   ret.reserve(3*encoded_size/4);

   for (size_t i = 0; i &lt; encoded_size; i += 4)
   {
      // Note: 'z' == 122

      // Get values for each group of four base 64 characters
      const uint8_t b4_0 = (            in[i+0] &lt;= 'z') ? from_base64[static_cast&lt;uint8_t&gt;(in[i+0])] : 0xff;
      const uint8_t b4_1 = (i+1 &lt; N and in[i+1] &lt;= 'z') ? from_base64[static_cast&lt;uint8_t&gt;(in[i+1])] : 0xff;
      const uint8_t b4_2 = (i+2 &lt; N and in[i+2] &lt;= 'z') ? from_base64[static_cast&lt;uint8_t&gt;(in[i+2])] : 0xff;
      const uint8_t b4_3 = (i+3 &lt; N and in[i+3] &lt;= 'z') ? from_base64[static_cast&lt;uint8_t&gt;(in[i+3])] : 0xff;

      // Transform into a group of three bytes
      const uint8_t b3_0 = ((b4_0 &amp; 0x3f) &lt;&lt; 2) + ((b4_1 &amp; 0x30) &gt;&gt; 4);
      const uint8_t b3_1 = ((b4_1 &amp; 0x0f) &lt;&lt; 4) + ((b4_2 &amp; 0x3c) &gt;&gt; 2);
      const uint8_t b3_2 = ((b4_2 &amp; 0x03) &lt;&lt; 6) + ((b4_3 &amp; 0x3f) &gt;&gt; 0);

      // Add the byte to the return value if it isn't part of an '=' character (indicated by 0xff)
      if (b4_1 != 0xff) ret.push_back( static_cast&lt;T&gt;(b3_0) );
      if (b4_2 != 0xff) ret.push_back( static_cast&lt;T&gt;(b3_1) );
      if (b4_3 != 0xff) ret.push_back( static_cast&lt;T&gt;(b3_2) );
   }
}

void base64_decode(vector&lt;uint8_t&gt; &amp; out, string const&amp; encoded_string)
{
   base64_decode_any(out, encoded_string);
}

void base64_decode(string &amp; out, string const&amp; encoded_string)
{
   base64_decode_any(out, encoded_string);
}
</code></pre>
",elegant dice,,1455149001,1455149001,0
http://stackoverflow.com/a/3533725/2280888,"Member not found IE error (IE 6, 7, 8, 9)",14170,yekta,TweeZz,1282314086,1430241232,1324461670,https://stackoverflow.com/questions/3531751/member-not-found-ie-error-ie-6-7-8-9,"<p>Ok I have found the problem.</p>

<p>To sum it up, basically IE will not pass a event to another function if that function call is within a setTimeout. </p>

<p>So you can trick IE by creating a copy of the event and passing that, here is a example of that...</p>

<pre><code>var eventCopy = {};
for (var i in event) {
    eventCopy[i] = event[i];    
}
</code></pre>

<p>Then just send your function the eventCopy, even though this is a 'total' hack.</p>

<pre><code>setTimeout(function () { yourFunction(eventCopy), yourDelayTime);
</code></pre>

<p>And voila it will work.  </p>

<p>I should add, that Internet Explorer will merely create a reference to the global window event which is why we need the copy of event.  This is because by the time setTimeout calls the function, windows.event has already passed,</p>

<p>Bottom line... don't try to send a event inside a setTimeout because IE won't accept it.  This is true for IE 6, 7 &amp; 8 from my testing.  </p>
",yekta,New Alexandria,1282328496,1381172942,1381172942
http://stackoverflow.com/a/35364371/841108,copying &amp; selecting a span programmatically in Javascript (with clipboard.js),711,Basile Starynkevitch,Community,1455197884,1455342405,1495541423,https://stackoverflow.com/questions/35340862/copying-selecting-a-span-programmatically-in-javascript-with-clipboard-js,"<p>Copying from the clipboard from anything other than IE needs to happen on an editable element.  The most common way to handle this is to create a hidden textarea, put the content in the text area and then </p>

<pre><code>textArea.select();
document.execCommand('Copy');
</code></pre>

<p>For IE, you can just use </p>

<pre><code>if(window.clipboardData){
    window.clipboardData.setData('Text',
        uitem.innerText);
}
</code></pre>

<p>I wrote a pretty extensive article explaining how this all works and I have a project on GitHub with the resulting code.</p>

<p><a href=""http://blog.dmbcllc.com/cross-browser-javascript-copy-and-paste/"" rel=""nofollow"">http://blog.dmbcllc.com/cross-browser-javascript-copy-and-paste/</a> </p>

<p>It took me months to sort out all of the conflicting advice available by searching Google because HOW you do this keeps changes as the browsers ""mature"".</p>
",Dave Bush,,1455285401,1455285401,0
http://stackoverflow.com/a/3540295/1048589,What is the best way to detect a mobile device?,1390486,superUntitled,mplungjan,1282152142,1562568484,1556108832,https://stackoverflow.com/questions/3514784/what-is-the-best-way-to-detect-a-mobile-device,"<p>Instead of using jQuery you can use simple JavaScript to detect it:</p>

<pre><code>if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
 // some code..
}
</code></pre>

<p>Or you can combine them both to make it more accessible through jQuery...</p>

<pre><code>$.browser.device = (/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));
</code></pre>

<p>Now <code>$.browser</code> will return <code>""device""</code> for all above devices</p>

<p>Note: <code>$.browser</code> removed on <a href=""http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed"" rel=""noreferrer""><strong>jQuery v1.9.1</strong></a>. But you can use this by using jQuery migration plugin <a href=""https://stackoverflow.com/a/15072522/2724173""><strong>Code</strong></a></p>

<hr>

<p>A more thorough version:</p>

<pre><code>var isMobile = false; //initiate as false
// device detection
if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
    || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) { 
    isMobile = true;
}
</code></pre>
",sweets-BlingBling,K.Ds,1282454786,1522444115,1522444115
http://stackoverflow.com/a/35458157/651779,Is there an equivalent function for anova.lm() in Java?,683,Niek de Klein,axelclk,1455489827,1559273524,1559273524,https://stackoverflow.com/questions/35398918/is-there-an-equivalent-function-for-anova-lm-in-java,"<p>You're very much misunderstanding ANOVA in the case where you compare two regressions. That's not an ANOVA in the sense of <code>oneWayAnova</code>. The equivalent of <code>onewayAnova</code> in R is the function <code>aov</code>. The function <code>anova</code> on the other hand implements a multitude of tests for comparison of models, and the name <code>anova</code> is confusing to say the least...</p>

<p>If you compare two regression models, you want to do an F test on sums of squares. What you do in your code, is an one-way ANOVA to see if the two sets of regression parameters differ significantly. That's not what you want to do, but that's exactly what your JAVA code is doing.</p>

<p>In order to calculate the correct F test, you need to do the following:</p>

<ol>
<li><p>calculate MSE for the largest model by dividing the Residual Sum of Squares (RSS) by the degrees of freedom (df) (in the R table :  0.77053 / 6</p></li>
<li><p>calculate the MSEdifference by substracting the RSS of both models (result is ""Sum of Sq."" in the R table), substracting the df for both models (result is ""Df"" in the R table), and divide these numbers.</p></li>
<li><p>Divide 2 by 1 and you have the F value</p></li>
<li><p>calculate the p-value using the F value in 3 and for df the df-difference in the numerator and df of the largest model in the denominator.</p></li>
</ol>

<p>As far as I know, the class OLSMultipleLinearRegression doesn't have any convenient methods to extract the number of degrees of freedom, so this is not straight-forward to do in Java. You'll have to calculate the df manually and then use the class <code>FDistribution</code> to calculate the p value.</p>

<p>eg:</p>

<pre><code>OLSMultipleLinearRegression regr = new OLSMultipleLinearRegression();
regr.newSampleData(y, x);
double SSR1 = regr.calculateResidualSumOfSquares();
double df1 = y.length - (x[0].length + 1); 
    //df = n - number of coefficients, including intercept

regr.newSampleData(y, xb);
double SSR2 = regr.calculateResidualSumOfSquares();
double df2 = y.length - (xb[0].length + 1);

double MSE = SSR2/df2; // EDIT: You need the biggest model here!
double MSEdiff = Math.abs ((SSR2 - SSR1) / (df2 - df1));
double dfdiff = Math.abs(df2 - df1);

double Fval = MSEdiff / MSE;

FDistribution Fdist = new FDistribution(dfdiff, df2);
double pval = 1 - Fdist.cumulativeProbability(Fval);
</code></pre>

<p>Now both the F value and the p value should be exactly what you see in the anova() table of R. <code>df1</code> and <code>df2</code> are the column <code>Res.Df</code> in the R table, the difference should be <code>Df</code> in the R table, and <code>MSEdiff</code> should be the same as <code>Sum of Sq.</code> divided by <code>Df</code> from the R table.</p>

<p>Disclaimer: I'm a bad JAVA programmer, so code above is more conceptual than actual code. Please look for typos or stupid mistakes and check the documentation of the <code>FDistribution</code> class I used here :</p>

<p><a href=""https://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/distribution/FDistribution.html#cumulativeProbability%28double%29"" rel=""nofollow"">https://commons.apache.org/proper/commons-math/apidocs/org/apache/commons/math3/distribution/FDistribution.html#cumulativeProbability%28double%29</a></p>

<p>And now you know why statisticians use R instead of Java ;-)</p>

<hr>

<p>EDIT : The <code>FDistribution</code> used in the code above is the class</p>

<pre><code>org.apache.commons.math3.distribution.FDistribution
</code></pre>

<p>There's also an FDistribution in JSci :</p>

<pre><code>JSci.maths.statistics.FDistribution
</code></pre>

<p>If you use that one, the last part of the code becomes:</p>

<pre><code>FDistribution Fdist = new FDistribution(dfdiff, df2);
double pval = 1 - Fdist.cumulative(Fval);
</code></pre>

<p>Depending on the exact implementation, the cumulative probabilities might differ slightly. I have alas no idea about the difference and/or which one can be trusted better.</p>
",Joris Meys,Joris Meys,1455716006,1455787644,1455787644
http://stackoverflow.com/a/35477351/535646,Splitting a large Pdf file with PDFBox gets large result files,1821,Nuria,Nuria,1455715395,1455886300,1455886300,https://stackoverflow.com/questions/35457952/splitting-a-large-pdf-file-with-pdfbox-gets-large-result-files,"<p>Thx! Tilman you are right, the PDFSplit command generates smaller files. I checked the PDFSplit code out and found that it removes the page links to avoid not needed resources.</p>

<p>Code extracted from Splitter.class :</p>

<pre><code>private void processAnnotations(PDPage imported) throws IOException
    {
        List&lt;PDAnnotation&gt; annotations = imported.getAnnotations();
        for (PDAnnotation annotation : annotations)
        {
            if (annotation instanceof PDAnnotationLink)
            {
                PDAnnotationLink link = (PDAnnotationLink)annotation;   
                PDDestination destination = link.getDestination();
                if (destination == null &amp;&amp; link.getAction() != null)
                {
                    PDAction action = link.getAction();
                    if (action instanceof PDActionGoTo)
                    {
                        destination = ((PDActionGoTo)action).getDestination();
                    }
                }
                if (destination instanceof PDPageDestination)
                {
                    // TODO preserve links to pages within the splitted result  
                    ((PDPageDestination) destination).setPage(null);
                }
            }
            else
            {
                // TODO preserve links to pages within the splitted result  
                annotation.setPage(null);
            }
        }
    }
</code></pre>

<p>So eventually my code looks like this:</p>

<pre><code>PDDocument documentoPdf = 
        PDDocument.loadNonSeq(new File(""docs_compuestos/50.pdf""), new RandomAccessFile(new File(""./tmp/t""), ""rw""));

        int numPages = documentoPdf.getNumberOfPages();
        List pages = documentoPdf.getDocumentCatalog().getAllPages();


        int previusQR = 0;
        for(int i =0; i&lt;numPages; i++){
            PDPage firstPage = (PDPage) pages.get(i);
            String qrText ="""";


            BufferedImage firstPageImage = firstPage.convertToImage(BufferedImage.TYPE_USHORT_565_RGB , 200);


            firstPage =null;

            try {
                qrText = readQRWithQRCodeMultiReader(firstPageImage, hintMap);
            } catch (NotFoundException e) {
                e.printStackTrace();
            } finally {
                firstPageImage = null;
            }


        if(i != 0 &amp;&amp; qrText!=null){
                    PDDocument outputDocument = new PDDocument();
                    outputDocument.setDocumentInformation(documentoPdf.getDocumentInformation());
                    outputDocument.getDocumentCatalog().setViewerPreferences(
                            documentoPdf.getDocumentCatalog().getViewerPreferences());


                    for(int j = previusQR; j&lt;i; j++){
                        PDPage importedPage = outputDocument.importPage((PDPage)pages.get(j));

                        importedPage.setCropBox( ((PDPage)pages.get(j)).findCropBox() );
                        importedPage.setMediaBox( ((PDPage)pages.get(j)).findMediaBox() );
                        // only the resources of the page will be copied
                        importedPage.setResources( ((PDPage)pages.get(j)).getResources() );
                        importedPage.setRotation( ((PDPage)pages.get(j)).findRotation() );

                        processAnnotations(importedPage);


                    }


                    File f = new File(""./splitting_files/""+previusQR+"".pdf"");

                    previusQR = i;

                    outputDocument.save(f);
                    outputDocument.close();
                }
            }


        }
</code></pre>

<p>Thank you very much!!</p>
",Nuria,,1455787293,1455787293,0
http://stackoverflow.com/a/35514777/1221924,Listen to keypress with asyncio,3783,kharandziuk,kharandziuk,1454674145,1505901613,1454683154,https://stackoverflow.com/questions/35223896/listen-to-keypress-with-asyncio,"<p>So the link provided by Andrea Corbellini is a clever and thorough solution to the problem, but also quite complicated.  If all you want to do is prompt your user to enter some input (or simulate raw_input), I prefer to use the much simpler solution:</p>

<pre><code>import sys
import functools
import asyncio as aio

class Prompt:
    def __init__(self, loop=None):
        self.loop = loop or aio.get_event_loop()
        self.q = aio.Queue(loop=self.loop)
        self.loop.add_reader(sys.stdin, self.got_input)

    def got_input(self):
        aio.ensure_future(self.q.put(sys.stdin.readline()), loop=self.loop)

    async def __call__(self, msg, end='\n', flush=False):
        print(msg, end=end, flush=flush)
        return (await self.q.get()).rstrip('\n')

prompt = Prompt()
raw_input = functools.partial(prompt, end='', flush=True)

async def main():
    # wait for user to press enter
    await prompt(""press enter to continue"")

    # simulate raw_input
    print(await raw_input('enter something:'))

loop = aio.get_event_loop()
loop.run_until_complete(main())
loop.close()
</code></pre>
",bj0,,1455915079,1455915079,0
http://stackoverflow.com/a/35576069/5320693,commercetools: How to use getDiscountedPricePerQuantity()?,97,Hesham Massoud,Dalek,1456223011,1456227250,1456226746,https://stackoverflow.com/questions/35574793/commercetools-how-to-use-getdiscountedpriceperquantity,"<p>Let's say you have a discount from 10 .</p>

<p>If you want to apply this discount to a cart with 2 items, then each item is discounted from 5 . That is the simple case. And in that case, the list contains one element with a quantity of 2.</p>

<p>But if the cart has 3 items, then the discount cannot be applied equally to all items. 2 items should receive a discount of 3,33  and one item should receive a discount of 3,34  so that the total is 10 . In that case, the list should contain 2 elements:</p>

<ul>
<li>one element with a quantity of 2 with a discount of 3,33 </li>
<li>one element with a quantity of 1 with a discount of 3,34 </li>
</ul>
",Yann Simon,Yann Simon,1456226174,1456227250,1456227250
http://stackoverflow.com/a/35591188/4053176,Replacing illegal character in fileName,65972,bbholzbb,bbholzbb,1361824159,1519474333,1361824250,https://stackoverflow.com/questions/15075890/replacing-illegal-character-in-filename,"<p>Even simpler</p>

<pre><code>myString = myString.replaceAll(""[^\\w.-]"", ""_"");
</code></pre>

<p>Predefined Character Classes:</p>

<ul>
<li><code>\w</code>     A word character: <code>[a-zA-Z_0-9]</code></li>
</ul>
",IvanRF,,1456274607,1456274607,0
http://stackoverflow.com/a/3561711/5040035,Is there a RegExp.escape function in Javascript?,95719,Lance Pollard,,1282688553,1555659256,0,https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript,"<p>The function linked above is insufficient. It fails to escape <code>^</code> or <code>$</code> (start and end of string), or <code>-</code>, which in a character group is used for ranges.</p>

<p>Use this function:</p>

<pre><code>RegExp.escape= function(s) {
    return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&amp;');
};
</code></pre>

<p>While it may seem unnecessary at first glance, escaping <code>-</code> (as well as <code>^</code>) makes the function suitable for escaping characters to be inserted into a character class as well as the body of the regex.</p>

<p>Escaping <code>/</code> makes the function suitable for escaping characters to be used in a JS regex literal for later eval.</p>

<p>As there is no downside to escaping either of them it makes sense to escape to cover wider use cases.</p>

<p>And yes, it is a disappointing failing that this is not part of standard JavaScript.</p>
",bobince,nhahtdh,1282691347,1417059339,1417059339
http://stackoverflow.com/a/3561711/830737,Is there a RegExp.escape function in Javascript?,95719,Lance Pollard,,1282688553,1555659256,0,https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript,"<p>The function linked above is insufficient. It fails to escape <code>^</code> or <code>$</code> (start and end of string), or <code>-</code>, which in a character group is used for ranges.</p>

<p>Use this function:</p>

<pre><code>RegExp.escape= function(s) {
    return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&amp;');
};
</code></pre>

<p>While it may seem unnecessary at first glance, escaping <code>-</code> (as well as <code>^</code>) makes the function suitable for escaping characters to be inserted into a character class as well as the body of the regex.</p>

<p>Escaping <code>/</code> makes the function suitable for escaping characters to be used in a JS regex literal for later eval.</p>

<p>As there is no downside to escaping either of them it makes sense to escape to cover wider use cases.</p>

<p>And yes, it is a disappointing failing that this is not part of standard JavaScript.</p>
",bobince,nhahtdh,1282691347,1417059339,1417059339
http://stackoverflow.com/a/35633411/1199911,AppCompat 23.2 use VectorDrawableCompat with RemoteViews (AppWidget) on API&lt;21,19422,araks,,1456419026,1508667475,0,https://stackoverflow.com/questions/35633410/appcompat-23-2-use-vectordrawablecompat-with-remoteviews-appwidget-on-api21,"<p><strong>UPDATE 22/10/2017</strong></p>

<p>As noted by @user924 now <em>AppCompatDrawableManager</em> access is restricted to its own library.
<em>ContextCompat.getDrawable(...)</em> should do the trick.</p>

<p><strong>UPDATE 05/09/2016</strong></p>

<p>As noted by @kirill-kulakov in its answer, the latest updates of the Support Library restricted the TintContextWrapper visibility to its own package.
I'm updating my answer to remove the incorrect code, but please thank Kirill for the correction!
<br>
<br></p>

<h1>VectorDrawable and RemoteViews pre-Lollipop</h1>

<p>You can avoid adding alternative rasterized versions of your vector drawable resources <strike>with an easy <strong>hack</strong>: use AppCompat <em>TintResources</em> through <em>TintContextWrapper</em></strike> <strike>using <em>AppCompatDrawableManager</em></strike> using <em>ContextCompat</em>.</p>

<p><strike><em>TintResources</em></strike> <strike><em>AppCompatDrawableManager</em></strike> <em>ContextCompat</em> is the class that among other things, on pre-Lollipop devices, parses the <em>VectorDrawable</em>s XML files and convert them into <em>VectorDrawableCompat</em> instances that can be used all the way down to API 7.</p>

<p>Then, once you have a <em>VectorDrawableCompat</em> instance, rasterize it onto a Bitmap. You'll later use this bitmap in a remote <em>ImageView</em>.</p>

<p><br/></p>

<h2>Before we begin: AppCompat Library</h2>

<p>Ensure you are using Android Studio 2.0+ and have configured your app <strong><code>build.gradle</code></strong> file as follows:</p>

<pre><code>android {
  defaultConfig {
    vectorDrawables.useSupportLibrary = true
  }
}

dependencies {
  compile 'com.android.support:appcompat-v7:23.3.0'
}
</code></pre>

<p><br/></p>

<h2>Update your AppWidgetProvider</h2>

<p>First of all: don't set your vector drawable resources inside your <em>RemoteViews</em> layout file (neither <code>android:src</code> nor <code>app:srcCompat</code> will work). You'll have to set them programmatically.</p>

<p>Inside your <em>AppWidgetProvider</em> class set the vector resource or a rasterized version depending on the API level:</p>

<pre><code>RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.appwidget_layout);

if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {
  remoteViews.setImageViewResource(R.id.imageView, R.drawable.vector);

} else {
  Drawable d = ContextCompat.getDrawable(context, R.drawable.vector);
  Bitmap b = Bitmap.createBitmap(d.getIntrinsicWidth(),
                                 d.getIntrinsicHeight(),
                                 Bitmap.Config.ARGB_8888);
  Canvas c = new Canvas(b);
  d.setBounds(0, 0, c.getWidth(), c.getHeight());
  d.draw(c);
  remoteViews.setImageViewBitmap(R.id.imageView, b);
}
</code></pre>

<p><br/></p>

<h2>References</h2>

<ul>
<li>ContextCompat <a href=""https://github.com/aosp-mirror/platform_frameworks_support/blob/master/compat/java/android/support/v4/content/ContextCompat.java#L349"" rel=""noreferrer"">source code</a></li>
<li>Chris Banes' <a href=""https://medium.com/@chrisbanes/appcompat-v23-2-age-of-the-vectors-91cbafa87c88#.f1ynl4cwk"" rel=""noreferrer"">AppCompat v23.2 - Age of the vectors</a> blog post introduces <em>VectorDrawableCompat</em> and explains the hack that AppCompat uses to make them work on pre-Lollipop devices.</li>
</ul>
",araks,araks,1456419026,1508667475,1508667475
http://stackoverflow.com/a/35729068/3962551,Activity has been destroyed FragmentTransaction.commit(),1494,Edoardo Goffredo,,1456851684,1456852199,0,https://stackoverflow.com/questions/35728890/activity-has-been-destroyed-fragmenttransaction-commit,"<p>AsyncTasks continue to run after the activity has been destroyed. What happens here is that your async task completes after the activity is destroyed and tries to access the now dead activity, throwing the exception - you can't add a fragment to an activity that has finished. You have to check in onPostExecute if the activity is still alive.</p>

<p>AsyncTasks are tricky because they hold a reference to the activity and can cause this kind of issue (where the activity is dead when the task completes). You could consider a fragment with setRetainInstance(true) to run your async tasks, or maybe an IntentService.</p>
",Francesc,,1456852199,1456852199,0
http://stackoverflow.com/a/3580132/129269,Is setTimeout with no delay the same as executing the function instantly?,16105,Aishwar,Daniel Vandersluis,1282861794,1484882721,1282862317,https://stackoverflow.com/questions/3580068/is-settimeout-with-no-delay-the-same-as-executing-the-function-instantly,"<p>You are missing the millisecond parameter...</p>

<pre><code>setTimeout(function() { /*something*/ }, 0);
</code></pre>

<p>The 0 sets the delay to 0 but what it actually does is to let your function <em>""jump the queue""</em> of the browser execution list.  The browser has a bunch of things to do such as rendering objects on the page, and by calling this, your function will run as soon as the browser has some cycles.</p>
",Gary,Qwerty,1282862425,1464781423,1464781423
http://stackoverflow.com/a/35885/1440785,How can a Java program get its own process ID?,242607,Dmitry Shechtman,mrsrinivas,1220090005,1545053520,1519444357,https://stackoverflow.com/questions/35842/how-can-a-java-program-get-its-own-process-id,"<p>There exists no platform-independent way that can be guaranteed to work in all jvm implementations.
<code>ManagementFactory.getRuntimeMXBean().getName()</code> looks like the best (closest) solution. It's short, and <em>probably</em> works in every implementation in wide use.</p>

<p>On linux+windows it returns a value like <code>12345@hostname</code> (<code>12345</code> being the process id). Beware though that <a href=""http://docs.oracle.com/javase/6/docs/api/java/lang/management/RuntimeMXBean.html#getName%28%29"" rel=""noreferrer"">according to the docs</a>, there are no guarantees about this value:</p>

<blockquote>
  <p>Returns the name representing the running Java virtual machine. The
  returned name string can be any arbitrary string and a Java virtual
  machine implementation can choose to embed platform-specific useful
  information in the returned name string. Each running virtual machine
  could have a different name.</p>
</blockquote>

<p><strong>In Java 9</strong> the new <a href=""https://docs.oracle.com/javase/9/docs/api/java/lang/ProcessHandle.html"" rel=""noreferrer"">process API</a> can be used:</p>

<pre><code>long pid = ProcessHandle.current().pid();
</code></pre>
",Wouter Coekaerts,bacar,1220094677,1520516780,1520516780
http://stackoverflow.com/a/3596141/763010,How to remove specific value from array using jQuery,602272,Elankeeran,Cur,1283107529,1546946843,1500186268,https://stackoverflow.com/questions/3596089/how-to-remove-specific-value-from-array-using-jquery,"<p>With jQuery, you can do a single-line operation like this:</p>

<p><strong>Example:</strong> <a href=""http://jsfiddle.net/HWKQY/"" rel=""noreferrer"">http://jsfiddle.net/HWKQY/</a></p>

<pre><code>y.splice( $.inArray(removeItem, y), 1 );
</code></pre>

<p>Uses the native <a href=""http://www.w3schools.com/jsref/jsref_splice.asp"" rel=""noreferrer""><code>.splice()</code></a> and jQuery's <a href=""http://api.jquery.com/jquery.inarray/"" rel=""noreferrer""><code>$.inArray()</code></a>.</p>
",user113716,,1283108506,1283108506,0
http://stackoverflow.com/a/36003566/646979,CSS inject not working with Gulp + Browsersync,3370,user3130064,user3130064,1441900927,1503444320,1441901089,https://stackoverflow.com/questions/32506684/css-inject-not-working-with-gulp-browsersync,"<p>Sourcemaps!</p>

<p>One of the annoying things that I spent too much time debugging is why browser-sync reloads the whole page instead of injecting CSS changes.</p>

<p>After diving into browser-sync files I found out that there default list for injecting files is set to:</p>

<pre><code>injectFileTypes: [""css"", ""png"", ""jpg"", ""jpeg"", ""svg"", ""gif"", ""webp""],
</code></pre>

<p>The thing that might not be very apparent is that if any other file that is not on <code>injectFileTypes</code> gets changes the browser will reload. In my case the <strong>extra</strong> files that was changed were the sourcemap files <code>*.css.map</code>. </p>

<p>If you don't explicitly tell browsersync to ignore sourcemap files when changing or in the initial config the browser will always reload. There's two ways I believe to do this, one through the <code>browsersync.stream</code> method like the following:</p>

<pre><code>  // Only stream the matching files. Ignore the rest.
  .pipe(browsersync.stream({match: '**/*.css'}));
</code></pre>

<p>Or on initializing browsersync like the following through the <code>files</code> option with excluding pattern to the sourcemaps <code>files: ['!**/*.maps.css']</code>.</p>

<p>I like the first one since I am using browsersync with nodemon as a proxy so I don't really use the files argument and setup my own gulp watch statements.</p>

<p>One other way to do this is to update the <code>injectFileTypes</code> option when initializing browsersync, however, I am not sure if the CSS sourcemaps are <em>injectable</em>.</p>

<p>I hope this help someone having the same issue!</p>
",mkhatib,,1458021014,1458021014,0
http://stackoverflow.com/a/3617710/315935,"jQuery $.ajax, error handler doesn&#39;t work",9601,gotch4,gotch4,1283334894,1283418513,1283418513,https://stackoverflow.com/questions/3616823/jquery-ajax-error-handler-doesnt-work,"<p><strong>UPDATED</strong>: Try to replace the test <code>(data == null)</code> to the <code>(XMLHttpRequest.readyState === 4 &amp;&amp; XMLHttpRequest.status === 0)</code>.</p>

<p>In W3C Candidate Recommendation about <code>XMLHttpRequest</code> standard is described that it must exist so named ""error flag"" which should be used to indicates some type of network error or abortion. In case of such kind of errors the status in the <code>XMLHttpRequest</code> will be 0 instead of 200 (""OK""), 201 (""Created""), 304 (""Not Modified"") and so on. To be exactly corresponds to <a href=""http://www.w3.org/TR/XMLHttpRequest/#the-status-attribute"" rel=""noreferrer"">http://www.w3.org/TR/XMLHttpRequest/#the-status-attribute</a> the <code>XMLHttpRequest.status</code> can be 0 in case of <code>XMLHttpRequest.readyState</code> equal to 0 or 1 (""UNSENT"" or ""OPENED""). Another case is <code>XMLHttpRequest.readyState</code> equal to 4 (""DONE"") and ""error flag"" is true. If we have no from these two cases the <code>XMLHttpRequest.status</code> must be a HTTP status code. Under <a href=""http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html"" rel=""noreferrer"">http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html</a> or <a href=""http://www.w3.org/Protocols/HTTP/1.0/spec.html#Status-Codes"" rel=""noreferrer"">http://www.w3.org/Protocols/HTTP/1.0/spec.html#Status-Codes</a> there are no HTTP status code equal to 0. So it seems to my that you can do following</p>

<pre><code>jQuery(document).ready(function () {
    $.ajax({
        type: 'GET',
        url:  'test/GameConfiguration.json',
        dataType: 'json',
        cache : false,
        success: function(data, textStatus, xhr){
            if (xhr.readyState === 4 &amp;&amp; xhr.status === 0) {
                // if readyState is DONE (numeric value 4) then corresponds to
                // http://www.w3.org/TR/XMLHttpRequest/#dom-xmlhttprequest-done
                // ""The DONE state has an associated error flag that indicates
                // some type of network error or abortion.""
                // Corresponds to http://www.w3.org/TR/XMLHttpRequest/#the-status-attribute
                // If error flag it true, xhr.status is 0.
                alert('""error flag\"" is true. It means that we have a network error""+
                      "" or abortion (for example because of Same Origin Policy restrictions)');
            }
            else {
                alert(textStatus);
                alert(data);
            }
        },
        error: function(xhr, textStatus, errorThrown) {
            if (textStatus !== null) {
                alert(""error: "" + textStatus);
            } else if (errorThrown !== null) {
                alert(""exception: "" + errorThrown.message);
            }
            else {
                alert (""error"");
            }
        }
    });
});
</code></pre>
",Oleg,Oleg,1283342217,1283364910,1283364910
http://stackoverflow.com/a/3619714/17498,How can I get the version defined in setup.py (setuptools) in my package?,58626,elmarco,Acumenus,1263403489,1558491133,1487619610,https://stackoverflow.com/questions/2058802/how-can-i-get-the-version-defined-in-setup-py-setuptools-in-my-package,"<p>Create a file in your source tree, e.g. in yourbasedir/yourpackage/_version.py . Let that file contain only a single line of code, like this:</p>

<p><code>__version__ = ""1.1.0-r4704""</code></p>

<p>Then in your setup.py, open that file and parse out the version number like this:</p>

<pre>
verstr = ""unknown""
try:
    verstrline = open('yourpackage/_version.py', ""rt"").read()
except EnvironmentError:
    pass # Okay, there is no version file.
else:
    VSRE = r""^__version__ = ['\""]([^'\""]*)['\""]""
    mo = re.search(VSRE, verstrline, re.M)
    if mo:
        verstr = mo.group(1)
    else:
        raise RuntimeError(""unable to find version in yourpackage/_version.py"")
</pre>

<p>Finally, in <code>yourbasedir/yourpackage/__init__.py</code> import _version like this:</p>

<pre>
__version__ = ""unknown""
try:
    from _version import __version__
except ImportError:
    # We're running in a tree that doesn't have a _version.py, so we don't know what our version is.
    pass
</pre>

<p>An example of code that does this is the ""pyutil"" package that I maintain. (See PyPI or google search -- stackoverflow is disallowing me from including a hyperlink to it in this answer.)</p>

<p>@pjeby is right that you shouldn't import your package from its own setup.py. That will work when you test it by creating a new Python interpreter and executing setup.py in it first thing: <code>python setup.py</code>, but there are cases when it won't work. That's because <code>import youpackage</code> doesn't mean to read the current working directory for a directory named ""yourpackage"", it means to look in the current <code>sys.modules</code> for a key ""yourpackage"" and then to do various things if it isn't there. So it always works when you do <code>python setup.py</code> because you have a fresh, empty <code>sys.modules</code>, but this doesn't work in general.</p>

<p>For example, what if py2exe is executing your setup.py as part of the process of packaging up an application? I've seen a case like this where py2exe would put the wrong version number on a package because the package was getting its version number from <code>import myownthing</code> in its setup.py, but a different version of that package had previously been imported during the py2exe run. Likewise, what if setuptools, easy_install, distribute, or distutils2 is trying to build your package as part of a process of installing a different package that depends on yours? Then whether your package is importable at the time that its setup.py is being evaluated, or whether there is already a version of your package that has been imported during this Python interpreter's life, or whether importing your package requires other packages to be installed first, or has side-effects, can change the results. I've had several struggles with trying to re-use Python packages which caused problems for tools like py2exe and setuptools because their setup.py imports the package itself in order to find its version number.</p>

<p>By the way, this technique plays nicely with tools to automatically create the <code>yourpackage/_version.py</code> file for you, for example by reading your revision control history and writing out a version number based on the most recent tag in revision control history. Here is a tool that does that for darcs: <a href=""http://tahoe-lafs.org/trac/darcsver/browser/trunk/README.rst"" rel=""nofollow noreferrer"">http://tahoe-lafs.org/trac/darcsver/browser/trunk/README.rst</a> and here is a code snippet which does the same thing for git: <a href=""http://github.com/warner/python-ecdsa/blob/0ed702a9d4057ecf33eea969b8cf280eaccd89a1/setup.py#L34"" rel=""nofollow noreferrer"">http://github.com/warner/python-ecdsa/blob/0ed702a9d4057ecf33eea969b8cf280eaccd89a1/setup.py#L34</a></p>
",Zooko,,1283355037,1283355037,0
http://stackoverflow.com/a/36209590/1340208,How to detect if a twin axis has been generated for a matplotlib axis,527,Brett Morris,,1458851799,1520635643,0,https://stackoverflow.com/questions/36209575/how-to-detect-if-a-twin-axis-has-been-generated-for-a-matplotlib-axis,"<p>I don't think there's any built-in to do this, but you could probably just check whether any other axes in the figure has the same bounding box as the axes in question. Here's a quick snippet that will do this:</p>

<pre><code>def has_twin(ax):
    for other_ax in ax.figure.axes:
        if other_ax is ax:
            continue
        if other_ax.bbox.bounds == ax.bbox.bounds:
            return True
    return False

# Usage:

fig, ax = plt.subplots()
print(has_twin(ax))  # False

ax2 = ax.twinx()
print(has_twin(ax))  # True
</code></pre>
",jakevdp,,1458851863,1458851863,0
http://stackoverflow.com/a/3624545/1736339,Blocking recv doesn&#39;t exit when closing socket from another thread?,8632,Jay,Peter Lang,1283409782,1283467674,1283410100,https://stackoverflow.com/questions/3624365/blocking-recv-doesnt-exit-when-closing-socket-from-another-thread,"<p>The ""why"" is simply that that's how it works, by design.</p>

<p>Within the kernel, the <code>recv()</code> call has called <code>fget()</code> on the <code>struct file</code> corresponding to the file descriptor, and this will prevent it from being deallocated until the corresponding <code>fput()</code>.</p>

<p>You will simply have to change your design (your design is inherently racy anyway - for this to happen, you must have no locking protecting the file descriptor in userspace, which means that the <code>close()</code> could have happened just <em>before</em> the <code>recv()</code> call - and the file descriptor even been reused for something else).</p>

<hr>

<p>If you want to wake up another thread that's blocking on a file descriptor, you should have it block on <code>select()</code> instead, with a pipe included in the file descriptor set that can be written to by the main thread.</p>
",caf,caf,1283411629,1283467674,1283467674
http://stackoverflow.com/a/36253499/4939630,RGB to Hex and Hex to RGB,389755,Sindar,Micha Perakowski,1302536573,1561761460,1471713681,https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb,"<p><strong>One-line functional HEX to RGBA</strong></p>

<p>Supports both short <code>#fff</code> and long <code>#ffffff</code> forms.<br>
Supports alpha channel (opacity).<br>
Does not care if hash specified or not, works in both cases.</p>

<pre><code>function hexToRGBA(hex, opacity) {
    return 'rgba(' + (hex = hex.replace('#', '')).match(new RegExp('(.{' + hex.length/3 + '})', 'g')).map(function(l) { return parseInt(hex.length%2 ? l+l : l, 16) }).concat(opacity||1).join(',') + ')';
}
</code></pre>

<p>examples:</p>

<pre><code>hexToRGBA('#fff')        -&gt;  rgba(255,255,255,1)  
hexToRGBA('#ffffff')     -&gt;  rgba(255,255,255,1)  
hexToRGBA('#fff', .2)    -&gt;  rgba(255,255,255,0.2)  
hexToRGBA('#ffffff', .2) -&gt;  rgba(255,255,255,0.2)  
hexToRGBA('fff', .2)     -&gt;  rgba(255,255,255,0.2)  
hexToRGBA('ffffff', .2)  -&gt;  rgba(255,255,255,0.2)  
</code></pre>
",Denis,,1459118047,1459118047,0
http://stackoverflow.com/a/3627747/2506748,How to get hex color value rather than RGB value?,142093,jason,bfavaretto,1258357875,1520106565,1367014265,https://stackoverflow.com/questions/1740700/how-to-get-hex-color-value-rather-than-rgb-value,"<p>Here is the cleaner solution I wrote based on @Matt suggestion:</p>

<pre><code>function rgb2hex(rgb) {
    rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    function hex(x) {
        return (""0"" + parseInt(x).toString(16)).slice(-2);
    }
    return ""#"" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
}
</code></pre>

<p>Some browsers already returns colors as hexadecimal (as of Internet Explorer 8 and below). If you need to deal with those cases, just append a condition inside the function, like @gfrobenius suggested:</p>

<pre><code>function rgb2hex(rgb) {
    if (/^#[0-9A-F]{6}$/i.test(rgb)) return rgb;

    rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    function hex(x) {
        return (""0"" + parseInt(x).toString(16)).slice(-2);
    }
    return ""#"" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
}
</code></pre>

<p>If you're using jQuery and want a more complete approach, you can use <a href=""http://api.jquery.com/jQuery.cssHooks/"" rel=""noreferrer"">CSS Hooks</a> available since jQuery 1.4.3, as I showed when answering this question: <a href=""https://stackoverflow.com/questions/6177454/can-i-force-jquery-cssbackgroundcolor-returns-on-hexadecimal-format"">Can I force jQuery.css(&quot;backgroundColor&quot;) returns on hexadecimal format?</a></p>
",Erick Petrucelli,Community,1283435542,1400092446,1495542876
http://stackoverflow.com/a/36366886/6812729,"PHP array_replace_recursive if scalar, array_merge_recursive if array",762,Gravy,,1456141225,1523783215,0,https://stackoverflow.com/questions/35552679/php-array-replace-recursive-if-scalar-array-merge-recursive-if-array,"<p>This function obtains your desired result. It assume that specific types are coherents with default types, so no coherence check is performed. The function iterate specific configuration array and check corresponding default value<sup>1</sup>: if it is scalar, replace default value; if it is a enumerated array<sup>2</sup>, it merge unique values; otherwise function call itself with current values as arguments.</p>

<pre><code>function fillConfig( $default, $specific )
{
    foreach( $specific as $key=&gt; $val )
    {
        if( isset( $default[$key] ) )
        {
            if( ! is_array( $default[$key] ) )
            {
                $default[$key] = $val;
            }
            elseif( array_keys($default[$key]) === range(0, count($default[$key]) - 1) )
            {
                $default[$key] = array_unique( array_merge( $default[$key], $val ) );
            }
            else
            {
                $default[$key] = fillConfig( $default[$key], $val );
            }
        }
        else
        {
            // This happens when a specific key doesn't exists in default configuration.
            // I think that in this case the value must be omitted,
            // otherwise you can un-comment following line:
            // $default[$key] = $val;
        }
    }
    return $default;
}
</code></pre>

<p>Calling the function in this way:</p>

<pre><code>$result = fillConfig( $defaultConfigs, $specificConfigs );
</code></pre>

<p><code>$result</code>, applied to your arrays sample, is this:</p>

<pre><code>Array
(
    [scalar1] =&gt; A
    [scalar2] =&gt; Apple
    [array_scalar] =&gt; Array
        (
            [0] =&gt; 3
            [1] =&gt; 4
            [2] =&gt; 5
        )
    [array_associative] =&gt; Array
        (
            [scalar] =&gt; 1
            [array_scalar] =&gt; Array
                (
                    [0] =&gt; 1
                    [1] =&gt; 2
                    [2] =&gt; 3
                )
            [array_associative] =&gt; Array
                (
                )
        )
)
</code></pre>

<p>With this array couple:</p>

<pre><code>$defaultConfigs = [
   'scalar1' =&gt; 1,
   'scalar2' =&gt; ""Apple"",
   'array_scalar' =&gt; [3,4,5],
   'array_associative' =&gt; [
      'scalar' =&gt; 1,
      'array_scalar' =&gt; [1,2,3],
      'array_associative' =&gt; [

      ]
   ],
];

$specificConfigs = [
   'scalar1' =&gt; ""A"",                          
   'array_scalar' =&gt; [3,4,5],   
   'array_associative' =&gt; [
      'scalar' =&gt; B,
      'array_scalar' =&gt; [3,4,5],
      'array_associative' =&gt; [

      ]
   ],
];
</code></pre>

<p><code>$result</code> is:</p>

<pre><code>Array
(
    [scalar1] =&gt; A
    [scalar2] =&gt; Apple
    [array_scalar] =&gt; Array
        (
            [0] =&gt; 3
            [1] =&gt; 4
            [2] =&gt; 5
        )

    [array_associative] =&gt; Array
        (
            [scalar] =&gt; B
            [array_scalar] =&gt; Array
                (
                    [0] =&gt; 1
                    [1] =&gt; 2
                    [2] =&gt; 3
                    [4] =&gt; 4
                    [5] =&gt; 5
                )

            [array_associative] =&gt; Array
                (
                )

        )

)
</code></pre>

<hr>

<p>Notes:</p>

<p><sup>1</sup> Yes, this is a bit incoherent: I felt was better iterate through specific array (not existent items remain untouched), but performing value check on default array, that is the reference point.</p>

<p><sup>2</sup> The enumerated/associative array check is based on <a href=""https://stackoverflow.com/a/173479/3294262"">this answer</a>.</p>
",fusion3k,Community,1459550272,1459550272,1495540787
http://stackoverflow.com/a/3639993/1191373,Anyone familiar with mp4 data structure?,56491,Tom Brito,skaffman,1276722229,1462959250,1277378027,https://stackoverflow.com/questions/3057157/anyone-familiar-with-mp4-data-structure,"<p>For the Red5 MP4 reader I used the ""mvhd"" atom, since it contains both time scale and duration fields. Getting the duration from the atom will be different based on the version being used, below you can see an example:
<code><pre>
public long create_full_atom(MP4DataStream bitstream) throws IOException {
    long value = bitstream.readBytes(4);
    version = (int)value >> 24;
    flags = (int)value &amp; 0xffffff;
    readed += 4;
    return readed;
}</p>

<p>public long create_movie_header_atom(MP4DataStream bitstream) throws IOException {
    create_full_atom(bitstream);
    if (version == 1) {
        creationTime = createDate(bitstream.readBytes(8));
    modificationTime = createDate(bitstream.readBytes(8));
    timeScale = (int)bitstream.readBytes(4);
    duration = bitstream.readBytes(8);
    readed += 28;
    } else {
        creationTime = createDate(bitstream.readBytes(4));
    modificationTime = createDate(bitstream.readBytes(4));
    timeScale = (int)bitstream.readBytes(4);
    duration = bitstream.readBytes(4);
    readed += 16;
    }
    int qt_preferredRate = (int)bitstream.readBytes(4);
    int qt_preferredVolume = (int)bitstream.readBytes(2);
    bitstream.skipBytes(10);
    long qt_matrixA = bitstream.readBytes(4);
    long qt_matrixB = bitstream.readBytes(4);
    long qt_matrixU = bitstream.readBytes(4);
    long qt_matrixC = bitstream.readBytes(4);
    long qt_matrixD = bitstream.readBytes(4);
    long qt_matrixV = bitstream.readBytes(4);
    long qt_matrixX = bitstream.readBytes(4);
    long qt_matrixY = bitstream.readBytes(4);
    long qt_matrixW = bitstream.readBytes(4);
    long qt_previewTime = bitstream.readBytes(4);
    long qt_previewDuration = bitstream.readBytes(4);
    long qt_posterTime = bitstream.readBytes(4);
    long qt_selectionTime = bitstream.readBytes(4);
    long qt_selectionDuration = bitstream.readBytes(4);
    long qt_currentTime = bitstream.readBytes(4);
    long nextTrackID = bitstream.readBytes(4);
    readed += 80;<br>
    return readed;<br>
}
</pre></code>
<br />
On a side note I used the values to calculate play time and fps like so:
<code><pre>
    double fps = (videoSampleCount * timeScale) / (double) duration;
    double videoTime = ((double) duration / (double) timeScale);
</pre></code>
The videoSampleCount variable comes from the ""stsz"" atom.</p>
",Paul Gregoire,,1283552967,1283552967,0
http://stackoverflow.com/a/3642969/157882,javax.faces.application.ViewExpiredException: View could not be restored,235106,l245c4l,BalusC,1283615131,1559121737,1384432355,https://stackoverflow.com/questions/3642919/javax-faces-application-viewexpiredexception-view-could-not-be-restored,"<h2>Introduction</h2>

<p>The <code>ViewExpiredException</code> will be thrown whenever the <code>javax.faces.STATE_SAVING_METHOD</code> is set to <code>server</code> (default) and the enduser sends a HTTP POST request on a view via <code>&lt;h:form&gt;</code> with <code>&lt;h:commandLink&gt;</code>, <code>&lt;h:commandButton&gt;</code> or <code>&lt;f:ajax&gt;</code>, while the associated view state isn't available in the session anymore. </p>

<p>The view state is identified as value of a hidden input field <code>javax.faces.ViewState</code> of the <code>&lt;h:form&gt;</code>. With the state saving method set to <code>server</code>, this contains only the view state ID which references a serialized view state in the session. So, when the session is expired for some reason (either timed out in server or client side, or the session cookie is not maintained anymore for some reason in browser, or by calling <code>HttpSession#invalidate()</code> in server, or due a server specific bug with session cookies as known in <a href=""https://stackoverflow.com/questions/25880031/viewexpiredexception-on-a-wildfly-served-webapp-only-in-a-particular-webbrowser"">WildFly</a>), then the serialized view state is not available anymore in the session and the enduser will get this exception. To understand the working of the session, see also <a href=""https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-shared-variables-and-multithreading"">How do servlets work? Instantiation, sessions, shared variables and multithreading</a>.</p>

<p>There is also a limit on the amount of views JSF will store in the session. When the limit is hit, then the least recently used view will be expired. See also <a href=""https://stackoverflow.com/questions/4105439/com-sun-faces-numberofviewsinsession-vs-com-sun-faces-numberoflogicalviews"">com.sun.faces.numberOfViewsInSession vs com.sun.faces.numberOfLogicalViews</a>.</p>

<p>With the state saving method set to <code>client</code>, the <code>javax.faces.ViewState</code> hidden input field contains instead the whole serialized view state, so the enduser won't get a <code>ViewExpiredException</code> when the session expires. It can however still happen on a cluster environment (""ERROR: MAC did not verify"" is symptomatic) and/or when there's a implementation-specific timeout on the client side state configured and/or when server re-generates the AES key during restart, see also <a href=""https://stackoverflow.com/questions/35102645/getting-viewexpiredexception-in-clustered-environment-while-state-saving-method"">Getting ViewExpiredException in clustered environment while state saving method is set to client and user session is valid</a> how to solve it.</p>

<p>Regardless of the solution, make sure you do <strong>not</strong> use <code>enableRestoreView11Compatibility</code>. it does not at all restore the original view state. It basically recreates the view and all associated view scoped beans from scratch and hereby thus losing all of original data (state). As the application will behave in a confusing way (""Hey, where are my input values..??""), this is very bad for user experience. Better use stateless views or <code>&lt;o:enableRestorableView&gt;</code> instead so you can manage it on a specific view only instead of on all views.</p>

<p>As to the <em>why</em> JSF needs to save view state, head to this answer: <a href=""https://stackoverflow.com/questions/5474316/why-does-jsf-need-to-save-the-state-of-ui-components-on-the-server-side/5475564#5475564"">Why JSF saves the state of UI components on server?</a></p>

<h2>Avoiding ViewExpiredException on page navigation</h2>

<p>In order to avoid <code>ViewExpiredException</code> when e.g. navigating back after logout when the state saving is set to <code>server</code>, only redirecting the POST request after logout is not sufficient. You also need to instruct the browser to <em>not</em> cache the dynamic JSF pages, otherwise the browser may show them from the cache instead of requesting a fresh one from the server when you send a GET request on it (e.g. by back button). </p>

<p>The <code>javax.faces.ViewState</code> hidden field of the cached page may contain a view state ID value which is not valid anymore in the current session. If you're (ab)using POST (command links/buttons) instead of GET (regular links/buttons) for page-to-page navigation, and click such a command link/button on the cached page, then this will in turn fail with a <code>ViewExpiredException</code>.</p>

<p>To fire a redirect after logout in JSF 2.0, either add <code>&lt;redirect /&gt;</code> to the <code>&lt;navigation-case&gt;</code> in question (if any), or add <code>?faces-redirect=true</code> to the <code>outcome</code> value. </p>

<pre class=""lang-html prettyprint-override""><code>&lt;h:commandButton value=""Logout"" action=""logout?faces-redirect=true"" /&gt;
</code></pre>

<p>or</p>

<pre><code>public String logout() {
    // ...
    return ""index?faces-redirect=true"";
}
</code></pre>

<p>To instruct the browser to not cache the dynamic JSF pages, create a <code>Filter</code> which is mapped on the servlet name of the <code>FacesServlet</code> and adds the needed response headers to disable the browser cache. E.g.</p>

<pre><code>@WebFilter(servletNames={""Faces Servlet""}) // Must match &lt;servlet-name&gt; of your FacesServlet.
public class NoCacheFilter implements Filter {

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse res = (HttpServletResponse) response;

        if (!req.getRequestURI().startsWith(req.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) { // Skip JSF resources (CSS/JS/Images/etc)
            res.setHeader(""Cache-Control"", ""no-cache, no-store, must-revalidate""); // HTTP 1.1.
            res.setHeader(""Pragma"", ""no-cache""); // HTTP 1.0.
            res.setDateHeader(""Expires"", 0); // Proxies.
        }

        chain.doFilter(request, response);
    }

    // ...
}
</code></pre>

<h2>Avoiding ViewExpiredException on page refresh</h2>

<p>In order to avoid <code>ViewExpiredException</code> when refreshing the current page when the state saving is set to <code>server</code>, you not only need to make sure you are performing page-to-page navigation exclusively by GET (regular links/buttons), but you also need to make sure that you are exclusively using ajax to submit the forms. If you're submitting the form synchronously (non-ajax) anyway, then you'd best either make the view stateless (see later section), or to send a redirect after POST (see previous section). </p>

<p>Having a <code>ViewExpiredException</code> on page refresh is in default configuration a very rare case. It can only happen when the limit on the amount of views JSF will store in the session is hit. So, it will only happen when you've manually set that limit way too low, or that you're continuously creating new views in the ""background"" (e.g. by a badly implemented ajax poll in the same page or by a badly implemented 404 error page on broken images of the same page). See also <a href=""https://stackoverflow.com/questions/4105439/com-sun-faces-numberofviewsinsession-vs-com-sun-faces-numberoflogicalviews"">com.sun.faces.numberOfViewsInSession vs com.sun.faces.numberOfLogicalViews</a> for detail on that limit. Another cause is having duplicate JSF libraries in runtime classpath conflicting each other. The correct procedure to install JSF is outlined in <a href=""https://stackoverflow.com/tags/jsf/info"">our JSF wiki page</a>.</p>

<h2>Handling ViewExpiredException</h2>

<p>When you want to handle an unavoidable <code>ViewExpiredException</code> after a POST action on an arbitrary page which was already opened in some browser tab/window while you're logged out in another tab/window, then you'd like to specify an <code>error-page</code> for that in <code>web.xml</code> which goes to a ""Your session is timed out"" page. E.g.</p>

<pre class=""lang-xml prettyprint-override""><code>&lt;error-page&gt;
    &lt;exception-type&gt;javax.faces.application.ViewExpiredException&lt;/exception-type&gt;
    &lt;location&gt;/WEB-INF/errorpages/expired.xhtml&lt;/location&gt;
&lt;/error-page&gt;
</code></pre>

<p>Use if necessary a meta refresh header in the error page in case you intend to actually <em>redirect</em> further to home or login page.</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=""en""&gt;
    &lt;head&gt;
        &lt;title&gt;Session expired&lt;/title&gt;
        &lt;meta http-equiv=""refresh"" content=""0;url=#{request.contextPath}/login.xhtml"" /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Session expired&lt;/h1&gt;
        &lt;h3&gt;You will be redirected to login page&lt;/h3&gt;
        &lt;p&gt;&lt;a href=""#{request.contextPath}/login.xhtml""&gt;Click here if redirect didn't work or when you're impatient&lt;/a&gt;.&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><em>(the <code>0</code> in <code>content</code> represents the amount of seconds before redirect, <code>0</code> thus means ""redirect immediately"", you can use e.g. <code>3</code> to let the browser wait 3 seconds with the redirect)</em></p>

<p>Note that handling exceptions during ajax requests requires a special <code>ExceptionHandler</code>. See also <a href=""https://stackoverflow.com/questions/11203195/session-timeout-handling-on-jsf-ajax-request"">Session timeout and ViewExpiredException handling on JSF/PrimeFaces ajax request</a>. You can find a live example at <a href=""http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler"" rel=""nofollow noreferrer"">OmniFaces <code>FullAjaxExceptionHandler</code> showcase page</a> (this also covers non-ajax requests).</p>

<p>Also note that your ""general"" error page should be mapped on <code>&lt;error-code&gt;</code> of <code>500</code> instead of an <code>&lt;exception-type&gt;</code> of e.g. <code>java.lang.Exception</code> or <code>java.lang.Throwable</code>, otherwise all exceptions wrapped in <code>ServletException</code> such as <code>ViewExpiredException</code> would still end up in the general error page. See also <a href=""https://stackoverflow.com/questions/3206922/viewexpiredexception-shown-in-java-lang-throwable-error-page-in-web-xml"">ViewExpiredException shown in java.lang.Throwable error-page in web.xml</a>.</p>

<pre class=""lang-xml prettyprint-override""><code>&lt;error-page&gt;
    &lt;error-code&gt;500&lt;/error-code&gt;
    &lt;location&gt;/WEB-INF/errorpages/general.xhtml&lt;/location&gt;
&lt;/error-page&gt;
</code></pre>

<h2>Stateless views</h2>

<p>A completely different alternative is to run JSF views in stateless mode. This way nothing of JSF state will be saved and the views will never expire, but just be rebuilt from scratch on every request. You can turn on stateless views by setting the <code>transient</code> attribute of <code>&lt;f:view&gt;</code> to <code>true</code>:</p>

<pre class=""lang-html prettyprint-override""><code>&lt;f:view transient=""true""&gt;

&lt;/f:view&gt;
</code></pre>

<p>This way the <code>javax.faces.ViewState</code> hidden field will get a fixed value of <code>""stateless""</code> in Mojarra (have not checked MyFaces at this point). Note that this feature was <a href=""http://balusc.blogspot.com/2013/02/stateless-jsf.html"" rel=""nofollow noreferrer"">introduced</a> in Mojarra 2.1.19 and 2.2.0 and is not available in older versions.</p>

<p>The consequence is that you cannot use view scoped beans anymore. They will now behave like request scoped beans. One of the disadvantages is that you have to track the state yourself by fiddling with hidden inputs and/or loose request parameters. Mainly those forms with input fields with <code>rendered</code>, <code>readonly</code> or <code>disabled</code> attributes which are controlled by ajax events will be affected.</p>

<p>Note that the <code>&lt;f:view&gt;</code> does not necessarily need to be unique throughout the view and/or reside in the master template only. It's also completely legit to redeclare and nest it in a template client. It basically ""extends"" the parent <code>&lt;f:view&gt;</code> then. E.g. in master template:</p>

<pre class=""lang-html prettyprint-override""><code>&lt;f:view contentType=""text/html""&gt;
    &lt;ui:insert name=""content"" /&gt;
&lt;/f:view&gt;
</code></pre>

<p>and in template client:</p>

<pre class=""lang-html prettyprint-override""><code>&lt;ui:define name=""content""&gt;
    &lt;f:view transient=""true""&gt;
        &lt;h:form&gt;...&lt;/h:form&gt;
    &lt;/f:view&gt;
&lt;/f:view&gt;
</code></pre>

<p>You can even wrap the <code>&lt;f:view&gt;</code> in a <code>&lt;c:if&gt;</code> to make it conditional. Note that it would apply on the <em>entire</em> view, not only on the nested contents, such as the <code>&lt;h:form&gt;</code> in above example.</p>

<h2>See also</h2>

<ul>
<li><a href=""https://stackoverflow.com/questions/3206922/issue-with-jsf-viewexpiredexception-and-multiple-error-page-tag-definitions-in-w"">ViewExpiredException shown in java.lang.Throwable error-page in web.xml</a></li>
<li><a href=""https://stackoverflow.com/questions/8144195/check-if-session-exists-jsf"">Check if session exists JSF</a></li>
<li><a href=""https://stackoverflow.com/questions/11203195/session-timeout-and-viewexpiredexception-handling-on-jsf-primefaces-ajax-request"">Session timeout and ViewExpiredException handling on JSF/PrimeFaces ajax request</a></li>
</ul>

<hr>

<p><strong>Unrelated</strong> to the concrete problem, using HTTP POST for pure page-to-page navigation isn't very user/SEO friendly. In JSF 2.0 you should really prefer <code>&lt;h:link&gt;</code> or <code>&lt;h:button&gt;</code> over the <code>&lt;h:commandXxx&gt;</code> ones for plain vanilla page-to-page navigation.</p>

<p>So instead of e.g.</p>

<pre><code>&lt;h:form id=""menu""&gt;
    &lt;h:commandLink value=""Foo"" action=""foo?faces-redirect=true"" /&gt;
    &lt;h:commandLink value=""Bar"" action=""bar?faces-redirect=true"" /&gt;
    &lt;h:commandLink value=""Baz"" action=""baz?faces-redirect=true"" /&gt;
&lt;/h:form&gt;
</code></pre>

<p>better do</p>

<pre><code>&lt;h:link value=""Foo"" outcome=""foo"" /&gt;
&lt;h:link value=""Bar"" outcome=""bar"" /&gt;
&lt;h:link value=""Baz"" outcome=""baz"" /&gt;
</code></pre>

<h3>See also</h3>

<ul>
<li><a href=""https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink"">When should I use h:outputLink instead of h:commandLink?</a></li>
<li><a href=""https://stackoverflow.com/questions/13070537/difference-between-hbutton-and-hcommandbutton"">Difference between h:button and h:commandButton</a></li>
<li><a href=""https://stackoverflow.com/questions/15521451/how-to-navigate-in-jsf-how-to-make-url-reflect-current-page-and-not-previous-o/15523045#15523045"">How to navigate in JSF? How to make URL reflect current page (and not previous one)</a></li>
</ul>
",BalusC,BalusC,1283615845,1559121737,1559121737
http://stackoverflow.com/a/36438671/315168,Using a custom JSON encoder for SQLAlchemy&#39;s PostgreSQL JSONB implementation,2309,Pablo Santa Cruz,,1459894550,1490887206,0,https://stackoverflow.com/questions/36438052/using-a-custom-json-encoder-for-sqlalchemys-postgresql-jsonb-implementation,"<p>This is supported via the <code>json_serializer</code> keyword argument to <code>create_engine</code>, as documented under <a href=""http://docs.sqlalchemy.org/en/latest/dialects/postgresql.html#sqlalchemy.dialects.postgresql.JSON"" rel=""noreferrer""><code>sqlalchemy.dialects.postgresql.JSON</code></a>:</p>

<pre><code>def _default(val):
    if isinstance(val, Decimal):
        return str(val)
    raise TypeError()

def dumps(d):
    return json.dumps(d, default=_default)

engine = create_engine(..., json_serializer=dumps)
</code></pre>
",univerio,,1459897816,1459897816,0
http://stackoverflow.com/a/3648244/467582,IE&#39;s document.selection.createRange doesn&#39;t include leading or trailing blank lines,18187,Brad Robinson,,1283383573,1441969525,0,https://stackoverflow.com/questions/3622818/ies-document-selection-createrange-doesnt-include-leading-or-trailing-blank-li,"<p>I'm adding another answer since my previous one is already getting somewhat epic.</p>

<p>This is what I consider the best version yet: it takes bobince's approach (mentioned in the comments to my first answer) and fixes the two things I didn't like about it, which were first that it relies on TextRanges that stray outside the textarea (thus harming performance), and second the dirtiness of having to pick a giant number for the number of characters to move the range boundary.</p>

<pre><code>function getSelection(el) {
    var start = 0, end = 0, normalizedValue, range,
        textInputRange, len, endRange;

    if (typeof el.selectionStart == ""number"" &amp;&amp; typeof el.selectionEnd == ""number"") {
        start = el.selectionStart;
        end = el.selectionEnd;
    } else {
        range = document.selection.createRange();

        if (range &amp;&amp; range.parentElement() == el) {
            len = el.value.length;
            normalizedValue = el.value.replace(/\r\n/g, ""\n"");

            // Create a working TextRange that lives only in the input
            textInputRange = el.createTextRange();
            textInputRange.moveToBookmark(range.getBookmark());

            // Check if the start and end of the selection are at the very end
            // of the input, since moveStart/moveEnd doesn't return what we want
            // in those cases
            endRange = el.createTextRange();
            endRange.collapse(false);

            if (textInputRange.compareEndPoints(""StartToEnd"", endRange) &gt; -1) {
                start = end = len;
            } else {
                start = -textInputRange.moveStart(""character"", -len);
                start += normalizedValue.slice(0, start).split(""\n"").length - 1;

                if (textInputRange.compareEndPoints(""EndToEnd"", endRange) &gt; -1) {
                    end = len;
                } else {
                    end = -textInputRange.moveEnd(""character"", -len);
                    end += normalizedValue.slice(0, end).split(""\n"").length - 1;
                }
            }
        }
    }

    return {
        start: start,
        end: end
    };
}

var el = document.getElementById(""your_textarea"");
var sel = getSelection(el);
alert(sel.start + "", "" + sel.end);
</code></pre>
",Tim Down,,1283729300,1283729300,0
http://stackoverflow.com/a/3651696/12916,ringbuffer for ByteArrayOutputStream in java,1339,Martin,P&#233;ter T&#246;r&#246;k,1283776017,1283778595,1283776423,https://stackoverflow.com/questions/3651435/ringbuffer-for-bytearrayoutputstream-in-java,"<p>There's not really much to it. You could do it yourself. Here is a start:</p>

<pre><code>class ByteArrayRingBuffer extends OutputStream {

    byte[] data;
    int capacity, pos = 0;
    boolean filled = false;

    public ByteArrayRingBuffer(int capacity) {
        data = new byte[capacity];
        this.capacity = capacity;
    }

    @Override
    public synchronized void write(int b) {
        if (pos == capacity) {
            filled = true;
            pos = 0;
        }
        data[pos++] = (byte) b;
    }

    public byte[] toByteArray() {
        if (!filled)
            return Arrays.copyOf(data, pos);
        byte[] ret = new byte[capacity];
        System.arraycopy(data, pos, ret, 0, capacity - pos);
        System.arraycopy(data, 0, ret, capacity - pos, pos);
        return ret;
    }
}
</code></pre>

<p>(You may want to override <code>write(byte[] b, int off, int len)</code> if you need the efficiency.)</p>
",aioobe,,1283778595,1283778595,0
http://stackoverflow.com/a/36540678/297131,How do I remove a particular element from an array in JavaScript?,5815449,Walker,mikemaccana,1303597038,1561472504,1550146186,https://stackoverflow.com/questions/5767325/how-do-i-remove-a-particular-element-from-an-array-in-javascript,"<p><strong>Vanilla JavaScript (ES5.1)  <em>in place</em> edition</strong></p>

<p><em>Browser support: <a href=""http://en.wikipedia.org/wiki/Internet_Explorer_9"" rel=""nofollow noreferrer"">Internet&nbsp;Explorer&nbsp;9</a> or later (<a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/lastIndexOf#Browser_compatibility"" rel=""nofollow noreferrer"">detailed browser support</a>)</em></p>

<pre><code>/**
 * Removes all occurences of the item from the array.
 *
 * Modifies the array in place, i.e. the array passed as an argument
 * is modified as opposed to creating a new array. Also returns the modified
 * array for your convenience.
 */
function removeInPlace(array, item) {
    var foundIndex, fromIndex;

    // Look for the item (the item can have multiple indices)
    fromIndex = array.length - 1;
    foundIndex = array.lastIndexOf(item, fromIndex);

    while (foundIndex !== -1) {
        // Remove the item (in place)
        array.splice(foundIndex, 1);

        // Bookkeeping
        fromIndex = foundIndex - 1;
        foundIndex = array.lastIndexOf(item, fromIndex);
    }

    // Return the modified array
    return array;
}
</code></pre>

<p><strong>Vanilla JavaScript (ES5.1)  <em>immutable</em> edition</strong></p>

<p><em>Browser support: Same as vanilla JavaScript in place edition</em></p>

<pre><code>/**
 * Removes all occurences of the item from the array.
 *
 * Returns a new array with all the items of the original array except
 * the specified item.
 */
function remove(array, item) {
    var arrayCopy;

    arrayCopy = array.slice();

    return removeInPlace(arrayCopy, item);
}
</code></pre>

<p><strong>Vanilla ES6  <em>immutable</em> edition</strong></p>

<p><em>Browser support: Chrome 46, Edge 12, Firefox 16, Opera 37, Safari 8 (<a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator#Browser_compatibility"" rel=""nofollow noreferrer"">detailed browser support</a>)</em></p>

<pre><code>/**
 * Removes all occurences of the item from the array.
 *
 * Returns a new array with all the items of the original array except
 * the specified item.
 */
function remove(array, item) {
    // Copy the array
    array = [...array];

    // Look for the item (the item can have multiple indices)
    let fromIndex = array.length - 1;
    let foundIndex = array.lastIndexOf(item, fromIndex);

    while (foundIndex !== -1) {
        // Remove the item by generating a new array without it
        array = [
            ...array.slice(0, foundIndex),
            ...array.slice(foundIndex + 1),
        ];

        // Bookkeeping
        fromIndex = foundIndex - 1;
        foundIndex = array.lastIndexOf(item, fromIndex)
    }

    // Return the new array
    return array;
}
</code></pre>
",Lars Gyrup Brink Nielsen,Lars Gyrup Brink Nielsen,1460353636,1514495273,1514495273
http://stackoverflow.com/a/36749659/873661,What is the recommended way to make a numeric TextField in JavaFX?,108477,Harry Mitchell,,1317042602,1557479256,0,https://stackoverflow.com/questions/7555564/what-is-the-recommended-way-to-make-a-numeric-textfield-in-javafx,"<p>The <code>TextInput</code> has a <code>TextFormatter</code> which can be used to format, convert and limit the types of text that can be input. </p>

<p>The <code>TextFormatter</code> has a filter which can be used to reject input. We need to set this to reject anything that's not a valid integer. It also has a converter which we need to set to convert the string value to an integer value which we can bind later on.</p>

<p>Lets create a reusable filter:</p>

<pre><code>public class IntegerFilter implements UnaryOperator&lt;TextFormatter.Change&gt; {
    private final static Pattern DIGIT_PATTERN = Pattern.compile(""\\d*"");

    @Override
    public Change apply(TextFormatter.Change aT) {
        return DIGIT_PATTERN.matcher(aT.getText()).matches() ? aT : null;
    }
}
</code></pre>

<p>The filter can do one of three things, it can return the change unmodified to accept it as it is, it can alter the change in some way it deems fit or it can return <code>null</code> to reject the change all together.</p>

<p>We will use the standard <a href=""https://docs.oracle.com/javase/8/javafx/api/javafx/util/converter/IntegerStringConverter.html"" rel=""noreferrer""><code>IntegerStringConverter</code></a> as a converter. </p>

<p>Putting it all together we have:</p>

<pre><code>TextField textField = ...;

TextFormatter&lt;Integer&gt; formatter = new TextFormatter&lt;&gt;(
    new IntegerStringConverter(), // Standard converter form JavaFX
    defaultValue, 
    new IntegerFilter());
formatter.valueProperty().bindBidirectional(myIntegerProperty);

textField.setTextFormatter(formatter);
</code></pre>

<p>If you want don't need a reusable filter you can do this fancy one-liner instead:</p>

<pre><code>TextFormatter&lt;Integer&gt; formatter = new TextFormatter&lt;&gt;(
    new IntegerStringConverter(), 
    defaultValue,  
    c -&gt; Pattern.matches(""\\d*"", c.getText()) ? c : null );
</code></pre>
",Emily L.,Emily L.,1461169114,1487520804,1487520804
http://stackoverflow.com/a/36760881/2312428,How to use the new support for ANSI escape sequences in the Windows 10 console?,4016,user89,eryksun,1461215237,1520315070,1461216301,https://stackoverflow.com/questions/36760127/how-to-use-the-new-support-for-ansi-escape-sequences-in-the-windows-10-console,"<p>The problem is that the Python interpreter doesn't enable the processing of ANSI escape sequences.  The ANSI sequences work from the Windows command prompt because <code>cmd</code> does enable them. If you start Python from the command prompt you'll find the ANSI sequences do work, including the ones for enabling and disabling the cursor.  That's because <code>cmd</code> has already enabled them for that console window.</p>

<p>If you want have something you can click on to start the Python interpreter with ANSI escapes enabled you can create a shortcut that runs a command something like <code>cmd /c C:\PythonXY\python</code>.</p>

<p>Another, harder, solution would be to use ctypes to enable ANSI escape sequence processing for the console window by calling the <code>SetConsoleMode</code> Windows API with the <a href=""https://msdn.microsoft.com/en-us/library/windows/desktop/ms686033(v=vs.85).aspx#ENABLE_VIRTUAL_TERMINAL_PROCESSING"" rel=""noreferrer""><code>ENABLE_VIRTUAL_TERMINAL_PROCESSING</code></a> flag set. For example:</p>

<pre><code>import ctypes

kernel32 = ctypes.windll.kernel32
kernel32.SetConsoleMode(kernel32.GetStdHandle(-11), 7)
</code></pre>
",Ross Ridge,Ross Ridge,1461218539,1461220653,1461220653
http://stackoverflow.com/a/3683370/2104280,What is the proper way to re-attach detached objects in Hibernate?,163162,Stefan Kendall,SCdF,1243370631,1476884598,1302133366,https://stackoverflow.com/questions/912659/what-is-the-proper-way-to-re-attach-detached-objects-in-hibernate,"<p>If you are sure that your entity has not been modified (or if you agree any modification will be lost), then you may reattach it to the session with lock.</p>

<pre><code>session.lock(entity, LockMode.NONE);
</code></pre>

<p>It will lock nothing, but it will get the entity from the session cache or (if not found there) read it from the DB.</p>

<p>It's very useful to prevent LazyInitException when you are navigating relations from an ""old"" (from the HttpSession for example) entities. You first ""re-attach"" the entity.</p>

<p>Using get may also work, except when you get inheritance mapped (which will already throw an exception on the getId()).</p>

<pre><code>entity = session.get(entity.getClass(), entity.getId());
</code></pre>
",John Rizzo,,1284109446,1284109446,0
http://stackoverflow.com/a/3683868/2323306,Escaping MySQL wild cards,26415,Columbo,BoltClock,1284113076,1310221665,1284113224,https://stackoverflow.com/questions/3683746/escaping-mysql-wild-cards,"<p><code>_</code> and <code>%</code> are not wildcards in MySQL in general, and should not be escaped for the purposes of putting them into normal string literals. <code>mysql_real_escape_string</code> is correct and sufficient for this purpose. <code>addcslashes</code> should not be used.</p>

<p><code>_</code> and <code>%</code> are special solely in the context of <code>LIKE</code>-matching. When you want to prepare strings for literal use in a <code>LIKE</code> statement, so that <code>100%</code> matches one-hundred-percent and not just any string starting with a hundred, you have two levels of escaping to worry about.</p>

<p>The first is LIKE escaping. LIKE handling takes place entirely inside SQL, and if you want to turn a literal string into an literal LIKE expression you must perform this step <em>even if you are using parameterised queries</em>!</p>

<p>In this scheme, <code>_</code> and <code>%</code> are special and must be escaped. The escape character must also be escaped. According to ANSI SQL, characters other than these <em>must not</em> be escaped: <code>\'</code> would be wrong. (Though MySQL will typically let you get away with it.)</p>

<p>Having done this, you proceed to the second level of escaping, which is plain old string literal escaping. This takes place outside of SQL, creating SQL, so must be done after the LIKE escaping step. For MySQL, this is <code>mysql_real_escape_string</code> as before; for other databases there will be a different function, of you can just use parameterised queries to avoid having to do it.</p>

<p>The problem that leads to confusion here is that in MySQL uses a backslash as an escape character for both of the nested escaping steps! So if you wanted to match a string against a literal percent sign you would have to double-backslash-escape and say <code>LIKE 'something\\%'</code>. Or, if that's in a PHP <code>""</code> literal which also uses backslash escaping, <code>""LIKE 'something\\\\%'""</code>. Argh!</p>

<p>This is incorrect according to ANSI SQL, which says that: in string literals backslashes mean literal backslashes and the way to escape a single quote is <code>''</code>; in LIKE expressions there is no escape character at all by default.</p>

<p>So if you want to LIKE-escape in a portable way, you should override the default (wrong) behaviour and specify your own escape character, using the <code>LIKE ... ESCAPE ...</code> construct. For sanity, we'll choose something other than the damn backslash!</p>

<pre><code>function like($s, $e) {
    return str_replace(array($e, '_', '%'), array($e.$e, $e.'_', $e.'%'), $s);
}

$escapedname= mysql_real_escape_string(like($name, '='));
$query= ""... WHERE name LIKE '%$escapedname%' ESCAPE '=' AND ..."";
</code></pre>

<p>or with parameters (eg. in PDO):</p>

<pre><code>$q= $db-&gt;prepare(""... WHERE name LIKE ? ESCAPE '=' AND ..."");
$q-&gt;bindValue(1, '%'.like($name, '=').'%', PDO::PARAM_STR);
</code></pre>

<p>(If you want more portability party time, you can also have fun trying to account for MS SQL Server and Sybase, where the <code>[</code> character is also, incorrectly, special in a <code>LIKE</code> statement and has to be escaped. argh.)</p>
",bobince,bobince,1284114455,1310221665,1310221665
http://stackoverflow.com/a/36894346/535646,PDF merging with itext and pdfbox,1158,tushar sharma,,1461734272,1461771068,0,https://stackoverflow.com/questions/36880893/pdf-merging-with-itext-and-pdfbox,"<p>In the 2.0 version of PDFBox, you can set an output stream with <code>setDestinationStream()</code>. Thus, you just call</p>

<pre><code>response.setContentType(""application/pdf"");
OutputStream os = response.getOutputStream();
utility.setDestinationStream(os);
utility.mergeDocuments();
os.flush();
os.close();
</code></pre>

<p>You can't set the response size this way; if you have to, use <code>ByteArrayOutputStream</code> like in Bruno's answer or <a href=""https://stackoverflow.com/a/8797893/535646"">this one</a>.</p>
",Tilman Hausherr,Community,1461771068,1461771068,1495535345
http://stackoverflow.com/a/3689710/932593,Peak detection in a 2D array,81385,Ivo Flipse,Community,1284120745,1549618033,1495542383,https://stackoverflow.com/questions/3684484/peak-detection-in-a-2d-array,"<p>I detected the peaks using a <strong>local maximum filter</strong>. Here is the result on your first dataset of 4 paws:
<img src=""https://i.stack.imgur.com/Kgt4H.png"" alt=""Peaks detection result""></p>

<p>I also ran it on the second dataset of 9 paws and <a href=""https://i.stack.imgur.com/4CKCh.png"" rel=""noreferrer"">it worked as well</a>.</p>

<p>Here is how you do it:</p>

<pre><code>import numpy as np
from scipy.ndimage.filters import maximum_filter
from scipy.ndimage.morphology import generate_binary_structure, binary_erosion
import matplotlib.pyplot as pp

#for some reason I had to reshape. Numpy ignored the shape header.
paws_data = np.loadtxt(""paws.txt"").reshape(4,11,14)

#getting a list of images
paws = [p.squeeze() for p in np.vsplit(paws_data,4)]


def detect_peaks(image):
    """"""
    Takes an image and detect the peaks usingthe local maximum filter.
    Returns a boolean mask of the peaks (i.e. 1 when
    the pixel's value is the neighborhood maximum, 0 otherwise)
    """"""

    # define an 8-connected neighborhood
    neighborhood = generate_binary_structure(2,2)

    #apply the local maximum filter; all pixel of maximal value 
    #in their neighborhood are set to 1
    local_max = maximum_filter(image, footprint=neighborhood)==image
    #local_max is a mask that contains the peaks we are 
    #looking for, but also the background.
    #In order to isolate the peaks we must remove the background from the mask.

    #we create the mask of the background
    background = (image==0)

    #a little technicality: we must erode the background in order to 
    #successfully subtract it form local_max, otherwise a line will 
    #appear along the background border (artifact of the local maximum filter)
    eroded_background = binary_erosion(background, structure=neighborhood, border_value=1)

    #we obtain the final mask, containing only peaks, 
    #by removing the background from the local_max mask (xor operation)
    detected_peaks = local_max ^ eroded_background

    return detected_peaks


#applying the detection and plotting results
for i, paw in enumerate(paws):
    detected_peaks = detect_peaks(paw)
    pp.subplot(4,2,(2*i+1))
    pp.imshow(paw)
    pp.subplot(4,2,(2*i+2) )
    pp.imshow(detected_peaks)

pp.show()
</code></pre>

<p>All you need to do after is use <code>scipy.ndimage.measurements.label</code> on the mask to label all distinct objects. Then you'll be able to play with them individually.</p>

<p><strong>Note</strong> that the method works well because the background is not noisy. If it were, you would detect a bunch of other unwanted peaks in the background. Another important factor is the size of the <em>neighborhood</em>. You will need to adjust it if the peak size changes (the should remain roughly proportional).</p>
",Ivan,BallpointBen,1284176287,1540523123,1540523123
http://stackoverflow.com/a/36909293/1467959,C++ Check if Windows 10,12993,user3732111,demonplus,1440463337,1462295266,1454676939,https://stackoverflow.com/questions/32193855/c-check-if-windows-10,"<p>Following worked for me :</p>

<pre><code>.
.
.
#include &lt;windows.h&gt;
#include &lt;stdio.h&gt;
#include &lt;tchar.h&gt;
.
.
.

typedef void (WINAPI * RtlGetVersion_FUNC) (OSVERSIONINFOEXW *);
BOOL GetVersion(OSVERSIONINFOEX * os) {
    HMODULE hMod;
    RtlGetVersion_FUNC func;
#ifdef UNICODE
    OSVERSIONINFOEXW * osw = os;
#else
    OSVERSIONINFOEXW o;
    OSVERSIONINFOEXW * osw = &amp;o;
#endif

    hMod = LoadLibrary(TEXT(""ntdll.dll""));
    if (hMod) {
        func = (RtlGetVersion_FUNC)GetProcAddress(hMod, ""RtlGetVersion"");
        if (func == 0) {
            FreeLibrary(hMod);
            return FALSE;
        }
        ZeroMemory(osw, sizeof (*osw));
        osw-&gt;dwOSVersionInfoSize = sizeof (*osw);
        func(osw);
#ifndef UNICODE
        os-&gt;dwBuildNumber = osw-&gt;dwBuildNumber;
        os-&gt;dwMajorVersion = osw-&gt;dwMajorVersion;
        os-&gt;dwMinorVersion = osw-&gt;dwMinorVersion;
        os-&gt;dwPlatformId = osw-&gt;dwPlatformId;
        os-&gt;dwOSVersionInfoSize = sizeof (*os);
        DWORD sz = sizeof (os-&gt;szCSDVersion);
        WCHAR * src = osw-&gt;szCSDVersion;
        unsigned char * dtc = (unsigned char *)os-&gt;szCSDVersion;
        while (*src)
            * Dtc++ = (unsigned char)* src++;
        *Dtc = '\ 0';
#endif

    } else
        return FALSE;
    FreeLibrary(hMod);
    return TRUE;
}

.
.
.

//check win10
void mymethod() {

OSVERSIONINFOEX os;

    if (GetVersion(&amp;os) == TRUE &amp;&amp; os.dwMajorVersion == 10)
    {
        isWin10 = TRUE;
    }

}
</code></pre>

<p>Ref. : ( <a href=""http://yamatyuu.net/computer/program/vc2013/rtlgetversion/index.html"" rel=""nofollow"">http://yamatyuu.net/computer/program/vc2013/rtlgetversion/index.html</a> )</p>
",zeetit,,1461832281,1461832281,0
http://stackoverflow.com/a/36934374/1866775,How do you static_assert the values in a parameter pack of a variadic template?,4121,Venemo,Venemo,1461917929,1548762287,1461918503,https://stackoverflow.com/questions/36933176/how-do-you-static-assert-the-values-in-a-parameter-pack-of-a-variadic-template,"<p>I'll throw in <a href=""https://stackoverflow.com/questions/28253399/check-traits-for-all-variadic-template-arguments/28253503#28253503"">@Columbo's <code>bool_pack</code> trick</a>.</p>

<pre><code>template&lt;bool...&gt; struct bool_pack;
template&lt;bool... bs&gt; 
using all_true = std::is_same&lt;bool_pack&lt;bs..., true&gt;, bool_pack&lt;true, bs...&gt;&gt;;

static_assert(all_true&lt;(Numbers == 0 || Numbers == 1)...&gt;::value, """");
</code></pre>

<p>Extract the expression into a <code>constexpr</code> function if it gets complex.</p>
",T.C.,Community,1461921444,1461927721,1495541336
http://stackoverflow.com/a/3697482/217943,Retrieve version from maven pom.xml in code,136624,mikhail,Hamedz,1284341769,1549619404,1466173422,https://stackoverflow.com/questions/3697449/retrieve-version-from-maven-pom-xml-in-code,"<p>Assuming you're using Java, you can</p>

<ol>
<li><p>Create a <code>.properties</code> file in (most commonly) your <code>src/main/resources</code> directory (but in step 4 you could tell it to look elsewhere).</p></li>
<li><p>Set the value of some property in your <code>.properties</code> file using the standard Maven property for project version:  <code>foo.bar=${project.version}</code></p></li>
<li><p>In your Java code, load the value from the properties file as a resource from the classpath (google for copious examples of how to do this, but <a href=""https://stackoverflow.com/a/26573884/1470257"">here's an example for starters</a>).</p></li>
<li><p>In Maven, enable resource filtering - this will cause Maven to copy that file into your output classes and translate the resource during that copy, interpreting the property.  You can find some info <a href=""http://maven.apache.org/guides/getting-started/index.html#How_do_I_filter_resource_files"" rel=""noreferrer"">here</a> but you mostly just do this in your pom:</p></li>
</ol>

<pre>
    &lt;build&gt;
      &lt;resources&gt;
        &lt;resource&gt;
          &lt;directory&gt;src/main/resources&lt;/directory&gt;
          &lt;filtering&gt;true&lt;/filtering&gt;
        &lt;/resource&gt;
      &lt;/resources&gt;   
    &lt;/build&gt;
</pre>

<p>You can also get to other standard properties like <code>project.name</code>, <code>project.description</code>, or even arbitrary properties you put in your pom <code>&lt;properties&gt;</code>, etc.  Resource filtering, combined with Maven profiles, can give you variable build behavior at build time.  When you specify a profile at runtime with <code>-PmyProfile</code>, that can enable properties that then can show up in your build.</p>
",Alex Miller,yiwei,1284342635,1498704897,1498704897
http://stackoverflow.com/a/36992531/12916,Why can&#39;t environment variables with dashes be accessed in bash 4.1.2?,1445,Matthew Herbst,Charles Duffy,1462214102,1462231092,1462230682,https://stackoverflow.com/questions/36989263/why-cant-environment-variables-with-dashes-be-accessed-in-bash-4-1-2,"<p>The ""why"" is almost irrelevant: The POSIX standard makes it very clear that <code>export</code> is only required to support arguments which are valid names, and anything with a dash is not a valid name. Thus, no POSIX shell is required to support exporting or expanding variable names with dashes, via indirect expansion or otherwise.</p>

<p>It's worth noting that ShellShock -- a major security bug caused by sloppy handling of environment contents -- is fixed in the bash 4.1 present in the current CentOS 6 updates repo; increased rigor in an area which spawned security bugs should be no surprise.</p>

<p>The remainder of this answer will focus on demonstrating that the new behavior of bash 4.1 is explicitly allowed, or even required, by POSIX -- and thus that the prior behavior was an undefined implementation artifact.</p>

<hr>

<p>To <A HREF=""http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html"" rel=""noreferrer"">quote POSIX on environment variables</A>:</p>

<blockquote>
  <p>These strings have the form name=value; names shall not contain the character '='. For values to be portable across systems conforming to IEEE Std 1003.1-2001, the value shall be composed of characters from the portable character set (except NUL and as indicated below). There is no meaning associated with the order of strings in the environment. If more than one string in a process' environment has the same name, the consequences are undefined.</p>
  
  <p><B>Environment variable names used by the utilities in the Shell and Utilities volume of IEEE Std 1003.1-2001 consist solely of uppercase letters, digits, and the '_' (underscore) from the characters defined in Portable Character Set and do not begin with a digit.</B> Other characters may be permitted by an implementation; applications shall tolerate the presence of such names. Uppercase and lowercase letters shall retain their unique identities and shall not be folded together. <B>The name space of environment variable names containing lowercase letters is reserved for applications.</B> Applications can define any environment variables with names from this name space without modifying the behavior of the standard utilities.</p>
  
  <p><strong>Note:</strong> Other applications may have difficulty dealing with environment variable names that start with a digit. For this reason, use of such names is not recommended anywhere.</p>
</blockquote>

<p>Thus:</p>

<ul>
<li>Tools (including the shell) are <em>required</em> to fully support environment variable names with uppercase and lowercase letters, digits (except in the first position), and the underscore.</li>
<li>Tools (including the shell) should <em>tolerate</em> other names -- meaning they shouldn't crash or misbehave in their presence -- but are not required to support them.</li>
</ul>

<hr>

<p>Finally, shells are explicitly allowed to discard environment variable names which are not also shell variable names. From <A HREF=""http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html"" rel=""noreferrer"">the relevant standard</A>:</p>

<blockquote>
  <p>It is unspecified whether environment variables that were passed to the shell when it was invoked, but were not used to initialize shell variables (see Shell Variables) because they had invalid names, are included in the environment passed to execl() and (if execl() fails as described above) to the new shell.</p>
</blockquote>

<hr>

<p>Moreover, what defines a valid shell name <A HREF=""http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap03.html#tag_03_231"" rel=""noreferrer"">is well-defined</A>:</p>

<blockquote>
  <p><strong>Name</strong> - In the shell command language, a word consisting solely of underscores, digits, and alphabetics from the portable character set. The first character of a name is not a digit.</p>
</blockquote>

<p>Notably, only underscores (not dashes) are considered part of a valid name in a POSIX-compliant shell.</p>

<hr>

<p>...and <A HREF=""http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#export"" rel=""noreferrer"">the POSIX specification for <code>export</code></A> explicitly uses the word ""name"" (which it defined in the text quoted above), and describes it as applying to ""variables"" (shell variables, the restrictions on names for which are also subject to restrictions quoted elsewhere in this document):</p>

<blockquote>
  <p>The shell shall give the export attribute to the variables corresponding to the specified names, which shall cause them to be in the environment of subsequently executed commands. If the name of a variable is followed by = word, then the value of that variable shall be set to word.</p>
</blockquote>

<hr>

<p>All the above being said -- if your operating system provides a <code>/proc/self/environ</code> which represents the state of your enviroment variables at process startup (before a shell has, as it's allowed to do, potentially discarded any variables which don't have valid names in shell), you can extract content with invalid names like so:</p>

<pre><code># using a lower-case name where possible is in line with POSIX guidelines, see above
aws_access_key_id_var=""AWS_${BUCKET_NAME}_ACCESS_KEY_ID""
while IFS= read -r -d '' var; do
  [[ $var = ""$aws_access_key_id_var""=* ]] || continue
  val=${var#""${aws_access_key_id_var}=""}
  break
done &lt;/proc/self/environ
echo ""Extracted value: $val""
</code></pre>
",Charles Duffy,Charles Duffy,1462227634,1462231092,1462231092
http://stackoverflow.com/a/37054753/2601552,Force close all connections in a node.js http server,16220,Matt Zukowski,,1379513799,1519909423,0,https://stackoverflow.com/questions/18874689/force-close-all-connections-in-a-node-js-http-server,"<p>My approach comes from <a href=""https://stackoverflow.com/questions/14626636/how-do-i-shutdown-a-node-js-https-server-immediately/14636625#14636625"">this one</a> and it basically does what @Ege zcan said.</p>

<p>The only addition is that I set a route to switch off my server because node wasn't getting the signals from my terminal (<code>'SIGTERM'</code> and <code>'SIGINT'</code>).</p>

<p>Well, node was getting the signals from my terminal when doing <code>node whatever.js</code> but when delegating that task to a script (like the <code>'start'</code> script in package.json --> <code>npm start</code>) it failed to be switched off by <code>Ctrl+C</code>, so this approach worked for me.</p>

<p>Please note I am under <strong>Cygwin</strong> and for me killing a server before this meant to close the terminal and reopen it again.</p>

<p>Also note that I am using <strong>express</strong> for the routing stuff.</p>

<pre><code>var http=require('http');
var express= require('express');

var app= express();

app.get('/', function (req, res) {
    res.send('I am alive but if you want to kill me just go to &lt;a href=""/exit""&gt;/exit&lt;/a&gt;');
});

app.get('/exit', killserver);

var server =http.createServer(app).listen(3000, function(){
  console.log('Express server listening on port 3000');
  /*console.log(process);*/
});


// Maintain a hash of all connected sockets
var sockets = {}, nextSocketId = 0;
server.on('connection', function (socket) {
  // Add a newly connected socket
  var socketId = nextSocketId++;
  sockets[socketId] = socket;
  console.log('socket', socketId, 'opened');

  // Remove the socket when it closes
  socket.on('close', function () {
    console.log('socket', socketId, 'closed');
    delete sockets[socketId];
  });

  // Extend socket lifetime for demo purposes
  socket.setTimeout(4000);
});


// close the server and destroy all the open sockets
function killserver() {
    console.log(""U killed me but I'll take my revenge soon!!"");
  // Close the server
  server.close(function () { console.log('Server closed!'); });
  // Destroy all open sockets
  for (var socketId in sockets) {
    console.log('socket', socketId, 'destroyed');
    sockets[socketId].destroy();
  }
};
</code></pre>
",gugol,Community,1462463056,1462463056,1495540021
http://stackoverflow.com/a/37096512/2608858,How to convert seconds to minutes and hours in javascript,46218,ALSD Minecraft,,1462683491,1552555355,0,https://stackoverflow.com/questions/37096367/how-to-convert-seconds-to-minutes-and-hours-in-javascript,"<p>I think you would find <a href=""https://stackoverflow.com/questions/5539028/converting-seconds-into-hhmmss"">this solution</a> very helpful. </p>

<p>You modify the display format to fit your needs with something like this - </p>

<pre><code>function secondsToHms(d) {
    d = Number(d);
    var h = Math.floor(d / 3600);
    var m = Math.floor(d % 3600 / 60);
    var s = Math.floor(d % 3600 % 60);

    var hDisplay = h &gt; 0 ? h + (h == 1 ? "" hour, "" : "" hours, "") : """";
    var mDisplay = m &gt; 0 ? m + (m == 1 ? "" minute, "" : "" minutes, "") : """";
    var sDisplay = s &gt; 0 ? s + (s == 1 ? "" second"" : "" seconds"") : """";
    return hDisplay + mDisplay + sDisplay; 
}
</code></pre>
",Wilson Lee,Community,1462684919,1462684919,1495540493
http://stackoverflow.com/a/3709809/223092,Wait until all jQuery Ajax requests are done?,491126,jamietelin,Maistrenko Vitalii,1284472965,1547554304,1506497133,https://stackoverflow.com/questions/3709597/wait-until-all-jquery-ajax-requests-are-done,"<p><strong>NOTE:</strong> The above answers use functionality that didn't exist at the time that this answer was written.  I recommend using <code>jQuery.when()</code> instead of these approaches, but I'm leaving the answer for historical purposes.</p>

<p>-</p>

<p>You could probably get by with a simple counting semaphore, although how you implement it would be dependent on your code.  A simple example would be something like...</p>

<pre><code>var semaphore  = 0,     // counting semaphore for ajax requests
    all_queued = false; // bool indicator to account for instances where the first request might finish before the second even starts

semaphore++;
$.get('ajax/test1.html', function(data) {
    semaphore--;
    if (all_queued &amp;&amp; semaphore === 0) {
        // process your custom stuff here
    }
});

semaphore++;
$.get('ajax/test2.html', function(data) {
    semaphore--;
    if (all_queued &amp;&amp; semaphore === 0) {
        // process your custom stuff here
    }
});

semaphore++;
$.get('ajax/test3.html', function(data) {
    semaphore--;
    if (all_queued &amp;&amp; semaphore === 0) {
        // process your custom stuff here
    }
});

semaphore++;
$.get('ajax/test4.html', function(data) {
    semaphore--;
    if (all_queued &amp;&amp; semaphore === 0) {
        // process your custom stuff here
    }
});

// now that all ajax requests are queued up, switch the bool to indicate it
all_queued = true;
</code></pre>

<p>If you wanted this to operate like {async: false} but you didn't want to lock the browser, you could accomplish the same thing with a jQuery queue.</p>

<pre><code>var $queue = $(""&lt;div/&gt;"");
$queue.queue(function(){
    $.get('ajax/test1.html', function(data) {
        $queue.dequeue();
    });
}).queue(function(){
    $.get('ajax/test2.html', function(data) {
        $queue.dequeue();
    });
}).queue(function(){
    $.get('ajax/test3.html', function(data) {
        $queue.dequeue();
    });
}).queue(function(){
    $.get('ajax/test4.html', function(data) {
        $queue.dequeue();
    });
});
</code></pre>
",BBonifield,BBonifield,1284474381,1469052902,1469052902
http://stackoverflow.com/a/371043/141245,Shortest way to get an Iterator over a range of Integers in Java,30345,cretzel,,1229426182,1474319513,0,https://stackoverflow.com/questions/371026/shortest-way-to-get-an-iterator-over-a-range-of-integers-in-java,"<p>Untested. Mapping that onto ""min, count"" is left as an exercise for the reader.</p>

<pre><code>public class IntRangeIterator implements Iterator&lt;Integer&gt; {
  private int nextValue;
  private final int max;
  public IntRangeIterator(int min, int max) {
    if (min &gt; max) {
      throw new IllegalArgumentException(""min must be &lt;= max"");
    }
    this.nextValue = min;
    this.max = max;
  }

  public boolean hasNext() {
    return nextValue &lt;= max;
  }

  public Integer next() {
    if (!hasNext()) {
      throw new NoSuchElementException();
    }
    return Integer.valueOf(nextValue++);
  }

  public void remove() {
    throw new UnsupportedOperationException();
  }
}
</code></pre>
",Joachim Sauer,,1229426914,1229426914,0
http://stackoverflow.com/a/37192581/1539303,HTML5 canvas ctx.fillText won&#39;t do line breaks?,80292,Spectraljump,Nakilon,1297934004,1549129185,1381846263,https://stackoverflow.com/questions/5026961/html5-canvas-ctx-filltext-wont-do-line-breaks,"<p>My ES5 solution for the problem:</p>

<pre><code>var wrap_text = (ctx, text, x, y, lineHeight, maxWidth, textAlign) =&gt; {
  if(!textAlign) textAlign = 'center'
  ctx.textAlign = textAlign
  var words = text.split(' ')
  var lines = []
  var sliceFrom = 0
  for(var i = 0; i &lt; words.length; i++) {
    var chunk = words.slice(sliceFrom, i).join(' ')
    var last = i === words.length - 1
    var bigger = ctx.measureText(chunk).width &gt; maxWidth
    if(bigger) {
      lines.push(words.slice(sliceFrom, i).join(' '))
      sliceFrom = i
    }
    if(last) {
      lines.push(words.slice(sliceFrom, words.length).join(' '))
      sliceFrom = i
    }
  }
  var offsetY = 0
  var offsetX = 0
  if(textAlign === 'center') offsetX = maxWidth / 2
  for(var i = 0; i &lt; lines.length; i++) {
    ctx.fillText(lines[i], x + offsetX, y + offsetY)
    offsetY = offsetY + lineHeight
  }
}
</code></pre>

<p>More information on the issue is <a href=""http://olegberman.com/simple-algorithm-to-wrap-text-in-html5-canvas/"" rel=""nofollow"">on my blog</a>.</p>
",Oleg Berman,,1463070466,1463070466,0
http://stackoverflow.com/a/372503/51685,"Should unauthorized actions in the UI be hidden, disabled, or result in an error?",7489,tvanfosson,Community,1229446603,1503394943,1495541432,https://stackoverflow.com/questions/371921/should-unauthorized-actions-in-the-ui-be-hidden-disabled-or-result-in-an-error,"<p>Hidden - This is the best approach for actions that are never available to the current user. There is no point in having the user waste mental effort figuring out why something is disabled if there is no action they can take to change this.  </p>

<p>Disabled - This is the best approach for actions that are sometimes available, but not at the moment or in the current context. A disabled option should convey two things: first, the action is not available right now, and second, there is something the user could do to make the action available (change some setting or permission, select an item, enter prerequisite data, etc.). If you can indicate what needs to be done to enable the action in a tooltip - all the better. Enabling/disabling actions as the user enters data or changes context provides excellent feedback about what the program requires.</p>

<p>Fail with an Error - This is the worst choice. You should only resort to an error report for operations that might work: you can't tell that it will fail except by trying. </p>
",Stephen C. Steel,,1229457681,1229457681,0
http://stackoverflow.com/a/37370620/5769952,How to draw a path correctly?,102,RoiEX,RoiEX,1463781381,1463993801,1463993801,https://stackoverflow.com/questions/37356438/how-to-draw-a-path-correctly,"<p>Choosing 1 as step size for the 'index' array is the so-called uniform parametrization, which typically will not lead to a good result unless your data points also distribute relatively uniformly. I would recommend using either chord-length parametrization or centripetal parametrization as in the following:</p>

<pre><code>t0 = 0.0
t1 = d1/L
t2 = t1 + d2/L  
t3 = t2 + d3/L
............
t(n-1)= 1.0.
</code></pre>

<p>where <br></p>

<pre><code>d1=|P1-P0|^e, d2=|P2-P1|^e, d3=|P3-P2|^e and L = d1+d2+d3+.....d(n-1). 
</code></pre>

<p>For chord-length parametrization, use e=1.0 in above formula. For centripetal parametrization, use e=0.5. Note that using e=0.0 will simply result in the uniform parametrization. If your data point has very non-uniform distribution (i.e., some distances between points are huge and some are small), centripetal parametrization will often lead to better result than chord-length parametrization. <br></p>
",fang,fang,1463892035,1463892389,1463892389
http://stackoverflow.com/a/3738696/148668,Stable Cotangent,16350,Meh.,,1284751844,1562138049,0,https://stackoverflow.com/questions/3738384/stable-cotangent,"<p><code>cot(x) = cos(x)/sin(x)</code> should be more numerically stable close to /2 than <code>cot(x) = 1/tan(x)</code>.  You can implement that efficiently using <a href=""http://linux.die.net/man/3/sincos"" rel=""noreferrer""><code>sincos</code></a> on platforms that have it.</p>

<p>Another possibility is <code>cot(x) = tan(M_PI_2 - x)</code>.  This should be faster than the above (even if <code>sincos</code> is available), but it may also be less accurate, because <code>M_PI_2</code> is of course only an approximation of the transcendental number /2, so the difference <code>M_PI_2 - x</code> will not be accurate to the full width of a <code>double</code> mantissa -- in fact, if you get unlucky, it may have only a few meaningful bits.</p>
",zwol,zwol,1284754464,1438140290,1438140290
http://stackoverflow.com/a/37505496/2312428,How to enable Windows console QuickEdit Mode from python?,722,R01k,,1464445130,1464571619,0,https://stackoverflow.com/questions/37500076/how-to-enable-windows-console-quickedit-mode-from-python,"<p>You can use <a href=""https://docs.python.org/3/library/ctypes.html"" rel=""noreferrer"">ctypes</a> to call <a href=""https://msdn.microsoft.com/en-us/library/ms683167"" rel=""noreferrer""><code>GetConsoleMode</code></a> and <a href=""https://msdn.microsoft.com/en-us/library/ms686033"" rel=""noreferrer""><code>SetConsoleMode</code></a>. </p>

<p>ctypes definitions:</p>

<pre><code>import msvcrt
import atexit
import ctypes
from ctypes import wintypes

kernel32 = ctypes.WinDLL('kernel32', use_last_error=True)

# input flags
ENABLE_PROCESSED_INPUT = 0x0001
ENABLE_LINE_INPUT      = 0x0002
ENABLE_ECHO_INPUT      = 0x0004
ENABLE_WINDOW_INPUT    = 0x0008
ENABLE_MOUSE_INPUT     = 0x0010
ENABLE_INSERT_MODE     = 0x0020
ENABLE_QUICK_EDIT_MODE = 0x0040

# output flags
ENABLE_PROCESSED_OUTPUT   = 0x0001
ENABLE_WRAP_AT_EOL_OUTPUT = 0x0002
ENABLE_VIRTUAL_TERMINAL_PROCESSING = 0x0004 # VT100 (Win 10)

def check_zero(result, func, args):    
    if not result:
        err = ctypes.get_last_error()
        if err:
            raise ctypes.WinError(err)
    return args

if not hasattr(wintypes, 'LPDWORD'): # PY2
    wintypes.LPDWORD = ctypes.POINTER(wintypes.DWORD)

kernel32.GetConsoleMode.errcheck= check_zero
kernel32.GetConsoleMode.argtypes = (
    wintypes.HANDLE,   # _In_  hConsoleHandle
    wintypes.LPDWORD,) # _Out_ lpMode

kernel32.SetConsoleMode.errcheck= check_zero
kernel32.SetConsoleMode.argtypes = (
    wintypes.HANDLE, # _In_  hConsoleHandle
    wintypes.DWORD,) # _Out_ lpMode
</code></pre>

<p>The following wraps the underlying WinAPI functions as <code>get_console_mode</code> and <code>set_console_mode</code>. I've limited the wrappers to operating on just the console's active input buffer or active output buffer, i.e. <code>\\.\CONIN$</code> and <code>\\.\CONOUT$</code>. I think this is simpler than having to worry about file descriptors and handles. Notably <code>sys.stdin</code> and <code>sys.stdout</code> may be redirected elsewhere, as may also be the case for the C runtime's standard I/O <code>FILE</code> streams, file descriptors, and the Windows standard handles that you can get from <code>GetStdHandle</code>. In these cases you can still open <code>CONIN$</code> and <code>CONOUT$</code>, as long as the process is attached to a console.</p>

<pre><code>def get_console_mode(output=False):
    '''Get the mode of the active console input or output
       buffer. Note that if the process isn't attached to a
       console, this function raises an EBADF IOError.
    '''
    device = r'\\.\CONOUT$' if output else r'\\.\CONIN$'
    with open(device, 'r+') as con:
        mode = wintypes.DWORD()
        hCon = msvcrt.get_osfhandle(con.fileno())
        kernel32.GetConsoleMode(hCon, ctypes.byref(mode))
        return mode.value

def set_console_mode(mode, output=False):
    '''Set the mode of the active console input or output
       buffer. Note that if the process isn't attached to a
       console, this function raises an EBADF IOError.
    '''
    device = r'\\.\CONOUT$' if output else r'\\.\CONIN$'
    with open(device, 'r+') as con:
        hCon = msvcrt.get_osfhandle(con.fileno())
        kernel32.SetConsoleMode(hCon, mode)
</code></pre>

<p><code>update_console_mode</code> combines the latter functions to let you pass in the <code>flags</code> you want to set and the <code>mask</code> of flags to modify. This includes flags to clear. It also allows restoring the previous mode by registering an <a href=""https://docs.python.org/3/library/atexit.html#atexit.register"" rel=""noreferrer"">atexit function</a>.</p>

<pre><code>def update_console_mode(flags, mask, output=False, restore=False):
    '''Update a masked subset of the current mode of the active
       console input or output buffer. Note that if the process
       isn't attached to a console, this function raises an
       EBADF IOError.
    '''
    current_mode = get_console_mode(output)
    if current_mode &amp; mask != flags &amp; mask:
        mode = current_mode &amp; ~mask | flags &amp; mask
        set_console_mode(mode, output)
    else:
        restore = False
    if restore:
        atexit.register(set_console_mode, current_mode, output)
</code></pre>

<p>Example:</p>

<pre><code>if __name__ == '__main__':
    import os
    import sys
    import time

    if sys.stderr is None:
        os.close(2)
        sys.stderr = open('stderr.txt', 'w', buffering=1)

    print(""%#06x, %#06x"" % (get_console_mode(),
                            get_console_mode(output=True)))    

    flags = mask = ENABLE_QUICK_EDIT_MODE    
    update_console_mode(flags, mask, restore=True)

    print(""%#06x, %#06x"" % (get_console_mode(),
                            get_console_mode(output=True)))    

    time.sleep(10) # check console properties
</code></pre>
",eryksun,eryksun,1464487692,1464571619,1464571619
http://stackoverflow.com/a/37521148/693140,Django Migration RunSQL Conditional on Database Type,2495,Alex Rothberg,,1441310791,1500625421,0,https://stackoverflow.com/questions/32384547/django-migration-runsql-conditional-on-database-type,"<p>I just had the same need. I had to edit a migration that set the initial value of a sequence, which works on postgres but not sqlite. Here's how I wrapped the RunSQL inside a RunPython, following the documentation that Daniel linked to.</p>

<pre><code>from django.db import migrations


def forwards(apps, schema_editor):
    if not schema_editor.connection.vendor == 'postgres':
        return
    migrations.RunSQL(
        ""alter sequence api_consumer_id_seq restart with 1000500;"")


class Migration(migrations.Migration):
    dependencies = [
        ('api', '0043_auto_20160416_2313'),
    ]

    operations = [
        migrations.RunPython(forwards),
    ]
</code></pre>
",Matthew,,1464597424,1464597424,0
http://stackoverflow.com/a/3755343/263004,"Cross-browser, javascript getAttribute() method?",28499,tester,tester,1285014627,1355478987,1285015953,https://stackoverflow.com/questions/3755227/cross-browser-javascript-getattribute-method,"<p>With regard to your question's update, you could try this. </p>

<p>It may be overkill, but if <code>getAttribute()</code> and the dot notation don't return a result, it iterates through the <code>attributes</code> object to try to find a match.</p>

<p><strong>Example:</strong> <a href=""http://jsfiddle.net/4ZwNs/"" rel=""noreferrer"">http://jsfiddle.net/4ZwNs/</a></p>

<pre><code>var funcs = {
    getAttr: function(ele, attr) {
        var result = (ele.getAttribute &amp;&amp; ele.getAttribute(attr)) || null;
        if( !result ) {
            var attrs = ele.attributes;
            var length = attrs.length;
            for(var i = 0; i &lt; length; i++)
                if(attrs[i].nodeName === attr)
                    result = attrs[i].nodeValue;
        }
        return result;
    }
};

var result = funcs.getAttr(el, 'hash');
</code></pre>

<p>It's up to you to do some cross-browser testing, though. :o)</p>

<hr>

<p>Using <code>ele.attributes</code>, you need to access them by index, as in:</p>

<pre><code>ele.attributes[0].nodeName;   // ""id"" (for example)
ele.attributes[0].nodeValue;  // ""my_id"" (for example)
</code></pre>

<p>Trying to pass <code>attributes</code> an attribute name appears to return a value whose <code>typeof</code> is <code>object</code>, so your <code>else</code> code is running even though <code>ele.attributes[attr]</code> doesn't give you the value you want.</p>
",user113716,Vivin Paliath,1285015473,1342481002,1342481002
http://stackoverflow.com/a/3755343/361337,"Cross-browser, javascript getAttribute() method?",28499,tester,tester,1285014627,1355478987,1285015953,https://stackoverflow.com/questions/3755227/cross-browser-javascript-getattribute-method,"<p>With regard to your question's update, you could try this. </p>

<p>It may be overkill, but if <code>getAttribute()</code> and the dot notation don't return a result, it iterates through the <code>attributes</code> object to try to find a match.</p>

<p><strong>Example:</strong> <a href=""http://jsfiddle.net/4ZwNs/"" rel=""noreferrer"">http://jsfiddle.net/4ZwNs/</a></p>

<pre><code>var funcs = {
    getAttr: function(ele, attr) {
        var result = (ele.getAttribute &amp;&amp; ele.getAttribute(attr)) || null;
        if( !result ) {
            var attrs = ele.attributes;
            var length = attrs.length;
            for(var i = 0; i &lt; length; i++)
                if(attrs[i].nodeName === attr)
                    result = attrs[i].nodeValue;
        }
        return result;
    }
};

var result = funcs.getAttr(el, 'hash');
</code></pre>

<p>It's up to you to do some cross-browser testing, though. :o)</p>

<hr>

<p>Using <code>ele.attributes</code>, you need to access them by index, as in:</p>

<pre><code>ele.attributes[0].nodeName;   // ""id"" (for example)
ele.attributes[0].nodeValue;  // ""my_id"" (for example)
</code></pre>

<p>Trying to pass <code>attributes</code> an attribute name appears to return a value whose <code>typeof</code> is <code>object</code>, so your <code>else</code> code is running even though <code>ele.attributes[attr]</code> doesn't give you the value you want.</p>
",user113716,Vivin Paliath,1285015473,1342481002,1342481002
http://stackoverflow.com/a/37570158/2066546,Rails send_file don&#39;t play mp4,1436,Bruno Campos,,1352330669,1464787728,0,https://stackoverflow.com/questions/13280044/rails-send-file-dont-play-mp4,"<p>To stream videos, we have to handle the requested <a href=""https://en.wikipedia.org/wiki/Byte_serving"" rel=""noreferrer"">byte range</a> for some browsers.</p>

<h2>Solution 1: Use the <code>send_file_with_range</code> gem</h2>

<p>The easy way would be to have the <code>send_file</code> method patched by the <a href=""https://github.com/adamcooke/send_file_with_range"" rel=""noreferrer"">send_file_with_range gem</a>.</p>

<p>Include the gem in the Gemfile </p>

<pre><code># Gemfile
gem 'send_file_with_range'
</code></pre>

<p>and provide the <code>range: true</code> option for <code>send_file</code>:</p>

<pre><code>def show
  video = Video.find(params[:id])
  send_file video.full_path, type: ""video/mp4"", 
    disposition: ""inline"", range: true
end
</code></pre>

<p><a href=""https://github.com/adamcooke/send_file_with_range/blob/master/lib/send_file_with_range/controller_extension.rb"" rel=""noreferrer"">The patch</a> is quite short and worth a look. 
But, unfortunately, it did not work for me with Rails 4.2.</p>

<h2>Solution 2: Patch <code>send_file</code> manually</h2>

<p>Inspired by the gem, extending the controller manually is fairly easy:</p>

<pre><code>class VideosController &lt; ApplicationController

  def show
    video = Video.find(params[:id])
    send_file video.full_path, type: ""video/mp4"",
      disposition: ""inline"", range: true
  end

private

  def send_file(path, options = {})
    if options[:range]
      send_file_with_range(path, options)
    else
      super(path, options)
    end
  end

  def send_file_with_range(path, options = {})
    if File.exist?(path)
      size = File.size(path)
      if !request.headers[""Range""]
        status_code = 200 # 200 OK
        offset = 0
        length = File.size(path)
      else
        status_code = 206 # 206 Partial Content
        bytes = Rack::Utils.byte_ranges(request.headers, size)[0]
        offset = bytes.begin
        length = bytes.end - bytes.begin
      end
      response.header[""Accept-Ranges""] = ""bytes""
      response.header[""Content-Range""] = ""bytes #{bytes.begin}-#{bytes.end}/#{size}"" if bytes

      send_data IO.binread(path, length, offset), options
    else
      raise ActionController::MissingFile, ""Cannot read file #{path}.""
    end
  end

end
</code></pre>

<h2>Further reading</h2>

<p>Because, at first, I did not know the difference between <code>stream: true</code> and <code>range: true</code>, I found this railscast helpful:</p>

<p><a href=""http://railscasts.com/episodes/266-http-streaming"" rel=""noreferrer"">http://railscasts.com/episodes/266-http-streaming</a></p>
",fiedl,,1464787728,1464787728,0
http://stackoverflow.com/a/3758880/1035417,How to convert byte size into human readable format in java?,189347,Igor Mukhin,AZ_,1285058579,1548858707,1544704764,https://stackoverflow.com/questions/3758606/how-to-convert-byte-size-into-human-readable-format-in-java,"<p>Here is my go at it (no loops and handles both SI units and binary units):</p>

<pre><code>public static String humanReadableByteCount(long bytes, boolean si) {
    int unit = si ? 1000 : 1024;
    if (bytes &lt; unit) return bytes + "" B"";
    int exp = (int) (Math.log(bytes) / Math.log(unit));
    String pre = (si ? ""kMGTPE"" : ""KMGTPE"").charAt(exp-1) + (si ? """" : ""i"");
    return String.format(""%.1f %sB"", bytes / Math.pow(unit, exp), pre);
}
</code></pre>

<p>Example output:</p>

<pre><code>                              SI     BINARY

                   0:        0 B        0 B
                  27:       27 B       27 B
                 999:      999 B      999 B
                1000:     1.0 kB     1000 B
                1023:     1.0 kB     1023 B
                1024:     1.0 kB    1.0 KiB
                1728:     1.7 kB    1.7 KiB
              110592:   110.6 kB  108.0 KiB
             7077888:     7.1 MB    6.8 MiB
           452984832:   453.0 MB  432.0 MiB
         28991029248:    29.0 GB   27.0 GiB
       1855425871872:     1.9 TB    1.7 TiB
 9223372036854775807:     9.2 EB    8.0 EiB   (Long.MAX_VALUE)
</code></pre>

<hr>

<p>Related article: <a href=""http://programming.guide/java/formatting-byte-size-to-human-readable-format.html"" rel=""noreferrer"">Java: Formatting byte size to human readable format</a></p>
",aioobe,aioobe,1285060941,1477713481,1477713481
http://stackoverflow.com/a/377028/205832,Test if executable exists in Python?,122182,Piotr Lesnicki,sorin,1229579736,1522071727,1471340584,https://stackoverflow.com/questions/377017/test-if-executable-exists-in-python,"<p>Easiest way I can think of: </p>

<pre><code>def which(program):
    import os
    def is_exe(fpath):
        return os.path.isfile(fpath) and os.access(fpath, os.X_OK)

    fpath, fname = os.path.split(program)
    if fpath:
        if is_exe(program):
            return program
    else:
        for path in os.environ[""PATH""].split(os.pathsep):
            exe_file = os.path.join(path, program)
            if is_exe(exe_file):
                return exe_file

    return None
</code></pre>

<p><strong>Edit</strong>: Updated code sample to include logic for handling case where provided argument is already a full path to the executable, i.e. ""which /bin/ls"". This mimics the behavior of the UNIX 'which' command.</p>

<p><strong>Edit</strong>: Updated to use os.path.isfile() instead of os.path.exists() per comments.</p>

<p><strong>Edit</strong>: <code>path.strip('""')</code> seems like the wrong thing to do here. Neither Windows nor POSIX appear to encourage quoted PATH items.</p>
",Jay,mar77i,1229580329,1510312113,1510312113
http://stackoverflow.com/a/377028/298479,Test if executable exists in Python?,122182,Piotr Lesnicki,sorin,1229579736,1522071727,1471340584,https://stackoverflow.com/questions/377017/test-if-executable-exists-in-python,"<p>Easiest way I can think of: </p>

<pre><code>def which(program):
    import os
    def is_exe(fpath):
        return os.path.isfile(fpath) and os.access(fpath, os.X_OK)

    fpath, fname = os.path.split(program)
    if fpath:
        if is_exe(program):
            return program
    else:
        for path in os.environ[""PATH""].split(os.pathsep):
            exe_file = os.path.join(path, program)
            if is_exe(exe_file):
                return exe_file

    return None
</code></pre>

<p><strong>Edit</strong>: Updated code sample to include logic for handling case where provided argument is already a full path to the executable, i.e. ""which /bin/ls"". This mimics the behavior of the UNIX 'which' command.</p>

<p><strong>Edit</strong>: Updated to use os.path.isfile() instead of os.path.exists() per comments.</p>

<p><strong>Edit</strong>: <code>path.strip('""')</code> seems like the wrong thing to do here. Neither Windows nor POSIX appear to encourage quoted PATH items.</p>
",Jay,mar77i,1229580329,1510312113,1510312113
http://stackoverflow.com/a/377028/548792,Test if executable exists in Python?,122182,Piotr Lesnicki,sorin,1229579736,1522071727,1471340584,https://stackoverflow.com/questions/377017/test-if-executable-exists-in-python,"<p>Easiest way I can think of: </p>

<pre><code>def which(program):
    import os
    def is_exe(fpath):
        return os.path.isfile(fpath) and os.access(fpath, os.X_OK)

    fpath, fname = os.path.split(program)
    if fpath:
        if is_exe(program):
            return program
    else:
        for path in os.environ[""PATH""].split(os.pathsep):
            exe_file = os.path.join(path, program)
            if is_exe(exe_file):
                return exe_file

    return None
</code></pre>

<p><strong>Edit</strong>: Updated code sample to include logic for handling case where provided argument is already a full path to the executable, i.e. ""which /bin/ls"". This mimics the behavior of the UNIX 'which' command.</p>

<p><strong>Edit</strong>: Updated to use os.path.isfile() instead of os.path.exists() per comments.</p>

<p><strong>Edit</strong>: <code>path.strip('""')</code> seems like the wrong thing to do here. Neither Windows nor POSIX appear to encourage quoted PATH items.</p>
",Jay,mar77i,1229580329,1510312113,1510312113
http://stackoverflow.com/a/377028/70191,Test if executable exists in Python?,122182,Piotr Lesnicki,sorin,1229579736,1522071727,1471340584,https://stackoverflow.com/questions/377017/test-if-executable-exists-in-python,"<p>Easiest way I can think of: </p>

<pre><code>def which(program):
    import os
    def is_exe(fpath):
        return os.path.isfile(fpath) and os.access(fpath, os.X_OK)

    fpath, fname = os.path.split(program)
    if fpath:
        if is_exe(program):
            return program
    else:
        for path in os.environ[""PATH""].split(os.pathsep):
            exe_file = os.path.join(path, program)
            if is_exe(exe_file):
                return exe_file

    return None
</code></pre>

<p><strong>Edit</strong>: Updated code sample to include logic for handling case where provided argument is already a full path to the executable, i.e. ""which /bin/ls"". This mimics the behavior of the UNIX 'which' command.</p>

<p><strong>Edit</strong>: Updated to use os.path.isfile() instead of os.path.exists() per comments.</p>

<p><strong>Edit</strong>: <code>path.strip('""')</code> seems like the wrong thing to do here. Neither Windows nor POSIX appear to encourage quoted PATH items.</p>
",Jay,mar77i,1229580329,1510312113,1510312113
http://stackoverflow.com/a/37755811/5909792,How to &quot;render&quot; HTML with PyQt5&#39;s QWebEngineView,9661,Six,Community,1465580085,1536702462,1495541874,https://stackoverflow.com/questions/37754138/how-to-render-html-with-pyqt5s-qwebengineview,"<p>Quite a bit of discussion on the topic was made in the following thread: <a href=""https://riverbankcomputing.com/pipermail/pyqt/2015-January/035324.html"" rel=""noreferrer"">https://riverbankcomputing.com/pipermail/pyqt/2015-January/035324.html</a></p>

<p>The new QWebEngine interface takes account of the fact that the
underlying Chromium engine is asynchronous. As such we have to turn an asynchronous API into a synchronous one.</p>

<p>Here's how that looks:</p>

<pre><code>def render(source_html):
    """"""Fully render HTML, JavaScript and all.""""""

    import sys
    from PyQt5.QtCore import QEventLoop
    from PyQt5.QtWidgets import QApplication
    from PyQt5.QtWebEngineWidgets import QWebEngineView

    class Render(QWebEngineView):
        def __init__(self, html):
            self.html = None
            self.app = QApplication(sys.argv)
            QWebEngineView.__init__(self)
            self.loadFinished.connect(self._loadFinished)
            self.setHtml(html)
            while self.html is None:
                self.app.processEvents(QEventLoop.ExcludeUserInputEvents | QEventLoop.ExcludeSocketNotifiers | QEventLoop.WaitForMoreEvents)
            self.app.quit()

        def _callable(self, data):
            self.html = data

        def _loadFinished(self, result):
            self.page().toHtml(self._callable)

    return Render(source_html).html

import requests
sample_html = requests.get(dummy_url).text
print(render(sample_html))
</code></pre>
",Six,,1465586755,1465586755,0
http://stackoverflow.com/a/37785920/1954789,PhantomJS; click an element,77405,user984003,Artjom B.,1364800569,1498037155,1465808633,https://stackoverflow.com/questions/15739263/phantomjs-click-an-element,"<p>Double clicks are also possible with PhantomJS.</p>

<h1>Recommended</h1>

<p>This is adapted from <a href=""https://stackoverflow.com/a/24026636/1816580"">the answer</a> of <a href=""https://stackoverflow.com/users/68602/stovroz"">stovroz</a> and triggers a native <code>dblclick</code> including the <code>mousedown</code>, <code>mouseup</code> and <code>click</code> events (two of each).</p>

<pre><code>var rect = page.evaluate(function(selector){
    return document.querySelector(selector).getBoundingClientRect();
}, selector);
page.sendEvent('doubleclick', rect.left + rect.width / 2, rect.top + rect.height / 2);
</code></pre>

<h1>Other ways</h1>

<p>The following two ways only trigger the <code>dblclick</code> event, but not the other events that should precede it.</p>

<p>Adapted from <a href=""https://stackoverflow.com/a/15948355/1816580"">this answer</a> of <a href=""https://stackoverflow.com/users/663031/torazaburo"">torazaburo</a>:</p>

<pre><code>page.evaluate(function(selector){
    var el = document.querySelector(sel);
    var ev = document.createEvent(""MouseEvent"");
    ev.initMouseEvent(
        'dblclick',
        true /* bubble */, true /* cancelable */,
        window, null,
        0, 0, 0, 0, /* coordinates */
        false, false, false, false, /* modifier keys */
        0 /*left*/, null
    );
    el.dispatchEvent(ev);
}, selector);
</code></pre>

<p>Adapted from <a href=""https://stackoverflow.com/a/25180804/1816580"">this answer</a> of <a href=""https://stackoverflow.com/users/3431942/jobins-john"">Jobins John</a>:</p>

<pre><code>page.evaluate(function(selector){
    var el = document.querySelector(sel);
    var e = document.createEvent('MouseEvents');
    e.initMouseEvent('dblclick', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    el.dispatchEvent(e);
}, selector);
</code></pre>

<p><a href=""https://gist.github.com/artjomb/54f4ab35940170f7449a1cf274c63bec"" rel=""nofollow noreferrer""><strong>Full test script</strong></a></p>
",Artjom B.,Community,1465809393,1465809393,1495540493
http://stackoverflow.com/a/37946701/3807342,Casting a Spring&#39;s Proxy object to the actual runtime class,21147,ssedano,ssedano,1305193963,1466518547,1305201415,https://stackoverflow.com/questions/5976247/casting-a-springs-proxy-object-to-the-actual-runtime-class,"<p>For me version from <strong>EDIT 2</strong> didn't worked. Below one worked:</p>

<pre><code>@SuppressWarnings({""unchecked""})
protected &lt;T&gt; T getTargetObject(Object proxy) throws Exception {
    while( (AopUtils.isJdkDynamicProxy(proxy))) {
        return (T) getTargetObject(((Advised)proxy).getTargetSource().getTarget());
    }
    return (T) proxy; // expected to be cglib proxy then, which is simply a specialized class
}
</code></pre>

<p>Usage:</p>

<pre><code>    UserServicesImpl serviceImpl = getTargetObject(serviceProxy);
    serviceImpl.setUserDao(userDAO);
</code></pre>
",siulkilulki,siulkilulki,1466518015,1466518547,1466518547
http://stackoverflow.com/a/38024962/1203182,Date formatting based on user locale on android,44556,shailbenq,Arnaud,1340068609,1560951453,1527947528,https://stackoverflow.com/questions/11093182/date-formatting-based-on-user-locale-on-android,"<p>Android api provide easy way to display localized date format. 
The following code works. </p>

<pre><code>public class FileDateUtil {
    public static String getModifiedDate(long modified) {
        return getModifiedDate(Locale.getDefault(), modified);
    }

    public static String getModifiedDate(Locale locale, long modified) {
        SimpleDateFormat dateFormat = null;

        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR2) {
            dateFormat = new SimpleDateFormat(getDateFormat(locale));
        } else {
            dateFormat = new SimpleDateFormat(""MMM/dd/yyyy hh:mm:ss aa"");
        }

        return dateFormat.format(new Date(modified));
    }

    @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR2)
    public static String getDateFormat(Locale locale) {
        return DateFormat.getBestDateTimePattern(locale, ""MM/dd/yyyy hh:mm:ss aa"");
    }
}
</code></pre>

<p>You can check following code.</p>

<pre><code>String koreaData = FileDateUtil.getModifiedDate(Locale.KOREA, System.currentTimeMillis());
String franceData = FileDateUtil.getModifiedDate(Locale.FRENCH, System.currentTimeMillis());
String defaultData = FileDateUtil.getModifiedDate(Locale.getDefault(), System.currentTimeMillis());

String result = ""Korea : "" + koreaData + System.getProperty(""line.separator"");
result += ""France : "" + franceData + System.getProperty(""line.separator"");
result += ""Default : "" + defaultData + System.getProperty(""line.separator""); 
tv.setText(result);
</code></pre>
",Justin Song,Alxio Da Luz Rodrigues,1466828952,1527613979,1527613979
http://stackoverflow.com/a/3806004/1262753,select all text in contenteditable div when it focus/click,34877,angry kiwi,,1285605296,1540843271,0,https://stackoverflow.com/questions/3805852/select-all-text-in-contenteditable-div-when-it-focus-click,"<p>This will do it. The timer is there for Chrome and Safari because in those browsers, the native browser behaviour that selects the whole element seems to trigger after the focus event, thereby overriding the effect of the selection code unless postponed until after the focus event:</p>

<pre><code>var div = document.getElementById(""editable"");

div.onfocus = function() {
    window.setTimeout(function() {
        var sel, range;
        if (window.getSelection &amp;&amp; document.createRange) {
            range = document.createRange();
            range.selectNodeContents(div);
            sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);
        } else if (document.body.createTextRange) {
            range = document.body.createTextRange();
            range.moveToElementText(div);
            range.select();
        }
    }, 1);
};
</code></pre>
",Tim Down,,1285606545,1285606545,0
http://stackoverflow.com/a/3806596/1037948,How to get JavaScript caller function line number? How to get JavaScript caller source URL?,102043,Tal,Kara,1251377347,1553759606,1393880827,https://stackoverflow.com/questions/1340872/how-to-get-javascript-caller-function-line-number-how-to-get-javascript-caller,"<p>This works for me in chrome/QtWebView</p>

<pre><code>function getErrorObject(){
    try { throw Error('') } catch(err) { return err; }
}

var err = getErrorObject();
var caller_line = err.stack.split(""\n"")[4];
var index = caller_line.indexOf(""at "");
var clean = caller_line.slice(index+2, caller_line.length);
</code></pre>
",Nathan Landis,,1285611263,1285611263,0
http://stackoverflow.com/a/3819589/729729,How do I do OuterHTML in firefox?,32055,NibblyPig,MatrixFrog,1257771876,1367158003,1282860959,https://stackoverflow.com/questions/1700870/how-do-i-do-outerhtml-in-firefox,"<p>Here's the function we use in <a href=""http://beebole.com/pure"" rel=""noreferrer"">pure.js</a>:</p>

<pre><code>function outerHTML(node){
    return node.outerHTML || new XMLSerializer().serializeToString(node);
}
</code></pre>

<p>To use it the DOM way:</p>

<pre><code>outerHTML(document.getElementById('theNode'));
</code></pre>

<p>And it works cross browsers</p>

<p>EDIT: <strong>WARNING!</strong>
There is a trouble with XMLSerializer, it generates an XML(XHTML) string.<br/>
Which means you can end up with a tags like <code>&lt;div class=""team"" /&gt;</code> instead of<br/><code>&lt;div class=""team""&gt;&lt;/div&gt;</code><br/>Some browsers do not like it. I had some pain with Firefox 3.5 recently.</p>

<p>So for our <code>pure.js</code> lib we came back to the old and safe way:</p>

<pre><code>function outerHTML(node){
    // if IE, Chrome take the internal method otherwise build one
  return node.outerHTML || (
      function(n){
          var div = document.createElement('div'), h;
          div.appendChild( n.cloneNode(true) );
          h = div.innerHTML;
          div = null;
          return h;
      })(node);
  }
</code></pre>
",Mic,Mic,1285745508,1291330514,1291330514
http://stackoverflow.com/a/3819589/973988,How do I do OuterHTML in firefox?,32055,NibblyPig,MatrixFrog,1257771876,1367158003,1282860959,https://stackoverflow.com/questions/1700870/how-do-i-do-outerhtml-in-firefox,"<p>Here's the function we use in <a href=""http://beebole.com/pure"" rel=""noreferrer"">pure.js</a>:</p>

<pre><code>function outerHTML(node){
    return node.outerHTML || new XMLSerializer().serializeToString(node);
}
</code></pre>

<p>To use it the DOM way:</p>

<pre><code>outerHTML(document.getElementById('theNode'));
</code></pre>

<p>And it works cross browsers</p>

<p>EDIT: <strong>WARNING!</strong>
There is a trouble with XMLSerializer, it generates an XML(XHTML) string.<br/>
Which means you can end up with a tags like <code>&lt;div class=""team"" /&gt;</code> instead of<br/><code>&lt;div class=""team""&gt;&lt;/div&gt;</code><br/>Some browsers do not like it. I had some pain with Firefox 3.5 recently.</p>

<p>So for our <code>pure.js</code> lib we came back to the old and safe way:</p>

<pre><code>function outerHTML(node){
    // if IE, Chrome take the internal method otherwise build one
  return node.outerHTML || (
      function(n){
          var div = document.createElement('div'), h;
          div.appendChild( n.cloneNode(true) );
          h = div.innerHTML;
          div = null;
          return h;
      })(node);
  }
</code></pre>
",Mic,Mic,1285745508,1291330514,1291330514
http://stackoverflow.com/a/3821756/1048959,Call a base class constructor later (not in the initializer list) in C++,8496,placeholder,,1285758925,1381331364,0,https://stackoverflow.com/questions/3821064/call-a-base-class-constructor-later-not-in-the-initializer-list-in-c,"<p>As was said by several people answering, you cannot delay the invocation of a base class constructor, but <a href=""https://stackoverflow.com/questions/3821064/call-a-base-class-constructor-later-not-in-the-initializer-list-in-c/3821091#3821091"">Konrad has given a good answer</a> that might well solve your problem. However, this does have its drawbacks (for example, when you need to initialize several functions with values whose calculations share intermediate results), so just to be complete, here's another way of solving the problem of fixed initialization order, by <em>using</em> it. </p>

<p>Given the fixed order of initialization, if you have control over the derived class (and how else would you come to fiddle with one of its ctors?), you can sneak in a private base so that it is going to be initialized before the other base, which can then be initialized with the private base's already calculated values: </p>

<pre><code>class my_dirty_little_secret {
  // friend class the_class;
public: 
  my_dirty_little_secret(const std::string&amp; str)
  {
    // however that calculates x, y, and z from str I wouldn't know
  }
  int x;
  std::string y;
  float z;
};

class the_class : private my_dirty_little_secret // must be first, see ctor
                , public the_other_base_class {
  public:
    the_class(const std::string str)
      : my_dirty_little_secret(str)
      , the_other_base_class(x, y, z)
    {
    }
  // ...
};
</code></pre>

<p>The <code>my_dirty_little_secret</code> class is a private base so that users of <code>the_class</code> cannot use it, all of its stuff is private, too, with explicit friendship granting only <code>the_class</code> access to it. However, since it's listed first in the base class list, it will reliably be constructed before <code>the_other_base_class</code>, so whatever it calculates can be used to initialize that.<br>
A nice comment at the base class list hopefully prevents from others breaking things by refactoring. </p>
",sbi,Community,1285765029,1367916065,1495540777
http://stackoverflow.com/a/38230545/1006854,Replacing d3.transform in D3 v4,14217,Antonio Giovanni Schiavone,Lukasz Wiktor,1467810528,1505917452,1470297211,https://stackoverflow.com/questions/38224875/replacing-d3-transform-in-d3-v4,"<p><strong>Edit 2016-10-07:</strong> For a more general approach see addendum below.</p>

<hr>

<p>According to the changelog it is gone. There is a function in <a href=""https://github.com/d3/d3-interpolate/blob/master/src/transform/decompose.js#L12-L25"" rel=""noreferrer""><code>transform/decompose.js</code></a>, though,  which does the calculations for internal use. Sadly, it is not exposed for external use.</p>

<p>That said, this is easily done even without putting any D3 to use:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function getTranslation(transform) {
  // Create a dummy g for calculation purposes only. This will never
  // be appended to the DOM and will be discarded once this function 
  // returns.
  var g = document.createElementNS(""http://www.w3.org/2000/svg"", ""g"");
  
  // Set the transform attribute to the provided string value.
  g.setAttributeNS(null, ""transform"", transform);
  
  // consolidate the SVGTransformList containing all transformations
  // to a single SVGTransform of type SVG_TRANSFORM_MATRIX and get
  // its SVGMatrix. 
  var matrix = g.transform.baseVal.consolidate().matrix;
  
  // As per definition values e and f are the ones for the translation.
  return [matrix.e, matrix.f];
}

console.log(getTranslation(""translate(20,30)""))  // simple case: should return [20,30]
console.log(getTranslation(""rotate(45) skewX(20) translate(20,30) translate(-5,40)""))</code></pre>
</div>
</div>
</p>

<p>This creates a dummy <code>g</code> element for calculation purposes using standard DOM methods and sets its <code>transform</code> attribute to the string containing your transformations. It then calls <code>.consolidate()</code> of the <a href=""https://developer.mozilla.org/en-US/docs/Web/API/SVGTransformList"" rel=""noreferrer""><code>SVGTransformList</code></a> interface to consolidate the possibly long list of transformation to a single <a href=""https://developer.mozilla.org/en-US/docs/Web/API/SVGTransform"" rel=""noreferrer""><code>SVGTransform</code></a> of type <code>SVG_TRANSFORM_MATRIX</code> which contains the boiled down version of all transformations in its <code>matrix</code> property. This <a href=""https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix"" rel=""noreferrer""><code>SVGMatrix</code></a> per definition holds the values for the translation in its properties <code>e</code> and <code>f</code>.</p>

<p>Using this function <code>getTranslation()</code> you could rewrite your D3 v3 statement</p>

<pre><code>d3.transform(transformString).translate;
</code></pre>

<p>as</p>

<pre><code>getTranslation(transformString);
</code></pre>

<hr>

<h3>Addendum</h3>

<p>Because this answer has gained some interest over time, I decided to put together a more general method capable of returning not only the translation but the values of all transformation definitions of a transform string. The basic approach is the same as laid out in my original post above plus the calculations taken from <a href=""https://github.com/d3/d3-interpolate/blob/master/src/transform/decompose.js#L12-L25"" rel=""noreferrer""><code>transform/decompose.js</code></a>. This function will return an object having properties for all transformation definitions much like the former <a href=""https://github.com/d3/d3-3.x-api-reference/blob/master/Math.md#d3_transform"" rel=""noreferrer""><code>d3.transform()</code></a> did.</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function getTransformation(transform) {
  // Create a dummy g for calculation purposes only. This will never
  // be appended to the DOM and will be discarded once this function 
  // returns.
  var g = document.createElementNS(""http://www.w3.org/2000/svg"", ""g"");
  
  // Set the transform attribute to the provided string value.
  g.setAttributeNS(null, ""transform"", transform);
  
  // consolidate the SVGTransformList containing all transformations
  // to a single SVGTransform of type SVG_TRANSFORM_MATRIX and get
  // its SVGMatrix. 
  var matrix = g.transform.baseVal.consolidate().matrix;
  
  // Below calculations are taken and adapted from the private function
  // transform/decompose.js of D3's module d3-interpolate.
  var {a, b, c, d, e, f} = matrix;   // ES6, if this doesn't work, use below assignment
  // var a=matrix.a, b=matrix.b, c=matrix.c, d=matrix.d, e=matrix.e, f=matrix.f; // ES5
  var scaleX, scaleY, skewX;
  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;
  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;
  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;
  if (a * d &lt; b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;
  return {
    translateX: e,
    translateY: f,
    rotate: Math.atan2(b, a) * 180 / Math.PI,
    skewX: Math.atan(skewX) * 180 / Math.PI,
    scaleX: scaleX,
    scaleY: scaleY
  };
}

console.log(getTransformation(""translate(20,30)""));  
console.log(getTransformation(""rotate(45) skewX(20) translate(20,30) translate(-5,40)""));</code></pre>
</div>
</div>
</p>
",altocumulus,Mehdi,1467827453,1493336852,1493336852
http://stackoverflow.com/a/38244327/1499541,Getting Bitmap from vector drawable,40503,liltof,,1447429413,1560036771,0,https://stackoverflow.com/questions/33696488/getting-bitmap-from-vector-drawable,"<p>Checked on API: 17, 21, 23</p>

<pre><code>public static Bitmap getBitmapFromVectorDrawable(Context context, int drawableId) {
    Drawable drawable = ContextCompat.getDrawable(context, drawableId);
    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) {
        drawable = (DrawableCompat.wrap(drawable)).mutate();
    }

    Bitmap bitmap = Bitmap.createBitmap(drawable.getIntrinsicWidth(),
            drawable.getIntrinsicHeight(), Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
    drawable.draw(canvas);

    return bitmap;
}
</code></pre>

<p><strong>UPDATE:</strong></p>

<p>Project gradle:</p>

<pre><code>dependencies {
        classpath 'com.android.tools.build:gradle:2.2.0-alpha5'
    }
</code></pre>

<p>Module gradle:</p>

<pre><code>android {
    compileSdkVersion 23
    buildToolsVersion '23.0.3'
    defaultConfig {
        minSdkVersion 16
        targetSdkVersion 23
        vectorDrawables.useSupportLibrary = true
    }
    ...
}
...
</code></pre>
",Alexey,Hugo Gresse,1467890968,1497904784,1497904784
http://stackoverflow.com/a/38249390/166700,How to change the Mac OS X dock icon in a wxPython application,441,christianbrodbeck,,1408569685,1467905024,0,https://stackoverflow.com/questions/25414646/how-to-change-the-mac-os-x-dock-icon-in-a-wxpython-application,"<p>I had the same issue and it seems there is a lack of documentation about this.  I found several piece of information in different discussion threads.</p>

<p>You have to use the <code>iconType</code> argument of the <code>wx.TaskBarIcon</code> constructor.  there are currently three possible values:</p>

<ul>
<li><code>wx.TBI_CUSTOM_STATUSITEM</code>: will create an icon in right part of the menu bar. </li>
<li><code>wx.TBI_DEFAULT_TYPE</code>: default parameter, similar as TBI_DOCK for wxPython 3.0. </li>
<li><code>wx.TBI_DOCK</code>: will replace the Python rocket with the selected icon</li>
</ul>

<p>If you reuse the example from the <a href=""https://wiki.wxpython.org/Custom%20Mac%20OsX%20Dock%20Bar%20Icon"" rel=""nofollow"">wx official documentation</a>, you just need to replace this line</p>

<p><code>wx.TaskBarIcon.__init__(self)</code></p>

<p>with this line</p>

<p><code>wx.TaskBarIcon.__init__(self, iconType=wx.TBI_DOCK)</code></p>

<p>The problem with this solution is that you have to choose to put the icon either in the menu bar either in the dock.  It does not seem possible to put an icon in the both place while using only one instance of <code>wx.TaskBarIcon</code>.</p>

<p>Here are my current settings:</p>

<ul>
<li>mac os X 10.11.5</li>
<li>wxPython 3.0.2.0</li>
<li>python 2.7.10</li>
</ul>
",djo,,1467905024,1467905024,0
http://stackoverflow.com/a/383245/805649,How can I merge properties of two JavaScript objects dynamically?,1148889,JC Grubbs,Rohan Fating,1223166654,1555444680,1504801953,https://stackoverflow.com/questions/171251/how-can-i-merge-properties-of-two-javascript-objects-dynamically,"<p>I googled for code to merge object properties and ended up here. However since there wasn't any code for recursive merge I wrote it myself. (Maybe jQuery extend is recursive BTW?) Anyhow, hopefully someone else will find it useful as well.</p>

<p>(Now the code does not use <code>Object.prototype</code> :)</p>

<h2>Code</h2>

<pre><code>/*
* Recursively merge properties of two objects 
*/
function MergeRecursive(obj1, obj2) {

  for (var p in obj2) {
    try {
      // Property in destination object set; update its value.
      if ( obj2[p].constructor==Object ) {
        obj1[p] = MergeRecursive(obj1[p], obj2[p]);

      } else {
        obj1[p] = obj2[p];

      }

    } catch(e) {
      // Property in destination object not set; create it and set its value.
      obj1[p] = obj2[p];

    }
  }

  return obj1;
}
</code></pre>

<h2>An example</h2>

<pre><code>o1 = {  a : 1,
        b : 2,
        c : {
          ca : 1,
          cb : 2,
          cc : {
            cca : 100,
            ccb : 200 } } };

o2 = {  a : 10,
        c : {
          ca : 10,
          cb : 20, 
          cc : {
            cca : 101,
            ccb : 202 } } };

o3 = MergeRecursive(o1, o2);
</code></pre>

<p><strong>Produces object o3 like</strong></p>

<pre><code>o3 = {  a : 10,
        b : 2,
        c : {
          ca : 10,
          cb : 20,
          cc : { 
            cca : 101,
            ccb : 202 } } };
</code></pre>
",Markus,Ry-,1229774747,1368112593,1368112593
http://stackoverflow.com/a/38334226/5351316,PHP DateTime microseconds always returns 0,46600,eydelber,The Archetypal Paul,1223080327,1524719840,1226828470,https://stackoverflow.com/questions/169428/php-datetime-microseconds-always-returns-0,"<p>Right, I'd like to clear this up once and for all. </p>

<p>An explanation of how to display the <a href=""https://en.wikipedia.org/wiki/ISO_8601"" rel=""nofollow noreferrer"">ISO 8601</a> format date &amp; time in PHP with <strong>milli</strong>seconds and <strong>micro</strong>seconds...</p>

<p><em><strong>milli</strong>seconds or 'ms' have 4 digits after the decimal point e.g. 0.1234. <strong>micro</strong>seconds or 's' have 7 digits after decimal. Seconds fractions/names explanation <a href=""http://www.sengpielaudio.com/calculator-millisecond.htm"" rel=""nofollow noreferrer"">here</a></em></p>

<p>PHP's <code>date()</code> function does not behave entirely as expected with milliseconds or microseconds as it will only except an integer, as explained in the <a href=""http://php.net/manual/en/function.date.php"" rel=""nofollow noreferrer"">php date docs</a> under format character 'u'.</p>

<p>Based on Lucky's comment idea (<a href=""https://stackoverflow.com/questions/169428/php-datetime-microseconds-always-returns-0#comment1068246_169458"">here</a>), but with corrected PHP syntax and properly handling seconds formatting <em>(Lucky's code added an incorrect extra '0' after the seconds)</em></p>

<p>These also eliminate race conditions and correctly formats the seconds.</p>

<h2>PHP Date with <strong>milli</strong>seconds</h2>

<p>Working Equivalent of <code>date('Y-m-d H:i:s')."".$milliseconds"";</code> </p>

<pre><code>list($sec, $usec) = explode('.', microtime(true));
echo date('Y-m-d H:i:s.', $sec) . $usec;
</code></pre>

<p>Output = <code>2016-07-12 16:27:08.5675</code></p>

<h2>PHP Date with <strong>micro</strong>seconds</h2>

<p>Working Equivalent of <code>date('Y-m-d H:i:s')."".$microseconds"";</code> or <code>date('Y-m-d H:i:s.u')</code> if the date function behaved as expected with microseconds/<code>microtime()</code>/'u'</p>

<pre><code>list($usec, $sec) = explode(' ', microtime());
echo date('Y-m-d H:i:s', $sec) . substr($usec, 1);
</code></pre>

<p>Output = <code>2016-07-12 16:27:08.56752900</code></p>
",hozza,Community,1468340353,1468342308,1495541452
http://stackoverflow.com/a/38355228/769384,typescript runtime array type .map method available,190,ducin,,1468421309,1468421846,0,https://stackoverflow.com/questions/38354999/typescript-runtime-array-type-map-method-available,"<p>The compiler is right about not having the <code>map</code> method on type <code>IObjectSchema | IObjectSchema[]</code>, so you need to tell it that after the <code>if</code> it's safe to assume that you're dealing with <code>IObjectSchema[]</code>.</p>

<p>You have two options:</p>

<p>(1) Cast</p>

<pre><code>if (Array.isArray(value.items)) {
    return Array.prototype.concat.apply(items, (value.items as IObjectSchema[]).map(function(item, key) {
        return traverseCallback(item, path.concat(['items', key]), resolve);
    }));
}
</code></pre>

<p>(2) Use <a href=""https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-guards-and-differentiating-types"" rel=""nofollow"">type guards</a></p>

<pre><code>if (value.items instanceof Array) {
    return Array.prototype.concat.apply(items, value.items.map(function(item, key) {
        return traverseCallback(item, path.concat(['items', key]), resolve);
    }));
}
</code></pre>

<p>Seems like what you did is similar to my 2nd solution, but the compiler doesn't recognize the type guard when using <code>Array.isArray</code>.<br>
You can only use <code>typeof</code> or <code>instanceof</code>.</p>

<p>You can also create your own type guard if you still want to use <code>Array.isArray</code>:</p>

<pre><code>function isObjectSchemaArray(items: IObjectSchema | IObjectSchema[]): items is IObjectSchema[] {
    return Array.isArray(items);
}
</code></pre>

<p>And then:</p>

<pre><code>if (isObjectSchemaArray(value.items)) { ... }
</code></pre>
",Nitzan Tomer,,1468421846,1468421846,0
http://stackoverflow.com/a/3843768/848811,"PHPUnit: assert two arrays are equal, but order of elements not important",70300,koen,Valentin Despa,1285928318,1553245171,1384599819,https://stackoverflow.com/questions/3838288/phpunit-assert-two-arrays-are-equal-but-order-of-elements-not-important,"<p>The cleanest way to do this would be to extend phpunit with a new assertion method. But here's an idea for a simpler way for now. Untested code, please verify:</p>

<p>Somewhere in your app:</p>

<pre><code> /**
 * Determine if two associative arrays are similar
 *
 * Both arrays must have the same indexes with identical values
 * without respect to key ordering 
 * 
 * @param array $a
 * @param array $b
 * @return bool
 */
function arrays_are_similar($a, $b) {
  // if the indexes don't match, return immediately
  if (count(array_diff_assoc($a, $b))) {
    return false;
  }
  // we know that the indexes, but maybe not values, match.
  // compare the values between the two arrays
  foreach($a as $k =&gt; $v) {
    if ($v !== $b[$k]) {
      return false;
    }
  }
  // we have identical indexes, and no unequal values
  return true;
}
</code></pre>

<p>In your test:</p>

<pre><code>$this-&gt;assertTrue(arrays_are_similar($foo, $bar));
</code></pre>
",Craig,,1285977678,1285977678,0
http://stackoverflow.com/a/384380/182183,JavaScript isDOM -- How do you check if a JavaScript Object is a DOM Object?,155080,Jonathan Lonowski,Peter Mortensen,1229851565,1545961458,1477431386,https://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object,"<p>This might be of interest:</p>

<pre><code>function isElement(obj) {
  try {
    //Using W3 DOM2 (works for FF, Opera and Chrome)
    return obj instanceof HTMLElement;
  }
  catch(e){
    //Browsers not supporting W3 DOM2 don't have HTMLElement and
    //an exception is thrown and we end up here. Testing some
    //properties that all elements have (works on IE7)
    return (typeof obj===""object"") &amp;&amp;
      (obj.nodeType===1) &amp;&amp; (typeof obj.style === ""object"") &amp;&amp;
      (typeof obj.ownerDocument ===""object"");
  }
}
</code></pre>

<p>It's part of the <a href=""http://www.w3.org/TR/2003/REC-DOM-Level-2-HTML-20030109/html.html"" rel=""noreferrer"">DOM, Level2</a>.</p>

<p><strong>Update 2</strong>: This is how I implemented it in my own library:
(the previous code didn't work in Chrome, because Node and HTMLElement are functions instead of the expected object. This code is tested in FF3, IE7, Chrome 1 and Opera 9).</p>

<pre><code>//Returns true if it is a DOM node
function isNode(o){
  return (
    typeof Node === ""object"" ? o instanceof Node : 
    o &amp;&amp; typeof o === ""object"" &amp;&amp; typeof o.nodeType === ""number"" &amp;&amp; typeof o.nodeName===""string""
  );
}

//Returns true if it is a DOM element    
function isElement(o){
  return (
    typeof HTMLElement === ""object"" ? o instanceof HTMLElement : //DOM2
    o &amp;&amp; typeof o === ""object"" &amp;&amp; o !== null &amp;&amp; o.nodeType === 1 &amp;&amp; typeof o.nodeName===""string""
);
}
</code></pre>
",some,Filipp W.,1229861459,1511257409,1511257409
http://stackoverflow.com/a/384380/315935,JavaScript isDOM -- How do you check if a JavaScript Object is a DOM Object?,155080,Jonathan Lonowski,Peter Mortensen,1229851565,1545961458,1477431386,https://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object,"<p>This might be of interest:</p>

<pre><code>function isElement(obj) {
  try {
    //Using W3 DOM2 (works for FF, Opera and Chrome)
    return obj instanceof HTMLElement;
  }
  catch(e){
    //Browsers not supporting W3 DOM2 don't have HTMLElement and
    //an exception is thrown and we end up here. Testing some
    //properties that all elements have (works on IE7)
    return (typeof obj===""object"") &amp;&amp;
      (obj.nodeType===1) &amp;&amp; (typeof obj.style === ""object"") &amp;&amp;
      (typeof obj.ownerDocument ===""object"");
  }
}
</code></pre>

<p>It's part of the <a href=""http://www.w3.org/TR/2003/REC-DOM-Level-2-HTML-20030109/html.html"" rel=""noreferrer"">DOM, Level2</a>.</p>

<p><strong>Update 2</strong>: This is how I implemented it in my own library:
(the previous code didn't work in Chrome, because Node and HTMLElement are functions instead of the expected object. This code is tested in FF3, IE7, Chrome 1 and Opera 9).</p>

<pre><code>//Returns true if it is a DOM node
function isNode(o){
  return (
    typeof Node === ""object"" ? o instanceof Node : 
    o &amp;&amp; typeof o === ""object"" &amp;&amp; typeof o.nodeType === ""number"" &amp;&amp; typeof o.nodeName===""string""
  );
}

//Returns true if it is a DOM element    
function isElement(o){
  return (
    typeof HTMLElement === ""object"" ? o instanceof HTMLElement : //DOM2
    o &amp;&amp; typeof o === ""object"" &amp;&amp; o !== null &amp;&amp; o.nodeType === 1 &amp;&amp; typeof o.nodeName===""string""
);
}
</code></pre>
",some,Filipp W.,1229861459,1511257409,1511257409
http://stackoverflow.com/a/384380/699304,JavaScript isDOM -- How do you check if a JavaScript Object is a DOM Object?,155080,Jonathan Lonowski,Peter Mortensen,1229851565,1545961458,1477431386,https://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object,"<p>This might be of interest:</p>

<pre><code>function isElement(obj) {
  try {
    //Using W3 DOM2 (works for FF, Opera and Chrome)
    return obj instanceof HTMLElement;
  }
  catch(e){
    //Browsers not supporting W3 DOM2 don't have HTMLElement and
    //an exception is thrown and we end up here. Testing some
    //properties that all elements have (works on IE7)
    return (typeof obj===""object"") &amp;&amp;
      (obj.nodeType===1) &amp;&amp; (typeof obj.style === ""object"") &amp;&amp;
      (typeof obj.ownerDocument ===""object"");
  }
}
</code></pre>

<p>It's part of the <a href=""http://www.w3.org/TR/2003/REC-DOM-Level-2-HTML-20030109/html.html"" rel=""noreferrer"">DOM, Level2</a>.</p>

<p><strong>Update 2</strong>: This is how I implemented it in my own library:
(the previous code didn't work in Chrome, because Node and HTMLElement are functions instead of the expected object. This code is tested in FF3, IE7, Chrome 1 and Opera 9).</p>

<pre><code>//Returns true if it is a DOM node
function isNode(o){
  return (
    typeof Node === ""object"" ? o instanceof Node : 
    o &amp;&amp; typeof o === ""object"" &amp;&amp; typeof o.nodeType === ""number"" &amp;&amp; typeof o.nodeName===""string""
  );
}

//Returns true if it is a DOM element    
function isElement(o){
  return (
    typeof HTMLElement === ""object"" ? o instanceof HTMLElement : //DOM2
    o &amp;&amp; typeof o === ""object"" &amp;&amp; o !== null &amp;&amp; o.nodeType === 1 &amp;&amp; typeof o.nodeName===""string""
);
}
</code></pre>
",some,Filipp W.,1229861459,1511257409,1511257409
http://stackoverflow.com/a/384380/937891,JavaScript isDOM -- How do you check if a JavaScript Object is a DOM Object?,155080,Jonathan Lonowski,Peter Mortensen,1229851565,1545961458,1477431386,https://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object,"<p>This might be of interest:</p>

<pre><code>function isElement(obj) {
  try {
    //Using W3 DOM2 (works for FF, Opera and Chrome)
    return obj instanceof HTMLElement;
  }
  catch(e){
    //Browsers not supporting W3 DOM2 don't have HTMLElement and
    //an exception is thrown and we end up here. Testing some
    //properties that all elements have (works on IE7)
    return (typeof obj===""object"") &amp;&amp;
      (obj.nodeType===1) &amp;&amp; (typeof obj.style === ""object"") &amp;&amp;
      (typeof obj.ownerDocument ===""object"");
  }
}
</code></pre>

<p>It's part of the <a href=""http://www.w3.org/TR/2003/REC-DOM-Level-2-HTML-20030109/html.html"" rel=""noreferrer"">DOM, Level2</a>.</p>

<p><strong>Update 2</strong>: This is how I implemented it in my own library:
(the previous code didn't work in Chrome, because Node and HTMLElement are functions instead of the expected object. This code is tested in FF3, IE7, Chrome 1 and Opera 9).</p>

<pre><code>//Returns true if it is a DOM node
function isNode(o){
  return (
    typeof Node === ""object"" ? o instanceof Node : 
    o &amp;&amp; typeof o === ""object"" &amp;&amp; typeof o.nodeType === ""number"" &amp;&amp; typeof o.nodeName===""string""
  );
}

//Returns true if it is a DOM element    
function isElement(o){
  return (
    typeof HTMLElement === ""object"" ? o instanceof HTMLElement : //DOM2
    o &amp;&amp; typeof o === ""object"" &amp;&amp; o !== null &amp;&amp; o.nodeType === 1 &amp;&amp; typeof o.nodeName===""string""
);
}
</code></pre>
",some,Filipp W.,1229861459,1511257409,1511257409
http://stackoverflow.com/a/384380/999,JavaScript isDOM -- How do you check if a JavaScript Object is a DOM Object?,155080,Jonathan Lonowski,Peter Mortensen,1229851565,1545961458,1477431386,https://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object,"<p>This might be of interest:</p>

<pre><code>function isElement(obj) {
  try {
    //Using W3 DOM2 (works for FF, Opera and Chrome)
    return obj instanceof HTMLElement;
  }
  catch(e){
    //Browsers not supporting W3 DOM2 don't have HTMLElement and
    //an exception is thrown and we end up here. Testing some
    //properties that all elements have (works on IE7)
    return (typeof obj===""object"") &amp;&amp;
      (obj.nodeType===1) &amp;&amp; (typeof obj.style === ""object"") &amp;&amp;
      (typeof obj.ownerDocument ===""object"");
  }
}
</code></pre>

<p>It's part of the <a href=""http://www.w3.org/TR/2003/REC-DOM-Level-2-HTML-20030109/html.html"" rel=""noreferrer"">DOM, Level2</a>.</p>

<p><strong>Update 2</strong>: This is how I implemented it in my own library:
(the previous code didn't work in Chrome, because Node and HTMLElement are functions instead of the expected object. This code is tested in FF3, IE7, Chrome 1 and Opera 9).</p>

<pre><code>//Returns true if it is a DOM node
function isNode(o){
  return (
    typeof Node === ""object"" ? o instanceof Node : 
    o &amp;&amp; typeof o === ""object"" &amp;&amp; typeof o.nodeType === ""number"" &amp;&amp; typeof o.nodeName===""string""
  );
}

//Returns true if it is a DOM element    
function isElement(o){
  return (
    typeof HTMLElement === ""object"" ? o instanceof HTMLElement : //DOM2
    o &amp;&amp; typeof o === ""object"" &amp;&amp; o !== null &amp;&amp; o.nodeType === 1 &amp;&amp; typeof o.nodeName===""string""
);
}
</code></pre>
",some,Filipp W.,1229861459,1511257409,1511257409
http://stackoverflow.com/a/3844832/1052778,check if all elements in a list are identical,256904,max,jfs,1286004671,1562444239,1457107156,https://stackoverflow.com/questions/3844801/check-if-all-elements-in-a-list-are-identical,"<p>General method:</p>

<pre><code>def checkEqual1(iterator):
    iterator = iter(iterator)
    try:
        first = next(iterator)
    except StopIteration:
        return True
    return all(first == rest for rest in iterator)
</code></pre>

<p>One-liner:</p>

<pre><code>def checkEqual2(iterator):
   return len(set(iterator)) &lt;= 1
</code></pre>

<p>Also one-liner:</p>

<pre><code>def checkEqual3(lst):
   return lst[1:] == lst[:-1]
</code></pre>

<p>The difference between the 3 versions are that:</p>

<ol>
<li>In <code>checkEqual2</code> the content must be hashable.</li>
<li><code>checkEqual1</code> and <code>checkEqual2</code> can use any iterators, but <code>checkEqual3</code> must take a sequence input, typically concrete containers like a list or tuple.</li>
<li><code>checkEqual1</code> stops as soon as a difference is found.</li>
<li>Since <code>checkEqual1</code> contains more Python code, it is less efficient when many of the items are equal in the beginning.</li>
<li>Since <code>checkEqual2</code> and <code>checkEqual3</code> always perform O(N) copying operations, they will take longer if most of your input will return False.</li>
<li>For <code>checkEqual2</code> and <code>checkEqual3</code> it's harder to adapt comparison from <code>a == b</code> to <code>a is b</code>.</li>
</ol>

<hr>

<p><code>timeit</code> result, for Python 2.7 and (only s1, s4, s7, s9 should return True)</p>

<pre><code>s1 = [1] * 5000
s2 = [1] * 4999 + [2]
s3 = [2] + [1]*4999
s4 = [set([9])] * 5000
s5 = [set([9])] * 4999 + [set([10])]
s6 = [set([10])] + [set([9])] * 4999
s7 = [1,1]
s8 = [1,2]
s9 = []
</code></pre>

<p>we get</p>

<pre><code>      | checkEqual1 | checkEqual2 | checkEqual3  | checkEqualIvo | checkEqual6502 |
|-----|-------------|-------------|--------------|---------------|----------------|
| s1  | 1.19   msec | 348    usec | 183     usec | 51.6    usec  | 121     usec   |
| s2  | 1.17   msec | 376    usec | 185     usec | 50.9    usec  | 118     usec   |
| s3  | 4.17   usec | 348    usec | 120     usec | 264     usec  | 61.3    usec   |
|     |             |             |              |               |                |
| s4  | 1.73   msec |             | 182     usec | 50.5    usec  | 121     usec   |
| s5  | 1.71   msec |             | 181     usec | 50.6    usec  | 125     usec   |
| s6  | 4.29   usec |             | 122     usec | 423     usec  | 61.1    usec   |
|     |             |             |              |               |                |
| s7  | 3.1    usec | 1.4    usec | 1.24    usec | 0.932   usec  | 1.92    usec   |
| s8  | 4.07   usec | 1.54   usec | 1.28    usec | 0.997   usec  | 1.79    usec   |
| s9  | 5.91   usec | 1.25   usec | 0.749   usec | 0.407   usec  | 0.386   usec   |
</code></pre>

<p>Note:</p>

<pre><code># http://stackoverflow.com/q/3844948/
def checkEqualIvo(lst):
    return not lst or lst.count(lst[0]) == len(lst)

# http://stackoverflow.com/q/3844931/
def checkEqual6502(lst):
    return not lst or [lst[0]]*len(lst) == lst
</code></pre>
",kennytm,ankostis,1286005417,1534023515,1534023515
http://stackoverflow.com/a/3844948/4074877,check if all elements in a list are identical,256904,max,jfs,1286004671,1562444239,1457107156,https://stackoverflow.com/questions/3844801/check-if-all-elements-in-a-list-are-identical,"<p>A solution faster than using set() that works on sequences (not iterables) is to simply count the first element. This assumes the list is non-empty (but that's trivial to check, and decide yourself what the outcome should be on an empty list)</p>

<pre><code>x.count(x[0]) == len(x)
</code></pre>

<p>some simple benchmarks:</p>

<pre><code>&gt;&gt;&gt; timeit.timeit('len(set(s1))&lt;=1', 's1=[1]*5000', number=10000)
1.4383411407470703
&gt;&gt;&gt; timeit.timeit('len(set(s1))&lt;=1', 's1=[1]*4999+[2]', number=10000)
1.4765670299530029
&gt;&gt;&gt; timeit.timeit('s1.count(s1[0])==len(s1)', 's1=[1]*5000', number=10000)
0.26274609565734863
&gt;&gt;&gt; timeit.timeit('s1.count(s1[0])==len(s1)', 's1=[1]*4999+[2]', number=10000)
0.25654196739196777
</code></pre>
",Ivo van der Wijk,,1286007921,1286007921,0
http://stackoverflow.com/a/38531245/1143732,"After updating to Rails 5 and Devise 4.0.0.rc1, the devise authenticate_user! method is not defined",3406,Hassan,,1455468084,1469204595,0,https://stackoverflow.com/questions/35394261/after-updating-to-rails-5-and-devise-4-0-0-rc1-the-devise-authenticate-user-me,"<p>The answer for this is to simply change:</p>

<pre><code>skip_before_action :authenticate_user!
</code></pre>

<p>to ---</p>

<pre><code>skip_before_action :authenticate_user!, raise: false
</code></pre>

<p><a href=""https://github.com/plataformatec/devise/issues/4207"" rel=""noreferrer"">https://github.com/plataformatec/devise/issues/4207</a>
<a href=""https://github.com/thoughtbot/clearance/issues/621"" rel=""noreferrer"">https://github.com/thoughtbot/clearance/issues/621</a></p>
",hellion,,1469204595,1469204595,0
http://stackoverflow.com/a/38547909/608639,Initializing an __m128 type from a 64-bit unsigned int,4254,Gideon,,1399317902,1475554837,0,https://stackoverflow.com/questions/23480188/initializing-an-m128-type-from-a-64-bit-unsigned-int,"<blockquote>
  <p>I want to initialize a variable of type <code>__m128</code> ... where x is of type <code>uint64_t</code></p>
</blockquote>

<p>The intrinsic which takes the <code>uint64_t</code> is <code>_mm_set_epi64x</code> (as opposed to <code>_mm_set_epi64</code>, which takes a <code>__m64</code>).</p>

<p>I recently ran into the issue on Solaris. Sun Studio 12.3 and below lacks <code>_mm_set_epi64x</code>. It also lacks the work-arounds, like <code>_mm_cvtsi64_si128</code> and <code>_m_from_int64</code>.</p>

<p>Here's the hack I used, if interested. The other option was to disable SSE2, which was not too appealing (and it was 3x slower in benchmarks):</p>

<pre><code>// Sun Studio 12.3 and earlier lack SSE2's _mm_set_epi64 and _mm_set_epi64x.
#if defined(__SUNPRO_CC) &amp;&amp; (__SUNPRO_CC &lt; 0x5130)
inline __m128i _mm_set_epi64x(const uint64_t a, const uint64_t b)
{
    union INT_128_64 {
        __m128i   v128;
        uint64_t  v64[2];
    };

    INT_128_64 v;
    v.v64[0] = b; v.v64[1] = a; 
    return v.v128;
}
#endif
</code></pre>

<p>I believe C++11 could do additional things to help the compiler and performance, like initialize a constant array:</p>

<pre><code>const INT_128_64 v = {a,b};
return v.v128;
</code></pre>

<p>There's a big caveat... I believe there is <a href=""https://stackoverflow.com/q/11373203"">undefined behavior</a> because a write occurs using the <code>v64</code> member of the union, and then read occurs using the <code>v128</code> member of the union. Testing under SunCC shows the compiler is doing the expected (but technically incorrect) thing.</p>

<p>I believe you can sidestep the undefined behavior using a <code>memcpy</code>, but that could crush performance. Also see Peter Cordes' answer and discussion at <a href=""https://stackoverflow.com/a/38426740/608639"">How to swap two __m128i variables in C++03 given its an opaque type and an array?</a>.</p>

<p>The following may also be a good choice to avoid the undefined behavior from using the inactive union member. But I'm not sure about the punning.</p>

<pre><code>INT_128_64 v;
v.v64[0] = b; v.v64[1] = a;
return *(reinterpret_cast&lt;__m128i*&gt;(v.v64));
</code></pre>

<hr>

<p><strong><em>EDIT</em></strong> (three months later): Solaris and SunCC did not like the punning. It produced bad code for us, and we had to <code>memcpy</code> the value into <code>__m128i</code>. Unix, Linux, Windows, GCC, Clang, ICC, MSC were all OK. Only SunCC gave us trouble.</p>
",jww,Community,1469323448,1475554837,1495542302
http://stackoverflow.com/a/3855394/900747,How can I get query string values in JavaScript?,3463762,Kemal Emin,Brad Larson,1243066248,1555321091,1428368108,https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript,"<h1>ES2015 (ES6)</h1>

<pre><code>getQueryStringParams = query =&gt; {
    return query
        ? (/^[?#]/.test(query) ? query.slice(1) : query)
            .split('&amp;')
            .reduce((params, param) =&gt; {
                    let [key, value] = param.split('=');
                    params[key] = value ? decodeURIComponent(value.replace(/\+/g, ' ')) : '';
                    return params;
                }, {}
            )
        : {}
};
</code></pre>

<hr>

<h2>Without jQuery</h2>

<pre><code>var qs = (function(a) {
    if (a == """") return {};
    var b = {};
    for (var i = 0; i &lt; a.length; ++i)
    {
        var p=a[i].split('=', 2);
        if (p.length == 1)
            b[p[0]] = """";
        else
            b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, "" ""));
    }
    return b;
})(window.location.search.substr(1).split('&amp;'));
</code></pre>

<p>With an URL like <code>?topic=123&amp;name=query+string</code>, the following will return:</p>

<pre><code>qs[""topic""];    // 123
qs[""name""];     // query string
qs[""nothere""];  // undefined (object)
</code></pre>

<hr>

<h2>Google method</h2>

<p>Tearing Google's code I found the method they use: <code>getUrlParameters</code></p>

<pre><code>function (b) {
    var c = typeof b === ""undefined"";
    if (a !== h &amp;&amp; c) return a;
    for (var d = {}, b = b || k[B][vb], e = b[p](""?""), f = b[p](""#""), b = (f === -1 ? b[Ya](e + 1) : [b[Ya](e + 1, f - e - 1), ""&amp;"", b[Ya](f + 1)][K](""""))[z](""&amp;""), e = i.dd ? ia : unescape, f = 0, g = b[w]; f &lt; g; ++f) {
        var l = b[f][p](""="");
        if (l !== -1) {
            var q = b[f][I](0, l),
                l = b[f][I](l + 1),
                l = l[Ca](/\+/g, "" "");
            try {
                d[q] = e(l)
            } catch (A) {}
        }
    }
    c &amp;&amp; (a = d);
    return d
}
</code></pre>

<p>It is obfuscated, but it is understandable. It does not work because some variables are undefined.</p>

<p>They start to look for parameters on the url from <code>?</code> and also from the hash <code>#</code>. Then for each parameter they split in the equal sign <code>b[f][p](""="")</code> (which looks like <code>indexOf</code>, they use the position of the char to get the key/value). Having it split they check whether the parameter has a value or not, if it has then they store the value of <code>d</code>, otherwise they just continue.</p>

<p>In the end the object <code>d</code> is returned, handling escaping and the <code>+</code> sign. This object is just like mine, it has the same behavior.</p>

<hr>

<p>My method as a <strong>jQuery plugin</strong></p>

<pre><code>(function($) {
    $.QueryString = (function(paramsArray) {
        let params = {};

        for (let i = 0; i &lt; paramsArray.length; ++i)
        {
            let param = paramsArray[i]
                .split('=', 2);

            if (param.length !== 2)
                continue;

            params[param[0]] = decodeURIComponent(param[1].replace(/\+/g, "" ""));
        }

        return params;
    })(window.location.search.substr(1).split('&amp;'))
})(jQuery);
</code></pre>

<p>Usage</p>

<pre><code>//Get a param
$.QueryString.param
//-or-
$.QueryString[""param""]
//This outputs something like...
//""val""

//Get all params as object
$.QueryString
//This outputs something like...
//Object { param: ""val"", param2: ""val"" }

//Set a param (only in the $.QueryString object, doesn't affect the browser's querystring)
$.QueryString.param = ""newvalue""
//This doesn't output anything, it just updates the $.QueryString object

//Convert object into string suitable for url a querystring (Requires jQuery)
$.param($.QueryString)
//This outputs something like...
//""param=newvalue&amp;param2=val""

//Update the url/querystring in the browser's location bar with the $.QueryString object
history.replaceState({}, '', ""?"" + $.param($.QueryString));
//-or-
history.pushState({}, '', ""?"" + $.param($.QueryString));
</code></pre>

<hr>

<h2><a href=""http://jsperf.com/querystring-with-javascript"" rel=""noreferrer"">Performance test (split method against regex method)</a> (<a href=""http://jsperf.com/"" rel=""noreferrer"">jsPerf</a>)</h2>

<p>Preparation code: methods declaration</p>

<h3>Split test code</h3>

<pre><code>var qs = window.GetQueryString(query);

var search = qs[""q""];
var value = qs[""value""];
var undef = qs[""undefinedstring""];
</code></pre>

<h3>Regex test code</h3>

<pre><code>var search = window.getParameterByName(""q"");
var value = window.getParameterByName(""value"");
var undef = window.getParameterByName(""undefinedstring"");
</code></pre>

<p><strong>Testing in Firefox 4.0 x86 on Windows Server 2008 R2 / 7 x64</strong></p>

<ul>
<li><strong>Split method</strong>: 144,780 2.17% fastest</li>
<li><strong>Regex method</strong>: 13,891 0.85% | 90% slower</li>
</ul>
",BrunoLM,Roland,1286196784,1542122224,1542122224
http://stackoverflow.com/a/3859336/1310066,"Python, get windows special folders for currently logged-in user",9045,Primoz,Michael Petrotta,1286223969,1547751002,1286224104,https://stackoverflow.com/questions/3858851/python-get-windows-special-folders-for-currently-logged-in-user,"<p>Should you wish to do it without the win32 extensions, you can use <code>ctypes</code> to call <a href=""http://msdn.microsoft.com/en-us/library/bb762181%28VS.85%29.aspx"" rel=""noreferrer"">SHGetFolderPath</a>:</p>

<pre><code>&gt;&gt;&gt; import ctypes.wintypes
&gt;&gt;&gt; CSIDL_PERSONAL= 5       # My Documents
&gt;&gt;&gt; SHGFP_TYPE_CURRENT= 0   # Want current, not default value

&gt;&gt;&gt; buf= ctypes.create_unicode_buffer(ctypes.wintypes.MAX_PATH)
&gt;&gt;&gt; ctypes.windll.shell32.SHGetFolderPathW(0, CSIDL_PERSONAL, 0, SHGFP_TYPE_CURRENT, buf)
0
&gt;&gt;&gt; buf.value
u'C:\\Documents and Settings\\User\\My Documents'
</code></pre>
",bobince,,1286228202,1286228202,0
http://stackoverflow.com/a/38619281/2066546,Setting the cache_store in an initializer,8796,Jack Chu,Jack Chu,1303936758,1469639420,1303945765,https://stackoverflow.com/questions/5810289/setting-the-cache-store-in-an-initializer,"<p>The <code>config/initializers</code> are run after the <code>Rails.cache</code> is initialized, but after <code>config/application.rb</code> and <code>config/environments</code>.</p>

<h3>Configuration in config/application.rb or environments</h3>

<p>Thus, one solution would be to configure the cache in <code>config/application.rb</code> or <code>config/environments/*.rb</code>.</p>

<h3>Configuration in config/initializers/cache.rb</h3>

<p>If the cache should be configured in an initializer intentionally, this can be done by setting <code>Rails.cache</code> manually after the configuration:</p>

<pre><code># config/initializers/cache.rb
Rails.application.config.cache_store = :redis_store, APP_CONFIG['redis']

# Make sure to add this line (http://stackoverflow.com/a/38619281/2066546):
Rails.cache = ActiveSupport::Cache.lookup_store(Rails.application.config.cache_store)
</code></pre>

<h3>Add a spec</h3>

<p>In order to make sure it worked, add a spec like this:</p>

<pre><code># spec/features/smoke_spec.rb
require 'spec_helper'

feature ""Smoke test"" do
  scenario ""Testing the rails cache"" do
    Rails.cache.write ""foo"", ""bar""
    expect(Rails.cache.read(""foo"")).to eq ""bar""
    expect(Rails.cache).to be_kind_of ActiveSupport::Cache::RedisStore
  end
end
</code></pre>

<h3>Further information</h3>

<ul>
<li><code>Rails.cache</code> is set here during the application bootstrap: <a href=""https://github.com/rails/rails/blob/5-0-stable/railties/lib/rails/application/bootstrap.rb#L62L70"" rel=""nofollow"">https://github.com/rails/rails/blob/5-0-stable/railties/lib/rails/application/bootstrap.rb#L62L70</a>. The redis store does not respond to <code>:middleware</code>. Thus, we can leave out the additional lines.</li>
<li>See also: <a href=""https://github.com/rails/rails/issues/10908#issuecomment-19281765"" rel=""nofollow"">https://github.com/rails/rails/issues/10908#issuecomment-19281765</a></li>
<li><a href=""http://guides.rubyonrails.org/caching_with_rails.html#cache-stores"" rel=""nofollow"">http://guides.rubyonrails.org/caching_with_rails.html#cache-stores</a></li>
</ul>
",fiedl,,1469639420,1469639420,0
http://stackoverflow.com/a/3862957/1221924,How to find all the subclasses of a class given its name?,71114,Roman Prykhodchenko,martineau,1286270255,1536856356,1519498008,https://stackoverflow.com/questions/3862310/how-to-find-all-the-subclasses-of-a-class-given-its-name,"<p>New-style classes (i.e. subclassed from <code>object</code>, which is the default in Python 3) have a <code>__subclasses__</code> method which returns the subclasses:</p>

<pre><code>class Foo(object): pass
class Bar(Foo): pass
class Baz(Foo): pass
class Bing(Bar): pass
</code></pre>

<p>Here are the names of the subclasses:</p>

<pre><code>print([cls.__name__ for cls in Foo.__subclasses__()])
# ['Bar', 'Baz']
</code></pre>

<p>Here are the subclasses themselves:</p>

<pre><code>print(Foo.__subclasses__())
# [&lt;class '__main__.Bar'&gt;, &lt;class '__main__.Baz'&gt;]
</code></pre>

<p>Confirmation that the subclasses do indeed list <code>Foo</code> as their base:</p>

<pre><code>for cls in Foo.__subclasses__():
    print(cls.__base__)
# &lt;class '__main__.Foo'&gt;
# &lt;class '__main__.Foo'&gt;
</code></pre>

<p>Note if you want subsubclasses, you'll have to recurse:</p>

<pre><code>def all_subclasses(cls):
    return set(cls.__subclasses__()).union(
        [s for c in cls.__subclasses__() for s in all_subclasses(c)])

print(all_subclasses(Foo))
# {&lt;class '__main__.Bar'&gt;, &lt;class '__main__.Baz'&gt;, &lt;class '__main__.Bing'&gt;}
</code></pre>

<p>Note that if the class definition of a subclass hasn't been executed yet - for example, if the subclass's module hasn't been imported yet - then that subclass doesn't exist yet, and <code>__subclasses__</code> won't find it.</p>

<hr>

<p>You mentioned ""given its name"". Since Python classes are first-class objects, you don't need to use a string with the class's name in place of the class or anything like that. You can just use the class directly, and you probably should.</p>

<p>If you do have a string representing the name of a class and you want to find that class's subclasses, then there are two steps: find the class given its name, and then find the subclasses with <code>__subclasses__</code> as above.</p>

<p>How to find the class from the name depends on where you're expecting to find it. If you're expecting to find it in the same module as the code that's trying to locate the class, then</p>

<pre><code>cls = globals()[name]
</code></pre>

<p>would do the job, or in the unlikely case that you're expecting to find it in locals,</p>

<pre><code>cls = locals()[name]
</code></pre>

<p>If the class could be in any module, then your name string should contain the fully-qualified name - something like <code>'pkg.module.Foo'</code> instead of just <code>'Foo'</code>. Use <code>importlib</code> to load the class's module, then retrieve the corresponding attribute:</p>

<pre><code>import importlib
modname, _, clsname = name.rpartition('.')
mod = importlib.import_module(modname)
cls = getattr(mod, clsname)
</code></pre>

<p>However you find the class, <code>cls.__subclasses__()</code> would then return a list of its subclasses.</p>
",unutbu,user2357112,1286275984,1536856356,1536856356
http://stackoverflow.com/a/3885844/508355,How do I check that a number is float or integer?,608844,coure2011,Sinister Beard,1286484954,1551099688,1453714415,https://stackoverflow.com/questions/3885817/how-do-i-check-that-a-number-is-float-or-integer,"<p>Try these functions to test whether a value is a number primitive value that has no fractional part and is within the size limits of what can be represented as an exact integer.</p>

<pre><code>function isFloat(n) {
    return n === +n &amp;&amp; n !== (n|0);
}

function isInteger(n) {
    return n === +n &amp;&amp; n === (n|0);
}
</code></pre>
",Dagg Nabbit,Dagg Nabbit,1286485147,1382572703,1382572703
http://stackoverflow.com/a/38907086/2037738,Django: &quot;No module named context_processors&quot; error after reboot,26559,Chris May,DhiaTN,1443460980,1550740829,1481013215,https://stackoverflow.com/questions/32828536/django-no-module-named-context-processors-error-after-reboot,"<p>I encountered the same problem but I am upgrading from 1.9.1 to 1.10. I found there's a little difference in the settings.</p>

<p>This is the code from 1.9.1</p>

<pre><code>TEMPLATES = [
{
    'BACKEND': 'django.template.backends.django.DjangoTemplates',
    'DIRS': [os.path.join(BASE_DIR, 'templates')],
    'APP_DIRS': True,
    'OPTIONS': {
        'context_processors': [
            'django.template.context_processors.debug',
            'django.template.context_processors.request',
            'django.core.context_processors.request',
            'django.contrib.auth.context_processors.auth',
            'django.contrib.messages.context_processors.messages',
        ],
    },
},
]
</code></pre>

<p>This is code for 1.10</p>

<pre><code>TEMPLATES = [
{
    'BACKEND': 'django.template.backends.django.DjangoTemplates',
    'DIRS': [os.path.join(BASE_DIR, 'templates')],
    'APP_DIRS': True,
    'OPTIONS': {
        'context_processors': [
            'django.template.context_processors.debug',
            'django.template.context_processors.request',
            'django.contrib.auth.context_processors.auth',
            'django.contrib.messages.context_processors.messages',
        ],
    },
},
]
</code></pre>

<p>The line <code>django.core.context_processors.request</code> is not valid in 1.10. Remove it and the code works well.</p>
",mark,SiHa,1470954605,1513711774,1513711774
http://stackoverflow.com/a/3895965/1877527,CSV Export/Import with PHPExcel,81737,Kunal,T Zengerink,1286601477,1408355738,1360144428,https://stackoverflow.com/questions/3895819/csv-export-import-with-phpexcel,"<p>To import a CSV file into a PHPExcel object</p>

<pre><code>$inputFileType = 'CSV';
$inputFileName = 'testFile.csv';
$objReader = PHPExcel_IOFactory::createReader($inputFileType);
$objPHPExcel = $objReader-&gt;load($inputFileName);
</code></pre>

<p>To export a CSV file from a PHPExcel object</p>

<pre><code>$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'CSV');
$objWriter-&gt;save('testExportFile.csv');
</code></pre>

<p><strong>EDIT</strong></p>

<p>How to read through the rows and cells:</p>

<pre><code>$worksheet = $objPHPExcel-&gt;getActiveSheet();
foreach ($worksheet-&gt;getRowIterator() as $row) {
    echo 'Row number: ' . $row-&gt;getRowIndex() . ""\r\n"";

    $cellIterator = $row-&gt;getCellIterator();
    $cellIterator-&gt;setIterateOnlyExistingCells(false); // Loop all cells, even if it is not set
    foreach ($cellIterator as $cell) {
        if (!is_null($cell)) {
            echo 'Cell: ' . $cell-&gt;getCoordinate() . ' - ' . $cell-&gt;getValue() . ""\r\n"";
        }
    }
}
</code></pre>

<p>How to write to a PHPExcel object:
You don't say where your data comes from: here's how to do it from a MySQL Query</p>

<pre><code>$query = sprintf(""SELECT firstname, lastname, age, date_of_birth, salary FROM employees WHERE firstname='%s' AND lastname='%s'"",
                  mysql_real_escape_string($firstname),
                  mysql_real_escape_string($lastname));
$result = mysql_query($query);

$row = 1;
$objPHPExcel-&gt;getActiveSheet()-&gt;setCellValue('A'.$row, 'First Name')
                              -&gt;setCellValue('B'.$row, 'Last Name')
                              -&gt;setCellValue('C'.$row, 'Age')
                              -&gt;setCellValue('D'.$row, 'Date of birth')
                              -&gt;setCellValue('E'.$row, 'Salary');
$row++;
while ($rec = mysql_fetch_assoc($result)) {
    $objPHPExcel-&gt;getActiveSheet()-&gt;setCellValue('A'.$row, $rec['firstname'])
                                  -&gt;setCellValue('B'.$row, $rec['lastname'])
                                  -&gt;setCellValue('C'.$row, $rec['age'])
                                  -&gt;setCellValue('D'.$row, PHPExcel_Shared_Date::stringToExcel($rec['date_of_birth']))
                                  -&gt;setCellValue('E'.$row, $rec['salary']);
    $objPHPExcel-&gt;getActiveSheet()-&gt;getStyle('D'.$row)-&gt;getNumberFormat()-&gt;setFormatCode(PHPExcel_Style_NumberFormat::FORMAT_DATE_XLSX15);
    $objPHPExcel-&gt;getActiveSheet()-&gt;getStyle('E'.$row)-&gt;getNumberFormat()-&gt;setFormatCode('#,##0.00');
    $row++;
}
</code></pre>
",Mark Baker,Mark Baker,1286606428,1408355738,1408355738
http://stackoverflow.com/a/39054607/414097,Ember - get target url of transition,2686,Marco Prins,,1435672833,1496433857,0,https://stackoverflow.com/questions/31140407/ember-get-target-url-of-transition,"<p>Kevins answer is the most correct one, I came to a similar solution. Basically I found how the <code>link-to</code> component was populating the <code>href</code> attribute and used the same sort of code.</p>

<p>In your object inject <code>-routing</code>. I did so with:</p>

<pre><code>'routing': Ember.inject.service('-routing'),
</code></pre>

<p>Then the code to generate the URL from the transition is as follows...</p>

<pre><code>let routing = this.get('routing');
let params = Object.values(transition.params).filter(param =&gt; {
  return Object.values(param).length;
});
let url = routing.generateURL(transition.targetName, params, transition.queryParams);
</code></pre>
",Robbo,,1471699242,1471699242,0
http://stackoverflow.com/a/3914498/1250278,"How to get current moment in ISO 8601 format with date, hour, and minute?",299153,yegor256,Chloe,1286884844,1539140742,1539140742,https://stackoverflow.com/questions/3914404/how-to-get-current-moment-in-iso-8601-format-with-date-hour-and-minute,"<p>Use <a href=""http://download.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html"" rel=""noreferrer""><code>SimpleDateFormat</code></a> to format any <a href=""http://download.oracle.com/javase/6/docs/api/java/util/Date.html"" rel=""noreferrer""><code>Date</code></a> object you want:</p>

<pre><code>TimeZone tz = TimeZone.getTimeZone(""UTC"");
DateFormat df = new SimpleDateFormat(""yyyy-MM-dd'T'HH:mm'Z'""); // Quoted ""Z"" to indicate UTC, no timezone offset
df.setTimeZone(tz);
String nowAsISO = df.format(new Date());
</code></pre>

<p>Using a <code>new Date()</code> as shown above will format the current time.</p>
",Joachim Sauer,L S,1286885425,1467216458,1467216458
http://stackoverflow.com/a/3923182/3260495,Get a list of resources from classpath directory,194756,viaclectic,viaclectic,1286969347,1558968287,1286973087,https://stackoverflow.com/questions/3923129/get-a-list-of-resources-from-classpath-directory,"<p>Here is the code<br>
<strong>Source</strong>: forums.devx.com/showthread.php?t=153784</p>

<pre><code>import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Enumeration;
import java.util.regex.Pattern;
import java.util.zip.ZipEntry;
import java.util.zip.ZipException;
import java.util.zip.ZipFile;

/**
 * list resources available from the classpath @ *
 */
public class ResourceList{

    /**
     * for all elements of java.class.path get a Collection of resources Pattern
     * pattern = Pattern.compile("".*""); gets all resources
     * 
     * @param pattern
     *            the pattern to match
     * @return the resources in the order they are found
     */
    public static Collection&lt;String&gt; getResources(
        final Pattern pattern){
        final ArrayList&lt;String&gt; retval = new ArrayList&lt;String&gt;();
        final String classPath = System.getProperty(""java.class.path"", ""."");
        final String[] classPathElements = classPath.split(System.getProperty(""path.separator""));
        for(final String element : classPathElements){
            retval.addAll(getResources(element, pattern));
        }
        return retval;
    }

    private static Collection&lt;String&gt; getResources(
        final String element,
        final Pattern pattern){
        final ArrayList&lt;String&gt; retval = new ArrayList&lt;String&gt;();
        final File file = new File(element);
        if(file.isDirectory()){
            retval.addAll(getResourcesFromDirectory(file, pattern));
        } else{
            retval.addAll(getResourcesFromJarFile(file, pattern));
        }
        return retval;
    }

    private static Collection&lt;String&gt; getResourcesFromJarFile(
        final File file,
        final Pattern pattern){
        final ArrayList&lt;String&gt; retval = new ArrayList&lt;String&gt;();
        ZipFile zf;
        try{
            zf = new ZipFile(file);
        } catch(final ZipException e){
            throw new Error(e);
        } catch(final IOException e){
            throw new Error(e);
        }
        final Enumeration e = zf.entries();
        while(e.hasMoreElements()){
            final ZipEntry ze = (ZipEntry) e.nextElement();
            final String fileName = ze.getName();
            final boolean accept = pattern.matcher(fileName).matches();
            if(accept){
                retval.add(fileName);
            }
        }
        try{
            zf.close();
        } catch(final IOException e1){
            throw new Error(e1);
        }
        return retval;
    }

    private static Collection&lt;String&gt; getResourcesFromDirectory(
        final File directory,
        final Pattern pattern){
        final ArrayList&lt;String&gt; retval = new ArrayList&lt;String&gt;();
        final File[] fileList = directory.listFiles();
        for(final File file : fileList){
            if(file.isDirectory()){
                retval.addAll(getResourcesFromDirectory(file, pattern));
            } else{
                try{
                    final String fileName = file.getCanonicalPath();
                    final boolean accept = pattern.matcher(fileName).matches();
                    if(accept){
                        retval.add(fileName);
                    }
                } catch(final IOException e){
                    throw new Error(e);
                }
            }
        }
        return retval;
    }

    /**
     * list the resources that match args[0]
     * 
     * @param args
     *            args[0] is the pattern to match, or list all resources if
     *            there are no args
     */
    public static void main(final String[] args){
        Pattern pattern;
        if(args.length &lt; 1){
            pattern = Pattern.compile("".*"");
        } else{
            pattern = Pattern.compile(args[0]);
        }
        final Collection&lt;String&gt; list = ResourceList.getResources(pattern);
        for(final String name : list){
            System.out.println(name);
        }
    }
}  
</code></pre>

<p>If you are using Spring Have a look at <a href=""http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html"" rel=""noreferrer""><strong>PathMatchingResourcePatternResolver</strong></a></p>
",Jigar Joshi,FoxAlfaBravo,1286969837,1447408473,1447408473
http://stackoverflow.com/a/39322632/865091,How do I test a method in Django which closes the database connection?,640,Rahul Gupta-Iwasaki,Rahul Gupta-Iwasaki,1472520439,1551384029,1473035590,https://stackoverflow.com/questions/39217508/how-do-i-test-a-method-in-django-which-closes-the-database-connection,"<p>Well, I'm not sure if this is the best answer, but since this question has seen no responses so far, I will post the solution I ended up using for posterity:</p>

<p>I created a helper function which checks whether we are currently in an atomic block before closing the connection:</p>

<pre><code>import django
from django.db import connection

from my_app import models


def close_connection():
    """"""Closes the connection if we are not in an atomic block.

    The connection should never be closed if we are in an atomic block, as
    happens when running tests as part of a django TestCase. Otherwise, closing
    the connection is important to avoid a connection time out after long actions.     
    Django does not automatically refresh a connection which has been closed 
    due to idleness (this normally happens in the request start/finish part 
    of a webapp's lifecycle, which this process does not have), so we must
    do it ourselves if the connection goes idle due to stuff taking a really 
    long time.
    """"""
    if not connection.in_atomic_block:
        connection.close()


def my_process():
    django.setup()
    while (True):
        do_stuff()
        close_connection()
        models.MyDjangoModel().save()
</code></pre>

<p>As the comment states, <code>close_connection</code> prevents <code>connection.close</code> from being called under test, so we no longer break the test transaction.</p>
",Rahul Gupta-Iwasaki,,1473035515,1473035515,0
http://stackoverflow.com/a/3943023/112731,How to decide font color in white or black depending on background color?,46768,DJPB,,1287150954,1551183226,0,https://stackoverflow.com/questions/3942878/how-to-decide-font-color-in-white-or-black-depending-on-background-color,"<p>Building on my <a href=""https://stackoverflow.com/questions/946544/good-text-foreground-color-for-a-given-background-color/946734#946734"">answer to a similar question</a>.</p>

<p>You need to break the hex code into 3 pieces to get the individual red, green, and blue intensities. Each 2 digits of the code represent a value in hexadecimal (base-16) notation. I won't get into the details of the conversion here, they're easy to look up.</p>

<p>Once you have the intensities for the individual colors, you can determine the overall intensity of the color and choose the corresponding text.</p>

<pre><code>if (red*0.299 + green*0.587 + blue*0.114) &gt; 186 use #000000 else use #ffffff
</code></pre>

<p>The threshold of 186 is based on theory, but can be adjusted to taste. Based on the comments below a threshold of 150 may work better for you.
<hr>
<strong>Edit:</strong> The above is simple and works reasonably well, and seems to have good acceptance here at StackOverflow. However, one of the comments below shows it can lead to non-compliance with W3C guidelines in some circumstances. Herewith I derive a modified form that always chooses the highest contrast based on the guidelines. If you <em>don't</em> need to conform to W3C rules then I'd stick with the simpler formula above.</p>

<p>The formula given for contrast in the <a href=""http://www.w3.org/TR/WCAG20/"" rel=""noreferrer"">W3C Recommendations</a> is <code>(L1 + 0.05) / (L2 + 0.05)</code>, where <code>L1</code> is the luminance of the lightest color and <code>L2</code> is the luminance of the darkest on a scale of 0.0-1.0. The luminance of black is 0.0 and white is 1.0, so substituting those values lets you determine the one with the highest contrast. If the contrast for black is greater than the contrast for white, use black, otherwise use white. Given the luminance of the color you're testing as <code>L</code> the test becomes:</p>

<pre><code>if (L + 0.05) / (0.0 + 0.05) &gt; (1.0 + 0.05) / (L + 0.05) use #000000 else use #ffffff
</code></pre>

<p>This simplifies down algebraically to:</p>

<pre><code>if L &gt; sqrt(1.05 * 0.05) - 0.05
</code></pre>

<p>Or approximately:</p>

<pre><code>if L &gt; 0.179 use #000000 else use #ffffff
</code></pre>

<p>The only thing left is to compute <code>L</code>. That formula is also <a href=""http://www.w3.org/TR/WCAG20/#relativeluminancedef"" rel=""noreferrer"">given in the guidelines</a> and it looks like the conversion from sRGB to linear RGB followed by the <a href=""http://en.wikipedia.org/wiki/Luma_(video)#Rec._601_luma_versus_Rec._709_luma_coefficients"" rel=""noreferrer"">ITU-R recommendation BT.709</a> for luminance.</p>

<pre><code>for each c in r,g,b:
    c = c / 255.0
    if c &lt;= 0.03928 then c = c/12.92 else c = ((c+0.055)/1.055) ^ 2.4
L = 0.2126 * r + 0.7152 * g + 0.0722 * b
</code></pre>

<p>The threshold of 0.179 should not be changed since it is tied to the W3C guidelines. If you find the results not to your liking, try the simpler formula above.</p>
",Mark Ransom,Mark Ransom,1287151884,1547614899,1547614899
http://stackoverflow.com/a/3943023/2257172,How to decide font color in white or black depending on background color?,46768,DJPB,,1287150954,1551183226,0,https://stackoverflow.com/questions/3942878/how-to-decide-font-color-in-white-or-black-depending-on-background-color,"<p>Building on my <a href=""https://stackoverflow.com/questions/946544/good-text-foreground-color-for-a-given-background-color/946734#946734"">answer to a similar question</a>.</p>

<p>You need to break the hex code into 3 pieces to get the individual red, green, and blue intensities. Each 2 digits of the code represent a value in hexadecimal (base-16) notation. I won't get into the details of the conversion here, they're easy to look up.</p>

<p>Once you have the intensities for the individual colors, you can determine the overall intensity of the color and choose the corresponding text.</p>

<pre><code>if (red*0.299 + green*0.587 + blue*0.114) &gt; 186 use #000000 else use #ffffff
</code></pre>

<p>The threshold of 186 is based on theory, but can be adjusted to taste. Based on the comments below a threshold of 150 may work better for you.
<hr>
<strong>Edit:</strong> The above is simple and works reasonably well, and seems to have good acceptance here at StackOverflow. However, one of the comments below shows it can lead to non-compliance with W3C guidelines in some circumstances. Herewith I derive a modified form that always chooses the highest contrast based on the guidelines. If you <em>don't</em> need to conform to W3C rules then I'd stick with the simpler formula above.</p>

<p>The formula given for contrast in the <a href=""http://www.w3.org/TR/WCAG20/"" rel=""noreferrer"">W3C Recommendations</a> is <code>(L1 + 0.05) / (L2 + 0.05)</code>, where <code>L1</code> is the luminance of the lightest color and <code>L2</code> is the luminance of the darkest on a scale of 0.0-1.0. The luminance of black is 0.0 and white is 1.0, so substituting those values lets you determine the one with the highest contrast. If the contrast for black is greater than the contrast for white, use black, otherwise use white. Given the luminance of the color you're testing as <code>L</code> the test becomes:</p>

<pre><code>if (L + 0.05) / (0.0 + 0.05) &gt; (1.0 + 0.05) / (L + 0.05) use #000000 else use #ffffff
</code></pre>

<p>This simplifies down algebraically to:</p>

<pre><code>if L &gt; sqrt(1.05 * 0.05) - 0.05
</code></pre>

<p>Or approximately:</p>

<pre><code>if L &gt; 0.179 use #000000 else use #ffffff
</code></pre>

<p>The only thing left is to compute <code>L</code>. That formula is also <a href=""http://www.w3.org/TR/WCAG20/#relativeluminancedef"" rel=""noreferrer"">given in the guidelines</a> and it looks like the conversion from sRGB to linear RGB followed by the <a href=""http://en.wikipedia.org/wiki/Luma_(video)#Rec._601_luma_versus_Rec._709_luma_coefficients"" rel=""noreferrer"">ITU-R recommendation BT.709</a> for luminance.</p>

<pre><code>for each c in r,g,b:
    c = c / 255.0
    if c &lt;= 0.03928 then c = c/12.92 else c = ((c+0.055)/1.055) ^ 2.4
L = 0.2126 * r + 0.7152 * g + 0.0722 * b
</code></pre>

<p>The threshold of 0.179 should not be changed since it is tied to the W3C guidelines. If you find the results not to your liking, try the simpler formula above.</p>
",Mark Ransom,Mark Ransom,1287151884,1547614899,1547614899
http://stackoverflow.com/a/3943985/914123,How do I shuffle the characters in a string in JavaScript?,34901,Liam,Liam,1287157064,1561471512,1287159686,https://stackoverflow.com/questions/3943772/how-do-i-shuffle-the-characters-in-a-string-in-javascript,"<p>I modified an example from the <a href=""http://en.wikipedia.org/wiki/Fisher-Yates_shuffle"" rel=""noreferrer"">Fisher-Yates Shuffle entry on Wikipedia</a> to shuffle strings:</p>

<pre><code>String.prototype.shuffle = function () {
    var a = this.split(""""),
        n = a.length;

    for(var i = n - 1; i &gt; 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var tmp = a[i];
        a[i] = a[j];
        a[j] = tmp;
    }
    return a.join("""");
}
console.log(""the quick brown fox jumps over the lazy dog"".shuffle());
//-&gt; ""veolrm  hth  ke opynug tusbxq ocrad ofeizwj""

console.log(""the quick brown fox jumps over the lazy dog"".shuffle());
//-&gt; ""o dt hutpe u iqrxj  yaenbwoolhsvmkcger ozf ""
</code></pre>

<p>More information can be found in <a href=""https://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling/962829#962829"">Jon Skeet's answer</a> to <a href=""https://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling"">Is it correct to use JavaScript Array.sort() method for shuffling?</a>. </p>
",Andy E,Community,1287158633,1287158633,1495540465
http://stackoverflow.com/a/39501288/1709587,How to get file creation &amp; modification date/times in Python?,640726,Mark Biek,,1224971696,1558996564,0,https://stackoverflow.com/questions/237079/how-to-get-file-creation-modification-date-times-in-python,"<p>Getting some sort of modification date in a cross-platform way is easy - just call <a href=""https://docs.python.org/library/os.path.html#os.path.getmtime"" rel=""noreferrer""><code>os.path.getmtime(<i>path</i>)</code></a> and you'll get the Unix timestamp of when the file at <code>path</code> was last modified.</p>

<p>Getting file <em>creation</em> dates, on the other hand, is fiddly and platform-dependent, differing even between the three big OSes:</p>

<ul>
<li>On <strong>Windows</strong>, a file's <code>ctime</code> (documented at <a href=""https://msdn.microsoft.com/en-us/library/14h5k7ff.aspx"" rel=""noreferrer"">https://msdn.microsoft.com/en-us/library/14h5k7ff.aspx</a>) stores its creation date. You can access this in Python through <a href=""https://docs.python.org/library/os.path.html#os.path.getctime"" rel=""noreferrer""><code>os.path.getctime()</code></a> or the <a href=""https://docs.python.org/3/library/os.html#os.stat_result.st_ctime"" rel=""noreferrer""><code>.st_ctime</code></a> attribute of the result of a call to <a href=""https://docs.python.org/3/library/os.html#os.stat"" rel=""noreferrer""><code>os.stat()</code></a>. This <em>won't</em> work on Unix, where the <code>ctime</code> <a href=""http://www.linux-faqs.info/general/difference-between-mtime-ctime-and-atime"" rel=""noreferrer"">is the last time that the file's attributes <em>or</em> content were changed</a>.</li>
<li>On <strong>Mac</strong>, as well as some other Unix-based OSes, you can use the <a href=""https://docs.python.org/3/library/os.html#os.stat_result.st_birthtime"" rel=""noreferrer""><code>.st_birthtime</code></a> attribute of the result of a call to <code>os.stat()</code>.</li>
<li><p>On <strong>Linux</strong>, this is currently impossible, at least without writing a C extension for Python. Although some file systems commonly used with Linux <a href=""https://unix.stackexchange.com/questions/7562/what-file-systems-on-linux-store-the-creation-time"">do store creation dates</a> (for example, <code>ext4</code> stores them in <code>st_crtime</code>) , the Linux kernel <a href=""https://unix.stackexchange.com/questions/91197/how-to-find-creation-date-of-file"">offers no way of accessing them</a>; in particular, the structs it returns from <code>stat()</code> calls in C, as of the latest kernel version, <a href=""https://github.com/torvalds/linux/blob/v4.8-rc6/include/linux/stat.h"" rel=""noreferrer"">don't contain any creation date fields</a>. You can also see that the identifier <code>st_crtime</code> doesn't currently feature anywhere in the <a href=""https://github.com/python/cpython/search?utf8=%E2%9C%93&amp;q=st_crtime"" rel=""noreferrer"">Python source</a>. At least if you're on <code>ext4</code>, the data <em>is</em> attached to the inodes in the file system, but there's no convenient way of accessing it.</p>

<p>The next-best thing on Linux is to access the file's <code>mtime</code>, through either <a href=""https://docs.python.org/library/os.path.html#os.path.getmtime"" rel=""noreferrer""><code>os.path.getmtime()</code></a> or the <a href=""https://docs.python.org/3/library/os.html#os.stat_result.st_mtime"" rel=""noreferrer""><code>.st_mtime</code></a> attribute of an <code>os.stat()</code> result. This will give you the last time the file's content was modified, which may be adequate for some use cases.</p></li>
</ul>

<p>Putting this all together, cross-platform code should look something like this...</p>

<pre><code>import os
import platform

def creation_date(path_to_file):
    """"""
    Try to get the date that a file was created, falling back to when it was
    last modified if that isn't possible.
    See http://stackoverflow.com/a/39501288/1709587 for explanation.
    """"""
    if platform.system() == 'Windows':
        return os.path.getctime(path_to_file)
    else:
        stat = os.stat(path_to_file)
        try:
            return stat.st_birthtime
        except AttributeError:
            # We're probably on Linux. No easy way to get creation dates here,
            # so we'll settle for when its content was last modified.
            return stat.st_mtime
</code></pre>
",Mark Amery,igracia,1473897114,1519047893,1519047893
http://stackoverflow.com/a/39541048/4302112,Django migrations using RunPython to commit changes,7798,Gabriel Amram,Gabriel Amram,1423565875,1513363970,1423572018,https://stackoverflow.com/questions/28429933/django-migrations-using-runpython-to-commit-changes,"<p>This happens because Django creates constraints as <code>DEFERRABLE INITIALLY DEFERRED</code>:</p>

<pre class=""lang-sql prettyprint-override""><code>ALTER TABLE my_app_site
ADD CONSTRAINT ""[constraint_name]""
FOREIGN KEY (template_id)
REFERENCES my_app_template(id)
DEFERRABLE INITIALLY DEFERRED;
</code></pre>

<p>This tells PostgreSQL that the foreign key does not need to be checked right after every command, but can be deferred until the end of  transactions.</p>

<p>So, when a transaction modifies content and structure, the constraints are checked on parallel with the structure changes, or the checks are scheduled to be done after altering the structure. Both of these states are bad and the database will abort the transaction instead of making any assumptions.</p>

<p>You can instruct PostgreSQL to check constraints immediately <em>in the current transaction</em> by calling <code>SET CONSTRAINTS ALL IMMEDIATE</code>, so structure changes won't be a problem (refer to <a href=""https://www.postgresql.org/docs/current/static/sql-set-constraints.html"" rel=""noreferrer"">SET CONSTRAINTS</a> documentation). Your migration should look like this:</p>

<pre class=""lang-py prettyprint-override""><code>operations = [
    migrations.RunSQL('SET CONSTRAINTS ALL IMMEDIATE',
                      reverse_sql=migrations.RunSQL.noop),

    # ... the actual migration operations here ...

    migrations.RunSQL(migrations.RunSQL.noop,
                      reverse_sql='SET CONSTRAINTS ALL IMMEDIATE'),
]
</code></pre>

<p>The first operation is for applying (forward) migrations, and the last one is for unapplying (backwards) migrations.</p>

<p><strong>EDIT:</strong> Constraint deferring is useful to avoid insertion sorting, specially for self-referencing tables and tables with cyclic dependencies. So be careful when bending Django.</p>

<p><strong>LATE EDIT:</strong> on Django 1.7 and newer versions there is a special <a href=""https://docs.djangoproject.com/en/dev/ref/migration-operations/#separatedatabaseandstate"" rel=""noreferrer""><code>SeparateDatabaseAndState</code></a> operation that allows data changes and structure changes on the same migration. Try using this operation before recurring to the ""set constraints all immediate"" method above. Example:</p>

<pre class=""lang-py prettyprint-override""><code>operations = [
    migrations.SeparateDatabaseAndState(database_operations=[
            # put your sql, python, whatever data migrations here
        ],
        state_operations=[
            # field/model changes goes here
        ]),
]
</code></pre>
",eric,eric,1474065883,1513363970,1513363970
http://stackoverflow.com/a/3974138/778449,Is there a printf converter to print in binary format?,687739,Brian,,1222027498,1545299129,0,https://stackoverflow.com/questions/111928/is-there-a-printf-converter-to-print-in-binary-format,"<p><strong>Print Binary for Any Datatype</strong></p>

<pre><code>//assumes little endian
void printBits(size_t const size, void const * const ptr)
{
    unsigned char *b = (unsigned char*) ptr;
    unsigned char byte;
    int i, j;

    for (i=size-1;i&gt;=0;i--)
    {
        for (j=7;j&gt;=0;j--)
        {
            byte = (b[i] &gt;&gt; j) &amp; 1;
            printf(""%u"", byte);
        }
    }
    puts("""");
}
</code></pre>

<p>test</p>

<pre><code>int main(int argv, char* argc[])
{
        int i = 23;
        uint ui = UINT_MAX;
        float f = 23.45f;
        printBits(sizeof(i), &amp;i);
        printBits(sizeof(ui), &amp;ui);
        printBits(sizeof(f), &amp;f);
        return 0;
}
</code></pre>
",user295190,criptych,1287538678,1462457354,1462457354
http://stackoverflow.com/a/398120/376773,Javascript that detects Firebug?,13840,Allan,,1230570098,1499311235,0,https://stackoverflow.com/questions/398111/javascript-that-detects-firebug,"<h1>Original answer:</h1>

<p>Check for the <code>console</code> object (created only with Firebug), like such:</p>

<pre><code>if (window.console &amp;&amp; window.console.firebug) {
  //Firebug is enabled
}
</code></pre>

<hr>

<h1>Update (January 2012):</h1>

<p>The Firebug developers have <a href=""http://code.google.com/p/fbug/issues/detail?id=4772"" rel=""noreferrer"">decided to remove <code>window.console.firebug</code></a>. You can still detect the presence of Firebug by <a href=""http://en.wikipedia.org/wiki/Duck_typing"" rel=""noreferrer"">duck typing</a> like</p>

<pre><code>if (window.console &amp;&amp; (window.console.firebug || window.console.exception)) {
  //Firebug is enabled
}
</code></pre>

<p>or <a href=""http://code.google.com/p/fbug/issues/detail?id=4772#c8"" rel=""noreferrer"">various other approaches</a> like</p>

<pre><code>if (document.getUserData('firebug-Token')) ...
if (console.log.toString().indexOf('apply') != -1) ...
if (typeof console.assert(1) == 'string') ...
</code></pre>

<p>but in general, there should be no need to actually do so.</p>
",Andreas Grech,user123444555621,1230570378,1326893022,1326893022
http://stackoverflow.com/a/39842495/2608858,How to set multiple file entry and output in project with webpack?,42924,user1775888,user1775888,1439146057,1560950438,1439150158,https://stackoverflow.com/questions/31907672/how-to-set-multiple-file-entry-and-output-in-project-with-webpack,"<p>If you want to output to multiple directories, you can use the path as the entry name. For example if you want this directory structure:</p>

<pre><code>apps
 dir1
    js
        main.js [entry 1]
        bundle.js [output 1]
 dir2
     index.js [entry 2]
     foo.js [output 2]
</code></pre>

<p>Then try this in your module.exports:</p>

<pre><code>{
  entry: {
    'dir1/js/bundle': path.resolve(__dirname, '/apps/dir1/js/main.js'),
    'dir2/foo' : path.resolve(__dirname, '/apps/dir2/index.js')
  },
  output: {
    path: path.resolve(__dirname, '/apps'),
    filename: '[name].js'
  },
  ...
}
</code></pre>
",Peter Tseng,Peter Tseng,1475541186,1491953747,1491953747
http://stackoverflow.com/a/400316/1504003,What special characters must be escaped in regular expressions?,249402,Igor Katson,Mechanical snail,1230593524,1560956135,1317542581,https://stackoverflow.com/questions/399078/what-special-characters-must-be-escaped-in-regular-expressions,"<p>Which characters you must and which you mustn't escape indeed depends on the regex flavor you're working with.</p>

<p>For PCRE, and most other so-called Perl-compatible flavors, escape these outside character classes:</p>

<pre><code>.^$*+?()[{\|
</code></pre>

<p>and these inside character classes:</p>

<pre><code>^-]\
</code></pre>

<p>For POSIX extended regexes (ERE), escape these outside character classes (same as PCRE):</p>

<pre><code>.^$*+?()[{\|
</code></pre>

<p>Escaping any other characters is an error with POSIX ERE.</p>

<p>Inside character classes, the backslash is a literal character in POSIX regular expressions.  You cannot use it to escape anything.  You have to use ""clever placement"" if you want to include character class metacharacters as literals.  Put the ^ anywhere except at the start, the ] at the start, and the - at the start or the end of the character class to match these literally, e.g.:</p>

<pre><code>[]^-]
</code></pre>

<p>In POSIX basic regular expressions (BRE), these are metacharacters that you need to escape to suppress their meaning:</p>

<pre><code>.^$*[\
</code></pre>

<p>Escaping parentheses and curly brackets in BREs gives them the special meaning their unescaped versions have in EREs.  Some implementations (e.g. GNU) also give special meaning to other characters when escaped, such as \? and +.  Escaping a character other than .^$*(){} is normally an error with BREs.</p>

<p>Inside character classes, BREs follow the same rule as EREs.</p>

<p>If all this makes your head spin, grab a copy of <a href=""http://www.regexbuddy.com"" rel=""nofollow noreferrer"">RegexBuddy</a>.  On the Create tab, click Insert Token, and then Literal.  RegexBuddy will add escapes as needed.</p>
",Jan Goyvaerts,Jonathan Leffler,1230645718,1559059690,1559059690
http://stackoverflow.com/a/4003287/1558890,How to code a modulo (%) operator in C/C++/Obj-C that handles negative numbers,229557,P i,TemplateRex,1287825009,1559587585,1450275153,https://stackoverflow.com/questions/4003232/how-to-code-a-modulo-operator-in-c-c-obj-c-that-handles-negative-numbers,"<p>First of all I'd like to note that you cannot even rely on the fact that <code>(-1) % 8 == -1</code>. the only thing you can rely on is that <code>(x / y) * y + ( x % y) == x</code>. However whether or not the remainder is negative is <em>implementation-defined</em>. </p>

<p>Now why use templates here? An overload for ints and longs would do.</p>

<pre><code>int mod (int a, int b)
{
   int ret = a % b;
   if(ret &lt; 0)
     ret+=b;
   return ret;
}
</code></pre>

<p>and now you can call it like mod(-1,8) and it will appear to be 7. </p>

<p>Edit: I found a bug in my code. It won't work if b is negative. So I think this is better:</p>

<pre><code>int mod (int a, int b)
{
   if(b &lt; 0) //you can check for b == 0 separately and do what you want
     return mod(a, -b);   
   int ret = a % b;
   if(ret &lt; 0)
     ret+=b;
   return ret;
}
</code></pre>

<p>Reference: C++03 paragraph 5.6 clause 4:</p>

<blockquote>
  <p>The binary / operator yields the quotient, and the binary % operator yields the remainder from the division of the first expression by the second. If the second operand of / or % is zero the behavior is undefined; otherwise (a/b)*b + a%b is equal to a. If both operands are nonnegative then the remainder is nonnegative; <strong><em>if not, the sign of the remainder is implementation-defined</em></strong>.</p>
</blockquote>
",Armen Tsirunyan,Hurkyl,1287825906,1468800989,1468800989
http://stackoverflow.com/a/4006353/3690178,Move active element loses mouseout event in internet explorer,8052,johnwards,johnwards,1284133932,1400880502,1287407846,https://stackoverflow.com/questions/3686132/move-active-element-loses-mouseout-event-in-internet-explorer,"<p>The problem is that <strong>IE handles <code>mouseover</code> differently</strong>, because it behaves like <code>mouseenter</code> and <code>mousemove</code> combined on an element. In other browsers it's just <code>mouseenter</code>.</p>

<p>So even after your mouse has entered the target element and you've changed it's look and reappended it to it's parent <code>mouseover</code> will still fire for every movement of the mouse, the element gets reappended again, which prevents other event handlers from being called.</p>

<p>The solution is to <strong>emulate the correct <code>mouseover</code></strong> behavior so that actions in <code>onmouseover</code> are executed only once.</p>

<pre><code>$(""li"").mouseover( function() {
    // make sure these actions are executed only once
    if ( this.style.borderColor != ""red"" ) {
        this.style.borderColor = ""red"";
        this.parentNode.appendChild(this);
    }
});
</code></pre>

<p><strong>Examples</strong></p>

<ol>
<li><a href=""http://jsbin.com/obesa4/2/"" rel=""noreferrer"">Extented demo of yours</a></li>
<li><a href=""http://jsbin.com/uyoho/10/"" rel=""noreferrer"">Example</a> demonstrating the  <code>mouseover</code> difference between browsers (bonus: native javascript)</li>
</ol>
",gblazex,gblazex,1287872084,1287872914,1287872914
http://stackoverflow.com/a/402010/1152174,Circle-Rectangle collision detection (intersection),183686,aib,,1230680102,1542899540,0,https://stackoverflow.com/questions/401847/circle-rectangle-collision-detection-intersection,"<p>Here is how I would do it:</p>

<pre><code>bool intersects(CircleType circle, RectType rect)
{
    circleDistance.x = abs(circle.x - rect.x);
    circleDistance.y = abs(circle.y - rect.y);

    if (circleDistance.x &gt; (rect.width/2 + circle.r)) { return false; }
    if (circleDistance.y &gt; (rect.height/2 + circle.r)) { return false; }

    if (circleDistance.x &lt;= (rect.width/2)) { return true; } 
    if (circleDistance.y &lt;= (rect.height/2)) { return true; }

    cornerDistance_sq = (circleDistance.x - rect.width/2)^2 +
                         (circleDistance.y - rect.height/2)^2;

    return (cornerDistance_sq &lt;= (circle.r^2));
}
</code></pre>

<p>Here's how it works:  </p>

<p><img src=""https://i.stack.imgur.com/K6vRH.jpg"" alt=""illusration""></p>

<ol>
<li><p>The first pair of lines calculate the absolute values of the x and y difference between the center of the circle and the center of the rectangle. This collapses the four quadrants down into one, so that the calculations do not have to be done four times. The image shows the area in which the center of the circle must now lie. Note that only the single quadrant is shown. The rectangle is the grey area, and the red border outlines the critical area which is exactly one radius away from the edges of the rectangle. The center of the circle has to be within this red border for the intersection to occur.</p></li>
<li><p>The second pair of lines eliminate the easy cases where the circle is far enough away from the rectangle (in either direction) that no intersection is possible. This corresponds to the green area in the image.</p></li>
<li><p>The third pair of lines handle the easy cases where the circle is close enough to the rectangle (in either direction) that an intersection is guaranteed. This corresponds to the orange and grey sections in the image. Note that this step must be done after step 2 for the logic to make sense.</p></li>
<li><p>The remaining lines calculate the difficult case where the circle may intersect the corner of the rectangle. To solve, compute the distance from the center of the circle and the corner, and then verify that the distance is not more than the radius of the circle. This calculation returns false for all circles whose center is within the red shaded area and returns true for all circles whose center is within the white shaded area.</p></li>
</ol>
",e.James,Community,1230686090,1340113839,1340113839
http://stackoverflow.com/a/402010/4085004,Circle-Rectangle collision detection (intersection),183686,aib,,1230680102,1542899540,0,https://stackoverflow.com/questions/401847/circle-rectangle-collision-detection-intersection,"<p>Here is how I would do it:</p>

<pre><code>bool intersects(CircleType circle, RectType rect)
{
    circleDistance.x = abs(circle.x - rect.x);
    circleDistance.y = abs(circle.y - rect.y);

    if (circleDistance.x &gt; (rect.width/2 + circle.r)) { return false; }
    if (circleDistance.y &gt; (rect.height/2 + circle.r)) { return false; }

    if (circleDistance.x &lt;= (rect.width/2)) { return true; } 
    if (circleDistance.y &lt;= (rect.height/2)) { return true; }

    cornerDistance_sq = (circleDistance.x - rect.width/2)^2 +
                         (circleDistance.y - rect.height/2)^2;

    return (cornerDistance_sq &lt;= (circle.r^2));
}
</code></pre>

<p>Here's how it works:  </p>

<p><img src=""https://i.stack.imgur.com/K6vRH.jpg"" alt=""illusration""></p>

<ol>
<li><p>The first pair of lines calculate the absolute values of the x and y difference between the center of the circle and the center of the rectangle. This collapses the four quadrants down into one, so that the calculations do not have to be done four times. The image shows the area in which the center of the circle must now lie. Note that only the single quadrant is shown. The rectangle is the grey area, and the red border outlines the critical area which is exactly one radius away from the edges of the rectangle. The center of the circle has to be within this red border for the intersection to occur.</p></li>
<li><p>The second pair of lines eliminate the easy cases where the circle is far enough away from the rectangle (in either direction) that no intersection is possible. This corresponds to the green area in the image.</p></li>
<li><p>The third pair of lines handle the easy cases where the circle is close enough to the rectangle (in either direction) that an intersection is guaranteed. This corresponds to the orange and grey sections in the image. Note that this step must be done after step 2 for the logic to make sense.</p></li>
<li><p>The remaining lines calculate the difficult case where the circle may intersect the corner of the rectangle. To solve, compute the distance from the center of the circle and the corner, and then verify that the distance is not more than the radius of the circle. This calculation returns false for all circles whose center is within the red shaded area and returns true for all circles whose center is within the white shaded area.</p></li>
</ol>
",e.James,Community,1230686090,1340113839,1340113839
http://stackoverflow.com/a/40206149/1828637,Using gulp.src() to include all files EXCEPT js files NOT in 3rd party dir,151,Noitidart,Sven Schoenung,1477240806,1477246042,1477246042,https://stackoverflow.com/questions/40205232/using-gulp-src-to-include-all-files-except-js-files-not-in-3rd-party-dir,"<p>In gulp 3.x globs passed to <code>gulp.src()</code> are not evaluated in order. That means it is not possible to exclude a set of files and then reinclude a subset of the excluded files. </p>

<p>This will be possible with the <a href=""https://github.com/gulpjs/gulp/blob/4.0/CHANGELOG.md#400"" rel=""nofollow"">upcoming gulp 4.0</a>:</p>

<blockquote>
  <p>globs passed to gulp.src will be evaluated in order, which means this is possible <code>gulp.src(['*.js', '!b*.js', 'bad.js']</code>) (exclude every JS file that starts with a <code>b</code> except <code>bad.js</code>)</p>
</blockquote>

<p>For gulp 3.x there is the <a href=""https://www.npmjs.com/package/gulp-src-ordered-globs"" rel=""nofollow""><code>gulp-src-ordered-globs</code></a> package which can be used in place of the regular <code>gulp.src()</code>:</p>

<pre><code>var gulpSrc = require('gulp-src-ordered-globs');

return gulpSrc([
    'src/**/*',
    '!src/**/*.js', // no js files from src
    'src/**/3rd/*.js' // make sure to get 3rd party js files though
  ])
  .pipe(gulp.dest('dist'));
</code></pre>
",Sven Schoenung,,1477245740,1477245740,0
http://stackoverflow.com/a/40251516/1143732,remove the need for main_app prefix in path helpers in main app,1722,Pawel J. Wal,,1416308422,1477439178,0,https://stackoverflow.com/questions/26992675/remove-the-need-for-main-app-prefix-in-path-helpers-in-main-app,"<p>Add this in your controller:</p>

<pre><code>helper Rails.application.routes.url_helpers
</code></pre>
",MarkWPiper,,1477439178,1477439178,0
http://stackoverflow.com/a/40293333/3093378,Writing a type trait for detecting Matrix Expressions in Eigen,365,vsoftco,vsoftco,1477597644,1477610086,1477599624,https://stackoverflow.com/questions/40293062/writing-a-type-trait-for-detecting-matrix-expressions-in-eigen,"<p>Something like this here should do:</p>

<pre><code>template&lt;typename Derived&gt;
struct is_matrix_expression
 : std::is_base_of&lt;Eigen::MatrixBase&lt;std::decay_t&lt;Derived&gt; &gt;, std::decay_t&lt;Derived&gt; &gt;
{};
</code></pre>

<p>It prints true for the following piece of code:</p>

<pre><code>Eigen::MatrixXd A, B;
std::cout&lt;&lt; is_matrix_expression &lt;decltype(A*A + B)&gt;::value &lt;&lt;std::endl;   //true
std::cout&lt;&lt; is_matrix_expression &lt;int&gt;::value &lt;&lt;std::endl;                 //false
</code></pre>

<p>Idea is that here you know what the base class looks like: namely, for <code>SomeMatrixXpr</code>, it will be <code>MatrixBase&lt;SomeMatrixXpr&gt;</code> according to the <a href=""https://eigen.tuxfamily.org/dox/TopicClassHierarchy.html"" rel=""nofollow"">Eigen class hierarchy</a>. This is in contrast to @Yakk's approach, which works for any type of Base classes (even those not related by CRTP).</p>
",davidhigh,davidhigh,1477598724,1477610086,1477610086
http://stackoverflow.com/a/40426743/2395485,How can I pretty-print ASCII tables with Python?,63844,kdt,TrebledJ,1304676561,1552815015,1552815015,https://stackoverflow.com/questions/5909873/how-can-i-pretty-print-ascii-tables-with-python,"<p>I use this small utility function.</p>

<pre><code>def get_pretty_table(iterable, header):
    max_len = [len(x) for x in header]
    for row in iterable:
        row = [row] if type(row) not in (list, tuple) else row
        for index, col in enumerate(row):
            if max_len[index] &lt; len(str(col)):
                max_len[index] = len(str(col))
    output = '-' * (sum(max_len) + 1) + '\n'
    output += '|' + ''.join([h + ' ' * (l - len(h)) + '|' for h, l in zip(header, max_len)]) + '\n'
    output += '-' * (sum(max_len) + 1) + '\n'
    for row in iterable:
        row = [row] if type(row) not in (list, tuple) else row
        output += '|' + ''.join([str(c) + ' ' * (l - len(str(c))) + '|' for c, l in zip(row, max_len)]) + '\n'
    output += '-' * (sum(max_len) + 1) + '\n'
    return output

print get_pretty_table([[1, 2], [3, 4]], ['header 1', 'header 2'])
</code></pre>

<p>output</p>

<pre><code>-----------------
|header 1|header 2|
-----------------
|1       |2       |
|3       |4       |
-----------------
</code></pre>
",thavan,,1478274331,1478274331,0
http://stackoverflow.com/a/40443701/3162383,C++98/03 std::is_constructible implementation,1301,Broothy,iammilind,1478359528,1543093531,1482830658,https://stackoverflow.com/questions/40439909/c98-03-stdis-constructible-implementation,"<p>I think Danh's idea was great! With a minor modification we can eliminate the operator new. (I have a C++98 enable_if and remove_reference implementation). The mentioned int*, void* case works with this implementation too. No operator new required. Only the old g++ support remains...</p>

<pre><code>/********** std::remove_cv replacement **********/
template&lt; typename T &gt;
struct remove_const
{
    typedef T type;
};

template&lt; typename T &gt;
struct remove_const&lt; const T &gt;
{
    typedef T type;
};


template&lt; typename T &gt;
struct remove_volatile
{
    typedef T type;
};

template&lt; typename T &gt;
struct remove_volatile&lt; volatile T &gt;
{
    typedef T type;
};


template&lt; typename T &gt;
struct remove_cv
{
    typedef typename remove_volatile&lt; typename remove_const&lt; T &gt;::type &gt;::type type;
};


/********** std::is_pointer replacement *********/
template&lt; typename T &gt;
struct is_pointer_helper
{
    static const bool value = false;
};

template&lt; typename T &gt;
struct is_pointer_helper&lt; T* &gt;
{
    static const bool value = true;
};

template&lt; typename T &gt;
struct is_pointer
{
    static const bool value = is_pointer_helper&lt; typename remove_cv&lt; T &gt;::type &gt;::value;
};


/********** std::enable_if replacement **********/
template&lt; bool CONDITION, typename TYPE = void &gt;
struct enable_if
{
};

template&lt; typename TYPE &gt;
struct enable_if&lt; true, TYPE &gt;
{
    typedef TYPE type;
};


/****** std::remove_reference replacement *******/
template&lt; typename T &gt;
struct remove_reference
{
    typedef T type;
};

template&lt; typename T &gt;
struct remove_reference&lt; T&amp; &gt;
{
    typedef T type;
};


/******* std::is_constructible replacement ******/
template&lt; typename T, typename AT_1 = void, typename AT_2 = void, typename AT_3 = void, typename AT_4 = void &gt;
class is_constructible_impl
{
private:
    template&lt; typename C_T, typename C_AT_1, typename C_AT_2, typename C_AT_3, typename C_AT_4 &gt;
    static bool test(
        typename c_std::enable_if&lt;
            sizeof( C_T ) ==
            sizeof( C_T(
                static_cast&lt; C_AT_1 &gt;( *static_cast&lt; typename c_std::remove_reference&lt; C_AT_1 &gt;::type* &gt;( NULL ) ),
                static_cast&lt; C_AT_2 &gt;( *static_cast&lt; typename c_std::remove_reference&lt; C_AT_2 &gt;::type* &gt;( NULL ) ),
                static_cast&lt; C_AT_3 &gt;( *static_cast&lt; typename c_std::remove_reference&lt; C_AT_3 &gt;::type* &gt;( NULL ) ),
                static_cast&lt; C_AT_4 &gt;( *static_cast&lt; typename c_std::remove_reference&lt; C_AT_4 &gt;::type* &gt;( NULL ) )
            ) )
        &gt;::type*
    );

    template&lt; typename, typename, typename, typename, typename &gt;
    static int test( ... );

public:
    static const bool value = ( sizeof( test&lt; T, AT_1, AT_2, AT_3, AT_4 &gt;( NULL ) ) == sizeof( bool ) );
};

template&lt; typename T, typename AT_1, typename AT_2, typename AT_3 &gt;
class is_constructible_impl&lt; T, AT_1, AT_2, AT_3, void &gt;
{
private:
    template&lt; typename C_T, typename C_AT_1, typename C_AT_2, typename C_AT_3 &gt;
    static bool test(
        typename c_std::enable_if&lt;
            sizeof( C_T ) ==
            sizeof( C_T(
                static_cast&lt; C_AT_1 &gt;( *static_cast&lt; typename c_std::remove_reference&lt; C_AT_1 &gt;::type* &gt;( NULL ) ),
                static_cast&lt; C_AT_2 &gt;( *static_cast&lt; typename c_std::remove_reference&lt; C_AT_2 &gt;::type* &gt;( NULL ) ),
                static_cast&lt; C_AT_3 &gt;( *static_cast&lt; typename c_std::remove_reference&lt; C_AT_3 &gt;::type* &gt;( NULL ) )
            ) )
        &gt;::type*
    );

    template&lt; typename, typename, typename, typename &gt;
    static int test( ... );

public:
    static const bool value = ( sizeof( test&lt; T, AT_1, AT_2, AT_3 &gt;( NULL ) ) == sizeof( bool ) );
};

template&lt; typename T, typename AT_1, typename AT_2 &gt;
class is_constructible_impl&lt; T, AT_1, AT_2, void, void &gt;
{
private:

    template&lt; typename C_T, typename C_AT_1, typename C_AT_2 &gt;
    static bool test(
        typename c_std::enable_if&lt;
            sizeof( C_T ) ==
            sizeof( C_T(
                static_cast&lt; C_AT_1 &gt;( *static_cast&lt; typename c_std::remove_reference&lt; C_AT_1 &gt;::type* &gt;( NULL ) ),
                static_cast&lt; C_AT_2 &gt;( *static_cast&lt; typename c_std::remove_reference&lt; C_AT_2 &gt;::type* &gt;( NULL ) )
            ) )
        &gt;::type*
    );

    template&lt; typename, typename, typename &gt;
    static int test( ... );

public:
    static const bool value = ( sizeof( test&lt; T, AT_1, AT_2 &gt;( NULL ) ) == sizeof( bool ) );
};

template&lt; typename T, typename AT_1 &gt;
class is_constructible_impl&lt; T, AT_1, void, void, void &gt;
{
private:
    template&lt; typename C_T, typename C_AT_1 &gt;
    static bool test(
        typename c_std::enable_if&lt;
            sizeof( C_T ) ==
            sizeof( C_T(
                static_cast&lt; C_AT_1 &gt;( *static_cast&lt; typename c_std::remove_reference&lt; C_AT_1 &gt;::type* &gt;( NULL ) )
            ) )
        &gt;::type*
    );

    template&lt; typename, typename &gt;
    static int test( ... );

public:
    static const bool value = ( sizeof( test&lt; T, AT_1 &gt;( NULL ) ) == sizeof( bool ) );
};

template&lt; typename T &gt;
class is_constructible_impl&lt; T, void, void, void, void &gt;
{
private:
    template&lt; typename C_T &gt;
    static C_T testFun( C_T );

    template&lt; typename C_T &gt;
    static bool test( typename c_std::enable_if&lt; sizeof( C_T ) == sizeof( testFun( C_T() ) ) &gt;::type* );

    template&lt; typename &gt;
    static int test( ... );

public:
    static const bool value = ( sizeof( test&lt; T &gt;( NULL ) ) == sizeof( bool ) );
};

template&lt; typename T, typename AT_1 = void, typename AT_2 = void, typename AT_3 = void, typename AT_4 = void &gt;
class is_constructible_impl_ptr
{
public:
    static const bool value = false;
};

template&lt; typename T, typename AT_1 &gt;
class is_constructible_impl_ptr&lt; T, AT_1, typename enable_if&lt; is_pointer&lt; typename remove_reference&lt; T &gt;::type &gt;::value, void &gt;::type, void, void &gt;
{
private:
    template&lt; typename C_T &gt;
    static bool test( C_T );

    template&lt; typename &gt;
    static int test( ... );

public:
    static const bool value = ( sizeof( test&lt; T &gt;( static_cast&lt; AT_1 &gt;( NULL ) ) ) == sizeof( bool ) );
};

template&lt; typename T &gt;
class is_constructible_impl_ptr&lt; T, void, void, void, void &gt;
{
public:
    static const bool value = true;
};

template&lt; typename T, typename AT_1 = void, typename AT_2 = void, typename AT_3 = void, typename AT_4 = void &gt;
class is_constructible
{
public:
    static const bool value = (
        is_pointer&lt; typename remove_reference&lt; T &gt;::type &gt;::value ?
            is_constructible_impl_ptr&lt; T, AT_1, AT_2, AT_3, AT_4 &gt;::value :
            is_constructible_impl&lt; T, AT_1, AT_2, AT_3, AT_4 &gt;::value
    );
};
</code></pre>
",Broothy,Broothy,1478383597,1478430366,1478430366
http://stackoverflow.com/a/4049562/382458,Programmatically get the cache line size?,68448,paxos1977,Community,1240856247,1536729038,1495541431,https://stackoverflow.com/questions/794632/programmatically-get-the-cache-line-size,"<p>I have been working on some cache line stuff and needed to write a cross-platform function. I committed it to a github repo at <a href=""https://github.com/NickStrupat/CacheLineSize"">https://github.com/NickStrupat/CacheLineSize</a>, or you can just use the source below. Feel free to do whatever you want with it.</p>

<pre><code>#ifndef GET_CACHE_LINE_SIZE_H_INCLUDED
#define GET_CACHE_LINE_SIZE_H_INCLUDED

// Author: Nick Strupat
// Date: October 29, 2010
// Returns the cache line size (in bytes) of the processor, or 0 on failure

#include &lt;stddef.h&gt;
size_t cache_line_size();

#if defined(__APPLE__)

#include &lt;sys/sysctl.h&gt;
size_t cache_line_size() {
    size_t line_size = 0;
    size_t sizeof_line_size = sizeof(line_size);
    sysctlbyname(""hw.cachelinesize"", &amp;line_size, &amp;sizeof_line_size, 0, 0);
    return line_size;
}

#elif defined(_WIN32)

#include &lt;stdlib.h&gt;
#include &lt;windows.h&gt;
size_t cache_line_size() {
    size_t line_size = 0;
    DWORD buffer_size = 0;
    DWORD i = 0;
    SYSTEM_LOGICAL_PROCESSOR_INFORMATION * buffer = 0;

    GetLogicalProcessorInformation(0, &amp;buffer_size);
    buffer = (SYSTEM_LOGICAL_PROCESSOR_INFORMATION *)malloc(buffer_size);
    GetLogicalProcessorInformation(&amp;buffer[0], &amp;buffer_size);

    for (i = 0; i != buffer_size / sizeof(SYSTEM_LOGICAL_PROCESSOR_INFORMATION); ++i) {
        if (buffer[i].Relationship == RelationCache &amp;&amp; buffer[i].Cache.Level == 1) {
            line_size = buffer[i].Cache.LineSize;
            break;
        }
    }

    free(buffer);
    return line_size;
}

#elif defined(linux)

#include &lt;stdio.h&gt;
size_t cache_line_size() {
    FILE * p = 0;
    p = fopen(""/sys/devices/system/cpu/cpu0/cache/index0/coherency_line_size"", ""r"");
    unsigned int i = 0;
    if (p) {
        fscanf(p, ""%d"", &amp;i);
        fclose(p);
    }
    return i;
}

#else
#error Unrecognized platform
#endif

#endif
</code></pre>
",Nick Strupat,Nick Strupat,1288334176,1399752800,1399752800
http://stackoverflow.com/a/4050444/133408,Replace PHP&#39;s realpath(),23023,Christian,,1288337273,1427815538,0,https://stackoverflow.com/questions/4049856/replace-phps-realpath,"<p>Thanks to Sven Arduwie's code (<a href=""https://stackoverflow.com/a/4049876/662581"">pointed out by Pekka</a>) and some modification, I've built a (hopefully) better implementation:</p>

<pre><code>/**
 * This function is to replace PHP's extremely buggy realpath().
 * @param string The original path, can be relative etc.
 * @return string The resolved path, it might not exist.
 */
function truepath($path){
    // whether $path is unix or not
    $unipath=strlen($path)==0 || $path{0}!='/';
    // attempts to detect if path is relative in which case, add cwd
    if(strpos($path,':')===false &amp;&amp; $unipath)
        $path=getcwd().DIRECTORY_SEPARATOR.$path;
    // resolve path parts (single dot, double dot and double delimiters)
    $path = str_replace(array('/', '\\'), DIRECTORY_SEPARATOR, $path);
    $parts = array_filter(explode(DIRECTORY_SEPARATOR, $path), 'strlen');
    $absolutes = array();
    foreach ($parts as $part) {
        if ('.'  == $part) continue;
        if ('..' == $part) {
            array_pop($absolutes);
        } else {
            $absolutes[] = $part;
        }
    }
    $path=implode(DIRECTORY_SEPARATOR, $absolutes);
    // resolve any symlinks
    if(file_exists($path) &amp;&amp; linkinfo($path)&gt;0)$path=readlink($path);
    // put initial separator that could have been lost
    $path=!$unipath ? '/'.$path : $path;
    return $path;
}
</code></pre>

<p><strong>NB:</strong> Unlike PHP's <code>realpath</code>, this function does not return false on error; it returns a path which is as far as it could to resolving these quirks.</p>

<p><strong>Note 2:</strong> Apparently some people can't read properly. Truepath() does not work on network resources including UNC and URLs. <strong>It works for the local file system only.</strong></p>
",Christian,Community,1288343066,1399043216,1495540411
http://stackoverflow.com/a/4056848/1300519,What is the easiest way to make an optional C extension for a python package?,1919,Jason Baker,,1288397461,1436254848,0,https://stackoverflow.com/questions/4056657/what-is-the-easiest-way-to-make-an-optional-c-extension-for-a-python-package,"<pre><code>ext_modules = []
if '--add-this' in sys.argv:
    ext_modules.append(Extension(...))
    sys.argv.remove('--add-this')
setup(...
      ext_modules = ext_modules
)
</code></pre>

<p>This is hacky, but might be easiest. A more advanced approach would be to extend the Distribution class to support a flag, say <code>--with-modules</code> and then customize ext_modules inside finalize_options.</p>
",Martin v. Lwis,,1288401684,1288401684,0
http://stackoverflow.com/a/4059399/1796523,Unit Testing with items that need to send headers,19829,Mez,kenorb,1223618506,1517600123,1517600123,https://stackoverflow.com/questions/190292/unit-testing-with-items-that-need-to-send-headers,"<p>phpUnit prints output as the tests run thus causing headers_sent() to return true even in your first test.</p>

<p>To overcome this issue for an entire test suite you simply need to use ob_start() in your setup script.</p>

<p>For example, say you have a file named AllTests.php that is the first thing loaded by phpUnit. That script might look like the following:</p>

<pre><code>&lt;?php

ob_start();

require_once 'YourFramework/AllTests.php';

class AllTests {
    public static function suite() {
        $suite = new PHPUnit_Framework_TestSuite('YourFramework');
        $suite-&gt;addTest(YourFramework_AllTests::suite());
        return $suite;
    }
}
</code></pre>
",Michael,,1288453441,1288453441,0
http://stackoverflow.com/a/40622794/312785,Algorithm for determining equality of circular data structures in JavaScript,229,davidchambers,,1479254315,1479262376,0,https://stackoverflow.com/questions/40621848/algorithm-for-determining-equality-of-circular-data-structures-in-javascript,"<p>A basic way to solve this problem is to note that if, during a recursive comparison, we ever end up again comparing the same pair of objects that we're already comparing, then <em>we may simply assume that they're equal.</em>  This works because, if they're <em>not</em> equal after all, then the comparison that is already in progress will eventually find some difference between them.</p>

<p>Thus, we may simply start with a basic recursive comparison function, and add a stack of objects being currently compared:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function isEqual (a, b) {
    var stack = [];
    function _isEqual (a, b) {
        // console.log(""-&gt;"", stack.length);
        // handle some simple cases first
        if (a === b) return true;
        if (typeof(a) !== ""object"" || typeof(b) !== ""object"") return false;
        // XXX: typeof(null) === ""object"", but Object.getPrototypeOf(null) throws!
        if (a === null || b === null) return false;
        var proto = Object.getPrototypeOf(a);
        if (proto !== Object.getPrototypeOf(b)) return false;
        // assume that non-identical objects of unrecognized type are not equal
        // XXX: could add code here to properly compare e.g. Date objects
        if (proto !== Object.prototype &amp;&amp; proto !== Array.prototype) return false;

        // check the stack before doing a recursive comparison
        for (var i = 0; i &lt; stack.length; i++) {
            if (a === stack[i][0] &amp;&amp; b === stack[i][1]) return true;
            // if (b === stack[i][0] &amp;&amp; a === stack[i][1]) return true;
        }

        // do the objects even have the same keys?
        for (var prop in a) if (!(prop in b)) return false;
        for (var prop in b) if (!(prop in a)) return false;

        // nothing to do but recurse!
        stack.push([a, b]);
        for (var prop in a) {
            if (!(_isEqual(a[prop], b[prop]))) {
                stack.pop();
                return false;
            }
        }
        stack.pop();
        return true;
    }
    return _isEqual(a, b);
}

// TEST CASES:

var ones = [1]; ones[1] = ones;
var foo = [1]; foo[1] = [1, foo];
var bar = [1]; bar[1] = [1, ones];
console.log(""ones == foo:"", isEqual(ones, foo));
console.log(""ones == bar:"", isEqual(ones, bar));
console.log(""foo == bar:"", isEqual(foo, bar));

var obj = {}; obj[""x""] = obj; obj[""y""] = {obj};
console.log(""obj == obj[x]:"", isEqual(obj, obj[""x""]));
console.log(""obj != obj[y]:"", !isEqual(obj, obj[""y""]));

var seven = []; seven[0] = [[[[[[seven]]]]]];
var eleven = []; eleven[0] = [[[[[[[[[[eleven]]]]]]]]]];
console.log(""seven == eleven:"", isEqual(seven, eleven));
console.log(""[seven] == [eleven]:"", isEqual([seven], [eleven]));
console.log(""[seven] == seven:"", isEqual([seven], seven));
console.log(""[seven] == [[[eleven]]]:"", isEqual([seven], [[[eleven]]]));</code></pre>
</div>
</div>
</p>

<p>Note that a lot of the complexity in the code above is due to it trying to accept and (more or less) gracefully handle any mixture of different kinds of JavaScript values, including primitives, null values, arrays, plain objects and all the other miscellaneous things a JS variable can contain.  If you know your inputs can only contain a limited range of data types, then it may be possible to simplify this code considerably.</p>

<p>Ps. Due to the stack comparison, the runtime of this code can be up to O(<em>nd</em>), where <em>n</em> is the number of nodes in the trees that need to be compared (which can be more than expected; for example, comparing the objects <code>seven</code> and <code>eleven</code> in the snippet above takes 77 recursive calls) and <em>d</em> is the depth of the stack (which, in this case, also gets up to 77).  In ES2015, a potentially useful optimization could be to use a <a href=""https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Map"" rel=""nofollow noreferrer"">Map</a> of previously seen objects to reduce the stack lookup from O(<em>d</em>) to effectively O(1).  If we expected the data structures being compared to generally have a lot of repetitive branches containing references to the same objects, it might even be useful to expand this into a general cache of previously seen objects that we've already found to be equal.</p>
",Ilmari Karonen,Ilmari Karonen,1479261209,1479262376,1479262376
http://stackoverflow.com/a/406408/153718,Regular expression to match a line that doesn&#39;t contain a word,3009963,knaser,Harsha Biyani,1230881416,1559111022,1559111022,https://stackoverflow.com/questions/406230/regular-expression-to-match-a-line-that-doesnt-contain-a-word,"<p>The notion that regex doesn't support inverse matching is not entirely true. You can mimic this behavior by using negative look-arounds:</p>

<pre><code>^((?!hede).)*$
</code></pre>

<p>The regex above will match any string, or line without a line break, <strong>not</strong> containing the (sub)string 'hede'. As mentioned, this is not something regex is ""good"" at (or should do), but still, it <em>is</em> possible. </p>

<p>And if you need to match line break chars as well, use the <a href=""http://perldoc.perl.org/perlre.html#Modifiers"" rel=""noreferrer"">DOT-ALL modifier</a> (the trailing <code>s</code> in the following pattern):</p>

<pre><code>/^((?!hede).)*$/s
</code></pre>

<p>or use it inline:</p>

<pre><code>/(?s)^((?!hede).)*$/
</code></pre>

<p><em>(where the <code>/.../</code> are the regex delimiters, i.e., not part of the pattern)</em></p>

<p>If the DOT-ALL modifier is not available, you can mimic the same behavior with the character class <code>[\s\S]</code>:</p>

<pre><code>/^((?!hede)[\s\S])*$/
</code></pre>

<h2>Explanation</h2>

<p>A string is just a list of <code>n</code> characters. Before, and after each character, there's an empty string. So a list of <code>n</code> characters will have <code>n+1</code> empty strings. Consider the string <code>""ABhedeCD""</code>:</p>

<pre><code>    
S = e1 A e2 B e3 h e4 e e5 d e6 e e7 C e8 D e9
    

index    0      1      2      3      4      5      6      7
</code></pre>

<p>where the <code>e</code>'s are the empty strings. The regex <code>(?!hede).</code> looks ahead to see if there's no substring <code>""hede""</code> to be seen, and if that is the case (so something else is seen), then the <code>.</code> (dot) will match any character except a line break. Look-arounds are also called <em>zero-width-assertions</em> because they don't <em>consume</em> any characters. They only assert/validate something. </p>

<p>So, in my example, every empty string is first validated to see if there's no <code>""hede""</code> up ahead, before a character is consumed by the <code>.</code> (dot). The regex <code>(?!hede).</code> will do that only once, so it is wrapped in a group, and repeated zero or more times: <code>((?!hede).)*</code>. Finally, the start- and end-of-input are anchored to make sure the entire input is consumed: <code>^((?!hede).)*$</code></p>

<p>As you can see, the input <code>""ABhedeCD""</code> will fail because on <code>e3</code>, the regex <code>(?!hede)</code> fails (there <em>is</em> <code>""hede""</code> up ahead!).</p>
",Bart Kiers,Mark Amery,1230890105,1494275749,1494275749
http://stackoverflow.com/a/40696119/3823857,converting scipy.sparse.csr.csr_matrix to a list of lists,5113,Saurabh,hpaulj,1479571328,1479578116,1479576388,https://stackoverflow.com/questions/40694972/converting-scipy-sparse-csr-csr-matrix-to-a-list-of-lists,"<p>I don't know what <code>tf-idf</code> expects, but I may be able help with the sparse end.</p>

<p>Make a sparse matrix:</p>

<pre><code>In [526]: M=sparse.random(4,10,.1)
In [527]: M
Out[527]: 
&lt;4x10 sparse matrix of type '&lt;class 'numpy.float64'&gt;'
    with 4 stored elements in COOrdinate format&gt;
In [528]: print(M)
  (3, 1)    0.281301619779
  (2, 6)    0.830780358032
  (1, 1)    0.242503399296
  (2, 2)    0.190933579917
</code></pre>

<p>Now convert it to <code>coo</code> format.  This is already that (I could have given the <code>random</code> a format parameter).  In any case the values in <code>coo</code> format are stored in 3 arrays:</p>

<pre><code>In [529]: Mc=M.tocoo()
In [530]: Mc.data
Out[530]: array([ 0.28130162,  0.83078036,  0.2425034 ,  0.19093358])
In [532]: Mc.row
Out[532]: array([3, 2, 1, 2], dtype=int32)
In [533]: Mc.col
Out[533]: array([1, 6, 1, 2], dtype=int32)
</code></pre>

<p>Looks like you want to ignore <code>Mc.row</code>, and somehow join the others.</p>

<p>For example as a dictionary:</p>

<pre><code>In [534]: {k:v for k,v in zip(Mc.col, Mc.data)}
Out[534]: {1: 0.24250339929583264, 2: 0.19093357991697379, 6: 0.83078035803205375}
</code></pre>

<p>or a columns in a 2d array:</p>

<pre><code>In [535]: np.column_stack((Mc.col, Mc.data))
Out[535]: 
array([[ 1.        ,  0.28130162],
       [ 6.        ,  0.83078036],
       [ 1.        ,  0.2425034 ],
       [ 2.        ,  0.19093358]])
</code></pre>

<p>(Also <code>np.array((Mc.col, Mc.data)).T</code>)</p>

<p>Or as just a list of arrays <code>[Mc.col, Mc.data]</code>, or <code>[Mc.col.tolist(), Mc.data.tolist()]</code> list of lists, etc.</p>

<p>Can you take it from there?</p>
",hpaulj,,1479578116,1479578116,0
http://stackoverflow.com/a/4071488/654755,Resetting cache for Django cached template loader,3556,DataGreed,,1288631238,1443516271,0,https://stackoverflow.com/questions/4071221/resetting-cache-for-django-cached-template-loader,"<p>By digging into django's source, you could find the template loaders for current server instance are stored at <code>django.template.loader.template_source_loaders</code>.</p>

<p>When you're using cached loader, there would be only one loader out there. So you can get it and calls its reset function to reset template cache.</p>

<p>Here are some code snippets, I haven't test it myself.</p>

<pre><code>from django.template.loader import template_source_loaders
loader = template_source_loaders[0]
loader.reset()
</code></pre>

<p>If you check <code>django.template.loaders.cached</code>, you can see that django simply use one variable <code>template_cache</code> to hold the template name to template path cache. It doesn't use memcached. So it should be reset when django restart.</p>
",adieu,,1288633101,1288633101,0
http://stackoverflow.com/a/4073700/4228275,C++: Rounding up to the nearest multiple of a number,107790,Robben_Ford_Fan_boy,Josh Lee,1280935163,1561403247,1561403247,https://stackoverflow.com/questions/3407012/c-rounding-up-to-the-nearest-multiple-of-a-number,"<p>This works when factor will always be positive:</p>

<pre><code>int round_up(int num, int factor)
{
    return num + factor - 1 - (num - 1) % factor;
}
</code></pre>

<p>Edit: This returns <code>round_up(0,100)=100</code>. Please see Paul's comment below for a solution that returns <code>round_up(0,100)=0</code>.</p>
",xlq,Mark Lakata,1288651287,1539893211,1539893211
